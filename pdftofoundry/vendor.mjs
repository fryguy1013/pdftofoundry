var __defProp2=Object.defineProperty;var __name2=(target,value)=>__defProp2(target,"name",{value,configurable:!0});var __defProp=Object.defineProperty,__defNormalProp=__name2((obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,"__defNormalProp"),__name=__name2((target,value)=>__defProp(target,"name",{value,configurable:!0}),"__name"),__publicField=__name2((obj,key,value)=>(__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value),"__publicField"),__accessCheck=__name2((obj,member,msg)=>{if(!member.has(obj))throw TypeError("Cannot "+msg)},"__accessCheck"),__privateGet=__name2((obj,member,getter)=>(__accessCheck(obj,member,"read from private field"),getter?getter.call(obj):member.get(obj)),"__privateGet"),__privateAdd=__name2((obj,member,value)=>{if(member.has(obj))throw TypeError("Cannot add the same private member more than once");member instanceof WeakSet?member.add(obj):member.set(obj,value)},"__privateAdd"),__privateSet=__name2((obj,member,value,setter)=>(__accessCheck(obj,member,"write to private field"),setter?setter.call(obj,value):member.set(obj,value),value),"__privateSet"),__privateWrapper=__name2((obj,member,setter,getter)=>({set _(value){__privateSet(obj,member,value,setter)},get _(){return __privateGet(obj,member,getter)}}),"__privateWrapper"),__privateMethod=__name2((obj,member,method)=>(__accessCheck(obj,member,"access private method"),method),"__privateMethod");const semver=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,validateAndParse=__name(version2=>{if(typeof version2!="string")throw new TypeError("Invalid argument expected string");const match=version2.match(semver);if(!match)throw new Error(`Invalid argument not valid semver ('${version2}' received)`);return match.shift(),match},"validateAndParse"),isWildcard=__name(s=>s==="*"||s==="x"||s==="X","isWildcard"),tryParse=__name(v=>{const n=parseInt(v,10);return isNaN(n)?v:n},"tryParse"),forceType=__name((a,b)=>typeof a!=typeof b?[String(a),String(b)]:[a,b],"forceType"),compareStrings=__name((a,b)=>{if(isWildcard(a)||isWildcard(b))return 0;const[ap,bp]=forceType(tryParse(a),tryParse(b));return ap>bp?1:ap<bp?-1:0},"compareStrings"),compareSegments=__name((a,b)=>{for(let i=0;i<Math.max(a.length,b.length);i++){const r=compareStrings(a[i]||"0",b[i]||"0");if(r!==0)return r}return 0},"compareSegments"),compareVersions=__name((v1,v2)=>{const n1=validateAndParse(v1),n2=validateAndParse(v2),p1=n1.pop(),p2=n2.pop(),r=compareSegments(n1,n2);return r!==0?r:p1&&p2?compareSegments(p1.split("."),p2.split(".")):p1||p2?p1?-1:1:0},"compareVersions"),compare=__name((v1,v2,operator)=>{assertValidOperator(operator);const res=compareVersions(v1,v2);return operatorResMap[operator].includes(res)},"compare"),operatorResMap={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},allowedOperators=Object.keys(operatorResMap),assertValidOperator=__name(op=>{if(typeof op!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof op}`);if(allowedOperators.indexOf(op)===-1)throw new Error(`Invalid operator, expected one of ${allowedOperators.join("|")}`)},"assertValidOperator");function normalizeArray(parts,allowAboveRoot){for(var up=0,i=parts.length-1;i>=0;i--){var last=parts[i];last==="."?parts.splice(i,1):last===".."?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}if(allowAboveRoot)for(;up--;up)parts.unshift("..");return parts}__name2(normalizeArray,"normalizeArray"),__name(normalizeArray,"normalizeArray");function normalize(path){var isPathAbsolute=isAbsolute(path),trailingSlash=substr(path,-1)==="/";return path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isPathAbsolute).join("/"),!path&&!isPathAbsolute&&(path="."),path&&trailingSlash&&(path+="/"),(isPathAbsolute?"/":"")+path}__name2(normalize,"normalize"),__name(normalize,"normalize");function isAbsolute(path){return path.charAt(0)==="/"}__name2(isAbsolute,"isAbsolute"),__name(isAbsolute,"isAbsolute");function join(){var paths=Array.prototype.slice.call(arguments,0);return normalize(filter(paths,function(p,index){if(typeof p!="string")throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))}__name2(join,"join"),__name(join,"join");function filter(xs,f){if(xs.filter)return xs.filter(f);for(var res=[],i=0;i<xs.length;i++)f(xs[i],i,xs)&&res.push(xs[i]);return res}__name2(filter,"filter"),__name(filter,"filter");var substr="ab".substr(-1)==="b"?function(str,start,len){return str.substr(start,len)}:function(str,start,len){return start<0&&(start=str.length+start),str.substr(start,len)},commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(n){if(n.__esModule)return n;var f=n.default;if(typeof f=="function"){var a=__name(__name2(function a2(){return this instanceof a2?Reflect.construct(f,arguments,this.constructor):f.apply(this,arguments)},"a2"),"a");a.prototype=f.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(n).forEach(function(k){var d=Object.getOwnPropertyDescriptor(n,k);Object.defineProperty(a,k,d.get?d:{enumerable:!0,get:function(){return n[k]}})}),a}__name2(getAugmentedNamespace,"getAugmentedNamespace"),__name(getAugmentedNamespace,"getAugmentedNamespace");function commonjsRequire(path){throw new Error('Could not dynamically require "'+path+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}__name2(commonjsRequire,"commonjsRequire"),__name(commonjsRequire,"commonjsRequire");var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$7=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){__name(__name2(function(root,factory){module.exports=factory()},"webpackUniversalModuleDefinition"),"webpackUniversalModuleDefinition")(globalThis,()=>(()=>{var __webpack_modules__=[,(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.VerbosityLevel=exports2.Util=exports2.UnknownErrorException=exports2.UnexpectedResponseException=exports2.UNSUPPORTED_FEATURES=exports2.TextRenderingMode=exports2.StreamType=exports2.RenderingIntentFlag=exports2.PermissionFlag=exports2.PasswordResponses=exports2.PasswordException=exports2.PageActionEventType=exports2.OPS=exports2.MissingPDFException=exports2.LINE_FACTOR=exports2.LINE_DESCENT_FACTOR=exports2.InvalidPDFException=exports2.ImageKind=exports2.IDENTITY_MATRIX=exports2.FormatError=exports2.FontType=exports2.FeatureTest=exports2.FONT_IDENTITY_MATRIX=exports2.DocumentActionEventType=exports2.CMapCompressionType=exports2.BaseException=exports2.AnnotationType=exports2.AnnotationStateModelType=exports2.AnnotationReviewState=exports2.AnnotationReplyType=exports2.AnnotationMode=exports2.AnnotationMarkedState=exports2.AnnotationFlag=exports2.AnnotationFieldFlag=exports2.AnnotationEditorType=exports2.AnnotationEditorPrefix=exports2.AnnotationEditorParamsType=exports2.AnnotationBorderStyleType=exports2.AnnotationActionEventType=exports2.AbortException=void 0,exports2.arrayByteLength=arrayByteLength,exports2.arraysToBytes=arraysToBytes,exports2.assert=assert,exports2.bytesToString=bytesToString,exports2.createPromiseCapability=createPromiseCapability,exports2.createValidAbsoluteUrl=createValidAbsoluteUrl,exports2.escapeString=escapeString,exports2.getModificationDate=getModificationDate,exports2.getVerbosityLevel=getVerbosityLevel,exports2.info=info,exports2.isArrayBuffer=isArrayBuffer,exports2.isArrayEqual=isArrayEqual,exports2.isAscii=isAscii,exports2.objectFromMap=objectFromMap,exports2.objectSize=objectSize,exports2.setVerbosityLevel=setVerbosityLevel,exports2.shadow=shadow,exports2.string32=string32,exports2.stringToBytes=stringToBytes,exports2.stringToPDFString=stringToPDFString,exports2.stringToUTF16BEString=stringToUTF16BEString,exports2.stringToUTF8String=stringToUTF8String,exports2.unreachable=unreachable,exports2.utf8StringToString=utf8StringToString,exports2.warn=warn,__w_pdfjs_require__2(2);const IDENTITY_MATRIX=[1,0,0,1,0,0];exports2.IDENTITY_MATRIX=IDENTITY_MATRIX;const FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];exports2.FONT_IDENTITY_MATRIX=FONT_IDENTITY_MATRIX;const LINE_FACTOR=1.35;exports2.LINE_FACTOR=LINE_FACTOR;const LINE_DESCENT_FACTOR=.35;exports2.LINE_DESCENT_FACTOR=LINE_DESCENT_FACTOR;const RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};exports2.RenderingIntentFlag=RenderingIntentFlag;const AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};exports2.AnnotationMode=AnnotationMode;const AnnotationEditorPrefix="pdfjs_internal_editor_";exports2.AnnotationEditorPrefix=AnnotationEditorPrefix;const AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};exports2.AnnotationEditorType=AnnotationEditorType;const AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};exports2.AnnotationEditorParamsType=AnnotationEditorParamsType;const PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};exports2.PermissionFlag=PermissionFlag;const TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};exports2.TextRenderingMode=TextRenderingMode;const ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};exports2.ImageKind=ImageKind;const AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};exports2.AnnotationType=AnnotationType;const AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};exports2.AnnotationStateModelType=AnnotationStateModelType;const AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};exports2.AnnotationMarkedState=AnnotationMarkedState;const AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};exports2.AnnotationReviewState=AnnotationReviewState;const AnnotationReplyType={GROUP:"Group",REPLY:"R"};exports2.AnnotationReplyType=AnnotationReplyType;const AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};exports2.AnnotationFlag=AnnotationFlag;const AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};exports2.AnnotationFieldFlag=AnnotationFieldFlag;const AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};exports2.AnnotationBorderStyleType=AnnotationBorderStyleType;const AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};exports2.AnnotationActionEventType=AnnotationActionEventType;const DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};exports2.DocumentActionEventType=DocumentActionEventType;const PageActionEventType={O:"PageOpen",C:"PageClose"};exports2.PageActionEventType=PageActionEventType;const StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};exports2.StreamType=StreamType;const FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};exports2.FontType=FontType;const VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};exports2.VerbosityLevel=VerbosityLevel;const CMapCompressionType={NONE:0,BINARY:1,STREAM:2};exports2.CMapCompressionType=CMapCompressionType;const OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};exports2.OPS=OPS;const UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};exports2.UNSUPPORTED_FEATURES=UNSUPPORTED_FEATURES;const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};exports2.PasswordResponses=PasswordResponses;let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(level){Number.isInteger(level)&&(verbosity=level)}__name2(setVerbosityLevel,"setVerbosityLevel"),__name(setVerbosityLevel,"setVerbosityLevel");function getVerbosityLevel(){return verbosity}__name2(getVerbosityLevel,"getVerbosityLevel"),__name(getVerbosityLevel,"getVerbosityLevel");function info(msg){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${msg}`)}__name2(info,"info"),__name(info,"info");function warn(msg){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${msg}`)}__name2(warn,"warn"),__name(warn,"warn");function unreachable(msg){throw new Error(msg)}__name2(unreachable,"unreachable"),__name(unreachable,"unreachable");function assert(cond,msg){cond||unreachable(msg)}__name2(assert,"assert"),__name(assert,"assert");function _isValidProtocol(url){if(!url)return!1;switch(url.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}__name2(_isValidProtocol,"_isValidProtocol"),__name(_isValidProtocol,"_isValidProtocol");function createValidAbsoluteUrl(url,baseUrl=null,options=null){if(!url)return null;try{if(options&&typeof url=="string"){if(options.addDefaultProtocol&&url.startsWith("www.")){const dots=url.match(/\./g);dots&&dots.length>=2&&(url=`http://${url}`)}if(options.tryConvertEncoding)try{url=stringToUTF8String(url)}catch{}}const absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(_isValidProtocol(absoluteUrl))return absoluteUrl}catch{}return null}__name2(createValidAbsoluteUrl,"createValidAbsoluteUrl"),__name(createValidAbsoluteUrl,"createValidAbsoluteUrl");function shadow(obj,prop,value){return Object.defineProperty(obj,prop,{value,enumerable:!0,configurable:!0,writable:!1}),value}__name2(shadow,"shadow"),__name(shadow,"shadow");const BaseException=__name(__name2(function(){function BaseException2(message,name){this.constructor===BaseException2&&unreachable("Cannot initialize BaseException."),this.message=message,this.name=name}return __name2(BaseException2,"BaseException2"),__name(BaseException2,"BaseException"),BaseException2.prototype=new Error,BaseException2.constructor=BaseException2,BaseException2},"BaseExceptionClosure"),"BaseExceptionClosure")();exports2.BaseException=BaseException;const _PasswordException=class extends BaseException{static{__name2(this,"_PasswordException")}constructor(msg,code){super(msg,"PasswordException"),this.code=code}};__name(_PasswordException,"PasswordException");let PasswordException=_PasswordException;exports2.PasswordException=PasswordException;const _UnknownErrorException=class extends BaseException{static{__name2(this,"_UnknownErrorException")}constructor(msg,details){super(msg,"UnknownErrorException"),this.details=details}};__name(_UnknownErrorException,"UnknownErrorException");let UnknownErrorException=_UnknownErrorException;exports2.UnknownErrorException=UnknownErrorException;const _InvalidPDFException=class extends BaseException{static{__name2(this,"_InvalidPDFException")}constructor(msg){super(msg,"InvalidPDFException")}};__name(_InvalidPDFException,"InvalidPDFException");let InvalidPDFException=_InvalidPDFException;exports2.InvalidPDFException=InvalidPDFException;const _MissingPDFException=class extends BaseException{static{__name2(this,"_MissingPDFException")}constructor(msg){super(msg,"MissingPDFException")}};__name(_MissingPDFException,"MissingPDFException");let MissingPDFException=_MissingPDFException;exports2.MissingPDFException=MissingPDFException;const _UnexpectedResponseException=class extends BaseException{static{__name2(this,"_UnexpectedResponseException")}constructor(msg,status){super(msg,"UnexpectedResponseException"),this.status=status}};__name(_UnexpectedResponseException,"UnexpectedResponseException");let UnexpectedResponseException=_UnexpectedResponseException;exports2.UnexpectedResponseException=UnexpectedResponseException;const _FormatError=class extends BaseException{static{__name2(this,"_FormatError")}constructor(msg){super(msg,"FormatError")}};__name(_FormatError,"FormatError");let FormatError=_FormatError;exports2.FormatError=FormatError;const _AbortException=class extends BaseException{static{__name2(this,"_AbortException")}constructor(msg){super(msg,"AbortException")}};__name(_AbortException,"AbortException");let AbortException=_AbortException;exports2.AbortException=AbortException;function bytesToString(bytes){(typeof bytes!="object"||bytes===null||bytes.length===void 0)&&unreachable("Invalid argument for bytesToString");const length=bytes.length,MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT)return String.fromCharCode.apply(null,bytes);const strBuf=[];for(let i=0;i<length;i+=MAX_ARGUMENT_COUNT){const chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length),chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk))}return strBuf.join("")}__name2(bytesToString,"bytesToString"),__name(bytesToString,"bytesToString");function stringToBytes(str){typeof str!="string"&&unreachable("Invalid argument for stringToBytes");const length=str.length,bytes=new Uint8Array(length);for(let i=0;i<length;++i)bytes[i]=str.charCodeAt(i)&255;return bytes}__name2(stringToBytes,"stringToBytes"),__name(stringToBytes,"stringToBytes");function arrayByteLength(arr){if(arr.length!==void 0)return arr.length;if(arr.byteLength!==void 0)return arr.byteLength;unreachable("Invalid argument for arrayByteLength")}__name2(arrayByteLength,"arrayByteLength"),__name(arrayByteLength,"arrayByteLength");function arraysToBytes(arr){const length=arr.length;if(length===1&&arr[0]instanceof Uint8Array)return arr[0];let resultLength=0;for(let i=0;i<length;i++)resultLength+=arrayByteLength(arr[i]);let pos=0;const data=new Uint8Array(resultLength);for(let i=0;i<length;i++){let item=arr[i];item instanceof Uint8Array||(typeof item=="string"?item=stringToBytes(item):item=new Uint8Array(item));const itemLength=item.byteLength;data.set(item,pos),pos+=itemLength}return data}__name2(arraysToBytes,"arraysToBytes"),__name(arraysToBytes,"arraysToBytes");function string32(value){return String.fromCharCode(value>>24&255,value>>16&255,value>>8&255,value&255)}__name2(string32,"string32"),__name(string32,"string32");function objectSize(obj){return Object.keys(obj).length}__name2(objectSize,"objectSize"),__name(objectSize,"objectSize");function objectFromMap(map){const obj=Object.create(null);for(const[key,value]of map)obj[key]=value;return obj}__name2(objectFromMap,"objectFromMap"),__name(objectFromMap,"objectFromMap");function isLittleEndian(){const buffer8=new Uint8Array(4);return buffer8[0]=1,new Uint32Array(buffer8.buffer,0,1)[0]===1}__name2(isLittleEndian,"isLittleEndian"),__name(isLittleEndian,"isLittleEndian");function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}__name2(isEvalSupported,"isEvalSupported"),__name(isEvalSupported,"isEvalSupported");const _FeatureTest=class{static{__name2(this,"_FeatureTest")}static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};__name(_FeatureTest,"FeatureTest");let FeatureTest=_FeatureTest;exports2.FeatureTest=FeatureTest;const hexNumbers=[...Array(256).keys()].map(n=>n.toString(16).padStart(2,"0")),_Util=class _Util2{static{__name2(this,"_Util")}static makeHexColor(r,g,b){return`#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`}static scaleMinMax(transform,minMax){let temp;transform[0]?(transform[0]<0&&(temp=minMax[0],minMax[0]=minMax[1],minMax[1]=temp),minMax[0]*=transform[0],minMax[1]*=transform[0],transform[3]<0&&(temp=minMax[2],minMax[2]=minMax[3],minMax[3]=temp),minMax[2]*=transform[3],minMax[3]*=transform[3]):(temp=minMax[0],minMax[0]=minMax[2],minMax[2]=temp,temp=minMax[1],minMax[1]=minMax[3],minMax[3]=temp,transform[1]<0&&(temp=minMax[2],minMax[2]=minMax[3],minMax[3]=temp),minMax[2]*=transform[1],minMax[3]*=transform[1],transform[2]<0&&(temp=minMax[0],minMax[0]=minMax[1],minMax[1]=temp),minMax[0]*=transform[2],minMax[1]*=transform[2]),minMax[0]+=transform[4],minMax[1]+=transform[4],minMax[2]+=transform[5],minMax[3]+=transform[5]}static transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]]}static applyTransform(p,m){const xt=p[0]*m[0]+p[1]*m[2]+m[4],yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt]}static applyInverseTransform(p,m){const d=m[0]*m[3]-m[1]*m[2],xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d,yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt]}static getAxialAlignedBoundingBox(r,m){const p1=_Util2.applyTransform(r,m),p2=_Util2.applyTransform(r.slice(2,4),m),p3=_Util2.applyTransform([r[0],r[3]],m),p4=_Util2.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])]}static inverseTransform(m){const d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d]}static apply3dTransform(m,v){return[m[0]*v[0]+m[1]*v[1]+m[2]*v[2],m[3]*v[0]+m[4]*v[1]+m[5]*v[2],m[6]*v[0]+m[7]*v[1]+m[8]*v[2]]}static singularValueDecompose2dScale(m){const transpose=[m[0],m[2],m[1],m[3]],a=m[0]*transpose[0]+m[1]*transpose[2],b=m[0]*transpose[1]+m[1]*transpose[3],c=m[2]*transpose[0]+m[3]*transpose[2],d=m[2]*transpose[1]+m[3]*transpose[3],first=(a+d)/2,second=Math.sqrt((a+d)**2-4*(a*d-c*b))/2,sx=first+second||1,sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)]}static normalizeRect(rect){const r=rect.slice(0);return rect[0]>rect[2]&&(r[0]=rect[2],r[2]=rect[0]),rect[1]>rect[3]&&(r[1]=rect[3],r[3]=rect[1]),r}static intersect(rect1,rect2){const xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2])),xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh)return null;const yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3])),yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));return yLow>yHigh?null:[xLow,yLow,xHigh,yHigh]}static bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3){const tvalues=[],bounds=[[],[]];let a,b,c,t,t1,t2,b2ac,sqrtb2ac;for(let i=0;i<2;++i){if(i===0?(b=6*x0-12*x1+6*x2,a=-3*x0+9*x1-9*x2+3*x3,c=3*x1-3*x0):(b=6*y0-12*y1+6*y2,a=-3*y0+9*y1-9*y2+3*y3,c=3*y1-3*y0),Math.abs(a)<1e-12){if(Math.abs(b)<1e-12)continue;t=-c/b,0<t&&t<1&&tvalues.push(t);continue}b2ac=b*b-4*c*a,sqrtb2ac=Math.sqrt(b2ac),!(b2ac<0)&&(t1=(-b+sqrtb2ac)/(2*a),0<t1&&t1<1&&tvalues.push(t1),t2=(-b-sqrtb2ac)/(2*a),0<t2&&t2<1&&tvalues.push(t2))}let j=tvalues.length,mt;const jlen=j;for(;j--;)t=tvalues[j],mt=1-t,bounds[0][j]=mt*mt*mt*x0+3*mt*mt*t*x1+3*mt*t*t*x2+t*t*t*x3,bounds[1][j]=mt*mt*mt*y0+3*mt*mt*t*y1+3*mt*t*t*y2+t*t*t*y3;return bounds[0][jlen]=x0,bounds[1][jlen]=y0,bounds[0][jlen+1]=x3,bounds[1][jlen+1]=y3,bounds[0].length=bounds[1].length=jlen+2,[Math.min(...bounds[0]),Math.min(...bounds[1]),Math.max(...bounds[0]),Math.max(...bounds[1])]}};__name(_Util,"Util");let Util=_Util;exports2.Util=Util;const PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToPDFString(str){if(str[0]>="\xEF"){let encoding;if(str[0]==="\xFE"&&str[1]==="\xFF"?encoding="utf-16be":str[0]==="\xFF"&&str[1]==="\xFE"?encoding="utf-16le":str[0]==="\xEF"&&str[1]==="\xBB"&&str[2]==="\xBF"&&(encoding="utf-8"),encoding)try{const decoder=new TextDecoder(encoding,{fatal:!0}),buffer=stringToBytes(str);return decoder.decode(buffer)}catch(ex){warn(`stringToPDFString: "${ex}".`)}}const strBuf=[];for(let i=0,ii=str.length;i<ii;i++){const code=PDFStringTranslateTable[str.charCodeAt(i)];strBuf.push(code?String.fromCharCode(code):str.charAt(i))}return strBuf.join("")}__name2(stringToPDFString,"stringToPDFString"),__name(stringToPDFString,"stringToPDFString");function escapeString(str){return str.replace(/([()\\\n\r])/g,match=>match===`
`?"\\n":match==="\r"?"\\r":`\\${match}`)}__name2(escapeString,"escapeString"),__name(escapeString,"escapeString");function isAscii(str){return/^[\x00-\x7F]*$/.test(str)}__name2(isAscii,"isAscii"),__name(isAscii,"isAscii");function stringToUTF16BEString(str){const buf=["\xFE\xFF"];for(let i=0,ii=str.length;i<ii;i++){const char=str.charCodeAt(i);buf.push(String.fromCharCode(char>>8&255),String.fromCharCode(char&255))}return buf.join("")}__name2(stringToUTF16BEString,"stringToUTF16BEString"),__name(stringToUTF16BEString,"stringToUTF16BEString");function stringToUTF8String(str){return decodeURIComponent(escape(str))}__name2(stringToUTF8String,"stringToUTF8String"),__name(stringToUTF8String,"stringToUTF8String");function utf8StringToString(str){return unescape(encodeURIComponent(str))}__name2(utf8StringToString,"utf8StringToString"),__name(utf8StringToString,"utf8StringToString");function isArrayBuffer(v){return typeof v=="object"&&v!==null&&v.byteLength!==void 0}__name2(isArrayBuffer,"isArrayBuffer"),__name(isArrayBuffer,"isArrayBuffer");function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length)return!1;for(let i=0,ii=arr1.length;i<ii;i++)if(arr1[i]!==arr2[i])return!1;return!0}__name2(isArrayEqual,"isArrayEqual"),__name(isArrayEqual,"isArrayEqual");function getModificationDate(date=new Date){return[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,"0"),date.getUTCDate().toString().padStart(2,"0"),date.getUTCHours().toString().padStart(2,"0"),date.getUTCMinutes().toString().padStart(2,"0"),date.getUTCSeconds().toString().padStart(2,"0")].join("")}__name2(getModificationDate,"getModificationDate"),__name(getModificationDate,"getModificationDate");function createPromiseCapability(){const capability=Object.create(null);let isSettled=!1;return Object.defineProperty(capability,"settled",{get(){return isSettled}}),capability.promise=new Promise(function(resolve,reject){capability.resolve=function(data){isSettled=!0,resolve(data)},capability.reject=function(reason){isSettled=!0,reject(reason)}}),capability}__name2(createPromiseCapability,"createPromiseCapability"),__name(createPromiseCapability,"createPromiseCapability")},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{__w_pdfjs_require__2(3)},(__unused_webpack_module2,exports2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.isNodeJS=void 0;const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");exports2.isNodeJS=isNodeJS},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var _docId2,_a,_workerPorts2,_docStats2,_pageCache2,_pagePromises2,_metadataPromise2,_objs2,_ensureObj3,ensureObj_fn,_internalRenderTask2,_canvasInUse2;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory,NodeCMapReaderFactory,NodeStandardFontDataFactory}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}let createPDFNetworkStream;function setPDFNetworkStreamFactory(pdfNetworkStreamFactory){createPDFNetworkStream=pdfNetworkStreamFactory}__name2(setPDFNetworkStreamFactory,"setPDFNetworkStreamFactory"),__name(setPDFNetworkStreamFactory,"setPDFNetworkStreamFactory");function getDocument(src){const task=new PDFDocumentLoadingTask;let source;if(typeof src=="string"||src instanceof URL)source={url:src};else if((0,_util.isArrayBuffer)(src))source={data:src};else if(src instanceof PDFDataRangeTransport)source={range:src};else{if(typeof src!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!src.url&&!src.data&&!src.range)throw new Error("Invalid parameter object: need either .data, .range or .url");source=src}const params=Object.create(null);let rangeTransport=null,worker2=null;for(const key in source){const value=source[key];switch(key){case"url":if(typeof window<"u")try{params[key]=new URL(value,window.location).href;continue}catch(ex){(0,_util.warn)(`Cannot create valid URL: "${ex}".`)}else if(typeof value=="string"||value instanceof URL){params[key]=value.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":rangeTransport=value;continue;case"worker":worker2=value;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&value instanceof Buffer)params[key]=new Uint8Array(value);else{if(value instanceof Uint8Array)break;if(typeof value=="string")params[key]=(0,_util.stringToBytes)(value);else if(typeof value=="object"&&value!==null&&!isNaN(value.length))params[key]=new Uint8Array(value);else if((0,_util.isArrayBuffer)(value))params[key]=new Uint8Array(value);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}params[key]=value}if(params.CMapReaderFactory=params.CMapReaderFactory||DefaultCMapReaderFactory,params.StandardFontDataFactory=params.StandardFontDataFactory||DefaultStandardFontDataFactory,params.ignoreErrors=params.stopAtErrors!==!0,params.fontExtraProperties=params.fontExtraProperties===!0,params.pdfBug=params.pdfBug===!0,params.enableXfa=params.enableXfa===!0,(!Number.isInteger(params.rangeChunkSize)||params.rangeChunkSize<1)&&(params.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof params.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(params.docBaseUrl))&&(params.docBaseUrl=null),(!Number.isInteger(params.maxImageSize)||params.maxImageSize<-1)&&(params.maxImageSize=-1),typeof params.cMapUrl!="string"&&(params.cMapUrl=null),typeof params.standardFontDataUrl!="string"&&(params.standardFontDataUrl=null),typeof params.useWorkerFetch!="boolean"&&(params.useWorkerFetch=params.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&params.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof params.isEvalSupported!="boolean"&&(params.isEvalSupported=!0),typeof params.disableFontFace!="boolean"&&(params.disableFontFace=_is_node.isNodeJS),typeof params.useSystemFonts!="boolean"&&(params.useSystemFonts=!_is_node.isNodeJS&&!params.disableFontFace),(typeof params.ownerDocument!="object"||params.ownerDocument===null)&&(params.ownerDocument=globalThis.document),typeof params.disableRange!="boolean"&&(params.disableRange=!1),typeof params.disableStream!="boolean"&&(params.disableStream=!1),typeof params.disableAutoFetch!="boolean"&&(params.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(params.verbosity),!worker2){const workerParams={verbosity:params.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};worker2=workerParams.port?PDFWorker.fromPort(workerParams):new PDFWorker(workerParams),task._worker=worker2}const docId=task.docId;return worker2.promise.then(function(){if(task.destroyed)throw new Error("Loading aborted");const workerIdPromise=_fetchDocument(worker2,params,rangeTransport,docId),networkStreamPromise=new Promise(function(resolve){let networkStream;rangeTransport?networkStream=new _transport_stream.PDFDataTransportStream({length:params.length,initialData:params.initialData,progressiveDone:params.progressiveDone,contentDispositionFilename:params.contentDispositionFilename,disableRange:params.disableRange,disableStream:params.disableStream},rangeTransport):params.data||(networkStream=createPDFNetworkStream({url:params.url,length:params.length,httpHeaders:params.httpHeaders,withCredentials:params.withCredentials,rangeChunkSize:params.rangeChunkSize,disableRange:params.disableRange,disableStream:params.disableStream})),resolve(networkStream)});return Promise.all([workerIdPromise,networkStreamPromise]).then(function([workerId,networkStream]){if(task.destroyed)throw new Error("Loading aborted");const messageHandler=new _message_handler.MessageHandler(docId,workerId,worker2.port),transport=new WorkerTransport(messageHandler,task,networkStream,params);task._transport=transport,messageHandler.send("Ready",null)})}).catch(task._capability.reject),task}__name2(getDocument,"getDocument"),__name(getDocument,"getDocument");async function _fetchDocument(worker2,source,pdfDataRangeTransport,docId){if(worker2.destroyed)throw new Error("Worker was destroyed");pdfDataRangeTransport&&(source.length=pdfDataRangeTransport.length,source.initialData=pdfDataRangeTransport.initialData,source.progressiveDone=pdfDataRangeTransport.progressiveDone,source.contentDispositionFilename=pdfDataRangeTransport.contentDispositionFilename);const workerId=await worker2.messageHandler.sendWithPromise("GetDocRequest",{docId,apiVersion:"2.16.105",source:{data:source.data,url:source.url,password:source.password,disableAutoFetch:source.disableAutoFetch,rangeChunkSize:source.rangeChunkSize,length:source.length},maxImageSize:source.maxImageSize,disableFontFace:source.disableFontFace,docBaseUrl:source.docBaseUrl,ignoreErrors:source.ignoreErrors,isEvalSupported:source.isEvalSupported,fontExtraProperties:source.fontExtraProperties,enableXfa:source.enableXfa,useSystemFonts:source.useSystemFonts,cMapUrl:source.useWorkerFetch?source.cMapUrl:null,standardFontDataUrl:source.useWorkerFetch?source.standardFontDataUrl:null});if(source.data&&(source.data=null),worker2.destroyed)throw new Error("Worker was destroyed");return workerId}__name2(_fetchDocument,"_fetchDocument"),__name(_fetchDocument,"_fetchDocument");const _PDFDocumentLoadingTask=class _PDFDocumentLoadingTask2{static{__name2(this,"_PDFDocumentLoadingTask")}constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${__privateWrapper(_PDFDocumentLoadingTask2,_docId2)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var _a2;this.destroyed=!0,await((_a2=this._transport)==null?void 0:_a2.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};_docId2=new WeakMap,__name(_PDFDocumentLoadingTask,"PDFDocumentLoadingTask"),__privateAdd(_PDFDocumentLoadingTask,_docId2,0);let PDFDocumentLoadingTask=_PDFDocumentLoadingTask;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;const _PDFDataRangeTransport=class{static{__name2(this,"_PDFDataRangeTransport")}constructor(length,initialData,progressiveDone=!1,contentDispositionFilename=null){this.length=length,this.initialData=initialData,this.progressiveDone=progressiveDone,this.contentDispositionFilename=contentDispositionFilename,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(listener){this._rangeListeners.push(listener)}addProgressListener(listener){this._progressListeners.push(listener)}addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener)}addProgressiveDoneListener(listener){this._progressiveDoneListeners.push(listener)}onDataRange(begin,chunk){for(const listener of this._rangeListeners)listener(begin,chunk)}onDataProgress(loaded,total){this._readyCapability.promise.then(()=>{for(const listener of this._progressListeners)listener(loaded,total)})}onDataProgressiveRead(chunk){this._readyCapability.promise.then(()=>{for(const listener of this._progressiveReadListeners)listener(chunk)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const listener of this._progressiveDoneListeners)listener()})}transportReady(){this._readyCapability.resolve()}requestDataRange(begin,end){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};__name(_PDFDataRangeTransport,"PDFDataRangeTransport");let PDFDataRangeTransport=_PDFDataRangeTransport;exports.PDFDataRangeTransport=PDFDataRangeTransport;const _PDFDocumentProxy=class{static{__name2(this,"_PDFDocumentProxy")}constructor(pdfInfo,transport){this._pdfInfo=pdfInfo,this._transport=transport,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(pageNumber){return this._transport.getPage(pageNumber)}getPageIndex(ref){return this._transport.getPageIndex(ref)}getDestinations(){return this._transport.getDestinations()}getDestination(id){return this._transport.getDestination(id)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(keepLoadedFonts=!1){return this._transport.startCleanup(keepLoadedFonts||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}};__name(_PDFDocumentProxy,"PDFDocumentProxy");let PDFDocumentProxy=_PDFDocumentProxy;exports.PDFDocumentProxy=PDFDocumentProxy;const _PDFPageProxy=class{static{__name2(this,"_PDFPageProxy")}constructor(pageIndex,pageInfo,transport,ownerDocument,pdfBug=!1){this._pageIndex=pageIndex,this._pageInfo=pageInfo,this._ownerDocument=ownerDocument,this._transport=transport,this._stats=pdfBug?new _display_utils.StatTimer:null,this._pdfBug=pdfBug,this.commonObjs=transport.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale,rotation=this.rotate,offsetX=0,offsetY=0,dontFlip=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale,rotation,offsetX,offsetY,dontFlip})}getAnnotations({intent="display"}={}){const intentArgs=this._transport.getRenderingIntent(intent);let promise=this._annotationPromises.get(intentArgs.cacheKey);return promise||(promise=this._transport.getAnnotations(this._pageIndex,intentArgs.renderingIntent),this._annotationPromises.set(intentArgs.cacheKey,promise),promise=promise.then(annotations=>{for(const annotation of annotations)annotation.titleObj!==void 0&&Object.defineProperty(annotation,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),annotation.titleObj.str}}),annotation.contentsObj!==void 0&&Object.defineProperty(annotation,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),annotation.contentsObj.str}});return annotations})),promise}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var _a2;return((_a2=this._transport._htmlForXfa)==null?void 0:_a2.children[this._pageIndex])||null}render({canvasContext,viewport,intent="display",annotationMode=_util.AnnotationMode.ENABLE,transform=null,imageLayer=null,canvasFactory=null,background=null,optionalContentConfigPromise=null,annotationCanvasMap=null,pageColors=null,printAnnotationStorage=null}){var _a2,_b;((_a2=arguments[0])==null?void 0:_a2.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&annotationMode===_util.AnnotationMode.ENABLE&&(annotationMode=_util.AnnotationMode.ENABLE_FORMS)),((_b=arguments[0])==null?void 0:_b.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&annotationMode===_util.AnnotationMode.ENABLE&&(annotationMode=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage);this.pendingCleanup=!1,optionalContentConfigPromise||(optionalContentConfigPromise=this._transport.getOptionalContentConfig());let intentState=this._intentStates.get(intentArgs.cacheKey);intentState||(intentState=Object.create(null),this._intentStates.set(intentArgs.cacheKey,intentState)),intentState.streamReaderCancelTimeout&&(clearTimeout(intentState.streamReaderCancelTimeout),intentState.streamReaderCancelTimeout=null);const canvasFactoryInstance=canvasFactory||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),intentPrint=!!(intentArgs.renderingIntent&_util.RenderingIntentFlag.PRINT);intentState.displayReadyCapability||(intentState.displayReadyCapability=(0,_util.createPromiseCapability)(),intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(intentArgs));const complete=__name(error=>{intentState.renderTasks.delete(internalRenderTask),(this.cleanupAfterRender||intentPrint)&&(this.pendingCleanup=!0),this._tryCleanup(),error?(internalRenderTask.capability.reject(error),this._abortOperatorList({intentState,reason:error instanceof Error?error:new Error(error)})):internalRenderTask.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},"complete"),internalRenderTask=new InternalRenderTask({callback:complete,params:{canvasContext,viewport,transform,imageLayer,background},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap,operatorList:intentState.operatorList,pageIndex:this._pageIndex,canvasFactory:canvasFactoryInstance,useRequestAnimationFrame:!intentPrint,pdfBug:this._pdfBug,pageColors});(intentState.renderTasks||(intentState.renderTasks=new Set)).add(internalRenderTask);const renderTask=internalRenderTask.task;return Promise.all([intentState.displayReadyCapability.promise,optionalContentConfigPromise]).then(([transparency,optionalContentConfig])=>{if(this.pendingCleanup){complete();return}this._stats&&this._stats.time("Rendering"),internalRenderTask.initializeGraphics({transparency,optionalContentConfig}),internalRenderTask.operatorListChanged()}).catch(complete),renderTask}getOperatorList({intent="display",annotationMode=_util.AnnotationMode.ENABLE,printAnnotationStorage=null}={}){function operatorListChanged(){intentState.operatorList.lastChunk&&(intentState.opListReadCapability.resolve(intentState.operatorList),intentState.renderTasks.delete(opListTask))}__name2(operatorListChanged,"operatorListChanged"),__name(operatorListChanged,"operatorListChanged");const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage,!0);let intentState=this._intentStates.get(intentArgs.cacheKey);intentState||(intentState=Object.create(null),this._intentStates.set(intentArgs.cacheKey,intentState));let opListTask;return intentState.opListReadCapability||(opListTask=Object.create(null),opListTask.operatorListChanged=operatorListChanged,intentState.opListReadCapability=(0,_util.createPromiseCapability)(),(intentState.renderTasks||(intentState.renderTasks=new Set)).add(opListTask),intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(intentArgs)),intentState.opListReadCapability.promise}streamTextContent({disableCombineTextItems=!1,includeMarkedContent=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:disableCombineTextItems!==!0,includeMarkedContent:includeMarkedContent===!0},{highWaterMark:100,size(textContent){return textContent.items.length}})}getTextContent(params={}){if(this._transport._htmlForXfa)return this.getXfa().then(xfa=>_xfa_text.XfaText.textContent(xfa));const readableStream=this.streamTextContent(params);return new Promise(function(resolve,reject){function pump(){reader.read().then(function({value,done}){if(done){resolve(textContent);return}Object.assign(textContent.styles,value.styles),textContent.items.push(...value.items),pump()},reject)}__name2(pump,"pump"),__name(pump,"pump");const reader=readableStream.getReader(),textContent={items:[],styles:Object.create(null)};pump()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const waitOn=[];for(const intentState of this._intentStates.values())if(this._abortOperatorList({intentState,reason:new Error("Page was destroyed."),force:!0}),!intentState.opListReadCapability)for(const internalRenderTask of intentState.renderTasks)waitOn.push(internalRenderTask.completed),internalRenderTask.cancel();this.objs.clear();for(const bitmap of this._bitmaps)bitmap.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(waitOn)}cleanup(resetStats=!1){return this.pendingCleanup=!0,this._tryCleanup(resetStats)}_tryCleanup(resetStats=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks,operatorList}of this._intentStates.values())if(renderTasks.size>0||!operatorList.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,resetStats&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const bitmap of this._bitmaps)bitmap.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(transparency,cacheKey){const intentState=this._intentStates.get(cacheKey);intentState&&(this._stats&&this._stats.timeEnd("Page Request"),intentState.displayReadyCapability&&intentState.displayReadyCapability.resolve(transparency))}_renderPageChunk(operatorListChunk,intentState){for(let i=0,ii=operatorListChunk.length;i<ii;i++)intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]),intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);intentState.operatorList.lastChunk=operatorListChunk.lastChunk,intentState.operatorList.separateAnnots=operatorListChunk.separateAnnots;for(const internalRenderTask of intentState.renderTasks)internalRenderTask.operatorListChanged();operatorListChunk.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent,cacheKey,annotationStorageMap}){const reader=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:renderingIntent,cacheKey,annotationStorage:annotationStorageMap}).getReader(),intentState=this._intentStates.get(cacheKey);intentState.streamReader=reader;const pump=__name(()=>{reader.read().then(({value,done})=>{if(done){intentState.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(value,intentState),pump())},reason=>{if(intentState.streamReader=null,!this._transport.destroyed){if(intentState.operatorList){intentState.operatorList.lastChunk=!0;for(const internalRenderTask of intentState.renderTasks)internalRenderTask.operatorListChanged();this._tryCleanup()}if(intentState.displayReadyCapability)intentState.displayReadyCapability.reject(reason);else if(intentState.opListReadCapability)intentState.opListReadCapability.reject(reason);else throw reason}})},"pump");pump()}_abortOperatorList({intentState,reason,force=!1}){if(intentState.streamReader){if(!force){if(intentState.renderTasks.size>0)return;if(reason instanceof _display_utils.RenderingCancelledException){intentState.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState,reason,force:!0}),intentState.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(intentState.streamReader.cancel(new _util.AbortException(reason.message)).catch(()=>{}),intentState.streamReader=null,!this._transport.destroyed){for(const[curCacheKey,curIntentState]of this._intentStates)if(curIntentState===intentState){this._intentStates.delete(curCacheKey);break}this.cleanup()}}}get stats(){return this._stats}};__name(_PDFPageProxy,"PDFPageProxy");let PDFPageProxy=_PDFPageProxy;exports.PDFPageProxy=PDFPageProxy;const _LoopbackPort=class{static{__name2(this,"_LoopbackPort")}constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(obj,transfers){const event={data:structuredClone(obj,transfers)};this._deferred.then(()=>{for(const listener of this._listeners)listener.call(this,event)})}addEventListener(name,listener){this._listeners.push(listener)}removeEventListener(name,listener){const i=this._listeners.indexOf(listener);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}};__name(_LoopbackPort,"LoopbackPort");let LoopbackPort=_LoopbackPort;exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const pdfjsFilePath=(_a=document?.currentScript)==null?void 0:_a.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(baseUrl,otherUrl){let base;try{if(base=new URL(baseUrl),!base.origin||base.origin==="null")return!1}catch{return!1}const other=new URL(otherUrl,base);return base.origin===other.origin},PDFWorkerUtil.createCDNWrapper=function(url){const wrapper=`importScripts("${url}");`;return URL.createObjectURL(new Blob([wrapper]))}}const _PDFWorker=class __PDFWorker{static{__name2(this,"_PDFWorker")}constructor({name=null,port=null,verbosity=(0,_util.getVerbosityLevel)()}={}){if(port&&__privateGet(__PDFWorker,_workerPorts2).has(port))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=name,this.destroyed=!1,this.verbosity=verbosity,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,port){__privateGet(__PDFWorker,_workerPorts2).set(port,this),this._initializeFromPort(port);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(port){this._port=port,this._messageHandler=new _message_handler.MessageHandler("main","worker",port),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!__PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc}=__PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,workerSrc)||(workerSrc=PDFWorkerUtil.createCDNWrapper(new URL(workerSrc,window.location).href));const worker2=new Worker(workerSrc),messageHandler=new _message_handler.MessageHandler("main","worker",worker2),terminateEarly=__name(()=>{worker2.removeEventListener("error",onWorkerError),messageHandler.destroy(),worker2.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},"terminateEarly"),onWorkerError=__name(()=>{this._webWorker||terminateEarly()},"onWorkerError");worker2.addEventListener("error",onWorkerError),messageHandler.on("test",data=>{if(worker2.removeEventListener("error",onWorkerError),this.destroyed){terminateEarly();return}data?(this._messageHandler=messageHandler,this._port=worker2,this._webWorker=worker2,this._readyCapability.resolve(),messageHandler.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),messageHandler.destroy(),worker2.terminate())}),messageHandler.on("ready",data=>{if(worker2.removeEventListener("error",onWorkerError),this.destroyed){terminateEarly();return}try{sendTest()}catch{this._setupFakeWorker()}});const sendTest=__name(()=>{const testObj=new Uint8Array;messageHandler.send("test",testObj,[testObj.buffer])},"sendTest");sendTest();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),__PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const port=new LoopbackPort;this._port=port;const id=`fake${PDFWorkerUtil.fakeWorkerId++}`,workerHandler=new _message_handler.MessageHandler(id+"_worker",id,port);WorkerMessageHandler.setup(workerHandler,port);const messageHandler=new _message_handler.MessageHandler(id,id+"_worker",port);this._messageHandler=messageHandler,this._readyCapability.resolve(),messageHandler.send("configure",{verbosity:this.verbosity})}).catch(reason=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${reason.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),__privateGet(__PDFWorker,_workerPorts2).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(params){if(!params?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return __privateGet(this,_workerPorts2).has(params.port)?__privateGet(this,_workerPorts2).get(params.port):new __PDFWorker(params)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var _a2;try{return((_a2=globalThis.pdfjsWorker)==null?void 0:_a2.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=__name(async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler},"loader");return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};_workerPorts2=new WeakMap,__name(_PDFWorker,"PDFWorker"),__privateAdd(_PDFWorker,_workerPorts2,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};const _WorkerTransport=class{static{__name2(this,"_WorkerTransport")}constructor(messageHandler,loadingTask,networkStream,params){__privateAdd(this,_docStats2,null),__privateAdd(this,_pageCache2,new Map),__privateAdd(this,_pagePromises2,new Map),__privateAdd(this,_metadataPromise2,null),this.messageHandler=messageHandler,this.loadingTask=loadingTask,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:loadingTask.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:params.ownerDocument,styleElement:params.styleElement}),this._params=params,params.useWorkerFetch||(this.CMapReaderFactory=new params.CMapReaderFactory({baseUrl:params.cMapUrl,isCompressed:params.cMapPacked}),this.StandardFontDataFactory=new params.StandardFontDataFactory({baseUrl:params.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=networkStream,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return __privateGet(this,_docStats2)}getRenderingIntent(intent,annotationMode=_util.AnnotationMode.ENABLE,printAnnotationStorage=null,isOpList=!1){let renderingIntent=_util.RenderingIntentFlag.DISPLAY,annotationMap=null;switch(intent){case"any":renderingIntent=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":renderingIntent=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${intent}`)}switch(annotationMode){case _util.AnnotationMode.DISABLE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,annotationMap=(renderingIntent&_util.RenderingIntentFlag.PRINT&&printAnnotationStorage instanceof _annotation_storage.PrintAnnotationStorage?printAnnotationStorage:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${annotationMode}`)}return isOpList&&(renderingIntent+=_util.RenderingIntentFlag.OPLIST),{renderingIntent,cacheKey:`${renderingIntent}_${_annotation_storage.AnnotationStorage.getHash(annotationMap)}`,annotationStorageMap:annotationMap}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const waitOn=[];for(const page of __privateGet(this,_pageCache2).values())waitOn.push(page._destroy());__privateGet(this,_pageCache2).clear(),__privateGet(this,_pagePromises2).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const terminated=this.messageHandler.sendWithPromise("Terminate",null);return waitOn.push(terminated),Promise.all(waitOn).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),__privateSet(this,_metadataPromise2,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler,loadingTask}=this;messageHandler.on("GetReader",(data,sink)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=evt=>{this._lastProgress={loaded:evt.loaded,total:evt.total}},sink.onPull=()=>{this._fullReader.read().then(function({value,done}){if(done){sink.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(value),"GetReader - expected an ArrayBuffer."),sink.enqueue(new Uint8Array(value),1,[value])}).catch(reason=>{sink.error(reason)})},sink.onCancel=reason=>{this._fullReader.cancel(reason),sink.ready.catch(readyReason=>{if(!this.destroyed)throw readyReason})}}),messageHandler.on("ReaderHeadersReady",data=>{const headersCapability=(0,_util.createPromiseCapability)(),fullReader=this._fullReader;return fullReader.headersReady.then(()=>{var _a2;(!fullReader.isStreamingSupported||!fullReader.isRangeSupported)&&(this._lastProgress&&((_a2=loadingTask.onProgress)==null||_a2.call(loadingTask,this._lastProgress)),fullReader.onProgress=evt=>{var _a3;(_a3=loadingTask.onProgress)==null||_a3.call(loadingTask,{loaded:evt.loaded,total:evt.total})}),headersCapability.resolve({isStreamingSupported:fullReader.isStreamingSupported,isRangeSupported:fullReader.isRangeSupported,contentLength:fullReader.contentLength})},headersCapability.reject),headersCapability.promise}),messageHandler.on("GetRangeReader",(data,sink)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const rangeReader=this._networkStream.getRangeReader(data.begin,data.end);if(!rangeReader){sink.close();return}sink.onPull=()=>{rangeReader.read().then(function({value,done}){if(done){sink.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(value),"GetRangeReader - expected an ArrayBuffer."),sink.enqueue(new Uint8Array(value),1,[value])}).catch(reason=>{sink.error(reason)})},sink.onCancel=reason=>{rangeReader.cancel(reason),sink.ready.catch(readyReason=>{if(!this.destroyed)throw readyReason})}}),messageHandler.on("GetDoc",({pdfInfo})=>{this._numPages=pdfInfo.numPages,this._htmlForXfa=pdfInfo.htmlForXfa,delete pdfInfo.htmlForXfa,loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo,this))}),messageHandler.on("DocException",function(ex){let reason;switch(ex.name){case"PasswordException":reason=new _util.PasswordException(ex.message,ex.code);break;case"InvalidPDFException":reason=new _util.InvalidPDFException(ex.message);break;case"MissingPDFException":reason=new _util.MissingPDFException(ex.message);break;case"UnexpectedResponseException":reason=new _util.UnexpectedResponseException(ex.message,ex.status);break;case"UnknownErrorException":reason=new _util.UnknownErrorException(ex.message,ex.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}loadingTask._capability.reject(reason)}),messageHandler.on("PasswordRequest",exception=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),loadingTask.onPassword){const updatePassword=__name(password=>{password instanceof Error?this._passwordCapability.reject(password):this._passwordCapability.resolve({password})},"updatePassword");try{loadingTask.onPassword(updatePassword,exception.code)}catch(ex){this._passwordCapability.reject(ex)}}else this._passwordCapability.reject(new _util.PasswordException(exception.message,exception.code));return this._passwordCapability.promise}),messageHandler.on("DataLoaded",data=>{var _a2;(_a2=loadingTask.onProgress)==null||_a2.call(loadingTask,{loaded:data.length,total:data.length}),this.downloadInfoCapability.resolve(data)}),messageHandler.on("StartRenderPage",data=>{if(this.destroyed)return;__privateGet(this,_pageCache2).get(data.pageIndex)._startRenderPage(data.transparency,data.cacheKey)}),messageHandler.on("commonobj",([id,type,exportedData])=>{var _a2;if(!this.destroyed&&!this.commonObjs.has(id))switch(type){case"Font":const params=this._params;if("error"in exportedData){const exportedError=exportedData.error;(0,_util.warn)(`Error during font loading: ${exportedError}`),this.commonObjs.resolve(id,exportedError);break}let fontRegistry=null;params.pdfBug&&((_a2=globalThis.FontInspector)!=null&&_a2.enabled)&&(fontRegistry={registerFont(font2,url){globalThis.FontInspector.fontAdded(font2,url)}});const font=new _font_loader.FontFaceObject(exportedData,{isEvalSupported:params.isEvalSupported,disableFontFace:params.disableFontFace,ignoreErrors:params.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry});this.fontLoader.bind(font).catch(reason=>messageHandler.sendWithPromise("FontFallback",{id})).finally(()=>{!params.fontExtraProperties&&font.data&&(font.data=null),this.commonObjs.resolve(id,font)});break;case"FontPath":case"Image":this.commonObjs.resolve(id,exportedData);break;default:throw new Error(`Got unknown common object type ${type}`)}}),messageHandler.on("obj",([id,pageIndex,type,imageData])=>{var _a2;if(this.destroyed)return;const pageProxy=__privateGet(this,_pageCache2).get(pageIndex);if(!pageProxy.objs.has(id))switch(type){case"Image":pageProxy.objs.resolve(id,imageData);const MAX_IMAGE_SIZE_TO_STORE=8e6;if(imageData){let length;if(imageData.bitmap){const{bitmap,width,height}=imageData;length=width*height*4,pageProxy._bitmaps.add(bitmap)}else length=((_a2=imageData.data)==null?void 0:_a2.length)||0;length>MAX_IMAGE_SIZE_TO_STORE&&(pageProxy.cleanupAfterRender=!0)}break;case"Pattern":pageProxy.objs.resolve(id,imageData);break;default:throw new Error(`Got unknown object type ${type}`)}}),messageHandler.on("DocProgress",data=>{var _a2;this.destroyed||(_a2=loadingTask.onProgress)==null||_a2.call(loadingTask,{loaded:data.loaded,total:data.total})}),messageHandler.on("DocStats",data=>{this.destroyed||__privateSet(this,_docStats2,Object.freeze({streamTypes:Object.freeze(data.streamTypes),fontTypes:Object.freeze(data.fontTypes)}))}),messageHandler.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),messageHandler.on("FetchBuiltInCMap",data=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(data):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),messageHandler.on("FetchStandardFontData",data=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(data):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId}){var _a2,_b;this.destroyed||(_b=(_a2=this.loadingTask).onUnsupportedFeature)==null||_b.call(_a2,featureId)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(pageNumber){if(!Number.isInteger(pageNumber)||pageNumber<=0||pageNumber>this._numPages)return Promise.reject(new Error("Invalid page request."));const pageIndex=pageNumber-1,cachedPromise=__privateGet(this,_pagePromises2).get(pageIndex);if(cachedPromise)return cachedPromise;const promise=this.messageHandler.sendWithPromise("GetPage",{pageIndex}).then(pageInfo=>{if(this.destroyed)throw new Error("Transport destroyed");const page=new PDFPageProxy(pageIndex,pageInfo,this,this._params.ownerDocument,this._params.pdfBug);return __privateGet(this,_pageCache2).set(pageIndex,page),page});return __privateGet(this,_pagePromises2).set(pageIndex,promise),promise}getPageIndex(ref){return typeof ref!="object"||ref===null||!Number.isInteger(ref.num)||ref.num<0||!Number.isInteger(ref.gen)||ref.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:ref.num,gen:ref.gen})}getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex,intent})}saveDocument(){var _a2;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((_a2=this._fullReader)==null?void 0:_a2.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(id){return typeof id!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(pageIndex){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex})}getStructTree(pageIndex){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(results=>new _optional_content_config.OptionalContentConfig(results))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return __privateGet(this,_metadataPromise2)||__privateSet(this,_metadataPromise2,this.messageHandler.sendWithPromise("GetMetadata",null).then(results=>{var _a2,_b;return{info:results[0],metadata:results[1]?new _metadata.Metadata(results[1]):null,contentDispositionFilename:((_a2=this._fullReader)==null?void 0:_a2.filename)??null,contentLength:((_b=this._fullReader)==null?void 0:_b.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(keepLoadedFonts=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const page of __privateGet(this,_pageCache2).values())if(!page.cleanup())throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);this.commonObjs.clear(),keepLoadedFonts||this.fontLoader.clear(),__privateSet(this,_metadataPromise2,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const params=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:params.disableAutoFetch,enableXfa:params.enableXfa})}};_docStats2=new WeakMap,_pageCache2=new WeakMap,_pagePromises2=new WeakMap,_metadataPromise2=new WeakMap,__name(_WorkerTransport,"WorkerTransport");let WorkerTransport=_WorkerTransport;const _PDFObjects=class{static{__name2(this,"_PDFObjects")}constructor(){__privateAdd(this,_ensureObj3),__privateAdd(this,_objs2,Object.create(null))}get(objId,callback=null){if(callback){const obj2=__privateMethod(this,_ensureObj3,ensureObj_fn).call(this,objId);return obj2.capability.promise.then(()=>callback(obj2.data)),null}const obj=__privateGet(this,_objs2)[objId];if(!obj?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${objId}.`);return obj.data}has(objId){const obj=__privateGet(this,_objs2)[objId];return obj?.capability.settled||!1}resolve(objId,data=null){const obj=__privateMethod(this,_ensureObj3,ensureObj_fn).call(this,objId);obj.data=data,obj.capability.resolve()}clear(){__privateSet(this,_objs2,Object.create(null))}};_objs2=new WeakMap,_ensureObj3=new WeakSet,ensureObj_fn=__name(function(objId){const obj=__privateGet(this,_objs2)[objId];return obj||(__privateGet(this,_objs2)[objId]={capability:(0,_util.createPromiseCapability)(),data:null})},"#ensureObj"),__name(_PDFObjects,"PDFObjects");let PDFObjects=_PDFObjects;const _RenderTask=class{static{__name2(this,"_RenderTask")}constructor(internalRenderTask){__privateAdd(this,_internalRenderTask2,null),__privateSet(this,_internalRenderTask2,internalRenderTask),this.onContinue=null}get promise(){return __privateGet(this,_internalRenderTask2).capability.promise}cancel(){__privateGet(this,_internalRenderTask2).cancel()}get separateAnnots(){const{separateAnnots}=__privateGet(this,_internalRenderTask2).operatorList;if(!separateAnnots)return!1;const{annotationCanvasMap}=__privateGet(this,_internalRenderTask2);return separateAnnots.form||separateAnnots.canvas&&annotationCanvasMap?.size>0}};_internalRenderTask2=new WeakMap,__name(_RenderTask,"RenderTask");let RenderTask=_RenderTask;exports.RenderTask=RenderTask;const _InternalRenderTask=class _InternalRenderTask2{static{__name2(this,"_InternalRenderTask")}constructor({callback,params,objs,commonObjs,annotationCanvasMap,operatorList,pageIndex,canvasFactory,useRequestAnimationFrame=!1,pdfBug=!1,pageColors=null}){this.callback=callback,this.params=params,this.objs=objs,this.commonObjs=commonObjs,this.annotationCanvasMap=annotationCanvasMap,this.operatorListIdx=null,this.operatorList=operatorList,this._pageIndex=pageIndex,this.canvasFactory=canvasFactory,this._pdfBug=pdfBug,this.pageColors=pageColors,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=useRequestAnimationFrame===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=params.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency=!1,optionalContentConfig}){var _a2;if(this.cancelled)return;if(this._canvas){if(__privateGet(_InternalRenderTask2,_canvasInUse2).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");__privateGet(_InternalRenderTask2,_canvasInUse2).add(this._canvas)}this._pdfBug&&((_a2=globalThis.StepperManager)!=null&&_a2.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext,viewport,transform,imageLayer,background}=this.params;this.gfx=new _canvas.CanvasGraphics(canvasContext,this.commonObjs,this.objs,this.canvasFactory,imageLayer,optionalContentConfig,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform,viewport,transparency,background}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(error=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&__privateGet(_InternalRenderTask2,_canvasInUse2).delete(this._canvas),this.callback(error||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&__privateGet(_InternalRenderTask2,_canvasInUse2).delete(this._canvas),this.callback())))}};_canvasInUse2=new WeakMap,__name(_InternalRenderTask,"InternalRenderTask"),__privateAdd(_InternalRenderTask,_canvasInUse2,new WeakSet);let InternalRenderTask=_InternalRenderTask;const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _setModified,setModified_fn,_serializable;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PrintAnnotationStorage=exports2.AnnotationStorage=void 0;var _util2=__w_pdfjs_require__2(1),_editor=__w_pdfjs_require__2(6),_murmurhash=__w_pdfjs_require__2(10);const _AnnotationStorage=class{static{__name2(this,"_AnnotationStorage")}constructor(){__privateAdd(this,_setModified),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(key,defaultValue){const value=this._storage.get(key);return value===void 0?defaultValue:Object.assign(defaultValue,value)}getRawValue(key){return this._storage.get(key)}remove(key){if(this._storage.delete(key),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const value of this._storage.values())if(value instanceof _editor.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(key,value){const obj=this._storage.get(key);let modified=!1;if(obj!==void 0)for(const[entry,val]of Object.entries(value))obj[entry]!==val&&(modified=!0,obj[entry]=val);else modified=!0,this._storage.set(key,value);modified&&__privateMethod(this,_setModified,setModified_fn).call(this),value instanceof _editor.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(value.constructor._type)}has(key){return this._storage.has(key)}getAll(){return this._storage.size>0?(0,_util2.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(this._storage.size===0)return null;const clone=new Map;for(const[key,val]of this._storage){const serialized=val instanceof _editor.AnnotationEditor?val.serialize():val;serialized&&clone.set(key,serialized)}return clone}static getHash(map){if(!map)return"";const hash=new _murmurhash.MurmurHash3_64;for(const[key,val]of map)hash.update(`${key}:${JSON.stringify(val)}`);return hash.hexdigest()}};_setModified=new WeakSet,setModified_fn=__name(function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},"#setModified"),__name(_AnnotationStorage,"AnnotationStorage");let AnnotationStorage=_AnnotationStorage;exports2.AnnotationStorage=AnnotationStorage;const _PrintAnnotationStorage=class extends AnnotationStorage{static{__name2(this,"_PrintAnnotationStorage")}constructor(parent){super(),__privateAdd(this,_serializable,null),__privateSet(this,_serializable,structuredClone(parent.serializable))}get print(){(0,_util2.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return __privateGet(this,_serializable)}};_serializable=new WeakMap,__name(_PrintAnnotationStorage,"PrintAnnotationStorage");let PrintAnnotationStorage=_PrintAnnotationStorage;exports2.PrintAnnotationStorage=PrintAnnotationStorage},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _boundFocusin,_boundFocusout,_hasBeenSelected,_isEditing,_isInEditMode,_zIndex;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.AnnotationEditor=void 0;var _tools=__w_pdfjs_require__2(7),_util2=__w_pdfjs_require__2(1);const _AnnotationEditor=class _AnnotationEditor2{static{__name2(this,"_AnnotationEditor")}constructor(parameters){__privateAdd(this,_boundFocusin,this.focusin.bind(this)),__privateAdd(this,_boundFocusout,this.focusout.bind(this)),__privateAdd(this,_hasBeenSelected,!1),__privateAdd(this,_isEditing,!1),__privateAdd(this,_isInEditMode,!1),__privateAdd(this,_zIndex,_AnnotationEditor2._zIndex++),this.constructor===_AnnotationEditor2&&(0,_util2.unreachable)("Cannot initialize AnnotationEditor."),this.parent=parameters.parent,this.id=parameters.id,this.width=this.height=null,this.pageIndex=parameters.parent.pageIndex,this.name=parameters.name,this.div=null;const[width,height]=this.parent.viewportBaseDimensions;this.x=parameters.x/width,this.y=parameters.y/height,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,_util2.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=__privateGet(this,_zIndex)}focusin(event){__privateGet(this,_hasBeenSelected)?__privateSet(this,_hasBeenSelected,!1):this.parent.setSelected(this)}focusout(event){if(!this.isAttachedToDOM)return;const target=event.relatedTarget;target?.closest(`#${this.id}`)||(event.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(event){const rect=this.parent.div.getBoundingClientRect();this.startX=event.clientX-rect.x,this.startY=event.clientY-rect.y,event.dataTransfer.setData("text/plain",this.id),event.dataTransfer.effectAllowed="move"}setAt(x,y,tx,ty){const[width,height]=this.parent.viewportBaseDimensions;[tx,ty]=this.screenToPageTranslation(tx,ty),this.x=(x+tx)/width,this.y=(y+ty)/height,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(x,y){const[width,height]=this.parent.viewportBaseDimensions;[x,y]=this.screenToPageTranslation(x,y),this.x+=x/width,this.y+=y/height,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(x,y){const{rotation}=this.parent.viewport;switch(rotation){case 90:return[y,-x];case 180:return[-x,-y];case 270:return[-y,x];default:return[x,y]}}setDims(width,height){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*width/parentWidth}%`,this.div.style.height=`${100*height/parentHeight}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",__privateGet(this,_boundFocusin)),this.div.addEventListener("focusout",__privateGet(this,_boundFocusout));const[tx,ty]=this.getInitialTranslation();return this.translate(tx,ty),(0,_tools.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(event){const isMac=_tools.KeyboardManager.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){event.preventDefault();return}event.ctrlKey&&!isMac||event.shiftKey||event.metaKey&&isMac?this.parent.toggleSelected(this):this.parent.setSelected(this),__privateSet(this,_hasBeenSelected,!0)}getRect(tx,ty){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions,[pageWidth,pageHeight]=this.parent.pageDimensions,shiftX=pageWidth*tx/parentWidth,shiftY=pageHeight*ty/parentHeight,x=this.x*pageWidth,y=this.y*pageHeight,width=this.width*pageWidth,height=this.height*pageHeight;switch(this.rotation){case 0:return[x+shiftX,pageHeight-y-shiftY-height,x+shiftX+width,pageHeight-y-shiftY];case 90:return[x+shiftY,pageHeight-y+shiftX,x+shiftY+height,pageHeight-y+shiftX+width];case 180:return[x-shiftX-width,pageHeight-y+shiftY,x-shiftX,pageHeight-y+shiftY+height];case 270:return[x-shiftY-height,pageHeight-y-shiftX-width,x-shiftY,pageHeight-y-shiftX];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(rect,pageHeight){const[x1,y1,x2,y2]=rect,width=x2-x1,height=y2-y1;switch(this.rotation){case 0:return[x1,pageHeight-y2,width,height];case 90:return[x1,pageHeight-y1,height,width];case 180:return[x2,pageHeight-y1,width,height];case 270:return[x2,pageHeight-y2,height,width];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){__privateSet(this,_isInEditMode,!0)}disableEditMode(){__privateSet(this,_isInEditMode,!1)}isInEditMode(){return __privateGet(this,_isInEditMode)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var _a2;(_a2=this.div)==null||_a2.addEventListener("focusin",__privateGet(this,_boundFocusin))}serialize(){(0,_util2.unreachable)("An editor must be serializable")}static deserialize(data,parent){const editor=new this.prototype.constructor({parent,id:parent.getNextId()});editor.rotation=data.rotation;const[pageWidth,pageHeight]=parent.pageDimensions,[x,y,width,height]=editor.getRectInCurrentCoords(data.rect,pageHeight);return editor.x=x/pageWidth,editor.y=y/pageHeight,editor.width=width/pageWidth,editor.height=height/pageHeight,editor}remove(){this.div.removeEventListener("focusin",__privateGet(this,_boundFocusin)),this.div.removeEventListener("focusout",__privateGet(this,_boundFocusout)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var _a2;(_a2=this.div)==null||_a2.classList.add("selectedEditor")}unselect(){var _a2;(_a2=this.div)==null||_a2.classList.remove("selectedEditor")}updateParams(type,value){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return __privateGet(this,_isEditing)}set isEditing(value){__privateSet(this,_isEditing,value),value?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};_boundFocusin=new WeakMap,_boundFocusout=new WeakMap,_hasBeenSelected=new WeakMap,_isEditing=new WeakMap,_isInEditMode=new WeakMap,_zIndex=new WeakMap,__name(_AnnotationEditor,"AnnotationEditor"),__publicField(_AnnotationEditor,"_colorManager",new _tools.ColorManager),__publicField(_AnnotationEditor,"_zIndex",1);let AnnotationEditor=_AnnotationEditor;exports2.AnnotationEditor=AnnotationEditor},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _id,_commands,_locked,_maxSize,_position,_serialize,serialize_fn,_elements,_activeEditor,_allEditors,_allLayers,_clipboardManager,_commandManager,_currentPageIndex,_editorTypes,_eventBus,_idManager,_isEnabled,_mode,_selectedEditors,_boundKeydown,_boundOnEditingAction,_boundOnPageChanging,_previousStates,_container,_addKeyboardManager,addKeyboardManager_fn,_removeKeyboardManager,removeKeyboardManager_fn,_dispatchUpdateStates,dispatchUpdateStates_fn,_dispatchUpdateUI,dispatchUpdateUI_fn,_enableAll,enableAll_fn,_disableAll,disableAll_fn,_addEditorToLayer,addEditorToLayer_fn,_isEmpty,isEmpty_fn,_selectEditors,selectEditors_fn;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.KeyboardManager=exports2.CommandManager=exports2.ColorManager=exports2.AnnotationEditorUIManager=void 0,exports2.bindEvents=bindEvents,exports2.opacityToHex=opacityToHex;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(8);function bindEvents(obj,element,names){for(const name of names)element.addEventListener(name,obj[name].bind(obj))}__name2(bindEvents,"bindEvents"),__name(bindEvents,"bindEvents");function opacityToHex(opacity){return Math.round(Math.min(255,Math.max(1,255*opacity))).toString(16).padStart(2,"0")}__name2(opacityToHex,"opacityToHex"),__name(opacityToHex,"opacityToHex");const _IdManager=class{static{__name2(this,"_IdManager")}constructor(){__privateAdd(this,_id,0)}getId(){return`${_util2.AnnotationEditorPrefix}${__privateWrapper(this,_id)._++}`}};_id=new WeakMap,__name(_IdManager,"IdManager");let IdManager=_IdManager;const _CommandManager=class{static{__name2(this,"_CommandManager")}constructor(maxSize=128){__privateAdd(this,_commands,[]),__privateAdd(this,_locked,!1),__privateAdd(this,_maxSize,void 0),__privateAdd(this,_position,-1),__privateSet(this,_maxSize,maxSize)}add({cmd,undo,mustExec,type=NaN,overwriteIfSameType=!1,keepUndo=!1}){if(mustExec&&cmd(),__privateGet(this,_locked))return;const save={cmd,undo,type};if(__privateGet(this,_position)===-1){__privateGet(this,_commands).length>0&&(__privateGet(this,_commands).length=0),__privateSet(this,_position,0),__privateGet(this,_commands).push(save);return}if(overwriteIfSameType&&__privateGet(this,_commands)[__privateGet(this,_position)].type===type){keepUndo&&(save.undo=__privateGet(this,_commands)[__privateGet(this,_position)].undo),__privateGet(this,_commands)[__privateGet(this,_position)]=save;return}const next=__privateGet(this,_position)+1;next===__privateGet(this,_maxSize)?__privateGet(this,_commands).splice(0,1):(__privateSet(this,_position,next),next<__privateGet(this,_commands).length&&__privateGet(this,_commands).splice(next)),__privateGet(this,_commands).push(save)}undo(){__privateGet(this,_position)!==-1&&(__privateSet(this,_locked,!0),__privateGet(this,_commands)[__privateGet(this,_position)].undo(),__privateSet(this,_locked,!1),__privateSet(this,_position,__privateGet(this,_position)-1))}redo(){__privateGet(this,_position)<__privateGet(this,_commands).length-1&&(__privateSet(this,_position,__privateGet(this,_position)+1),__privateSet(this,_locked,!0),__privateGet(this,_commands)[__privateGet(this,_position)].cmd(),__privateSet(this,_locked,!1))}hasSomethingToUndo(){return __privateGet(this,_position)!==-1}hasSomethingToRedo(){return __privateGet(this,_position)<__privateGet(this,_commands).length-1}destroy(){__privateSet(this,_commands,null)}};_commands=new WeakMap,_locked=new WeakMap,_maxSize=new WeakMap,_position=new WeakMap,__name(_CommandManager,"CommandManager");let CommandManager=_CommandManager;exports2.CommandManager=CommandManager;const _KeyboardManager=class _KeyboardManager2{static{__name2(this,"_KeyboardManager")}constructor(callbacks){__privateAdd(this,_serialize),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const isMac=_KeyboardManager2.platform.isMac;for(const[keys,callback]of callbacks)for(const key of keys){const isMacKey=key.startsWith("mac+");isMac&&isMacKey?(this.callbacks.set(key.slice(4),callback),this.allKeys.add(key.split("+").at(-1))):!isMac&&!isMacKey&&(this.callbacks.set(key,callback),this.allKeys.add(key.split("+").at(-1)))}}static get platform(){const platform=typeof navigator<"u"?navigator.platform:"";return(0,_util2.shadow)(this,"platform",{isWin:platform.includes("Win"),isMac:platform.includes("Mac")})}exec(self2,event){if(!this.allKeys.has(event.key))return;const callback=this.callbacks.get(__privateMethod(this,_serialize,serialize_fn).call(this,event));callback&&(callback.bind(self2)(),event.stopPropagation(),event.preventDefault())}};_serialize=new WeakSet,serialize_fn=__name(function(event){event.altKey&&this.buffer.push("alt"),event.ctrlKey&&this.buffer.push("ctrl"),event.metaKey&&this.buffer.push("meta"),event.shiftKey&&this.buffer.push("shift"),this.buffer.push(event.key);const str=this.buffer.join("+");return this.buffer.length=0,str},"#serialize"),__name(_KeyboardManager,"KeyboardManager");let KeyboardManager=_KeyboardManager;exports2.KeyboardManager=KeyboardManager;const _ClipboardManager=class{static{__name2(this,"_ClipboardManager")}constructor(){__privateAdd(this,_elements,null)}copy(element){element&&(Array.isArray(element)?__privateSet(this,_elements,element.map(el=>el.serialize())):__privateSet(this,_elements,[element.serialize()]),__privateSet(this,_elements,__privateGet(this,_elements).filter(el=>!!el)),__privateGet(this,_elements).length===0&&__privateSet(this,_elements,null))}paste(){return __privateGet(this,_elements)}isEmpty(){return __privateGet(this,_elements)===null}destroy(){__privateSet(this,_elements,null)}};_elements=new WeakMap,__name(_ClipboardManager,"ClipboardManager");let ClipboardManager=_ClipboardManager;const _ColorManager=class _ColorManager2{static{__name2(this,"_ColorManager")}get _colors(){const colors=new Map([["CanvasText",null],["Canvas",null]]);return(0,_display_utils2.getColorValues)(colors),(0,_util2.shadow)(this,"_colors",colors)}convert(color){const rgb=(0,_display_utils2.getRGB)(color);if(!window.matchMedia("(forced-colors: active)").matches)return rgb;for(const[name,RGB]of this._colors)if(RGB.every((x,i)=>x===rgb[i]))return _ColorManager2._colorsMapping.get(name);return rgb}getHexCode(name){const rgb=this._colors.get(name);return rgb?_util2.Util.makeHexColor(...rgb):name}};__name(_ColorManager,"ColorManager"),__publicField(_ColorManager,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=_ColorManager;exports2.ColorManager=ColorManager;const _AnnotationEditorUIManager=class _AnnotationEditorUIManager2{static{__name2(this,"_AnnotationEditorUIManager")}constructor(container,eventBus){__privateAdd(this,_addKeyboardManager),__privateAdd(this,_removeKeyboardManager),__privateAdd(this,_dispatchUpdateStates),__privateAdd(this,_dispatchUpdateUI),__privateAdd(this,_enableAll),__privateAdd(this,_disableAll),__privateAdd(this,_addEditorToLayer),__privateAdd(this,_isEmpty),__privateAdd(this,_selectEditors),__privateAdd(this,_activeEditor,null),__privateAdd(this,_allEditors,new Map),__privateAdd(this,_allLayers,new Map),__privateAdd(this,_clipboardManager,new ClipboardManager),__privateAdd(this,_commandManager,new CommandManager),__privateAdd(this,_currentPageIndex,0),__privateAdd(this,_editorTypes,null),__privateAdd(this,_eventBus,null),__privateAdd(this,_idManager,new IdManager),__privateAdd(this,_isEnabled,!1),__privateAdd(this,_mode,_util2.AnnotationEditorType.NONE),__privateAdd(this,_selectedEditors,new Set),__privateAdd(this,_boundKeydown,this.keydown.bind(this)),__privateAdd(this,_boundOnEditingAction,this.onEditingAction.bind(this)),__privateAdd(this,_boundOnPageChanging,this.onPageChanging.bind(this)),__privateAdd(this,_previousStates,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}),__privateAdd(this,_container,null),__privateSet(this,_container,container),__privateSet(this,_eventBus,eventBus),__privateGet(this,_eventBus)._on("editingaction",__privateGet(this,_boundOnEditingAction)),__privateGet(this,_eventBus)._on("pagechanging",__privateGet(this,_boundOnPageChanging))}destroy(){__privateMethod(this,_removeKeyboardManager,removeKeyboardManager_fn).call(this),__privateGet(this,_eventBus)._off("editingaction",__privateGet(this,_boundOnEditingAction)),__privateGet(this,_eventBus)._off("pagechanging",__privateGet(this,_boundOnPageChanging));for(const layer of __privateGet(this,_allLayers).values())layer.destroy();__privateGet(this,_allLayers).clear(),__privateGet(this,_allEditors).clear(),__privateSet(this,_activeEditor,null),__privateGet(this,_selectedEditors).clear(),__privateGet(this,_clipboardManager).destroy(),__privateGet(this,_commandManager).destroy()}onPageChanging({pageNumber}){__privateSet(this,_currentPageIndex,pageNumber-1)}focusMainContainer(){__privateGet(this,_container).focus()}keydown(event){var _a2;(_a2=this.getActive())!=null&&_a2.shouldGetKeyboardEvents()||_AnnotationEditorUIManager2._keyboardManager.exec(this,event)}onEditingAction(details){["undo","redo","cut","copy","paste","delete","selectAll"].includes(details.name)&&this[details.name]()}setEditingState(isEditing){isEditing?(__privateMethod(this,_addKeyboardManager,addKeyboardManager_fn).call(this),__privateMethod(this,_dispatchUpdateStates,dispatchUpdateStates_fn).call(this,{isEditing:__privateGet(this,_mode)!==_util2.AnnotationEditorType.NONE,isEmpty:__privateMethod(this,_isEmpty,isEmpty_fn).call(this),hasSomethingToUndo:__privateGet(this,_commandManager).hasSomethingToUndo(),hasSomethingToRedo:__privateGet(this,_commandManager).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:__privateGet(this,_clipboardManager).isEmpty()})):(__privateMethod(this,_removeKeyboardManager,removeKeyboardManager_fn).call(this),__privateMethod(this,_dispatchUpdateStates,dispatchUpdateStates_fn).call(this,{isEditing:!1}))}registerEditorTypes(types){__privateSet(this,_editorTypes,types);for(const editorType of __privateGet(this,_editorTypes))__privateMethod(this,_dispatchUpdateUI,dispatchUpdateUI_fn).call(this,editorType.defaultPropertiesToUpdate)}getId(){return __privateGet(this,_idManager).getId()}addLayer(layer){__privateGet(this,_allLayers).set(layer.pageIndex,layer),__privateGet(this,_isEnabled)?layer.enable():layer.disable()}removeLayer(layer){__privateGet(this,_allLayers).delete(layer.pageIndex)}updateMode(mode){if(__privateSet(this,_mode,mode),mode===_util2.AnnotationEditorType.NONE)this.setEditingState(!1),__privateMethod(this,_disableAll,disableAll_fn).call(this);else{this.setEditingState(!0),__privateMethod(this,_enableAll,enableAll_fn).call(this);for(const layer of __privateGet(this,_allLayers).values())layer.updateMode(mode)}}updateToolbar(mode){mode!==__privateGet(this,_mode)&&__privateGet(this,_eventBus).dispatch("switchannotationeditormode",{source:this,mode})}updateParams(type,value){for(const editor of __privateGet(this,_selectedEditors))editor.updateParams(type,value);for(const editorType of __privateGet(this,_editorTypes))editorType.updateDefaultParams(type,value)}getEditors(pageIndex){const editors=[];for(const editor of __privateGet(this,_allEditors).values())editor.pageIndex===pageIndex&&editors.push(editor);return editors}getEditor(id){return __privateGet(this,_allEditors).get(id)}addEditor(editor){__privateGet(this,_allEditors).set(editor.id,editor)}removeEditor(editor){__privateGet(this,_allEditors).delete(editor.id),this.unselect(editor)}setActiveEditor(editor){__privateGet(this,_activeEditor)!==editor&&(__privateSet(this,_activeEditor,editor),editor&&__privateMethod(this,_dispatchUpdateUI,dispatchUpdateUI_fn).call(this,editor.propertiesToUpdate))}toggleSelected(editor){if(__privateGet(this,_selectedEditors).has(editor)){__privateGet(this,_selectedEditors).delete(editor),editor.unselect(),__privateMethod(this,_dispatchUpdateStates,dispatchUpdateStates_fn).call(this,{hasSelectedEditor:this.hasSelection});return}__privateGet(this,_selectedEditors).add(editor),editor.select(),__privateMethod(this,_dispatchUpdateUI,dispatchUpdateUI_fn).call(this,editor.propertiesToUpdate),__privateMethod(this,_dispatchUpdateStates,dispatchUpdateStates_fn).call(this,{hasSelectedEditor:!0})}setSelected(editor){for(const ed of __privateGet(this,_selectedEditors))ed!==editor&&ed.unselect();__privateGet(this,_selectedEditors).clear(),__privateGet(this,_selectedEditors).add(editor),editor.select(),__privateMethod(this,_dispatchUpdateUI,dispatchUpdateUI_fn).call(this,editor.propertiesToUpdate),__privateMethod(this,_dispatchUpdateStates,dispatchUpdateStates_fn).call(this,{hasSelectedEditor:!0})}isSelected(editor){return __privateGet(this,_selectedEditors).has(editor)}unselect(editor){editor.unselect(),__privateGet(this,_selectedEditors).delete(editor),__privateMethod(this,_dispatchUpdateStates,dispatchUpdateStates_fn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return __privateGet(this,_selectedEditors).size!==0}undo(){__privateGet(this,_commandManager).undo(),__privateMethod(this,_dispatchUpdateStates,dispatchUpdateStates_fn).call(this,{hasSomethingToUndo:__privateGet(this,_commandManager).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:__privateMethod(this,_isEmpty,isEmpty_fn).call(this)})}redo(){__privateGet(this,_commandManager).redo(),__privateMethod(this,_dispatchUpdateStates,dispatchUpdateStates_fn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:__privateGet(this,_commandManager).hasSomethingToRedo(),isEmpty:__privateMethod(this,_isEmpty,isEmpty_fn).call(this)})}addCommands(params){__privateGet(this,_commandManager).add(params),__privateMethod(this,_dispatchUpdateStates,dispatchUpdateStates_fn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:__privateMethod(this,_isEmpty,isEmpty_fn).call(this)})}delete(){if(__privateGet(this,_activeEditor)&&__privateGet(this,_activeEditor).commitOrRemove(),!this.hasSelection)return;const editors=[...__privateGet(this,_selectedEditors)],cmd=__name(()=>{for(const editor of editors)editor.remove()},"cmd"),undo=__name(()=>{for(const editor of editors)__privateMethod(this,_addEditorToLayer,addEditorToLayer_fn).call(this,editor)},"undo");this.addCommands({cmd,undo,mustExec:!0})}copy(){if(__privateGet(this,_activeEditor)&&__privateGet(this,_activeEditor).commitOrRemove(),this.hasSelection){const editors=[];for(const editor of __privateGet(this,_selectedEditors))editor.isEmpty()||editors.push(editor);if(editors.length===0)return;__privateGet(this,_clipboardManager).copy(editors),__privateMethod(this,_dispatchUpdateStates,dispatchUpdateStates_fn).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(__privateGet(this,_clipboardManager).isEmpty())return;this.unselectAll();const layer=__privateGet(this,_allLayers).get(__privateGet(this,_currentPageIndex)),newEditors=__privateGet(this,_clipboardManager).paste().map(data=>layer.deserialize(data)),cmd=__name(()=>{for(const editor of newEditors)__privateMethod(this,_addEditorToLayer,addEditorToLayer_fn).call(this,editor);__privateMethod(this,_selectEditors,selectEditors_fn).call(this,newEditors)},"cmd"),undo=__name(()=>{for(const editor of newEditors)editor.remove()},"undo");this.addCommands({cmd,undo,mustExec:!0})}selectAll(){for(const editor of __privateGet(this,_selectedEditors))editor.commit();__privateMethod(this,_selectEditors,selectEditors_fn).call(this,__privateGet(this,_allEditors).values())}unselectAll(){if(__privateGet(this,_activeEditor)){__privateGet(this,_activeEditor).commitOrRemove();return}if(__privateMethod(this,_selectEditors,selectEditors_fn).size!==0){for(const editor of __privateGet(this,_selectedEditors))editor.unselect();__privateGet(this,_selectedEditors).clear(),__privateMethod(this,_dispatchUpdateStates,dispatchUpdateStates_fn).call(this,{hasSelectedEditor:!1})}}isActive(editor){return __privateGet(this,_activeEditor)===editor}getActive(){return __privateGet(this,_activeEditor)}getMode(){return __privateGet(this,_mode)}};_activeEditor=new WeakMap,_allEditors=new WeakMap,_allLayers=new WeakMap,_clipboardManager=new WeakMap,_commandManager=new WeakMap,_currentPageIndex=new WeakMap,_editorTypes=new WeakMap,_eventBus=new WeakMap,_idManager=new WeakMap,_isEnabled=new WeakMap,_mode=new WeakMap,_selectedEditors=new WeakMap,_boundKeydown=new WeakMap,_boundOnEditingAction=new WeakMap,_boundOnPageChanging=new WeakMap,_previousStates=new WeakMap,_container=new WeakMap,_addKeyboardManager=new WeakSet,addKeyboardManager_fn=__name(function(){__privateGet(this,_container).addEventListener("keydown",__privateGet(this,_boundKeydown))},"#addKeyboardManager"),_removeKeyboardManager=new WeakSet,removeKeyboardManager_fn=__name(function(){__privateGet(this,_container).removeEventListener("keydown",__privateGet(this,_boundKeydown))},"#removeKeyboardManager"),_dispatchUpdateStates=new WeakSet,dispatchUpdateStates_fn=__name(function(details){Object.entries(details).some(([key,value])=>__privateGet(this,_previousStates)[key]!==value)&&__privateGet(this,_eventBus).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(__privateGet(this,_previousStates),details)})},"#dispatchUpdateStates"),_dispatchUpdateUI=new WeakSet,dispatchUpdateUI_fn=__name(function(details){__privateGet(this,_eventBus).dispatch("annotationeditorparamschanged",{source:this,details})},"#dispatchUpdateUI"),_enableAll=new WeakSet,enableAll_fn=__name(function(){if(!__privateGet(this,_isEnabled)){__privateSet(this,_isEnabled,!0);for(const layer of __privateGet(this,_allLayers).values())layer.enable()}},"#enableAll"),_disableAll=new WeakSet,disableAll_fn=__name(function(){if(this.unselectAll(),__privateGet(this,_isEnabled)){__privateSet(this,_isEnabled,!1);for(const layer of __privateGet(this,_allLayers).values())layer.disable()}},"#disableAll"),_addEditorToLayer=new WeakSet,addEditorToLayer_fn=__name(function(editor){const layer=__privateGet(this,_allLayers).get(editor.pageIndex);layer?layer.addOrRebuild(editor):this.addEditor(editor)},"#addEditorToLayer"),_isEmpty=new WeakSet,isEmpty_fn=__name(function(){if(__privateGet(this,_allEditors).size===0)return!0;if(__privateGet(this,_allEditors).size===1)for(const editor of __privateGet(this,_allEditors).values())return editor.isEmpty();return!1},"#isEmpty"),_selectEditors=new WeakSet,selectEditors_fn=__name(function(editors){__privateGet(this,_selectedEditors).clear();for(const editor of editors)editor.isEmpty()||(__privateGet(this,_selectedEditors).add(editor),editor.select());__privateMethod(this,_dispatchUpdateStates,dispatchUpdateStates_fn).call(this,{hasSelectedEditor:!0})},"#selectEditors"),__name(_AnnotationEditorUIManager,"AnnotationEditorUIManager"),__publicField(_AnnotationEditorUIManager,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],_AnnotationEditorUIManager.prototype.selectAll],[["ctrl+c","mac+meta+c"],_AnnotationEditorUIManager.prototype.copy],[["ctrl+v","mac+meta+v"],_AnnotationEditorUIManager.prototype.paste],[["ctrl+x","mac+meta+x"],_AnnotationEditorUIManager.prototype.cut],[["ctrl+z","mac+meta+z"],_AnnotationEditorUIManager.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],_AnnotationEditorUIManager.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],_AnnotationEditorUIManager.prototype.delete],[["Escape","mac+Escape"],_AnnotationEditorUIManager.prototype.unselectAll]]));let AnnotationEditorUIManager=_AnnotationEditorUIManager;exports2.AnnotationEditorUIManager=AnnotationEditorUIManager},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.StatTimer=exports2.RenderingCancelledException=exports2.PixelsPerInch=exports2.PageViewport=exports2.PDFDateString=exports2.DOMStandardFontDataFactory=exports2.DOMSVGFactory=exports2.DOMCanvasFactory=exports2.DOMCMapReaderFactory=exports2.AnnotationPrefix=void 0,exports2.deprecated=deprecated,exports2.getColorValues=getColorValues,exports2.getCurrentTransform=getCurrentTransform,exports2.getCurrentTransformInverse=getCurrentTransformInverse,exports2.getFilenameFromUrl=getFilenameFromUrl,exports2.getPdfFilenameFromUrl=getPdfFilenameFromUrl,exports2.getRGB=getRGB,exports2.getXfaPageViewport=getXfaPageViewport,exports2.isDataScheme=isDataScheme,exports2.isPdfFile=isPdfFile,exports2.isValidFetchUrl=isValidFetchUrl,exports2.loadScript=loadScript;var _base_factory=__w_pdfjs_require__2(9),_util2=__w_pdfjs_require__2(1);const SVG_NS="http://www.w3.org/2000/svg",AnnotationPrefix="pdfjs_internal_id_";exports2.AnnotationPrefix=AnnotationPrefix;const _PixelsPerInch=class{static{__name2(this,"_PixelsPerInch")}};__name(_PixelsPerInch,"PixelsPerInch"),__publicField(_PixelsPerInch,"CSS",96),__publicField(_PixelsPerInch,"PDF",72),__publicField(_PixelsPerInch,"PDF_TO_CSS_UNITS",_PixelsPerInch.CSS/_PixelsPerInch.PDF);let PixelsPerInch=_PixelsPerInch;exports2.PixelsPerInch=PixelsPerInch;const _DOMCanvasFactory=class extends _base_factory.BaseCanvasFactory{static{__name2(this,"_DOMCanvasFactory")}constructor({ownerDocument=globalThis.document}={}){super(),this._document=ownerDocument}_createCanvas(width,height){const canvas=this._document.createElement("canvas");return canvas.width=width,canvas.height=height,canvas}};__name(_DOMCanvasFactory,"DOMCanvasFactory");let DOMCanvasFactory=_DOMCanvasFactory;exports2.DOMCanvasFactory=DOMCanvasFactory;async function fetchData(url,asTypedArray=!1){if(isValidFetchUrl(url,document.baseURI)){const response=await fetch(url);if(!response.ok)throw new Error(response.statusText);return asTypedArray?new Uint8Array(await response.arrayBuffer()):(0,_util2.stringToBytes)(await response.text())}return new Promise((resolve,reject)=>{const request=new XMLHttpRequest;request.open("GET",url,!0),asTypedArray&&(request.responseType="arraybuffer"),request.onreadystatechange=()=>{if(request.readyState===XMLHttpRequest.DONE){if(request.status===200||request.status===0){let data;if(asTypedArray&&request.response?data=new Uint8Array(request.response):!asTypedArray&&request.responseText&&(data=(0,_util2.stringToBytes)(request.responseText)),data){resolve(data);return}}reject(new Error(request.statusText))}},request.send(null)})}__name2(fetchData,"fetchData"),__name(fetchData,"fetchData");const _DOMCMapReaderFactory=class extends _base_factory.BaseCMapReaderFactory{static{__name2(this,"_DOMCMapReaderFactory")}_fetchData(url,compressionType){return fetchData(url,this.isCompressed).then(data=>({cMapData:data,compressionType}))}};__name(_DOMCMapReaderFactory,"DOMCMapReaderFactory");let DOMCMapReaderFactory=_DOMCMapReaderFactory;exports2.DOMCMapReaderFactory=DOMCMapReaderFactory;const _DOMStandardFontDataFactory=class extends _base_factory.BaseStandardFontDataFactory{static{__name2(this,"_DOMStandardFontDataFactory")}_fetchData(url){return fetchData(url,!0)}};__name(_DOMStandardFontDataFactory,"DOMStandardFontDataFactory");let DOMStandardFontDataFactory=_DOMStandardFontDataFactory;exports2.DOMStandardFontDataFactory=DOMStandardFontDataFactory;const _DOMSVGFactory=class extends _base_factory.BaseSVGFactory{static{__name2(this,"_DOMSVGFactory")}_createSVG(type){return document.createElementNS(SVG_NS,type)}};__name(_DOMSVGFactory,"DOMSVGFactory");let DOMSVGFactory=_DOMSVGFactory;exports2.DOMSVGFactory=DOMSVGFactory;const _PageViewport=class _PageViewport2{static{__name2(this,"_PageViewport")}constructor({viewBox,scale,rotation,offsetX=0,offsetY=0,dontFlip=!1}){this.viewBox=viewBox,this.scale=scale,this.rotation=rotation,this.offsetX=offsetX,this.offsetY=offsetY;const centerX=(viewBox[2]+viewBox[0])/2,centerY=(viewBox[3]+viewBox[1])/2;let rotateA,rotateB,rotateC,rotateD;switch(rotation%=360,rotation<0&&(rotation+=360),rotation){case 180:rotateA=-1,rotateB=0,rotateC=0,rotateD=1;break;case 90:rotateA=0,rotateB=1,rotateC=1,rotateD=0;break;case 270:rotateA=0,rotateB=-1,rotateC=-1,rotateD=0;break;case 0:rotateA=1,rotateB=0,rotateC=0,rotateD=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}dontFlip&&(rotateC=-rotateC,rotateD=-rotateD);let offsetCanvasX,offsetCanvasY,width,height;rotateA===0?(offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX,offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY,width=Math.abs(viewBox[3]-viewBox[1])*scale,height=Math.abs(viewBox[2]-viewBox[0])*scale):(offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX,offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY,width=Math.abs(viewBox[2]-viewBox[0])*scale,height=Math.abs(viewBox[3]-viewBox[1])*scale),this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY],this.width=width,this.height=height}clone({scale=this.scale,rotation=this.rotation,offsetX=this.offsetX,offsetY=this.offsetY,dontFlip=!1}={}){return new _PageViewport2({viewBox:this.viewBox.slice(),scale,rotation,offsetX,offsetY,dontFlip})}convertToViewportPoint(x,y){return _util2.Util.applyTransform([x,y],this.transform)}convertToViewportRectangle(rect){const topLeft=_util2.Util.applyTransform([rect[0],rect[1]],this.transform),bottomRight=_util2.Util.applyTransform([rect[2],rect[3]],this.transform);return[topLeft[0],topLeft[1],bottomRight[0],bottomRight[1]]}convertToPdfPoint(x,y){return _util2.Util.applyInverseTransform([x,y],this.transform)}};__name(_PageViewport,"PageViewport");let PageViewport=_PageViewport;exports2.PageViewport=PageViewport;const _RenderingCancelledException=class extends _util2.BaseException{static{__name2(this,"_RenderingCancelledException")}constructor(msg,type){super(msg,"RenderingCancelledException"),this.type=type}};__name(_RenderingCancelledException,"RenderingCancelledException");let RenderingCancelledException=_RenderingCancelledException;exports2.RenderingCancelledException=RenderingCancelledException;function isDataScheme(url){const ii=url.length;let i=0;for(;i<ii&&url[i].trim()==="";)i++;return url.substring(i,i+5).toLowerCase()==="data:"}__name2(isDataScheme,"isDataScheme"),__name(isDataScheme,"isDataScheme");function isPdfFile(filename){return typeof filename=="string"&&/\.pdf$/i.test(filename)}__name2(isPdfFile,"isPdfFile"),__name(isPdfFile,"isPdfFile");function getFilenameFromUrl(url){const anchor=url.indexOf("#"),query=url.indexOf("?"),end=Math.min(anchor>0?anchor:url.length,query>0?query:url.length);return url.substring(url.lastIndexOf("/",end)+1,end)}__name2(getFilenameFromUrl,"getFilenameFromUrl"),__name(getFilenameFromUrl,"getFilenameFromUrl");function getPdfFilenameFromUrl(url,defaultFilename="document.pdf"){if(typeof url!="string")return defaultFilename;if(isDataScheme(url))return(0,_util2.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),defaultFilename;const reURI=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,reFilename=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,splitURI=reURI.exec(url);let suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename&&(suggestedFilename=suggestedFilename[0],suggestedFilename.includes("%")))try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0]}catch{}return suggestedFilename||defaultFilename}__name2(getPdfFilenameFromUrl,"getPdfFilenameFromUrl"),__name(getPdfFilenameFromUrl,"getPdfFilenameFromUrl");const _StatTimer=class{static{__name2(this,"_StatTimer")}constructor(){this.started=Object.create(null),this.times=[]}time(name){name in this.started&&(0,_util2.warn)(`Timer is already running for ${name}`),this.started[name]=Date.now()}timeEnd(name){name in this.started||(0,_util2.warn)(`Timer has not been started for ${name}`),this.times.push({name,start:this.started[name],end:Date.now()}),delete this.started[name]}toString(){const outBuf=[];let longest=0;for(const time of this.times){const name=time.name;name.length>longest&&(longest=name.length)}for(const time of this.times){const duration=time.end-time.start;outBuf.push(`${time.name.padEnd(longest)} ${duration}ms
`)}return outBuf.join("")}};__name(_StatTimer,"StatTimer");let StatTimer=_StatTimer;exports2.StatTimer=StatTimer;function isValidFetchUrl(url,baseUrl){try{const{protocol}=baseUrl?new URL(url,baseUrl):new URL(url);return protocol==="http:"||protocol==="https:"}catch{return!1}}__name2(isValidFetchUrl,"isValidFetchUrl"),__name(isValidFetchUrl,"isValidFetchUrl");function loadScript(src,removeScriptElement=!1){return new Promise((resolve,reject)=>{const script=document.createElement("script");script.src=src,script.onload=function(evt){removeScriptElement&&script.remove(),resolve(evt)},script.onerror=function(){reject(new Error(`Cannot load script at: ${script.src}`))},(document.head||document.documentElement).append(script)})}__name2(loadScript,"loadScript"),__name(loadScript,"loadScript");function deprecated(details){console.log("Deprecated API usage: "+details)}__name2(deprecated,"deprecated"),__name(deprecated,"deprecated");let pdfDateStringRegex;const _PDFDateString=class{static{__name2(this,"_PDFDateString")}static toDateObject(input){if(!input||typeof input!="string")return null;pdfDateStringRegex||(pdfDateStringRegex=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const matches=pdfDateStringRegex.exec(input);if(!matches)return null;const year=parseInt(matches[1],10);let month=parseInt(matches[2],10);month=month>=1&&month<=12?month-1:0;let day=parseInt(matches[3],10);day=day>=1&&day<=31?day:1;let hour=parseInt(matches[4],10);hour=hour>=0&&hour<=23?hour:0;let minute=parseInt(matches[5],10);minute=minute>=0&&minute<=59?minute:0;let second=parseInt(matches[6],10);second=second>=0&&second<=59?second:0;const universalTimeRelation=matches[7]||"Z";let offsetHour=parseInt(matches[8],10);offsetHour=offsetHour>=0&&offsetHour<=23?offsetHour:0;let offsetMinute=parseInt(matches[9],10)||0;return offsetMinute=offsetMinute>=0&&offsetMinute<=59?offsetMinute:0,universalTimeRelation==="-"?(hour+=offsetHour,minute+=offsetMinute):universalTimeRelation==="+"&&(hour-=offsetHour,minute-=offsetMinute),new Date(Date.UTC(year,month,day,hour,minute,second))}};__name(_PDFDateString,"PDFDateString");let PDFDateString=_PDFDateString;exports2.PDFDateString=PDFDateString;function getXfaPageViewport(xfaPage,{scale=1,rotation=0}){const{width,height}=xfaPage.attributes.style,viewBox=[0,0,parseInt(width),parseInt(height)];return new PageViewport({viewBox,scale,rotation})}__name2(getXfaPageViewport,"getXfaPageViewport"),__name(getXfaPageViewport,"getXfaPageViewport");function getRGB(color){if(color.startsWith("#")){const colorRGB=parseInt(color.slice(1),16);return[(colorRGB&16711680)>>16,(colorRGB&65280)>>8,colorRGB&255]}return color.startsWith("rgb(")?color.slice(4,-1).split(",").map(x=>parseInt(x)):color.startsWith("rgba(")?color.slice(5,-1).split(",").map(x=>parseInt(x)).slice(0,3):((0,_util2.warn)(`Not a valid color format: "${color}"`),[0,0,0])}__name2(getRGB,"getRGB"),__name(getRGB,"getRGB");function getColorValues(colors){const span=document.createElement("span");span.style.visibility="hidden",document.body.append(span);for(const name of colors.keys()){span.style.color=name;const computedColor=window.getComputedStyle(span).color;colors.set(name,getRGB(computedColor))}span.remove()}__name2(getColorValues,"getColorValues"),__name(getColorValues,"getColorValues");function getCurrentTransform(ctx){const{a,b,c,d,e,f}=ctx.getTransform();return[a,b,c,d,e,f]}__name2(getCurrentTransform,"getCurrentTransform"),__name(getCurrentTransform,"getCurrentTransform");function getCurrentTransformInverse(ctx){const{a,b,c,d,e,f}=ctx.getTransform().invertSelf();return[a,b,c,d,e,f]}__name2(getCurrentTransformInverse,"getCurrentTransformInverse"),__name(getCurrentTransformInverse,"getCurrentTransformInverse")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.BaseStandardFontDataFactory=exports2.BaseSVGFactory=exports2.BaseCanvasFactory=exports2.BaseCMapReaderFactory=void 0;var _util2=__w_pdfjs_require__2(1);const _BaseCanvasFactory=class _BaseCanvasFactory2{static{__name2(this,"_BaseCanvasFactory")}constructor(){this.constructor===_BaseCanvasFactory2&&(0,_util2.unreachable)("Cannot initialize BaseCanvasFactory.")}create(width,height){if(width<=0||height<=0)throw new Error("Invalid canvas size");const canvas=this._createCanvas(width,height);return{canvas,context:canvas.getContext("2d")}}reset(canvasAndContext,width,height){if(!canvasAndContext.canvas)throw new Error("Canvas is not specified");if(width<=0||height<=0)throw new Error("Invalid canvas size");canvasAndContext.canvas.width=width,canvasAndContext.canvas.height=height}destroy(canvasAndContext){if(!canvasAndContext.canvas)throw new Error("Canvas is not specified");canvasAndContext.canvas.width=0,canvasAndContext.canvas.height=0,canvasAndContext.canvas=null,canvasAndContext.context=null}_createCanvas(width,height){(0,_util2.unreachable)("Abstract method `_createCanvas` called.")}};__name(_BaseCanvasFactory,"BaseCanvasFactory");let BaseCanvasFactory=_BaseCanvasFactory;exports2.BaseCanvasFactory=BaseCanvasFactory;const _BaseCMapReaderFactory=class _BaseCMapReaderFactory2{static{__name2(this,"_BaseCMapReaderFactory")}constructor({baseUrl=null,isCompressed=!1}){this.constructor===_BaseCMapReaderFactory2&&(0,_util2.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=baseUrl,this.isCompressed=isCompressed}async fetch({name}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!name)throw new Error("CMap name must be specified.");const url=this.baseUrl+name+(this.isCompressed?".bcmap":""),compressionType=this.isCompressed?_util2.CMapCompressionType.BINARY:_util2.CMapCompressionType.NONE;return this._fetchData(url,compressionType).catch(reason=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${url}`)})}_fetchData(url,compressionType){(0,_util2.unreachable)("Abstract method `_fetchData` called.")}};__name(_BaseCMapReaderFactory,"BaseCMapReaderFactory");let BaseCMapReaderFactory=_BaseCMapReaderFactory;exports2.BaseCMapReaderFactory=BaseCMapReaderFactory;const _BaseStandardFontDataFactory=class _BaseStandardFontDataFactory2{static{__name2(this,"_BaseStandardFontDataFactory")}constructor({baseUrl=null}){this.constructor===_BaseStandardFontDataFactory2&&(0,_util2.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=baseUrl}async fetch({filename}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!filename)throw new Error("Font filename must be specified.");const url=`${this.baseUrl}${filename}`;return this._fetchData(url).catch(reason=>{throw new Error(`Unable to load font data at: ${url}`)})}_fetchData(url){(0,_util2.unreachable)("Abstract method `_fetchData` called.")}};__name(_BaseStandardFontDataFactory,"BaseStandardFontDataFactory");let BaseStandardFontDataFactory=_BaseStandardFontDataFactory;exports2.BaseStandardFontDataFactory=BaseStandardFontDataFactory;const _BaseSVGFactory=class _BaseSVGFactory2{static{__name2(this,"_BaseSVGFactory")}constructor(){this.constructor===_BaseSVGFactory2&&(0,_util2.unreachable)("Cannot initialize BaseSVGFactory.")}create(width,height,skipDimensions=!1){if(width<=0||height<=0)throw new Error("Invalid SVG dimensions");const svg=this._createSVG("svg:svg");return svg.setAttribute("version","1.1"),skipDimensions||(svg.setAttribute("width",`${width}px`),svg.setAttribute("height",`${height}px`)),svg.setAttribute("preserveAspectRatio","none"),svg.setAttribute("viewBox",`0 0 ${width} ${height}`),svg}createElement(type){if(typeof type!="string")throw new Error("Invalid SVG element type");return this._createSVG(type)}_createSVG(type){(0,_util2.unreachable)("Abstract method `_createSVG` called.")}};__name(_BaseSVGFactory,"BaseSVGFactory");let BaseSVGFactory=_BaseSVGFactory;exports2.BaseSVGFactory=BaseSVGFactory},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.MurmurHash3_64=void 0;var _util2=__w_pdfjs_require__2(1);const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535,_MurmurHash3_64=class{static{__name2(this,"_MurmurHash3_64")}constructor(seed){this.h1=seed?seed&4294967295:SEED,this.h2=seed?seed&4294967295:SEED}update(input){let data,length;if(typeof input=="string"){data=new Uint8Array(input.length*2),length=0;for(let i=0,ii=input.length;i<ii;i++){const code=input.charCodeAt(i);code<=255?data[length++]=code:(data[length++]=code>>>8,data[length++]=code&255)}}else if((0,_util2.isArrayBuffer)(input))data=input.slice(),length=data.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const blockCounts=length>>2,tailLength=length-blockCounts*4,dataUint32=new Uint32Array(data.buffer,0,blockCounts);let k1=0,k2=0,h1=this.h1,h2=this.h2;const C1=3432918353,C2=461845907,C1_LOW=C1&MASK_LOW,C2_LOW=C2&MASK_LOW;for(let i=0;i<blockCounts;i++)i&1?(k1=dataUint32[i],k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW,k1=k1<<15|k1>>>17,k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW,h1^=k1,h1=h1<<13|h1>>>19,h1=h1*5+3864292196):(k2=dataUint32[i],k2=k2*C1&MASK_HIGH|k2*C1_LOW&MASK_LOW,k2=k2<<15|k2>>>17,k2=k2*C2&MASK_HIGH|k2*C2_LOW&MASK_LOW,h2^=k2,h2=h2<<13|h2>>>19,h2=h2*5+3864292196);switch(k1=0,tailLength){case 3:k1^=data[blockCounts*4+2]<<16;case 2:k1^=data[blockCounts*4+1]<<8;case 1:k1^=data[blockCounts*4],k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW,k1=k1<<15|k1>>>17,k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW,blockCounts&1?h1^=k1:h2^=k1}this.h1=h1,this.h2=h2}hexdigest(){let h1=this.h1,h2=this.h2;h1^=h2>>>1,h1=h1*3981806797&MASK_HIGH|h1*36045&MASK_LOW,h2=h2*4283543511&MASK_HIGH|((h2<<16|h1>>>16)*2950163797&MASK_HIGH)>>>16,h1^=h2>>>1,h1=h1*444984403&MASK_HIGH|h1*60499&MASK_LOW,h2=h2*3301882366&MASK_HIGH|((h2<<16|h1>>>16)*3120437893&MASK_HIGH)>>>16,h1^=h2>>>1;const hex1=(h1>>>0).toString(16),hex2=(h2>>>0).toString(16);return hex1.padStart(8,"0")+hex2.padStart(8,"0")}};__name(_MurmurHash3_64,"MurmurHash3_64");let MurmurHash3_64=_MurmurHash3_64;exports2.MurmurHash3_64=MurmurHash3_64},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _a2;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.FontLoader=exports2.FontFaceObject=void 0;var _util2=__w_pdfjs_require__2(1);const _BaseFontLoader=class _BaseFontLoader2{static{__name2(this,"_BaseFontLoader")}constructor({docId,onUnsupportedFeature,ownerDocument=globalThis.document,styleElement=null}){this.constructor===_BaseFontLoader2&&(0,_util2.unreachable)("Cannot initialize BaseFontLoader."),this.docId=docId,this._onUnsupportedFeature=onUnsupportedFeature,this._document=ownerDocument,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(nativeFontFace){this.nativeFontFaces.push(nativeFontFace),this._document.fonts.add(nativeFontFace)}insertRule(rule){let styleElement=this.styleElement;styleElement||(styleElement=this.styleElement=this._document.createElement("style"),styleElement.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(styleElement));const styleSheet=styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length)}clear(){for(const nativeFontFace of this.nativeFontFaces)this._document.fonts.delete(nativeFontFace);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(font){if(font.attached||font.missingFile)return;if(font.attached=!0,this.isFontLoadingAPISupported){const nativeFontFace=font.createNativeFontFace();if(nativeFontFace){this.addNativeFontFace(nativeFontFace);try{await nativeFontFace.loaded}catch(ex){throw this._onUnsupportedFeature({featureId:_util2.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,_util2.warn)(`Failed to load font '${nativeFontFace.family}': '${ex}'.`),font.disableFontFace=!0,ex}}return}const rule=font.createFontFaceRule();if(rule){if(this.insertRule(rule),this.isSyncFontLoadingSupported)return;await new Promise(resolve=>{const request=this._queueLoadingCallback(resolve);this._prepareFontLoadEvent([rule],[font],request)})}}_queueLoadingCallback(callback){(0,_util2.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var _a22;const hasFonts=!!((_a22=this._document)!=null&&_a22.fonts);return(0,_util2.shadow)(this,"isFontLoadingAPISupported",hasFonts)}get isSyncFontLoadingSupported(){(0,_util2.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,_util2.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(rules,fontsToLoad,request){(0,_util2.unreachable)("Abstract method `_prepareFontLoadEvent`.")}};__name(_BaseFontLoader,"BaseFontLoader");let BaseFontLoader=_BaseFontLoader,FontLoader;exports2.FontLoader=FontLoader,exports2.FontLoader=FontLoader=(_a2=class extends BaseFontLoader{static{__name2(this,"_a")}constructor(params){super(params),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let supported=!1;if(typeof navigator>"u")supported=!0;else{const m=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);m?.[1]>=14&&(supported=!0)}return(0,_util2.shadow)(this,"isSyncFontLoadingSupported",supported)}_queueLoadingCallback(callback){function completeRequest(){for((0,_util2.assert)(!request.done,"completeRequest() cannot be called twice."),request.done=!0;context.requests.length>0&&context.requests[0].done;){const otherRequest=context.requests.shift();setTimeout(otherRequest.callback,0)}}__name2(completeRequest,"completeRequest"),__name(completeRequest,"completeRequest");const context=this.loadingContext,request={id:`pdfjs-font-loading-${context.nextRequestId++}`,done:!1,complete:completeRequest,callback};return context.requests.push(request),request}get _loadTestFont(){const getLoadTestFont=__name(function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")},"getLoadTestFont");return(0,_util2.shadow)(this,"_loadTestFont",getLoadTestFont())}_prepareFontLoadEvent(rules,fonts,request){function int32(data2,offset){return data2.charCodeAt(offset)<<24|data2.charCodeAt(offset+1)<<16|data2.charCodeAt(offset+2)<<8|data2.charCodeAt(offset+3)&255}__name2(int32,"int32"),__name(int32,"int32");function spliceString(s,offset,remove,insert){const chunk1=s.substring(0,offset),chunk2=s.substring(offset+remove);return chunk1+insert+chunk2}__name2(spliceString,"spliceString"),__name(spliceString,"spliceString");let i,ii;const canvas=this._document.createElement("canvas");canvas.width=1,canvas.height=1;const ctx=canvas.getContext("2d");let called=0;function isFontReady(name,callback){if(called++,called>30){(0,_util2.warn)("Load test font never loaded."),callback();return}if(ctx.font="30px "+name,ctx.fillText(".",0,20),ctx.getImageData(0,0,1,1).data[3]>0){callback();return}setTimeout(isFontReady.bind(null,name,callback))}__name2(isFontReady,"isFontReady"),__name(isFontReady,"isFontReady");const loadTestFontId=`lt${Date.now()}${this.loadTestFontId++}`;let data=this._loadTestFont;data=spliceString(data,976,loadTestFontId.length,loadTestFontId);const CFF_CHECKSUM_OFFSET=16,XXXX_VALUE=1482184792;let checksum=int32(data,CFF_CHECKSUM_OFFSET);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4)checksum=checksum-XXXX_VALUE+int32(loadTestFontId,i)|0;i<loadTestFontId.length&&(checksum=checksum-XXXX_VALUE+int32(loadTestFontId+"XXX",i)|0),data=spliceString(data,CFF_CHECKSUM_OFFSET,4,(0,_util2.string32)(checksum));const url=`url(data:font/opentype;base64,${btoa(data)});`,rule=`@font-face {font-family:"${loadTestFontId}";src:${url}}`;this.insertRule(rule);const names=[];for(const font of fonts)names.push(font.loadedName);names.push(loadTestFontId);const div=this._document.createElement("div");div.style.visibility="hidden",div.style.width=div.style.height="10px",div.style.position="absolute",div.style.top=div.style.left="0px";for(const name of names){const span=this._document.createElement("span");span.textContent="Hi",span.style.fontFamily=name,div.append(span)}this._document.body.append(div),isFontReady(loadTestFontId,()=>{div.remove(),request.complete()})}},__name(_a2,"GenericFontLoader"),_a2);const _FontFaceObject=class{static{__name2(this,"_FontFaceObject")}constructor(translatedData,{isEvalSupported=!0,disableFontFace=!1,ignoreErrors=!1,onUnsupportedFeature,fontRegistry=null}){this.compiledGlyphs=Object.create(null);for(const i in translatedData)this[i]=translatedData[i];this.isEvalSupported=isEvalSupported!==!1,this.disableFontFace=disableFontFace===!0,this.ignoreErrors=ignoreErrors===!0,this._onUnsupportedFeature=onUnsupportedFeature,this.fontRegistry=fontRegistry}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let nativeFontFace;if(!this.cssFontInfo)nativeFontFace=new FontFace(this.loadedName,this.data,{});else{const css={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(css.style=`oblique ${this.cssFontInfo.italicAngle}deg`),nativeFontFace=new FontFace(this.cssFontInfo.fontFamily,this.data,css)}return this.fontRegistry&&this.fontRegistry.registerFont(this),nativeFontFace}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const data=(0,_util2.bytesToString)(this.data),url=`url(data:${this.mimetype};base64,${btoa(data)});`;let rule;if(!this.cssFontInfo)rule=`@font-face {font-family:"${this.loadedName}";src:${url}}`;else{let css=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(css+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),rule=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${css}src:${url}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,url),rule}getPathGenerator(objs,character){if(this.compiledGlyphs[character]!==void 0)return this.compiledGlyphs[character];let cmds;try{cmds=objs.get(this.loadedName+"_path_"+character)}catch(ex){if(!this.ignoreErrors)throw ex;return this._onUnsupportedFeature({featureId:_util2.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,_util2.warn)(`getPathGenerator - ignoring character: "${ex}".`),this.compiledGlyphs[character]=function(c,size){}}if(this.isEvalSupported&&_util2.FeatureTest.isEvalSupported){const jsBuf=[];for(const current of cmds){const args=current.args!==void 0?current.args.join(","):"";jsBuf.push("c.",current.cmd,"(",args,`);
`)}return this.compiledGlyphs[character]=new Function("c","size",jsBuf.join(""))}return this.compiledGlyphs[character]=function(c,size){for(const current of cmds)current.cmd==="scale"&&(current.args=[size,-size]),c[current.cmd].apply(c,current.args)}}};__name(_FontFaceObject,"FontFaceObject");let FontFaceObject=_FontFaceObject;exports2.FontFaceObject=FontFaceObject},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _restoreInitialState,restoreInitialState_fn;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.CanvasGraphics=void 0;var _display_utils2=__w_pdfjs_require__2(8),_util2=__w_pdfjs_require__2(1),_pattern_helper=__w_pdfjs_require__2(13),_image_utils=__w_pdfjs_require__2(14),_is_node2=__w_pdfjs_require__2(3);const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,MAX_GROUP_SIZE=4096,EXECUTION_TIME=15,EXECUTION_STEPS=10,MAX_SIZE_TO_COMPILE=_is_node2.isNodeJS&&typeof Path2D>"u"?-1:1e3,FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(ctx,destCtx){if(ctx._removeMirroring)throw new Error("Context is already forwarding operations.");ctx.__originalSave=ctx.save,ctx.__originalRestore=ctx.restore,ctx.__originalRotate=ctx.rotate,ctx.__originalScale=ctx.scale,ctx.__originalTranslate=ctx.translate,ctx.__originalTransform=ctx.transform,ctx.__originalSetTransform=ctx.setTransform,ctx.__originalResetTransform=ctx.resetTransform,ctx.__originalClip=ctx.clip,ctx.__originalMoveTo=ctx.moveTo,ctx.__originalLineTo=ctx.lineTo,ctx.__originalBezierCurveTo=ctx.bezierCurveTo,ctx.__originalRect=ctx.rect,ctx.__originalClosePath=ctx.closePath,ctx.__originalBeginPath=ctx.beginPath,ctx._removeMirroring=()=>{ctx.save=ctx.__originalSave,ctx.restore=ctx.__originalRestore,ctx.rotate=ctx.__originalRotate,ctx.scale=ctx.__originalScale,ctx.translate=ctx.__originalTranslate,ctx.transform=ctx.__originalTransform,ctx.setTransform=ctx.__originalSetTransform,ctx.resetTransform=ctx.__originalResetTransform,ctx.clip=ctx.__originalClip,ctx.moveTo=ctx.__originalMoveTo,ctx.lineTo=ctx.__originalLineTo,ctx.bezierCurveTo=ctx.__originalBezierCurveTo,ctx.rect=ctx.__originalRect,ctx.closePath=ctx.__originalClosePath,ctx.beginPath=ctx.__originalBeginPath,delete ctx._removeMirroring},ctx.save=__name(__name2(function(){destCtx.save(),this.__originalSave()},"ctxSave"),"ctxSave"),ctx.restore=__name(__name2(function(){destCtx.restore(),this.__originalRestore()},"ctxRestore"),"ctxRestore"),ctx.translate=__name(__name2(function(x,y){destCtx.translate(x,y),this.__originalTranslate(x,y)},"ctxTranslate"),"ctxTranslate"),ctx.scale=__name(__name2(function(x,y){destCtx.scale(x,y),this.__originalScale(x,y)},"ctxScale"),"ctxScale"),ctx.transform=__name(__name2(function(a,b,c,d,e,f){destCtx.transform(a,b,c,d,e,f),this.__originalTransform(a,b,c,d,e,f)},"ctxTransform"),"ctxTransform"),ctx.setTransform=__name(__name2(function(a,b,c,d,e,f){destCtx.setTransform(a,b,c,d,e,f),this.__originalSetTransform(a,b,c,d,e,f)},"ctxSetTransform"),"ctxSetTransform"),ctx.resetTransform=__name(__name2(function(){destCtx.resetTransform(),this.__originalResetTransform()},"ctxResetTransform"),"ctxResetTransform"),ctx.rotate=__name(__name2(function(angle){destCtx.rotate(angle),this.__originalRotate(angle)},"ctxRotate"),"ctxRotate"),ctx.clip=__name(__name2(function(rule){destCtx.clip(rule),this.__originalClip(rule)},"ctxRotate"),"ctxRotate"),ctx.moveTo=function(x,y){destCtx.moveTo(x,y),this.__originalMoveTo(x,y)},ctx.lineTo=function(x,y){destCtx.lineTo(x,y),this.__originalLineTo(x,y)},ctx.bezierCurveTo=function(cp1x,cp1y,cp2x,cp2y,x,y){destCtx.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y),this.__originalBezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y)},ctx.rect=function(x,y,width,height){destCtx.rect(x,y,width,height),this.__originalRect(x,y,width,height)},ctx.closePath=function(){destCtx.closePath(),this.__originalClosePath()},ctx.beginPath=function(){destCtx.beginPath(),this.__originalBeginPath()}}__name2(mirrorContextOperations,"mirrorContextOperations"),__name(mirrorContextOperations,"mirrorContextOperations");const _CachedCanvases=class{static{__name2(this,"_CachedCanvases")}constructor(canvasFactory){this.canvasFactory=canvasFactory,this.cache=Object.create(null)}getCanvas(id,width,height){let canvasEntry;return this.cache[id]!==void 0?(canvasEntry=this.cache[id],this.canvasFactory.reset(canvasEntry,width,height)):(canvasEntry=this.canvasFactory.create(width,height),this.cache[id]=canvasEntry),canvasEntry}delete(id){delete this.cache[id]}clear(){for(const id in this.cache){const canvasEntry=this.cache[id];this.canvasFactory.destroy(canvasEntry),delete this.cache[id]}}};__name(_CachedCanvases,"CachedCanvases");let CachedCanvases=_CachedCanvases;function drawImageAtIntegerCoords(ctx,srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH){const[a,b,c,d,tx,ty]=(0,_display_utils2.getCurrentTransform)(ctx);if(b===0&&c===0){const tlX=destX*a+tx,rTlX=Math.round(tlX),tlY=destY*d+ty,rTlY=Math.round(tlY),brX=(destX+destW)*a+tx,rWidth=Math.abs(Math.round(brX)-rTlX)||1,brY=(destY+destH)*d+ty,rHeight=Math.abs(Math.round(brY)-rTlY)||1;return ctx.setTransform(Math.sign(a),0,0,Math.sign(d),rTlX,rTlY),ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rWidth,rHeight),ctx.setTransform(a,b,c,d,tx,ty),[rWidth,rHeight]}if(a===0&&d===0){const tlX=destY*c+tx,rTlX=Math.round(tlX),tlY=destX*b+ty,rTlY=Math.round(tlY),brX=(destY+destH)*c+tx,rWidth=Math.abs(Math.round(brX)-rTlX)||1,brY=(destX+destW)*b+ty,rHeight=Math.abs(Math.round(brY)-rTlY)||1;return ctx.setTransform(0,Math.sign(b),Math.sign(c),0,rTlX,rTlY),ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rHeight,rWidth),ctx.setTransform(a,b,c,d,tx,ty),[rHeight,rWidth]}ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);const scaleX=Math.hypot(a,b),scaleY=Math.hypot(c,d);return[scaleX*destW,scaleY*destH]}__name2(drawImageAtIntegerCoords,"drawImageAtIntegerCoords"),__name(drawImageAtIntegerCoords,"drawImageAtIntegerCoords");function compileType3Glyph(imgData){const{width,height}=imgData;if(width>MAX_SIZE_TO_COMPILE||height>MAX_SIZE_TO_COMPILE)return null;const POINT_TO_PROCESS_LIMIT=1e3,POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),width1=width+1;let points=new Uint8Array(width1*(height+1)),i,j,j0;const lineSize=width+7&-8;let data=new Uint8Array(lineSize*height),pos=0;for(const elem of imgData.data){let mask=128;for(;mask>0;)data[pos++]=elem&mask?0:255,mask>>=1}let count=0;for(pos=0,data[pos]!==0&&(points[0]=1,++count),j=1;j<width;j++)data[pos]!==data[pos+1]&&(points[j]=data[pos]?2:1,++count),pos++;for(data[pos]!==0&&(points[j]=2,++count),i=1;i<height;i++){pos=i*lineSize,j0=i*width1,data[pos-lineSize]!==data[pos]&&(points[j0]=data[pos]?1:8,++count);let sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++)sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0),POINT_TYPES[sum]&&(points[j0+j]=POINT_TYPES[sum],++count),pos++;if(data[pos-lineSize]!==data[pos]&&(points[j0+j]=data[pos]?2:4,++count),count>POINT_TO_PROCESS_LIMIT)return null}for(pos=lineSize*(height-1),j0=i*width1,data[pos]!==0&&(points[j0]=8,++count),j=1;j<width;j++)data[pos]!==data[pos+1]&&(points[j0+j]=data[pos]?4:8,++count),pos++;if(data[pos]!==0&&(points[j0+j]=4,++count),count>POINT_TO_PROCESS_LIMIT)return null;const steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]),path=new Path2D;for(i=0;count&&i<=height;i++){let p=i*width1;const end=p+width;for(;p<end&&!points[p];)p++;if(p===end)continue;path.moveTo(p%width1,i);const p0=p;let type=points[p];do{const step=steps[type];do p+=step;while(!points[p]);const pp=points[p];pp!==5&&pp!==10?(type=pp,points[p]=0):(type=pp&51*type>>4,points[p]&=type>>2|type<<2),path.lineTo(p%width1,p/width1|0),points[p]||--count}while(p0!==p);--i}return data=null,points=null,__name(function(c){c.save(),c.scale(1/width,-1/height),c.translate(0,-height),c.fill(path),c.beginPath(),c.restore()},"drawOutline")}__name2(compileType3Glyph,"compileType3Glyph"),__name(compileType3Glyph,"compileType3Glyph");const _CanvasExtraState=class{static{__name2(this,"_CanvasExtraState")}constructor(width,height){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=_util2.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=_util2.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=_util2.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,width,height])}clone(){const clone=Object.create(this);return clone.clipBox=this.clipBox.slice(),clone}setCurrentPoint(x,y){this.x=x,this.y=y}updatePathMinMax(transform,x,y){[x,y]=_util2.Util.applyTransform([x,y],transform),this.minX=Math.min(this.minX,x),this.minY=Math.min(this.minY,y),this.maxX=Math.max(this.maxX,x),this.maxY=Math.max(this.maxY,y)}updateRectMinMax(transform,rect){const p1=_util2.Util.applyTransform(rect,transform),p2=_util2.Util.applyTransform(rect.slice(2),transform);this.minX=Math.min(this.minX,p1[0],p2[0]),this.minY=Math.min(this.minY,p1[1],p2[1]),this.maxX=Math.max(this.maxX,p1[0],p2[0]),this.maxY=Math.max(this.maxY,p1[1],p2[1])}updateScalingPathMinMax(transform,minMax){_util2.Util.scaleMinMax(transform,minMax),this.minX=Math.min(this.minX,minMax[0]),this.maxX=Math.max(this.maxX,minMax[1]),this.minY=Math.min(this.minY,minMax[2]),this.maxY=Math.max(this.maxY,minMax[3])}updateCurvePathMinMax(transform,x0,y0,x1,y1,x2,y2,x3,y3,minMax){const box=_util2.Util.bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3);if(minMax){minMax[0]=Math.min(minMax[0],box[0],box[2]),minMax[1]=Math.max(minMax[1],box[0],box[2]),minMax[2]=Math.min(minMax[2],box[1],box[3]),minMax[3]=Math.max(minMax[3],box[1],box[3]);return}this.updateRectMinMax(transform,box)}getPathBoundingBox(pathType=_pattern_helper.PathType.FILL,transform=null){const box=[this.minX,this.minY,this.maxX,this.maxY];if(pathType===_pattern_helper.PathType.STROKE){transform||(0,_util2.unreachable)("Stroke bounding box must include transform.");const scale=_util2.Util.singularValueDecompose2dScale(transform),xStrokePad=scale[0]*this.lineWidth/2,yStrokePad=scale[1]*this.lineWidth/2;box[0]-=xStrokePad,box[1]-=yStrokePad,box[2]+=xStrokePad,box[3]+=yStrokePad}return box}updateClipFromPath(){const intersect=_util2.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(intersect||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(box){this.clipBox=box,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(pathType=_pattern_helper.PathType.FILL,transform=null){return _util2.Util.intersect(this.clipBox,this.getPathBoundingBox(pathType,transform))}};__name(_CanvasExtraState,"CanvasExtraState");let CanvasExtraState=_CanvasExtraState;function putBinaryImageData(ctx,imgData,transferMaps=null){if(typeof ImageData<"u"&&imgData instanceof ImageData){ctx.putImageData(imgData,0,0);return}const height=imgData.height,width=imgData.width,partialChunkHeight=height%FULL_CHUNK_HEIGHT,fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT,totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);let srcPos=0,destPos;const src=imgData.data,dest=chunkImgData.data;let i,j,thisChunkHeight,elemsInThisChunk,transferMapRed,transferMapGreen,transferMapBlue,transferMapGray;if(transferMaps)switch(transferMaps.length){case 1:transferMapRed=transferMaps[0],transferMapGreen=transferMaps[0],transferMapBlue=transferMaps[0],transferMapGray=transferMaps[0];break;case 4:transferMapRed=transferMaps[0],transferMapGreen=transferMaps[1],transferMapBlue=transferMaps[2],transferMapGray=transferMaps[3];break}if(imgData.kind===_util2.ImageKind.GRAYSCALE_1BPP){const srcLength=src.byteLength,dest32=new Uint32Array(dest.buffer,0,dest.byteLength>>2),dest32DataLength=dest32.length,fullSrcDiff=width+7>>3;let white=4294967295,black=_util2.FeatureTest.isLittleEndian?4278190080:255;for(transferMapGray&&transferMapGray[0]===255&&transferMapGray[255]===0&&([white,black]=[black,white]),i=0;i<totalChunks;i++){for(thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight,destPos=0,j=0;j<thisChunkHeight;j++){const srcDiff=srcLength-srcPos;let k=0;const kEnd=srcDiff>fullSrcDiff?width:srcDiff*8-7,kEndUnrolled=kEnd&-8;let mask=0,srcByte=0;for(;k<kEndUnrolled;k+=8)srcByte=src[srcPos++],dest32[destPos++]=srcByte&128?white:black,dest32[destPos++]=srcByte&64?white:black,dest32[destPos++]=srcByte&32?white:black,dest32[destPos++]=srcByte&16?white:black,dest32[destPos++]=srcByte&8?white:black,dest32[destPos++]=srcByte&4?white:black,dest32[destPos++]=srcByte&2?white:black,dest32[destPos++]=srcByte&1?white:black;for(;k<kEnd;k++)mask===0&&(srcByte=src[srcPos++],mask=128),dest32[destPos++]=srcByte&mask?white:black,mask>>=1}for(;destPos<dest32DataLength;)dest32[destPos++]=0;ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT)}}else if(imgData.kind===_util2.ImageKind.RGBA_32BPP){const hasTransferMaps=!!(transferMapRed||transferMapGreen||transferMapBlue);for(j=0,elemsInThisChunk=width*FULL_CHUNK_HEIGHT*4,i=0;i<fullChunks;i++){if(dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),srcPos+=elemsInThisChunk,hasTransferMaps)for(let k=0;k<elemsInThisChunk;k+=4)transferMapRed&&(dest[k+0]=transferMapRed[dest[k+0]]),transferMapGreen&&(dest[k+1]=transferMapGreen[dest[k+1]]),transferMapBlue&&(dest[k+2]=transferMapBlue[dest[k+2]]);ctx.putImageData(chunkImgData,0,j),j+=FULL_CHUNK_HEIGHT}if(i<totalChunks){if(elemsInThisChunk=width*partialChunkHeight*4,dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),hasTransferMaps)for(let k=0;k<elemsInThisChunk;k+=4)transferMapRed&&(dest[k+0]=transferMapRed[dest[k+0]]),transferMapGreen&&(dest[k+1]=transferMapGreen[dest[k+1]]),transferMapBlue&&(dest[k+2]=transferMapBlue[dest[k+2]]);ctx.putImageData(chunkImgData,0,j)}}else if(imgData.kind===_util2.ImageKind.RGB_24BPP){const hasTransferMaps=!!(transferMapRed||transferMapGreen||transferMapBlue);for(thisChunkHeight=FULL_CHUNK_HEIGHT,elemsInThisChunk=width*thisChunkHeight,i=0;i<totalChunks;i++){for(i>=fullChunks&&(thisChunkHeight=partialChunkHeight,elemsInThisChunk=width*thisChunkHeight),destPos=0,j=elemsInThisChunk;j--;)dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=255;if(hasTransferMaps)for(let k=0;k<destPos;k+=4)transferMapRed&&(dest[k+0]=transferMapRed[dest[k+0]]),transferMapGreen&&(dest[k+1]=transferMapGreen[dest[k+1]]),transferMapBlue&&(dest[k+2]=transferMapBlue[dest[k+2]]);ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT)}}else throw new Error(`bad image kind: ${imgData.kind}`)}__name2(putBinaryImageData,"putBinaryImageData"),__name(putBinaryImageData,"putBinaryImageData");function putBinaryImageMask(ctx,imgData){if(imgData.bitmap){ctx.drawImage(imgData.bitmap,0,0);return}const height=imgData.height,width=imgData.width,partialChunkHeight=height%FULL_CHUNK_HEIGHT,fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT,totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);let srcPos=0;const src=imgData.data,dest=chunkImgData.data;for(let i=0;i<totalChunks;i++){const thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;({srcPos}=(0,_image_utils.applyMaskImageData)({src,srcPos,dest,width,height:thisChunkHeight})),ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT)}}__name2(putBinaryImageMask,"putBinaryImageMask"),__name(putBinaryImageMask,"putBinaryImageMask");function copyCtxState(sourceCtx,destCtx){const properties=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let i=0,ii=properties.length;i<ii;i++){const property=properties[i];sourceCtx[property]!==void 0&&(destCtx[property]=sourceCtx[property])}sourceCtx.setLineDash!==void 0&&(destCtx.setLineDash(sourceCtx.getLineDash()),destCtx.lineDashOffset=sourceCtx.lineDashOffset)}__name2(copyCtxState,"copyCtxState"),__name(copyCtxState,"copyCtxState");function resetCtxToDefault(ctx,foregroundColor){ctx.strokeStyle=ctx.fillStyle=foregroundColor||"#000000",ctx.fillRule="nonzero",ctx.globalAlpha=1,ctx.lineWidth=1,ctx.lineCap="butt",ctx.lineJoin="miter",ctx.miterLimit=10,ctx.globalCompositeOperation="source-over",ctx.font="10px sans-serif",ctx.setLineDash!==void 0&&(ctx.setLineDash([]),ctx.lineDashOffset=0)}__name2(resetCtxToDefault,"resetCtxToDefault"),__name(resetCtxToDefault,"resetCtxToDefault");function composeSMaskBackdrop(bytes,r0,g0,b0){const length=bytes.length;for(let i=3;i<length;i+=4){const alpha=bytes[i];if(alpha===0)bytes[i-3]=r0,bytes[i-2]=g0,bytes[i-1]=b0;else if(alpha<255){const alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8,bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8,bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8}}}__name2(composeSMaskBackdrop,"composeSMaskBackdrop"),__name(composeSMaskBackdrop,"composeSMaskBackdrop");function composeSMaskAlpha(maskData,layerData,transferMap){const length=maskData.length,scale=1/255;for(let i=3;i<length;i+=4){const alpha=transferMap?transferMap[maskData[i]]:maskData[i];layerData[i]=layerData[i]*alpha*scale|0}}__name2(composeSMaskAlpha,"composeSMaskAlpha"),__name(composeSMaskAlpha,"composeSMaskAlpha");function composeSMaskLuminosity(maskData,layerData,transferMap){const length=maskData.length;for(let i=3;i<length;i+=4){const y=maskData[i-3]*77+maskData[i-2]*152+maskData[i-1]*28;layerData[i]=transferMap?layerData[i]*transferMap[y>>8]>>8:layerData[i]*y>>16}}__name2(composeSMaskLuminosity,"composeSMaskLuminosity"),__name(composeSMaskLuminosity,"composeSMaskLuminosity");function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap,layerOffsetX,layerOffsetY,maskOffsetX,maskOffsetY){const hasBackdrop=!!backdrop,r0=hasBackdrop?backdrop[0]:0,g0=hasBackdrop?backdrop[1]:0,b0=hasBackdrop?backdrop[2]:0;let composeFn;subtype==="Luminosity"?composeFn=composeSMaskLuminosity:composeFn=composeSMaskAlpha;const chunkSize=Math.min(height,Math.ceil(1048576/width));for(let row=0;row<height;row+=chunkSize){const chunkHeight=Math.min(chunkSize,height-row),maskData=maskCtx.getImageData(layerOffsetX-maskOffsetX,row+(layerOffsetY-maskOffsetY),width,chunkHeight),layerData=layerCtx.getImageData(layerOffsetX,row+layerOffsetY,width,chunkHeight);hasBackdrop&&composeSMaskBackdrop(maskData.data,r0,g0,b0),composeFn(maskData.data,layerData.data,transferMap),layerCtx.putImageData(layerData,layerOffsetX,row+layerOffsetY)}}__name2(genericComposeSMask,"genericComposeSMask"),__name(genericComposeSMask,"genericComposeSMask");function composeSMask(ctx,smask,layerCtx,layerBox){const layerOffsetX=layerBox[0],layerOffsetY=layerBox[1],layerWidth=layerBox[2]-layerOffsetX,layerHeight=layerBox[3]-layerOffsetY;layerWidth===0||layerHeight===0||(genericComposeSMask(smask.context,layerCtx,layerWidth,layerHeight,smask.subtype,smask.backdrop,smask.transferMap,layerOffsetX,layerOffsetY,smask.offsetX,smask.offsetY),ctx.save(),ctx.globalAlpha=1,ctx.globalCompositeOperation="source-over",ctx.setTransform(1,0,0,1,0,0),ctx.drawImage(layerCtx.canvas,0,0),ctx.restore())}__name2(composeSMask,"composeSMask"),__name(composeSMask,"composeSMask");function getImageSmoothingEnabled(transform,interpolate){const scale=_util2.Util.singularValueDecompose2dScale(transform);scale[0]=Math.fround(scale[0]),scale[1]=Math.fround(scale[1]);const actualScale=Math.fround((globalThis.devicePixelRatio||1)*_display_utils2.PixelsPerInch.PDF_TO_CSS_UNITS);return interpolate!==void 0?interpolate:scale[0]<=actualScale||scale[1]<=actualScale}__name2(getImageSmoothingEnabled,"getImageSmoothingEnabled"),__name(getImageSmoothingEnabled,"getImageSmoothingEnabled");const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={},_CanvasGraphics=class _CanvasGraphics2{static{__name2(this,"_CanvasGraphics")}constructor(canvasCtx,commonObjs,objs,canvasFactory,imageLayer,optionalContentConfig,annotationCanvasMap,pageColors){__privateAdd(this,_restoreInitialState),this.ctx=canvasCtx,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=commonObjs,this.objs=objs,this.canvasFactory=canvasFactory,this.imageLayer=imageLayer,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=optionalContentConfig,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=annotationCanvasMap,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=pageColors?.background||null,this.foregroundColor=pageColors?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(data,fallback=null){return typeof data=="string"?data.startsWith("g_")?this.commonObjs.get(data):this.objs.get(data):fallback}beginDrawing({transform,viewport,transparency=!1,background=null}){const width=this.ctx.canvas.width,height=this.ctx.canvas.height,defaultBackgroundColor=background||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const fg=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const bg=this.backgroundColor=this.ctx.fillStyle;let isValidDefaultBg=!0,defaultBg=defaultBackgroundColor;if(this.ctx.fillStyle=defaultBackgroundColor,defaultBg=this.ctx.fillStyle,isValidDefaultBg=typeof defaultBg=="string"&&/^#[0-9A-Fa-f]{6}$/.test(defaultBg),fg==="#000000"&&bg==="#ffffff"||fg===bg||!isValidDefaultBg)this.foregroundColor=this.backgroundColor=null;else{const[rB,gB,bB]=(0,_display_utils2.getRGB)(defaultBg),newComp=__name(x=>(x/=255,x<=.03928?x/12.92:((x+.055)/1.055)**2.4),"newComp"),lumB=Math.round(.2126*newComp(rB)+.7152*newComp(gB)+.0722*newComp(bB));this.selectColor=(r,g,b)=>{const lumC=.2126*newComp(r)+.7152*newComp(g)+.0722*newComp(b);return Math.round(lumC)===lumB?bg:fg}}}if(this.ctx.fillStyle=this.backgroundColor||defaultBackgroundColor,this.ctx.fillRect(0,0,width,height),this.ctx.restore(),transparency){const transparentCanvas=this.cachedCanvases.getCanvas("transparent",width,height);this.compositeCtx=this.ctx,this.transparentCanvas=transparentCanvas.canvas,this.ctx=transparentCanvas.context,this.ctx.save(),this.ctx.transform(...(0,_display_utils2.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx,this.foregroundColor),transform&&(this.ctx.transform(...transform),this.outputScaleX=transform[0],this.outputScaleY=transform[0]),this.ctx.transform(...viewport.transform),this.viewportScale=viewport.scale,this.baseTransform=(0,_display_utils2.getCurrentTransform)(this.ctx),this.imageLayer&&((0,_display_utils2.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){const argsArray=operatorList.argsArray,fnArray=operatorList.fnArray;let i=executionStartIdx||0;const argsArrayLen=argsArray.length;if(argsArrayLen===i)return i;const chunkOperations=argsArrayLen-i>EXECUTION_STEPS&&typeof continueCallback=="function",endTime=chunkOperations?Date.now()+EXECUTION_TIME:0;let steps=0;const commonObjs=this.commonObjs,objs=this.objs;let fnId;for(;;){if(stepper!==void 0&&i===stepper.nextBreakPoint)return stepper.breakIt(i,continueCallback),i;if(fnId=fnArray[i],fnId!==_util2.OPS.dependency)this[fnId].apply(this,argsArray[i]);else for(const depObjId of argsArray[i]){const objsPool=depObjId.startsWith("g_")?commonObjs:objs;if(!objsPool.has(depObjId))return objsPool.get(depObjId,continueCallback),i}if(i++,i===argsArrayLen)return i;if(chunkOperations&&++steps>EXECUTION_STEPS){if(Date.now()>endTime)return continueCallback(),i;steps=0}}}endDrawing(){__privateMethod(this,_restoreInitialState,restoreInitialState_fn).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const cache of this._cachedBitmapsMap.values()){for(const canvas of cache.values())typeof HTMLCanvasElement<"u"&&canvas instanceof HTMLCanvasElement&&(canvas.width=canvas.height=0);cache.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(img,inverseTransform){const width=img.width,height=img.height;let widthScale=Math.max(Math.hypot(inverseTransform[0],inverseTransform[1]),1),heightScale=Math.max(Math.hypot(inverseTransform[2],inverseTransform[3]),1),paintWidth=width,paintHeight=height,tmpCanvasId="prescale1",tmpCanvas,tmpCtx;for(;widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1;){let newWidth=paintWidth,newHeight=paintHeight;widthScale>2&&paintWidth>1&&(newWidth=Math.ceil(paintWidth/2),widthScale/=paintWidth/newWidth),heightScale>2&&paintHeight>1&&(newHeight=Math.ceil(paintHeight/2),heightScale/=paintHeight/newHeight),tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight),tmpCtx=tmpCanvas.context,tmpCtx.clearRect(0,0,newWidth,newHeight),tmpCtx.drawImage(img,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight),img=tmpCanvas.canvas,paintWidth=newWidth,paintHeight=newHeight,tmpCanvasId=tmpCanvasId==="prescale1"?"prescale2":"prescale1"}return{img,paintWidth,paintHeight}}_createMaskCanvas(img){const ctx=this.ctx,{width,height}=img,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill,currentTransform=(0,_display_utils2.getCurrentTransform)(ctx);let cache,cacheKey,scaled,maskCanvas;if((img.bitmap||img.data)&&img.count>1){const mainKey=img.bitmap||img.data.buffer,withoutTranslation=currentTransform.slice(0,4);cacheKey=JSON.stringify(isPatternFill?withoutTranslation:[withoutTranslation,fillColor]),cache=this._cachedBitmapsMap.get(mainKey),cache||(cache=new Map,this._cachedBitmapsMap.set(mainKey,cache));const cachedImage=cache.get(cacheKey);if(cachedImage&&!isPatternFill){const offsetX2=Math.round(Math.min(currentTransform[0],currentTransform[2])+currentTransform[4]),offsetY2=Math.round(Math.min(currentTransform[1],currentTransform[3])+currentTransform[5]);return{canvas:cachedImage,offsetX:offsetX2,offsetY:offsetY2}}scaled=cachedImage}scaled||(maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),putBinaryImageMask(maskCanvas.context,img));let maskToCanvas=_util2.Util.transform(currentTransform,[1/width,0,0,-1/height,0,0]);maskToCanvas=_util2.Util.transform(maskToCanvas,[1,0,0,1,0,-height]);const cord1=_util2.Util.applyTransform([0,0],maskToCanvas),cord2=_util2.Util.applyTransform([width,height],maskToCanvas),rect=_util2.Util.normalizeRect([cord1[0],cord1[1],cord2[0],cord2[1]]),drawnWidth=Math.round(rect[2]-rect[0])||1,drawnHeight=Math.round(rect[3]-rect[1])||1,fillCanvas=this.cachedCanvases.getCanvas("fillCanvas",drawnWidth,drawnHeight),fillCtx=fillCanvas.context,offsetX=Math.min(cord1[0],cord2[0]),offsetY=Math.min(cord1[1],cord2[1]);fillCtx.translate(-offsetX,-offsetY),fillCtx.transform(...maskToCanvas),scaled||(scaled=this._scaleImage(maskCanvas.canvas,(0,_display_utils2.getCurrentTransformInverse)(fillCtx)),scaled=scaled.img,cache&&isPatternFill&&cache.set(cacheKey,scaled)),fillCtx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils2.getCurrentTransform)(fillCtx),img.interpolate),drawImageAtIntegerCoords(fillCtx,scaled,0,0,scaled.width,scaled.height,0,0,width,height),fillCtx.globalCompositeOperation="source-in";const inverse=_util2.Util.transform((0,_display_utils2.getCurrentTransformInverse)(fillCtx),[1,0,0,1,-offsetX,-offsetY]);return fillCtx.fillStyle=isPatternFill?fillColor.getPattern(ctx,this,inverse,_pattern_helper.PathType.FILL):fillColor,fillCtx.fillRect(0,0,width,height),cache&&!isPatternFill&&(this.cachedCanvases.delete("fillCanvas"),cache.set(cacheKey,fillCanvas.canvas)),{canvas:fillCanvas.canvas,offsetX:Math.round(offsetX),offsetY:Math.round(offsetY)}}setLineWidth(width){width!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=width,this.ctx.lineWidth=width}setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style]}setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style]}setMiterLimit(limit){this.ctx.miterLimit=limit}setDash(dashArray,dashPhase){const ctx=this.ctx;ctx.setLineDash!==void 0&&(ctx.setLineDash(dashArray),ctx.lineDashOffset=dashPhase)}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(let i=0,ii=states.length;i<ii;i++){const state=states[i],key=state[0],value=state[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value[0],value[1]);break;case"CA":this.current.strokeAlpha=state[1];break;case"ca":this.current.fillAlpha=state[1],this.ctx.globalAlpha=state[1];break;case"BM":this.ctx.globalCompositeOperation=value;break;case"SMask":this.current.activeSMask=value?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=value}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const inSMaskMode=this.inSMaskMode;this.current.activeSMask&&!inSMaskMode?this.beginSMaskMode():!this.current.activeSMask&&inSMaskMode&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const drawnWidth=this.ctx.canvas.width,drawnHeight=this.ctx.canvas.height,cacheId="smaskGroupAt"+this.groupLevel,scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);this.suspendedCtx=this.ctx,this.ctx=scratchCanvas.context;const ctx=this.ctx;ctx.setTransform(...(0,_display_utils2.getCurrentTransform)(this.suspendedCtx)),copyCtxState(this.suspendedCtx,ctx),mirrorContextOperations(ctx,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(dirtyBox){if(!this.current.activeSMask)return;dirtyBox?(dirtyBox[0]=Math.floor(dirtyBox[0]),dirtyBox[1]=Math.floor(dirtyBox[1]),dirtyBox[2]=Math.ceil(dirtyBox[2]),dirtyBox[3]=Math.ceil(dirtyBox[3])):dirtyBox=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const smask=this.current.activeSMask,suspendedCtx=this.suspendedCtx;composeSMask(suspendedCtx,smask,this.ctx,dirtyBox),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(copyCtxState(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const old=this.current;this.stateStack.push(old),this.current=old.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),copyCtxState(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(ops,args,minMax){const ctx=this.ctx,current=this.current;let x=current.x,y=current.y,startX,startY;const currentTransform=(0,_display_utils2.getCurrentTransform)(ctx),isScalingMatrix=currentTransform[0]===0&&currentTransform[3]===0||currentTransform[1]===0&&currentTransform[2]===0,minMaxForBezier=isScalingMatrix?minMax.slice(0):null;for(let i=0,j=0,ii=ops.length;i<ii;i++)switch(ops[i]|0){case _util2.OPS.rectangle:x=args[j++],y=args[j++];const width=args[j++],height=args[j++],xw=x+width,yh=y+height;ctx.moveTo(x,y),width===0||height===0?ctx.lineTo(xw,yh):(ctx.lineTo(xw,y),ctx.lineTo(xw,yh),ctx.lineTo(x,yh)),isScalingMatrix||current.updateRectMinMax(currentTransform,[x,y,xw,yh]),ctx.closePath();break;case _util2.OPS.moveTo:x=args[j++],y=args[j++],ctx.moveTo(x,y),isScalingMatrix||current.updatePathMinMax(currentTransform,x,y);break;case _util2.OPS.lineTo:x=args[j++],y=args[j++],ctx.lineTo(x,y),isScalingMatrix||current.updatePathMinMax(currentTransform,x,y);break;case _util2.OPS.curveTo:startX=x,startY=y,x=args[j+4],y=args[j+5],ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y),current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],args[j+2],args[j+3],x,y,minMaxForBezier),j+=6;break;case _util2.OPS.curveTo2:startX=x,startY=y,ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]),current.updateCurvePathMinMax(currentTransform,startX,startY,x,y,args[j],args[j+1],args[j+2],args[j+3],minMaxForBezier),x=args[j+2],y=args[j+3],j+=4;break;case _util2.OPS.curveTo3:startX=x,startY=y,x=args[j+2],y=args[j+3],ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y),current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],x,y,x,y,minMaxForBezier),j+=4;break;case _util2.OPS.closePath:ctx.closePath();break}isScalingMatrix&&current.updateScalingPathMinMax(currentTransform,minMaxForBezier),current.setCurrentPoint(x,y)}closePath(){this.ctx.closePath()}stroke(consumePath){consumePath=typeof consumePath<"u"?consumePath:!0;const ctx=this.ctx,strokeColor=this.current.strokeColor;ctx.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof strokeColor=="object"&&strokeColor?.getPattern?(ctx.save(),ctx.strokeStyle=strokeColor.getPattern(ctx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.STROKE),this.rescaleAndStroke(!1),ctx.restore()):this.rescaleAndStroke(!0)),consumePath&&this.consumePath(this.current.getClippedPathBoundingBox()),ctx.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(consumePath){consumePath=typeof consumePath<"u"?consumePath:!0;const ctx=this.ctx,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill;let needRestore=!1;isPatternFill&&(ctx.save(),ctx.fillStyle=fillColor.getPattern(ctx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL),needRestore=!0);const intersect=this.current.getClippedPathBoundingBox();this.contentVisible&&intersect!==null&&(this.pendingEOFill?(ctx.fill("evenodd"),this.pendingEOFill=!1):ctx.fill()),needRestore&&ctx.restore(),consumePath&&this.consumePath(intersect)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=_util2.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const paths=this.pendingTextPaths,ctx=this.ctx;if(paths===void 0){ctx.beginPath();return}ctx.save(),ctx.beginPath();for(const path of paths)ctx.setTransform(...path.transform),ctx.translate(path.x,path.y),path.addToPath(ctx,path.fontSize);ctx.restore(),ctx.clip(),ctx.beginPath(),delete this.pendingTextPaths}setCharSpacing(spacing){this.current.charSpacing=spacing}setWordSpacing(spacing){this.current.wordSpacing=spacing}setHScale(scale){this.current.textHScale=scale/100}setLeading(leading){this.current.leading=-leading}setFont(fontRefName,size){const fontObj=this.commonObjs.get(fontRefName),current=this.current;if(!fontObj)throw new Error(`Can't find font for ${fontRefName}`);if(current.fontMatrix=fontObj.fontMatrix||_util2.FONT_IDENTITY_MATRIX,(current.fontMatrix[0]===0||current.fontMatrix[3]===0)&&(0,_util2.warn)("Invalid font matrix for font "+fontRefName),size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,this.current.font=fontObj,this.current.fontSize=size,fontObj.isType3Font)return;const name=fontObj.loadedName||"sans-serif";let bold="normal";fontObj.black?bold="900":fontObj.bold&&(bold="bold");const italic=fontObj.italic?"italic":"normal",typeface=`"${name}", ${fontObj.fallbackName}`;let browserFontSize=size;size<MIN_FONT_SIZE?browserFontSize=MIN_FONT_SIZE:size>MAX_FONT_SIZE&&(browserFontSize=MAX_FONT_SIZE),this.current.fontSizeScale=size/browserFontSize,this.ctx.font=`${italic} ${bold} ${browserFontSize}px ${typeface}`}setTextRenderingMode(mode){this.current.textRenderingMode=mode}setTextRise(rise){this.current.textRise=rise}moveText(x,y){this.current.x=this.current.lineX+=x,this.current.y=this.current.lineY+=y}setLeadingMoveText(x,y){this.setLeading(-y),this.moveText(x,y)}setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f],this.current.textMatrixScale=Math.hypot(a,b),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(character,x,y,patternTransform){const ctx=this.ctx,current=this.current,font=current.font,textRenderingMode=current.textRenderingMode,fontSize=current.fontSize/current.fontSizeScale,fillStrokeMode=textRenderingMode&_util2.TextRenderingMode.FILL_STROKE_MASK,isAddToPathSet=!!(textRenderingMode&_util2.TextRenderingMode.ADD_TO_PATH_FLAG),patternFill=current.patternFill&&!font.missingFile;let addToPath;(font.disableFontFace||isAddToPathSet||patternFill)&&(addToPath=font.getPathGenerator(this.commonObjs,character)),font.disableFontFace||patternFill?(ctx.save(),ctx.translate(x,y),ctx.beginPath(),addToPath(ctx,fontSize),patternTransform&&ctx.setTransform(...patternTransform),(fillStrokeMode===_util2.TextRenderingMode.FILL||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&ctx.fill(),(fillStrokeMode===_util2.TextRenderingMode.STROKE||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&ctx.stroke(),ctx.restore()):((fillStrokeMode===_util2.TextRenderingMode.FILL||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&ctx.fillText(character,x,y),(fillStrokeMode===_util2.TextRenderingMode.STROKE||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&ctx.strokeText(character,x,y)),isAddToPathSet&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,_display_utils2.getCurrentTransform)(ctx),x,y,fontSize,addToPath})}get isFontSubpixelAAEnabled(){const{context:ctx}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);ctx.scale(1.5,1),ctx.fillText("I",0,10);const data=ctx.getImageData(0,0,10,10).data;let enabled=!1;for(let i=3;i<data.length;i+=4)if(data[i]>0&&data[i]<255){enabled=!0;break}return(0,_util2.shadow)(this,"isFontSubpixelAAEnabled",enabled)}showText(glyphs){const current=this.current,font=current.font;if(font.isType3Font)return this.showType3Text(glyphs);const fontSize=current.fontSize;if(fontSize===0)return;const ctx=this.ctx,fontSizeScale=current.fontSizeScale,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,glyphsLength=glyphs.length,vertical=font.vertical,spacingDir=vertical?1:-1,defaultVMetrics=font.defaultVMetrics,widthAdvanceScale=fontSize*current.fontMatrix[0],simpleFillText=current.textRenderingMode===_util2.TextRenderingMode.FILL&&!font.disableFontFace&&!current.patternFill;ctx.save(),ctx.transform(...current.textMatrix),ctx.translate(current.x,current.y+current.textRise),fontDirection>0?ctx.scale(textHScale,-1):ctx.scale(textHScale,1);let patternTransform;if(current.patternFill){ctx.save();const pattern=current.fillColor.getPattern(ctx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL);patternTransform=(0,_display_utils2.getCurrentTransform)(ctx),ctx.restore(),ctx.fillStyle=pattern}let lineWidth=current.lineWidth;const scale=current.textMatrixScale;if(scale===0||lineWidth===0){const fillStrokeMode=current.textRenderingMode&_util2.TextRenderingMode.FILL_STROKE_MASK;(fillStrokeMode===_util2.TextRenderingMode.STROKE||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&(lineWidth=this.getSinglePixelWidth())}else lineWidth/=scale;fontSizeScale!==1&&(ctx.scale(fontSizeScale,fontSizeScale),lineWidth/=fontSizeScale),ctx.lineWidth=lineWidth;let x=0,i;for(i=0;i<glyphsLength;++i){const glyph=glyphs[i];if(typeof glyph=="number"){x+=spacingDir*glyph*fontSize/1e3;continue}let restoreNeeded=!1;const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,character=glyph.fontChar,accent=glyph.accent;let scaledX,scaledY,width=glyph.width;if(vertical){const vmetric=glyph.vmetric||defaultVMetrics,vx=-(glyph.vmetric?vmetric[1]:width*.5)*widthAdvanceScale,vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width,scaledX=vx/fontSizeScale,scaledY=(x+vy)/fontSizeScale}else scaledX=x/fontSizeScale,scaledY=0;if(font.remeasure&&width>0){const measuredWidth=ctx.measureText(character).width*1e3/fontSize*fontSizeScale;if(width<measuredWidth&&this.isFontSubpixelAAEnabled){const characterScaleX=width/measuredWidth;restoreNeeded=!0,ctx.save(),ctx.scale(characterScaleX,1),scaledX/=characterScaleX}else width!==measuredWidth&&(scaledX+=(width-measuredWidth)/2e3*fontSize/fontSizeScale)}if(this.contentVisible&&(glyph.isInFont||font.missingFile)){if(simpleFillText&&!accent)ctx.fillText(character,scaledX,scaledY);else if(this.paintChar(character,scaledX,scaledY,patternTransform),accent){const scaledAccentX=scaledX+fontSize*accent.offset.x/fontSizeScale,scaledAccentY=scaledY-fontSize*accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY,patternTransform)}}let charWidth;vertical?charWidth=width*widthAdvanceScale-spacing*fontDirection:charWidth=width*widthAdvanceScale+spacing*fontDirection,x+=charWidth,restoreNeeded&&ctx.restore()}vertical?current.y-=x:current.x+=x*textHScale,ctx.restore(),this.compose()}showType3Text(glyphs){const ctx=this.ctx,current=this.current,font=current.font,fontSize=current.fontSize,fontDirection=current.fontDirection,spacingDir=font.vertical?1:-1,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,textHScale=current.textHScale*fontDirection,fontMatrix=current.fontMatrix||_util2.FONT_IDENTITY_MATRIX,glyphsLength=glyphs.length,isTextInvisible=current.textRenderingMode===_util2.TextRenderingMode.INVISIBLE;let i,glyph,width,spacingLength;if(!(isTextInvisible||fontSize===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,ctx.save(),ctx.transform(...current.textMatrix),ctx.translate(current.x,current.y),ctx.scale(textHScale,fontDirection),i=0;i<glyphsLength;++i){if(glyph=glyphs[i],typeof glyph=="number"){spacingLength=spacingDir*glyph*fontSize/1e3,this.ctx.translate(spacingLength,0),current.x+=spacingLength*textHScale;continue}const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){(0,_util2.warn)(`Type3 character "${glyph.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=glyph,this.save(),ctx.scale(fontSize,fontSize),ctx.transform(...fontMatrix),this.executeOperatorList(operatorList),this.restore()),width=_util2.Util.applyTransform([glyph.width,0],fontMatrix)[0]*fontSize+spacing,ctx.translate(width,0),current.x+=width*textHScale}ctx.restore(),this.processingType3=null}}setCharWidth(xWidth,yWidth){}setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly),this.ctx.clip(),this.endPath()}getColorN_Pattern(IR){let pattern;if(IR[0]==="TilingPattern"){const color=IR[1],baseTransform=this.baseTransform||(0,_display_utils2.getCurrentTransform)(this.ctx),canvasGraphicsFactory={createCanvasGraphics:ctx=>new _CanvasGraphics2(ctx,this.commonObjs,this.objs,this.canvasFactory)};pattern=new _pattern_helper.TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform)}else pattern=this._getPattern(IR[1],IR[2]);return pattern}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(r,g,b){var _a2;const color=((_a2=this.selectColor)==null?void 0:_a2.call(this,r,g,b))||_util2.Util.makeHexColor(r,g,b);this.ctx.strokeStyle=color,this.current.strokeColor=color}setFillRGBColor(r,g,b){var _a2;const color=((_a2=this.selectColor)==null?void 0:_a2.call(this,r,g,b))||_util2.Util.makeHexColor(r,g,b);this.ctx.fillStyle=color,this.current.fillColor=color,this.current.patternFill=!1}_getPattern(objId,matrix=null){let pattern;return this.cachedPatterns.has(objId)?pattern=this.cachedPatterns.get(objId):(pattern=(0,_pattern_helper.getShadingPattern)(this.objs.get(objId)),this.cachedPatterns.set(objId,pattern)),matrix&&(pattern.matrix=matrix),pattern}shadingFill(objId){if(!this.contentVisible)return;const ctx=this.ctx;this.save();const pattern=this._getPattern(objId);ctx.fillStyle=pattern.getPattern(ctx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.SHADING);const inv=(0,_display_utils2.getCurrentTransformInverse)(ctx);if(inv){const canvas=ctx.canvas,width=canvas.width,height=canvas.height,bl=_util2.Util.applyTransform([0,0],inv),br=_util2.Util.applyTransform([0,height],inv),ul=_util2.Util.applyTransform([width,0],inv),ur=_util2.Util.applyTransform([width,height],inv),x0=Math.min(bl[0],br[0],ul[0],ur[0]),y0=Math.min(bl[1],br[1],ul[1],ur[1]),x1=Math.max(bl[0],br[0],ul[0],ur[0]),y1=Math.max(bl[1],br[1],ul[1],ur[1]);this.ctx.fillRect(x0,y0,x1-x0,y1-y0)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,_util2.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,_util2.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(matrix,bbox){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(matrix)&&matrix.length===6&&this.transform(...matrix),this.baseTransform=(0,_display_utils2.getCurrentTransform)(this.ctx),bbox)){const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height),this.current.updateRectMinMax((0,_display_utils2.getCurrentTransform)(this.ctx),bbox),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(group){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const currentCtx=this.ctx;group.isolated||(0,_util2.info)("TODO: Support non-isolated groups."),group.knockout&&(0,_util2.warn)("Knockout groups not supported.");const currentTransform=(0,_display_utils2.getCurrentTransform)(currentCtx);if(group.matrix&&currentCtx.transform(...group.matrix),!group.bbox)throw new Error("Bounding box is required.");let bounds=_util2.Util.getAxialAlignedBoundingBox(group.bbox,(0,_display_utils2.getCurrentTransform)(currentCtx));const canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=_util2.Util.intersect(bounds,canvasBounds)||[0,0,0,0];const offsetX=Math.floor(bounds[0]),offsetY=Math.floor(bounds[1]);let drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1),drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1),scaleX=1,scaleY=1;drawnWidth>MAX_GROUP_SIZE&&(scaleX=drawnWidth/MAX_GROUP_SIZE,drawnWidth=MAX_GROUP_SIZE),drawnHeight>MAX_GROUP_SIZE&&(scaleY=drawnHeight/MAX_GROUP_SIZE,drawnHeight=MAX_GROUP_SIZE),this.current.startNewPathAndClipBox([0,0,drawnWidth,drawnHeight]);let cacheId="groupAt"+this.groupLevel;group.smask&&(cacheId+="_smask_"+this.smaskCounter++%2);const scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight),groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX,1/scaleY),groupCtx.translate(-offsetX,-offsetY),groupCtx.transform(...currentTransform),group.smask?this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX,offsetY,scaleX,scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null}):(currentCtx.setTransform(1,0,0,1,0,0),currentCtx.translate(offsetX,offsetY),currentCtx.scale(scaleX,scaleY),currentCtx.save()),copyCtxState(currentCtx,groupCtx),this.ctx=groupCtx,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(currentCtx),this.groupLevel++}endGroup(group){if(!this.contentVisible)return;this.groupLevel--;const groupCtx=this.ctx,ctx=this.groupStack.pop();if(this.ctx=ctx,this.ctx.imageSmoothingEnabled=!1,group.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const currentMtx=(0,_display_utils2.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...currentMtx);const dirtyBox=_util2.Util.getAxialAlignedBoundingBox([0,0,groupCtx.canvas.width,groupCtx.canvas.height],currentMtx);this.ctx.drawImage(groupCtx.canvas,0,0),this.ctx.restore(),this.compose(dirtyBox)}}beginAnnotation(id,rect,transform,matrix,hasOwnCanvas){if(__privateMethod(this,_restoreInitialState,restoreInitialState_fn).call(this),resetCtxToDefault(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(rect)&&rect.length===4){const width=rect[2]-rect[0],height=rect[3]-rect[1];if(hasOwnCanvas&&this.annotationCanvasMap){transform=transform.slice(),transform[4]-=rect[0],transform[5]-=rect[1],rect=rect.slice(),rect[0]=rect[1]=0,rect[2]=width,rect[3]=height;const[scaleX,scaleY]=_util2.Util.singularValueDecompose2dScale((0,_display_utils2.getCurrentTransform)(this.ctx)),{viewportScale}=this,canvasWidth=Math.ceil(width*this.outputScaleX*viewportScale),canvasHeight=Math.ceil(height*this.outputScaleY*viewportScale);this.annotationCanvas=this.canvasFactory.create(canvasWidth,canvasHeight);const{canvas,context}=this.annotationCanvas;this.annotationCanvasMap.set(id,canvas),this.annotationCanvas.savedCtx=this.ctx,this.ctx=context,this.ctx.setTransform(scaleX,0,0,-scaleY,0,height*scaleY),resetCtxToDefault(this.ctx,this.foregroundColor)}else resetCtxToDefault(this.ctx,this.foregroundColor),this.ctx.rect(rect[0],rect[1],width,height),this.ctx.clip(),this.endPath()}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...transform),this.transform(...matrix)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(img){if(!this.contentVisible)return;const count=img.count;img=this.getObject(img.data,img),img.count=count;const ctx=this.ctx,glyph=this.processingType3;if(glyph&&(glyph.compiled===void 0&&(glyph.compiled=compileType3Glyph(img)),glyph.compiled)){glyph.compiled(ctx);return}const mask=this._createMaskCanvas(img),maskCanvas=mask.canvas;ctx.save(),ctx.setTransform(1,0,0,1,0,0),ctx.drawImage(maskCanvas,mask.offsetX,mask.offsetY),ctx.restore(),this.compose()}paintImageMaskXObjectRepeat(img,scaleX,skewX=0,skewY=0,scaleY,positions){if(!this.contentVisible)return;img=this.getObject(img.data,img);const ctx=this.ctx;ctx.save();const currentTransform=(0,_display_utils2.getCurrentTransform)(ctx);ctx.transform(scaleX,skewX,skewY,scaleY,0,0);const mask=this._createMaskCanvas(img);ctx.setTransform(1,0,0,1,0,0);for(let i=0,ii=positions.length;i<ii;i+=2){const trans=_util2.Util.transform(currentTransform,[scaleX,skewX,skewY,scaleY,positions[i],positions[i+1]]),[x,y]=_util2.Util.applyTransform([0,0],trans);ctx.drawImage(mask.canvas,x,y)}ctx.restore(),this.compose()}paintImageMaskXObjectGroup(images){if(!this.contentVisible)return;const ctx=this.ctx,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill;for(const image of images){const{data,width,height,transform}=image,maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),maskCtx=maskCanvas.context;maskCtx.save();const img=this.getObject(data,image);putBinaryImageMask(maskCtx,img),maskCtx.globalCompositeOperation="source-in",maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL):fillColor,maskCtx.fillRect(0,0,width,height),maskCtx.restore(),ctx.save(),ctx.transform(...transform),ctx.scale(1,-1),drawImageAtIntegerCoords(ctx,maskCanvas.canvas,0,0,width,height,0,-1,1,1),ctx.restore()}this.compose()}paintImageXObject(objId){if(!this.contentVisible)return;const imgData=this.getObject(objId);if(!imgData){(0,_util2.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(imgData)}paintImageXObjectRepeat(objId,scaleX,scaleY,positions){if(!this.contentVisible)return;const imgData=this.getObject(objId);if(!imgData){(0,_util2.warn)("Dependent image isn't ready yet");return}const width=imgData.width,height=imgData.height,map=[];for(let i=0,ii=positions.length;i<ii;i+=2)map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height});this.paintInlineImageXObjectGroup(imgData,map)}paintInlineImageXObject(imgData){if(!this.contentVisible)return;const width=imgData.width,height=imgData.height,ctx=this.ctx;this.save(),ctx.scale(1/width,-1/height);let imgToPaint;if(typeof HTMLElement=="function"&&imgData instanceof HTMLElement||!imgData.data)imgToPaint=imgData;else{const tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",width,height),tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData,this.current.transferMaps),imgToPaint=tmpCanvas.canvas}const scaled=this._scaleImage(imgToPaint,(0,_display_utils2.getCurrentTransformInverse)(ctx));ctx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils2.getCurrentTransform)(ctx),imgData.interpolate);const[rWidth,rHeight]=drawImageAtIntegerCoords(ctx,scaled.img,0,0,scaled.paintWidth,scaled.paintHeight,0,-height,width,height);if(this.imageLayer){const[left,top]=_util2.Util.applyTransform([0,-height],(0,_display_utils2.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData,left,top,width:rWidth,height:rHeight})}this.compose(),this.restore()}paintInlineImageXObjectGroup(imgData,map){if(!this.contentVisible)return;const ctx=this.ctx,w=imgData.width,h=imgData.height,tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",w,h),tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData,this.current.transferMaps);for(const entry of map){if(ctx.save(),ctx.transform(...entry.transform),ctx.scale(1,-1),drawImageAtIntegerCoords(ctx,tmpCanvas.canvas,entry.x,entry.y,entry.w,entry.h,0,-1,1,1),this.imageLayer){const[left,top]=_util2.Util.applyTransform([entry.x,entry.y],(0,_display_utils2.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData,left,top,width:w,height:h})}ctx.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(tag){}markPointProps(tag,properties){}beginMarkedContent(tag){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(tag,properties){tag==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(properties)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(clipBox){const isEmpty=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(clipBox);const ctx=this.ctx;this.pendingClip&&(isEmpty||(this.pendingClip===EO_CLIP?ctx.clip("evenodd"):ctx.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),ctx.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const m=(0,_display_utils2.getCurrentTransform)(this.ctx);if(m[1]===0&&m[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));else{const absDet=Math.abs(m[0]*m[3]-m[2]*m[1]),normX=Math.hypot(m[0],m[2]),normY=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(normX,normY)/absDet}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth}=this.current,m=(0,_display_utils2.getCurrentTransform)(this.ctx);let scaleX,scaleY;if(m[1]===0&&m[2]===0){const normX=Math.abs(m[0]),normY=Math.abs(m[3]);if(lineWidth===0)scaleX=1/normX,scaleY=1/normY;else{const scaledXLineWidth=normX*lineWidth,scaledYLineWidth=normY*lineWidth;scaleX=scaledXLineWidth<1?1/scaledXLineWidth:1,scaleY=scaledYLineWidth<1?1/scaledYLineWidth:1}}else{const absDet=Math.abs(m[0]*m[3]-m[2]*m[1]),normX=Math.hypot(m[0],m[1]),normY=Math.hypot(m[2],m[3]);if(lineWidth===0)scaleX=normY/absDet,scaleY=normX/absDet;else{const baseArea=lineWidth*absDet;scaleX=normY>baseArea?normY/baseArea:1,scaleY=normX>baseArea?normX/baseArea:1}}this._cachedScaleForStroking=[scaleX,scaleY]}return this._cachedScaleForStroking}rescaleAndStroke(saveRestore){const{ctx}=this,{lineWidth}=this.current,[scaleX,scaleY]=this.getScaleForStroking();if(ctx.lineWidth=lineWidth||1,scaleX===1&&scaleY===1){ctx.stroke();return}let savedMatrix,savedDashes,savedDashOffset;saveRestore&&(savedMatrix=(0,_display_utils2.getCurrentTransform)(ctx),savedDashes=ctx.getLineDash().slice(),savedDashOffset=ctx.lineDashOffset),ctx.scale(scaleX,scaleY);const scale=Math.max(scaleX,scaleY);ctx.setLineDash(ctx.getLineDash().map(x=>x/scale)),ctx.lineDashOffset/=scale,ctx.stroke(),saveRestore&&(ctx.setTransform(...savedMatrix),ctx.setLineDash(savedDashes),ctx.lineDashOffset=savedDashOffset)}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}};_restoreInitialState=new WeakSet,restoreInitialState_fn=__name(function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},"#restoreInitialState"),__name(_CanvasGraphics,"CanvasGraphics");let CanvasGraphics=_CanvasGraphics;exports2.CanvasGraphics=CanvasGraphics;for(const op in _util2.OPS)CanvasGraphics.prototype[op]!==void 0&&(CanvasGraphics.prototype[_util2.OPS[op]]=CanvasGraphics.prototype[op])},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.TilingPattern=exports2.PathType=void 0,exports2.getShadingPattern=getShadingPattern;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(8),_is_node2=__w_pdfjs_require__2(3);const PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};exports2.PathType=PathType;function applyBoundingBox(ctx,bbox){if(!bbox||_is_node2.isNodeJS)return;const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],region=new Path2D;region.rect(bbox[0],bbox[1],width,height),ctx.clip(region)}__name2(applyBoundingBox,"applyBoundingBox"),__name(applyBoundingBox,"applyBoundingBox");const _BaseShadingPattern=class _BaseShadingPattern2{static{__name2(this,"_BaseShadingPattern")}constructor(){this.constructor===_BaseShadingPattern2&&(0,_util2.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,_util2.unreachable)("Abstract method `getPattern` called.")}};__name(_BaseShadingPattern,"BaseShadingPattern");let BaseShadingPattern=_BaseShadingPattern;const _RadialAxialShadingPattern=class extends BaseShadingPattern{static{__name2(this,"_RadialAxialShadingPattern")}constructor(IR){super(),this._type=IR[1],this._bbox=IR[2],this._colorStops=IR[3],this._p0=IR[4],this._p1=IR[5],this._r0=IR[6],this._r1=IR[7],this.matrix=null}_createGradient(ctx){let grad;this._type==="axial"?grad=ctx.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(grad=ctx.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const colorStop of this._colorStops)grad.addColorStop(colorStop[0],colorStop[1]);return grad}getPattern(ctx,owner,inverse,pathType){let pattern;if(pathType===PathType.STROKE||pathType===PathType.FILL){const ownerBBox=owner.current.getClippedPathBoundingBox(pathType,(0,_display_utils2.getCurrentTransform)(ctx))||[0,0,0,0],width=Math.ceil(ownerBBox[2]-ownerBBox[0])||1,height=Math.ceil(ownerBBox[3]-ownerBBox[1])||1,tmpCanvas=owner.cachedCanvases.getCanvas("pattern",width,height,!0),tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height),tmpCtx.beginPath(),tmpCtx.rect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height),tmpCtx.translate(-ownerBBox[0],-ownerBBox[1]),inverse=_util2.Util.transform(inverse,[1,0,0,1,ownerBBox[0],ownerBBox[1]]),tmpCtx.transform(...owner.baseTransform),this.matrix&&tmpCtx.transform(...this.matrix),applyBoundingBox(tmpCtx,this._bbox),tmpCtx.fillStyle=this._createGradient(tmpCtx),tmpCtx.fill(),pattern=ctx.createPattern(tmpCanvas.canvas,"no-repeat");const domMatrix=new DOMMatrix(inverse);try{pattern.setTransform(domMatrix)}catch(ex){(0,_util2.warn)(`RadialAxialShadingPattern.getPattern: "${ex?.message}".`)}}else applyBoundingBox(ctx,this._bbox),pattern=this._createGradient(ctx);return pattern}};__name(_RadialAxialShadingPattern,"RadialAxialShadingPattern");let RadialAxialShadingPattern=_RadialAxialShadingPattern;function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){const coords=context.coords,colors=context.colors,bytes=data.data,rowSize=data.width*4;let tmp;coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp),coords[p2+1]>coords[p3+1]&&(tmp=p2,p2=p3,p3=tmp,tmp=c2,c2=c3,c3=tmp),coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp);const x1=(coords[p1]+context.offsetX)*context.scaleX,y1=(coords[p1+1]+context.offsetY)*context.scaleY,x2=(coords[p2]+context.offsetX)*context.scaleX,y2=(coords[p2+1]+context.offsetY)*context.scaleY,x3=(coords[p3]+context.offsetX)*context.scaleX,y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3)return;const c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2],c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2],c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2],minY=Math.round(y1),maxY=Math.round(y3);let xa,car,cag,cab,xb,cbr,cbg,cbb;for(let y=minY;y<=maxY;y++){if(y<y2){let k2;y<y1?k2=0:k2=(y1-y)/(y1-y2),xa=x1-(x1-x2)*k2,car=c1r-(c1r-c2r)*k2,cag=c1g-(c1g-c2g)*k2,cab=c1b-(c1b-c2b)*k2}else{let k2;y>y3?k2=1:y2===y3?k2=0:k2=(y2-y)/(y2-y3),xa=x2-(x2-x3)*k2,car=c2r-(c2r-c3r)*k2,cag=c2g-(c2g-c3g)*k2,cab=c2b-(c2b-c3b)*k2}let k;y<y1?k=0:y>y3?k=1:k=(y1-y)/(y1-y3),xb=x1-(x1-x3)*k,cbr=c1r-(c1r-c3r)*k,cbg=c1g-(c1g-c3g)*k,cbb=c1b-(c1b-c3b)*k;const x1_=Math.round(Math.min(xa,xb)),x2_=Math.round(Math.max(xa,xb));let j=rowSize*y+x1_*4;for(let x=x1_;x<=x2_;x++)k=(xa-x)/(xa-xb),k<0?k=0:k>1&&(k=1),bytes[j++]=car-(car-cbr)*k|0,bytes[j++]=cag-(cag-cbg)*k|0,bytes[j++]=cab-(cab-cbb)*k|0,bytes[j++]=255}}__name2(drawTriangle,"drawTriangle"),__name(drawTriangle,"drawTriangle");function drawFigure(data,figure,context){const ps=figure.coords,cs=figure.colors;let i,ii;switch(figure.type){case"lattice":const verticesPerRow=figure.verticesPerRow,rows=Math.floor(ps.length/verticesPerRow)-1,cols=verticesPerRow-1;for(i=0;i<rows;i++){let q=i*verticesPerRow;for(let j=0;j<cols;j++,q++)drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]),drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow])}break;case"triangles":for(i=0,ii=ps.length;i<ii;i+=3)drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2]);break;default:throw new Error("illegal figure")}}__name2(drawFigure,"drawFigure"),__name(drawFigure,"drawFigure");const _MeshShadingPattern=class extends BaseShadingPattern{static{__name2(this,"_MeshShadingPattern")}constructor(IR){super(),this._coords=IR[2],this._colors=IR[3],this._figures=IR[4],this._bounds=IR[5],this._bbox=IR[7],this._background=IR[8],this.matrix=null}_createMeshCanvas(combinedScale,backgroundColor,cachedCanvases){const offsetX=Math.floor(this._bounds[0]),offsetY=Math.floor(this._bounds[1]),boundsWidth=Math.ceil(this._bounds[2])-offsetX,boundsHeight=Math.ceil(this._bounds[3])-offsetY,width=Math.min(Math.ceil(Math.abs(boundsWidth*combinedScale[0]*1.1)),3e3),height=Math.min(Math.ceil(Math.abs(boundsHeight*combinedScale[1]*1.1)),3e3),scaleX=boundsWidth/width,scaleY=boundsHeight/height,context={coords:this._coords,colors:this._colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY},paddedWidth=width+2*2,paddedHeight=height+2*2,tmpCanvas=cachedCanvases.getCanvas("mesh",paddedWidth,paddedHeight,!1),tmpCtx=tmpCanvas.context,data=tmpCtx.createImageData(width,height);if(backgroundColor){const bytes=data.data;for(let i=0,ii=bytes.length;i<ii;i+=4)bytes[i]=backgroundColor[0],bytes[i+1]=backgroundColor[1],bytes[i+2]=backgroundColor[2],bytes[i+3]=255}for(const figure of this._figures)drawFigure(data,figure,context);return tmpCtx.putImageData(data,2,2),{canvas:tmpCanvas.canvas,offsetX:offsetX-2*scaleX,offsetY:offsetY-2*scaleY,scaleX,scaleY}}getPattern(ctx,owner,inverse,pathType){applyBoundingBox(ctx,this._bbox);let scale;if(pathType===PathType.SHADING)scale=_util2.Util.singularValueDecompose2dScale((0,_display_utils2.getCurrentTransform)(ctx));else if(scale=_util2.Util.singularValueDecompose2dScale(owner.baseTransform),this.matrix){const matrixScale=_util2.Util.singularValueDecompose2dScale(this.matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]]}const temporaryPatternCanvas=this._createMeshCanvas(scale,pathType===PathType.SHADING?null:this._background,owner.cachedCanvases);return pathType!==PathType.SHADING&&(ctx.setTransform(...owner.baseTransform),this.matrix&&ctx.transform(...this.matrix)),ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY),ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY),ctx.createPattern(temporaryPatternCanvas.canvas,"no-repeat")}};__name(_MeshShadingPattern,"MeshShadingPattern");let MeshShadingPattern=_MeshShadingPattern;const _DummyShadingPattern=class extends BaseShadingPattern{static{__name2(this,"_DummyShadingPattern")}getPattern(){return"hotpink"}};__name(_DummyShadingPattern,"DummyShadingPattern");let DummyShadingPattern=_DummyShadingPattern;function getShadingPattern(IR){switch(IR[0]){case"RadialAxial":return new RadialAxialShadingPattern(IR);case"Mesh":return new MeshShadingPattern(IR);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${IR[0]}`)}__name2(getShadingPattern,"getShadingPattern"),__name(getShadingPattern,"getShadingPattern");const PaintType={COLORED:1,UNCOLORED:2},_TilingPattern=class _TilingPattern2{static{__name2(this,"_TilingPattern")}static get MAX_PATTERN_SIZE(){return(0,_util2.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(IR,color,ctx,canvasGraphicsFactory,baseTransform){this.operatorList=IR[2],this.matrix=IR[3]||[1,0,0,1,0,0],this.bbox=IR[4],this.xstep=IR[5],this.ystep=IR[6],this.paintType=IR[7],this.tilingType=IR[8],this.color=color,this.ctx=ctx,this.canvasGraphicsFactory=canvasGraphicsFactory,this.baseTransform=baseTransform}createPatternCanvas(owner){const operatorList=this.operatorList,bbox=this.bbox,xstep=this.xstep,ystep=this.ystep,paintType=this.paintType,tilingType=this.tilingType,color=this.color,canvasGraphicsFactory=this.canvasGraphicsFactory;(0,_util2.info)("TilingType: "+tilingType);const x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3],matrixScale=_util2.Util.singularValueDecompose2dScale(this.matrix),curMatrixScale=_util2.Util.singularValueDecompose2dScale(this.baseTransform),combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]],dimx=this.getSizeAndScale(xstep,this.ctx.canvas.width,combinedScale[0]),dimy=this.getSizeAndScale(ystep,this.ctx.canvas.height,combinedScale[1]),tmpCanvas=owner.cachedCanvases.getCanvas("pattern",dimx.size,dimy.size,!0),tmpCtx=tmpCanvas.context,graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);graphics.groupLevel=owner.groupLevel,this.setFillAndStrokeStyleToContext(graphics,paintType,color);let adjustedX0=x0,adjustedY0=y0,adjustedX1=x1,adjustedY1=y1;return x0<0&&(adjustedX0=0,adjustedX1+=Math.abs(x0)),y0<0&&(adjustedY0=0,adjustedY1+=Math.abs(y0)),tmpCtx.translate(-(dimx.scale*adjustedX0),-(dimy.scale*adjustedY0)),graphics.transform(dimx.scale,0,0,dimy.scale,0,0),tmpCtx.save(),this.clipBbox(graphics,adjustedX0,adjustedY0,adjustedX1,adjustedY1),graphics.baseTransform=(0,_display_utils2.getCurrentTransform)(graphics.ctx),graphics.executeOperatorList(operatorList),graphics.endDrawing(),{canvas:tmpCanvas.canvas,scaleX:dimx.scale,scaleY:dimy.scale,offsetX:adjustedX0,offsetY:adjustedY0}}getSizeAndScale(step,realOutputSize,scale){step=Math.abs(step);const maxSize=Math.max(_TilingPattern2.MAX_PATTERN_SIZE,realOutputSize);let size=Math.ceil(step*scale);return size>=maxSize?size=maxSize:scale=size/step,{scale,size}}clipBbox(graphics,x0,y0,x1,y1){const bboxWidth=x1-x0,bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight),graphics.current.updateRectMinMax((0,_display_utils2.getCurrentTransform)(graphics.ctx),[x0,y0,x1,y1]),graphics.clip(),graphics.endPath()}setFillAndStrokeStyleToContext(graphics,paintType,color){const context=graphics.ctx,current=graphics.current;switch(paintType){case PaintType.COLORED:const ctx=this.ctx;context.fillStyle=ctx.fillStyle,context.strokeStyle=ctx.strokeStyle,current.fillColor=ctx.fillStyle,current.strokeColor=ctx.strokeStyle;break;case PaintType.UNCOLORED:const cssColor=_util2.Util.makeHexColor(color[0],color[1],color[2]);context.fillStyle=cssColor,context.strokeStyle=cssColor,current.fillColor=cssColor,current.strokeColor=cssColor;break;default:throw new _util2.FormatError(`Unsupported paint type: ${paintType}`)}}getPattern(ctx,owner,inverse,pathType){let matrix=inverse;pathType!==PathType.SHADING&&(matrix=_util2.Util.transform(matrix,owner.baseTransform),this.matrix&&(matrix=_util2.Util.transform(matrix,this.matrix)));const temporaryPatternCanvas=this.createPatternCanvas(owner);let domMatrix=new DOMMatrix(matrix);domMatrix=domMatrix.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY),domMatrix=domMatrix.scale(1/temporaryPatternCanvas.scaleX,1/temporaryPatternCanvas.scaleY);const pattern=ctx.createPattern(temporaryPatternCanvas.canvas,"repeat");try{pattern.setTransform(domMatrix)}catch(ex){(0,_util2.warn)(`TilingPattern.getPattern: "${ex?.message}".`)}return pattern}};__name(_TilingPattern,"TilingPattern");let TilingPattern=_TilingPattern;exports2.TilingPattern=TilingPattern},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.applyMaskImageData=applyMaskImageData;var _util2=__w_pdfjs_require__2(1);function applyMaskImageData({src,srcPos=0,dest,destPos=0,width,height,inverseDecode=!1}){const opaque=_util2.FeatureTest.isLittleEndian?4278190080:255,[zeroMapping,oneMapping]=inverseDecode?[0,opaque]:[opaque,0],widthInSource=width>>3,widthRemainder=width&7,srcLength=src.length;dest=new Uint32Array(dest.buffer);for(let i=0;i<height;i++){for(const max=srcPos+widthInSource;srcPos<max;srcPos++){const elem2=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=elem2&128?oneMapping:zeroMapping,dest[destPos++]=elem2&64?oneMapping:zeroMapping,dest[destPos++]=elem2&32?oneMapping:zeroMapping,dest[destPos++]=elem2&16?oneMapping:zeroMapping,dest[destPos++]=elem2&8?oneMapping:zeroMapping,dest[destPos++]=elem2&4?oneMapping:zeroMapping,dest[destPos++]=elem2&2?oneMapping:zeroMapping,dest[destPos++]=elem2&1?oneMapping:zeroMapping}if(widthRemainder===0)continue;const elem=srcPos<srcLength?src[srcPos++]:255;for(let j=0;j<widthRemainder;j++)dest[destPos++]=elem&1<<7-j?oneMapping:zeroMapping}return{srcPos,destPos}}__name2(applyMaskImageData,"applyMaskImageData"),__name(applyMaskImageData,"applyMaskImageData")},(__unused_webpack_module2,exports2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.GlobalWorkerOptions=void 0;const GlobalWorkerOptions=Object.create(null);exports2.GlobalWorkerOptions=GlobalWorkerOptions,GlobalWorkerOptions.workerPort=GlobalWorkerOptions.workerPort===void 0?null:GlobalWorkerOptions.workerPort,GlobalWorkerOptions.workerSrc=GlobalWorkerOptions.workerSrc===void 0?"":GlobalWorkerOptions.workerSrc},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.MessageHandler=void 0;var _util2=__w_pdfjs_require__2(1);const CallbackKind={UNKNOWN:0,DATA:1,ERROR:2},StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(reason){switch(reason instanceof Error||typeof reason=="object"&&reason!==null||(0,_util2.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),reason.name){case"AbortException":return new _util2.AbortException(reason.message);case"MissingPDFException":return new _util2.MissingPDFException(reason.message);case"PasswordException":return new _util2.PasswordException(reason.message,reason.code);case"UnexpectedResponseException":return new _util2.UnexpectedResponseException(reason.message,reason.status);case"UnknownErrorException":return new _util2.UnknownErrorException(reason.message,reason.details);default:return new _util2.UnknownErrorException(reason.message,reason.toString())}}__name2(wrapReason,"wrapReason"),__name(wrapReason,"wrapReason");const _MessageHandler=class{static{__name2(this,"_MessageHandler")}constructor(sourceName,targetName,comObj){this.sourceName=sourceName,this.targetName=targetName,this.comObj=comObj,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=event=>{const data=event.data;if(data.targetName!==this.sourceName)return;if(data.stream){this._processStreamMessage(data);return}if(data.callback){const callbackId=data.callbackId,capability=this.callbackCapabilities[callbackId];if(!capability)throw new Error(`Cannot resolve callback ${callbackId}`);if(delete this.callbackCapabilities[callbackId],data.callback===CallbackKind.DATA)capability.resolve(data.data);else if(data.callback===CallbackKind.ERROR)capability.reject(wrapReason(data.reason));else throw new Error("Unexpected callback case");return}const action=this.actionHandler[data.action];if(!action)throw new Error(`Unknown action from worker: ${data.action}`);if(data.callbackId){const cbSourceName=this.sourceName,cbTargetName=data.sourceName;new Promise(function(resolve){resolve(action(data.data))}).then(function(result){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.DATA,callbackId:data.callbackId,data:result})},function(reason){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.ERROR,callbackId:data.callbackId,reason:wrapReason(reason)})});return}if(data.streamId){this._createStreamSink(data);return}action(data.data)},comObj.addEventListener("message",this._onComObjOnMessage)}on(actionName,handler){const ah=this.actionHandler;if(ah[actionName])throw new Error(`There is already an actionName called "${actionName}"`);ah[actionName]=handler}send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data},transfers)}sendWithPromise(actionName,data,transfers){const callbackId=this.callbackId++,capability=(0,_util2.createPromiseCapability)();this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId,data},transfers)}catch(ex){capability.reject(ex)}return capability.promise}sendWithStream(actionName,data,queueingStrategy,transfers){const streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:controller=>{const startCapability=(0,_util2.createPromiseCapability)();return this.streamControllers[streamId]={controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:!1},comObj.postMessage({sourceName,targetName,action:actionName,streamId,data,desiredSize:controller.desiredSize},transfers),startCapability.promise},pull:controller=>{const pullCapability=(0,_util2.createPromiseCapability)();return this.streamControllers[streamId].pullCall=pullCapability,comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL,streamId,desiredSize:controller.desiredSize}),pullCapability.promise},cancel:reason=>{(0,_util2.assert)(reason instanceof Error,"cancel must have a valid reason");const cancelCapability=(0,_util2.createPromiseCapability)();return this.streamControllers[streamId].cancelCall=cancelCapability,this.streamControllers[streamId].isClosed=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL,streamId,reason:wrapReason(reason)}),cancelCapability.promise}},queueingStrategy)}_createStreamSink(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,self2=this,action=this.actionHandler[data.action],streamSink={enqueue(chunk,size=1,transfers){if(this.isCancelled)return;const lastDesiredSize=this.desiredSize;this.desiredSize-=size,lastDesiredSize>0&&this.desiredSize<=0&&(this.sinkCapability=(0,_util2.createPromiseCapability)(),this.ready=this.sinkCapability.promise),comObj.postMessage({sourceName,targetName,stream:StreamKind.ENQUEUE,streamId,chunk},transfers)},close(){this.isCancelled||(this.isCancelled=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.CLOSE,streamId}),delete self2.streamSinks[streamId])},error(reason){(0,_util2.assert)(reason instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.ERROR,streamId,reason:wrapReason(reason)}))},sinkCapability:(0,_util2.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve(),streamSink.ready=streamSink.sinkCapability.promise,this.streamSinks[streamId]=streamSink,new Promise(function(resolve){resolve(action(data.data,streamSink))}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,reason:wrapReason(reason)})})}_processStreamMessage(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:data.success?streamController.startCall.resolve():streamController.startCall.reject(wrapReason(data.reason));break;case StreamKind.PULL_COMPLETE:data.success?streamController.pullCall.resolve():streamController.pullCall.reject(wrapReason(data.reason));break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:!0});break}streamSink.desiredSize<=0&&data.desiredSize>0&&streamSink.sinkCapability.resolve(),streamSink.desiredSize=data.desiredSize,new Promise(function(resolve){resolve(streamSink.onPull&&streamSink.onPull())}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,reason:wrapReason(reason)})});break;case StreamKind.ENQUEUE:if((0,_util2.assert)(streamController,"enqueue should have stream controller"),streamController.isClosed)break;streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:if((0,_util2.assert)(streamController,"close should have stream controller"),streamController.isClosed)break;streamController.isClosed=!0,streamController.controller.close(),this._deleteStreamController(streamController,streamId);break;case StreamKind.ERROR:(0,_util2.assert)(streamController,"error should have stream controller"),streamController.controller.error(wrapReason(data.reason)),this._deleteStreamController(streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:data.success?streamController.cancelCall.resolve():streamController.cancelCall.reject(wrapReason(data.reason)),this._deleteStreamController(streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink)break;new Promise(function(resolve){resolve(streamSink.onCancel&&streamSink.onCancel(wrapReason(data.reason)))}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,reason:wrapReason(reason)})}),streamSink.sinkCapability.reject(wrapReason(data.reason)),streamSink.isCancelled=!0,delete this.streamSinks[streamId];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(streamController,streamId){await Promise.allSettled([streamController.startCall&&streamController.startCall.promise,streamController.pullCall&&streamController.pullCall.promise,streamController.cancelCall&&streamController.cancelCall.promise]),delete this.streamControllers[streamId]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}};__name(_MessageHandler,"MessageHandler");let MessageHandler=_MessageHandler;exports2.MessageHandler=MessageHandler},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _metadataMap,_data;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.Metadata=void 0;var _util2=__w_pdfjs_require__2(1);const _Metadata=class{static{__name2(this,"_Metadata")}constructor({parsedData,rawData}){__privateAdd(this,_metadataMap,void 0),__privateAdd(this,_data,void 0),__privateSet(this,_metadataMap,parsedData),__privateSet(this,_data,rawData)}getRaw(){return __privateGet(this,_data)}get(name){return __privateGet(this,_metadataMap).get(name)??null}getAll(){return(0,_util2.objectFromMap)(__privateGet(this,_metadataMap))}has(name){return __privateGet(this,_metadataMap).has(name)}};_metadataMap=new WeakMap,_data=new WeakMap,__name(_Metadata,"Metadata");let Metadata=_Metadata;exports2.Metadata=Metadata},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _visible,_cachedHasInitialVisibility,_groups,_initialVisibility,_order,_evaluateVisibilityExpression,evaluateVisibilityExpression_fn;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.OptionalContentConfig=void 0;var _util2=__w_pdfjs_require__2(1);const INTERNAL=Symbol("INTERNAL"),_OptionalContentGroup=class{static{__name2(this,"_OptionalContentGroup")}constructor(name,intent){__privateAdd(this,_visible,!0),this.name=name,this.intent=intent}get visible(){return __privateGet(this,_visible)}_setVisible(internal,visible){internal!==INTERNAL&&(0,_util2.unreachable)("Internal method `_setVisible` called."),__privateSet(this,_visible,visible)}};_visible=new WeakMap,__name(_OptionalContentGroup,"OptionalContentGroup");let OptionalContentGroup=_OptionalContentGroup;const _OptionalContentConfig=class{static{__name2(this,"_OptionalContentConfig")}constructor(data){if(__privateAdd(this,_evaluateVisibilityExpression),__privateAdd(this,_cachedHasInitialVisibility,!0),__privateAdd(this,_groups,new Map),__privateAdd(this,_initialVisibility,null),__privateAdd(this,_order,null),this.name=null,this.creator=null,data!==null){this.name=data.name,this.creator=data.creator,__privateSet(this,_order,data.order);for(const group of data.groups)__privateGet(this,_groups).set(group.id,new OptionalContentGroup(group.name,group.intent));if(data.baseState==="OFF")for(const group of __privateGet(this,_groups).values())group._setVisible(INTERNAL,!1);for(const on of data.on)__privateGet(this,_groups).get(on)._setVisible(INTERNAL,!0);for(const off of data.off)__privateGet(this,_groups).get(off)._setVisible(INTERNAL,!1);__privateSet(this,_initialVisibility,new Map);for(const[id,group]of __privateGet(this,_groups))__privateGet(this,_initialVisibility).set(id,group.visible)}}isVisible(group){if(__privateGet(this,_groups).size===0)return!0;if(!group)return(0,_util2.warn)("Optional content group not defined."),!0;if(group.type==="OCG")return __privateGet(this,_groups).has(group.id)?__privateGet(this,_groups).get(group.id).visible:((0,_util2.warn)(`Optional content group not found: ${group.id}`),!0);if(group.type==="OCMD"){if(group.expression)return __privateMethod(this,_evaluateVisibilityExpression,evaluateVisibilityExpression_fn).call(this,group.expression);if(!group.policy||group.policy==="AnyOn"){for(const id of group.ids){if(!__privateGet(this,_groups).has(id))return(0,_util2.warn)(`Optional content group not found: ${id}`),!0;if(__privateGet(this,_groups).get(id).visible)return!0}return!1}else if(group.policy==="AllOn"){for(const id of group.ids){if(!__privateGet(this,_groups).has(id))return(0,_util2.warn)(`Optional content group not found: ${id}`),!0;if(!__privateGet(this,_groups).get(id).visible)return!1}return!0}else if(group.policy==="AnyOff"){for(const id of group.ids){if(!__privateGet(this,_groups).has(id))return(0,_util2.warn)(`Optional content group not found: ${id}`),!0;if(!__privateGet(this,_groups).get(id).visible)return!0}return!1}else if(group.policy==="AllOff"){for(const id of group.ids){if(!__privateGet(this,_groups).has(id))return(0,_util2.warn)(`Optional content group not found: ${id}`),!0;if(__privateGet(this,_groups).get(id).visible)return!1}return!0}return(0,_util2.warn)(`Unknown optional content policy ${group.policy}.`),!0}return(0,_util2.warn)(`Unknown group type ${group.type}.`),!0}setVisibility(id,visible=!0){if(!__privateGet(this,_groups).has(id)){(0,_util2.warn)(`Optional content group not found: ${id}`);return}__privateGet(this,_groups).get(id)._setVisible(INTERNAL,!!visible),__privateSet(this,_cachedHasInitialVisibility,null)}get hasInitialVisibility(){if(__privateGet(this,_cachedHasInitialVisibility)!==null)return __privateGet(this,_cachedHasInitialVisibility);for(const[id,group]of __privateGet(this,_groups)){const visible=__privateGet(this,_initialVisibility).get(id);if(group.visible!==visible)return __privateSet(this,_cachedHasInitialVisibility,!1)}return __privateSet(this,_cachedHasInitialVisibility,!0)}getOrder(){return __privateGet(this,_groups).size?__privateGet(this,_order)?__privateGet(this,_order).slice():[...__privateGet(this,_groups).keys()]:null}getGroups(){return __privateGet(this,_groups).size>0?(0,_util2.objectFromMap)(__privateGet(this,_groups)):null}getGroup(id){return __privateGet(this,_groups).get(id)||null}};_cachedHasInitialVisibility=new WeakMap,_groups=new WeakMap,_initialVisibility=new WeakMap,_order=new WeakMap,_evaluateVisibilityExpression=new WeakSet,evaluateVisibilityExpression_fn=__name(function(array){const length=array.length;if(length<2)return!0;const operator=array[0];for(let i=1;i<length;i++){const element=array[i];let state;if(Array.isArray(element))state=__privateMethod(this,_evaluateVisibilityExpression,evaluateVisibilityExpression_fn).call(this,element);else if(__privateGet(this,_groups).has(element))state=__privateGet(this,_groups).get(element).visible;else return(0,_util2.warn)(`Optional content group not found: ${element}`),!0;switch(operator){case"And":if(!state)return!1;break;case"Or":if(state)return!0;break;case"Not":return!state;default:return!0}}return operator==="And"},"#evaluateVisibilityExpression"),__name(_OptionalContentConfig,"OptionalContentConfig");let OptionalContentConfig=_OptionalContentConfig;exports2.OptionalContentConfig=OptionalContentConfig},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PDFDataTransportStream=void 0;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(8);const _PDFDataTransportStream=class{static{__name2(this,"_PDFDataTransportStream")}constructor(params,pdfDataRangeTransport){(0,_util2.assert)(pdfDataRangeTransport,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=params.progressiveDone||!1,this._contentDispositionFilename=params.contentDispositionFilename||null;const initialData=params.initialData;if(initialData?.length>0){const buffer=new Uint8Array(initialData).buffer;this._queuedChunks.push(buffer)}this._pdfDataRangeTransport=pdfDataRangeTransport,this._isStreamingSupported=!params.disableStream,this._isRangeSupported=!params.disableRange,this._contentLength=params.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((begin,chunk)=>{this._onReceiveData({begin,chunk})}),this._pdfDataRangeTransport.addProgressListener((loaded,total)=>{this._onProgress({loaded,total})}),this._pdfDataRangeTransport.addProgressiveReadListener(chunk=>{this._onReceiveData({chunk})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(args){const buffer=new Uint8Array(args.chunk).buffer;if(args.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(buffer):this._queuedChunks.push(buffer);else{const found=this._rangeReaders.some(function(rangeReader){return rangeReader._begin!==args.begin?!1:(rangeReader._enqueue(buffer),!0)});(0,_util2.assert)(found,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var _a2;return((_a2=this._fullRequestReader)==null?void 0:_a2._loaded)??0}_onProgress(evt){if(evt.total===void 0){const firstReader=this._rangeReaders[0];firstReader?.onProgress&&firstReader.onProgress({loaded:evt.loaded})}else{const fullReader=this._fullRequestReader;fullReader?.onProgress&&fullReader.onProgress({loaded:evt.loaded,total:evt.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(reader){const i=this._rangeReaders.indexOf(reader);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){(0,_util2.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const queuedChunks=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,queuedChunks,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(begin,end){if(end<=this._progressiveDataLength)return null;const reader=new PDFDataTransportStreamRangeReader(this,begin,end);return this._pdfDataRangeTransport.requestDataRange(begin,end),this._rangeReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);for(const reader of this._rangeReaders.slice(0))reader.cancel(reason);this._pdfDataRangeTransport.abort()}};__name(_PDFDataTransportStream,"PDFDataTransportStream");let PDFDataTransportStream=_PDFDataTransportStream;exports2.PDFDataTransportStream=PDFDataTransportStream;const _PDFDataTransportStreamReader=class{static{__name2(this,"_PDFDataTransportStreamReader")}constructor(stream,queuedChunks,progressiveDone=!1,contentDispositionFilename=null){this._stream=stream,this._done=progressiveDone||!1,this._filename=(0,_display_utils2.isPdfFile)(contentDispositionFilename)?contentDispositionFilename:null,this._queuedChunks=queuedChunks||[],this._loaded=0;for(const chunk of this._queuedChunks)this._loaded+=chunk.byteLength;this._requests=[],this._headersReady=Promise.resolve(),stream._fullRequestReader=this,this.onProgress=null}_enqueue(chunk){this._done||(this._requests.length>0?this._requests.shift().resolve({value:chunk,done:!1}):this._queuedChunks.push(chunk),this._loaded+=chunk.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util2.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}};__name(_PDFDataTransportStreamReader,"PDFDataTransportStreamReader");let PDFDataTransportStreamReader=_PDFDataTransportStreamReader;const _PDFDataTransportStreamRangeReader=class{static{__name2(this,"_PDFDataTransportStreamRangeReader")}constructor(stream,begin,end){this._stream=stream,this._begin=begin,this._end=end,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(chunk){if(!this._done){if(this._requests.length===0)this._queuedChunk=chunk;else{this._requests.shift().resolve({value:chunk,done:!1});for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const chunk=this._queuedChunk;return this._queuedChunk=null,{value:chunk,done:!1}}if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util2.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};__name(_PDFDataTransportStreamRangeReader,"PDFDataTransportStreamRangeReader");let PDFDataTransportStreamRangeReader=_PDFDataTransportStreamRangeReader},(__unused_webpack_module2,exports2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.XfaText=void 0;const _XfaText=class _XfaText2{static{__name2(this,"_XfaText")}static textContent(xfa){const items=[],output={items,styles:Object.create(null)};function walk(node){var _a2;if(!node)return;let str=null;const name=node.name;if(name==="#text")str=node.value;else if(_XfaText2.shouldBuildText(name))(_a2=node?.attributes)!=null&&_a2.textContent?str=node.attributes.textContent:node.value&&(str=node.value);else return;if(str!==null&&items.push({str}),!!node.children)for(const child of node.children)walk(child)}return __name2(walk,"walk"),__name(walk,"walk"),walk(xfa),output}static shouldBuildText(name){return!(name==="textarea"||name==="input"||name==="option"||name==="select")}};__name(_XfaText,"XfaText");let XfaText=_XfaText;exports2.XfaText=XfaText},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.NodeStandardFontDataFactory=exports2.NodeCanvasFactory=exports2.NodeCMapReaderFactory=void 0;var _base_factory=__w_pdfjs_require__2(9);const fetchData=__name(function(url){return new Promise((resolve,reject)=>{require$$7.readFile(url,(error,data)=>{if(error||!data){reject(new Error(error));return}resolve(new Uint8Array(data))})})},"fetchData"),_NodeCanvasFactory=class extends _base_factory.BaseCanvasFactory{static{__name2(this,"_NodeCanvasFactory")}_createCanvas(width,height){return require$$7.createCanvas(width,height)}};__name(_NodeCanvasFactory,"NodeCanvasFactory");let NodeCanvasFactory=_NodeCanvasFactory;exports2.NodeCanvasFactory=NodeCanvasFactory;const _NodeCMapReaderFactory=class extends _base_factory.BaseCMapReaderFactory{static{__name2(this,"_NodeCMapReaderFactory")}_fetchData(url,compressionType){return fetchData(url).then(data=>({cMapData:data,compressionType}))}};__name(_NodeCMapReaderFactory,"NodeCMapReaderFactory");let NodeCMapReaderFactory=_NodeCMapReaderFactory;exports2.NodeCMapReaderFactory=NodeCMapReaderFactory;const _NodeStandardFontDataFactory=class extends _base_factory.BaseStandardFontDataFactory{static{__name2(this,"_NodeStandardFontDataFactory")}_fetchData(url){return fetchData(url)}};__name(_NodeStandardFontDataFactory,"NodeStandardFontDataFactory");let NodeStandardFontDataFactory=_NodeStandardFontDataFactory;exports2.NodeStandardFontDataFactory=NodeStandardFontDataFactory},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _accessibilityManager,_allowClick,_boundPointerup,_boundPointerdown,_editors,_hadPointerDown,_isCleaningUp,_uiManager,_changeParent,changeParent_fn,_createNewEditor,createNewEditor_fn,_createAndAddNewEditor,createAndAddNewEditor_fn,_cleanup,cleanup_fn;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.AnnotationEditorLayer=void 0;var _tools=__w_pdfjs_require__2(7),_util2=__w_pdfjs_require__2(1),_freetext=__w_pdfjs_require__2(23),_ink=__w_pdfjs_require__2(24);const _AnnotationEditorLayer=class _AnnotationEditorLayer2{static{__name2(this,"_AnnotationEditorLayer")}constructor(options){__privateAdd(this,_changeParent),__privateAdd(this,_createNewEditor),__privateAdd(this,_createAndAddNewEditor),__privateAdd(this,_cleanup),__privateAdd(this,_accessibilityManager,void 0),__privateAdd(this,_allowClick,!1),__privateAdd(this,_boundPointerup,this.pointerup.bind(this)),__privateAdd(this,_boundPointerdown,this.pointerdown.bind(this)),__privateAdd(this,_editors,new Map),__privateAdd(this,_hadPointerDown,!1),__privateAdd(this,_isCleaningUp,!1),__privateAdd(this,_uiManager,void 0),_AnnotationEditorLayer2._initialized||(_AnnotationEditorLayer2._initialized=!0,_freetext.FreeTextEditor.initialize(options.l10n),_ink.InkEditor.initialize(options.l10n),options.uiManager.registerEditorTypes([_freetext.FreeTextEditor,_ink.InkEditor])),__privateSet(this,_uiManager,options.uiManager),this.annotationStorage=options.annotationStorage,this.pageIndex=options.pageIndex,this.div=options.div,__privateSet(this,_accessibilityManager,options.accessibilityManager),__privateGet(this,_uiManager).addLayer(this)}updateToolbar(mode){__privateGet(this,_uiManager).updateToolbar(mode)}updateMode(mode=__privateGet(this,_uiManager).getMode()){__privateMethod(this,_cleanup,cleanup_fn).call(this),mode===_util2.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),__privateGet(this,_uiManager).unselectAll()}addInkEditorIfNeeded(isCommitting){if(!isCommitting&&__privateGet(this,_uiManager).getMode()!==_util2.AnnotationEditorType.INK)return;if(!isCommitting){for(const editor2 of __privateGet(this,_editors).values())if(editor2.isEmpty()){editor2.setInBackground();return}}__privateMethod(this,_createAndAddNewEditor,createAndAddNewEditor_fn).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(isEditing){__privateGet(this,_uiManager).setEditingState(isEditing)}addCommands(params){__privateGet(this,_uiManager).addCommands(params)}enable(){this.div.style.pointerEvents="auto";for(const editor of __privateGet(this,_editors).values())editor.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const editor of __privateGet(this,_editors).values())editor.disableEditing()}setActiveEditor(editor){__privateGet(this,_uiManager).getActive()!==editor&&__privateGet(this,_uiManager).setActiveEditor(editor)}enableClick(){this.div.addEventListener("pointerdown",__privateGet(this,_boundPointerdown)),this.div.addEventListener("pointerup",__privateGet(this,_boundPointerup))}disableClick(){this.div.removeEventListener("pointerdown",__privateGet(this,_boundPointerdown)),this.div.removeEventListener("pointerup",__privateGet(this,_boundPointerup))}attach(editor){__privateGet(this,_editors).set(editor.id,editor)}detach(editor){var _a2;__privateGet(this,_editors).delete(editor.id),(_a2=__privateGet(this,_accessibilityManager))==null||_a2.removePointerInTextLayer(editor.contentDiv)}remove(editor){__privateGet(this,_uiManager).removeEditor(editor),this.detach(editor),this.annotationStorage.remove(editor.id),editor.div.style.display="none",setTimeout(()=>{editor.div.style.display="",editor.div.remove(),editor.isAttachedToDOM=!1,document.activeElement===document.body&&__privateGet(this,_uiManager).focusMainContainer()},0),__privateGet(this,_isCleaningUp)||this.addInkEditorIfNeeded(!1)}add(editor){if(__privateMethod(this,_changeParent,changeParent_fn).call(this,editor),__privateGet(this,_uiManager).addEditor(editor),this.attach(editor),!editor.isAttachedToDOM){const div=editor.render();this.div.append(div),editor.isAttachedToDOM=!0}this.moveEditorInDOM(editor),editor.onceAdded(),this.addToAnnotationStorage(editor)}moveEditorInDOM(editor){var _a2;(_a2=__privateGet(this,_accessibilityManager))==null||_a2.moveElementInDOM(this.div,editor.div,editor.contentDiv,!0)}addToAnnotationStorage(editor){!editor.isEmpty()&&!this.annotationStorage.has(editor.id)&&this.annotationStorage.setValue(editor.id,editor)}addOrRebuild(editor){editor.needsToBeRebuilt()?editor.rebuild():this.add(editor)}addANewEditor(editor){const cmd=__name(()=>{this.addOrRebuild(editor)},"cmd"),undo=__name(()=>{editor.remove()},"undo");this.addCommands({cmd,undo,mustExec:!0})}addUndoableEditor(editor){const cmd=__name(()=>{this.addOrRebuild(editor)},"cmd"),undo=__name(()=>{editor.remove()},"undo");this.addCommands({cmd,undo,mustExec:!1})}getNextId(){return __privateGet(this,_uiManager).getId()}deserialize(data){switch(data.annotationType){case _util2.AnnotationEditorType.FREETEXT:return _freetext.FreeTextEditor.deserialize(data,this);case _util2.AnnotationEditorType.INK:return _ink.InkEditor.deserialize(data,this)}return null}setSelected(editor){__privateGet(this,_uiManager).setSelected(editor)}toggleSelected(editor){__privateGet(this,_uiManager).toggleSelected(editor)}isSelected(editor){return __privateGet(this,_uiManager).isSelected(editor)}unselect(editor){__privateGet(this,_uiManager).unselect(editor)}pointerup(event){const isMac=_tools.KeyboardManager.platform.isMac;if(!(event.button!==0||event.ctrlKey&&isMac)&&event.target===this.div&&__privateGet(this,_hadPointerDown)){if(__privateSet(this,_hadPointerDown,!1),!__privateGet(this,_allowClick)){__privateSet(this,_allowClick,!0);return}__privateMethod(this,_createAndAddNewEditor,createAndAddNewEditor_fn).call(this,event)}}pointerdown(event){const isMac=_tools.KeyboardManager.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac||event.target!==this.div)return;__privateSet(this,_hadPointerDown,!0);const editor=__privateGet(this,_uiManager).getActive();__privateSet(this,_allowClick,!editor||editor.isEmpty())}drop(event){const id=event.dataTransfer.getData("text/plain"),editor=__privateGet(this,_uiManager).getEditor(id);if(!editor)return;event.preventDefault(),event.dataTransfer.dropEffect="move",__privateMethod(this,_changeParent,changeParent_fn).call(this,editor);const rect=this.div.getBoundingClientRect(),endX=event.clientX-rect.x,endY=event.clientY-rect.y;editor.translate(endX-editor.startX,endY-editor.startY),this.moveEditorInDOM(editor),editor.div.focus()}dragover(event){event.preventDefault()}destroy(){var _a2,_b;((_a2=__privateGet(this,_uiManager).getActive())==null?void 0:_a2.parent)===this&&__privateGet(this,_uiManager).setActiveEditor(null);for(const editor of __privateGet(this,_editors).values())(_b=__privateGet(this,_accessibilityManager))==null||_b.removePointerInTextLayer(editor.contentDiv),editor.isAttachedToDOM=!1,editor.div.remove(),editor.parent=null;this.div=null,__privateGet(this,_editors).clear(),__privateGet(this,_uiManager).removeLayer(this)}render(parameters){this.viewport=parameters.viewport,(0,_tools.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const editor of __privateGet(this,_uiManager).getEditors(this.pageIndex))this.add(editor);this.updateMode()}update(parameters){this.viewport=parameters.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[pageLLx,pageLLy,pageURx,pageURy]=this.viewport.viewBox,width=pageURx-pageLLx,height=pageURy-pageLLy;return[width,height]}get viewportBaseDimensions(){const{width,height,rotation}=this.viewport;return rotation%180===0?[width,height]:[height,width]}setDimensions(){const{width,height,rotation}=this.viewport,flipOrientation=rotation%180!==0,widthStr=Math.floor(width)+"px",heightStr=Math.floor(height)+"px";this.div.style.width=flipOrientation?heightStr:widthStr,this.div.style.height=flipOrientation?widthStr:heightStr,this.div.setAttribute("data-main-rotation",rotation)}};_accessibilityManager=new WeakMap,_allowClick=new WeakMap,_boundPointerup=new WeakMap,_boundPointerdown=new WeakMap,_editors=new WeakMap,_hadPointerDown=new WeakMap,_isCleaningUp=new WeakMap,_uiManager=new WeakMap,_changeParent=new WeakSet,changeParent_fn=__name(function(editor){var _a2;editor.parent!==this&&(this.attach(editor),editor.pageIndex=this.pageIndex,(_a2=editor.parent)==null||_a2.detach(editor),editor.parent=this,editor.div&&editor.isAttachedToDOM&&(editor.div.remove(),this.div.append(editor.div)))},"#changeParent"),_createNewEditor=new WeakSet,createNewEditor_fn=__name(function(params){switch(__privateGet(this,_uiManager).getMode()){case _util2.AnnotationEditorType.FREETEXT:return new _freetext.FreeTextEditor(params);case _util2.AnnotationEditorType.INK:return new _ink.InkEditor(params)}return null},"#createNewEditor"),_createAndAddNewEditor=new WeakSet,createAndAddNewEditor_fn=__name(function(event){const id=this.getNextId(),editor=__privateMethod(this,_createNewEditor,createNewEditor_fn).call(this,{parent:this,id,x:event.offsetX,y:event.offsetY});return editor&&this.add(editor),editor},"#createAndAddNewEditor"),_cleanup=new WeakSet,cleanup_fn=__name(function(){__privateSet(this,_isCleaningUp,!0);for(const editor of __privateGet(this,_editors).values())editor.isEmpty()&&editor.remove();__privateSet(this,_isCleaningUp,!1)},"#cleanup"),__name(_AnnotationEditorLayer,"AnnotationEditorLayer"),__publicField(_AnnotationEditorLayer,"_initialized",!1);let AnnotationEditorLayer=_AnnotationEditorLayer;exports2.AnnotationEditorLayer=AnnotationEditorLayer},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _boundEditorDivBlur,_boundEditorDivFocus,_boundEditorDivKeydown,_color,_content,_hasAlreadyBeenCommitted,_fontSize,_updateFontSize,updateFontSize_fn,_updateColor,updateColor_fn,_extractText,extractText_fn,_setEditorDimensions,setEditorDimensions_fn;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.FreeTextEditor=void 0;var _util2=__w_pdfjs_require__2(1),_tools=__w_pdfjs_require__2(7),_editor=__w_pdfjs_require__2(6);const _FreeTextEditor=class _FreeTextEditor2 extends _editor.AnnotationEditor{static{__name2(this,"_FreeTextEditor")}constructor(params){super({...params,name:"freeTextEditor"}),__privateAdd(this,_updateFontSize),__privateAdd(this,_updateColor),__privateAdd(this,_extractText),__privateAdd(this,_setEditorDimensions),__privateAdd(this,_boundEditorDivBlur,this.editorDivBlur.bind(this)),__privateAdd(this,_boundEditorDivFocus,this.editorDivFocus.bind(this)),__privateAdd(this,_boundEditorDivKeydown,this.editorDivKeydown.bind(this)),__privateAdd(this,_color,void 0),__privateAdd(this,_content,""),__privateAdd(this,_hasAlreadyBeenCommitted,!1),__privateAdd(this,_fontSize,void 0),__privateSet(this,_color,params.color||_FreeTextEditor2._defaultColor||_editor.AnnotationEditor._defaultLineColor),__privateSet(this,_fontSize,params.fontSize||_FreeTextEditor2._defaultFontSize)}static initialize(l10n){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(str=>[str,l10n.get(str)]));const style=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(style.getPropertyValue("--freetext-padding"))}static updateDefaultParams(type,value){switch(type){case _util2.AnnotationEditorParamsType.FREETEXT_SIZE:_FreeTextEditor2._defaultFontSize=value;break;case _util2.AnnotationEditorParamsType.FREETEXT_COLOR:_FreeTextEditor2._defaultColor=value;break}}updateParams(type,value){switch(type){case _util2.AnnotationEditorParamsType.FREETEXT_SIZE:__privateMethod(this,_updateFontSize,updateFontSize_fn).call(this,value);break;case _util2.AnnotationEditorParamsType.FREETEXT_COLOR:__privateMethod(this,_updateColor,updateColor_fn).call(this,value);break}}static get defaultPropertiesToUpdate(){return[[_util2.AnnotationEditorParamsType.FREETEXT_SIZE,_FreeTextEditor2._defaultFontSize],[_util2.AnnotationEditorParamsType.FREETEXT_COLOR,_FreeTextEditor2._defaultColor||_editor.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[_util2.AnnotationEditorParamsType.FREETEXT_SIZE,__privateGet(this,_fontSize)],[_util2.AnnotationEditorParamsType.FREETEXT_COLOR,__privateGet(this,_color)]]}getInitialTranslation(){return[-_FreeTextEditor2._internalPadding*this.parent.scaleFactor,-(_FreeTextEditor2._internalPadding+__privateGet(this,_fontSize))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(_util2.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",__privateGet(this,_boundEditorDivKeydown)),this.editorDiv.addEventListener("focus",__privateGet(this,_boundEditorDivFocus)),this.editorDiv.addEventListener("blur",__privateGet(this,_boundEditorDivBlur)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",__privateGet(this,_boundEditorDivKeydown)),this.editorDiv.removeEventListener("focus",__privateGet(this,_boundEditorDivFocus)),this.editorDiv.removeEventListener("blur",__privateGet(this,_boundEditorDivBlur)),this.div.focus(),this.isEditing=!1)}focusin(event){super.focusin(event),event.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),__privateGet(this,_hasAlreadyBeenCommitted)||(__privateSet(this,_hasAlreadyBeenCommitted,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),__privateSet(this,_content,__privateMethod(this,_extractText,extractText_fn).call(this).trimEnd()),__privateMethod(this,_setEditorDimensions,setEditorDimensions_fn).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(event){this.enableEditMode(),this.editorDiv.focus()}keydown(event){event.target===this.div&&event.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(event){_FreeTextEditor2._keyboardManager.exec(this,event)}editorDivFocus(event){this.isEditing=!0}editorDivBlur(event){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let baseX,baseY;this.width&&(baseX=this.x,baseY=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),_FreeTextEditor2._l10nPromise.get("editor_free_text_aria_label").then(msg=>{var _a2;return(_a2=this.editorDiv)==null?void 0:_a2.setAttribute("aria-label",msg)}),_FreeTextEditor2._l10nPromise.get("free_text_default_content").then(msg=>{var _a2;return(_a2=this.editorDiv)==null?void 0:_a2.setAttribute("default-content",msg)}),this.editorDiv.contentEditable=!0;const{style}=this.editorDiv;if(style.fontSize=`calc(${__privateGet(this,_fontSize)}px * var(--scale-factor))`,style.color=__privateGet(this,_color),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,_tools.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);for(const line of __privateGet(this,_content).split(`
`)){const div=document.createElement("div");div.append(line?document.createTextNode(line):document.createElement("br")),this.editorDiv.append(div)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(data,parent){const editor=super.deserialize(data,parent);return __privateSet(editor,_fontSize,data.fontSize),__privateSet(editor,_color,_util2.Util.makeHexColor(...data.color)),__privateSet(editor,_content,data.value),editor}serialize(){if(this.isEmpty())return null;const padding=_FreeTextEditor2._internalPadding*this.parent.scaleFactor,rect=this.getRect(padding,padding),color=_editor.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:_util2.AnnotationEditorType.FREETEXT,color,fontSize:__privateGet(this,_fontSize),value:__privateGet(this,_content),pageIndex:this.parent.pageIndex,rect,rotation:this.rotation}}};_boundEditorDivBlur=new WeakMap,_boundEditorDivFocus=new WeakMap,_boundEditorDivKeydown=new WeakMap,_color=new WeakMap,_content=new WeakMap,_hasAlreadyBeenCommitted=new WeakMap,_fontSize=new WeakMap,_updateFontSize=new WeakSet,updateFontSize_fn=__name(function(fontSize){const setFontsize=__name(size=>{this.editorDiv.style.fontSize=`calc(${size}px * var(--scale-factor))`,this.translate(0,-(size-__privateGet(this,_fontSize))*this.parent.scaleFactor),__privateSet(this,_fontSize,size),__privateMethod(this,_setEditorDimensions,setEditorDimensions_fn).call(this)},"setFontsize"),savedFontsize=__privateGet(this,_fontSize);this.parent.addCommands({cmd:()=>{setFontsize(fontSize)},undo:()=>{setFontsize(savedFontsize)},mustExec:!0,type:_util2.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},"#updateFontSize"),_updateColor=new WeakSet,updateColor_fn=__name(function(color){const savedColor=__privateGet(this,_color);this.parent.addCommands({cmd:()=>{__privateSet(this,_color,color),this.editorDiv.style.color=color},undo:()=>{__privateSet(this,_color,savedColor),this.editorDiv.style.color=savedColor},mustExec:!0,type:_util2.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},"#updateColor"),_extractText=new WeakSet,extractText_fn=__name(function(){const divs=this.editorDiv.getElementsByTagName("div");if(divs.length===0)return this.editorDiv.innerText;const buffer=[];for(let i=0,ii=divs.length;i<ii;i++){const first=divs[i].firstChild;first?.nodeName==="#text"?buffer.push(first.data):buffer.push("")}return buffer.join(`
`)},"#extractText"),_setEditorDimensions=new WeakSet,setEditorDimensions_fn=__name(function(){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions,rect=this.div.getBoundingClientRect();this.width=rect.width/parentWidth,this.height=rect.height/parentHeight},"#setEditorDimensions"),__name(_FreeTextEditor,"FreeTextEditor"),__publicField(_FreeTextEditor,"_freeTextDefaultContent",""),__publicField(_FreeTextEditor,"_l10nPromise"),__publicField(_FreeTextEditor,"_internalPadding",0),__publicField(_FreeTextEditor,"_defaultColor",null),__publicField(_FreeTextEditor,"_defaultFontSize",10),__publicField(_FreeTextEditor,"_keyboardManager",new _tools.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],_FreeTextEditor.prototype.commitOrRemove]])),__publicField(_FreeTextEditor,"_type","freetext");let FreeTextEditor=_FreeTextEditor;exports2.FreeTextEditor=FreeTextEditor},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _aspectRatio,_baseHeight,_baseWidth,_boundCanvasPointermove,_boundCanvasPointerleave,_boundCanvasPointerup,_boundCanvasPointerdown,_disableEditing,_isCanvasInitialized,_lastPoint,_observer,_realWidth,_realHeight,_requestFrameCallback,_updateThickness,updateThickness_fn,_updateColor,updateColor_fn,_updateOpacity,updateOpacity_fn,_getInitialBBox,getInitialBBox_fn,_setStroke,setStroke_fn,_startDrawing,startDrawing_fn,_draw,draw_fn,_stopDrawing,stopDrawing_fn,_redraw,redraw_fn,_endDrawing,endDrawing_fn,_createCanvas,createCanvas_fn,_createObserver,createObserver_fn,_setCanvasDims,setCanvasDims_fn,_setScaleFactor,setScaleFactor_fn,_updateTransform,updateTransform_fn,_buildPath2D,buildPath2D_fn,_serializePaths,serializePaths_fn,_extractPointsOnBezier,extractPointsOnBezier_fn,_isAlmostFlat,isAlmostFlat_fn,_getBbox,getBbox_fn,_getPadding,getPadding_fn,_fitToContent,fitToContent_fn,_setMinDims,setMinDims_fn;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.InkEditor=void 0,Object.defineProperty(exports2,"fitCurve",{enumerable:!0,get:function(){return _pdfjsFitCurve.fitCurve}});var _util2=__w_pdfjs_require__2(1),_editor=__w_pdfjs_require__2(6),_pdfjsFitCurve=__w_pdfjs_require__2(25),_tools=__w_pdfjs_require__2(7);const RESIZER_SIZE=16,_InkEditor=class _InkEditor2 extends _editor.AnnotationEditor{static{__name2(this,"_InkEditor")}constructor(params){super({...params,name:"inkEditor"}),__privateAdd(this,_updateThickness),__privateAdd(this,_updateColor),__privateAdd(this,_updateOpacity),__privateAdd(this,_getInitialBBox),__privateAdd(this,_setStroke),__privateAdd(this,_startDrawing),__privateAdd(this,_draw),__privateAdd(this,_stopDrawing),__privateAdd(this,_redraw),__privateAdd(this,_endDrawing),__privateAdd(this,_createCanvas),__privateAdd(this,_createObserver),__privateAdd(this,_setCanvasDims),__privateAdd(this,_setScaleFactor),__privateAdd(this,_updateTransform),__privateAdd(this,_serializePaths),__privateAdd(this,_extractPointsOnBezier),__privateAdd(this,_isAlmostFlat),__privateAdd(this,_getBbox),__privateAdd(this,_getPadding),__privateAdd(this,_fitToContent),__privateAdd(this,_setMinDims),__privateAdd(this,_aspectRatio,0),__privateAdd(this,_baseHeight,0),__privateAdd(this,_baseWidth,0),__privateAdd(this,_boundCanvasPointermove,this.canvasPointermove.bind(this)),__privateAdd(this,_boundCanvasPointerleave,this.canvasPointerleave.bind(this)),__privateAdd(this,_boundCanvasPointerup,this.canvasPointerup.bind(this)),__privateAdd(this,_boundCanvasPointerdown,this.canvasPointerdown.bind(this)),__privateAdd(this,_disableEditing,!1),__privateAdd(this,_isCanvasInitialized,!1),__privateAdd(this,_lastPoint,null),__privateAdd(this,_observer,null),__privateAdd(this,_realWidth,0),__privateAdd(this,_realHeight,0),__privateAdd(this,_requestFrameCallback,null),this.color=params.color||null,this.thickness=params.thickness||null,this.opacity=params.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(l10n){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(str=>[str,l10n.get(str)]))}static updateDefaultParams(type,value){switch(type){case _util2.AnnotationEditorParamsType.INK_THICKNESS:_InkEditor2._defaultThickness=value;break;case _util2.AnnotationEditorParamsType.INK_COLOR:_InkEditor2._defaultColor=value;break;case _util2.AnnotationEditorParamsType.INK_OPACITY:_InkEditor2._defaultOpacity=value/100;break}}updateParams(type,value){switch(type){case _util2.AnnotationEditorParamsType.INK_THICKNESS:__privateMethod(this,_updateThickness,updateThickness_fn).call(this,value);break;case _util2.AnnotationEditorParamsType.INK_COLOR:__privateMethod(this,_updateColor,updateColor_fn).call(this,value);break;case _util2.AnnotationEditorParamsType.INK_OPACITY:__privateMethod(this,_updateOpacity,updateOpacity_fn).call(this,value);break}}static get defaultPropertiesToUpdate(){return[[_util2.AnnotationEditorParamsType.INK_THICKNESS,_InkEditor2._defaultThickness],[_util2.AnnotationEditorParamsType.INK_COLOR,_InkEditor2._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util2.AnnotationEditorParamsType.INK_OPACITY,Math.round(_InkEditor2._defaultOpacity*100)]]}get propertiesToUpdate(){return[[_util2.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||_InkEditor2._defaultThickness],[_util2.AnnotationEditorParamsType.INK_COLOR,this.color||_InkEditor2._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util2.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??_InkEditor2._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(__privateMethod(this,_createCanvas,createCanvas_fn).call(this),__privateMethod(this,_createObserver,createObserver_fn).call(this)),this.isAttachedToDOM||(this.parent.add(this),__privateMethod(this,_setCanvasDims,setCanvasDims_fn).call(this)),__privateMethod(this,_fitToContent,fitToContent_fn).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,__privateGet(this,_observer).disconnect(),__privateSet(this,_observer,null),super.remove())}enableEditMode(){__privateGet(this,_disableEditing)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",__privateGet(this,_boundCanvasPointerdown)),this.canvas.addEventListener("pointerup",__privateGet(this,_boundCanvasPointerup)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",__privateGet(this,_boundCanvasPointerdown)),this.canvas.removeEventListener("pointerup",__privateGet(this,_boundCanvasPointerup)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){__privateGet(this,_disableEditing)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),__privateSet(this,_disableEditing,!0),this.div.classList.add("disabled"),__privateMethod(this,_fitToContent,fitToContent_fn).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(event){super.focusin(event),this.enableEditMode()}canvasPointerdown(event){event.button!==0||!this.isInEditMode()||__privateGet(this,_disableEditing)||(this.setInForeground(),event.type!=="mouse"&&this.div.focus(),event.stopPropagation(),this.canvas.addEventListener("pointerleave",__privateGet(this,_boundCanvasPointerleave)),this.canvas.addEventListener("pointermove",__privateGet(this,_boundCanvasPointermove)),__privateMethod(this,_startDrawing,startDrawing_fn).call(this,event.offsetX,event.offsetY))}canvasPointermove(event){event.stopPropagation(),__privateMethod(this,_draw,draw_fn).call(this,event.offsetX,event.offsetY)}canvasPointerup(event){event.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(event.stopPropagation(),__privateMethod(this,_endDrawing,endDrawing_fn).call(this,event),this.setInBackground())}canvasPointerleave(event){__privateMethod(this,_endDrawing,endDrawing_fn).call(this,event),this.setInBackground()}render(){if(this.div)return this.div;let baseX,baseY;this.width&&(baseX=this.x,baseY=this.y),super.render(),_InkEditor2._l10nPromise.get("editor_ink_aria_label").then(msg=>{var _a2;return(_a2=this.div)==null?void 0:_a2.setAttribute("aria-label",msg)});const[x,y,w,h]=__privateMethod(this,_getInitialBBox,getInitialBBox_fn).call(this);if(this.setAt(x,y,0,0),this.setDims(w,h),__privateMethod(this,_createCanvas,createCanvas_fn).call(this),this.width){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight),__privateSet(this,_isCanvasInitialized,!0),__privateMethod(this,_setCanvasDims,setCanvasDims_fn).call(this),this.setDims(this.width*parentWidth,this.height*parentHeight),__privateMethod(this,_redraw,redraw_fn).call(this),__privateMethod(this,_setMinDims,setMinDims_fn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return __privateMethod(this,_createObserver,createObserver_fn).call(this),this.div}setDimensions(width,height){const roundedWidth=Math.round(width),roundedHeight=Math.round(height);if(__privateGet(this,_realWidth)===roundedWidth&&__privateGet(this,_realHeight)===roundedHeight)return;__privateSet(this,_realWidth,roundedWidth),__privateSet(this,_realHeight,roundedHeight),this.canvas.style.visibility="hidden",__privateGet(this,_aspectRatio)&&Math.abs(__privateGet(this,_aspectRatio)-width/height)>.01&&(height=Math.ceil(width/__privateGet(this,_aspectRatio)),this.setDims(width,height));const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.width=width/parentWidth,this.height=height/parentHeight,__privateGet(this,_disableEditing)&&__privateMethod(this,_setScaleFactor,setScaleFactor_fn).call(this,width,height),__privateMethod(this,_setCanvasDims,setCanvasDims_fn).call(this),__privateMethod(this,_redraw,redraw_fn).call(this),this.canvas.style.visibility="visible"}static deserialize(data,parent){var _a2,_b;const editor=super.deserialize(data,parent);editor.thickness=data.thickness,editor.color=_util2.Util.makeHexColor(...data.color),editor.opacity=data.opacity;const[pageWidth,pageHeight]=parent.pageDimensions,width=editor.width*pageWidth,height=editor.height*pageHeight,scaleFactor=parent.scaleFactor,padding=data.thickness/2;__privateSet(editor,_aspectRatio,width/height),__privateSet(editor,_disableEditing,!0),__privateSet(editor,_realWidth,Math.round(width)),__privateSet(editor,_realHeight,Math.round(height));for(const{bezier}of data.paths){const path=[];editor.paths.push(path);let p0=scaleFactor*(bezier[0]-padding),p1=scaleFactor*(height-bezier[1]-padding);for(let i=2,ii=bezier.length;i<ii;i+=6){const p10=scaleFactor*(bezier[i]-padding),p11=scaleFactor*(height-bezier[i+1]-padding),p20=scaleFactor*(bezier[i+2]-padding),p21=scaleFactor*(height-bezier[i+3]-padding),p30=scaleFactor*(bezier[i+4]-padding),p31=scaleFactor*(height-bezier[i+5]-padding);path.push([[p0,p1],[p10,p11],[p20,p21],[p30,p31]]),p0=p30,p1=p31}const path2D=__privateMethod(this,_buildPath2D,buildPath2D_fn).call(this,path);editor.bezierPath2D.push(path2D)}const bbox=__privateMethod(_a2=editor,_getBbox,getBbox_fn).call(_a2);return __privateSet(editor,_baseWidth,Math.max(RESIZER_SIZE,bbox[2]-bbox[0])),__privateSet(editor,_baseHeight,Math.max(RESIZER_SIZE,bbox[3]-bbox[1])),__privateMethod(_b=editor,_setScaleFactor,setScaleFactor_fn).call(_b,width,height),editor}serialize(){if(this.isEmpty())return null;const rect=this.getRect(0,0),height=this.rotation%180===0?rect[3]-rect[1]:rect[2]-rect[0],color=_editor.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:_util2.AnnotationEditorType.INK,color,thickness:this.thickness,opacity:this.opacity,paths:__privateMethod(this,_serializePaths,serializePaths_fn).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,height),pageIndex:this.parent.pageIndex,rect,rotation:this.rotation}}};_aspectRatio=new WeakMap,_baseHeight=new WeakMap,_baseWidth=new WeakMap,_boundCanvasPointermove=new WeakMap,_boundCanvasPointerleave=new WeakMap,_boundCanvasPointerup=new WeakMap,_boundCanvasPointerdown=new WeakMap,_disableEditing=new WeakMap,_isCanvasInitialized=new WeakMap,_lastPoint=new WeakMap,_observer=new WeakMap,_realWidth=new WeakMap,_realHeight=new WeakMap,_requestFrameCallback=new WeakMap,_updateThickness=new WeakSet,updateThickness_fn=__name(function(thickness){const savedThickness=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=thickness,__privateMethod(this,_fitToContent,fitToContent_fn).call(this)},undo:()=>{this.thickness=savedThickness,__privateMethod(this,_fitToContent,fitToContent_fn).call(this)},mustExec:!0,type:_util2.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},"#updateThickness"),_updateColor=new WeakSet,updateColor_fn=__name(function(color){const savedColor=this.color;this.parent.addCommands({cmd:()=>{this.color=color,__privateMethod(this,_redraw,redraw_fn).call(this)},undo:()=>{this.color=savedColor,__privateMethod(this,_redraw,redraw_fn).call(this)},mustExec:!0,type:_util2.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},"#updateColor"),_updateOpacity=new WeakSet,updateOpacity_fn=__name(function(opacity){opacity/=100;const savedOpacity=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=opacity,__privateMethod(this,_redraw,redraw_fn).call(this)},undo:()=>{this.opacity=savedOpacity,__privateMethod(this,_redraw,redraw_fn).call(this)},mustExec:!0,type:_util2.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},"#updateOpacity"),_getInitialBBox=new WeakSet,getInitialBBox_fn=__name(function(){const{width,height,rotation}=this.parent.viewport;switch(rotation){case 90:return[0,width,width,height];case 180:return[width,height,width,height];case 270:return[height,0,width,height];default:return[0,0,width,height]}},"#getInitialBBox"),_setStroke=new WeakSet,setStroke_fn=__name(function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,_tools.opacityToHex)(this.opacity)}`},"#setStroke"),_startDrawing=new WeakSet,startDrawing_fn=__name(function(x,y){this.isEditing=!0,__privateGet(this,_isCanvasInitialized)||(__privateSet(this,_isCanvasInitialized,!0),__privateMethod(this,_setCanvasDims,setCanvasDims_fn).call(this),this.thickness||(this.thickness=_InkEditor._defaultThickness),this.color||(this.color=_InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=_InkEditor._defaultOpacity)),this.currentPath.push([x,y]),__privateSet(this,_lastPoint,null),__privateMethod(this,_setStroke,setStroke_fn).call(this),this.ctx.beginPath(),this.ctx.moveTo(x,y),__privateSet(this,_requestFrameCallback,()=>{__privateGet(this,_requestFrameCallback)&&(__privateGet(this,_lastPoint)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):__privateMethod(this,_redraw,redraw_fn).call(this),this.ctx.lineTo(...__privateGet(this,_lastPoint)),__privateSet(this,_lastPoint,null),this.ctx.stroke()),window.requestAnimationFrame(__privateGet(this,_requestFrameCallback)))}),window.requestAnimationFrame(__privateGet(this,_requestFrameCallback))},"#startDrawing"),_draw=new WeakSet,draw_fn=__name(function(x,y){const[lastX,lastY]=this.currentPath.at(-1);x===lastX&&y===lastY||(this.currentPath.push([x,y]),__privateSet(this,_lastPoint,[x,y]))},"#draw"),_stopDrawing=new WeakSet,stopDrawing_fn=__name(function(x,y){var _a2;this.ctx.closePath(),__privateSet(this,_requestFrameCallback,null),x=Math.min(Math.max(x,0),this.canvas.width),y=Math.min(Math.max(y,0),this.canvas.height);const[lastX,lastY]=this.currentPath.at(-1);(x!==lastX||y!==lastY)&&this.currentPath.push([x,y]);let bezier;if(this.currentPath.length!==1)bezier=(0,_pdfjsFitCurve.fitCurve)(this.currentPath,30,null);else{const xy=[x,y];bezier=[[xy,xy.slice(),xy.slice(),xy]]}const path2D=__privateMethod(_a2=_InkEditor,_buildPath2D,buildPath2D_fn).call(_a2,bezier);this.currentPath.length=0;const cmd=__name(()=>{this.paths.push(bezier),this.bezierPath2D.push(path2D),this.rebuild()},"cmd"),undo=__name(()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(__privateMethod(this,_createCanvas,createCanvas_fn).call(this),__privateMethod(this,_createObserver,createObserver_fn).call(this)),__privateMethod(this,_fitToContent,fitToContent_fn).call(this))},"undo");this.parent.addCommands({cmd,undo,mustExec:!0})},"#stopDrawing"),_redraw=new WeakSet,redraw_fn=__name(function(){if(this.isEmpty()){__privateMethod(this,_updateTransform,updateTransform_fn).call(this);return}__privateMethod(this,_setStroke,setStroke_fn).call(this);const{canvas,ctx}=this;ctx.setTransform(1,0,0,1,0,0),ctx.clearRect(0,0,canvas.width,canvas.height),__privateMethod(this,_updateTransform,updateTransform_fn).call(this);for(const path of this.bezierPath2D)ctx.stroke(path)},"#redraw"),_endDrawing=new WeakSet,endDrawing_fn=__name(function(event){__privateMethod(this,_stopDrawing,stopDrawing_fn).call(this,event.offsetX,event.offsetY),this.canvas.removeEventListener("pointerleave",__privateGet(this,_boundCanvasPointerleave)),this.canvas.removeEventListener("pointermove",__privateGet(this,_boundCanvasPointermove)),this.parent.addToAnnotationStorage(this)},"#endDrawing"),_createCanvas=new WeakSet,createCanvas_fn=__name(function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",_InkEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(msg=>{var _a2;return(_a2=this.canvas)==null?void 0:_a2.setAttribute("aria-label",msg)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},"#createCanvas"),_createObserver=new WeakSet,createObserver_fn=__name(function(){__privateSet(this,_observer,new ResizeObserver(entries=>{const rect=entries[0].contentRect;rect.width&&rect.height&&this.setDimensions(rect.width,rect.height)})),__privateGet(this,_observer).observe(this.div)},"#createObserver"),_setCanvasDims=new WeakSet,setCanvasDims_fn=__name(function(){if(!__privateGet(this,_isCanvasInitialized))return;const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*parentWidth),this.canvas.height=Math.ceil(this.height*parentHeight),__privateMethod(this,_updateTransform,updateTransform_fn).call(this)},"#setCanvasDims"),_setScaleFactor=new WeakSet,setScaleFactor_fn=__name(function(width,height){const padding=__privateMethod(this,_getPadding,getPadding_fn).call(this),scaleFactorW=(width-padding)/__privateGet(this,_baseWidth),scaleFactorH=(height-padding)/__privateGet(this,_baseHeight);this.scaleFactor=Math.min(scaleFactorW,scaleFactorH)},"#setScaleFactor"),_updateTransform=new WeakSet,updateTransform_fn=__name(function(){const padding=__privateMethod(this,_getPadding,getPadding_fn).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+padding,this.translationY*this.scaleFactor+padding)},"#updateTransform"),_buildPath2D=new WeakSet,buildPath2D_fn=__name(function(bezier){const path2D=new Path2D;for(let i=0,ii=bezier.length;i<ii;i++){const[first,control1,control2,second]=bezier[i];i===0&&path2D.moveTo(...first),path2D.bezierCurveTo(control1[0],control1[1],control2[0],control2[1],second[0],second[1])}return path2D},"#buildPath2D"),_serializePaths=new WeakSet,serializePaths_fn=__name(function(s,tx,ty,h){const paths=[],padding=this.thickness/2;let buffer,points;for(const bezier of this.paths){buffer=[],points=[];for(let i=0,ii=bezier.length;i<ii;i++){const[first,control1,control2,second]=bezier[i],p10=s*(first[0]+tx)+padding,p11=h-s*(first[1]+ty)-padding,p20=s*(control1[0]+tx)+padding,p21=h-s*(control1[1]+ty)-padding,p30=s*(control2[0]+tx)+padding,p31=h-s*(control2[1]+ty)-padding,p40=s*(second[0]+tx)+padding,p41=h-s*(second[1]+ty)-padding;i===0&&(buffer.push(p10,p11),points.push(p10,p11)),buffer.push(p20,p21,p30,p31,p40,p41),__privateMethod(this,_extractPointsOnBezier,extractPointsOnBezier_fn).call(this,p10,p11,p20,p21,p30,p31,p40,p41,4,points)}paths.push({bezier:buffer,points})}return paths},"#serializePaths"),_extractPointsOnBezier=new WeakSet,extractPointsOnBezier_fn=__name(function(p10,p11,p20,p21,p30,p31,p40,p41,n,points){if(__privateMethod(this,_isAlmostFlat,isAlmostFlat_fn).call(this,p10,p11,p20,p21,p30,p31,p40,p41)){points.push(p40,p41);return}for(let i=1;i<n-1;i++){const t=i/n,mt=1-t;let q10=t*p10+mt*p20,q11=t*p11+mt*p21,q20=t*p20+mt*p30,q21=t*p21+mt*p31;const q30=t*p30+mt*p40,q31=t*p31+mt*p41;q10=t*q10+mt*q20,q11=t*q11+mt*q21,q20=t*q20+mt*q30,q21=t*q21+mt*q31,q10=t*q10+mt*q20,q11=t*q11+mt*q21,points.push(q10,q11)}points.push(p40,p41)},"#extractPointsOnBezier"),_isAlmostFlat=new WeakSet,isAlmostFlat_fn=__name(function(p10,p11,p20,p21,p30,p31,p40,p41){const ax=(3*p20-2*p10-p40)**2,ay=(3*p21-2*p11-p41)**2,bx=(3*p30-p10-2*p40)**2,by=(3*p31-p11-2*p41)**2;return Math.max(ax,bx)+Math.max(ay,by)<=10},"#isAlmostFlat"),_getBbox=new WeakSet,getBbox_fn=__name(function(){let xMin=1/0,xMax=-1/0,yMin=1/0,yMax=-1/0;for(const path of this.paths)for(const[first,control1,control2,second]of path){const bbox=_util2.Util.bezierBoundingBox(...first,...control1,...control2,...second);xMin=Math.min(xMin,bbox[0]),yMin=Math.min(yMin,bbox[1]),xMax=Math.max(xMax,bbox[2]),yMax=Math.max(yMax,bbox[3])}return[xMin,yMin,xMax,yMax]},"#getBbox"),_getPadding=new WeakSet,getPadding_fn=__name(function(){return __privateGet(this,_disableEditing)?Math.ceil(this.thickness*this.parent.scaleFactor):0},"#getPadding"),_fitToContent=new WeakSet,fitToContent_fn=__name(function(firstTime=!1){if(this.isEmpty())return;if(!__privateGet(this,_disableEditing)){__privateMethod(this,_redraw,redraw_fn).call(this);return}const bbox=__privateMethod(this,_getBbox,getBbox_fn).call(this),padding=__privateMethod(this,_getPadding,getPadding_fn).call(this);__privateSet(this,_baseWidth,Math.max(RESIZER_SIZE,bbox[2]-bbox[0])),__privateSet(this,_baseHeight,Math.max(RESIZER_SIZE,bbox[3]-bbox[1]));const width=Math.ceil(padding+__privateGet(this,_baseWidth)*this.scaleFactor),height=Math.ceil(padding+__privateGet(this,_baseHeight)*this.scaleFactor),[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.width=width/parentWidth,this.height=height/parentHeight,__privateSet(this,_aspectRatio,width/height),__privateMethod(this,_setMinDims,setMinDims_fn).call(this);const prevTranslationX=this.translationX,prevTranslationY=this.translationY;this.translationX=-bbox[0],this.translationY=-bbox[1],__privateMethod(this,_setCanvasDims,setCanvasDims_fn).call(this),__privateMethod(this,_redraw,redraw_fn).call(this),__privateSet(this,_realWidth,width),__privateSet(this,_realHeight,height),this.setDims(width,height);const unscaledPadding=firstTime?padding/this.scaleFactor/2:0;this.translate(prevTranslationX-this.translationX-unscaledPadding,prevTranslationY-this.translationY-unscaledPadding)},"#fitToContent"),_setMinDims=new WeakSet,setMinDims_fn=__name(function(){const{style}=this.div;__privateGet(this,_aspectRatio)>=1?(style.minHeight=`${RESIZER_SIZE}px`,style.minWidth=`${Math.round(__privateGet(this,_aspectRatio)*RESIZER_SIZE)}px`):(style.minWidth=`${RESIZER_SIZE}px`,style.minHeight=`${Math.round(RESIZER_SIZE/__privateGet(this,_aspectRatio))}px`)},"#setMinDims"),__privateAdd(_InkEditor,_buildPath2D),__name(_InkEditor,"InkEditor"),__publicField(_InkEditor,"_defaultColor",null),__publicField(_InkEditor,"_defaultOpacity",1),__publicField(_InkEditor,"_defaultThickness",1),__publicField(_InkEditor,"_l10nPromise"),__publicField(_InkEditor,"_type","ink");let InkEditor=_InkEditor;exports2.InkEditor=InkEditor},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.fitCurve=void 0;const fitCurve=__w_pdfjs_require__2(26);exports2.fitCurve=fitCurve},module2=>{function fitCurve(points,maxError,progressCallback){if(!Array.isArray(points))throw new TypeError("First argument should be an array");if(points.forEach(point=>{if(!Array.isArray(point)||point.some(item=>typeof item!="number")||point.length!==points[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),points=points.filter((point,i)=>i===0||!point.every((val,j)=>val===points[i-1][j])),points.length<2)return[];const len=points.length,leftTangent=createTangent(points[1],points[0]),rightTangent=createTangent(points[len-2],points[len-1]);return fitCubic(points,leftTangent,rightTangent,maxError,progressCallback)}__name2(fitCurve,"fitCurve"),__name(fitCurve,"fitCurve");function fitCubic(points,leftTangent,rightTangent,error,progressCallback){var bezCurve,u,uPrime,maxError,prevErr,splitPoint,prevSplit,centerVector,toCenterTangent,fromCenterTangent,beziers,dist,i;if(points.length===2)return dist=maths.vectorLen(maths.subtract(points[0],points[1]))/3,bezCurve=[points[0],maths.addArrays(points[0],maths.mulItems(leftTangent,dist)),maths.addArrays(points[1],maths.mulItems(rightTangent,dist)),points[1]],[bezCurve];if(u=chordLengthParameterize(points),[bezCurve,maxError,splitPoint]=generateAndReport(points,u,u,leftTangent,rightTangent,progressCallback),maxError===0||maxError<error)return[bezCurve];if(maxError<error*error)for(uPrime=u,prevErr=maxError,prevSplit=splitPoint,i=0;i<20;i++){if(uPrime=reparameterize(bezCurve,points,uPrime),[bezCurve,maxError,splitPoint]=generateAndReport(points,u,uPrime,leftTangent,rightTangent,progressCallback),maxError<error)return[bezCurve];if(splitPoint===prevSplit){let errChange=maxError/prevErr;if(errChange>.9999&&errChange<1.0001)break}prevErr=maxError,prevSplit=splitPoint}return beziers=[],centerVector=maths.subtract(points[splitPoint-1],points[splitPoint+1]),centerVector.every(val=>val===0)&&(centerVector=maths.subtract(points[splitPoint-1],points[splitPoint]),[centerVector[0],centerVector[1]]=[-centerVector[1],centerVector[0]]),toCenterTangent=maths.normalize(centerVector),fromCenterTangent=maths.mulItems(toCenterTangent,-1),beziers=beziers.concat(fitCubic(points.slice(0,splitPoint+1),leftTangent,toCenterTangent,error,progressCallback)),beziers=beziers.concat(fitCubic(points.slice(splitPoint),fromCenterTangent,rightTangent,error,progressCallback)),beziers}__name2(fitCubic,"fitCubic"),__name(fitCubic,"fitCubic");function generateAndReport(points,paramsOrig,paramsPrime,leftTangent,rightTangent,progressCallback){var bezCurve,maxError,splitPoint;return bezCurve=generateBezier(points,paramsPrime,leftTangent,rightTangent),[maxError,splitPoint]=computeMaxError(points,bezCurve,paramsOrig),progressCallback&&progressCallback({bez:bezCurve,points,params:paramsOrig,maxErr:maxError,maxPoint:splitPoint}),[bezCurve,maxError,splitPoint]}__name2(generateAndReport,"generateAndReport"),__name(generateAndReport,"generateAndReport");function generateBezier(points,parameters,leftTangent,rightTangent){var bezCurve,A,a,C,X,det_C0_C1,det_C0_X,det_X_C1,alpha_l,alpha_r,epsilon,segLength,i,len,tmp,u,ux,firstPoint=points[0],lastPoint=points[points.length-1];for(bezCurve=[firstPoint,null,null,lastPoint],A=maths.zeros_Xx2x2(parameters.length),i=0,len=parameters.length;i<len;i++)u=parameters[i],ux=1-u,a=A[i],a[0]=maths.mulItems(leftTangent,3*u*(ux*ux)),a[1]=maths.mulItems(rightTangent,3*ux*(u*u));for(C=[[0,0],[0,0]],X=[0,0],i=0,len=points.length;i<len;i++)u=parameters[i],a=A[i],C[0][0]+=maths.dot(a[0],a[0]),C[0][1]+=maths.dot(a[0],a[1]),C[1][0]+=maths.dot(a[0],a[1]),C[1][1]+=maths.dot(a[1],a[1]),tmp=maths.subtract(points[i],bezier.q([firstPoint,firstPoint,lastPoint,lastPoint],u)),X[0]+=maths.dot(a[0],tmp),X[1]+=maths.dot(a[1],tmp);return det_C0_C1=C[0][0]*C[1][1]-C[1][0]*C[0][1],det_C0_X=C[0][0]*X[1]-C[1][0]*X[0],det_X_C1=X[0]*C[1][1]-X[1]*C[0][1],alpha_l=det_C0_C1===0?0:det_X_C1/det_C0_C1,alpha_r=det_C0_C1===0?0:det_C0_X/det_C0_C1,segLength=maths.vectorLen(maths.subtract(firstPoint,lastPoint)),epsilon=1e-6*segLength,alpha_l<epsilon||alpha_r<epsilon?(bezCurve[1]=maths.addArrays(firstPoint,maths.mulItems(leftTangent,segLength/3)),bezCurve[2]=maths.addArrays(lastPoint,maths.mulItems(rightTangent,segLength/3))):(bezCurve[1]=maths.addArrays(firstPoint,maths.mulItems(leftTangent,alpha_l)),bezCurve[2]=maths.addArrays(lastPoint,maths.mulItems(rightTangent,alpha_r))),bezCurve}__name2(generateBezier,"generateBezier"),__name(generateBezier,"generateBezier");function reparameterize(bezier2,points,parameters){return parameters.map((p,i)=>newtonRaphsonRootFind(bezier2,points[i],p))}__name2(reparameterize,"reparameterize"),__name(reparameterize,"reparameterize");function newtonRaphsonRootFind(bez,point,u){var d=maths.subtract(bezier.q(bez,u),point),qprime=bezier.qprime(bez,u),numerator=maths.mulMatrix(d,qprime),denominator=maths.sum(maths.squareItems(qprime))+2*maths.mulMatrix(d,bezier.qprimeprime(bez,u));return denominator===0?u:u-numerator/denominator}__name2(newtonRaphsonRootFind,"newtonRaphsonRootFind"),__name(newtonRaphsonRootFind,"newtonRaphsonRootFind");function chordLengthParameterize(points){var u=[],currU,prevU,prevP;return points.forEach((p,i)=>{currU=i?prevU+maths.vectorLen(maths.subtract(p,prevP)):0,u.push(currU),prevU=currU,prevP=p}),u=u.map(x=>x/prevU),u}__name2(chordLengthParameterize,"chordLengthParameterize"),__name(chordLengthParameterize,"chordLengthParameterize");function computeMaxError(points,bez,parameters){var dist,maxDist,splitPoint,v,i,count,point,t;maxDist=0,splitPoint=Math.floor(points.length/2);const t_distMap=mapTtoRelativeDistances(bez,10);for(i=0,count=points.length;i<count;i++)point=points[i],t=find_t(bez,parameters[i],t_distMap,10),v=maths.subtract(bezier.q(bez,t),point),dist=v[0]*v[0]+v[1]*v[1],dist>maxDist&&(maxDist=dist,splitPoint=i);return[maxDist,splitPoint]}__name2(computeMaxError,"computeMaxError"),__name(computeMaxError,"computeMaxError");var mapTtoRelativeDistances=__name(function(bez,B_parts){for(var B_t_curr,B_t_dist=[0],B_t_prev=bez[0],sumLen=0,i=1;i<=B_parts;i++)B_t_curr=bezier.q(bez,i/B_parts),sumLen+=maths.vectorLen(maths.subtract(B_t_curr,B_t_prev)),B_t_dist.push(sumLen),B_t_prev=B_t_curr;return B_t_dist=B_t_dist.map(x=>x/sumLen),B_t_dist},"mapTtoRelativeDistances");function find_t(bez,param,t_distMap,B_parts){if(param<0)return 0;if(param>1)return 1;for(var lenMax,lenMin,tMax,tMin,t,i=1;i<=B_parts;i++)if(param<=t_distMap[i]){tMin=(i-1)/B_parts,tMax=i/B_parts,lenMin=t_distMap[i-1],lenMax=t_distMap[i],t=(param-lenMin)/(lenMax-lenMin)*(tMax-tMin)+tMin;break}return t}__name2(find_t,"find_t"),__name(find_t,"find_t");function createTangent(pointA,pointB){return maths.normalize(maths.subtract(pointA,pointB))}__name2(createTangent,"createTangent"),__name(createTangent,"createTangent");const _maths=class _maths2{static{__name2(this,"_maths")}static zeros_Xx2x2(x){for(var zs=[];x--;)zs.push([0,0]);return zs}static mulItems(items,multiplier){return items.map(x=>x*multiplier)}static mulMatrix(m1,m2){return m1.reduce((sum,x1,i)=>sum+x1*m2[i],0)}static subtract(arr1,arr2){return arr1.map((x1,i)=>x1-arr2[i])}static addArrays(arr1,arr2){return arr1.map((x1,i)=>x1+arr2[i])}static addItems(items,addition){return items.map(x=>x+addition)}static sum(items){return items.reduce((sum,x)=>sum+x)}static dot(m1,m2){return _maths2.mulMatrix(m1,m2)}static vectorLen(v){return Math.hypot(...v)}static divItems(items,divisor){return items.map(x=>x/divisor)}static squareItems(items){return items.map(x=>x*x)}static normalize(v){return this.divItems(v,this.vectorLen(v))}};__name(_maths,"maths");let maths=_maths;const _bezier=class{static{__name2(this,"_bezier")}static q(ctrlPoly,t){var tx=1-t,pA=maths.mulItems(ctrlPoly[0],tx*tx*tx),pB=maths.mulItems(ctrlPoly[1],3*tx*tx*t),pC=maths.mulItems(ctrlPoly[2],3*tx*t*t),pD=maths.mulItems(ctrlPoly[3],t*t*t);return maths.addArrays(maths.addArrays(pA,pB),maths.addArrays(pC,pD))}static qprime(ctrlPoly,t){var tx=1-t,pA=maths.mulItems(maths.subtract(ctrlPoly[1],ctrlPoly[0]),3*tx*tx),pB=maths.mulItems(maths.subtract(ctrlPoly[2],ctrlPoly[1]),6*tx*t),pC=maths.mulItems(maths.subtract(ctrlPoly[3],ctrlPoly[2]),3*t*t);return maths.addArrays(maths.addArrays(pA,pB),pC)}static qprimeprime(ctrlPoly,t){return maths.addArrays(maths.mulItems(maths.addArrays(maths.subtract(ctrlPoly[2],maths.mulItems(ctrlPoly[1],2)),ctrlPoly[0]),6*(1-t)),maths.mulItems(maths.addArrays(maths.subtract(ctrlPoly[3],maths.mulItems(ctrlPoly[2],2)),ctrlPoly[1]),6*t))}};__name(_bezier,"bezier");let bezier=_bezier;module2.exports=fitCurve,module2.exports.fitCubic=fitCubic,module2.exports.createTangent=createTangent},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _appendElement,appendElement_fn,_setDimensions,setDimensions_fn,_setAnnotationCanvasMap,setAnnotationCanvasMap_fn;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.AnnotationLayer=void 0;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(8),_annotation_storage2=__w_pdfjs_require__2(5),_scripting_utils=__w_pdfjs_require__2(28),_xfa_layer=__w_pdfjs_require__2(29);const DEFAULT_TAB_INDEX=1e3,DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet;function getRectDims(rect){return{width:rect[2]-rect[0],height:rect[3]-rect[1]}}__name2(getRectDims,"getRectDims"),__name(getRectDims,"getRectDims");const _AnnotationElementFactory=class{static{__name2(this,"_AnnotationElementFactory")}static create(parameters){switch(parameters.data.annotationType){case _util2.AnnotationType.LINK:return new LinkAnnotationElement(parameters);case _util2.AnnotationType.TEXT:return new TextAnnotationElement(parameters);case _util2.AnnotationType.WIDGET:switch(parameters.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(parameters);case"Btn":return parameters.data.radioButton?new RadioButtonWidgetAnnotationElement(parameters):parameters.data.checkBox?new CheckboxWidgetAnnotationElement(parameters):new PushButtonWidgetAnnotationElement(parameters);case"Ch":return new ChoiceWidgetAnnotationElement(parameters)}return new WidgetAnnotationElement(parameters);case _util2.AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case _util2.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(parameters);case _util2.AnnotationType.LINE:return new LineAnnotationElement(parameters);case _util2.AnnotationType.SQUARE:return new SquareAnnotationElement(parameters);case _util2.AnnotationType.CIRCLE:return new CircleAnnotationElement(parameters);case _util2.AnnotationType.POLYLINE:return new PolylineAnnotationElement(parameters);case _util2.AnnotationType.CARET:return new CaretAnnotationElement(parameters);case _util2.AnnotationType.INK:return new InkAnnotationElement(parameters);case _util2.AnnotationType.POLYGON:return new PolygonAnnotationElement(parameters);case _util2.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case _util2.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case _util2.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case _util2.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case _util2.AnnotationType.STAMP:return new StampAnnotationElement(parameters);case _util2.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters)}}};__name(_AnnotationElementFactory,"AnnotationElementFactory");let AnnotationElementFactory=_AnnotationElementFactory;const _AnnotationElement=class{static{__name2(this,"_AnnotationElement")}constructor(parameters,{isRenderable=!1,ignoreBorder=!1,createQuadrilaterals=!1}={}){this.isRenderable=isRenderable,this.data=parameters.data,this.layer=parameters.layer,this.page=parameters.page,this.viewport=parameters.viewport,this.linkService=parameters.linkService,this.downloadManager=parameters.downloadManager,this.imageResourcesPath=parameters.imageResourcesPath,this.renderForms=parameters.renderForms,this.svgFactory=parameters.svgFactory,this.annotationStorage=parameters.annotationStorage,this.enableScripting=parameters.enableScripting,this.hasJSActions=parameters.hasJSActions,this._fieldObjects=parameters.fieldObjects,this._mouseState=parameters.mouseState,isRenderable&&(this.container=this._createContainer(ignoreBorder)),createQuadrilaterals&&(this.quadrilaterals=this._createQuadrilaterals(ignoreBorder))}_createContainer(ignoreBorder=!1){const data=this.data,page=this.page,viewport=this.viewport,container=document.createElement("section"),{width,height}=getRectDims(data.rect),[pageLLx,pageLLy,pageURx,pageURy]=viewport.viewBox,pageWidth=pageURx-pageLLx,pageHeight=pageURy-pageLLy;container.setAttribute("data-annotation-id",data.id);const rect=_util2.Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);if(!ignoreBorder&&data.borderStyle.width>0){container.style.borderWidth=`${data.borderStyle.width}px`;const horizontalRadius=data.borderStyle.horizontalCornerRadius,verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){const radius=`calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;container.style.borderRadius=radius}else if(this instanceof RadioButtonWidgetAnnotationElement){const radius=`calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;container.style.borderRadius=radius}switch(data.borderStyle.style){case _util2.AnnotationBorderStyleType.SOLID:container.style.borderStyle="solid";break;case _util2.AnnotationBorderStyleType.DASHED:container.style.borderStyle="dashed";break;case _util2.AnnotationBorderStyleType.BEVELED:(0,_util2.warn)("Unimplemented border style: beveled");break;case _util2.AnnotationBorderStyleType.INSET:(0,_util2.warn)("Unimplemented border style: inset");break;case _util2.AnnotationBorderStyleType.UNDERLINE:container.style.borderBottomStyle="solid";break}const borderColor=data.borderColor||null;borderColor?container.style.borderColor=_util2.Util.makeHexColor(borderColor[0]|0,borderColor[1]|0,borderColor[2]|0):container.style.borderWidth=0}container.style.left=`${100*(rect[0]-pageLLx)/pageWidth}%`,container.style.top=`${100*(rect[1]-pageLLy)/pageHeight}%`;const{rotation}=data;return data.hasOwnCanvas||rotation===0?(container.style.width=`${100*width/pageWidth}%`,container.style.height=`${100*height/pageHeight}%`):this.setRotation(rotation,container),container}setRotation(angle,container=this.container){const[pageLLx,pageLLy,pageURx,pageURy]=this.viewport.viewBox,pageWidth=pageURx-pageLLx,pageHeight=pageURy-pageLLy,{width,height}=getRectDims(this.data.rect);let elementWidth,elementHeight;angle%180===0?(elementWidth=100*width/pageWidth,elementHeight=100*height/pageHeight):(elementWidth=100*height/pageWidth,elementHeight=100*width/pageHeight),container.style.width=`${elementWidth}%`,container.style.height=`${elementHeight}%`,container.setAttribute("data-main-rotation",(360-angle)%360)}get _commonActions(){const setColor=__name((jsName,styleName,event)=>{const color=event.detail[jsName];event.target.style[styleName]=_scripting_utils.ColorConverters[`${color[0]}_HTML`](color.slice(1))},"setColor");return(0,_util2.shadow)(this,"_commonActions",{display:event=>{const hidden=event.detail.display%2===1;this.container.style.visibility=hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden,print:event.detail.display===0||event.detail.display===3})},print:event=>{this.annotationStorage.setValue(this.data.id,{print:event.detail.print})},hidden:event=>{this.container.style.visibility=event.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:event.detail.hidden})},focus:event=>{setTimeout(()=>event.target.focus({preventScroll:!1}),0)},userName:event=>{event.target.title=event.detail.userName},readonly:event=>{event.detail.readonly?event.target.setAttribute("readonly",""):event.target.removeAttribute("readonly")},required:event=>{this._setRequired(event.target,event.detail.required)},bgColor:event=>{setColor("bgColor","backgroundColor",event)},fillColor:event=>{setColor("fillColor","backgroundColor",event)},fgColor:event=>{setColor("fgColor","color",event)},textColor:event=>{setColor("textColor","color",event)},borderColor:event=>{setColor("borderColor","borderColor",event)},strokeColor:event=>{setColor("strokeColor","borderColor",event)},rotation:event=>{const angle=event.detail.rotation;this.setRotation(angle),this.annotationStorage.setValue(this.data.id,{rotation:angle})}})}_dispatchEventFromSandbox(actions,jsEvent){const commonActions=this._commonActions;for(const name of Object.keys(jsEvent.detail)){const action=actions[name]||commonActions[name];action&&action(jsEvent)}}_setDefaultPropertiesFromJS(element){if(!this.enableScripting)return;const storedData=this.annotationStorage.getRawValue(this.data.id);if(!storedData)return;const commonActions=this._commonActions;for(const[actionName,detail]of Object.entries(storedData)){const action=commonActions[actionName];if(action){const eventProxy={detail:{[actionName]:detail},target:element};action(eventProxy),delete storedData[actionName]}}}_createQuadrilaterals(ignoreBorder=!1){if(!this.data.quadPoints)return null;const quadrilaterals=[],savedRect=this.data.rect;for(const quadPoint of this.data.quadPoints)this.data.rect=[quadPoint[2].x,quadPoint[2].y,quadPoint[1].x,quadPoint[1].y],quadrilaterals.push(this._createContainer(ignoreBorder));return this.data.rect=savedRect,quadrilaterals}_createPopup(trigger,data){let container=this.container;this.quadrilaterals&&(trigger=trigger||this.quadrilaterals,container=this.quadrilaterals[0]),trigger||(trigger=document.createElement("div"),trigger.className="popupTriggerArea",container.append(trigger));const popup=new PopupElement({container,trigger,color:data.color,titleObj:data.titleObj,modificationDate:data.modificationDate,contentsObj:data.contentsObj,richText:data.richText,hideWrapper:!0}).render();popup.style.left="100%",container.append(popup)}_renderQuadrilaterals(className){for(const quadrilateral of this.quadrilaterals)quadrilateral.className=className;return this.quadrilaterals}render(){(0,_util2.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(name,skipId=null){const fields=[];if(this._fieldObjects){const fieldObj=this._fieldObjects[name];if(fieldObj)for(const{page,id,exportValues}of fieldObj){if(page===-1||id===skipId)continue;const exportValue=typeof exportValues=="string"?exportValues:null,domElement=document.querySelector(`[data-element-id="${id}"]`);if(domElement&&!GetElementsByNameSet.has(domElement)){(0,_util2.warn)(`_getElementsByName - element not allowed: ${id}`);continue}fields.push({id,exportValue,domElement})}return fields}for(const domElement of document.getElementsByName(name)){const{id,exportValue}=domElement;id!==skipId&&GetElementsByNameSet.has(domElement)&&fields.push({id,exportValue,domElement})}return fields}static get platform(){const platform=typeof navigator<"u"?navigator.platform:"";return(0,_util2.shadow)(this,"platform",{isWin:platform.includes("Win"),isMac:platform.includes("Mac")})}};__name(_AnnotationElement,"AnnotationElement");let AnnotationElement=_AnnotationElement;const _LinkAnnotationElement=class extends AnnotationElement{static{__name2(this,"_LinkAnnotationElement")}constructor(parameters,options=null){super(parameters,{isRenderable:!0,ignoreBorder:!!options?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=parameters.data.isTooltipOnly}render(){const{data,linkService}=this,link=document.createElement("a");link.setAttribute("data-element-id",data.id);let isBound=!1;return data.url?(linkService.addLinkAttributes(link,data.url,data.newWindow),isBound=!0):data.action?(this._bindNamedAction(link,data.action),isBound=!0):data.dest?(this._bindLink(link,data.dest),isBound=!0):(data.actions&&(data.actions.Action||data.actions["Mouse Up"]||data.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(link,data),isBound=!0),data.resetForm?(this._bindResetFormAction(link,data.resetForm),isBound=!0):this.isTooltipOnly&&!isBound&&(this._bindLink(link,""),isBound=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((quadrilateral,index)=>{const linkElement=index===0?link:link.cloneNode();return quadrilateral.append(linkElement),quadrilateral}):(this.container.className="linkAnnotation",isBound&&this.container.append(link),this.container)}_bindLink(link,destination){link.href=this.linkService.getDestinationHash(destination),link.onclick=()=>(destination&&this.linkService.goToDestination(destination),!1),(destination||destination==="")&&(link.className="internalLink")}_bindNamedAction(link,action){link.href=this.linkService.getAnchorUrl(""),link.onclick=()=>(this.linkService.executeNamedAction(action),!1),link.className="internalLink"}_bindJSAction(link,data){link.href=this.linkService.getAnchorUrl("");const map=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const name of Object.keys(data.actions)){const jsName=map.get(name);jsName&&(link[jsName]=()=>{var _a2;return(_a2=this.linkService.eventBus)==null||_a2.dispatch("dispatcheventinsandbox",{source:this,detail:{id:data.id,name}}),!1})}link.onclick||(link.onclick=()=>!1),link.className="internalLink"}_bindResetFormAction(link,resetForm){const otherClickAction=link.onclick;if(otherClickAction||(link.href=this.linkService.getAnchorUrl("")),link.className="internalLink",!this._fieldObjects){(0,_util2.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),otherClickAction||(link.onclick=()=>!1);return}link.onclick=()=>{var _a2;otherClickAction&&otherClickAction();const{fields:resetFormFields,refs:resetFormRefs,include}=resetForm,allFields=[];if(resetFormFields.length!==0||resetFormRefs.length!==0){const fieldIds=new Set(resetFormRefs);for(const fieldName of resetFormFields){const fields=this._fieldObjects[fieldName]||[];for(const{id}of fields)fieldIds.add(id)}for(const fields of Object.values(this._fieldObjects))for(const field of fields)fieldIds.has(field.id)===include&&allFields.push(field)}else for(const fields of Object.values(this._fieldObjects))allFields.push(...fields);const storage=this.annotationStorage,allIds=[];for(const field of allFields){const{id}=field;switch(allIds.push(id),field.type){case"text":{const value=field.defaultValue||"";storage.setValue(id,{value});break}case"checkbox":case"radiobutton":{const value=field.defaultValue===field.exportValues;storage.setValue(id,{value});break}case"combobox":case"listbox":{const value=field.defaultValue||"";storage.setValue(id,{value});break}default:continue}const domElement=document.querySelector(`[data-element-id="${id}"]`);if(domElement){if(!GetElementsByNameSet.has(domElement)){(0,_util2.warn)(`_bindResetFormAction - element not allowed: ${id}`);continue}}else continue;domElement.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((_a2=this.linkService.eventBus)==null||_a2.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:allIds,name:"ResetForm"}})),!1}}};__name(_LinkAnnotationElement,"LinkAnnotationElement");let LinkAnnotationElement=_LinkAnnotationElement;const _TextAnnotationElement=class extends AnnotationElement{static{__name2(this,"_TextAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!(parameters.data.hasPopup||(_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable})}render(){this.container.className="textAnnotation";const image=document.createElement("img");return image.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",image.alt="[{{type}} Annotation]",image.dataset.l10nId="text_annotation_type",image.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(image,this.data),this.container.append(image),this.container}};__name(_TextAnnotationElement,"TextAnnotationElement");let TextAnnotationElement=_TextAnnotationElement;const _WidgetAnnotationElement=class extends AnnotationElement{static{__name2(this,"_WidgetAnnotationElement")}render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(event){const{isWin,isMac}=AnnotationElement.platform;return isWin&&event.ctrlKey||isMac&&event.metaKey}_setEventListener(element,baseName,eventName,valueGetter){baseName.includes("mouse")?element.addEventListener(baseName,event=>{var _a2;(_a2=this.linkService.eventBus)==null||_a2.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event),shift:event.shiftKey,modifier:this._getKeyModifier(event)}})}):element.addEventListener(baseName,event=>{var _a2;(_a2=this.linkService.eventBus)==null||_a2.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event)}})})}_setEventListeners(element,names,getter){var _a2;for(const[baseName,eventName]of names)(eventName==="Action"||(_a2=this.data.actions)!=null&&_a2[eventName])&&this._setEventListener(element,baseName,eventName,getter)}_setBackgroundColor(element){const color=this.data.backgroundColor||null;element.style.backgroundColor=color===null?"transparent":_util2.Util.makeHexColor(color[0],color[1],color[2])}_setTextStyle(element){const TEXT_ALIGNMENT=["left","center","right"],{fontColor}=this.data.defaultAppearanceData,fontSize=this.data.defaultAppearanceData.fontSize||DEFAULT_FONT_SIZE,style=element.style;let computedFontSize;if(this.data.multiLine){const height=Math.abs(this.data.rect[3]-this.data.rect[1]),numberOfLines=Math.round(height/(_util2.LINE_FACTOR*fontSize))||1,lineHeight=height/numberOfLines;computedFontSize=Math.min(fontSize,Math.round(lineHeight/_util2.LINE_FACTOR))}else{const height=Math.abs(this.data.rect[3]-this.data.rect[1]);computedFontSize=Math.min(fontSize,Math.round(height/_util2.LINE_FACTOR))}style.fontSize=`calc(${computedFontSize}px * var(--scale-factor))`,style.color=_util2.Util.makeHexColor(fontColor[0],fontColor[1],fontColor[2]),this.data.textAlignment!==null&&(style.textAlign=TEXT_ALIGNMENT[this.data.textAlignment])}_setRequired(element,isRequired){isRequired?element.setAttribute("required",!0):element.removeAttribute("required"),element.setAttribute("aria-required",isRequired)}};__name(_WidgetAnnotationElement,"WidgetAnnotationElement");let WidgetAnnotationElement=_WidgetAnnotationElement;const _TextWidgetAnnotationElement=class extends WidgetAnnotationElement{static{__name2(this,"_TextWidgetAnnotationElement")}constructor(parameters){const isRenderable=parameters.renderForms||!parameters.data.hasAppearance&&!!parameters.data.fieldValue;super(parameters,{isRenderable})}setPropertyOnSiblings(base,key,value,keyInStorage){const storage=this.annotationStorage;for(const element of this._getElementsByName(base.name,base.id))element.domElement&&(element.domElement[key]=value),storage.setValue(element.id,{[keyInStorage]:value})}render(){var _a2;const storage=this.annotationStorage,id=this.data.id;this.container.className="textWidgetAnnotation";let element=null;if(this.renderForms){const storedData=storage.getValue(id,{value:this.data.fieldValue});let textContent=storedData.formattedValue||storedData.value||"";const maxLen=storage.getValue(id,{charLimit:this.data.maxLen}).charLimit;maxLen&&textContent.length>maxLen&&(textContent=textContent.slice(0,maxLen));const elementData={userValue:textContent,formattedValue:null,valueOnFocus:""};this.data.multiLine?(element=document.createElement("textarea"),element.textContent=textContent,this.data.doNotScroll&&(element.style.overflowY="hidden")):(element=document.createElement("input"),element.type="text",element.setAttribute("value",textContent),this.data.doNotScroll&&(element.style.overflowX="hidden")),GetElementsByNameSet.add(element),element.setAttribute("data-element-id",id),element.disabled=this.data.readOnly,element.name=this.data.fieldName,element.tabIndex=DEFAULT_TAB_INDEX,this._setRequired(element,this.data.required),maxLen&&(element.maxLength=maxLen),element.addEventListener("input",event=>{storage.setValue(id,{value:event.target.value}),this.setPropertyOnSiblings(element,"value",event.target.value,"value")}),element.addEventListener("resetform",event=>{const defaultValue=this.data.defaultFieldValue??"";element.value=elementData.userValue=defaultValue,elementData.formattedValue=null});let blurListener=__name(event=>{const{formattedValue}=elementData;formattedValue!=null&&(event.target.value=formattedValue),event.target.scrollLeft=0},"blurListener");if(this.enableScripting&&this.hasJSActions){element.addEventListener("focus",event=>{elementData.userValue&&(event.target.value=elementData.userValue),elementData.valueOnFocus=event.target.value}),element.addEventListener("updatefromsandbox",jsEvent=>{const actions={value(event){elementData.userValue=event.detail.value??"",storage.setValue(id,{value:elementData.userValue.toString()}),event.target.value=elementData.userValue},formattedValue(event){const{formattedValue}=event.detail;elementData.formattedValue=formattedValue,formattedValue!=null&&event.target!==document.activeElement&&(event.target.value=formattedValue),storage.setValue(id,{formattedValue})},selRange(event){event.target.setSelectionRange(...event.detail.selRange)},charLimit:event=>{var _a22;const{charLimit}=event.detail,{target}=event;if(charLimit===0){target.removeAttribute("maxLength");return}target.setAttribute("maxLength",charLimit);let value=elementData.userValue;!value||value.length<=charLimit||(value=value.slice(0,charLimit),target.value=elementData.userValue=value,storage.setValue(id,{value}),(_a22=this.linkService.eventBus)==null||_a22.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,willCommit:!0,commitKey:1,selStart:target.selectionStart,selEnd:target.selectionEnd}}))}};this._dispatchEventFromSandbox(actions,jsEvent)}),element.addEventListener("keydown",event=>{var _a22;let commitKey=-1;if(event.key==="Escape"?commitKey=0:event.key==="Enter"?commitKey=2:event.key==="Tab"&&(commitKey=3),commitKey===-1)return;const{value}=event.target;elementData.valueOnFocus!==value&&(elementData.userValue=value,(_a22=this.linkService.eventBus)==null||_a22.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,willCommit:!0,commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}}))});const _blurListener=blurListener;blurListener=null,element.addEventListener("blur",event=>{var _a22;const{value}=event.target;elementData.userValue=value,this._mouseState.isDown&&elementData.valueOnFocus!==value&&((_a22=this.linkService.eventBus)==null||_a22.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,willCommit:!0,commitKey:1,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}})),_blurListener(event)}),(_a2=this.data.actions)!=null&&_a2.Keystroke&&element.addEventListener("beforeinput",event=>{var _a22;const{data,target}=event,{value,selectionStart,selectionEnd}=target;let selStart=selectionStart,selEnd=selectionEnd;switch(event.inputType){case"deleteWordBackward":{const match=value.substring(0,selectionStart).match(/\w*[^\w]*$/);match&&(selStart-=match[0].length);break}case"deleteWordForward":{const match=value.substring(selectionStart).match(/^[^\w]*\w*/);match&&(selEnd+=match[0].length);break}case"deleteContentBackward":selectionStart===selectionEnd&&(selStart-=1);break;case"deleteContentForward":selectionStart===selectionEnd&&(selEnd+=1);break}event.preventDefault(),(_a22=this.linkService.eventBus)==null||_a22.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,change:data||"",willCommit:!1,selStart,selEnd}})}),this._setEventListeners(element,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],event=>event.target.value)}if(blurListener&&element.addEventListener("blur",blurListener),this.data.comb){const combWidth=(this.data.rect[2]-this.data.rect[0])/maxLen;element.classList.add("comb"),element.style.letterSpacing=`calc(${combWidth}px * var(--scale-factor) - 1ch)`}}else element=document.createElement("div"),element.textContent=this.data.fieldValue,element.style.verticalAlign="middle",element.style.display="table-cell";return this._setTextStyle(element),this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}};__name(_TextWidgetAnnotationElement,"TextWidgetAnnotationElement");let TextWidgetAnnotationElement=_TextWidgetAnnotationElement;const _CheckboxWidgetAnnotationElement=class extends WidgetAnnotationElement{static{__name2(this,"_CheckboxWidgetAnnotationElement")}constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){const storage=this.annotationStorage,data=this.data,id=data.id;let value=storage.getValue(id,{value:data.exportValue===data.fieldValue}).value;typeof value=="string"&&(value=value!=="Off",storage.setValue(id,{value})),this.container.className="buttonWidgetAnnotation checkBox";const element=document.createElement("input");return GetElementsByNameSet.add(element),element.setAttribute("data-element-id",id),element.disabled=data.readOnly,this._setRequired(element,this.data.required),element.type="checkbox",element.name=data.fieldName,value&&element.setAttribute("checked",!0),element.setAttribute("exportValue",data.exportValue),element.tabIndex=DEFAULT_TAB_INDEX,element.addEventListener("change",event=>{const{name,checked}=event.target;for(const checkbox of this._getElementsByName(name,id)){const curChecked=checked&&checkbox.exportValue===data.exportValue;checkbox.domElement&&(checkbox.domElement.checked=curChecked),storage.setValue(checkbox.id,{value:curChecked})}storage.setValue(id,{value:checked})}),element.addEventListener("resetform",event=>{const defaultValue=data.defaultFieldValue||"Off";event.target.checked=defaultValue===data.exportValue}),this.enableScripting&&this.hasJSActions&&(element.addEventListener("updatefromsandbox",jsEvent=>{const actions={value(event){event.target.checked=event.detail.value!=="Off",storage.setValue(id,{value:event.target.checked})}};this._dispatchEventFromSandbox(actions,jsEvent)}),this._setEventListeners(element,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],event=>event.target.checked)),this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}};__name(_CheckboxWidgetAnnotationElement,"CheckboxWidgetAnnotationElement");let CheckboxWidgetAnnotationElement=_CheckboxWidgetAnnotationElement;const _RadioButtonWidgetAnnotationElement=class extends WidgetAnnotationElement{static{__name2(this,"_RadioButtonWidgetAnnotationElement")}constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const storage=this.annotationStorage,data=this.data,id=data.id;let value=storage.getValue(id,{value:data.fieldValue===data.buttonValue}).value;typeof value=="string"&&(value=value!==data.buttonValue,storage.setValue(id,{value}));const element=document.createElement("input");if(GetElementsByNameSet.add(element),element.setAttribute("data-element-id",id),element.disabled=data.readOnly,this._setRequired(element,this.data.required),element.type="radio",element.name=data.fieldName,value&&element.setAttribute("checked",!0),element.tabIndex=DEFAULT_TAB_INDEX,element.addEventListener("change",event=>{const{name,checked}=event.target;for(const radio of this._getElementsByName(name,id))storage.setValue(radio.id,{value:!1});storage.setValue(id,{value:checked})}),element.addEventListener("resetform",event=>{const defaultValue=data.defaultFieldValue;event.target.checked=defaultValue!=null&&defaultValue===data.buttonValue}),this.enableScripting&&this.hasJSActions){const pdfButtonValue=data.buttonValue;element.addEventListener("updatefromsandbox",jsEvent=>{const actions={value:event=>{const checked=pdfButtonValue===event.detail.value;for(const radio of this._getElementsByName(event.target.name)){const curChecked=checked&&radio.id===id;radio.domElement&&(radio.domElement.checked=curChecked),storage.setValue(radio.id,{value:curChecked})}}};this._dispatchEventFromSandbox(actions,jsEvent)}),this._setEventListeners(element,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],event=>event.target.checked)}return this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}};__name(_RadioButtonWidgetAnnotationElement,"RadioButtonWidgetAnnotationElement");let RadioButtonWidgetAnnotationElement=_RadioButtonWidgetAnnotationElement;const _PushButtonWidgetAnnotationElement=class extends LinkAnnotationElement{static{__name2(this,"_PushButtonWidgetAnnotationElement")}constructor(parameters){super(parameters,{ignoreBorder:parameters.data.hasAppearance})}render(){const container=super.render();container.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(container.title=this.data.alternativeText);const linkElement=container.lastChild;return this.enableScripting&&this.hasJSActions&&linkElement&&(this._setDefaultPropertiesFromJS(linkElement),linkElement.addEventListener("updatefromsandbox",jsEvent=>{this._dispatchEventFromSandbox({},jsEvent)})),container}};__name(_PushButtonWidgetAnnotationElement,"PushButtonWidgetAnnotationElement");let PushButtonWidgetAnnotationElement=_PushButtonWidgetAnnotationElement;const _ChoiceWidgetAnnotationElement=class extends WidgetAnnotationElement{static{__name2(this,"_ChoiceWidgetAnnotationElement")}constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const storage=this.annotationStorage,id=this.data.id,storedData=storage.getValue(id,{value:this.data.fieldValue}),selectElement=document.createElement("select");GetElementsByNameSet.add(selectElement),selectElement.setAttribute("data-element-id",id),selectElement.disabled=this.data.readOnly,this._setRequired(selectElement,this.data.required),selectElement.name=this.data.fieldName,selectElement.tabIndex=DEFAULT_TAB_INDEX;let addAnEmptyEntry=this.data.combo&&this.data.options.length>0;this.data.combo||(selectElement.size=this.data.options.length,this.data.multiSelect&&(selectElement.multiple=!0)),selectElement.addEventListener("resetform",event=>{const defaultValue=this.data.defaultFieldValue;for(const option of selectElement.options)option.selected=option.value===defaultValue});for(const option of this.data.options){const optionElement=document.createElement("option");optionElement.textContent=option.displayValue,optionElement.value=option.exportValue,storedData.value.includes(option.exportValue)&&(optionElement.setAttribute("selected",!0),addAnEmptyEntry=!1),selectElement.append(optionElement)}let removeEmptyEntry=null;if(addAnEmptyEntry){const noneOptionElement=document.createElement("option");noneOptionElement.value=" ",noneOptionElement.setAttribute("hidden",!0),noneOptionElement.setAttribute("selected",!0),selectElement.prepend(noneOptionElement),removeEmptyEntry=__name(()=>{noneOptionElement.remove(),selectElement.removeEventListener("input",removeEmptyEntry),removeEmptyEntry=null},"removeEmptyEntry"),selectElement.addEventListener("input",removeEmptyEntry)}const getValue=__name((event,isExport)=>{const name=isExport?"value":"textContent",options=event.target.options;return event.target.multiple?Array.prototype.filter.call(options,option=>option.selected).map(option=>option[name]):options.selectedIndex===-1?null:options[options.selectedIndex][name]},"getValue"),getItems=__name(event=>{const options=event.target.options;return Array.prototype.map.call(options,option=>({displayValue:option.textContent,exportValue:option.value}))},"getItems");return this.enableScripting&&this.hasJSActions?(selectElement.addEventListener("updatefromsandbox",jsEvent=>{const actions={value(event){removeEmptyEntry?.();const value=event.detail.value,values=new Set(Array.isArray(value)?value:[value]);for(const option of selectElement.options)option.selected=values.has(option.value);storage.setValue(id,{value:getValue(event,!0)})},multipleSelection(event){selectElement.multiple=!0},remove(event){const options=selectElement.options,index=event.detail.remove;options[index].selected=!1,selectElement.remove(index),options.length>0&&Array.prototype.findIndex.call(options,option=>option.selected)===-1&&(options[0].selected=!0),storage.setValue(id,{value:getValue(event,!0),items:getItems(event)})},clear(event){for(;selectElement.length!==0;)selectElement.remove(0);storage.setValue(id,{value:null,items:[]})},insert(event){const{index,displayValue,exportValue}=event.detail.insert,selectChild=selectElement.children[index],optionElement=document.createElement("option");optionElement.textContent=displayValue,optionElement.value=exportValue,selectChild?selectChild.before(optionElement):selectElement.append(optionElement),storage.setValue(id,{value:getValue(event,!0),items:getItems(event)})},items(event){const{items}=event.detail;for(;selectElement.length!==0;)selectElement.remove(0);for(const item of items){const{displayValue,exportValue}=item,optionElement=document.createElement("option");optionElement.textContent=displayValue,optionElement.value=exportValue,selectElement.append(optionElement)}selectElement.options.length>0&&(selectElement.options[0].selected=!0),storage.setValue(id,{value:getValue(event,!0),items:getItems(event)})},indices(event){const indices=new Set(event.detail.indices);for(const option of event.target.options)option.selected=indices.has(option.index);storage.setValue(id,{value:getValue(event,!0)})},editable(event){event.target.disabled=!event.detail.editable}};this._dispatchEventFromSandbox(actions,jsEvent)}),selectElement.addEventListener("input",event=>{var _a2;const exportValue=getValue(event,!0),value=getValue(event,!1);storage.setValue(id,{value:exportValue}),(_a2=this.linkService.eventBus)==null||_a2.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,changeEx:exportValue,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(selectElement,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],event=>event.target.checked)):selectElement.addEventListener("input",function(event){storage.setValue(id,{value:getValue(event,!0)})}),this.data.combo&&this._setTextStyle(selectElement),this._setBackgroundColor(selectElement),this._setDefaultPropertiesFromJS(selectElement),this.container.append(selectElement),this.container}};__name(_ChoiceWidgetAnnotationElement,"ChoiceWidgetAnnotationElement");let ChoiceWidgetAnnotationElement=_ChoiceWidgetAnnotationElement;const _PopupAnnotationElement=class extends AnnotationElement{static{__name2(this,"_PopupAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!((_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable})}render(){const IGNORE_TYPES=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",IGNORE_TYPES.includes(this.data.parentType))return this.container;const selector=`[data-annotation-id="${this.data.parentId}"]`,parentElements=this.layer.querySelectorAll(selector);if(parentElements.length===0)return this.container;const popup=new PopupElement({container:this.container,trigger:Array.from(parentElements),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),page=this.page,rect=_util2.Util.normalizeRect([this.data.parentRect[0],page.view[3]-this.data.parentRect[1]+page.view[1],this.data.parentRect[2],page.view[3]-this.data.parentRect[3]+page.view[1]]),popupLeft=rect[0]+this.data.parentRect[2]-this.data.parentRect[0],popupTop=rect[1],[pageLLx,pageLLy,pageURx,pageURy]=this.viewport.viewBox,pageWidth=pageURx-pageLLx,pageHeight=pageURy-pageLLy;return this.container.style.left=`${100*(popupLeft-pageLLx)/pageWidth}%`,this.container.style.top=`${100*(popupTop-pageLLy)/pageHeight}%`,this.container.append(popup.render()),this.container}};__name(_PopupAnnotationElement,"PopupAnnotationElement");let PopupAnnotationElement=_PopupAnnotationElement;const _PopupElement=class{static{__name2(this,"_PopupElement")}constructor(parameters){this.container=parameters.container,this.trigger=parameters.trigger,this.color=parameters.color,this.titleObj=parameters.titleObj,this.modificationDate=parameters.modificationDate,this.contentsObj=parameters.contentsObj,this.richText=parameters.richText,this.hideWrapper=parameters.hideWrapper||!1,this.pinned=!1}render(){var _a2,_b;const wrapper=document.createElement("div");wrapper.className="popupWrapper",this.hideElement=this.hideWrapper?wrapper:this.container,this.hideElement.hidden=!0;const popup=document.createElement("div");popup.className="popup";const color=this.color;if(color){const r=.7*(255-color[0])+color[0],g=.7*(255-color[1])+color[1],b=.7*(255-color[2])+color[2];popup.style.backgroundColor=_util2.Util.makeHexColor(r|0,g|0,b|0)}const title=document.createElement("h1");title.dir=this.titleObj.dir,title.textContent=this.titleObj.str,popup.append(title);const dateObject=_display_utils2.PDFDateString.toDateObject(this.modificationDate);if(dateObject){const modificationDate=document.createElement("span");modificationDate.className="popupDate",modificationDate.textContent="{{date}}, {{time}}",modificationDate.dataset.l10nId="annotation_date_string",modificationDate.dataset.l10nArgs=JSON.stringify({date:dateObject.toLocaleDateString(),time:dateObject.toLocaleTimeString()}),popup.append(modificationDate)}if((_a2=this.richText)!=null&&_a2.str&&(!((_b=this.contentsObj)!=null&&_b.str)||this.contentsObj.str===this.richText.str))_xfa_layer.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:popup}),popup.lastChild.className="richText popupContent";else{const contents=this._formatContents(this.contentsObj);popup.append(contents)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const element of this.trigger)element.addEventListener("click",this._toggle.bind(this)),element.addEventListener("mouseover",this._show.bind(this,!1)),element.addEventListener("mouseout",this._hide.bind(this,!1));return popup.addEventListener("click",this._hide.bind(this,!0)),wrapper.append(popup),wrapper}_formatContents({str,dir}){const p=document.createElement("p");p.className="popupContent",p.dir=dir;const lines=str.split(/(?:\r\n?|\n)/);for(let i=0,ii=lines.length;i<ii;++i){const line=lines[i];p.append(document.createTextNode(line)),i<ii-1&&p.append(document.createElement("br"))}return p}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(pin=!1){pin&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(unpin=!0){unpin&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}};__name(_PopupElement,"PopupElement");let PopupElement=_PopupElement;const _FreeTextAnnotationElement=class extends AnnotationElement{static{__name2(this,"_FreeTextAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!(parameters.data.hasPopup||(_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable,ignoreBorder:!0}),this.textContent=parameters.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const content=document.createElement("div");content.className="annotationTextContent",content.setAttribute("role","comment");for(const line of this.textContent){const lineSpan=document.createElement("span");lineSpan.textContent=line,content.append(lineSpan)}this.container.append(content)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}};__name(_FreeTextAnnotationElement,"FreeTextAnnotationElement");let FreeTextAnnotationElement=_FreeTextAnnotationElement;const _LineAnnotationElement=class extends AnnotationElement{static{__name2(this,"_LineAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!(parameters.data.hasPopup||(_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),line=this.svgFactory.createElement("svg:line");return line.setAttribute("x1",data.rect[2]-data.lineCoordinates[0]),line.setAttribute("y1",data.rect[3]-data.lineCoordinates[1]),line.setAttribute("x2",data.rect[2]-data.lineCoordinates[2]),line.setAttribute("y2",data.rect[3]-data.lineCoordinates[3]),line.setAttribute("stroke-width",data.borderStyle.width||1),line.setAttribute("stroke","transparent"),line.setAttribute("fill","transparent"),svg.append(line),this.container.append(svg),this._createPopup(line,data),this.container}};__name(_LineAnnotationElement,"LineAnnotationElement");let LineAnnotationElement=_LineAnnotationElement;const _SquareAnnotationElement=class extends AnnotationElement{static{__name2(this,"_SquareAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!(parameters.data.hasPopup||(_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),borderWidth=data.borderStyle.width,square=this.svgFactory.createElement("svg:rect");return square.setAttribute("x",borderWidth/2),square.setAttribute("y",borderWidth/2),square.setAttribute("width",width-borderWidth),square.setAttribute("height",height-borderWidth),square.setAttribute("stroke-width",borderWidth||1),square.setAttribute("stroke","transparent"),square.setAttribute("fill","transparent"),svg.append(square),this.container.append(svg),this._createPopup(square,data),this.container}};__name(_SquareAnnotationElement,"SquareAnnotationElement");let SquareAnnotationElement=_SquareAnnotationElement;const _CircleAnnotationElement=class extends AnnotationElement{static{__name2(this,"_CircleAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!(parameters.data.hasPopup||(_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),borderWidth=data.borderStyle.width,circle=this.svgFactory.createElement("svg:ellipse");return circle.setAttribute("cx",width/2),circle.setAttribute("cy",height/2),circle.setAttribute("rx",width/2-borderWidth/2),circle.setAttribute("ry",height/2-borderWidth/2),circle.setAttribute("stroke-width",borderWidth||1),circle.setAttribute("stroke","transparent"),circle.setAttribute("fill","transparent"),svg.append(circle),this.container.append(svg),this._createPopup(circle,data),this.container}};__name(_CircleAnnotationElement,"CircleAnnotationElement");let CircleAnnotationElement=_CircleAnnotationElement;const _PolylineAnnotationElement=class extends AnnotationElement{static{__name2(this,"_PolylineAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!(parameters.data.hasPopup||(_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0);let points=[];for(const coordinate of data.vertices){const x=coordinate.x-data.rect[0],y=data.rect[3]-coordinate.y;points.push(x+","+y)}points=points.join(" ");const polyline=this.svgFactory.createElement(this.svgElementName);return polyline.setAttribute("points",points),polyline.setAttribute("stroke-width",data.borderStyle.width||1),polyline.setAttribute("stroke","transparent"),polyline.setAttribute("fill","transparent"),svg.append(polyline),this.container.append(svg),this._createPopup(polyline,data),this.container}};__name(_PolylineAnnotationElement,"PolylineAnnotationElement");let PolylineAnnotationElement=_PolylineAnnotationElement;const _PolygonAnnotationElement=class extends PolylineAnnotationElement{static{__name2(this,"_PolygonAnnotationElement")}constructor(parameters){super(parameters),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}};__name(_PolygonAnnotationElement,"PolygonAnnotationElement");let PolygonAnnotationElement=_PolygonAnnotationElement;const _CaretAnnotationElement=class extends AnnotationElement{static{__name2(this,"_CaretAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!(parameters.data.hasPopup||(_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}};__name(_CaretAnnotationElement,"CaretAnnotationElement");let CaretAnnotationElement=_CaretAnnotationElement;const _InkAnnotationElement=class extends AnnotationElement{static{__name2(this,"_InkAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!(parameters.data.hasPopup||(_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0);for(const inkList of data.inkLists){let points=[];for(const coordinate of inkList){const x=coordinate.x-data.rect[0],y=data.rect[3]-coordinate.y;points.push(`${x},${y}`)}points=points.join(" ");const polyline=this.svgFactory.createElement(this.svgElementName);polyline.setAttribute("points",points),polyline.setAttribute("stroke-width",data.borderStyle.width||1),polyline.setAttribute("stroke","transparent"),polyline.setAttribute("fill","transparent"),this._createPopup(polyline,data),svg.append(polyline)}return this.container.append(svg),this.container}};__name(_InkAnnotationElement,"InkAnnotationElement");let InkAnnotationElement=_InkAnnotationElement;const _HighlightAnnotationElement=class extends AnnotationElement{static{__name2(this,"_HighlightAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!(parameters.data.hasPopup||(_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}};__name(_HighlightAnnotationElement,"HighlightAnnotationElement");let HighlightAnnotationElement=_HighlightAnnotationElement;const _UnderlineAnnotationElement=class extends AnnotationElement{static{__name2(this,"_UnderlineAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!(parameters.data.hasPopup||(_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}};__name(_UnderlineAnnotationElement,"UnderlineAnnotationElement");let UnderlineAnnotationElement=_UnderlineAnnotationElement;const _SquigglyAnnotationElement=class extends AnnotationElement{static{__name2(this,"_SquigglyAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!(parameters.data.hasPopup||(_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}};__name(_SquigglyAnnotationElement,"SquigglyAnnotationElement");let SquigglyAnnotationElement=_SquigglyAnnotationElement;const _StrikeOutAnnotationElement=class extends AnnotationElement{static{__name2(this,"_StrikeOutAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!(parameters.data.hasPopup||(_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}};__name(_StrikeOutAnnotationElement,"StrikeOutAnnotationElement");let StrikeOutAnnotationElement=_StrikeOutAnnotationElement;const _StampAnnotationElement=class extends AnnotationElement{static{__name2(this,"_StampAnnotationElement")}constructor(parameters){var _a2,_b,_c;const isRenderable=!!(parameters.data.hasPopup||(_a2=parameters.data.titleObj)!=null&&_a2.str||(_b=parameters.data.contentsObj)!=null&&_b.str||(_c=parameters.data.richText)!=null&&_c.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}};__name(_StampAnnotationElement,"StampAnnotationElement");let StampAnnotationElement=_StampAnnotationElement;const _FileAttachmentAnnotationElement=class extends AnnotationElement{static{__name2(this,"_FileAttachmentAnnotationElement")}constructor(parameters){var _a2;super(parameters,{isRenderable:!0});const{filename,content}=this.data.file;this.filename=(0,_display_utils2.getFilenameFromUrl)(filename),this.content=content,(_a2=this.linkService.eventBus)==null||_a2.dispatch("fileattachmentannotation",{source:this,filename,content})}render(){var _a2,_b;this.container.className="fileAttachmentAnnotation";const trigger=document.createElement("div");return trigger.className="popupTriggerArea",trigger.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((_a2=this.data.titleObj)!=null&&_a2.str||(_b=this.data.contentsObj)!=null&&_b.str||this.data.richText)&&this._createPopup(trigger,this.data),this.container.append(trigger),this.container}_download(){var _a2;(_a2=this.downloadManager)==null||_a2.openOrDownloadData(this.container,this.content,this.filename)}};__name(_FileAttachmentAnnotationElement,"FileAttachmentAnnotationElement");let FileAttachmentAnnotationElement=_FileAttachmentAnnotationElement;const _AnnotationLayer=class _AnnotationLayer2{static{__name2(this,"_AnnotationLayer")}static render(parameters){var _a2,_b;const{annotations,div,viewport,accessibilityManager}=parameters;__privateMethod(this,_setDimensions,setDimensions_fn).call(this,div,viewport);let zIndex=0;for(const data of annotations){if(data.annotationType!==_util2.AnnotationType.POPUP){const{width,height}=getRectDims(data.rect);if(width<=0||height<=0)continue}const element=AnnotationElementFactory.create({data,layer:div,page:parameters.page,viewport,linkService:parameters.linkService,downloadManager:parameters.downloadManager,imageResourcesPath:parameters.imageResourcesPath||"",renderForms:parameters.renderForms!==!1,svgFactory:new _display_utils2.DOMSVGFactory,annotationStorage:parameters.annotationStorage||new _annotation_storage2.AnnotationStorage,enableScripting:parameters.enableScripting,hasJSActions:parameters.hasJSActions,fieldObjects:parameters.fieldObjects,mouseState:parameters.mouseState||{isDown:!1}});if(element.isRenderable){const rendered=element.render();if(data.hidden&&(rendered.style.visibility="hidden"),Array.isArray(rendered))for(const renderedElement of rendered)renderedElement.style.zIndex=zIndex++,__privateMethod(_a2=_AnnotationLayer2,_appendElement,appendElement_fn).call(_a2,renderedElement,data.id,div,accessibilityManager);else rendered.style.zIndex=zIndex++,element instanceof PopupAnnotationElement?div.prepend(rendered):__privateMethod(_b=_AnnotationLayer2,_appendElement,appendElement_fn).call(_b,rendered,data.id,div,accessibilityManager)}}__privateMethod(this,_setAnnotationCanvasMap,setAnnotationCanvasMap_fn).call(this,div,parameters.annotationCanvasMap)}static update(parameters){const{annotationCanvasMap,div,viewport}=parameters;__privateMethod(this,_setDimensions,setDimensions_fn).call(this,div,viewport),__privateMethod(this,_setAnnotationCanvasMap,setAnnotationCanvasMap_fn).call(this,div,annotationCanvasMap),div.hidden=!1}};_appendElement=new WeakSet,appendElement_fn=__name(function(element,id,div,accessibilityManager){const contentElement=element.firstChild||element;contentElement.id=`${_display_utils2.AnnotationPrefix}${id}`,div.append(element),accessibilityManager?.moveElementInDOM(div,element,contentElement,!1)},"#appendElement"),_setDimensions=new WeakSet,setDimensions_fn=__name(function(div,{width,height,rotation}){const{style}=div,flipOrientation=rotation%180!==0,widthStr=Math.floor(width)+"px",heightStr=Math.floor(height)+"px";style.width=flipOrientation?heightStr:widthStr,style.height=flipOrientation?widthStr:heightStr,div.setAttribute("data-main-rotation",rotation)},"#setDimensions"),_setAnnotationCanvasMap=new WeakSet,setAnnotationCanvasMap_fn=__name(function(div,annotationCanvasMap){if(annotationCanvasMap){for(const[id,canvas]of annotationCanvasMap){const element=div.querySelector(`[data-annotation-id="${id}"]`);if(!element)continue;const{firstChild}=element;firstChild?firstChild.nodeName==="CANVAS"?firstChild.replaceWith(canvas):firstChild.before(canvas):element.append(canvas)}annotationCanvasMap.clear()}},"#setAnnotationCanvasMap"),__privateAdd(_AnnotationLayer,_appendElement),__privateAdd(_AnnotationLayer,_setDimensions),__privateAdd(_AnnotationLayer,_setAnnotationCanvasMap),__name(_AnnotationLayer,"AnnotationLayer");let AnnotationLayer=_AnnotationLayer;exports2.AnnotationLayer=AnnotationLayer},(__unused_webpack_module2,exports2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.ColorConverters=void 0;function makeColorComp(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}__name2(makeColorComp,"makeColorComp"),__name(makeColorComp,"makeColorComp");const _ColorConverters=class{static{__name2(this,"_ColorConverters")}static CMYK_G([c,y,m,k]){return["G",1-Math.min(1,.3*c+.59*m+.11*y+k)]}static G_CMYK([g]){return["CMYK",0,0,0,1-g]}static G_RGB([g]){return["RGB",g,g,g]}static G_HTML([g]){const G=makeColorComp(g);return`#${G}${G}${G}`}static RGB_G([r,g,b]){return["G",.3*r+.59*g+.11*b]}static RGB_HTML([r,g,b]){const R=makeColorComp(r),G=makeColorComp(g),B=makeColorComp(b);return`#${R}${G}${B}`}static T_HTML(){return"#00000000"}static CMYK_RGB([c,y,m,k]){return["RGB",1-Math.min(1,c+k),1-Math.min(1,m+k),1-Math.min(1,y+k)]}static CMYK_HTML(components){const rgb=this.CMYK_RGB(components).slice(1);return this.RGB_HTML(rgb)}static RGB_CMYK([r,g,b]){const c=1-r,m=1-g,y=1-b,k=Math.min(c,m,y);return["CMYK",c,m,y,k]}};__name(_ColorConverters,"ColorConverters");let ColorConverters=_ColorConverters;exports2.ColorConverters=ColorConverters},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.XfaLayer=void 0;var _xfa_text2=__w_pdfjs_require__2(20);const _XfaLayer=class{static{__name2(this,"_XfaLayer")}static setupStorage(html,id,element,storage,intent){const storedData=storage.getValue(id,{value:null});switch(element.name){case"textarea":if(storedData.value!==null&&(html.textContent=storedData.value),intent==="print")break;html.addEventListener("input",event=>{storage.setValue(id,{value:event.target.value})});break;case"input":if(element.attributes.type==="radio"||element.attributes.type==="checkbox"){if(storedData.value===element.attributes.xfaOn?html.setAttribute("checked",!0):storedData.value===element.attributes.xfaOff&&html.removeAttribute("checked"),intent==="print")break;html.addEventListener("change",event=>{storage.setValue(id,{value:event.target.checked?event.target.getAttribute("xfaOn"):event.target.getAttribute("xfaOff")})})}else{if(storedData.value!==null&&html.setAttribute("value",storedData.value),intent==="print")break;html.addEventListener("input",event=>{storage.setValue(id,{value:event.target.value})})}break;case"select":if(storedData.value!==null)for(const option of element.children)option.attributes.value===storedData.value&&(option.attributes.selected=!0);html.addEventListener("input",event=>{const options=event.target.options,value=options.selectedIndex===-1?"":options[options.selectedIndex].value;storage.setValue(id,{value})});break}}static setAttributes({html,element,storage=null,intent,linkService}){const{attributes}=element,isHTMLAnchorElement=html instanceof HTMLAnchorElement;attributes.type==="radio"&&(attributes.name=`${attributes.name}-${intent}`);for(const[key,value]of Object.entries(attributes))if(value!=null)switch(key){case"class":value.length&&html.setAttribute(key,value.join(" "));break;case"dataId":break;case"id":html.setAttribute("data-element-id",value);break;case"style":Object.assign(html.style,value);break;case"textContent":html.textContent=value;break;default:(!isHTMLAnchorElement||key!=="href"&&key!=="newWindow")&&html.setAttribute(key,value)}isHTMLAnchorElement&&linkService.addLinkAttributes(html,attributes.href,attributes.newWindow),storage&&attributes.dataId&&this.setupStorage(html,attributes.dataId,element,storage)}static render(parameters){var _a2;const storage=parameters.annotationStorage,linkService=parameters.linkService,root=parameters.xfaHtml,intent=parameters.intent||"display",rootHtml=document.createElement(root.name);root.attributes&&this.setAttributes({html:rootHtml,element:root,intent,linkService});const stack=[[root,-1,rootHtml]],rootDiv=parameters.div;if(rootDiv.append(rootHtml),parameters.viewport){const transform=`matrix(${parameters.viewport.transform.join(",")})`;rootDiv.style.transform=transform}intent!=="richText"&&rootDiv.setAttribute("class","xfaLayer xfaFont");const textDivs=[];for(;stack.length>0;){const[parent,i,html]=stack.at(-1);if(i+1===parent.children.length){stack.pop();continue}const child=parent.children[++stack.at(-1)[1]];if(child===null)continue;const{name}=child;if(name==="#text"){const node=document.createTextNode(child.value);textDivs.push(node),html.append(node);continue}let childHtml;if((_a2=child?.attributes)!=null&&_a2.xmlns?childHtml=document.createElementNS(child.attributes.xmlns,name):childHtml=document.createElement(name),html.append(childHtml),child.attributes&&this.setAttributes({html:childHtml,element:child,storage,intent,linkService}),child.children&&child.children.length>0)stack.push([child,-1,childHtml]);else if(child.value){const node=document.createTextNode(child.value);_xfa_text2.XfaText.shouldBuildText(name)&&textDivs.push(node),childHtml.append(node)}}for(const el of rootDiv.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))el.setAttribute("readOnly",!0);return{textDivs}}static update(parameters){const transform=`matrix(${parameters.viewport.transform.join(",")})`;parameters.div.style.transform=transform,parameters.div.hidden=!1}};__name(_XfaLayer,"XfaLayer");let XfaLayer=_XfaLayer;exports2.XfaLayer=XfaLayer},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.TextLayerRenderTask=void 0,exports2.renderTextLayer=renderTextLayer;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(8);const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30,DEFAULT_FONT_ASCENT=.8,ascentCache=new Map,AllWhitespaceRegexp=/^\s+$/g;function getAscent(fontFamily,ctx){const cachedAscent=ascentCache.get(fontFamily);if(cachedAscent)return cachedAscent;ctx.save(),ctx.font=`${DEFAULT_FONT_SIZE}px ${fontFamily}`;const metrics=ctx.measureText("");let ascent=metrics.fontBoundingBoxAscent,descent=Math.abs(metrics.fontBoundingBoxDescent);if(ascent){ctx.restore();const ratio=ascent/(ascent+descent);return ascentCache.set(fontFamily,ratio),ratio}ctx.strokeStyle="red",ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),ctx.strokeText("g",0,0);let pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;descent=0;for(let i=pixels.length-1-3;i>=0;i-=4)if(pixels[i]>0){descent=Math.ceil(i/4/DEFAULT_FONT_SIZE);break}ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),ctx.strokeText("A",0,DEFAULT_FONT_SIZE),pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data,ascent=0;for(let i=0,ii=pixels.length;i<ii;i+=4)if(pixels[i]>0){ascent=DEFAULT_FONT_SIZE-Math.floor(i/4/DEFAULT_FONT_SIZE);break}if(ctx.restore(),ascent){const ratio=ascent/(ascent+descent);return ascentCache.set(fontFamily,ratio),ratio}return ascentCache.set(fontFamily,DEFAULT_FONT_ASCENT),DEFAULT_FONT_ASCENT}__name2(getAscent,"getAscent"),__name(getAscent,"getAscent");function appendText(task,geom,styles,ctx){const textDiv=document.createElement("span"),textDivProperties=task._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:geom.str!=="",hasEOL:geom.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:geom.str!=="",hasEOL:geom.hasEOL,fontSize:0};task._textDivs.push(textDiv);const tx=_util2.Util.transform(task._viewport.transform,geom.transform);let angle=Math.atan2(tx[1],tx[0]);const style=styles[geom.fontName];style.vertical&&(angle+=Math.PI/2);const fontHeight=Math.hypot(tx[2],tx[3]),fontAscent=fontHeight*getAscent(style.fontFamily,ctx);let left,top;angle===0?(left=tx[4],top=tx[5]-fontAscent):(left=tx[4]+fontAscent*Math.sin(angle),top=tx[5]-fontAscent*Math.cos(angle)),textDiv.style.left=`${left}px`,textDiv.style.top=`${top}px`,textDiv.style.fontSize=`${fontHeight}px`,textDiv.style.fontFamily=style.fontFamily,textDivProperties.fontSize=fontHeight,textDiv.setAttribute("role","presentation"),textDiv.textContent=geom.str,textDiv.dir=geom.dir,task._fontInspectorEnabled&&(textDiv.dataset.fontName=geom.fontName),angle!==0&&(textDivProperties.angle=angle*(180/Math.PI));let shouldScaleText=!1;if(geom.str.length>1||task._enhanceTextSelection&&AllWhitespaceRegexp.test(geom.str))shouldScaleText=!0;else if(geom.str!==" "&&geom.transform[0]!==geom.transform[3]){const absScaleX=Math.abs(geom.transform[0]),absScaleY=Math.abs(geom.transform[3]);absScaleX!==absScaleY&&Math.max(absScaleX,absScaleY)/Math.min(absScaleX,absScaleY)>1.5&&(shouldScaleText=!0)}if(shouldScaleText&&(style.vertical?textDivProperties.canvasWidth=geom.height*task._viewport.scale:textDivProperties.canvasWidth=geom.width*task._viewport.scale),task._textDivProperties.set(textDiv,textDivProperties),task._textContentStream&&task._layoutText(textDiv),task._enhanceTextSelection&&textDivProperties.hasText){let angleCos=1,angleSin=0;angle!==0&&(angleCos=Math.cos(angle),angleSin=Math.sin(angle));const divWidth=(style.vertical?geom.height:geom.width)*task._viewport.scale,divHeight=fontHeight;let m,b;angle!==0?(m=[angleCos,angleSin,-angleSin,angleCos,left,top],b=_util2.Util.getAxialAlignedBoundingBox([0,0,divWidth,divHeight],m)):b=[left,top,left+divWidth,top+divHeight],task._bounds.push({left:b[0],top:b[1],right:b[2],bottom:b[3],div:textDiv,size:[divWidth,divHeight],m})}}__name2(appendText,"appendText"),__name(appendText,"appendText");function render(task){if(task._canceled)return;const textDivs=task._textDivs,capability=task._capability,textDivsLength=textDivs.length;if(textDivsLength>MAX_TEXT_DIVS_TO_RENDER){task._renderingDone=!0,capability.resolve();return}if(!task._textContentStream)for(let i=0;i<textDivsLength;i++)task._layoutText(textDivs[i]);task._renderingDone=!0,capability.resolve()}__name2(render,"render"),__name(render,"render");function findPositiveMin(ts,offset,count){let result=0;for(let i=0;i<count;i++){const t=ts[offset++];t>0&&(result=result?Math.min(t,result):t)}return result}__name2(findPositiveMin,"findPositiveMin"),__name(findPositiveMin,"findPositiveMin");function expand(task){const bounds=task._bounds,viewport=task._viewport,expanded=expandBounds(viewport.width,viewport.height,bounds);for(let i=0;i<expanded.length;i++){const div=bounds[i].div,divProperties=task._textDivProperties.get(div);if(divProperties.angle===0){divProperties.paddingLeft=bounds[i].left-expanded[i].left,divProperties.paddingTop=bounds[i].top-expanded[i].top,divProperties.paddingRight=expanded[i].right-bounds[i].right,divProperties.paddingBottom=expanded[i].bottom-bounds[i].bottom,task._textDivProperties.set(div,divProperties);continue}const e=expanded[i],b=bounds[i],m=b.m,c=m[0],s=m[1],points=[[0,0],[0,b.size[1]],[b.size[0],0],b.size],ts=new Float64Array(64);for(let j=0,jj=points.length;j<jj;j++){const t=_util2.Util.applyTransform(points[j],m);ts[j+0]=c&&(e.left-t[0])/c,ts[j+4]=s&&(e.top-t[1])/s,ts[j+8]=c&&(e.right-t[0])/c,ts[j+12]=s&&(e.bottom-t[1])/s,ts[j+16]=s&&(e.left-t[0])/-s,ts[j+20]=c&&(e.top-t[1])/c,ts[j+24]=s&&(e.right-t[0])/-s,ts[j+28]=c&&(e.bottom-t[1])/c,ts[j+32]=c&&(e.left-t[0])/-c,ts[j+36]=s&&(e.top-t[1])/-s,ts[j+40]=c&&(e.right-t[0])/-c,ts[j+44]=s&&(e.bottom-t[1])/-s,ts[j+48]=s&&(e.left-t[0])/s,ts[j+52]=c&&(e.top-t[1])/-c,ts[j+56]=s&&(e.right-t[0])/s,ts[j+60]=c&&(e.bottom-t[1])/-c}const boxScale=1+Math.min(Math.abs(c),Math.abs(s));divProperties.paddingLeft=findPositiveMin(ts,32,16)/boxScale,divProperties.paddingTop=findPositiveMin(ts,48,16)/boxScale,divProperties.paddingRight=findPositiveMin(ts,0,16)/boxScale,divProperties.paddingBottom=findPositiveMin(ts,16,16)/boxScale,task._textDivProperties.set(div,divProperties)}}__name2(expand,"expand"),__name(expand,"expand");function expandBounds(width,height,boxes){const bounds=boxes.map(function(box,i){return{x1:box.left,y1:box.top,x2:box.right,y2:box.bottom,index:i,x1New:void 0,x2New:void 0}});expandBoundsLTR(width,bounds);const expanded=new Array(boxes.length);for(const b of bounds){const i=b.index;expanded[i]={left:b.x1New,top:0,right:b.x2New,bottom:0}}boxes.map(function(box,i){const e=expanded[i],b=bounds[i];b.x1=box.top,b.y1=width-e.right,b.x2=box.bottom,b.y2=width-e.left,b.index=i,b.x1New=void 0,b.x2New=void 0}),expandBoundsLTR(height,bounds);for(const b of bounds){const i=b.index;expanded[i].top=b.x1New,expanded[i].bottom=b.x2New}return expanded}__name2(expandBounds,"expandBounds"),__name(expandBounds,"expandBounds");function expandBoundsLTR(width,bounds){bounds.sort(function(a,b){return a.x1-b.x1||a.index-b.index});const horizon=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const boundary of bounds){let i=0;for(;i<horizon.length&&horizon[i].end<=boundary.y1;)i++;let j=horizon.length-1;for(;j>=0&&horizon[j].start>=boundary.y2;)j--;let horizonPart,affectedBoundary,q,k,maxXNew=-1/0;for(q=i;q<=j;q++){horizonPart=horizon[q],affectedBoundary=horizonPart.boundary;let xNew;affectedBoundary.x2>boundary.x1?xNew=affectedBoundary.index>boundary.index?affectedBoundary.x1New:boundary.x1:affectedBoundary.x2New===void 0?xNew=(affectedBoundary.x2+boundary.x1)/2:xNew=affectedBoundary.x2New,xNew>maxXNew&&(maxXNew=xNew)}for(boundary.x1New=maxXNew,q=i;q<=j;q++)horizonPart=horizon[q],affectedBoundary=horizonPart.boundary,affectedBoundary.x2New===void 0?affectedBoundary.x2>boundary.x1?affectedBoundary.index>boundary.index&&(affectedBoundary.x2New=affectedBoundary.x2):affectedBoundary.x2New=maxXNew:affectedBoundary.x2New>maxXNew&&(affectedBoundary.x2New=Math.max(maxXNew,affectedBoundary.x2));const changedHorizon=[];let lastBoundary=null;for(q=i;q<=j;q++){horizonPart=horizon[q],affectedBoundary=horizonPart.boundary;const useBoundary=affectedBoundary.x2>boundary.x2?affectedBoundary:boundary;lastBoundary===useBoundary?changedHorizon.at(-1).end=horizonPart.end:(changedHorizon.push({start:horizonPart.start,end:horizonPart.end,boundary:useBoundary}),lastBoundary=useBoundary)}for(horizon[i].start<boundary.y1&&(changedHorizon[0].start=boundary.y1,changedHorizon.unshift({start:horizon[i].start,end:boundary.y1,boundary:horizon[i].boundary})),boundary.y2<horizon[j].end&&(changedHorizon.at(-1).end=boundary.y2,changedHorizon.push({start:boundary.y2,end:horizon[j].end,boundary:horizon[j].boundary})),q=i;q<=j;q++){if(horizonPart=horizon[q],affectedBoundary=horizonPart.boundary,affectedBoundary.x2New!==void 0)continue;let used=!1;for(k=i-1;!used&&k>=0&&horizon[k].start>=affectedBoundary.y1;k--)used=horizon[k].boundary===affectedBoundary;for(k=j+1;!used&&k<horizon.length&&horizon[k].end<=affectedBoundary.y2;k++)used=horizon[k].boundary===affectedBoundary;for(k=0;!used&&k<changedHorizon.length;k++)used=changedHorizon[k].boundary===affectedBoundary;used||(affectedBoundary.x2New=maxXNew)}Array.prototype.splice.apply(horizon,[i,j-i+1,...changedHorizon])}for(const horizonPart of horizon){const affectedBoundary=horizonPart.boundary;affectedBoundary.x2New===void 0&&(affectedBoundary.x2New=Math.max(width,affectedBoundary.x2))}}__name2(expandBoundsLTR,"expandBoundsLTR"),__name(expandBoundsLTR,"expandBoundsLTR");const _TextLayerRenderTask=class{static{__name2(this,"_TextLayerRenderTask")}constructor({textContent,textContentStream,container,viewport,textDivs,textContentItemsStr,enhanceTextSelection}){var _a2;enhanceTextSelection&&(0,_display_utils2.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=textContent,this._textContentStream=textContentStream,this._container=container,this._document=container.ownerDocument,this._viewport=viewport,this._textDivs=textDivs||[],this._textContentItemsStr=textContentItemsStr||[],this._enhanceTextSelection=!!enhanceTextSelection,this._fontInspectorEnabled=!!((_a2=globalThis.FontInspector)!=null&&_a2.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,_util2.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new _util2.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(items,styleCache){for(let i=0,len=items.length;i<len;i++){if(items[i].str===void 0){if(items[i].type==="beginMarkedContentProps"||items[i].type==="beginMarkedContent"){const parent=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),items[i].id!==null&&this._container.setAttribute("id",`${items[i].id}`),parent.append(this._container)}else items[i].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(items[i].str),appendText(this,items[i],styleCache,this._layoutTextCtx)}}_layoutText(textDiv){const textDivProperties=this._textDivProperties.get(textDiv);let transform="";if(textDivProperties.canvasWidth!==0&&textDivProperties.hasText){const{fontFamily}=textDiv.style,{fontSize}=textDivProperties;(fontSize!==this._layoutTextLastFontSize||fontFamily!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${fontSize*this._devicePixelRatio}px ${fontFamily}`,this._layoutTextLastFontSize=fontSize,this._layoutTextLastFontFamily=fontFamily);const{width}=this._layoutTextCtx.measureText(textDiv.textContent);if(width>0){const scale=this._devicePixelRatio*textDivProperties.canvasWidth/width;this._enhanceTextSelection&&(textDivProperties.scale=scale),transform=`scaleX(${scale})`}}if(textDivProperties.angle!==0&&(transform=`rotate(${textDivProperties.angle}deg) ${transform}`),transform.length>0&&(this._enhanceTextSelection&&(textDivProperties.originalTransform=transform),textDiv.style.transform=transform),textDivProperties.hasText&&this._container.append(textDiv),textDivProperties.hasEOL){const br=document.createElement("br");br.setAttribute("role","presentation"),this._container.append(br)}}_render(timeout=0){const capability=(0,_util2.createPromiseCapability)();let styleCache=Object.create(null);const canvas=this._document.createElement("canvas");if(canvas.height=canvas.width=DEFAULT_FONT_SIZE,this._layoutTextCtx=canvas.getContext("2d",{alpha:!1}),this._textContent){const textItems=this._textContent.items,textStyles=this._textContent.styles;this._processItems(textItems,textStyles),capability.resolve()}else if(this._textContentStream){const pump=__name(()=>{this._reader.read().then(({value,done})=>{if(done){capability.resolve();return}Object.assign(styleCache,value.styles),this._processItems(value.items,styleCache),pump()},capability.reject)},"pump");this._reader=this._textContentStream.getReader(),pump()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');capability.promise.then(()=>{styleCache=null,timeout?this._renderTimer=setTimeout(()=>{render(this),this._renderTimer=null},timeout):render(this)},this._capability.reject)}expandTextDivs(expandDivs=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(expand(this),this._bounds=null);const transformBuf=[],paddingBuf=[];for(let i=0,ii=this._textDivs.length;i<ii;i++){const div=this._textDivs[i],divProps=this._textDivProperties.get(div);divProps.hasText&&(expandDivs?(transformBuf.length=0,paddingBuf.length=0,divProps.originalTransform&&transformBuf.push(divProps.originalTransform),divProps.paddingTop>0?(paddingBuf.push(`${divProps.paddingTop}px`),transformBuf.push(`translateY(${-divProps.paddingTop}px)`)):paddingBuf.push(0),divProps.paddingRight>0?paddingBuf.push(`${divProps.paddingRight/divProps.scale}px`):paddingBuf.push(0),divProps.paddingBottom>0?paddingBuf.push(`${divProps.paddingBottom}px`):paddingBuf.push(0),divProps.paddingLeft>0?(paddingBuf.push(`${divProps.paddingLeft/divProps.scale}px`),transformBuf.push(`translateX(${-divProps.paddingLeft/divProps.scale}px)`)):paddingBuf.push(0),div.style.padding=paddingBuf.join(" "),transformBuf.length&&(div.style.transform=transformBuf.join(" "))):(div.style.padding=null,div.style.transform=divProps.originalTransform))}}};__name(_TextLayerRenderTask,"TextLayerRenderTask");let TextLayerRenderTask=_TextLayerRenderTask;exports2.TextLayerRenderTask=TextLayerRenderTask;function renderTextLayer(renderParameters){const task=new TextLayerRenderTask({textContent:renderParameters.textContent,textContentStream:renderParameters.textContentStream,container:renderParameters.container,viewport:renderParameters.viewport,textDivs:renderParameters.textDivs,textContentItemsStr:renderParameters.textContentItemsStr,enhanceTextSelection:renderParameters.enhanceTextSelection});return task._render(renderParameters.timeout),task}__name2(renderTextLayer,"renderTextLayer"),__name(renderTextLayer,"renderTextLayer")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _a2,_b;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.SVGGraphics=void 0;var _display_utils2=__w_pdfjs_require__2(8),_util2=__w_pdfjs_require__2(1),_is_node2=__w_pdfjs_require__2(3);let SVGGraphics=(_a2=class{static{__name2(this,"_a")}constructor(){(0,_util2.unreachable)("Not implemented: SVGGraphics")}},__name(_a2,"SVGGraphics"),_a2);exports2.SVGGraphics=SVGGraphics;{let opListToTree=__name2(function(opList){let opTree=[];const tmp=[];for(const opListElement of opList){if(opListElement.fn==="save"){opTree.push({fnId:92,fn:"group",items:[]}),tmp.push(opTree),opTree=opTree.at(-1).items;continue}opListElement.fn==="restore"?opTree=tmp.pop():opTree.push(opListElement)}return opTree},"opListToTree"),pf=__name2(function(value){if(Number.isInteger(value))return value.toString();const s=value.toFixed(10);let i=s.length-1;if(s[i]!=="0")return s;do i--;while(s[i]==="0");return s.substring(0,s[i]==="."?i:i+1)},"pf"),pm=__name2(function(m){if(m[4]===0&&m[5]===0){if(m[1]===0&&m[2]===0)return m[0]===1&&m[3]===1?"":`scale(${pf(m[0])} ${pf(m[3])})`;if(m[0]===m[3]&&m[1]===-m[2]){const a=Math.acos(m[0])*180/Math.PI;return`rotate(${pf(a)})`}}else if(m[0]===1&&m[1]===0&&m[2]===0&&m[3]===1)return`translate(${pf(m[4])} ${pf(m[5])})`;return`matrix(${pf(m[0])} ${pf(m[1])} ${pf(m[2])} ${pf(m[3])} ${pf(m[4])} ${pf(m[5])})`},"pm");__name(opListToTree,"opListToTree"),__name(pf,"pf"),__name(pm,"pm");const SVG_DEFAULTS={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},XML_NS="http://www.w3.org/XML/1998/namespace",XLINK_NS="http://www.w3.org/1999/xlink",LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],createObjectURL=__name(function(data,contentType="",forceDataSchema=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!forceDataSchema)return URL.createObjectURL(new Blob([data],{type:contentType}));const digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let buffer=`data:${contentType};base64,`;for(let i=0,ii=data.length;i<ii;i+=3){const b1=data[i]&255,b2=data[i+1]&255,b3=data[i+2]&255,d1=b1>>2,d2=(b1&3)<<4|b2>>4,d3=i+1<ii?(b2&15)<<2|b3>>6:64,d4=i+2<ii?b3&63:64;buffer+=digits[d1]+digits[d2]+digits[d3]+digits[d4]}return buffer},"createObjectURL"),convertImgDataToPng=function(){const PNG_HEADER=new Uint8Array([137,80,78,71,13,10,26,10]),CHUNK_WRAPPER_SIZE=12,crcTable=new Int32Array(256);for(let i=0;i<256;i++){let c=i;for(let h=0;h<8;h++)c&1?c=3988292384^c>>1&2147483647:c=c>>1&2147483647;crcTable[i]=c}function crc32(data,start,end){let crc=-1;for(let i=start;i<end;i++){const a=(crc^data[i])&255,b=crcTable[a];crc=crc>>>8^b}return crc^-1}__name2(crc32,"crc32"),__name(crc32,"crc32");function writePngChunk(type,body,data,offset){let p=offset;const len=body.length;data[p]=len>>24&255,data[p+1]=len>>16&255,data[p+2]=len>>8&255,data[p+3]=len&255,p+=4,data[p]=type.charCodeAt(0)&255,data[p+1]=type.charCodeAt(1)&255,data[p+2]=type.charCodeAt(2)&255,data[p+3]=type.charCodeAt(3)&255,p+=4,data.set(body,p),p+=body.length;const crc=crc32(data,offset+4,p);data[p]=crc>>24&255,data[p+1]=crc>>16&255,data[p+2]=crc>>8&255,data[p+3]=crc&255}__name2(writePngChunk,"writePngChunk"),__name(writePngChunk,"writePngChunk");function adler32(data,start,end){let a=1,b=0;for(let i=start;i<end;++i)a=(a+(data[i]&255))%65521,b=(b+a)%65521;return b<<16|a}__name2(adler32,"adler32"),__name(adler32,"adler32");function deflateSync(literals){if(!_is_node2.isNodeJS)return deflateSyncUncompressed(literals);try{let input;parseInt(process.versions.node)>=8?input=literals:input=Buffer.from(literals);const output=require$$7.deflateSync(input,{level:9});return output instanceof Uint8Array?output:new Uint8Array(output)}catch(e){(0,_util2.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return deflateSyncUncompressed(literals)}__name2(deflateSync,"deflateSync"),__name(deflateSync,"deflateSync");function deflateSyncUncompressed(literals){let len=literals.length;const maxBlockLength=65535,deflateBlocks=Math.ceil(len/maxBlockLength),idat=new Uint8Array(2+len+deflateBlocks*5+4);let pi=0;idat[pi++]=120,idat[pi++]=156;let pos=0;for(;len>maxBlockLength;)idat[pi++]=0,idat[pi++]=255,idat[pi++]=255,idat[pi++]=0,idat[pi++]=0,idat.set(literals.subarray(pos,pos+maxBlockLength),pi),pi+=maxBlockLength,pos+=maxBlockLength,len-=maxBlockLength;idat[pi++]=1,idat[pi++]=len&255,idat[pi++]=len>>8&255,idat[pi++]=~len&65535&255,idat[pi++]=(~len&65535)>>8&255,idat.set(literals.subarray(pos),pi),pi+=literals.length-pos;const adler=adler32(literals,0,literals.length);return idat[pi++]=adler>>24&255,idat[pi++]=adler>>16&255,idat[pi++]=adler>>8&255,idat[pi++]=adler&255,idat}__name2(deflateSyncUncompressed,"deflateSyncUncompressed"),__name(deflateSyncUncompressed,"deflateSyncUncompressed");function encode(imgData,kind,forceDataSchema,isMask){const width=imgData.width,height=imgData.height;let bitDepth,colorType,lineSize;const bytes=imgData.data;switch(kind){case _util2.ImageKind.GRAYSCALE_1BPP:colorType=0,bitDepth=1,lineSize=width+7>>3;break;case _util2.ImageKind.RGB_24BPP:colorType=2,bitDepth=8,lineSize=width*3;break;case _util2.ImageKind.RGBA_32BPP:colorType=6,bitDepth=8,lineSize=width*4;break;default:throw new Error("invalid format")}const literals=new Uint8Array((1+lineSize)*height);let offsetLiterals=0,offsetBytes=0;for(let y=0;y<height;++y)literals[offsetLiterals++]=0,literals.set(bytes.subarray(offsetBytes,offsetBytes+lineSize),offsetLiterals),offsetBytes+=lineSize,offsetLiterals+=lineSize;if(kind===_util2.ImageKind.GRAYSCALE_1BPP&&isMask){offsetLiterals=0;for(let y=0;y<height;y++){offsetLiterals++;for(let i=0;i<lineSize;i++)literals[offsetLiterals++]^=255}}const ihdr=new Uint8Array([width>>24&255,width>>16&255,width>>8&255,width&255,height>>24&255,height>>16&255,height>>8&255,height&255,bitDepth,colorType,0,0,0]),idat=deflateSync(literals),pngLength=PNG_HEADER.length+CHUNK_WRAPPER_SIZE*3+ihdr.length+idat.length,data=new Uint8Array(pngLength);let offset=0;return data.set(PNG_HEADER,offset),offset+=PNG_HEADER.length,writePngChunk("IHDR",ihdr,data,offset),offset+=CHUNK_WRAPPER_SIZE+ihdr.length,writePngChunk("IDATA",idat,data,offset),offset+=CHUNK_WRAPPER_SIZE+idat.length,writePngChunk("IEND",new Uint8Array(0),data,offset),createObjectURL(data,"image/png",forceDataSchema)}return __name2(encode,"encode"),__name(encode,"encode"),__name(__name2(function(imgData,forceDataSchema,isMask){const kind=imgData.kind===void 0?_util2.ImageKind.GRAYSCALE_1BPP:imgData.kind;return encode(imgData,kind,forceDataSchema,isMask)},"convertImgDataToPng2"),"convertImgDataToPng")}(),_SVGExtraState=class{static{__name2(this,"_SVGExtraState")}constructor(){this.fontSizeScale=1,this.fontWeight=SVG_DEFAULTS.fontWeight,this.fontSize=0,this.textMatrix=_util2.IDENTITY_MATRIX,this.fontMatrix=_util2.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_util2.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=SVG_DEFAULTS.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(x,y){this.x=x,this.y=y}};__name(_SVGExtraState,"SVGExtraState");let SVGExtraState=_SVGExtraState,clipCount=0,maskCount=0,shadingCount=0;exports2.SVGGraphics=SVGGraphics=(_b=class{static{__name2(this,"_b")}constructor(commonObjs,objs,forceDataSchema=!1){(0,_display_utils2.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new _display_utils2.DOMSVGFactory,this.current=new SVGExtraState,this.transformMatrix=_util2.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=commonObjs,this.objs=objs,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!forceDataSchema,this._operatorIdMapping=[];for(const op in _util2.OPS)this._operatorIdMapping[_util2.OPS[op]]=op}save(){this.transformStack.push(this.transformMatrix);const old=this.current;this.extraStack.push(old),this.current=old.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(items){this.save(),this.executeOpTree(items),this.restore()}loadDependencies(operatorList){const fnArray=operatorList.fnArray,argsArray=operatorList.argsArray;for(let i=0,ii=fnArray.length;i<ii;i++)if(fnArray[i]===_util2.OPS.dependency)for(const obj of argsArray[i]){const objsPool=obj.startsWith("g_")?this.commonObjs:this.objs,promise=new Promise(resolve=>{objsPool.get(obj,resolve)});this.current.dependencies.push(promise)}return Promise.all(this.current.dependencies)}transform(a,b,c,d,e,f){const transformMatrix=[a,b,c,d,e,f];this.transformMatrix=_util2.Util.transform(this.transformMatrix,transformMatrix),this.tgrp=null}getSVG(operatorList,viewport){this.viewport=viewport;const svgElement=this._initialize(viewport);return this.loadDependencies(operatorList).then(()=>(this.transformMatrix=_util2.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(operatorList)),svgElement))}convertOpList(operatorList){const operatorIdMapping=this._operatorIdMapping,argsArray=operatorList.argsArray,fnArray=operatorList.fnArray,opList=[];for(let i=0,ii=fnArray.length;i<ii;i++){const fnId=fnArray[i];opList.push({fnId,fn:operatorIdMapping[fnId],args:argsArray[i]})}return opListToTree(opList)}executeOpTree(opTree){for(const opTreeElement of opTree){const fn=opTreeElement.fn,fnId=opTreeElement.fnId,args=opTreeElement.args;switch(fnId|0){case _util2.OPS.beginText:this.beginText();break;case _util2.OPS.dependency:break;case _util2.OPS.setLeading:this.setLeading(args);break;case _util2.OPS.setLeadingMoveText:this.setLeadingMoveText(args[0],args[1]);break;case _util2.OPS.setFont:this.setFont(args);break;case _util2.OPS.showText:this.showText(args[0]);break;case _util2.OPS.showSpacedText:this.showText(args[0]);break;case _util2.OPS.endText:this.endText();break;case _util2.OPS.moveText:this.moveText(args[0],args[1]);break;case _util2.OPS.setCharSpacing:this.setCharSpacing(args[0]);break;case _util2.OPS.setWordSpacing:this.setWordSpacing(args[0]);break;case _util2.OPS.setHScale:this.setHScale(args[0]);break;case _util2.OPS.setTextMatrix:this.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util2.OPS.setTextRise:this.setTextRise(args[0]);break;case _util2.OPS.setTextRenderingMode:this.setTextRenderingMode(args[0]);break;case _util2.OPS.setLineWidth:this.setLineWidth(args[0]);break;case _util2.OPS.setLineJoin:this.setLineJoin(args[0]);break;case _util2.OPS.setLineCap:this.setLineCap(args[0]);break;case _util2.OPS.setMiterLimit:this.setMiterLimit(args[0]);break;case _util2.OPS.setFillRGBColor:this.setFillRGBColor(args[0],args[1],args[2]);break;case _util2.OPS.setStrokeRGBColor:this.setStrokeRGBColor(args[0],args[1],args[2]);break;case _util2.OPS.setStrokeColorN:this.setStrokeColorN(args);break;case _util2.OPS.setFillColorN:this.setFillColorN(args);break;case _util2.OPS.shadingFill:this.shadingFill(args[0]);break;case _util2.OPS.setDash:this.setDash(args[0],args[1]);break;case _util2.OPS.setRenderingIntent:this.setRenderingIntent(args[0]);break;case _util2.OPS.setFlatness:this.setFlatness(args[0]);break;case _util2.OPS.setGState:this.setGState(args[0]);break;case _util2.OPS.fill:this.fill();break;case _util2.OPS.eoFill:this.eoFill();break;case _util2.OPS.stroke:this.stroke();break;case _util2.OPS.fillStroke:this.fillStroke();break;case _util2.OPS.eoFillStroke:this.eoFillStroke();break;case _util2.OPS.clip:this.clip("nonzero");break;case _util2.OPS.eoClip:this.clip("evenodd");break;case _util2.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _util2.OPS.paintImageXObject:this.paintImageXObject(args[0]);break;case _util2.OPS.paintInlineImageXObject:this.paintInlineImageXObject(args[0]);break;case _util2.OPS.paintImageMaskXObject:this.paintImageMaskXObject(args[0]);break;case _util2.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(args[0],args[1]);break;case _util2.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _util2.OPS.closePath:this.closePath();break;case _util2.OPS.closeStroke:this.closeStroke();break;case _util2.OPS.closeFillStroke:this.closeFillStroke();break;case _util2.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _util2.OPS.nextLine:this.nextLine();break;case _util2.OPS.transform:this.transform(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util2.OPS.constructPath:this.constructPath(args[0],args[1]);break;case _util2.OPS.endPath:this.endPath();break;case 92:this.group(opTreeElement.items);break;default:(0,_util2.warn)(`Unimplemented operator ${fn}`);break}}}setWordSpacing(wordSpacing){this.current.wordSpacing=wordSpacing}setCharSpacing(charSpacing){this.current.charSpacing=charSpacing}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(a,b,c,d,e,f){const current=this.current;current.textMatrix=current.lineMatrix=[a,b,c,d,e,f],current.textMatrixScale=Math.hypot(a,b),current.x=current.lineX=0,current.y=current.lineY=0,current.xcoords=[],current.ycoords=[],current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.tspan.setAttributeNS(null,"y",pf(-current.y)),current.txtElement=this.svgFactory.createElement("svg:text"),current.txtElement.append(current.tspan)}beginText(){const current=this.current;current.x=current.lineX=0,current.y=current.lineY=0,current.textMatrix=_util2.IDENTITY_MATRIX,current.lineMatrix=_util2.IDENTITY_MATRIX,current.textMatrixScale=1,current.tspan=this.svgFactory.createElement("svg:tspan"),current.txtElement=this.svgFactory.createElement("svg:text"),current.txtgrp=this.svgFactory.createElement("svg:g"),current.xcoords=[],current.ycoords=[]}moveText(x,y){const current=this.current;current.x=current.lineX+=x,current.y=current.lineY+=y,current.xcoords=[],current.ycoords=[],current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.tspan.setAttributeNS(null,"y",pf(-current.y))}showText(glyphs){const current=this.current,font=current.font,fontSize=current.fontSize;if(fontSize===0)return;const fontSizeScale=current.fontSizeScale,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,vertical=font.vertical,spacingDir=vertical?1:-1,defaultVMetrics=font.defaultVMetrics,widthAdvanceScale=fontSize*current.fontMatrix[0];let x=0;for(const glyph of glyphs){if(glyph===null){x+=fontDirection*wordSpacing;continue}else if(typeof glyph=="number"){x+=spacingDir*glyph*fontSize/1e3;continue}const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,character=glyph.fontChar;let scaledX,scaledY,width=glyph.width;if(vertical){let vx;const vmetric=glyph.vmetric||defaultVMetrics;vx=glyph.vmetric?vmetric[1]:width*.5,vx=-vx*widthAdvanceScale;const vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width,scaledX=vx/fontSizeScale,scaledY=(x+vy)/fontSizeScale}else scaledX=x/fontSizeScale,scaledY=0;(glyph.isInFont||font.missingFile)&&(current.xcoords.push(current.x+scaledX),vertical&&current.ycoords.push(-current.y+scaledY),current.tspan.textContent+=character);let charWidth;vertical?charWidth=width*widthAdvanceScale-spacing*fontDirection:charWidth=width*widthAdvanceScale+spacing*fontDirection,x+=charWidth}current.tspan.setAttributeNS(null,"x",current.xcoords.map(pf).join(" ")),vertical?current.tspan.setAttributeNS(null,"y",current.ycoords.map(pf).join(" ")):current.tspan.setAttributeNS(null,"y",pf(-current.y)),vertical?current.y-=x:current.x+=x*textHScale,current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.fontStyle!==SVG_DEFAULTS.fontStyle&&current.tspan.setAttributeNS(null,"font-style",current.fontStyle),current.fontWeight!==SVG_DEFAULTS.fontWeight&&current.tspan.setAttributeNS(null,"font-weight",current.fontWeight);const fillStrokeMode=current.textRenderingMode&_util2.TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===_util2.TextRenderingMode.FILL||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE?(current.fillColor!==SVG_DEFAULTS.fillColor&&current.tspan.setAttributeNS(null,"fill",current.fillColor),current.fillAlpha<1&&current.tspan.setAttributeNS(null,"fill-opacity",current.fillAlpha)):current.textRenderingMode===_util2.TextRenderingMode.ADD_TO_PATH?current.tspan.setAttributeNS(null,"fill","transparent"):current.tspan.setAttributeNS(null,"fill","none"),fillStrokeMode===_util2.TextRenderingMode.STROKE||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE){const lineWidthScale=1/(current.textMatrixScale||1);this._setStrokeAttributes(current.tspan,lineWidthScale)}let textMatrix=current.textMatrix;current.textRise!==0&&(textMatrix=textMatrix.slice(),textMatrix[5]+=current.textRise),current.txtElement.setAttributeNS(null,"transform",`${pm(textMatrix)} scale(${pf(textHScale)}, -1)`),current.txtElement.setAttributeNS(XML_NS,"xml:space","preserve"),current.txtElement.append(current.tspan),current.txtgrp.append(current.txtElement),this._ensureTransformGroup().append(current.txtElement)}setLeadingMoveText(x,y){this.setLeading(-y),this.moveText(x,y)}addFontStyle(fontObj){if(!fontObj.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const url=createObjectURL(fontObj.data,fontObj.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${fontObj.loadedName}"; src: url(${url}); }
`}setFont(details){const current=this.current,fontObj=this.commonObjs.get(details[0]);let size=details[1];current.font=fontObj,this.embedFonts&&!fontObj.missingFile&&!this.embeddedFonts[fontObj.loadedName]&&(this.addFontStyle(fontObj),this.embeddedFonts[fontObj.loadedName]=fontObj),current.fontMatrix=fontObj.fontMatrix||_util2.FONT_IDENTITY_MATRIX;let bold="normal";fontObj.black?bold="900":fontObj.bold&&(bold="bold");const italic=fontObj.italic?"italic":"normal";size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,current.fontSize=size,current.fontFamily=fontObj.loadedName,current.fontWeight=bold,current.fontStyle=italic,current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"y",pf(-current.y)),current.xcoords=[],current.ycoords=[]}endText(){var _a22;const current=this.current;current.textRenderingMode&_util2.TextRenderingMode.ADD_TO_PATH_FLAG&&((_a22=current.txtElement)!=null&&_a22.hasChildNodes())&&(current.element=current.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(width){width>0&&(this.current.lineWidth=width)}setLineCap(style){this.current.lineCap=LINE_CAP_STYLES[style]}setLineJoin(style){this.current.lineJoin=LINE_JOIN_STYLES[style]}setMiterLimit(limit){this.current.miterLimit=limit}setStrokeAlpha(strokeAlpha){this.current.strokeAlpha=strokeAlpha}setStrokeRGBColor(r,g,b){this.current.strokeColor=_util2.Util.makeHexColor(r,g,b)}setFillAlpha(fillAlpha){this.current.fillAlpha=fillAlpha}setFillRGBColor(r,g,b){this.current.fillColor=_util2.Util.makeHexColor(r,g,b),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(args){this.current.strokeColor=this._makeColorN_Pattern(args)}setFillColorN(args){this.current.fillColor=this._makeColorN_Pattern(args)}shadingFill(args){const width=this.viewport.width,height=this.viewport.height,inv=_util2.Util.inverseTransform(this.transformMatrix),bl=_util2.Util.applyTransform([0,0],inv),br=_util2.Util.applyTransform([0,height],inv),ul=_util2.Util.applyTransform([width,0],inv),ur=_util2.Util.applyTransform([width,height],inv),x0=Math.min(bl[0],br[0],ul[0],ur[0]),y0=Math.min(bl[1],br[1],ul[1],ur[1]),x1=Math.max(bl[0],br[0],ul[0],ur[0]),y1=Math.max(bl[1],br[1],ul[1],ur[1]),rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x",x0),rect.setAttributeNS(null,"y",y0),rect.setAttributeNS(null,"width",x1-x0),rect.setAttributeNS(null,"height",y1-y0),rect.setAttributeNS(null,"fill",this._makeShadingPattern(args)),this.current.fillAlpha<1&&rect.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(rect)}_makeColorN_Pattern(args){return args[0]==="TilingPattern"?this._makeTilingPattern(args):this._makeShadingPattern(args)}_makeTilingPattern(args){const color=args[1],operatorList=args[2],matrix=args[3]||_util2.IDENTITY_MATRIX,[x0,y0,x1,y1]=args[4],xstep=args[5],ystep=args[6],paintType=args[7],tilingId=`shading${shadingCount++}`,[tx0,ty0,tx1,ty1]=_util2.Util.normalizeRect([..._util2.Util.applyTransform([x0,y0],matrix),..._util2.Util.applyTransform([x1,y1],matrix)]),[xscale,yscale]=_util2.Util.singularValueDecompose2dScale(matrix),txstep=xstep*xscale,tystep=ystep*yscale,tiling=this.svgFactory.createElement("svg:pattern");tiling.setAttributeNS(null,"id",tilingId),tiling.setAttributeNS(null,"patternUnits","userSpaceOnUse"),tiling.setAttributeNS(null,"width",txstep),tiling.setAttributeNS(null,"height",tystep),tiling.setAttributeNS(null,"x",`${tx0}`),tiling.setAttributeNS(null,"y",`${ty0}`);const svg=this.svg,transformMatrix=this.transformMatrix,fillColor=this.current.fillColor,strokeColor=this.current.strokeColor,bbox=this.svgFactory.create(tx1-tx0,ty1-ty0);if(this.svg=bbox,this.transformMatrix=matrix,paintType===2){const cssColor=_util2.Util.makeHexColor(...color);this.current.fillColor=cssColor,this.current.strokeColor=cssColor}return this.executeOpTree(this.convertOpList(operatorList)),this.svg=svg,this.transformMatrix=transformMatrix,this.current.fillColor=fillColor,this.current.strokeColor=strokeColor,tiling.append(bbox.childNodes[0]),this.defs.append(tiling),`url(#${tilingId})`}_makeShadingPattern(args){switch(typeof args=="string"&&(args=this.objs.get(args)),args[0]){case"RadialAxial":const shadingId=`shading${shadingCount++}`,colorStops=args[3];let gradient;switch(args[1]){case"axial":const point0=args[4],point1=args[5];gradient=this.svgFactory.createElement("svg:linearGradient"),gradient.setAttributeNS(null,"id",shadingId),gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),gradient.setAttributeNS(null,"x1",point0[0]),gradient.setAttributeNS(null,"y1",point0[1]),gradient.setAttributeNS(null,"x2",point1[0]),gradient.setAttributeNS(null,"y2",point1[1]);break;case"radial":const focalPoint=args[4],circlePoint=args[5],focalRadius=args[6],circleRadius=args[7];gradient=this.svgFactory.createElement("svg:radialGradient"),gradient.setAttributeNS(null,"id",shadingId),gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),gradient.setAttributeNS(null,"cx",circlePoint[0]),gradient.setAttributeNS(null,"cy",circlePoint[1]),gradient.setAttributeNS(null,"r",circleRadius),gradient.setAttributeNS(null,"fx",focalPoint[0]),gradient.setAttributeNS(null,"fy",focalPoint[1]),gradient.setAttributeNS(null,"fr",focalRadius);break;default:throw new Error(`Unknown RadialAxial type: ${args[1]}`)}for(const colorStop of colorStops){const stop=this.svgFactory.createElement("svg:stop");stop.setAttributeNS(null,"offset",colorStop[0]),stop.setAttributeNS(null,"stop-color",colorStop[1]),gradient.append(stop)}return this.defs.append(gradient),`url(#${shadingId})`;case"Mesh":return(0,_util2.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${args[0]}`)}}setDash(dashArray,dashPhase){this.current.dashArray=dashArray,this.current.dashPhase=dashPhase}constructPath(ops,args){const current=this.current;let x=current.x,y=current.y,d=[],j=0;for(const op of ops)switch(op|0){case _util2.OPS.rectangle:x=args[j++],y=args[j++];const width=args[j++],height=args[j++],xw=x+width,yh=y+height;d.push("M",pf(x),pf(y),"L",pf(xw),pf(y),"L",pf(xw),pf(yh),"L",pf(x),pf(yh),"Z");break;case _util2.OPS.moveTo:x=args[j++],y=args[j++],d.push("M",pf(x),pf(y));break;case _util2.OPS.lineTo:x=args[j++],y=args[j++],d.push("L",pf(x),pf(y));break;case _util2.OPS.curveTo:x=args[j+4],y=args[j+5],d.push("C",pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]),pf(x),pf(y)),j+=6;break;case _util2.OPS.curveTo2:d.push("C",pf(x),pf(y),pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3])),x=args[j+2],y=args[j+3],j+=4;break;case _util2.OPS.curveTo3:x=args[j+2],y=args[j+3],d.push("C",pf(args[j]),pf(args[j+1]),pf(x),pf(y),pf(x),pf(y)),j+=4;break;case _util2.OPS.closePath:d.push("Z");break}d=d.join(" "),current.path&&ops.length>0&&ops[0]!==_util2.OPS.rectangle&&ops[0]!==_util2.OPS.moveTo?d=current.path.getAttributeNS(null,"d")+d:(current.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(current.path)),current.path.setAttributeNS(null,"d",d),current.path.setAttributeNS(null,"fill","none"),current.element=current.path,current.setCurrentPoint(x,y)}endPath(){const current=this.current;if(current.path=null,!this.pendingClip)return;if(!current.element){this.pendingClip=null;return}const clipId=`clippath${clipCount++}`,clipPath=this.svgFactory.createElement("svg:clipPath");clipPath.setAttributeNS(null,"id",clipId),clipPath.setAttributeNS(null,"transform",pm(this.transformMatrix));const clipElement=current.element.cloneNode(!0);if(this.pendingClip==="evenodd"?clipElement.setAttributeNS(null,"clip-rule","evenodd"):clipElement.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,clipPath.append(clipElement),this.defs.append(clipPath),current.activeClipUrl){current.clipGroup=null;for(const prev of this.extraStack)prev.clipGroup=null;clipPath.setAttributeNS(null,"clip-path",current.activeClipUrl)}current.activeClipUrl=`url(#${clipId})`,this.tgrp=null}clip(type){this.pendingClip=type}closePath(){const current=this.current;if(current.path){const d=`${current.path.getAttributeNS(null,"d")}Z`;current.path.setAttributeNS(null,"d",d)}}setLeading(leading){this.current.leading=-leading}setTextRise(textRise){this.current.textRise=textRise}setTextRenderingMode(textRenderingMode){this.current.textRenderingMode=textRenderingMode}setHScale(scale){this.current.textHScale=scale/100}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(const[key,value]of states)switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value);break;case"CA":this.setStrokeAlpha(value);break;case"ca":this.setFillAlpha(value);break;default:(0,_util2.warn)(`Unimplemented graphic state operator ${key}`);break}}fill(){const current=this.current;current.element&&(current.element.setAttributeNS(null,"fill",current.fillColor),current.element.setAttributeNS(null,"fill-opacity",current.fillAlpha),this.endPath())}stroke(){const current=this.current;current.element&&(this._setStrokeAttributes(current.element),current.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(element,lineWidthScale=1){const current=this.current;let dashArray=current.dashArray;lineWidthScale!==1&&dashArray.length>0&&(dashArray=dashArray.map(function(value){return lineWidthScale*value})),element.setAttributeNS(null,"stroke",current.strokeColor),element.setAttributeNS(null,"stroke-opacity",current.strokeAlpha),element.setAttributeNS(null,"stroke-miterlimit",pf(current.miterLimit)),element.setAttributeNS(null,"stroke-linecap",current.lineCap),element.setAttributeNS(null,"stroke-linejoin",current.lineJoin),element.setAttributeNS(null,"stroke-width",pf(lineWidthScale*current.lineWidth)+"px"),element.setAttributeNS(null,"stroke-dasharray",dashArray.map(pf).join(" ")),element.setAttributeNS(null,"stroke-dashoffset",pf(lineWidthScale*current.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0"),rect.setAttributeNS(null,"y","0"),rect.setAttributeNS(null,"width","1px"),rect.setAttributeNS(null,"height","1px"),rect.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(rect)}paintImageXObject(objId){const imgData=objId.startsWith("g_")?this.commonObjs.get(objId):this.objs.get(objId);if(!imgData){(0,_util2.warn)(`Dependent image with object ID ${objId} is not ready yet`);return}this.paintInlineImageXObject(imgData)}paintInlineImageXObject(imgData,mask){const width=imgData.width,height=imgData.height,imgSrc=convertImgDataToPng(imgData,this.forceDataSchema,!!mask),cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x","0"),cliprect.setAttributeNS(null,"y","0"),cliprect.setAttributeNS(null,"width",pf(width)),cliprect.setAttributeNS(null,"height",pf(height)),this.current.element=cliprect,this.clip("nonzero");const imgEl=this.svgFactory.createElement("svg:image");imgEl.setAttributeNS(XLINK_NS,"xlink:href",imgSrc),imgEl.setAttributeNS(null,"x","0"),imgEl.setAttributeNS(null,"y",pf(-height)),imgEl.setAttributeNS(null,"width",pf(width)+"px"),imgEl.setAttributeNS(null,"height",pf(height)+"px"),imgEl.setAttributeNS(null,"transform",`scale(${pf(1/width)} ${pf(-1/height)})`),mask?mask.append(imgEl):this._ensureTransformGroup().append(imgEl)}paintImageMaskXObject(imgData){const current=this.current,width=imgData.width,height=imgData.height,fillColor=current.fillColor;current.maskId=`mask${maskCount++}`;const mask=this.svgFactory.createElement("svg:mask");mask.setAttributeNS(null,"id",current.maskId);const rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0"),rect.setAttributeNS(null,"y","0"),rect.setAttributeNS(null,"width",pf(width)),rect.setAttributeNS(null,"height",pf(height)),rect.setAttributeNS(null,"fill",fillColor),rect.setAttributeNS(null,"mask",`url(#${current.maskId})`),this.defs.append(mask),this._ensureTransformGroup().append(rect),this.paintInlineImageXObject(imgData,mask)}paintFormXObjectBegin(matrix,bbox){if(Array.isArray(matrix)&&matrix.length===6&&this.transform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]),bbox){const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x",bbox[0]),cliprect.setAttributeNS(null,"y",bbox[1]),cliprect.setAttributeNS(null,"width",pf(width)),cliprect.setAttributeNS(null,"height",pf(height)),this.current.element=cliprect,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(viewport){const svg=this.svgFactory.create(viewport.width,viewport.height),definitions=this.svgFactory.createElement("svg:defs");svg.append(definitions),this.defs=definitions;const rootGroup=this.svgFactory.createElement("svg:g");return rootGroup.setAttributeNS(null,"transform",pm(viewport.transform)),svg.append(rootGroup),this.svg=rootGroup,svg}_ensureClipGroup(){if(!this.current.clipGroup){const clipGroup=this.svgFactory.createElement("svg:g");clipGroup.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(clipGroup),this.current.clipGroup=clipGroup}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}},__name(_b,"SVGGraphics"),_b)}},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PDFNodeStream=void 0;var _util2=__w_pdfjs_require__2(1),_network_utils=__w_pdfjs_require__2(33);const fs=require$$7,http=require$$7,https=require$$7,url=require$$7,fileUriRegex=/^file:\/\/\/[a-zA-Z]:\//;function parseUrl(sourceUrl){const parsedUrl=url.parse(sourceUrl);return parsedUrl.protocol==="file:"||parsedUrl.host?parsedUrl:/^[a-z]:[/\\]/i.test(sourceUrl)?url.parse(`file:///${sourceUrl}`):(parsedUrl.host||(parsedUrl.protocol="file:"),parsedUrl)}__name2(parseUrl,"parseUrl"),__name(parseUrl,"parseUrl");const _PDFNodeStream=class{static{__name2(this,"_PDFNodeStream")}constructor(source){this.source=source,this.url=parseUrl(source.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _a2;return((_a2=this._fullRequestReader)==null?void 0:_a2._loaded)??0}getFullReader(){return(0,_util2.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this),this._fullRequestReader}getRangeReader(start,end){if(end<=this._progressiveDataLength)return null;const rangeReader=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,start,end):new PDFNodeStreamRangeReader(this,start,end);return this._rangeRequestReaders.push(rangeReader),rangeReader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}};__name(_PDFNodeStream,"PDFNodeStream");let PDFNodeStream=_PDFNodeStream;exports2.PDFNodeStream=PDFNodeStream;const _BaseFullReader=class{static{__name2(this,"_BaseFullReader")}constructor(stream){this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null;const source=stream.source;this._contentLength=source.length,this._loaded=0,this._filename=null,this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._readableStream=null,this._readCapability=(0,_util2.createPromiseCapability)(),this._headersCapability=(0,_util2.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const chunk=this._readableStream.read();return chunk===null?(this._readCapability=(0,_util2.createPromiseCapability)(),this.read()):(this._loaded+=chunk.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(chunk).buffer,done:!1})}cancel(reason){if(!this._readableStream){this._error(reason);return}this._readableStream.destroy(reason)}_error(reason){this._storedError=reason,this._readCapability.resolve()}_setReadableStream(readableStream){this._readableStream=readableStream,readableStream.on("readable",()=>{this._readCapability.resolve()}),readableStream.on("end",()=>{readableStream.destroy(),this._done=!0,this._readCapability.resolve()}),readableStream.on("error",reason=>{this._error(reason)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new _util2.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}};__name(_BaseFullReader,"BaseFullReader");let BaseFullReader=_BaseFullReader;const _BaseRangeReader=class{static{__name2(this,"_BaseRangeReader")}constructor(stream){this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,_util2.createPromiseCapability)();const source=stream.source;this._isStreamingSupported=!source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const chunk=this._readableStream.read();return chunk===null?(this._readCapability=(0,_util2.createPromiseCapability)(),this.read()):(this._loaded+=chunk.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(chunk).buffer,done:!1})}cancel(reason){if(!this._readableStream){this._error(reason);return}this._readableStream.destroy(reason)}_error(reason){this._storedError=reason,this._readCapability.resolve()}_setReadableStream(readableStream){this._readableStream=readableStream,readableStream.on("readable",()=>{this._readCapability.resolve()}),readableStream.on("end",()=>{readableStream.destroy(),this._done=!0,this._readCapability.resolve()}),readableStream.on("error",reason=>{this._error(reason)}),this._storedError&&this._readableStream.destroy(this._storedError)}};__name(_BaseRangeReader,"BaseRangeReader");let BaseRangeReader=_BaseRangeReader;function createRequestOptions(parsedUrl,headers){return{protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.hostname,port:parsedUrl.port,path:parsedUrl.path,method:"GET",headers}}__name2(createRequestOptions,"createRequestOptions"),__name(createRequestOptions,"createRequestOptions");const _PDFNodeStreamFullReader=class extends BaseFullReader{static{__name2(this,"_PDFNodeStreamFullReader")}constructor(stream){super(stream);const handleResponse=__name(response=>{if(response.statusCode===404){const error=new _util2.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=error,this._headersCapability.reject(error);return}this._headersCapability.resolve(),this._setReadableStream(response);const getResponseHeader=__name(name=>this._readableStream.headers[name.toLowerCase()],"getResponseHeader"),{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests,this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader)},"handleResponse");this._request=null,this._url.protocol==="http:"?this._request=http.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse):this._request=https.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse),this._request.on("error",reason=>{this._storedError=reason,this._headersCapability.reject(reason)}),this._request.end()}};__name(_PDFNodeStreamFullReader,"PDFNodeStreamFullReader");let PDFNodeStreamFullReader=_PDFNodeStreamFullReader;const _PDFNodeStreamRangeReader=class extends BaseRangeReader{static{__name2(this,"_PDFNodeStreamRangeReader")}constructor(stream,start,end){super(stream),this._httpHeaders={};for(const property in stream.httpHeaders){const value=stream.httpHeaders[property];typeof value>"u"||(this._httpHeaders[property]=value)}this._httpHeaders.Range=`bytes=${start}-${end-1}`;const handleResponse=__name(response=>{if(response.statusCode===404){const error=new _util2.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=error;return}this._setReadableStream(response)},"handleResponse");this._request=null,this._url.protocol==="http:"?this._request=http.request(createRequestOptions(this._url,this._httpHeaders),handleResponse):this._request=https.request(createRequestOptions(this._url,this._httpHeaders),handleResponse),this._request.on("error",reason=>{this._storedError=reason}),this._request.end()}};__name(_PDFNodeStreamRangeReader,"PDFNodeStreamRangeReader");let PDFNodeStreamRangeReader=_PDFNodeStreamRangeReader;const _PDFNodeStreamFsFullReader=class extends BaseFullReader{static{__name2(this,"_PDFNodeStreamFsFullReader")}constructor(stream){super(stream);let path=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(path=path.replace(/^\//,"")),fs.lstat(path,(error,stat)=>{if(error){error.code==="ENOENT"&&(error=new _util2.MissingPDFException(`Missing PDF "${path}".`)),this._storedError=error,this._headersCapability.reject(error);return}this._contentLength=stat.size,this._setReadableStream(fs.createReadStream(path)),this._headersCapability.resolve()})}};__name(_PDFNodeStreamFsFullReader,"PDFNodeStreamFsFullReader");let PDFNodeStreamFsFullReader=_PDFNodeStreamFsFullReader;const _PDFNodeStreamFsRangeReader=class extends BaseRangeReader{static{__name2(this,"_PDFNodeStreamFsRangeReader")}constructor(stream,start,end){super(stream);let path=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(path=path.replace(/^\//,"")),this._setReadableStream(fs.createReadStream(path,{start,end:end-1}))}};__name(_PDFNodeStreamFsRangeReader,"PDFNodeStreamFsRangeReader");let PDFNodeStreamFsRangeReader=_PDFNodeStreamFsRangeReader},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.createResponseStatusError=createResponseStatusError,exports2.extractFilenameFromHeader=extractFilenameFromHeader,exports2.validateRangeRequestCapabilities=validateRangeRequestCapabilities,exports2.validateResponseStatus=validateResponseStatus;var _util2=__w_pdfjs_require__2(1),_content_disposition=__w_pdfjs_require__2(34),_display_utils2=__w_pdfjs_require__2(8);function validateRangeRequestCapabilities({getResponseHeader,isHttp,rangeChunkSize,disableRange}){const returnValues={allowRangeRequests:!1,suggestedLength:void 0},length=parseInt(getResponseHeader("Content-Length"),10);return!Number.isInteger(length)||(returnValues.suggestedLength=length,length<=2*rangeChunkSize)||disableRange||!isHttp||getResponseHeader("Accept-Ranges")!=="bytes"||(getResponseHeader("Content-Encoding")||"identity")!=="identity"||(returnValues.allowRangeRequests=!0),returnValues}__name2(validateRangeRequestCapabilities,"validateRangeRequestCapabilities"),__name(validateRangeRequestCapabilities,"validateRangeRequestCapabilities");function extractFilenameFromHeader(getResponseHeader){const contentDisposition=getResponseHeader("Content-Disposition");if(contentDisposition){let filename=(0,_content_disposition.getFilenameFromContentDispositionHeader)(contentDisposition);if(filename.includes("%"))try{filename=decodeURIComponent(filename)}catch{}if((0,_display_utils2.isPdfFile)(filename))return filename}return null}__name2(extractFilenameFromHeader,"extractFilenameFromHeader"),__name(extractFilenameFromHeader,"extractFilenameFromHeader");function createResponseStatusError(status,url){return status===404||status===0&&url.startsWith("file:")?new _util2.MissingPDFException('Missing PDF "'+url+'".'):new _util2.UnexpectedResponseException(`Unexpected server response (${status}) while retrieving PDF "${url}".`,status)}__name2(createResponseStatusError,"createResponseStatusError"),__name(createResponseStatusError,"createResponseStatusError");function validateResponseStatus(status){return status===200||status===206}__name2(validateResponseStatus,"validateResponseStatus"),__name(validateResponseStatus,"validateResponseStatus")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.getFilenameFromContentDispositionHeader=getFilenameFromContentDispositionHeader;var _util2=__w_pdfjs_require__2(1);function getFilenameFromContentDispositionHeader(contentDisposition){let needsEncodingFixup=!0,tmp=toParamRegExp("filename\\*","i").exec(contentDisposition);if(tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);return filename=unescape(filename),filename=rfc5987decode(filename),filename=rfc2047decode(filename),fixupEncoding(filename)}if(tmp=rfc2231getparam(contentDisposition),tmp){const filename=rfc2047decode(tmp);return fixupEncoding(filename)}if(tmp=toParamRegExp("filename","i").exec(contentDisposition),tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);return filename=rfc2047decode(filename),fixupEncoding(filename)}function toParamRegExp(attributePattern,flags){return new RegExp("(?:^|;)\\s*"+attributePattern+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',flags)}__name2(toParamRegExp,"toParamRegExp"),__name(toParamRegExp,"toParamRegExp");function textdecode(encoding,value){if(encoding){if(!/^[\x00-\xFF]+$/.test(value))return value;try{const decoder=new TextDecoder(encoding,{fatal:!0}),buffer=(0,_util2.stringToBytes)(value);value=decoder.decode(buffer),needsEncodingFixup=!1}catch{}}return value}__name2(textdecode,"textdecode"),__name(textdecode,"textdecode");function fixupEncoding(value){return needsEncodingFixup&&/[\x80-\xff]/.test(value)&&(value=textdecode("utf-8",value),needsEncodingFixup&&(value=textdecode("iso-8859-1",value))),value}__name2(fixupEncoding,"fixupEncoding"),__name(fixupEncoding,"fixupEncoding");function rfc2231getparam(contentDispositionStr){const matches=[];let match;const iter=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(match=iter.exec(contentDispositionStr))!==null;){let[,n,quot,part]=match;if(n=parseInt(n,10),n in matches){if(n===0)break;continue}matches[n]=[quot,part]}const parts=[];for(let n=0;n<matches.length&&n in matches;++n){let[quot,part]=matches[n];part=rfc2616unquote(part),quot&&(part=unescape(part),n===0&&(part=rfc5987decode(part))),parts.push(part)}return parts.join("")}__name2(rfc2231getparam,"rfc2231getparam"),__name(rfc2231getparam,"rfc2231getparam");function rfc2616unquote(value){if(value.startsWith('"')){const parts=value.slice(1).split('\\"');for(let i=0;i<parts.length;++i){const quotindex=parts[i].indexOf('"');quotindex!==-1&&(parts[i]=parts[i].slice(0,quotindex),parts.length=i+1),parts[i]=parts[i].replace(/\\(.)/g,"$1")}value=parts.join('"')}return value}__name2(rfc2616unquote,"rfc2616unquote"),__name(rfc2616unquote,"rfc2616unquote");function rfc5987decode(extvalue){const encodingend=extvalue.indexOf("'");if(encodingend===-1)return extvalue;const encoding=extvalue.slice(0,encodingend),value=extvalue.slice(encodingend+1).replace(/^[^']*'/,"");return textdecode(encoding,value)}__name2(rfc5987decode,"rfc5987decode"),__name(rfc5987decode,"rfc5987decode");function rfc2047decode(value){return!value.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(value)?value:value.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(matches,charset,encoding,text){if(encoding==="q"||encoding==="Q")return text=text.replace(/_/g," "),text=text.replace(/=([0-9a-fA-F]{2})/g,function(match,hex){return String.fromCharCode(parseInt(hex,16))}),textdecode(charset,text);try{text=atob(text)}catch{}return textdecode(charset,text)})}return __name2(rfc2047decode,"rfc2047decode"),__name(rfc2047decode,"rfc2047decode"),""}__name2(getFilenameFromContentDispositionHeader,"getFilenameFromContentDispositionHeader"),__name(getFilenameFromContentDispositionHeader,"getFilenameFromContentDispositionHeader")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PDFNetworkStream=void 0;var _util2=__w_pdfjs_require__2(1),_network_utils=__w_pdfjs_require__2(33);const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function getArrayBuffer(xhr){const data=xhr.response;return typeof data!="string"?data:(0,_util2.stringToBytes)(data).buffer}__name2(getArrayBuffer,"getArrayBuffer"),__name(getArrayBuffer,"getArrayBuffer");const _NetworkManager=class{static{__name2(this,"_NetworkManager")}constructor(url,args={}){this.url=url,this.isHttp=/^https?:/i.test(url),this.httpHeaders=this.isHttp&&args.httpHeaders||Object.create(null),this.withCredentials=args.withCredentials||!1,this.getXhr=args.getXhr||__name(__name2(function(){return new XMLHttpRequest},"NetworkManager_getXhr"),"NetworkManager_getXhr"),this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(begin,end,listeners){const args={begin,end};for(const prop in listeners)args[prop]=listeners[prop];return this.request(args)}requestFull(listeners){return this.request(listeners)}request(args){const xhr=this.getXhr(),xhrId=this.currXhrId++,pendingRequest=this.pendingRequests[xhrId]={xhr};xhr.open("GET",this.url),xhr.withCredentials=this.withCredentials;for(const property in this.httpHeaders){const value=this.httpHeaders[property];typeof value>"u"||xhr.setRequestHeader(property,value)}return this.isHttp&&"begin"in args&&"end"in args?(xhr.setRequestHeader("Range",`bytes=${args.begin}-${args.end-1}`),pendingRequest.expectedStatus=PARTIAL_CONTENT_RESPONSE):pendingRequest.expectedStatus=OK_RESPONSE,xhr.responseType="arraybuffer",args.onError&&(xhr.onerror=function(evt){args.onError(xhr.status)}),xhr.onreadystatechange=this.onStateChange.bind(this,xhrId),xhr.onprogress=this.onProgress.bind(this,xhrId),pendingRequest.onHeadersReceived=args.onHeadersReceived,pendingRequest.onDone=args.onDone,pendingRequest.onError=args.onError,pendingRequest.onProgress=args.onProgress,xhr.send(null),xhrId}onProgress(xhrId,evt){var _a2;const pendingRequest=this.pendingRequests[xhrId];pendingRequest&&((_a2=pendingRequest.onProgress)==null||_a2.call(pendingRequest,evt))}onStateChange(xhrId,evt){var _a2,_b,_c;const pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest)return;const xhr=pendingRequest.xhr;if(xhr.readyState>=2&&pendingRequest.onHeadersReceived&&(pendingRequest.onHeadersReceived(),delete pendingRequest.onHeadersReceived),xhr.readyState!==4||!(xhrId in this.pendingRequests))return;if(delete this.pendingRequests[xhrId],xhr.status===0&&this.isHttp){(_a2=pendingRequest.onError)==null||_a2.call(pendingRequest,xhr.status);return}const xhrStatus=xhr.status||OK_RESPONSE;if(!(xhrStatus===OK_RESPONSE&&pendingRequest.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&xhrStatus!==pendingRequest.expectedStatus){(_b=pendingRequest.onError)==null||_b.call(pendingRequest,xhr.status);return}const chunk=getArrayBuffer(xhr);if(xhrStatus===PARTIAL_CONTENT_RESPONSE){const rangeHeader=xhr.getResponseHeader("Content-Range"),matches=/bytes (\d+)-(\d+)\/(\d+)/.exec(rangeHeader);pendingRequest.onDone({begin:parseInt(matches[1],10),chunk})}else chunk?pendingRequest.onDone({begin:0,chunk}):(_c=pendingRequest.onError)==null||_c.call(pendingRequest,xhr.status)}getRequestXhr(xhrId){return this.pendingRequests[xhrId].xhr}isPendingRequest(xhrId){return xhrId in this.pendingRequests}abortRequest(xhrId){const xhr=this.pendingRequests[xhrId].xhr;delete this.pendingRequests[xhrId],xhr.abort()}};__name(_NetworkManager,"NetworkManager");let NetworkManager=_NetworkManager;const _PDFNetworkStream=class{static{__name2(this,"_PDFNetworkStream")}constructor(source){this._source=source,this._manager=new NetworkManager(source.url,{httpHeaders:source.httpHeaders,withCredentials:source.withCredentials}),this._rangeChunkSize=source.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(reader){const i=this._rangeRequestReaders.indexOf(reader);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return(0,_util2.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(begin,end){const reader=new PDFNetworkStreamRangeRequestReader(this._manager,begin,end);return reader.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(reader),reader}cancelAllRequests(reason){var _a2;(_a2=this._fullRequestReader)==null||_a2.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}};__name(_PDFNetworkStream,"PDFNetworkStream");let PDFNetworkStream=_PDFNetworkStream;exports2.PDFNetworkStream=PDFNetworkStream;const _PDFNetworkStreamFullRequestReader=class{static{__name2(this,"_PDFNetworkStreamFullRequestReader")}constructor(manager,source){this._manager=manager;const args={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=source.url,this._fullRequestId=manager.requestFull(args),this._headersReceivedCapability=(0,_util2.createPromiseCapability)(),this._disableRange=source.disableRange||!1,this._contentLength=source.length,this._rangeChunkSize=source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const fullRequestXhrId=this._fullRequestId,fullRequestXhr=this._manager.getRequestXhr(fullRequestXhrId),getResponseHeader=__name(name=>fullRequestXhr.getResponseHeader(name),"getResponseHeader"),{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});allowRangeRequests&&(this._isRangeSupported=!0),this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),this._isRangeSupported&&this._manager.abortRequest(fullRequestXhrId),this._headersReceivedCapability.resolve()}_onDone(data){if(data&&(this._requests.length>0?this._requests.shift().resolve({value:data.chunk,done:!1}):this._cachedChunks.push(data.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url),this._headersReceivedCapability.reject(this._storedError);for(const requestCapability of this._requests)requestCapability.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(evt){var _a2;(_a2=this.onProgress)==null||_a2.call(this,{loaded:evt.loaded,total:evt.lengthComputable?evt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util2.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0,this._headersReceivedCapability.reject(reason);for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}};__name(_PDFNetworkStreamFullRequestReader,"PDFNetworkStreamFullRequestReader");let PDFNetworkStreamFullRequestReader=_PDFNetworkStreamFullRequestReader;const _PDFNetworkStreamRangeRequestReader=class{static{__name2(this,"_PDFNetworkStreamRangeRequestReader")}constructor(manager,begin,end){this._manager=manager;const args={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=manager.url,this._requestId=manager.requestRange(begin,end,args),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var _a2;(_a2=this.onClosed)==null||_a2.call(this,this)}_onDone(data){const chunk=data.chunk;this._requests.length>0?this._requests.shift().resolve({value:chunk,done:!1}):this._queuedChunk=chunk,this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url);for(const requestCapability of this._requests)requestCapability.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(evt){var _a2;this.isStreamingSupported||(_a2=this.onProgress)==null||_a2.call(this,{loaded:evt.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const chunk=this._queuedChunk;return this._queuedChunk=null,{value:chunk,done:!1}}if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util2.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}};__name(_PDFNetworkStreamRangeRequestReader,"PDFNetworkStreamRangeRequestReader");let PDFNetworkStreamRangeRequestReader=_PDFNetworkStreamRangeRequestReader},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PDFFetchStream=void 0;var _util2=__w_pdfjs_require__2(1),_network_utils=__w_pdfjs_require__2(33);function createFetchOptions(headers,withCredentials,abortController){return{method:"GET",headers,signal:abortController.signal,mode:"cors",credentials:withCredentials?"include":"same-origin",redirect:"follow"}}__name2(createFetchOptions,"createFetchOptions"),__name(createFetchOptions,"createFetchOptions");function createHeaders(httpHeaders){const headers=new Headers;for(const property in httpHeaders){const value=httpHeaders[property];typeof value>"u"||headers.append(property,value)}return headers}__name2(createHeaders,"createHeaders"),__name(createHeaders,"createHeaders");const _PDFFetchStream=class{static{__name2(this,"_PDFFetchStream")}constructor(source){this.source=source,this.isHttp=/^https?:/i.test(source.url),this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _a2;return((_a2=this._fullRequestReader)==null?void 0:_a2._loaded)??0}getFullReader(){return(0,_util2.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(begin,end){if(end<=this._progressiveDataLength)return null;const reader=new PDFFetchStreamRangeReader(this,begin,end);return this._rangeRequestReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}};__name(_PDFFetchStream,"PDFFetchStream");let PDFFetchStream=_PDFFetchStream;exports2.PDFFetchStream=PDFFetchStream;const _PDFFetchStreamReader=class{static{__name2(this,"_PDFFetchStreamReader")}constructor(stream){this._stream=stream,this._reader=null,this._loaded=0,this._filename=null;const source=stream.source;this._withCredentials=source.withCredentials||!1,this._contentLength=source.length,this._headersCapability=(0,_util2.createPromiseCapability)(),this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._headers=createHeaders(this._stream.httpHeaders);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);this._reader=response.body.getReader(),this._headersCapability.resolve();const getResponseHeader=__name(name=>response.headers.get(name),"getResponseHeader"),{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests,this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _util2.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value,done}=await this._reader.read();return done?{value,done}:(this._loaded+=value.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(value).buffer,done:!1})}cancel(reason){this._reader&&this._reader.cancel(reason),this._abortController.abort()}};__name(_PDFFetchStreamReader,"PDFFetchStreamReader");let PDFFetchStreamReader=_PDFFetchStreamReader;const _PDFFetchStreamRangeReader=class{static{__name2(this,"_PDFFetchStreamRangeReader")}constructor(stream,begin,end){this._stream=stream,this._reader=null,this._loaded=0;const source=stream.source;this._withCredentials=source.withCredentials||!1,this._readCapability=(0,_util2.createPromiseCapability)(),this._isStreamingSupported=!source.disableStream,this._abortController=new AbortController,this._headers=createHeaders(this._stream.httpHeaders),this._headers.append("Range",`bytes=${begin}-${end-1}`);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);this._readCapability.resolve(),this._reader=response.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value,done}=await this._reader.read();return done?{value,done}:(this._loaded+=value.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(value).buffer,done:!1})}cancel(reason){this._reader&&this._reader.cancel(reason),this._abortController.abort()}};__name(_PDFFetchStreamRangeReader,"PDFFetchStreamRangeReader");let PDFFetchStreamRangeReader=_PDFFetchStreamRangeReader}],__webpack_module_cache__={};function __w_pdfjs_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==void 0)return cachedModule.exports;var module2=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module2,module2.exports,__w_pdfjs_require__),module2.exports}__name2(__w_pdfjs_require__,"__w_pdfjs_require__"),__name(__w_pdfjs_require__,"__w_pdfjs_require__");var __webpack_exports__={};return(()=>{var exports2=__webpack_exports__;Object.defineProperty(exports2,"__esModule",{value:!0}),Object.defineProperty(exports2,"AnnotationEditorLayer",{enumerable:!0,get:function(){return _annotation_editor_layer.AnnotationEditorLayer}}),Object.defineProperty(exports2,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return _util2.AnnotationEditorParamsType}}),Object.defineProperty(exports2,"AnnotationEditorType",{enumerable:!0,get:function(){return _util2.AnnotationEditorType}}),Object.defineProperty(exports2,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return _tools.AnnotationEditorUIManager}}),Object.defineProperty(exports2,"AnnotationLayer",{enumerable:!0,get:function(){return _annotation_layer.AnnotationLayer}}),Object.defineProperty(exports2,"AnnotationMode",{enumerable:!0,get:function(){return _util2.AnnotationMode}}),Object.defineProperty(exports2,"CMapCompressionType",{enumerable:!0,get:function(){return _util2.CMapCompressionType}}),Object.defineProperty(exports2,"GlobalWorkerOptions",{enumerable:!0,get:function(){return _worker_options2.GlobalWorkerOptions}}),Object.defineProperty(exports2,"InvalidPDFException",{enumerable:!0,get:function(){return _util2.InvalidPDFException}}),Object.defineProperty(exports2,"LoopbackPort",{enumerable:!0,get:function(){return _api.LoopbackPort}}),Object.defineProperty(exports2,"MissingPDFException",{enumerable:!0,get:function(){return _util2.MissingPDFException}}),Object.defineProperty(exports2,"OPS",{enumerable:!0,get:function(){return _util2.OPS}}),Object.defineProperty(exports2,"PDFDataRangeTransport",{enumerable:!0,get:function(){return _api.PDFDataRangeTransport}}),Object.defineProperty(exports2,"PDFDateString",{enumerable:!0,get:function(){return _display_utils2.PDFDateString}}),Object.defineProperty(exports2,"PDFWorker",{enumerable:!0,get:function(){return _api.PDFWorker}}),Object.defineProperty(exports2,"PasswordResponses",{enumerable:!0,get:function(){return _util2.PasswordResponses}}),Object.defineProperty(exports2,"PermissionFlag",{enumerable:!0,get:function(){return _util2.PermissionFlag}}),Object.defineProperty(exports2,"PixelsPerInch",{enumerable:!0,get:function(){return _display_utils2.PixelsPerInch}}),Object.defineProperty(exports2,"RenderingCancelledException",{enumerable:!0,get:function(){return _display_utils2.RenderingCancelledException}}),Object.defineProperty(exports2,"SVGGraphics",{enumerable:!0,get:function(){return _svg.SVGGraphics}}),Object.defineProperty(exports2,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return _util2.UNSUPPORTED_FEATURES}}),Object.defineProperty(exports2,"UnexpectedResponseException",{enumerable:!0,get:function(){return _util2.UnexpectedResponseException}}),Object.defineProperty(exports2,"Util",{enumerable:!0,get:function(){return _util2.Util}}),Object.defineProperty(exports2,"VerbosityLevel",{enumerable:!0,get:function(){return _util2.VerbosityLevel}}),Object.defineProperty(exports2,"XfaLayer",{enumerable:!0,get:function(){return _xfa_layer.XfaLayer}}),Object.defineProperty(exports2,"build",{enumerable:!0,get:function(){return _api.build}}),Object.defineProperty(exports2,"createPromiseCapability",{enumerable:!0,get:function(){return _util2.createPromiseCapability}}),Object.defineProperty(exports2,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return _util2.createValidAbsoluteUrl}}),Object.defineProperty(exports2,"getDocument",{enumerable:!0,get:function(){return _api.getDocument}}),Object.defineProperty(exports2,"getFilenameFromUrl",{enumerable:!0,get:function(){return _display_utils2.getFilenameFromUrl}}),Object.defineProperty(exports2,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return _display_utils2.getPdfFilenameFromUrl}}),Object.defineProperty(exports2,"getXfaPageViewport",{enumerable:!0,get:function(){return _display_utils2.getXfaPageViewport}}),Object.defineProperty(exports2,"isPdfFile",{enumerable:!0,get:function(){return _display_utils2.isPdfFile}}),Object.defineProperty(exports2,"loadScript",{enumerable:!0,get:function(){return _display_utils2.loadScript}}),Object.defineProperty(exports2,"renderTextLayer",{enumerable:!0,get:function(){return _text_layer.renderTextLayer}}),Object.defineProperty(exports2,"shadow",{enumerable:!0,get:function(){return _util2.shadow}}),Object.defineProperty(exports2,"version",{enumerable:!0,get:function(){return _api.version}});var _util2=__w_pdfjs_require__(1),_api=__w_pdfjs_require__(4),_display_utils2=__w_pdfjs_require__(8),_annotation_editor_layer=__w_pdfjs_require__(22),_tools=__w_pdfjs_require__(7),_annotation_layer=__w_pdfjs_require__(27),_worker_options2=__w_pdfjs_require__(15),_is_node2=__w_pdfjs_require__(3),_text_layer=__w_pdfjs_require__(30),_svg=__w_pdfjs_require__(31),_xfa_layer=__w_pdfjs_require__(29);if(_is_node2.isNodeJS){const{PDFNodeStream}=__w_pdfjs_require__(32);(0,_api.setPDFNetworkStreamFactory)(params=>new PDFNodeStream(params))}else{const{PDFNetworkStream}=__w_pdfjs_require__(35),{PDFFetchStream}=__w_pdfjs_require__(36);(0,_api.setPDFNetworkStreamFactory)(params=>(0,_display_utils2.isValidFetchUrl)(params.url)?new PDFFetchStream(params):new PDFNetworkStream(params))}})(),__webpack_exports__})())})(pdf$1);var pdfExports$1=pdf$1.exports,pdf={exports:{}},dommatrix={exports:{}};/*!
* DOMMatrix v1.0.3 (https://thednp.github.io/dommatrix/)
* Copyright 2022  thednp
* Licensed under MIT (https://github.com/thednp/DOMMatrix/blob/master/LICENSE)
*/var hasRequiredDommatrix;function requireDommatrix(){return hasRequiredDommatrix||(hasRequiredDommatrix=1,function(module2,exports2){(function(global2,factory){module2.exports=factory()})(commonjsGlobal,function(){function fromArray(array){var m=new CSSMatrix,a=Array.from(array);if(!a.every(function(n){return!Number.isNaN(n)}))throw TypeError('CSSMatrix: "'+array+'" must only have numbers.');if(a.length===16){var m11=a[0],m12=a[1],m13=a[2],m14=a[3],m21=a[4],m22=a[5],m23=a[6],m24=a[7],m31=a[8],m32=a[9],m33=a[10],m34=a[11],m41=a[12],m42=a[13],m43=a[14],m44=a[15];m.m11=m11,m.a=m11,m.m21=m21,m.c=m21,m.m31=m31,m.m41=m41,m.e=m41,m.m12=m12,m.b=m12,m.m22=m22,m.d=m22,m.m32=m32,m.m42=m42,m.f=m42,m.m13=m13,m.m23=m23,m.m33=m33,m.m43=m43,m.m14=m14,m.m24=m24,m.m34=m34,m.m44=m44}else if(a.length===6){var M11=a[0],M12=a[1],M21=a[2],M22=a[3],M41=a[4],M42=a[5];m.m11=M11,m.a=M11,m.m12=M12,m.b=M12,m.m21=M21,m.c=M21,m.m22=M22,m.d=M22,m.m41=M41,m.e=M41,m.m42=M42,m.f=M42}else throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");return m}__name2(fromArray,"fromArray"),__name(fromArray,"fromArray");function fromMatrix(m){var keys=Object.keys(new CSSMatrix);if(typeof m=="object"&&keys.every(function(k){return k in m}))return fromArray([m.m11,m.m12,m.m13,m.m14,m.m21,m.m22,m.m23,m.m24,m.m31,m.m32,m.m33,m.m34,m.m41,m.m42,m.m43,m.m44]);throw TypeError('CSSMatrix: "'+JSON.stringify(m)+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}__name2(fromMatrix,"fromMatrix"),__name(fromMatrix,"fromMatrix");function fromString(source){if(typeof source!="string")throw TypeError('CSSMatrix: "'+source+'" is not a string.');var str=String(source).replace(/\s/g,""),m=new CSSMatrix,invalidStringError='CSSMatrix: invalid transform string "'+source+'"';return str.split(")").filter(function(f){return f}).forEach(function(tf){var ref=tf.split("("),prop=ref[0],value=ref[1];if(!value)throw TypeError(invalidStringError);var components=value.split(",").map(function(n){return n.includes("rad")?parseFloat(n)*(180/Math.PI):parseFloat(n)}),x=components[0],y=components[1],z=components[2],a=components[3],xyz=[x,y,z],xyza=[x,y,z,a];if(prop==="perspective"&&x&&[y,z].every(function(n){return n===void 0}))m.m34=-1/x;else if(prop.includes("matrix")&&[6,16].includes(components.length)&&components.every(function(n){return!Number.isNaN(+n)})){var values=components.map(function(n){return Math.abs(n)<1e-6?0:n});m=m.multiply(fromArray(values))}else if(prop==="translate3d"&&xyz.every(function(n){return!Number.isNaN(+n)}))m=m.translate(x,y,z);else if(prop==="translate"&&x&&z===void 0)m=m.translate(x,y||0,0);else if(prop==="rotate3d"&&xyza.every(function(n){return!Number.isNaN(+n)})&&a)m=m.rotateAxisAngle(x,y,z,a);else if(prop==="rotate"&&x&&[y,z].every(function(n){return n===void 0}))m=m.rotate(0,0,x);else if(prop==="scale3d"&&xyz.every(function(n){return!Number.isNaN(+n)})&&xyz.some(function(n){return n!==1}))m=m.scale(x,y,z);else if(prop==="scale"&&!Number.isNaN(x)&&x!==1&&z===void 0){var nosy=Number.isNaN(+y),sy=nosy?x:y;m=m.scale(x,sy,1)}else if(prop==="skew"&&(x||!Number.isNaN(x)&&y)&&z===void 0)m=m.skew(x,y||0);else if(/[XYZ]/.test(prop)&&x&&[y,z].every(function(n){return n===void 0})&&["translate","rotate","scale","skew"].some(function(p){return prop.includes(p)}))if(["skewX","skewY"].includes(prop))m=m[prop](x);else{var fn=prop.replace(/[XYZ]/,""),axis=prop.replace(fn,""),idx=["X","Y","Z"].indexOf(axis),def=fn==="scale"?1:0,axeValues=[idx===0?x:def,idx===1?x:def,idx===2?x:def];m=m[fn].apply(m,axeValues)}else throw TypeError(invalidStringError)}),m}__name2(fromString,"fromString"),__name(fromString,"fromString");function toArray(m,is2D){return is2D?[m.a,m.b,m.c,m.d,m.e,m.f]:[m.m11,m.m12,m.m13,m.m14,m.m21,m.m22,m.m23,m.m24,m.m31,m.m32,m.m33,m.m34,m.m41,m.m42,m.m43,m.m44]}__name2(toArray,"toArray"),__name(toArray,"toArray");function Translate(x,y,z){var m=new CSSMatrix;return m.m41=x,m.e=x,m.m42=y,m.f=y,m.m43=z,m}__name2(Translate,"Translate"),__name(Translate,"Translate");function Rotate(rx,ry,rz){var m=new CSSMatrix,degToRad=Math.PI/180,radX=rx*degToRad,radY=ry*degToRad,radZ=rz*degToRad,cosx=Math.cos(radX),sinx=-Math.sin(radX),cosy=Math.cos(radY),siny=-Math.sin(radY),cosz=Math.cos(radZ),sinz=-Math.sin(radZ),m11=cosy*cosz,m12=-cosy*sinz;m.m11=m11,m.a=m11,m.m12=m12,m.b=m12,m.m13=siny;var m21=sinx*siny*cosz+cosx*sinz;m.m21=m21,m.c=m21;var m22=cosx*cosz-sinx*siny*sinz;return m.m22=m22,m.d=m22,m.m23=-sinx*cosy,m.m31=sinx*sinz-cosx*siny*cosz,m.m32=sinx*cosz+cosx*siny*sinz,m.m33=cosx*cosy,m}__name2(Rotate,"Rotate"),__name(Rotate,"Rotate");function RotateAxisAngle(x,y,z,alpha){var m=new CSSMatrix,length=Math.sqrt(x*x+y*y+z*z);if(length===0)return m;var X=x/length,Y=y/length,Z=z/length,angle=alpha*(Math.PI/360),sinA=Math.sin(angle),cosA=Math.cos(angle),sinA2=sinA*sinA,x2=X*X,y2=Y*Y,z2=Z*Z,m11=1-2*(y2+z2)*sinA2;m.m11=m11,m.a=m11;var m12=2*(X*Y*sinA2+Z*sinA*cosA);m.m12=m12,m.b=m12,m.m13=2*(X*Z*sinA2-Y*sinA*cosA);var m21=2*(Y*X*sinA2-Z*sinA*cosA);m.m21=m21,m.c=m21;var m22=1-2*(z2+x2)*sinA2;return m.m22=m22,m.d=m22,m.m23=2*(Y*Z*sinA2+X*sinA*cosA),m.m31=2*(Z*X*sinA2+Y*sinA*cosA),m.m32=2*(Z*Y*sinA2-X*sinA*cosA),m.m33=1-2*(x2+y2)*sinA2,m}__name2(RotateAxisAngle,"RotateAxisAngle"),__name(RotateAxisAngle,"RotateAxisAngle");function Scale(x,y,z){var m=new CSSMatrix;return m.m11=x,m.a=x,m.m22=y,m.d=y,m.m33=z,m}__name2(Scale,"Scale"),__name(Scale,"Scale");function Skew(angleX,angleY){var m=new CSSMatrix;if(angleX){var radX=angleX*Math.PI/180,tX=Math.tan(radX);m.m21=tX,m.c=tX}if(angleY){var radY=angleY*Math.PI/180,tY=Math.tan(radY);m.m12=tY,m.b=tY}return m}__name2(Skew,"Skew"),__name(Skew,"Skew");function SkewX(angle){return Skew(angle,0)}__name2(SkewX,"SkewX"),__name(SkewX,"SkewX");function SkewY(angle){return Skew(0,angle)}__name2(SkewY,"SkewY"),__name(SkewY,"SkewY");function Multiply(m1,m2){var m11=m2.m11*m1.m11+m2.m12*m1.m21+m2.m13*m1.m31+m2.m14*m1.m41,m12=m2.m11*m1.m12+m2.m12*m1.m22+m2.m13*m1.m32+m2.m14*m1.m42,m13=m2.m11*m1.m13+m2.m12*m1.m23+m2.m13*m1.m33+m2.m14*m1.m43,m14=m2.m11*m1.m14+m2.m12*m1.m24+m2.m13*m1.m34+m2.m14*m1.m44,m21=m2.m21*m1.m11+m2.m22*m1.m21+m2.m23*m1.m31+m2.m24*m1.m41,m22=m2.m21*m1.m12+m2.m22*m1.m22+m2.m23*m1.m32+m2.m24*m1.m42,m23=m2.m21*m1.m13+m2.m22*m1.m23+m2.m23*m1.m33+m2.m24*m1.m43,m24=m2.m21*m1.m14+m2.m22*m1.m24+m2.m23*m1.m34+m2.m24*m1.m44,m31=m2.m31*m1.m11+m2.m32*m1.m21+m2.m33*m1.m31+m2.m34*m1.m41,m32=m2.m31*m1.m12+m2.m32*m1.m22+m2.m33*m1.m32+m2.m34*m1.m42,m33=m2.m31*m1.m13+m2.m32*m1.m23+m2.m33*m1.m33+m2.m34*m1.m43,m34=m2.m31*m1.m14+m2.m32*m1.m24+m2.m33*m1.m34+m2.m34*m1.m44,m41=m2.m41*m1.m11+m2.m42*m1.m21+m2.m43*m1.m31+m2.m44*m1.m41,m42=m2.m41*m1.m12+m2.m42*m1.m22+m2.m43*m1.m32+m2.m44*m1.m42,m43=m2.m41*m1.m13+m2.m42*m1.m23+m2.m43*m1.m33+m2.m44*m1.m43,m44=m2.m41*m1.m14+m2.m42*m1.m24+m2.m43*m1.m34+m2.m44*m1.m44;return fromArray([m11,m12,m13,m14,m21,m22,m23,m24,m31,m32,m33,m34,m41,m42,m43,m44])}__name2(Multiply,"Multiply"),__name(Multiply,"Multiply");var CSSMatrix=__name(__name2(function(){for(var args=[],len=arguments.length;len--;)args[len]=arguments[len];var m=this;if(m.a=1,m.b=0,m.c=0,m.d=1,m.e=0,m.f=0,m.m11=1,m.m12=0,m.m13=0,m.m14=0,m.m21=0,m.m22=1,m.m23=0,m.m24=0,m.m31=0,m.m32=0,m.m33=1,m.m34=0,m.m41=0,m.m42=0,m.m43=0,m.m44=1,args.length){var ARGS=[16,6].some(function(l){return l===args.length})?args:args[0];return m.setMatrixValue(ARGS)}return m},"CSSMatrix2"),"CSSMatrix"),prototypeAccessors={isIdentity:{configurable:!0},is2D:{configurable:!0}};prototypeAccessors.isIdentity.get=function(){var m=this;return m.m11===1&&m.m12===0&&m.m13===0&&m.m14===0&&m.m21===0&&m.m22===1&&m.m23===0&&m.m24===0&&m.m31===0&&m.m32===0&&m.m33===1&&m.m34===0&&m.m41===0&&m.m42===0&&m.m43===0&&m.m44===1},prototypeAccessors.is2D.get=function(){var m=this;return m.m31===0&&m.m32===0&&m.m33===1&&m.m34===0&&m.m43===0&&m.m44===1},CSSMatrix.prototype.setMatrixValue=__name(__name2(function(source){var m=this;return typeof source=="string"&&source.length&&source!=="none"?fromString(source):[Array,Float64Array,Float32Array].some(function(a){return source instanceof a})?fromArray(source):[CSSMatrix,DOMMatrix,Object].some(function(a){return source instanceof a})?fromMatrix(source):m},"setMatrixValue"),"setMatrixValue"),CSSMatrix.prototype.toFloat32Array=__name(__name2(function(is2D){return Float32Array.from(toArray(this,is2D))},"toFloat32Array"),"toFloat32Array"),CSSMatrix.prototype.toFloat64Array=__name(__name2(function(is2D){return Float64Array.from(toArray(this,is2D))},"toFloat64Array"),"toFloat64Array"),CSSMatrix.prototype.toString=__name(__name2(function(){var m=this,is2D=m.is2D,values=m.toFloat64Array(is2D).join(", "),type=is2D?"matrix":"matrix3d";return type+"("+values+")"},"toString"),"toString"),CSSMatrix.prototype.toJSON=__name(__name2(function(){var m=this,is2D=m.is2D,isIdentity=m.isIdentity;return Object.assign({},m,{is2D,isIdentity})},"toJSON"),"toJSON"),CSSMatrix.prototype.multiply=__name(__name2(function(m2){return Multiply(this,m2)},"multiply"),"multiply"),CSSMatrix.prototype.translate=__name(__name2(function(x,y,z){var X=x,Y=y,Z=z;return Y===void 0&&(Y=0),Z===void 0&&(Z=0),Multiply(this,Translate(X,Y,Z))},"translate"),"translate"),CSSMatrix.prototype.scale=__name(__name2(function(x,y,z){var X=x,Y=y,Z=z;return Y===void 0&&(Y=x),Z===void 0&&(Z=1),Multiply(this,Scale(X,Y,Z))},"scale"),"scale"),CSSMatrix.prototype.rotate=__name(__name2(function(rx,ry,rz){var RX=rx,RY=ry||0,RZ=rz||0;return typeof rx=="number"&&ry===void 0&&rz===void 0&&(RZ=RX,RX=0,RY=0),Multiply(this,Rotate(RX,RY,RZ))},"rotate"),"rotate"),CSSMatrix.prototype.rotateAxisAngle=__name(__name2(function(x,y,z,angle){if([x,y,z,angle].some(function(n){return Number.isNaN(+n)}))throw new TypeError("CSSMatrix: expecting 4 values");return Multiply(this,RotateAxisAngle(x,y,z,angle))},"rotateAxisAngle"),"rotateAxisAngle"),CSSMatrix.prototype.skewX=__name(__name2(function(angle){return Multiply(this,SkewX(angle))},"skewX"),"skewX"),CSSMatrix.prototype.skewY=__name(__name2(function(angle){return Multiply(this,SkewY(angle))},"skewY"),"skewY"),CSSMatrix.prototype.skew=__name(__name2(function(angleX,angleY){return Multiply(this,Skew(angleX,angleY))},"skew"),"skew"),CSSMatrix.prototype.transformPoint=__name(__name2(function(t){var m=this,x=m.m11*t.x+m.m21*t.y+m.m31*t.z+m.m41*t.w,y=m.m12*t.x+m.m22*t.y+m.m32*t.z+m.m42*t.w,z=m.m13*t.x+m.m23*t.y+m.m33*t.z+m.m43*t.w,w=m.m14*t.x+m.m24*t.y+m.m34*t.z+m.m44*t.w;return t instanceof DOMPoint?new DOMPoint(x,y,z,w):{x,y,z,w}},"transformPoint"),"transformPoint"),Object.defineProperties(CSSMatrix.prototype,prototypeAccessors),Object.assign(CSSMatrix,{Translate,Rotate,RotateAxisAngle,Scale,SkewX,SkewY,Skew,Multiply,fromArray,fromMatrix,fromString,toArray});var version2="1.0.3",Version=version2;return Object.assign(CSSMatrix,{Version}),CSSMatrix})}(dommatrix)),dommatrix.exports}__name2(requireDommatrix,"requireDommatrix"),__name(requireDommatrix,"requireDommatrix");var ponyfill={exports:{}},hasRequiredPonyfill;function requirePonyfill(){return hasRequiredPonyfill||(hasRequiredPonyfill=1,function(module2,exports2){(function(global2,factory){factory(exports2)})(commonjsGlobal,function(exports3){var SymbolPolyfill=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(description){return"Symbol("+description+")"};function noop(){}__name2(noop,"noop"),__name(noop,"noop");function getGlobals(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal<"u")return commonjsGlobal}__name2(getGlobals,"getGlobals"),__name(getGlobals,"getGlobals");var globals=getGlobals();function typeIsObject(x){return typeof x=="object"&&x!==null||typeof x=="function"}__name2(typeIsObject,"typeIsObject"),__name(typeIsObject,"typeIsObject");var rethrowAssertionErrorRejection=noop,originalPromise=Promise,originalPromiseThen=Promise.prototype.then,originalPromiseResolve=Promise.resolve.bind(originalPromise),originalPromiseReject=Promise.reject.bind(originalPromise);function newPromise(executor){return new originalPromise(executor)}__name2(newPromise,"newPromise"),__name(newPromise,"newPromise");function promiseResolvedWith(value){return originalPromiseResolve(value)}__name2(promiseResolvedWith,"promiseResolvedWith"),__name(promiseResolvedWith,"promiseResolvedWith");function promiseRejectedWith(reason){return originalPromiseReject(reason)}__name2(promiseRejectedWith,"promiseRejectedWith"),__name(promiseRejectedWith,"promiseRejectedWith");function PerformPromiseThen(promise,onFulfilled,onRejected){return originalPromiseThen.call(promise,onFulfilled,onRejected)}__name2(PerformPromiseThen,"PerformPromiseThen"),__name(PerformPromiseThen,"PerformPromiseThen");function uponPromise(promise,onFulfilled,onRejected){PerformPromiseThen(PerformPromiseThen(promise,onFulfilled,onRejected),void 0,rethrowAssertionErrorRejection)}__name2(uponPromise,"uponPromise"),__name(uponPromise,"uponPromise");function uponFulfillment(promise,onFulfilled){uponPromise(promise,onFulfilled)}__name2(uponFulfillment,"uponFulfillment"),__name(uponFulfillment,"uponFulfillment");function uponRejection(promise,onRejected){uponPromise(promise,void 0,onRejected)}__name2(uponRejection,"uponRejection"),__name(uponRejection,"uponRejection");function transformPromiseWith(promise,fulfillmentHandler,rejectionHandler){return PerformPromiseThen(promise,fulfillmentHandler,rejectionHandler)}__name2(transformPromiseWith,"transformPromiseWith"),__name(transformPromiseWith,"transformPromiseWith");function setPromiseIsHandledToTrue(promise){PerformPromiseThen(promise,void 0,rethrowAssertionErrorRejection)}__name2(setPromiseIsHandledToTrue,"setPromiseIsHandledToTrue"),__name(setPromiseIsHandledToTrue,"setPromiseIsHandledToTrue");var queueMicrotask=function(){var globalQueueMicrotask=globals&&globals.queueMicrotask;if(typeof globalQueueMicrotask=="function")return globalQueueMicrotask;var resolvedPromise=promiseResolvedWith(void 0);return function(fn){return PerformPromiseThen(resolvedPromise,fn)}}();function reflectCall(F,V,args){if(typeof F!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(F,V,args)}__name2(reflectCall,"reflectCall"),__name(reflectCall,"reflectCall");function promiseCall(F,V,args){try{return promiseResolvedWith(reflectCall(F,V,args))}catch(value){return promiseRejectedWith(value)}}__name2(promiseCall,"promiseCall"),__name(promiseCall,"promiseCall");var QUEUE_MAX_ARRAY_SIZE=16384,SimpleQueue=function(){function SimpleQueue2(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return __name2(SimpleQueue2,"SimpleQueue2"),__name(SimpleQueue2,"SimpleQueue"),Object.defineProperty(SimpleQueue2.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),SimpleQueue2.prototype.push=function(element){var oldBack=this._back,newBack=oldBack;oldBack._elements.length===QUEUE_MAX_ARRAY_SIZE-1&&(newBack={_elements:[],_next:void 0}),oldBack._elements.push(element),newBack!==oldBack&&(this._back=newBack,oldBack._next=newBack),++this._size},SimpleQueue2.prototype.shift=function(){var oldFront=this._front,newFront=oldFront,oldCursor=this._cursor,newCursor=oldCursor+1,elements=oldFront._elements,element=elements[oldCursor];return newCursor===QUEUE_MAX_ARRAY_SIZE&&(newFront=oldFront._next,newCursor=0),--this._size,this._cursor=newCursor,oldFront!==newFront&&(this._front=newFront),elements[oldCursor]=void 0,element},SimpleQueue2.prototype.forEach=function(callback){for(var i=this._cursor,node=this._front,elements=node._elements;(i!==elements.length||node._next!==void 0)&&!(i===elements.length&&(node=node._next,elements=node._elements,i=0,elements.length===0));)callback(elements[i]),++i},SimpleQueue2.prototype.peek=function(){var front=this._front,cursor=this._cursor;return front._elements[cursor]},SimpleQueue2}();function ReadableStreamReaderGenericInitialize(reader,stream){reader._ownerReadableStream=stream,stream._reader=reader,stream._state==="readable"?defaultReaderClosedPromiseInitialize(reader):stream._state==="closed"?defaultReaderClosedPromiseInitializeAsResolved(reader):defaultReaderClosedPromiseInitializeAsRejected(reader,stream._storedError)}__name2(ReadableStreamReaderGenericInitialize,"ReadableStreamReaderGenericInitialize"),__name(ReadableStreamReaderGenericInitialize,"ReadableStreamReaderGenericInitialize");function ReadableStreamReaderGenericCancel(reader,reason){var stream=reader._ownerReadableStream;return ReadableStreamCancel(stream,reason)}__name2(ReadableStreamReaderGenericCancel,"ReadableStreamReaderGenericCancel"),__name(ReadableStreamReaderGenericCancel,"ReadableStreamReaderGenericCancel");function ReadableStreamReaderGenericRelease(reader){reader._ownerReadableStream._state==="readable"?defaultReaderClosedPromiseReject(reader,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):defaultReaderClosedPromiseResetToRejected(reader,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),reader._ownerReadableStream._reader=void 0,reader._ownerReadableStream=void 0}__name2(ReadableStreamReaderGenericRelease,"ReadableStreamReaderGenericRelease"),__name(ReadableStreamReaderGenericRelease,"ReadableStreamReaderGenericRelease");function readerLockException(name){return new TypeError("Cannot "+name+" a stream using a released reader")}__name2(readerLockException,"readerLockException"),__name(readerLockException,"readerLockException");function defaultReaderClosedPromiseInitialize(reader){reader._closedPromise=newPromise(function(resolve,reject){reader._closedPromise_resolve=resolve,reader._closedPromise_reject=reject})}__name2(defaultReaderClosedPromiseInitialize,"defaultReaderClosedPromiseInitialize"),__name(defaultReaderClosedPromiseInitialize,"defaultReaderClosedPromiseInitialize");function defaultReaderClosedPromiseInitializeAsRejected(reader,reason){defaultReaderClosedPromiseInitialize(reader),defaultReaderClosedPromiseReject(reader,reason)}__name2(defaultReaderClosedPromiseInitializeAsRejected,"defaultReaderClosedPromiseInitializeAsRejected"),__name(defaultReaderClosedPromiseInitializeAsRejected,"defaultReaderClosedPromiseInitializeAsRejected");function defaultReaderClosedPromiseInitializeAsResolved(reader){defaultReaderClosedPromiseInitialize(reader),defaultReaderClosedPromiseResolve(reader)}__name2(defaultReaderClosedPromiseInitializeAsResolved,"defaultReaderClosedPromiseInitializeAsResolved"),__name(defaultReaderClosedPromiseInitializeAsResolved,"defaultReaderClosedPromiseInitializeAsResolved");function defaultReaderClosedPromiseReject(reader,reason){reader._closedPromise_reject!==void 0&&(setPromiseIsHandledToTrue(reader._closedPromise),reader._closedPromise_reject(reason),reader._closedPromise_resolve=void 0,reader._closedPromise_reject=void 0)}__name2(defaultReaderClosedPromiseReject,"defaultReaderClosedPromiseReject"),__name(defaultReaderClosedPromiseReject,"defaultReaderClosedPromiseReject");function defaultReaderClosedPromiseResetToRejected(reader,reason){defaultReaderClosedPromiseInitializeAsRejected(reader,reason)}__name2(defaultReaderClosedPromiseResetToRejected,"defaultReaderClosedPromiseResetToRejected"),__name(defaultReaderClosedPromiseResetToRejected,"defaultReaderClosedPromiseResetToRejected");function defaultReaderClosedPromiseResolve(reader){reader._closedPromise_resolve!==void 0&&(reader._closedPromise_resolve(void 0),reader._closedPromise_resolve=void 0,reader._closedPromise_reject=void 0)}__name2(defaultReaderClosedPromiseResolve,"defaultReaderClosedPromiseResolve"),__name(defaultReaderClosedPromiseResolve,"defaultReaderClosedPromiseResolve");var AbortSteps=SymbolPolyfill("[[AbortSteps]]"),ErrorSteps=SymbolPolyfill("[[ErrorSteps]]"),CancelSteps=SymbolPolyfill("[[CancelSteps]]"),PullSteps=SymbolPolyfill("[[PullSteps]]"),NumberIsFinite=Number.isFinite||function(x){return typeof x=="number"&&isFinite(x)},MathTrunc=Math.trunc||function(v){return v<0?Math.ceil(v):Math.floor(v)};function isDictionary(x){return typeof x=="object"||typeof x=="function"}__name2(isDictionary,"isDictionary"),__name(isDictionary,"isDictionary");function assertDictionary(obj,context){if(obj!==void 0&&!isDictionary(obj))throw new TypeError(context+" is not an object.")}__name2(assertDictionary,"assertDictionary"),__name(assertDictionary,"assertDictionary");function assertFunction(x,context){if(typeof x!="function")throw new TypeError(context+" is not a function.")}__name2(assertFunction,"assertFunction"),__name(assertFunction,"assertFunction");function isObject(x){return typeof x=="object"&&x!==null||typeof x=="function"}__name2(isObject,"isObject"),__name(isObject,"isObject");function assertObject(x,context){if(!isObject(x))throw new TypeError(context+" is not an object.")}__name2(assertObject,"assertObject"),__name(assertObject,"assertObject");function assertRequiredArgument(x,position,context){if(x===void 0)throw new TypeError("Parameter "+position+" is required in '"+context+"'.")}__name2(assertRequiredArgument,"assertRequiredArgument"),__name(assertRequiredArgument,"assertRequiredArgument");function assertRequiredField(x,field,context){if(x===void 0)throw new TypeError(field+" is required in '"+context+"'.")}__name2(assertRequiredField,"assertRequiredField"),__name(assertRequiredField,"assertRequiredField");function convertUnrestrictedDouble(value){return Number(value)}__name2(convertUnrestrictedDouble,"convertUnrestrictedDouble"),__name(convertUnrestrictedDouble,"convertUnrestrictedDouble");function censorNegativeZero(x){return x===0?0:x}__name2(censorNegativeZero,"censorNegativeZero"),__name(censorNegativeZero,"censorNegativeZero");function integerPart(x){return censorNegativeZero(MathTrunc(x))}__name2(integerPart,"integerPart"),__name(integerPart,"integerPart");function convertUnsignedLongLongWithEnforceRange(value,context){var lowerBound=0,upperBound=Number.MAX_SAFE_INTEGER,x=Number(value);if(x=censorNegativeZero(x),!NumberIsFinite(x))throw new TypeError(context+" is not a finite number");if(x=integerPart(x),x<lowerBound||x>upperBound)throw new TypeError(context+" is outside the accepted range of "+lowerBound+" to "+upperBound+", inclusive");return!NumberIsFinite(x)||x===0?0:x}__name2(convertUnsignedLongLongWithEnforceRange,"convertUnsignedLongLongWithEnforceRange"),__name(convertUnsignedLongLongWithEnforceRange,"convertUnsignedLongLongWithEnforceRange");function assertReadableStream(x,context){if(!IsReadableStream(x))throw new TypeError(context+" is not a ReadableStream.")}__name2(assertReadableStream,"assertReadableStream"),__name(assertReadableStream,"assertReadableStream");function AcquireReadableStreamDefaultReader(stream){return new ReadableStreamDefaultReader(stream)}__name2(AcquireReadableStreamDefaultReader,"AcquireReadableStreamDefaultReader"),__name(AcquireReadableStreamDefaultReader,"AcquireReadableStreamDefaultReader");function ReadableStreamAddReadRequest(stream,readRequest){stream._reader._readRequests.push(readRequest)}__name2(ReadableStreamAddReadRequest,"ReadableStreamAddReadRequest"),__name(ReadableStreamAddReadRequest,"ReadableStreamAddReadRequest");function ReadableStreamFulfillReadRequest(stream,chunk,done){var reader=stream._reader,readRequest=reader._readRequests.shift();done?readRequest._closeSteps():readRequest._chunkSteps(chunk)}__name2(ReadableStreamFulfillReadRequest,"ReadableStreamFulfillReadRequest"),__name(ReadableStreamFulfillReadRequest,"ReadableStreamFulfillReadRequest");function ReadableStreamGetNumReadRequests(stream){return stream._reader._readRequests.length}__name2(ReadableStreamGetNumReadRequests,"ReadableStreamGetNumReadRequests"),__name(ReadableStreamGetNumReadRequests,"ReadableStreamGetNumReadRequests");function ReadableStreamHasDefaultReader(stream){var reader=stream._reader;return!(reader===void 0||!IsReadableStreamDefaultReader(reader))}__name2(ReadableStreamHasDefaultReader,"ReadableStreamHasDefaultReader"),__name(ReadableStreamHasDefaultReader,"ReadableStreamHasDefaultReader");var ReadableStreamDefaultReader=function(){function ReadableStreamDefaultReader2(stream){if(assertRequiredArgument(stream,1,"ReadableStreamDefaultReader"),assertReadableStream(stream,"First parameter"),IsReadableStreamLocked(stream))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ReadableStreamReaderGenericInitialize(this,stream),this._readRequests=new SimpleQueue}return __name2(ReadableStreamDefaultReader2,"ReadableStreamDefaultReader2"),__name(ReadableStreamDefaultReader2,"ReadableStreamDefaultReader"),Object.defineProperty(ReadableStreamDefaultReader2.prototype,"closed",{get:function(){return IsReadableStreamDefaultReader(this)?this._closedPromise:promiseRejectedWith(defaultReaderBrandCheckException("closed"))},enumerable:!1,configurable:!0}),ReadableStreamDefaultReader2.prototype.cancel=function(reason){return reason===void 0&&(reason=void 0),IsReadableStreamDefaultReader(this)?this._ownerReadableStream===void 0?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,reason):promiseRejectedWith(defaultReaderBrandCheckException("cancel"))},ReadableStreamDefaultReader2.prototype.read=function(){if(!IsReadableStreamDefaultReader(this))return promiseRejectedWith(defaultReaderBrandCheckException("read"));if(this._ownerReadableStream===void 0)return promiseRejectedWith(readerLockException("read from"));var resolvePromise,rejectPromise,promise=newPromise(function(resolve,reject){resolvePromise=resolve,rejectPromise=reject}),readRequest={_chunkSteps:function(chunk){return resolvePromise({value:chunk,done:!1})},_closeSteps:function(){return resolvePromise({value:void 0,done:!0})},_errorSteps:function(e){return rejectPromise(e)}};return ReadableStreamDefaultReaderRead(this,readRequest),promise},ReadableStreamDefaultReader2.prototype.releaseLock=function(){if(!IsReadableStreamDefaultReader(this))throw defaultReaderBrandCheckException("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}},ReadableStreamDefaultReader2}();Object.defineProperties(ReadableStreamDefaultReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ReadableStreamDefaultReader.prototype,SymbolPolyfill.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function IsReadableStreamDefaultReader(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_readRequests")?!1:x instanceof ReadableStreamDefaultReader}__name2(IsReadableStreamDefaultReader,"IsReadableStreamDefaultReader"),__name(IsReadableStreamDefaultReader,"IsReadableStreamDefaultReader");function ReadableStreamDefaultReaderRead(reader,readRequest){var stream=reader._ownerReadableStream;stream._disturbed=!0,stream._state==="closed"?readRequest._closeSteps():stream._state==="errored"?readRequest._errorSteps(stream._storedError):stream._readableStreamController[PullSteps](readRequest)}__name2(ReadableStreamDefaultReaderRead,"ReadableStreamDefaultReaderRead"),__name(ReadableStreamDefaultReaderRead,"ReadableStreamDefaultReaderRead");function defaultReaderBrandCheckException(name){return new TypeError("ReadableStreamDefaultReader.prototype."+name+" can only be used on a ReadableStreamDefaultReader")}__name2(defaultReaderBrandCheckException,"defaultReaderBrandCheckException"),__name(defaultReaderBrandCheckException,"defaultReaderBrandCheckException");var _a2,AsyncIteratorPrototype;typeof SymbolPolyfill.asyncIterator=="symbol"&&(AsyncIteratorPrototype=(_a2={},_a2[SymbolPolyfill.asyncIterator]=function(){return this},_a2),Object.defineProperty(AsyncIteratorPrototype,SymbolPolyfill.asyncIterator,{enumerable:!1}));var ReadableStreamAsyncIteratorImpl=function(){function ReadableStreamAsyncIteratorImpl2(reader,preventCancel){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=reader,this._preventCancel=preventCancel}return __name2(ReadableStreamAsyncIteratorImpl2,"ReadableStreamAsyncIteratorImpl2"),__name(ReadableStreamAsyncIteratorImpl2,"ReadableStreamAsyncIteratorImpl"),ReadableStreamAsyncIteratorImpl2.prototype.next=function(){var _this=this,nextSteps=__name(function(){return _this._nextSteps()},"nextSteps");return this._ongoingPromise=this._ongoingPromise?transformPromiseWith(this._ongoingPromise,nextSteps,nextSteps):nextSteps(),this._ongoingPromise},ReadableStreamAsyncIteratorImpl2.prototype.return=function(value){var _this=this,returnSteps=__name(function(){return _this._returnSteps(value)},"returnSteps");return this._ongoingPromise?transformPromiseWith(this._ongoingPromise,returnSteps,returnSteps):returnSteps()},ReadableStreamAsyncIteratorImpl2.prototype._nextSteps=function(){var _this=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var reader=this._reader;if(reader._ownerReadableStream===void 0)return promiseRejectedWith(readerLockException("iterate"));var resolvePromise,rejectPromise,promise=newPromise(function(resolve,reject){resolvePromise=resolve,rejectPromise=reject}),readRequest={_chunkSteps:function(chunk){_this._ongoingPromise=void 0,queueMicrotask(function(){return resolvePromise({value:chunk,done:!1})})},_closeSteps:function(){_this._ongoingPromise=void 0,_this._isFinished=!0,ReadableStreamReaderGenericRelease(reader),resolvePromise({value:void 0,done:!0})},_errorSteps:function(reason){_this._ongoingPromise=void 0,_this._isFinished=!0,ReadableStreamReaderGenericRelease(reader),rejectPromise(reason)}};return ReadableStreamDefaultReaderRead(reader,readRequest),promise},ReadableStreamAsyncIteratorImpl2.prototype._returnSteps=function(value){if(this._isFinished)return Promise.resolve({value,done:!0});this._isFinished=!0;var reader=this._reader;if(reader._ownerReadableStream===void 0)return promiseRejectedWith(readerLockException("finish iterating"));if(!this._preventCancel){var result=ReadableStreamReaderGenericCancel(reader,value);return ReadableStreamReaderGenericRelease(reader),transformPromiseWith(result,function(){return{value,done:!0}})}return ReadableStreamReaderGenericRelease(reader),promiseResolvedWith({value,done:!0})},ReadableStreamAsyncIteratorImpl2}(),ReadableStreamAsyncIteratorPrototype={next:function(){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.next():promiseRejectedWith(streamAsyncIteratorBrandCheckException("next"))},return:function(value){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.return(value):promiseRejectedWith(streamAsyncIteratorBrandCheckException("return"))}};AsyncIteratorPrototype!==void 0&&Object.setPrototypeOf(ReadableStreamAsyncIteratorPrototype,AsyncIteratorPrototype);function AcquireReadableStreamAsyncIterator(stream,preventCancel){var reader=AcquireReadableStreamDefaultReader(stream),impl=new ReadableStreamAsyncIteratorImpl(reader,preventCancel),iterator=Object.create(ReadableStreamAsyncIteratorPrototype);return iterator._asyncIteratorImpl=impl,iterator}__name2(AcquireReadableStreamAsyncIterator,"AcquireReadableStreamAsyncIterator"),__name(AcquireReadableStreamAsyncIterator,"AcquireReadableStreamAsyncIterator");function IsReadableStreamAsyncIterator(x){if(!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_asyncIteratorImpl"))return!1;try{return x._asyncIteratorImpl instanceof ReadableStreamAsyncIteratorImpl}catch{return!1}}__name2(IsReadableStreamAsyncIterator,"IsReadableStreamAsyncIterator"),__name(IsReadableStreamAsyncIterator,"IsReadableStreamAsyncIterator");function streamAsyncIteratorBrandCheckException(name){return new TypeError("ReadableStreamAsyncIterator."+name+" can only be used on a ReadableSteamAsyncIterator")}__name2(streamAsyncIteratorBrandCheckException,"streamAsyncIteratorBrandCheckException"),__name(streamAsyncIteratorBrandCheckException,"streamAsyncIteratorBrandCheckException");var NumberIsNaN=Number.isNaN||function(x){return x!==x};function CreateArrayFromList(elements){return elements.slice()}__name2(CreateArrayFromList,"CreateArrayFromList"),__name(CreateArrayFromList,"CreateArrayFromList");function CopyDataBlockBytes(dest,destOffset,src,srcOffset,n){new Uint8Array(dest).set(new Uint8Array(src,srcOffset,n),destOffset)}__name2(CopyDataBlockBytes,"CopyDataBlockBytes"),__name(CopyDataBlockBytes,"CopyDataBlockBytes");function TransferArrayBuffer(O){return O}__name2(TransferArrayBuffer,"TransferArrayBuffer"),__name(TransferArrayBuffer,"TransferArrayBuffer");function IsDetachedBuffer(O){return!1}__name2(IsDetachedBuffer,"IsDetachedBuffer"),__name(IsDetachedBuffer,"IsDetachedBuffer");function ArrayBufferSlice(buffer,begin,end){if(buffer.slice)return buffer.slice(begin,end);var length=end-begin,slice=new ArrayBuffer(length);return CopyDataBlockBytes(slice,0,buffer,begin,length),slice}__name2(ArrayBufferSlice,"ArrayBufferSlice"),__name(ArrayBufferSlice,"ArrayBufferSlice");function IsNonNegativeNumber(v){return!(typeof v!="number"||NumberIsNaN(v)||v<0)}__name2(IsNonNegativeNumber,"IsNonNegativeNumber"),__name(IsNonNegativeNumber,"IsNonNegativeNumber");function CloneAsUint8Array(O){var buffer=ArrayBufferSlice(O.buffer,O.byteOffset,O.byteOffset+O.byteLength);return new Uint8Array(buffer)}__name2(CloneAsUint8Array,"CloneAsUint8Array"),__name(CloneAsUint8Array,"CloneAsUint8Array");function DequeueValue(container){var pair=container._queue.shift();return container._queueTotalSize-=pair.size,container._queueTotalSize<0&&(container._queueTotalSize=0),pair.value}__name2(DequeueValue,"DequeueValue"),__name(DequeueValue,"DequeueValue");function EnqueueValueWithSize(container,value,size){if(!IsNonNegativeNumber(size)||size===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");container._queue.push({value,size}),container._queueTotalSize+=size}__name2(EnqueueValueWithSize,"EnqueueValueWithSize"),__name(EnqueueValueWithSize,"EnqueueValueWithSize");function PeekQueueValue(container){var pair=container._queue.peek();return pair.value}__name2(PeekQueueValue,"PeekQueueValue"),__name(PeekQueueValue,"PeekQueueValue");function ResetQueue(container){container._queue=new SimpleQueue,container._queueTotalSize=0}__name2(ResetQueue,"ResetQueue"),__name(ResetQueue,"ResetQueue");var ReadableStreamBYOBRequest=function(){function ReadableStreamBYOBRequest2(){throw new TypeError("Illegal constructor")}return __name2(ReadableStreamBYOBRequest2,"ReadableStreamBYOBRequest2"),__name(ReadableStreamBYOBRequest2,"ReadableStreamBYOBRequest"),Object.defineProperty(ReadableStreamBYOBRequest2.prototype,"view",{get:function(){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("view");return this._view},enumerable:!1,configurable:!0}),ReadableStreamBYOBRequest2.prototype.respond=function(bytesWritten){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respond");if(assertRequiredArgument(bytesWritten,1,"respond"),bytesWritten=convertUnsignedLongLongWithEnforceRange(bytesWritten,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");IsDetachedBuffer(this._view.buffer),ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController,bytesWritten)},ReadableStreamBYOBRequest2.prototype.respondWithNewView=function(view){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respondWithNewView");if(assertRequiredArgument(view,1,"respondWithNewView"),!ArrayBuffer.isView(view))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");IsDetachedBuffer(view.buffer),ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController,view)},ReadableStreamBYOBRequest2}();Object.defineProperties(ReadableStreamBYOBRequest.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ReadableStreamBYOBRequest.prototype,SymbolPolyfill.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var ReadableByteStreamController=function(){function ReadableByteStreamController2(){throw new TypeError("Illegal constructor")}return __name2(ReadableByteStreamController2,"ReadableByteStreamController2"),__name(ReadableByteStreamController2,"ReadableByteStreamController"),Object.defineProperty(ReadableByteStreamController2.prototype,"byobRequest",{get:function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("byobRequest");return ReadableByteStreamControllerGetBYOBRequest(this)},enumerable:!1,configurable:!0}),Object.defineProperty(ReadableByteStreamController2.prototype,"desiredSize",{get:function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("desiredSize");return ReadableByteStreamControllerGetDesiredSize(this)},enumerable:!1,configurable:!0}),ReadableByteStreamController2.prototype.close=function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var state=this._controlledReadableByteStream._state;if(state!=="readable")throw new TypeError("The stream (in "+state+" state) is not in the readable state and cannot be closed");ReadableByteStreamControllerClose(this)},ReadableByteStreamController2.prototype.enqueue=function(chunk){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("enqueue");if(assertRequiredArgument(chunk,1,"enqueue"),!ArrayBuffer.isView(chunk))throw new TypeError("chunk must be an array buffer view");if(chunk.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(chunk.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var state=this._controlledReadableByteStream._state;if(state!=="readable")throw new TypeError("The stream (in "+state+" state) is not in the readable state and cannot be enqueued to");ReadableByteStreamControllerEnqueue(this,chunk)},ReadableByteStreamController2.prototype.error=function(e){if(e===void 0&&(e=void 0),!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("error");ReadableByteStreamControllerError(this,e)},ReadableByteStreamController2.prototype[CancelSteps]=function(reason){ReadableByteStreamControllerClearPendingPullIntos(this),ResetQueue(this);var result=this._cancelAlgorithm(reason);return ReadableByteStreamControllerClearAlgorithms(this),result},ReadableByteStreamController2.prototype[PullSteps]=function(readRequest){var stream=this._controlledReadableByteStream;if(this._queueTotalSize>0){var entry=this._queue.shift();this._queueTotalSize-=entry.byteLength,ReadableByteStreamControllerHandleQueueDrain(this);var view=new Uint8Array(entry.buffer,entry.byteOffset,entry.byteLength);readRequest._chunkSteps(view);return}var autoAllocateChunkSize=this._autoAllocateChunkSize;if(autoAllocateChunkSize!==void 0){var buffer=void 0;try{buffer=new ArrayBuffer(autoAllocateChunkSize)}catch(bufferE){readRequest._errorSteps(bufferE);return}var pullIntoDescriptor={buffer,bufferByteLength:autoAllocateChunkSize,byteOffset:0,byteLength:autoAllocateChunkSize,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(pullIntoDescriptor)}ReadableStreamAddReadRequest(stream,readRequest),ReadableByteStreamControllerCallPullIfNeeded(this)},ReadableByteStreamController2}();Object.defineProperties(ReadableByteStreamController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ReadableByteStreamController.prototype,SymbolPolyfill.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function IsReadableByteStreamController(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_controlledReadableByteStream")?!1:x instanceof ReadableByteStreamController}__name2(IsReadableByteStreamController,"IsReadableByteStreamController"),__name(IsReadableByteStreamController,"IsReadableByteStreamController");function IsReadableStreamBYOBRequest(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_associatedReadableByteStreamController")?!1:x instanceof ReadableStreamBYOBRequest}__name2(IsReadableStreamBYOBRequest,"IsReadableStreamBYOBRequest"),__name(IsReadableStreamBYOBRequest,"IsReadableStreamBYOBRequest");function ReadableByteStreamControllerCallPullIfNeeded(controller){var shouldPull=ReadableByteStreamControllerShouldCallPull(controller);if(shouldPull){if(controller._pulling){controller._pullAgain=!0;return}controller._pulling=!0;var pullPromise=controller._pullAlgorithm();uponPromise(pullPromise,function(){controller._pulling=!1,controller._pullAgain&&(controller._pullAgain=!1,ReadableByteStreamControllerCallPullIfNeeded(controller))},function(e){ReadableByteStreamControllerError(controller,e)})}}__name2(ReadableByteStreamControllerCallPullIfNeeded,"ReadableByteStreamControllerCallPullIfNeeded"),__name(ReadableByteStreamControllerCallPullIfNeeded,"ReadableByteStreamControllerCallPullIfNeeded");function ReadableByteStreamControllerClearPendingPullIntos(controller){ReadableByteStreamControllerInvalidateBYOBRequest(controller),controller._pendingPullIntos=new SimpleQueue}__name2(ReadableByteStreamControllerClearPendingPullIntos,"ReadableByteStreamControllerClearPendingPullIntos"),__name(ReadableByteStreamControllerClearPendingPullIntos,"ReadableByteStreamControllerClearPendingPullIntos");function ReadableByteStreamControllerCommitPullIntoDescriptor(stream,pullIntoDescriptor){var done=!1;stream._state==="closed"&&(done=!0);var filledView=ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);pullIntoDescriptor.readerType==="default"?ReadableStreamFulfillReadRequest(stream,filledView,done):ReadableStreamFulfillReadIntoRequest(stream,filledView,done)}__name2(ReadableByteStreamControllerCommitPullIntoDescriptor,"ReadableByteStreamControllerCommitPullIntoDescriptor"),__name(ReadableByteStreamControllerCommitPullIntoDescriptor,"ReadableByteStreamControllerCommitPullIntoDescriptor");function ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor){var bytesFilled=pullIntoDescriptor.bytesFilled,elementSize=pullIntoDescriptor.elementSize;return new pullIntoDescriptor.viewConstructor(pullIntoDescriptor.buffer,pullIntoDescriptor.byteOffset,bytesFilled/elementSize)}__name2(ReadableByteStreamControllerConvertPullIntoDescriptor,"ReadableByteStreamControllerConvertPullIntoDescriptor"),__name(ReadableByteStreamControllerConvertPullIntoDescriptor,"ReadableByteStreamControllerConvertPullIntoDescriptor");function ReadableByteStreamControllerEnqueueChunkToQueue(controller,buffer,byteOffset,byteLength){controller._queue.push({buffer,byteOffset,byteLength}),controller._queueTotalSize+=byteLength}__name2(ReadableByteStreamControllerEnqueueChunkToQueue,"ReadableByteStreamControllerEnqueueChunkToQueue"),__name(ReadableByteStreamControllerEnqueueChunkToQueue,"ReadableByteStreamControllerEnqueueChunkToQueue");function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller,pullIntoDescriptor){var elementSize=pullIntoDescriptor.elementSize,currentAlignedBytes=pullIntoDescriptor.bytesFilled-pullIntoDescriptor.bytesFilled%elementSize,maxBytesToCopy=Math.min(controller._queueTotalSize,pullIntoDescriptor.byteLength-pullIntoDescriptor.bytesFilled),maxBytesFilled=pullIntoDescriptor.bytesFilled+maxBytesToCopy,maxAlignedBytes=maxBytesFilled-maxBytesFilled%elementSize,totalBytesToCopyRemaining=maxBytesToCopy,ready=!1;maxAlignedBytes>currentAlignedBytes&&(totalBytesToCopyRemaining=maxAlignedBytes-pullIntoDescriptor.bytesFilled,ready=!0);for(var queue=controller._queue;totalBytesToCopyRemaining>0;){var headOfQueue=queue.peek(),bytesToCopy=Math.min(totalBytesToCopyRemaining,headOfQueue.byteLength),destStart=pullIntoDescriptor.byteOffset+pullIntoDescriptor.bytesFilled;CopyDataBlockBytes(pullIntoDescriptor.buffer,destStart,headOfQueue.buffer,headOfQueue.byteOffset,bytesToCopy),headOfQueue.byteLength===bytesToCopy?queue.shift():(headOfQueue.byteOffset+=bytesToCopy,headOfQueue.byteLength-=bytesToCopy),controller._queueTotalSize-=bytesToCopy,ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller,bytesToCopy,pullIntoDescriptor),totalBytesToCopyRemaining-=bytesToCopy}return ready}__name2(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue,"ReadableByteStreamControllerFillPullIntoDescriptorFromQueue"),__name(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue,"ReadableByteStreamControllerFillPullIntoDescriptorFromQueue");function ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller,size,pullIntoDescriptor){pullIntoDescriptor.bytesFilled+=size}__name2(ReadableByteStreamControllerFillHeadPullIntoDescriptor,"ReadableByteStreamControllerFillHeadPullIntoDescriptor"),__name(ReadableByteStreamControllerFillHeadPullIntoDescriptor,"ReadableByteStreamControllerFillHeadPullIntoDescriptor");function ReadableByteStreamControllerHandleQueueDrain(controller){controller._queueTotalSize===0&&controller._closeRequested?(ReadableByteStreamControllerClearAlgorithms(controller),ReadableStreamClose(controller._controlledReadableByteStream)):ReadableByteStreamControllerCallPullIfNeeded(controller)}__name2(ReadableByteStreamControllerHandleQueueDrain,"ReadableByteStreamControllerHandleQueueDrain"),__name(ReadableByteStreamControllerHandleQueueDrain,"ReadableByteStreamControllerHandleQueueDrain");function ReadableByteStreamControllerInvalidateBYOBRequest(controller){controller._byobRequest!==null&&(controller._byobRequest._associatedReadableByteStreamController=void 0,controller._byobRequest._view=null,controller._byobRequest=null)}__name2(ReadableByteStreamControllerInvalidateBYOBRequest,"ReadableByteStreamControllerInvalidateBYOBRequest"),__name(ReadableByteStreamControllerInvalidateBYOBRequest,"ReadableByteStreamControllerInvalidateBYOBRequest");function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller){for(;controller._pendingPullIntos.length>0;){if(controller._queueTotalSize===0)return;var pullIntoDescriptor=controller._pendingPullIntos.peek();ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller,pullIntoDescriptor)&&(ReadableByteStreamControllerShiftPendingPullInto(controller),ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream,pullIntoDescriptor))}}__name2(ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue,"ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue"),__name(ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue,"ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue");function ReadableByteStreamControllerPullInto(controller,view,readIntoRequest){var stream=controller._controlledReadableByteStream,elementSize=1;view.constructor!==DataView&&(elementSize=view.constructor.BYTES_PER_ELEMENT);var ctor=view.constructor,buffer=view.buffer,pullIntoDescriptor={buffer,bufferByteLength:buffer.byteLength,byteOffset:view.byteOffset,byteLength:view.byteLength,bytesFilled:0,elementSize,viewConstructor:ctor,readerType:"byob"};if(controller._pendingPullIntos.length>0){controller._pendingPullIntos.push(pullIntoDescriptor),ReadableStreamAddReadIntoRequest(stream,readIntoRequest);return}if(stream._state==="closed"){var emptyView=new ctor(pullIntoDescriptor.buffer,pullIntoDescriptor.byteOffset,0);readIntoRequest._closeSteps(emptyView);return}if(controller._queueTotalSize>0){if(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller,pullIntoDescriptor)){var filledView=ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);ReadableByteStreamControllerHandleQueueDrain(controller),readIntoRequest._chunkSteps(filledView);return}if(controller._closeRequested){var e=new TypeError("Insufficient bytes to fill elements in the given buffer");ReadableByteStreamControllerError(controller,e),readIntoRequest._errorSteps(e);return}}controller._pendingPullIntos.push(pullIntoDescriptor),ReadableStreamAddReadIntoRequest(stream,readIntoRequest),ReadableByteStreamControllerCallPullIfNeeded(controller)}__name2(ReadableByteStreamControllerPullInto,"ReadableByteStreamControllerPullInto"),__name(ReadableByteStreamControllerPullInto,"ReadableByteStreamControllerPullInto");function ReadableByteStreamControllerRespondInClosedState(controller,firstDescriptor){var stream=controller._controlledReadableByteStream;if(ReadableStreamHasBYOBReader(stream))for(;ReadableStreamGetNumReadIntoRequests(stream)>0;){var pullIntoDescriptor=ReadableByteStreamControllerShiftPendingPullInto(controller);ReadableByteStreamControllerCommitPullIntoDescriptor(stream,pullIntoDescriptor)}}__name2(ReadableByteStreamControllerRespondInClosedState,"ReadableByteStreamControllerRespondInClosedState"),__name(ReadableByteStreamControllerRespondInClosedState,"ReadableByteStreamControllerRespondInClosedState");function ReadableByteStreamControllerRespondInReadableState(controller,bytesWritten,pullIntoDescriptor){if(ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller,bytesWritten,pullIntoDescriptor),!(pullIntoDescriptor.bytesFilled<pullIntoDescriptor.elementSize)){ReadableByteStreamControllerShiftPendingPullInto(controller);var remainderSize=pullIntoDescriptor.bytesFilled%pullIntoDescriptor.elementSize;if(remainderSize>0){var end=pullIntoDescriptor.byteOffset+pullIntoDescriptor.bytesFilled,remainder=ArrayBufferSlice(pullIntoDescriptor.buffer,end-remainderSize,end);ReadableByteStreamControllerEnqueueChunkToQueue(controller,remainder,0,remainder.byteLength)}pullIntoDescriptor.bytesFilled-=remainderSize,ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream,pullIntoDescriptor),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller)}}__name2(ReadableByteStreamControllerRespondInReadableState,"ReadableByteStreamControllerRespondInReadableState"),__name(ReadableByteStreamControllerRespondInReadableState,"ReadableByteStreamControllerRespondInReadableState");function ReadableByteStreamControllerRespondInternal(controller,bytesWritten){var firstDescriptor=controller._pendingPullIntos.peek();ReadableByteStreamControllerInvalidateBYOBRequest(controller);var state=controller._controlledReadableByteStream._state;state==="closed"?ReadableByteStreamControllerRespondInClosedState(controller):ReadableByteStreamControllerRespondInReadableState(controller,bytesWritten,firstDescriptor),ReadableByteStreamControllerCallPullIfNeeded(controller)}__name2(ReadableByteStreamControllerRespondInternal,"ReadableByteStreamControllerRespondInternal"),__name(ReadableByteStreamControllerRespondInternal,"ReadableByteStreamControllerRespondInternal");function ReadableByteStreamControllerShiftPendingPullInto(controller){var descriptor=controller._pendingPullIntos.shift();return descriptor}__name2(ReadableByteStreamControllerShiftPendingPullInto,"ReadableByteStreamControllerShiftPendingPullInto"),__name(ReadableByteStreamControllerShiftPendingPullInto,"ReadableByteStreamControllerShiftPendingPullInto");function ReadableByteStreamControllerShouldCallPull(controller){var stream=controller._controlledReadableByteStream;if(stream._state!=="readable"||controller._closeRequested||!controller._started)return!1;if(ReadableStreamHasDefaultReader(stream)&&ReadableStreamGetNumReadRequests(stream)>0||ReadableStreamHasBYOBReader(stream)&&ReadableStreamGetNumReadIntoRequests(stream)>0)return!0;var desiredSize=ReadableByteStreamControllerGetDesiredSize(controller);return desiredSize>0}__name2(ReadableByteStreamControllerShouldCallPull,"ReadableByteStreamControllerShouldCallPull"),__name(ReadableByteStreamControllerShouldCallPull,"ReadableByteStreamControllerShouldCallPull");function ReadableByteStreamControllerClearAlgorithms(controller){controller._pullAlgorithm=void 0,controller._cancelAlgorithm=void 0}__name2(ReadableByteStreamControllerClearAlgorithms,"ReadableByteStreamControllerClearAlgorithms"),__name(ReadableByteStreamControllerClearAlgorithms,"ReadableByteStreamControllerClearAlgorithms");function ReadableByteStreamControllerClose(controller){var stream=controller._controlledReadableByteStream;if(!(controller._closeRequested||stream._state!=="readable")){if(controller._queueTotalSize>0){controller._closeRequested=!0;return}if(controller._pendingPullIntos.length>0){var firstPendingPullInto=controller._pendingPullIntos.peek();if(firstPendingPullInto.bytesFilled>0){var e=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ReadableByteStreamControllerError(controller,e),e}}ReadableByteStreamControllerClearAlgorithms(controller),ReadableStreamClose(stream)}}__name2(ReadableByteStreamControllerClose,"ReadableByteStreamControllerClose"),__name(ReadableByteStreamControllerClose,"ReadableByteStreamControllerClose");function ReadableByteStreamControllerEnqueue(controller,chunk){var stream=controller._controlledReadableByteStream;if(!(controller._closeRequested||stream._state!=="readable")){var buffer=chunk.buffer,byteOffset=chunk.byteOffset,byteLength=chunk.byteLength,transferredBuffer=buffer;if(controller._pendingPullIntos.length>0){var firstPendingPullInto=controller._pendingPullIntos.peek();IsDetachedBuffer(firstPendingPullInto.buffer),firstPendingPullInto.buffer=firstPendingPullInto.buffer}if(ReadableByteStreamControllerInvalidateBYOBRequest(controller),ReadableStreamHasDefaultReader(stream))if(ReadableStreamGetNumReadRequests(stream)===0)ReadableByteStreamControllerEnqueueChunkToQueue(controller,transferredBuffer,byteOffset,byteLength);else{controller._pendingPullIntos.length>0&&ReadableByteStreamControllerShiftPendingPullInto(controller);var transferredView=new Uint8Array(transferredBuffer,byteOffset,byteLength);ReadableStreamFulfillReadRequest(stream,transferredView,!1)}else ReadableStreamHasBYOBReader(stream)?(ReadableByteStreamControllerEnqueueChunkToQueue(controller,transferredBuffer,byteOffset,byteLength),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller)):ReadableByteStreamControllerEnqueueChunkToQueue(controller,transferredBuffer,byteOffset,byteLength);ReadableByteStreamControllerCallPullIfNeeded(controller)}}__name2(ReadableByteStreamControllerEnqueue,"ReadableByteStreamControllerEnqueue"),__name(ReadableByteStreamControllerEnqueue,"ReadableByteStreamControllerEnqueue");function ReadableByteStreamControllerError(controller,e){var stream=controller._controlledReadableByteStream;stream._state==="readable"&&(ReadableByteStreamControllerClearPendingPullIntos(controller),ResetQueue(controller),ReadableByteStreamControllerClearAlgorithms(controller),ReadableStreamError(stream,e))}__name2(ReadableByteStreamControllerError,"ReadableByteStreamControllerError"),__name(ReadableByteStreamControllerError,"ReadableByteStreamControllerError");function ReadableByteStreamControllerGetBYOBRequest(controller){if(controller._byobRequest===null&&controller._pendingPullIntos.length>0){var firstDescriptor=controller._pendingPullIntos.peek(),view=new Uint8Array(firstDescriptor.buffer,firstDescriptor.byteOffset+firstDescriptor.bytesFilled,firstDescriptor.byteLength-firstDescriptor.bytesFilled),byobRequest=Object.create(ReadableStreamBYOBRequest.prototype);SetUpReadableStreamBYOBRequest(byobRequest,controller,view),controller._byobRequest=byobRequest}return controller._byobRequest}__name2(ReadableByteStreamControllerGetBYOBRequest,"ReadableByteStreamControllerGetBYOBRequest"),__name(ReadableByteStreamControllerGetBYOBRequest,"ReadableByteStreamControllerGetBYOBRequest");function ReadableByteStreamControllerGetDesiredSize(controller){var state=controller._controlledReadableByteStream._state;return state==="errored"?null:state==="closed"?0:controller._strategyHWM-controller._queueTotalSize}__name2(ReadableByteStreamControllerGetDesiredSize,"ReadableByteStreamControllerGetDesiredSize"),__name(ReadableByteStreamControllerGetDesiredSize,"ReadableByteStreamControllerGetDesiredSize");function ReadableByteStreamControllerRespond(controller,bytesWritten){var firstDescriptor=controller._pendingPullIntos.peek(),state=controller._controlledReadableByteStream._state;if(state==="closed"){if(bytesWritten!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(bytesWritten===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(firstDescriptor.bytesFilled+bytesWritten>firstDescriptor.byteLength)throw new RangeError("bytesWritten out of range")}firstDescriptor.buffer=firstDescriptor.buffer,ReadableByteStreamControllerRespondInternal(controller,bytesWritten)}__name2(ReadableByteStreamControllerRespond,"ReadableByteStreamControllerRespond"),__name(ReadableByteStreamControllerRespond,"ReadableByteStreamControllerRespond");function ReadableByteStreamControllerRespondWithNewView(controller,view){var firstDescriptor=controller._pendingPullIntos.peek(),state=controller._controlledReadableByteStream._state;if(state==="closed"){if(view.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(view.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(firstDescriptor.byteOffset+firstDescriptor.bytesFilled!==view.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(firstDescriptor.bufferByteLength!==view.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(firstDescriptor.bytesFilled+view.byteLength>firstDescriptor.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var viewByteLength=view.byteLength;firstDescriptor.buffer=view.buffer,ReadableByteStreamControllerRespondInternal(controller,viewByteLength)}__name2(ReadableByteStreamControllerRespondWithNewView,"ReadableByteStreamControllerRespondWithNewView"),__name(ReadableByteStreamControllerRespondWithNewView,"ReadableByteStreamControllerRespondWithNewView");function SetUpReadableByteStreamController(stream,controller,startAlgorithm,pullAlgorithm,cancelAlgorithm,highWaterMark,autoAllocateChunkSize){controller._controlledReadableByteStream=stream,controller._pullAgain=!1,controller._pulling=!1,controller._byobRequest=null,controller._queue=controller._queueTotalSize=void 0,ResetQueue(controller),controller._closeRequested=!1,controller._started=!1,controller._strategyHWM=highWaterMark,controller._pullAlgorithm=pullAlgorithm,controller._cancelAlgorithm=cancelAlgorithm,controller._autoAllocateChunkSize=autoAllocateChunkSize,controller._pendingPullIntos=new SimpleQueue,stream._readableStreamController=controller;var startResult=startAlgorithm();uponPromise(promiseResolvedWith(startResult),function(){controller._started=!0,ReadableByteStreamControllerCallPullIfNeeded(controller)},function(r){ReadableByteStreamControllerError(controller,r)})}__name2(SetUpReadableByteStreamController,"SetUpReadableByteStreamController"),__name(SetUpReadableByteStreamController,"SetUpReadableByteStreamController");function SetUpReadableByteStreamControllerFromUnderlyingSource(stream,underlyingByteSource,highWaterMark){var controller=Object.create(ReadableByteStreamController.prototype),startAlgorithm=__name(function(){},"startAlgorithm"),pullAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"pullAlgorithm"),cancelAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"cancelAlgorithm");underlyingByteSource.start!==void 0&&(startAlgorithm=__name(function(){return underlyingByteSource.start(controller)},"startAlgorithm")),underlyingByteSource.pull!==void 0&&(pullAlgorithm=__name(function(){return underlyingByteSource.pull(controller)},"pullAlgorithm")),underlyingByteSource.cancel!==void 0&&(cancelAlgorithm=__name(function(reason){return underlyingByteSource.cancel(reason)},"cancelAlgorithm"));var autoAllocateChunkSize=underlyingByteSource.autoAllocateChunkSize;if(autoAllocateChunkSize===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");SetUpReadableByteStreamController(stream,controller,startAlgorithm,pullAlgorithm,cancelAlgorithm,highWaterMark,autoAllocateChunkSize)}__name2(SetUpReadableByteStreamControllerFromUnderlyingSource,"SetUpReadableByteStreamControllerFromUnderlyingSource"),__name(SetUpReadableByteStreamControllerFromUnderlyingSource,"SetUpReadableByteStreamControllerFromUnderlyingSource");function SetUpReadableStreamBYOBRequest(request,controller,view){request._associatedReadableByteStreamController=controller,request._view=view}__name2(SetUpReadableStreamBYOBRequest,"SetUpReadableStreamBYOBRequest"),__name(SetUpReadableStreamBYOBRequest,"SetUpReadableStreamBYOBRequest");function byobRequestBrandCheckException(name){return new TypeError("ReadableStreamBYOBRequest.prototype."+name+" can only be used on a ReadableStreamBYOBRequest")}__name2(byobRequestBrandCheckException,"byobRequestBrandCheckException"),__name(byobRequestBrandCheckException,"byobRequestBrandCheckException");function byteStreamControllerBrandCheckException(name){return new TypeError("ReadableByteStreamController.prototype."+name+" can only be used on a ReadableByteStreamController")}__name2(byteStreamControllerBrandCheckException,"byteStreamControllerBrandCheckException"),__name(byteStreamControllerBrandCheckException,"byteStreamControllerBrandCheckException");function AcquireReadableStreamBYOBReader(stream){return new ReadableStreamBYOBReader(stream)}__name2(AcquireReadableStreamBYOBReader,"AcquireReadableStreamBYOBReader"),__name(AcquireReadableStreamBYOBReader,"AcquireReadableStreamBYOBReader");function ReadableStreamAddReadIntoRequest(stream,readIntoRequest){stream._reader._readIntoRequests.push(readIntoRequest)}__name2(ReadableStreamAddReadIntoRequest,"ReadableStreamAddReadIntoRequest"),__name(ReadableStreamAddReadIntoRequest,"ReadableStreamAddReadIntoRequest");function ReadableStreamFulfillReadIntoRequest(stream,chunk,done){var reader=stream._reader,readIntoRequest=reader._readIntoRequests.shift();done?readIntoRequest._closeSteps(chunk):readIntoRequest._chunkSteps(chunk)}__name2(ReadableStreamFulfillReadIntoRequest,"ReadableStreamFulfillReadIntoRequest"),__name(ReadableStreamFulfillReadIntoRequest,"ReadableStreamFulfillReadIntoRequest");function ReadableStreamGetNumReadIntoRequests(stream){return stream._reader._readIntoRequests.length}__name2(ReadableStreamGetNumReadIntoRequests,"ReadableStreamGetNumReadIntoRequests"),__name(ReadableStreamGetNumReadIntoRequests,"ReadableStreamGetNumReadIntoRequests");function ReadableStreamHasBYOBReader(stream){var reader=stream._reader;return!(reader===void 0||!IsReadableStreamBYOBReader(reader))}__name2(ReadableStreamHasBYOBReader,"ReadableStreamHasBYOBReader"),__name(ReadableStreamHasBYOBReader,"ReadableStreamHasBYOBReader");var ReadableStreamBYOBReader=function(){function ReadableStreamBYOBReader2(stream){if(assertRequiredArgument(stream,1,"ReadableStreamBYOBReader"),assertReadableStream(stream,"First parameter"),IsReadableStreamLocked(stream))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!IsReadableByteStreamController(stream._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ReadableStreamReaderGenericInitialize(this,stream),this._readIntoRequests=new SimpleQueue}return __name2(ReadableStreamBYOBReader2,"ReadableStreamBYOBReader2"),__name(ReadableStreamBYOBReader2,"ReadableStreamBYOBReader"),Object.defineProperty(ReadableStreamBYOBReader2.prototype,"closed",{get:function(){return IsReadableStreamBYOBReader(this)?this._closedPromise:promiseRejectedWith(byobReaderBrandCheckException("closed"))},enumerable:!1,configurable:!0}),ReadableStreamBYOBReader2.prototype.cancel=function(reason){return reason===void 0&&(reason=void 0),IsReadableStreamBYOBReader(this)?this._ownerReadableStream===void 0?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,reason):promiseRejectedWith(byobReaderBrandCheckException("cancel"))},ReadableStreamBYOBReader2.prototype.read=function(view){if(!IsReadableStreamBYOBReader(this))return promiseRejectedWith(byobReaderBrandCheckException("read"));if(!ArrayBuffer.isView(view))return promiseRejectedWith(new TypeError("view must be an array buffer view"));if(view.byteLength===0)return promiseRejectedWith(new TypeError("view must have non-zero byteLength"));if(view.buffer.byteLength===0)return promiseRejectedWith(new TypeError("view's buffer must have non-zero byteLength"));if(IsDetachedBuffer(view.buffer),this._ownerReadableStream===void 0)return promiseRejectedWith(readerLockException("read from"));var resolvePromise,rejectPromise,promise=newPromise(function(resolve,reject){resolvePromise=resolve,rejectPromise=reject}),readIntoRequest={_chunkSteps:function(chunk){return resolvePromise({value:chunk,done:!1})},_closeSteps:function(chunk){return resolvePromise({value:chunk,done:!0})},_errorSteps:function(e){return rejectPromise(e)}};return ReadableStreamBYOBReaderRead(this,view,readIntoRequest),promise},ReadableStreamBYOBReader2.prototype.releaseLock=function(){if(!IsReadableStreamBYOBReader(this))throw byobReaderBrandCheckException("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}},ReadableStreamBYOBReader2}();Object.defineProperties(ReadableStreamBYOBReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ReadableStreamBYOBReader.prototype,SymbolPolyfill.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function IsReadableStreamBYOBReader(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_readIntoRequests")?!1:x instanceof ReadableStreamBYOBReader}__name2(IsReadableStreamBYOBReader,"IsReadableStreamBYOBReader"),__name(IsReadableStreamBYOBReader,"IsReadableStreamBYOBReader");function ReadableStreamBYOBReaderRead(reader,view,readIntoRequest){var stream=reader._ownerReadableStream;stream._disturbed=!0,stream._state==="errored"?readIntoRequest._errorSteps(stream._storedError):ReadableByteStreamControllerPullInto(stream._readableStreamController,view,readIntoRequest)}__name2(ReadableStreamBYOBReaderRead,"ReadableStreamBYOBReaderRead"),__name(ReadableStreamBYOBReaderRead,"ReadableStreamBYOBReaderRead");function byobReaderBrandCheckException(name){return new TypeError("ReadableStreamBYOBReader.prototype."+name+" can only be used on a ReadableStreamBYOBReader")}__name2(byobReaderBrandCheckException,"byobReaderBrandCheckException"),__name(byobReaderBrandCheckException,"byobReaderBrandCheckException");function ExtractHighWaterMark(strategy,defaultHWM){var highWaterMark=strategy.highWaterMark;if(highWaterMark===void 0)return defaultHWM;if(NumberIsNaN(highWaterMark)||highWaterMark<0)throw new RangeError("Invalid highWaterMark");return highWaterMark}__name2(ExtractHighWaterMark,"ExtractHighWaterMark"),__name(ExtractHighWaterMark,"ExtractHighWaterMark");function ExtractSizeAlgorithm(strategy){var size=strategy.size;return size||function(){return 1}}__name2(ExtractSizeAlgorithm,"ExtractSizeAlgorithm"),__name(ExtractSizeAlgorithm,"ExtractSizeAlgorithm");function convertQueuingStrategy(init,context){assertDictionary(init,context);var highWaterMark=init?.highWaterMark,size=init?.size;return{highWaterMark:highWaterMark===void 0?void 0:convertUnrestrictedDouble(highWaterMark),size:size===void 0?void 0:convertQueuingStrategySize(size,context+" has member 'size' that")}}__name2(convertQueuingStrategy,"convertQueuingStrategy"),__name(convertQueuingStrategy,"convertQueuingStrategy");function convertQueuingStrategySize(fn,context){return assertFunction(fn,context),function(chunk){return convertUnrestrictedDouble(fn(chunk))}}__name2(convertQueuingStrategySize,"convertQueuingStrategySize"),__name(convertQueuingStrategySize,"convertQueuingStrategySize");function convertUnderlyingSink(original,context){assertDictionary(original,context);var abort=original?.abort,close=original?.close,start=original?.start,type=original?.type,write=original?.write;return{abort:abort===void 0?void 0:convertUnderlyingSinkAbortCallback(abort,original,context+" has member 'abort' that"),close:close===void 0?void 0:convertUnderlyingSinkCloseCallback(close,original,context+" has member 'close' that"),start:start===void 0?void 0:convertUnderlyingSinkStartCallback(start,original,context+" has member 'start' that"),write:write===void 0?void 0:convertUnderlyingSinkWriteCallback(write,original,context+" has member 'write' that"),type}}__name2(convertUnderlyingSink,"convertUnderlyingSink"),__name(convertUnderlyingSink,"convertUnderlyingSink");function convertUnderlyingSinkAbortCallback(fn,original,context){return assertFunction(fn,context),function(reason){return promiseCall(fn,original,[reason])}}__name2(convertUnderlyingSinkAbortCallback,"convertUnderlyingSinkAbortCallback"),__name(convertUnderlyingSinkAbortCallback,"convertUnderlyingSinkAbortCallback");function convertUnderlyingSinkCloseCallback(fn,original,context){return assertFunction(fn,context),function(){return promiseCall(fn,original,[])}}__name2(convertUnderlyingSinkCloseCallback,"convertUnderlyingSinkCloseCallback"),__name(convertUnderlyingSinkCloseCallback,"convertUnderlyingSinkCloseCallback");function convertUnderlyingSinkStartCallback(fn,original,context){return assertFunction(fn,context),function(controller){return reflectCall(fn,original,[controller])}}__name2(convertUnderlyingSinkStartCallback,"convertUnderlyingSinkStartCallback"),__name(convertUnderlyingSinkStartCallback,"convertUnderlyingSinkStartCallback");function convertUnderlyingSinkWriteCallback(fn,original,context){return assertFunction(fn,context),function(chunk,controller){return promiseCall(fn,original,[chunk,controller])}}__name2(convertUnderlyingSinkWriteCallback,"convertUnderlyingSinkWriteCallback"),__name(convertUnderlyingSinkWriteCallback,"convertUnderlyingSinkWriteCallback");function assertWritableStream(x,context){if(!IsWritableStream(x))throw new TypeError(context+" is not a WritableStream.")}__name2(assertWritableStream,"assertWritableStream"),__name(assertWritableStream,"assertWritableStream");function isAbortSignal(value){if(typeof value!="object"||value===null)return!1;try{return typeof value.aborted=="boolean"}catch{return!1}}__name2(isAbortSignal,"isAbortSignal"),__name(isAbortSignal,"isAbortSignal");var supportsAbortController=typeof AbortController=="function";function createAbortController(){if(supportsAbortController)return new AbortController}__name2(createAbortController,"createAbortController"),__name(createAbortController,"createAbortController");var WritableStream=function(){function WritableStream2(rawUnderlyingSink,rawStrategy){rawUnderlyingSink===void 0&&(rawUnderlyingSink={}),rawStrategy===void 0&&(rawStrategy={}),rawUnderlyingSink===void 0?rawUnderlyingSink=null:assertObject(rawUnderlyingSink,"First parameter");var strategy=convertQueuingStrategy(rawStrategy,"Second parameter"),underlyingSink=convertUnderlyingSink(rawUnderlyingSink,"First parameter");InitializeWritableStream(this);var type=underlyingSink.type;if(type!==void 0)throw new RangeError("Invalid type is specified");var sizeAlgorithm=ExtractSizeAlgorithm(strategy),highWaterMark=ExtractHighWaterMark(strategy,1);SetUpWritableStreamDefaultControllerFromUnderlyingSink(this,underlyingSink,highWaterMark,sizeAlgorithm)}return __name2(WritableStream2,"WritableStream2"),__name(WritableStream2,"WritableStream"),Object.defineProperty(WritableStream2.prototype,"locked",{get:function(){if(!IsWritableStream(this))throw streamBrandCheckException$2("locked");return IsWritableStreamLocked(this)},enumerable:!1,configurable:!0}),WritableStream2.prototype.abort=function(reason){return reason===void 0&&(reason=void 0),IsWritableStream(this)?IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot abort a stream that already has a writer")):WritableStreamAbort(this,reason):promiseRejectedWith(streamBrandCheckException$2("abort"))},WritableStream2.prototype.close=function(){return IsWritableStream(this)?IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot close a stream that already has a writer")):WritableStreamCloseQueuedOrInFlight(this)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamClose(this):promiseRejectedWith(streamBrandCheckException$2("close"))},WritableStream2.prototype.getWriter=function(){if(!IsWritableStream(this))throw streamBrandCheckException$2("getWriter");return AcquireWritableStreamDefaultWriter(this)},WritableStream2}();Object.defineProperties(WritableStream.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(WritableStream.prototype,SymbolPolyfill.toStringTag,{value:"WritableStream",configurable:!0});function AcquireWritableStreamDefaultWriter(stream){return new WritableStreamDefaultWriter(stream)}__name2(AcquireWritableStreamDefaultWriter,"AcquireWritableStreamDefaultWriter"),__name(AcquireWritableStreamDefaultWriter,"AcquireWritableStreamDefaultWriter");function CreateWritableStream(startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,highWaterMark,sizeAlgorithm){highWaterMark===void 0&&(highWaterMark=1),sizeAlgorithm===void 0&&(sizeAlgorithm=__name(function(){return 1},"sizeAlgorithm"));var stream=Object.create(WritableStream.prototype);InitializeWritableStream(stream);var controller=Object.create(WritableStreamDefaultController.prototype);return SetUpWritableStreamDefaultController(stream,controller,startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,highWaterMark,sizeAlgorithm),stream}__name2(CreateWritableStream,"CreateWritableStream"),__name(CreateWritableStream,"CreateWritableStream");function InitializeWritableStream(stream){stream._state="writable",stream._storedError=void 0,stream._writer=void 0,stream._writableStreamController=void 0,stream._writeRequests=new SimpleQueue,stream._inFlightWriteRequest=void 0,stream._closeRequest=void 0,stream._inFlightCloseRequest=void 0,stream._pendingAbortRequest=void 0,stream._backpressure=!1}__name2(InitializeWritableStream,"InitializeWritableStream"),__name(InitializeWritableStream,"InitializeWritableStream");function IsWritableStream(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_writableStreamController")?!1:x instanceof WritableStream}__name2(IsWritableStream,"IsWritableStream"),__name(IsWritableStream,"IsWritableStream");function IsWritableStreamLocked(stream){return stream._writer!==void 0}__name2(IsWritableStreamLocked,"IsWritableStreamLocked"),__name(IsWritableStreamLocked,"IsWritableStreamLocked");function WritableStreamAbort(stream,reason){var _a22;if(stream._state==="closed"||stream._state==="errored")return promiseResolvedWith(void 0);stream._writableStreamController._abortReason=reason,(_a22=stream._writableStreamController._abortController)===null||_a22===void 0||_a22.abort();var state=stream._state;if(state==="closed"||state==="errored")return promiseResolvedWith(void 0);if(stream._pendingAbortRequest!==void 0)return stream._pendingAbortRequest._promise;var wasAlreadyErroring=!1;state==="erroring"&&(wasAlreadyErroring=!0,reason=void 0);var promise=newPromise(function(resolve,reject){stream._pendingAbortRequest={_promise:void 0,_resolve:resolve,_reject:reject,_reason:reason,_wasAlreadyErroring:wasAlreadyErroring}});return stream._pendingAbortRequest._promise=promise,wasAlreadyErroring||WritableStreamStartErroring(stream,reason),promise}__name2(WritableStreamAbort,"WritableStreamAbort"),__name(WritableStreamAbort,"WritableStreamAbort");function WritableStreamClose(stream){var state=stream._state;if(state==="closed"||state==="errored")return promiseRejectedWith(new TypeError("The stream (in "+state+" state) is not in the writable state and cannot be closed"));var promise=newPromise(function(resolve,reject){var closeRequest={_resolve:resolve,_reject:reject};stream._closeRequest=closeRequest}),writer=stream._writer;return writer!==void 0&&stream._backpressure&&state==="writable"&&defaultWriterReadyPromiseResolve(writer),WritableStreamDefaultControllerClose(stream._writableStreamController),promise}__name2(WritableStreamClose,"WritableStreamClose"),__name(WritableStreamClose,"WritableStreamClose");function WritableStreamAddWriteRequest(stream){var promise=newPromise(function(resolve,reject){var writeRequest={_resolve:resolve,_reject:reject};stream._writeRequests.push(writeRequest)});return promise}__name2(WritableStreamAddWriteRequest,"WritableStreamAddWriteRequest"),__name(WritableStreamAddWriteRequest,"WritableStreamAddWriteRequest");function WritableStreamDealWithRejection(stream,error){var state=stream._state;if(state==="writable"){WritableStreamStartErroring(stream,error);return}WritableStreamFinishErroring(stream)}__name2(WritableStreamDealWithRejection,"WritableStreamDealWithRejection"),__name(WritableStreamDealWithRejection,"WritableStreamDealWithRejection");function WritableStreamStartErroring(stream,reason){var controller=stream._writableStreamController;stream._state="erroring",stream._storedError=reason;var writer=stream._writer;writer!==void 0&&WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer,reason),!WritableStreamHasOperationMarkedInFlight(stream)&&controller._started&&WritableStreamFinishErroring(stream)}__name2(WritableStreamStartErroring,"WritableStreamStartErroring"),__name(WritableStreamStartErroring,"WritableStreamStartErroring");function WritableStreamFinishErroring(stream){stream._state="errored",stream._writableStreamController[ErrorSteps]();var storedError=stream._storedError;if(stream._writeRequests.forEach(function(writeRequest){writeRequest._reject(storedError)}),stream._writeRequests=new SimpleQueue,stream._pendingAbortRequest===void 0){WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);return}var abortRequest=stream._pendingAbortRequest;if(stream._pendingAbortRequest=void 0,abortRequest._wasAlreadyErroring){abortRequest._reject(storedError),WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);return}var promise=stream._writableStreamController[AbortSteps](abortRequest._reason);uponPromise(promise,function(){abortRequest._resolve(),WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream)},function(reason){abortRequest._reject(reason),WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream)})}__name2(WritableStreamFinishErroring,"WritableStreamFinishErroring"),__name(WritableStreamFinishErroring,"WritableStreamFinishErroring");function WritableStreamFinishInFlightWrite(stream){stream._inFlightWriteRequest._resolve(void 0),stream._inFlightWriteRequest=void 0}__name2(WritableStreamFinishInFlightWrite,"WritableStreamFinishInFlightWrite"),__name(WritableStreamFinishInFlightWrite,"WritableStreamFinishInFlightWrite");function WritableStreamFinishInFlightWriteWithError(stream,error){stream._inFlightWriteRequest._reject(error),stream._inFlightWriteRequest=void 0,WritableStreamDealWithRejection(stream,error)}__name2(WritableStreamFinishInFlightWriteWithError,"WritableStreamFinishInFlightWriteWithError"),__name(WritableStreamFinishInFlightWriteWithError,"WritableStreamFinishInFlightWriteWithError");function WritableStreamFinishInFlightClose(stream){stream._inFlightCloseRequest._resolve(void 0),stream._inFlightCloseRequest=void 0;var state=stream._state;state==="erroring"&&(stream._storedError=void 0,stream._pendingAbortRequest!==void 0&&(stream._pendingAbortRequest._resolve(),stream._pendingAbortRequest=void 0)),stream._state="closed";var writer=stream._writer;writer!==void 0&&defaultWriterClosedPromiseResolve(writer)}__name2(WritableStreamFinishInFlightClose,"WritableStreamFinishInFlightClose"),__name(WritableStreamFinishInFlightClose,"WritableStreamFinishInFlightClose");function WritableStreamFinishInFlightCloseWithError(stream,error){stream._inFlightCloseRequest._reject(error),stream._inFlightCloseRequest=void 0,stream._pendingAbortRequest!==void 0&&(stream._pendingAbortRequest._reject(error),stream._pendingAbortRequest=void 0),WritableStreamDealWithRejection(stream,error)}__name2(WritableStreamFinishInFlightCloseWithError,"WritableStreamFinishInFlightCloseWithError"),__name(WritableStreamFinishInFlightCloseWithError,"WritableStreamFinishInFlightCloseWithError");function WritableStreamCloseQueuedOrInFlight(stream){return!(stream._closeRequest===void 0&&stream._inFlightCloseRequest===void 0)}__name2(WritableStreamCloseQueuedOrInFlight,"WritableStreamCloseQueuedOrInFlight"),__name(WritableStreamCloseQueuedOrInFlight,"WritableStreamCloseQueuedOrInFlight");function WritableStreamHasOperationMarkedInFlight(stream){return!(stream._inFlightWriteRequest===void 0&&stream._inFlightCloseRequest===void 0)}__name2(WritableStreamHasOperationMarkedInFlight,"WritableStreamHasOperationMarkedInFlight"),__name(WritableStreamHasOperationMarkedInFlight,"WritableStreamHasOperationMarkedInFlight");function WritableStreamMarkCloseRequestInFlight(stream){stream._inFlightCloseRequest=stream._closeRequest,stream._closeRequest=void 0}__name2(WritableStreamMarkCloseRequestInFlight,"WritableStreamMarkCloseRequestInFlight"),__name(WritableStreamMarkCloseRequestInFlight,"WritableStreamMarkCloseRequestInFlight");function WritableStreamMarkFirstWriteRequestInFlight(stream){stream._inFlightWriteRequest=stream._writeRequests.shift()}__name2(WritableStreamMarkFirstWriteRequestInFlight,"WritableStreamMarkFirstWriteRequestInFlight"),__name(WritableStreamMarkFirstWriteRequestInFlight,"WritableStreamMarkFirstWriteRequestInFlight");function WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream){stream._closeRequest!==void 0&&(stream._closeRequest._reject(stream._storedError),stream._closeRequest=void 0);var writer=stream._writer;writer!==void 0&&defaultWriterClosedPromiseReject(writer,stream._storedError)}__name2(WritableStreamRejectCloseAndClosedPromiseIfNeeded,"WritableStreamRejectCloseAndClosedPromiseIfNeeded"),__name(WritableStreamRejectCloseAndClosedPromiseIfNeeded,"WritableStreamRejectCloseAndClosedPromiseIfNeeded");function WritableStreamUpdateBackpressure(stream,backpressure){var writer=stream._writer;writer!==void 0&&backpressure!==stream._backpressure&&(backpressure?defaultWriterReadyPromiseReset(writer):defaultWriterReadyPromiseResolve(writer)),stream._backpressure=backpressure}__name2(WritableStreamUpdateBackpressure,"WritableStreamUpdateBackpressure"),__name(WritableStreamUpdateBackpressure,"WritableStreamUpdateBackpressure");var WritableStreamDefaultWriter=function(){function WritableStreamDefaultWriter2(stream){if(assertRequiredArgument(stream,1,"WritableStreamDefaultWriter"),assertWritableStream(stream,"First parameter"),IsWritableStreamLocked(stream))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=stream,stream._writer=this;var state=stream._state;if(state==="writable")!WritableStreamCloseQueuedOrInFlight(stream)&&stream._backpressure?defaultWriterReadyPromiseInitialize(this):defaultWriterReadyPromiseInitializeAsResolved(this),defaultWriterClosedPromiseInitialize(this);else if(state==="erroring")defaultWriterReadyPromiseInitializeAsRejected(this,stream._storedError),defaultWriterClosedPromiseInitialize(this);else if(state==="closed")defaultWriterReadyPromiseInitializeAsResolved(this),defaultWriterClosedPromiseInitializeAsResolved(this);else{var storedError=stream._storedError;defaultWriterReadyPromiseInitializeAsRejected(this,storedError),defaultWriterClosedPromiseInitializeAsRejected(this,storedError)}}return __name2(WritableStreamDefaultWriter2,"WritableStreamDefaultWriter2"),__name(WritableStreamDefaultWriter2,"WritableStreamDefaultWriter"),Object.defineProperty(WritableStreamDefaultWriter2.prototype,"closed",{get:function(){return IsWritableStreamDefaultWriter(this)?this._closedPromise:promiseRejectedWith(defaultWriterBrandCheckException("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(WritableStreamDefaultWriter2.prototype,"desiredSize",{get:function(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("desiredSize");if(this._ownerWritableStream===void 0)throw defaultWriterLockException("desiredSize");return WritableStreamDefaultWriterGetDesiredSize(this)},enumerable:!1,configurable:!0}),Object.defineProperty(WritableStreamDefaultWriter2.prototype,"ready",{get:function(){return IsWritableStreamDefaultWriter(this)?this._readyPromise:promiseRejectedWith(defaultWriterBrandCheckException("ready"))},enumerable:!1,configurable:!0}),WritableStreamDefaultWriter2.prototype.abort=function(reason){return reason===void 0&&(reason=void 0),IsWritableStreamDefaultWriter(this)?this._ownerWritableStream===void 0?promiseRejectedWith(defaultWriterLockException("abort")):WritableStreamDefaultWriterAbort(this,reason):promiseRejectedWith(defaultWriterBrandCheckException("abort"))},WritableStreamDefaultWriter2.prototype.close=function(){if(!IsWritableStreamDefaultWriter(this))return promiseRejectedWith(defaultWriterBrandCheckException("close"));var stream=this._ownerWritableStream;return stream===void 0?promiseRejectedWith(defaultWriterLockException("close")):WritableStreamCloseQueuedOrInFlight(stream)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamDefaultWriterClose(this)},WritableStreamDefaultWriter2.prototype.releaseLock=function(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("releaseLock");var stream=this._ownerWritableStream;stream!==void 0&&WritableStreamDefaultWriterRelease(this)},WritableStreamDefaultWriter2.prototype.write=function(chunk){return chunk===void 0&&(chunk=void 0),IsWritableStreamDefaultWriter(this)?this._ownerWritableStream===void 0?promiseRejectedWith(defaultWriterLockException("write to")):WritableStreamDefaultWriterWrite(this,chunk):promiseRejectedWith(defaultWriterBrandCheckException("write"))},WritableStreamDefaultWriter2}();Object.defineProperties(WritableStreamDefaultWriter.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(WritableStreamDefaultWriter.prototype,SymbolPolyfill.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function IsWritableStreamDefaultWriter(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_ownerWritableStream")?!1:x instanceof WritableStreamDefaultWriter}__name2(IsWritableStreamDefaultWriter,"IsWritableStreamDefaultWriter"),__name(IsWritableStreamDefaultWriter,"IsWritableStreamDefaultWriter");function WritableStreamDefaultWriterAbort(writer,reason){var stream=writer._ownerWritableStream;return WritableStreamAbort(stream,reason)}__name2(WritableStreamDefaultWriterAbort,"WritableStreamDefaultWriterAbort"),__name(WritableStreamDefaultWriterAbort,"WritableStreamDefaultWriterAbort");function WritableStreamDefaultWriterClose(writer){var stream=writer._ownerWritableStream;return WritableStreamClose(stream)}__name2(WritableStreamDefaultWriterClose,"WritableStreamDefaultWriterClose"),__name(WritableStreamDefaultWriterClose,"WritableStreamDefaultWriterClose");function WritableStreamDefaultWriterCloseWithErrorPropagation(writer){var stream=writer._ownerWritableStream,state=stream._state;return WritableStreamCloseQueuedOrInFlight(stream)||state==="closed"?promiseResolvedWith(void 0):state==="errored"?promiseRejectedWith(stream._storedError):WritableStreamDefaultWriterClose(writer)}__name2(WritableStreamDefaultWriterCloseWithErrorPropagation,"WritableStreamDefaultWriterCloseWithErrorPropagation"),__name(WritableStreamDefaultWriterCloseWithErrorPropagation,"WritableStreamDefaultWriterCloseWithErrorPropagation");function WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer,error){writer._closedPromiseState==="pending"?defaultWriterClosedPromiseReject(writer,error):defaultWriterClosedPromiseResetToRejected(writer,error)}__name2(WritableStreamDefaultWriterEnsureClosedPromiseRejected,"WritableStreamDefaultWriterEnsureClosedPromiseRejected"),__name(WritableStreamDefaultWriterEnsureClosedPromiseRejected,"WritableStreamDefaultWriterEnsureClosedPromiseRejected");function WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer,error){writer._readyPromiseState==="pending"?defaultWriterReadyPromiseReject(writer,error):defaultWriterReadyPromiseResetToRejected(writer,error)}__name2(WritableStreamDefaultWriterEnsureReadyPromiseRejected,"WritableStreamDefaultWriterEnsureReadyPromiseRejected"),__name(WritableStreamDefaultWriterEnsureReadyPromiseRejected,"WritableStreamDefaultWriterEnsureReadyPromiseRejected");function WritableStreamDefaultWriterGetDesiredSize(writer){var stream=writer._ownerWritableStream,state=stream._state;return state==="errored"||state==="erroring"?null:state==="closed"?0:WritableStreamDefaultControllerGetDesiredSize(stream._writableStreamController)}__name2(WritableStreamDefaultWriterGetDesiredSize,"WritableStreamDefaultWriterGetDesiredSize"),__name(WritableStreamDefaultWriterGetDesiredSize,"WritableStreamDefaultWriterGetDesiredSize");function WritableStreamDefaultWriterRelease(writer){var stream=writer._ownerWritableStream,releasedError=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer,releasedError),WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer,releasedError),stream._writer=void 0,writer._ownerWritableStream=void 0}__name2(WritableStreamDefaultWriterRelease,"WritableStreamDefaultWriterRelease"),__name(WritableStreamDefaultWriterRelease,"WritableStreamDefaultWriterRelease");function WritableStreamDefaultWriterWrite(writer,chunk){var stream=writer._ownerWritableStream,controller=stream._writableStreamController,chunkSize=WritableStreamDefaultControllerGetChunkSize(controller,chunk);if(stream!==writer._ownerWritableStream)return promiseRejectedWith(defaultWriterLockException("write to"));var state=stream._state;if(state==="errored")return promiseRejectedWith(stream._storedError);if(WritableStreamCloseQueuedOrInFlight(stream)||state==="closed")return promiseRejectedWith(new TypeError("The stream is closing or closed and cannot be written to"));if(state==="erroring")return promiseRejectedWith(stream._storedError);var promise=WritableStreamAddWriteRequest(stream);return WritableStreamDefaultControllerWrite(controller,chunk,chunkSize),promise}__name2(WritableStreamDefaultWriterWrite,"WritableStreamDefaultWriterWrite"),__name(WritableStreamDefaultWriterWrite,"WritableStreamDefaultWriterWrite");var closeSentinel={},WritableStreamDefaultController=function(){function WritableStreamDefaultController2(){throw new TypeError("Illegal constructor")}return __name2(WritableStreamDefaultController2,"WritableStreamDefaultController2"),__name(WritableStreamDefaultController2,"WritableStreamDefaultController"),Object.defineProperty(WritableStreamDefaultController2.prototype,"abortReason",{get:function(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(WritableStreamDefaultController2.prototype,"signal",{get:function(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),WritableStreamDefaultController2.prototype.error=function(e){if(e===void 0&&(e=void 0),!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("error");var state=this._controlledWritableStream._state;state==="writable"&&WritableStreamDefaultControllerError(this,e)},WritableStreamDefaultController2.prototype[AbortSteps]=function(reason){var result=this._abortAlgorithm(reason);return WritableStreamDefaultControllerClearAlgorithms(this),result},WritableStreamDefaultController2.prototype[ErrorSteps]=function(){ResetQueue(this)},WritableStreamDefaultController2}();Object.defineProperties(WritableStreamDefaultController.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(WritableStreamDefaultController.prototype,SymbolPolyfill.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function IsWritableStreamDefaultController(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_controlledWritableStream")?!1:x instanceof WritableStreamDefaultController}__name2(IsWritableStreamDefaultController,"IsWritableStreamDefaultController"),__name(IsWritableStreamDefaultController,"IsWritableStreamDefaultController");function SetUpWritableStreamDefaultController(stream,controller,startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,highWaterMark,sizeAlgorithm){controller._controlledWritableStream=stream,stream._writableStreamController=controller,controller._queue=void 0,controller._queueTotalSize=void 0,ResetQueue(controller),controller._abortReason=void 0,controller._abortController=createAbortController(),controller._started=!1,controller._strategySizeAlgorithm=sizeAlgorithm,controller._strategyHWM=highWaterMark,controller._writeAlgorithm=writeAlgorithm,controller._closeAlgorithm=closeAlgorithm,controller._abortAlgorithm=abortAlgorithm;var backpressure=WritableStreamDefaultControllerGetBackpressure(controller);WritableStreamUpdateBackpressure(stream,backpressure);var startResult=startAlgorithm(),startPromise=promiseResolvedWith(startResult);uponPromise(startPromise,function(){controller._started=!0,WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller)},function(r){controller._started=!0,WritableStreamDealWithRejection(stream,r)})}__name2(SetUpWritableStreamDefaultController,"SetUpWritableStreamDefaultController"),__name(SetUpWritableStreamDefaultController,"SetUpWritableStreamDefaultController");function SetUpWritableStreamDefaultControllerFromUnderlyingSink(stream,underlyingSink,highWaterMark,sizeAlgorithm){var controller=Object.create(WritableStreamDefaultController.prototype),startAlgorithm=__name(function(){},"startAlgorithm"),writeAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"writeAlgorithm"),closeAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"closeAlgorithm"),abortAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"abortAlgorithm");underlyingSink.start!==void 0&&(startAlgorithm=__name(function(){return underlyingSink.start(controller)},"startAlgorithm")),underlyingSink.write!==void 0&&(writeAlgorithm=__name(function(chunk){return underlyingSink.write(chunk,controller)},"writeAlgorithm")),underlyingSink.close!==void 0&&(closeAlgorithm=__name(function(){return underlyingSink.close()},"closeAlgorithm")),underlyingSink.abort!==void 0&&(abortAlgorithm=__name(function(reason){return underlyingSink.abort(reason)},"abortAlgorithm")),SetUpWritableStreamDefaultController(stream,controller,startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,highWaterMark,sizeAlgorithm)}__name2(SetUpWritableStreamDefaultControllerFromUnderlyingSink,"SetUpWritableStreamDefaultControllerFromUnderlyingSink"),__name(SetUpWritableStreamDefaultControllerFromUnderlyingSink,"SetUpWritableStreamDefaultControllerFromUnderlyingSink");function WritableStreamDefaultControllerClearAlgorithms(controller){controller._writeAlgorithm=void 0,controller._closeAlgorithm=void 0,controller._abortAlgorithm=void 0,controller._strategySizeAlgorithm=void 0}__name2(WritableStreamDefaultControllerClearAlgorithms,"WritableStreamDefaultControllerClearAlgorithms"),__name(WritableStreamDefaultControllerClearAlgorithms,"WritableStreamDefaultControllerClearAlgorithms");function WritableStreamDefaultControllerClose(controller){EnqueueValueWithSize(controller,closeSentinel,0),WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller)}__name2(WritableStreamDefaultControllerClose,"WritableStreamDefaultControllerClose"),__name(WritableStreamDefaultControllerClose,"WritableStreamDefaultControllerClose");function WritableStreamDefaultControllerGetChunkSize(controller,chunk){try{return controller._strategySizeAlgorithm(chunk)}catch(chunkSizeE){return WritableStreamDefaultControllerErrorIfNeeded(controller,chunkSizeE),1}}__name2(WritableStreamDefaultControllerGetChunkSize,"WritableStreamDefaultControllerGetChunkSize"),__name(WritableStreamDefaultControllerGetChunkSize,"WritableStreamDefaultControllerGetChunkSize");function WritableStreamDefaultControllerGetDesiredSize(controller){return controller._strategyHWM-controller._queueTotalSize}__name2(WritableStreamDefaultControllerGetDesiredSize,"WritableStreamDefaultControllerGetDesiredSize"),__name(WritableStreamDefaultControllerGetDesiredSize,"WritableStreamDefaultControllerGetDesiredSize");function WritableStreamDefaultControllerWrite(controller,chunk,chunkSize){try{EnqueueValueWithSize(controller,chunk,chunkSize)}catch(enqueueE){WritableStreamDefaultControllerErrorIfNeeded(controller,enqueueE);return}var stream=controller._controlledWritableStream;if(!WritableStreamCloseQueuedOrInFlight(stream)&&stream._state==="writable"){var backpressure=WritableStreamDefaultControllerGetBackpressure(controller);WritableStreamUpdateBackpressure(stream,backpressure)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller)}__name2(WritableStreamDefaultControllerWrite,"WritableStreamDefaultControllerWrite"),__name(WritableStreamDefaultControllerWrite,"WritableStreamDefaultControllerWrite");function WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller){var stream=controller._controlledWritableStream;if(controller._started&&stream._inFlightWriteRequest===void 0){var state=stream._state;if(state==="erroring"){WritableStreamFinishErroring(stream);return}if(controller._queue.length!==0){var value=PeekQueueValue(controller);value===closeSentinel?WritableStreamDefaultControllerProcessClose(controller):WritableStreamDefaultControllerProcessWrite(controller,value)}}}__name2(WritableStreamDefaultControllerAdvanceQueueIfNeeded,"WritableStreamDefaultControllerAdvanceQueueIfNeeded"),__name(WritableStreamDefaultControllerAdvanceQueueIfNeeded,"WritableStreamDefaultControllerAdvanceQueueIfNeeded");function WritableStreamDefaultControllerErrorIfNeeded(controller,error){controller._controlledWritableStream._state==="writable"&&WritableStreamDefaultControllerError(controller,error)}__name2(WritableStreamDefaultControllerErrorIfNeeded,"WritableStreamDefaultControllerErrorIfNeeded"),__name(WritableStreamDefaultControllerErrorIfNeeded,"WritableStreamDefaultControllerErrorIfNeeded");function WritableStreamDefaultControllerProcessClose(controller){var stream=controller._controlledWritableStream;WritableStreamMarkCloseRequestInFlight(stream),DequeueValue(controller);var sinkClosePromise=controller._closeAlgorithm();WritableStreamDefaultControllerClearAlgorithms(controller),uponPromise(sinkClosePromise,function(){WritableStreamFinishInFlightClose(stream)},function(reason){WritableStreamFinishInFlightCloseWithError(stream,reason)})}__name2(WritableStreamDefaultControllerProcessClose,"WritableStreamDefaultControllerProcessClose"),__name(WritableStreamDefaultControllerProcessClose,"WritableStreamDefaultControllerProcessClose");function WritableStreamDefaultControllerProcessWrite(controller,chunk){var stream=controller._controlledWritableStream;WritableStreamMarkFirstWriteRequestInFlight(stream);var sinkWritePromise=controller._writeAlgorithm(chunk);uponPromise(sinkWritePromise,function(){WritableStreamFinishInFlightWrite(stream);var state=stream._state;if(DequeueValue(controller),!WritableStreamCloseQueuedOrInFlight(stream)&&state==="writable"){var backpressure=WritableStreamDefaultControllerGetBackpressure(controller);WritableStreamUpdateBackpressure(stream,backpressure)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller)},function(reason){stream._state==="writable"&&WritableStreamDefaultControllerClearAlgorithms(controller),WritableStreamFinishInFlightWriteWithError(stream,reason)})}__name2(WritableStreamDefaultControllerProcessWrite,"WritableStreamDefaultControllerProcessWrite"),__name(WritableStreamDefaultControllerProcessWrite,"WritableStreamDefaultControllerProcessWrite");function WritableStreamDefaultControllerGetBackpressure(controller){var desiredSize=WritableStreamDefaultControllerGetDesiredSize(controller);return desiredSize<=0}__name2(WritableStreamDefaultControllerGetBackpressure,"WritableStreamDefaultControllerGetBackpressure"),__name(WritableStreamDefaultControllerGetBackpressure,"WritableStreamDefaultControllerGetBackpressure");function WritableStreamDefaultControllerError(controller,error){var stream=controller._controlledWritableStream;WritableStreamDefaultControllerClearAlgorithms(controller),WritableStreamStartErroring(stream,error)}__name2(WritableStreamDefaultControllerError,"WritableStreamDefaultControllerError"),__name(WritableStreamDefaultControllerError,"WritableStreamDefaultControllerError");function streamBrandCheckException$2(name){return new TypeError("WritableStream.prototype."+name+" can only be used on a WritableStream")}__name2(streamBrandCheckException$2,"streamBrandCheckException$2"),__name(streamBrandCheckException$2,"streamBrandCheckException$2");function defaultControllerBrandCheckException$2(name){return new TypeError("WritableStreamDefaultController.prototype."+name+" can only be used on a WritableStreamDefaultController")}__name2(defaultControllerBrandCheckException$2,"defaultControllerBrandCheckException$2"),__name(defaultControllerBrandCheckException$2,"defaultControllerBrandCheckException$2");function defaultWriterBrandCheckException(name){return new TypeError("WritableStreamDefaultWriter.prototype."+name+" can only be used on a WritableStreamDefaultWriter")}__name2(defaultWriterBrandCheckException,"defaultWriterBrandCheckException"),__name(defaultWriterBrandCheckException,"defaultWriterBrandCheckException");function defaultWriterLockException(name){return new TypeError("Cannot "+name+" a stream using a released writer")}__name2(defaultWriterLockException,"defaultWriterLockException"),__name(defaultWriterLockException,"defaultWriterLockException");function defaultWriterClosedPromiseInitialize(writer){writer._closedPromise=newPromise(function(resolve,reject){writer._closedPromise_resolve=resolve,writer._closedPromise_reject=reject,writer._closedPromiseState="pending"})}__name2(defaultWriterClosedPromiseInitialize,"defaultWriterClosedPromiseInitialize"),__name(defaultWriterClosedPromiseInitialize,"defaultWriterClosedPromiseInitialize");function defaultWriterClosedPromiseInitializeAsRejected(writer,reason){defaultWriterClosedPromiseInitialize(writer),defaultWriterClosedPromiseReject(writer,reason)}__name2(defaultWriterClosedPromiseInitializeAsRejected,"defaultWriterClosedPromiseInitializeAsRejected"),__name(defaultWriterClosedPromiseInitializeAsRejected,"defaultWriterClosedPromiseInitializeAsRejected");function defaultWriterClosedPromiseInitializeAsResolved(writer){defaultWriterClosedPromiseInitialize(writer),defaultWriterClosedPromiseResolve(writer)}__name2(defaultWriterClosedPromiseInitializeAsResolved,"defaultWriterClosedPromiseInitializeAsResolved"),__name(defaultWriterClosedPromiseInitializeAsResolved,"defaultWriterClosedPromiseInitializeAsResolved");function defaultWriterClosedPromiseReject(writer,reason){writer._closedPromise_reject!==void 0&&(setPromiseIsHandledToTrue(writer._closedPromise),writer._closedPromise_reject(reason),writer._closedPromise_resolve=void 0,writer._closedPromise_reject=void 0,writer._closedPromiseState="rejected")}__name2(defaultWriterClosedPromiseReject,"defaultWriterClosedPromiseReject"),__name(defaultWriterClosedPromiseReject,"defaultWriterClosedPromiseReject");function defaultWriterClosedPromiseResetToRejected(writer,reason){defaultWriterClosedPromiseInitializeAsRejected(writer,reason)}__name2(defaultWriterClosedPromiseResetToRejected,"defaultWriterClosedPromiseResetToRejected"),__name(defaultWriterClosedPromiseResetToRejected,"defaultWriterClosedPromiseResetToRejected");function defaultWriterClosedPromiseResolve(writer){writer._closedPromise_resolve!==void 0&&(writer._closedPromise_resolve(void 0),writer._closedPromise_resolve=void 0,writer._closedPromise_reject=void 0,writer._closedPromiseState="resolved")}__name2(defaultWriterClosedPromiseResolve,"defaultWriterClosedPromiseResolve"),__name(defaultWriterClosedPromiseResolve,"defaultWriterClosedPromiseResolve");function defaultWriterReadyPromiseInitialize(writer){writer._readyPromise=newPromise(function(resolve,reject){writer._readyPromise_resolve=resolve,writer._readyPromise_reject=reject}),writer._readyPromiseState="pending"}__name2(defaultWriterReadyPromiseInitialize,"defaultWriterReadyPromiseInitialize"),__name(defaultWriterReadyPromiseInitialize,"defaultWriterReadyPromiseInitialize");function defaultWriterReadyPromiseInitializeAsRejected(writer,reason){defaultWriterReadyPromiseInitialize(writer),defaultWriterReadyPromiseReject(writer,reason)}__name2(defaultWriterReadyPromiseInitializeAsRejected,"defaultWriterReadyPromiseInitializeAsRejected"),__name(defaultWriterReadyPromiseInitializeAsRejected,"defaultWriterReadyPromiseInitializeAsRejected");function defaultWriterReadyPromiseInitializeAsResolved(writer){defaultWriterReadyPromiseInitialize(writer),defaultWriterReadyPromiseResolve(writer)}__name2(defaultWriterReadyPromiseInitializeAsResolved,"defaultWriterReadyPromiseInitializeAsResolved"),__name(defaultWriterReadyPromiseInitializeAsResolved,"defaultWriterReadyPromiseInitializeAsResolved");function defaultWriterReadyPromiseReject(writer,reason){writer._readyPromise_reject!==void 0&&(setPromiseIsHandledToTrue(writer._readyPromise),writer._readyPromise_reject(reason),writer._readyPromise_resolve=void 0,writer._readyPromise_reject=void 0,writer._readyPromiseState="rejected")}__name2(defaultWriterReadyPromiseReject,"defaultWriterReadyPromiseReject"),__name(defaultWriterReadyPromiseReject,"defaultWriterReadyPromiseReject");function defaultWriterReadyPromiseReset(writer){defaultWriterReadyPromiseInitialize(writer)}__name2(defaultWriterReadyPromiseReset,"defaultWriterReadyPromiseReset"),__name(defaultWriterReadyPromiseReset,"defaultWriterReadyPromiseReset");function defaultWriterReadyPromiseResetToRejected(writer,reason){defaultWriterReadyPromiseInitializeAsRejected(writer,reason)}__name2(defaultWriterReadyPromiseResetToRejected,"defaultWriterReadyPromiseResetToRejected"),__name(defaultWriterReadyPromiseResetToRejected,"defaultWriterReadyPromiseResetToRejected");function defaultWriterReadyPromiseResolve(writer){writer._readyPromise_resolve!==void 0&&(writer._readyPromise_resolve(void 0),writer._readyPromise_resolve=void 0,writer._readyPromise_reject=void 0,writer._readyPromiseState="fulfilled")}__name2(defaultWriterReadyPromiseResolve,"defaultWriterReadyPromiseResolve"),__name(defaultWriterReadyPromiseResolve,"defaultWriterReadyPromiseResolve");var NativeDOMException=typeof DOMException<"u"?DOMException:void 0;function isDOMExceptionConstructor(ctor){if(!(typeof ctor=="function"||typeof ctor=="object"))return!1;try{return new ctor,!0}catch{return!1}}__name2(isDOMExceptionConstructor,"isDOMExceptionConstructor"),__name(isDOMExceptionConstructor,"isDOMExceptionConstructor");function createDOMExceptionPolyfill(){var ctor=__name(__name2(function(message,name){this.message=message||"",this.name=name||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)},"DOMException2"),"DOMException");return ctor.prototype=Object.create(Error.prototype),Object.defineProperty(ctor.prototype,"constructor",{value:ctor,writable:!0,configurable:!0}),ctor}__name2(createDOMExceptionPolyfill,"createDOMExceptionPolyfill"),__name(createDOMExceptionPolyfill,"createDOMExceptionPolyfill");var DOMException$1=isDOMExceptionConstructor(NativeDOMException)?NativeDOMException:createDOMExceptionPolyfill();function ReadableStreamPipeTo(source,dest,preventClose,preventAbort,preventCancel,signal){var reader=AcquireReadableStreamDefaultReader(source),writer=AcquireWritableStreamDefaultWriter(dest);source._disturbed=!0;var shuttingDown=!1,currentWrite=promiseResolvedWith(void 0);return newPromise(function(resolve,reject){var abortAlgorithm;if(signal!==void 0){if(abortAlgorithm=__name(function(){var error=new DOMException$1("Aborted","AbortError"),actions=[];preventAbort||actions.push(function(){return dest._state==="writable"?WritableStreamAbort(dest,error):promiseResolvedWith(void 0)}),preventCancel||actions.push(function(){return source._state==="readable"?ReadableStreamCancel(source,error):promiseResolvedWith(void 0)}),shutdownWithAction(function(){return Promise.all(actions.map(function(action){return action()}))},!0,error)},"abortAlgorithm"),signal.aborted){abortAlgorithm();return}signal.addEventListener("abort",abortAlgorithm)}function pipeLoop(){return newPromise(function(resolveLoop,rejectLoop){function next(done){done?resolveLoop():PerformPromiseThen(pipeStep(),next,rejectLoop)}__name2(next,"next"),__name(next,"next"),next(!1)})}__name2(pipeLoop,"pipeLoop"),__name(pipeLoop,"pipeLoop");function pipeStep(){return shuttingDown?promiseResolvedWith(!0):PerformPromiseThen(writer._readyPromise,function(){return newPromise(function(resolveRead,rejectRead){ReadableStreamDefaultReaderRead(reader,{_chunkSteps:function(chunk){currentWrite=PerformPromiseThen(WritableStreamDefaultWriterWrite(writer,chunk),void 0,noop),resolveRead(!1)},_closeSteps:function(){return resolveRead(!0)},_errorSteps:rejectRead})})})}if(__name2(pipeStep,"pipeStep"),__name(pipeStep,"pipeStep"),isOrBecomesErrored(source,reader._closedPromise,function(storedError){preventAbort?shutdown(!0,storedError):shutdownWithAction(function(){return WritableStreamAbort(dest,storedError)},!0,storedError)}),isOrBecomesErrored(dest,writer._closedPromise,function(storedError){preventCancel?shutdown(!0,storedError):shutdownWithAction(function(){return ReadableStreamCancel(source,storedError)},!0,storedError)}),isOrBecomesClosed(source,reader._closedPromise,function(){preventClose?shutdown():shutdownWithAction(function(){return WritableStreamDefaultWriterCloseWithErrorPropagation(writer)})}),WritableStreamCloseQueuedOrInFlight(dest)||dest._state==="closed"){var destClosed_1=new TypeError("the destination writable stream closed before all data could be piped to it");preventCancel?shutdown(!0,destClosed_1):shutdownWithAction(function(){return ReadableStreamCancel(source,destClosed_1)},!0,destClosed_1)}setPromiseIsHandledToTrue(pipeLoop());function waitForWritesToFinish(){var oldCurrentWrite=currentWrite;return PerformPromiseThen(currentWrite,function(){return oldCurrentWrite!==currentWrite?waitForWritesToFinish():void 0})}__name2(waitForWritesToFinish,"waitForWritesToFinish"),__name(waitForWritesToFinish,"waitForWritesToFinish");function isOrBecomesErrored(stream,promise,action){stream._state==="errored"?action(stream._storedError):uponRejection(promise,action)}__name2(isOrBecomesErrored,"isOrBecomesErrored"),__name(isOrBecomesErrored,"isOrBecomesErrored");function isOrBecomesClosed(stream,promise,action){stream._state==="closed"?action():uponFulfillment(promise,action)}__name2(isOrBecomesClosed,"isOrBecomesClosed"),__name(isOrBecomesClosed,"isOrBecomesClosed");function shutdownWithAction(action,originalIsError,originalError){if(shuttingDown)return;shuttingDown=!0,dest._state==="writable"&&!WritableStreamCloseQueuedOrInFlight(dest)?uponFulfillment(waitForWritesToFinish(),doTheRest):doTheRest();function doTheRest(){uponPromise(action(),function(){return finalize(originalIsError,originalError)},function(newError){return finalize(!0,newError)})}__name2(doTheRest,"doTheRest"),__name(doTheRest,"doTheRest")}__name2(shutdownWithAction,"shutdownWithAction"),__name(shutdownWithAction,"shutdownWithAction");function shutdown(isError,error){shuttingDown||(shuttingDown=!0,dest._state==="writable"&&!WritableStreamCloseQueuedOrInFlight(dest)?uponFulfillment(waitForWritesToFinish(),function(){return finalize(isError,error)}):finalize(isError,error))}__name2(shutdown,"shutdown"),__name(shutdown,"shutdown");function finalize(isError,error){WritableStreamDefaultWriterRelease(writer),ReadableStreamReaderGenericRelease(reader),signal!==void 0&&signal.removeEventListener("abort",abortAlgorithm),isError?reject(error):resolve(void 0)}__name2(finalize,"finalize"),__name(finalize,"finalize")})}__name2(ReadableStreamPipeTo,"ReadableStreamPipeTo"),__name(ReadableStreamPipeTo,"ReadableStreamPipeTo");var ReadableStreamDefaultController=function(){function ReadableStreamDefaultController2(){throw new TypeError("Illegal constructor")}return __name2(ReadableStreamDefaultController2,"ReadableStreamDefaultController2"),__name(ReadableStreamDefaultController2,"ReadableStreamDefaultController"),Object.defineProperty(ReadableStreamDefaultController2.prototype,"desiredSize",{get:function(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this)},enumerable:!1,configurable:!0}),ReadableStreamDefaultController2.prototype.close=function(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("close");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits close");ReadableStreamDefaultControllerClose(this)},ReadableStreamDefaultController2.prototype.enqueue=function(chunk){if(chunk===void 0&&(chunk=void 0),!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("enqueue");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits enqueue");return ReadableStreamDefaultControllerEnqueue(this,chunk)},ReadableStreamDefaultController2.prototype.error=function(e){if(e===void 0&&(e=void 0),!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("error");ReadableStreamDefaultControllerError(this,e)},ReadableStreamDefaultController2.prototype[CancelSteps]=function(reason){ResetQueue(this);var result=this._cancelAlgorithm(reason);return ReadableStreamDefaultControllerClearAlgorithms(this),result},ReadableStreamDefaultController2.prototype[PullSteps]=function(readRequest){var stream=this._controlledReadableStream;if(this._queue.length>0){var chunk=DequeueValue(this);this._closeRequested&&this._queue.length===0?(ReadableStreamDefaultControllerClearAlgorithms(this),ReadableStreamClose(stream)):ReadableStreamDefaultControllerCallPullIfNeeded(this),readRequest._chunkSteps(chunk)}else ReadableStreamAddReadRequest(stream,readRequest),ReadableStreamDefaultControllerCallPullIfNeeded(this)},ReadableStreamDefaultController2}();Object.defineProperties(ReadableStreamDefaultController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ReadableStreamDefaultController.prototype,SymbolPolyfill.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function IsReadableStreamDefaultController(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_controlledReadableStream")?!1:x instanceof ReadableStreamDefaultController}__name2(IsReadableStreamDefaultController,"IsReadableStreamDefaultController"),__name(IsReadableStreamDefaultController,"IsReadableStreamDefaultController");function ReadableStreamDefaultControllerCallPullIfNeeded(controller){var shouldPull=ReadableStreamDefaultControllerShouldCallPull(controller);if(shouldPull){if(controller._pulling){controller._pullAgain=!0;return}controller._pulling=!0;var pullPromise=controller._pullAlgorithm();uponPromise(pullPromise,function(){controller._pulling=!1,controller._pullAgain&&(controller._pullAgain=!1,ReadableStreamDefaultControllerCallPullIfNeeded(controller))},function(e){ReadableStreamDefaultControllerError(controller,e)})}}__name2(ReadableStreamDefaultControllerCallPullIfNeeded,"ReadableStreamDefaultControllerCallPullIfNeeded"),__name(ReadableStreamDefaultControllerCallPullIfNeeded,"ReadableStreamDefaultControllerCallPullIfNeeded");function ReadableStreamDefaultControllerShouldCallPull(controller){var stream=controller._controlledReadableStream;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)||!controller._started)return!1;if(IsReadableStreamLocked(stream)&&ReadableStreamGetNumReadRequests(stream)>0)return!0;var desiredSize=ReadableStreamDefaultControllerGetDesiredSize(controller);return desiredSize>0}__name2(ReadableStreamDefaultControllerShouldCallPull,"ReadableStreamDefaultControllerShouldCallPull"),__name(ReadableStreamDefaultControllerShouldCallPull,"ReadableStreamDefaultControllerShouldCallPull");function ReadableStreamDefaultControllerClearAlgorithms(controller){controller._pullAlgorithm=void 0,controller._cancelAlgorithm=void 0,controller._strategySizeAlgorithm=void 0}__name2(ReadableStreamDefaultControllerClearAlgorithms,"ReadableStreamDefaultControllerClearAlgorithms"),__name(ReadableStreamDefaultControllerClearAlgorithms,"ReadableStreamDefaultControllerClearAlgorithms");function ReadableStreamDefaultControllerClose(controller){if(ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)){var stream=controller._controlledReadableStream;controller._closeRequested=!0,controller._queue.length===0&&(ReadableStreamDefaultControllerClearAlgorithms(controller),ReadableStreamClose(stream))}}__name2(ReadableStreamDefaultControllerClose,"ReadableStreamDefaultControllerClose"),__name(ReadableStreamDefaultControllerClose,"ReadableStreamDefaultControllerClose");function ReadableStreamDefaultControllerEnqueue(controller,chunk){if(ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)){var stream=controller._controlledReadableStream;if(IsReadableStreamLocked(stream)&&ReadableStreamGetNumReadRequests(stream)>0)ReadableStreamFulfillReadRequest(stream,chunk,!1);else{var chunkSize=void 0;try{chunkSize=controller._strategySizeAlgorithm(chunk)}catch(chunkSizeE){throw ReadableStreamDefaultControllerError(controller,chunkSizeE),chunkSizeE}try{EnqueueValueWithSize(controller,chunk,chunkSize)}catch(enqueueE){throw ReadableStreamDefaultControllerError(controller,enqueueE),enqueueE}}ReadableStreamDefaultControllerCallPullIfNeeded(controller)}}__name2(ReadableStreamDefaultControllerEnqueue,"ReadableStreamDefaultControllerEnqueue"),__name(ReadableStreamDefaultControllerEnqueue,"ReadableStreamDefaultControllerEnqueue");function ReadableStreamDefaultControllerError(controller,e){var stream=controller._controlledReadableStream;stream._state==="readable"&&(ResetQueue(controller),ReadableStreamDefaultControllerClearAlgorithms(controller),ReadableStreamError(stream,e))}__name2(ReadableStreamDefaultControllerError,"ReadableStreamDefaultControllerError"),__name(ReadableStreamDefaultControllerError,"ReadableStreamDefaultControllerError");function ReadableStreamDefaultControllerGetDesiredSize(controller){var state=controller._controlledReadableStream._state;return state==="errored"?null:state==="closed"?0:controller._strategyHWM-controller._queueTotalSize}__name2(ReadableStreamDefaultControllerGetDesiredSize,"ReadableStreamDefaultControllerGetDesiredSize"),__name(ReadableStreamDefaultControllerGetDesiredSize,"ReadableStreamDefaultControllerGetDesiredSize");function ReadableStreamDefaultControllerHasBackpressure(controller){return!ReadableStreamDefaultControllerShouldCallPull(controller)}__name2(ReadableStreamDefaultControllerHasBackpressure,"ReadableStreamDefaultControllerHasBackpressure"),__name(ReadableStreamDefaultControllerHasBackpressure,"ReadableStreamDefaultControllerHasBackpressure");function ReadableStreamDefaultControllerCanCloseOrEnqueue(controller){var state=controller._controlledReadableStream._state;return!controller._closeRequested&&state==="readable"}__name2(ReadableStreamDefaultControllerCanCloseOrEnqueue,"ReadableStreamDefaultControllerCanCloseOrEnqueue"),__name(ReadableStreamDefaultControllerCanCloseOrEnqueue,"ReadableStreamDefaultControllerCanCloseOrEnqueue");function SetUpReadableStreamDefaultController(stream,controller,startAlgorithm,pullAlgorithm,cancelAlgorithm,highWaterMark,sizeAlgorithm){controller._controlledReadableStream=stream,controller._queue=void 0,controller._queueTotalSize=void 0,ResetQueue(controller),controller._started=!1,controller._closeRequested=!1,controller._pullAgain=!1,controller._pulling=!1,controller._strategySizeAlgorithm=sizeAlgorithm,controller._strategyHWM=highWaterMark,controller._pullAlgorithm=pullAlgorithm,controller._cancelAlgorithm=cancelAlgorithm,stream._readableStreamController=controller;var startResult=startAlgorithm();uponPromise(promiseResolvedWith(startResult),function(){controller._started=!0,ReadableStreamDefaultControllerCallPullIfNeeded(controller)},function(r){ReadableStreamDefaultControllerError(controller,r)})}__name2(SetUpReadableStreamDefaultController,"SetUpReadableStreamDefaultController"),__name(SetUpReadableStreamDefaultController,"SetUpReadableStreamDefaultController");function SetUpReadableStreamDefaultControllerFromUnderlyingSource(stream,underlyingSource,highWaterMark,sizeAlgorithm){var controller=Object.create(ReadableStreamDefaultController.prototype),startAlgorithm=__name(function(){},"startAlgorithm"),pullAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"pullAlgorithm"),cancelAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"cancelAlgorithm");underlyingSource.start!==void 0&&(startAlgorithm=__name(function(){return underlyingSource.start(controller)},"startAlgorithm")),underlyingSource.pull!==void 0&&(pullAlgorithm=__name(function(){return underlyingSource.pull(controller)},"pullAlgorithm")),underlyingSource.cancel!==void 0&&(cancelAlgorithm=__name(function(reason){return underlyingSource.cancel(reason)},"cancelAlgorithm")),SetUpReadableStreamDefaultController(stream,controller,startAlgorithm,pullAlgorithm,cancelAlgorithm,highWaterMark,sizeAlgorithm)}__name2(SetUpReadableStreamDefaultControllerFromUnderlyingSource,"SetUpReadableStreamDefaultControllerFromUnderlyingSource"),__name(SetUpReadableStreamDefaultControllerFromUnderlyingSource,"SetUpReadableStreamDefaultControllerFromUnderlyingSource");function defaultControllerBrandCheckException$1(name){return new TypeError("ReadableStreamDefaultController.prototype."+name+" can only be used on a ReadableStreamDefaultController")}__name2(defaultControllerBrandCheckException$1,"defaultControllerBrandCheckException$1"),__name(defaultControllerBrandCheckException$1,"defaultControllerBrandCheckException$1");function ReadableStreamTee(stream,cloneForBranch2){return IsReadableByteStreamController(stream._readableStreamController)?ReadableByteStreamTee(stream):ReadableStreamDefaultTee(stream)}__name2(ReadableStreamTee,"ReadableStreamTee"),__name(ReadableStreamTee,"ReadableStreamTee");function ReadableStreamDefaultTee(stream,cloneForBranch2){var reader=AcquireReadableStreamDefaultReader(stream),reading=!1,readAgain=!1,canceled1=!1,canceled2=!1,reason1,reason2,branch1,branch2,resolveCancelPromise,cancelPromise=newPromise(function(resolve){resolveCancelPromise=resolve});function pullAlgorithm(){if(reading)return readAgain=!0,promiseResolvedWith(void 0);reading=!0;var readRequest={_chunkSteps:function(chunk){queueMicrotask(function(){readAgain=!1;var chunk1=chunk,chunk2=chunk;canceled1||ReadableStreamDefaultControllerEnqueue(branch1._readableStreamController,chunk1),canceled2||ReadableStreamDefaultControllerEnqueue(branch2._readableStreamController,chunk2),reading=!1,readAgain&&pullAlgorithm()})},_closeSteps:function(){reading=!1,canceled1||ReadableStreamDefaultControllerClose(branch1._readableStreamController),canceled2||ReadableStreamDefaultControllerClose(branch2._readableStreamController),(!canceled1||!canceled2)&&resolveCancelPromise(void 0)},_errorSteps:function(){reading=!1}};return ReadableStreamDefaultReaderRead(reader,readRequest),promiseResolvedWith(void 0)}__name2(pullAlgorithm,"pullAlgorithm"),__name(pullAlgorithm,"pullAlgorithm");function cancel1Algorithm(reason){if(canceled1=!0,reason1=reason,canceled2){var compositeReason=CreateArrayFromList([reason1,reason2]),cancelResult=ReadableStreamCancel(stream,compositeReason);resolveCancelPromise(cancelResult)}return cancelPromise}__name2(cancel1Algorithm,"cancel1Algorithm"),__name(cancel1Algorithm,"cancel1Algorithm");function cancel2Algorithm(reason){if(canceled2=!0,reason2=reason,canceled1){var compositeReason=CreateArrayFromList([reason1,reason2]),cancelResult=ReadableStreamCancel(stream,compositeReason);resolveCancelPromise(cancelResult)}return cancelPromise}__name2(cancel2Algorithm,"cancel2Algorithm"),__name(cancel2Algorithm,"cancel2Algorithm");function startAlgorithm(){}return __name2(startAlgorithm,"startAlgorithm"),__name(startAlgorithm,"startAlgorithm"),branch1=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel1Algorithm),branch2=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel2Algorithm),uponRejection(reader._closedPromise,function(r){ReadableStreamDefaultControllerError(branch1._readableStreamController,r),ReadableStreamDefaultControllerError(branch2._readableStreamController,r),(!canceled1||!canceled2)&&resolveCancelPromise(void 0)}),[branch1,branch2]}__name2(ReadableStreamDefaultTee,"ReadableStreamDefaultTee"),__name(ReadableStreamDefaultTee,"ReadableStreamDefaultTee");function ReadableByteStreamTee(stream){var reader=AcquireReadableStreamDefaultReader(stream),reading=!1,readAgainForBranch1=!1,readAgainForBranch2=!1,canceled1=!1,canceled2=!1,reason1,reason2,branch1,branch2,resolveCancelPromise,cancelPromise=newPromise(function(resolve){resolveCancelPromise=resolve});function forwardReaderError(thisReader){uponRejection(thisReader._closedPromise,function(r){thisReader===reader&&(ReadableByteStreamControllerError(branch1._readableStreamController,r),ReadableByteStreamControllerError(branch2._readableStreamController,r),(!canceled1||!canceled2)&&resolveCancelPromise(void 0))})}__name2(forwardReaderError,"forwardReaderError"),__name(forwardReaderError,"forwardReaderError");function pullWithDefaultReader(){IsReadableStreamBYOBReader(reader)&&(ReadableStreamReaderGenericRelease(reader),reader=AcquireReadableStreamDefaultReader(stream),forwardReaderError(reader));var readRequest={_chunkSteps:function(chunk){queueMicrotask(function(){readAgainForBranch1=!1,readAgainForBranch2=!1;var chunk1=chunk,chunk2=chunk;if(!canceled1&&!canceled2)try{chunk2=CloneAsUint8Array(chunk)}catch(cloneE){ReadableByteStreamControllerError(branch1._readableStreamController,cloneE),ReadableByteStreamControllerError(branch2._readableStreamController,cloneE),resolveCancelPromise(ReadableStreamCancel(stream,cloneE));return}canceled1||ReadableByteStreamControllerEnqueue(branch1._readableStreamController,chunk1),canceled2||ReadableByteStreamControllerEnqueue(branch2._readableStreamController,chunk2),reading=!1,readAgainForBranch1?pull1Algorithm():readAgainForBranch2&&pull2Algorithm()})},_closeSteps:function(){reading=!1,canceled1||ReadableByteStreamControllerClose(branch1._readableStreamController),canceled2||ReadableByteStreamControllerClose(branch2._readableStreamController),branch1._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(branch1._readableStreamController,0),branch2._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(branch2._readableStreamController,0),(!canceled1||!canceled2)&&resolveCancelPromise(void 0)},_errorSteps:function(){reading=!1}};ReadableStreamDefaultReaderRead(reader,readRequest)}__name2(pullWithDefaultReader,"pullWithDefaultReader"),__name(pullWithDefaultReader,"pullWithDefaultReader");function pullWithBYOBReader(view,forBranch2){IsReadableStreamDefaultReader(reader)&&(ReadableStreamReaderGenericRelease(reader),reader=AcquireReadableStreamBYOBReader(stream),forwardReaderError(reader));var byobBranch=forBranch2?branch2:branch1,otherBranch=forBranch2?branch1:branch2,readIntoRequest={_chunkSteps:function(chunk){queueMicrotask(function(){readAgainForBranch1=!1,readAgainForBranch2=!1;var byobCanceled=forBranch2?canceled2:canceled1,otherCanceled=forBranch2?canceled1:canceled2;if(otherCanceled)byobCanceled||ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController,chunk);else{var clonedChunk=void 0;try{clonedChunk=CloneAsUint8Array(chunk)}catch(cloneE){ReadableByteStreamControllerError(byobBranch._readableStreamController,cloneE),ReadableByteStreamControllerError(otherBranch._readableStreamController,cloneE),resolveCancelPromise(ReadableStreamCancel(stream,cloneE));return}byobCanceled||ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController,chunk),ReadableByteStreamControllerEnqueue(otherBranch._readableStreamController,clonedChunk)}reading=!1,readAgainForBranch1?pull1Algorithm():readAgainForBranch2&&pull2Algorithm()})},_closeSteps:function(chunk){reading=!1;var byobCanceled=forBranch2?canceled2:canceled1,otherCanceled=forBranch2?canceled1:canceled2;byobCanceled||ReadableByteStreamControllerClose(byobBranch._readableStreamController),otherCanceled||ReadableByteStreamControllerClose(otherBranch._readableStreamController),chunk!==void 0&&(byobCanceled||ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController,chunk),!otherCanceled&&otherBranch._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(otherBranch._readableStreamController,0)),(!byobCanceled||!otherCanceled)&&resolveCancelPromise(void 0)},_errorSteps:function(){reading=!1}};ReadableStreamBYOBReaderRead(reader,view,readIntoRequest)}__name2(pullWithBYOBReader,"pullWithBYOBReader"),__name(pullWithBYOBReader,"pullWithBYOBReader");function pull1Algorithm(){if(reading)return readAgainForBranch1=!0,promiseResolvedWith(void 0);reading=!0;var byobRequest=ReadableByteStreamControllerGetBYOBRequest(branch1._readableStreamController);return byobRequest===null?pullWithDefaultReader():pullWithBYOBReader(byobRequest._view,!1),promiseResolvedWith(void 0)}__name2(pull1Algorithm,"pull1Algorithm"),__name(pull1Algorithm,"pull1Algorithm");function pull2Algorithm(){if(reading)return readAgainForBranch2=!0,promiseResolvedWith(void 0);reading=!0;var byobRequest=ReadableByteStreamControllerGetBYOBRequest(branch2._readableStreamController);return byobRequest===null?pullWithDefaultReader():pullWithBYOBReader(byobRequest._view,!0),promiseResolvedWith(void 0)}__name2(pull2Algorithm,"pull2Algorithm"),__name(pull2Algorithm,"pull2Algorithm");function cancel1Algorithm(reason){if(canceled1=!0,reason1=reason,canceled2){var compositeReason=CreateArrayFromList([reason1,reason2]),cancelResult=ReadableStreamCancel(stream,compositeReason);resolveCancelPromise(cancelResult)}return cancelPromise}__name2(cancel1Algorithm,"cancel1Algorithm"),__name(cancel1Algorithm,"cancel1Algorithm");function cancel2Algorithm(reason){if(canceled2=!0,reason2=reason,canceled1){var compositeReason=CreateArrayFromList([reason1,reason2]),cancelResult=ReadableStreamCancel(stream,compositeReason);resolveCancelPromise(cancelResult)}return cancelPromise}__name2(cancel2Algorithm,"cancel2Algorithm"),__name(cancel2Algorithm,"cancel2Algorithm");function startAlgorithm(){}return __name2(startAlgorithm,"startAlgorithm"),__name(startAlgorithm,"startAlgorithm"),branch1=CreateReadableByteStream(startAlgorithm,pull1Algorithm,cancel1Algorithm),branch2=CreateReadableByteStream(startAlgorithm,pull2Algorithm,cancel2Algorithm),forwardReaderError(reader),[branch1,branch2]}__name2(ReadableByteStreamTee,"ReadableByteStreamTee"),__name(ReadableByteStreamTee,"ReadableByteStreamTee");function convertUnderlyingDefaultOrByteSource(source,context){assertDictionary(source,context);var original=source,autoAllocateChunkSize=original?.autoAllocateChunkSize,cancel=original?.cancel,pull=original?.pull,start=original?.start,type=original?.type;return{autoAllocateChunkSize:autoAllocateChunkSize===void 0?void 0:convertUnsignedLongLongWithEnforceRange(autoAllocateChunkSize,context+" has member 'autoAllocateChunkSize' that"),cancel:cancel===void 0?void 0:convertUnderlyingSourceCancelCallback(cancel,original,context+" has member 'cancel' that"),pull:pull===void 0?void 0:convertUnderlyingSourcePullCallback(pull,original,context+" has member 'pull' that"),start:start===void 0?void 0:convertUnderlyingSourceStartCallback(start,original,context+" has member 'start' that"),type:type===void 0?void 0:convertReadableStreamType(type,context+" has member 'type' that")}}__name2(convertUnderlyingDefaultOrByteSource,"convertUnderlyingDefaultOrByteSource"),__name(convertUnderlyingDefaultOrByteSource,"convertUnderlyingDefaultOrByteSource");function convertUnderlyingSourceCancelCallback(fn,original,context){return assertFunction(fn,context),function(reason){return promiseCall(fn,original,[reason])}}__name2(convertUnderlyingSourceCancelCallback,"convertUnderlyingSourceCancelCallback"),__name(convertUnderlyingSourceCancelCallback,"convertUnderlyingSourceCancelCallback");function convertUnderlyingSourcePullCallback(fn,original,context){return assertFunction(fn,context),function(controller){return promiseCall(fn,original,[controller])}}__name2(convertUnderlyingSourcePullCallback,"convertUnderlyingSourcePullCallback"),__name(convertUnderlyingSourcePullCallback,"convertUnderlyingSourcePullCallback");function convertUnderlyingSourceStartCallback(fn,original,context){return assertFunction(fn,context),function(controller){return reflectCall(fn,original,[controller])}}__name2(convertUnderlyingSourceStartCallback,"convertUnderlyingSourceStartCallback"),__name(convertUnderlyingSourceStartCallback,"convertUnderlyingSourceStartCallback");function convertReadableStreamType(type,context){if(type=""+type,type!=="bytes")throw new TypeError(context+" '"+type+"' is not a valid enumeration value for ReadableStreamType");return type}__name2(convertReadableStreamType,"convertReadableStreamType"),__name(convertReadableStreamType,"convertReadableStreamType");function convertReaderOptions(options,context){assertDictionary(options,context);var mode=options?.mode;return{mode:mode===void 0?void 0:convertReadableStreamReaderMode(mode,context+" has member 'mode' that")}}__name2(convertReaderOptions,"convertReaderOptions"),__name(convertReaderOptions,"convertReaderOptions");function convertReadableStreamReaderMode(mode,context){if(mode=""+mode,mode!=="byob")throw new TypeError(context+" '"+mode+"' is not a valid enumeration value for ReadableStreamReaderMode");return mode}__name2(convertReadableStreamReaderMode,"convertReadableStreamReaderMode"),__name(convertReadableStreamReaderMode,"convertReadableStreamReaderMode");function convertIteratorOptions(options,context){assertDictionary(options,context);var preventCancel=options?.preventCancel;return{preventCancel:!!preventCancel}}__name2(convertIteratorOptions,"convertIteratorOptions"),__name(convertIteratorOptions,"convertIteratorOptions");function convertPipeOptions(options,context){assertDictionary(options,context);var preventAbort=options?.preventAbort,preventCancel=options?.preventCancel,preventClose=options?.preventClose,signal=options?.signal;return signal!==void 0&&assertAbortSignal(signal,context+" has member 'signal' that"),{preventAbort:!!preventAbort,preventCancel:!!preventCancel,preventClose:!!preventClose,signal}}__name2(convertPipeOptions,"convertPipeOptions"),__name(convertPipeOptions,"convertPipeOptions");function assertAbortSignal(signal,context){if(!isAbortSignal(signal))throw new TypeError(context+" is not an AbortSignal.")}__name2(assertAbortSignal,"assertAbortSignal"),__name(assertAbortSignal,"assertAbortSignal");function convertReadableWritablePair(pair,context){assertDictionary(pair,context);var readable=pair?.readable;assertRequiredField(readable,"readable","ReadableWritablePair"),assertReadableStream(readable,context+" has member 'readable' that");var writable=pair?.writable;return assertRequiredField(writable,"writable","ReadableWritablePair"),assertWritableStream(writable,context+" has member 'writable' that"),{readable,writable}}__name2(convertReadableWritablePair,"convertReadableWritablePair"),__name(convertReadableWritablePair,"convertReadableWritablePair");var ReadableStream2=function(){function ReadableStream3(rawUnderlyingSource,rawStrategy){rawUnderlyingSource===void 0&&(rawUnderlyingSource={}),rawStrategy===void 0&&(rawStrategy={}),rawUnderlyingSource===void 0?rawUnderlyingSource=null:assertObject(rawUnderlyingSource,"First parameter");var strategy=convertQueuingStrategy(rawStrategy,"Second parameter"),underlyingSource=convertUnderlyingDefaultOrByteSource(rawUnderlyingSource,"First parameter");if(InitializeReadableStream(this),underlyingSource.type==="bytes"){if(strategy.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var highWaterMark=ExtractHighWaterMark(strategy,0);SetUpReadableByteStreamControllerFromUnderlyingSource(this,underlyingSource,highWaterMark)}else{var sizeAlgorithm=ExtractSizeAlgorithm(strategy),highWaterMark=ExtractHighWaterMark(strategy,1);SetUpReadableStreamDefaultControllerFromUnderlyingSource(this,underlyingSource,highWaterMark,sizeAlgorithm)}}return __name2(ReadableStream3,"ReadableStream3"),__name(ReadableStream3,"ReadableStream"),Object.defineProperty(ReadableStream3.prototype,"locked",{get:function(){if(!IsReadableStream(this))throw streamBrandCheckException$1("locked");return IsReadableStreamLocked(this)},enumerable:!1,configurable:!0}),ReadableStream3.prototype.cancel=function(reason){return reason===void 0&&(reason=void 0),IsReadableStream(this)?IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot cancel a stream that already has a reader")):ReadableStreamCancel(this,reason):promiseRejectedWith(streamBrandCheckException$1("cancel"))},ReadableStream3.prototype.getReader=function(rawOptions){if(rawOptions===void 0&&(rawOptions=void 0),!IsReadableStream(this))throw streamBrandCheckException$1("getReader");var options=convertReaderOptions(rawOptions,"First parameter");return options.mode===void 0?AcquireReadableStreamDefaultReader(this):AcquireReadableStreamBYOBReader(this)},ReadableStream3.prototype.pipeThrough=function(rawTransform,rawOptions){if(rawOptions===void 0&&(rawOptions={}),!IsReadableStream(this))throw streamBrandCheckException$1("pipeThrough");assertRequiredArgument(rawTransform,1,"pipeThrough");var transform=convertReadableWritablePair(rawTransform,"First parameter"),options=convertPipeOptions(rawOptions,"Second parameter");if(IsReadableStreamLocked(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(IsWritableStreamLocked(transform.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var promise=ReadableStreamPipeTo(this,transform.writable,options.preventClose,options.preventAbort,options.preventCancel,options.signal);return setPromiseIsHandledToTrue(promise),transform.readable},ReadableStream3.prototype.pipeTo=function(destination,rawOptions){if(rawOptions===void 0&&(rawOptions={}),!IsReadableStream(this))return promiseRejectedWith(streamBrandCheckException$1("pipeTo"));if(destination===void 0)return promiseRejectedWith("Parameter 1 is required in 'pipeTo'.");if(!IsWritableStream(destination))return promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var options;try{options=convertPipeOptions(rawOptions,"Second parameter")}catch(e){return promiseRejectedWith(e)}return IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):IsWritableStreamLocked(destination)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ReadableStreamPipeTo(this,destination,options.preventClose,options.preventAbort,options.preventCancel,options.signal)},ReadableStream3.prototype.tee=function(){if(!IsReadableStream(this))throw streamBrandCheckException$1("tee");var branches=ReadableStreamTee(this);return CreateArrayFromList(branches)},ReadableStream3.prototype.values=function(rawOptions){if(rawOptions===void 0&&(rawOptions=void 0),!IsReadableStream(this))throw streamBrandCheckException$1("values");var options=convertIteratorOptions(rawOptions,"First parameter");return AcquireReadableStreamAsyncIterator(this,options.preventCancel)},ReadableStream3}();Object.defineProperties(ReadableStream2.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ReadableStream2.prototype,SymbolPolyfill.toStringTag,{value:"ReadableStream",configurable:!0}),typeof SymbolPolyfill.asyncIterator=="symbol"&&Object.defineProperty(ReadableStream2.prototype,SymbolPolyfill.asyncIterator,{value:ReadableStream2.prototype.values,writable:!0,configurable:!0});function CreateReadableStream(startAlgorithm,pullAlgorithm,cancelAlgorithm,highWaterMark,sizeAlgorithm){highWaterMark===void 0&&(highWaterMark=1),sizeAlgorithm===void 0&&(sizeAlgorithm=__name(function(){return 1},"sizeAlgorithm"));var stream=Object.create(ReadableStream2.prototype);InitializeReadableStream(stream);var controller=Object.create(ReadableStreamDefaultController.prototype);return SetUpReadableStreamDefaultController(stream,controller,startAlgorithm,pullAlgorithm,cancelAlgorithm,highWaterMark,sizeAlgorithm),stream}__name2(CreateReadableStream,"CreateReadableStream"),__name(CreateReadableStream,"CreateReadableStream");function CreateReadableByteStream(startAlgorithm,pullAlgorithm,cancelAlgorithm){var stream=Object.create(ReadableStream2.prototype);InitializeReadableStream(stream);var controller=Object.create(ReadableByteStreamController.prototype);return SetUpReadableByteStreamController(stream,controller,startAlgorithm,pullAlgorithm,cancelAlgorithm,0,void 0),stream}__name2(CreateReadableByteStream,"CreateReadableByteStream"),__name(CreateReadableByteStream,"CreateReadableByteStream");function InitializeReadableStream(stream){stream._state="readable",stream._reader=void 0,stream._storedError=void 0,stream._disturbed=!1}__name2(InitializeReadableStream,"InitializeReadableStream"),__name(InitializeReadableStream,"InitializeReadableStream");function IsReadableStream(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_readableStreamController")?!1:x instanceof ReadableStream2}__name2(IsReadableStream,"IsReadableStream"),__name(IsReadableStream,"IsReadableStream");function IsReadableStreamLocked(stream){return stream._reader!==void 0}__name2(IsReadableStreamLocked,"IsReadableStreamLocked"),__name(IsReadableStreamLocked,"IsReadableStreamLocked");function ReadableStreamCancel(stream,reason){if(stream._disturbed=!0,stream._state==="closed")return promiseResolvedWith(void 0);if(stream._state==="errored")return promiseRejectedWith(stream._storedError);ReadableStreamClose(stream);var reader=stream._reader;reader!==void 0&&IsReadableStreamBYOBReader(reader)&&(reader._readIntoRequests.forEach(function(readIntoRequest){readIntoRequest._closeSteps(void 0)}),reader._readIntoRequests=new SimpleQueue);var sourceCancelPromise=stream._readableStreamController[CancelSteps](reason);return transformPromiseWith(sourceCancelPromise,noop)}__name2(ReadableStreamCancel,"ReadableStreamCancel"),__name(ReadableStreamCancel,"ReadableStreamCancel");function ReadableStreamClose(stream){stream._state="closed";var reader=stream._reader;reader!==void 0&&(defaultReaderClosedPromiseResolve(reader),IsReadableStreamDefaultReader(reader)&&(reader._readRequests.forEach(function(readRequest){readRequest._closeSteps()}),reader._readRequests=new SimpleQueue))}__name2(ReadableStreamClose,"ReadableStreamClose"),__name(ReadableStreamClose,"ReadableStreamClose");function ReadableStreamError(stream,e){stream._state="errored",stream._storedError=e;var reader=stream._reader;reader!==void 0&&(defaultReaderClosedPromiseReject(reader,e),IsReadableStreamDefaultReader(reader)?(reader._readRequests.forEach(function(readRequest){readRequest._errorSteps(e)}),reader._readRequests=new SimpleQueue):(reader._readIntoRequests.forEach(function(readIntoRequest){readIntoRequest._errorSteps(e)}),reader._readIntoRequests=new SimpleQueue))}__name2(ReadableStreamError,"ReadableStreamError"),__name(ReadableStreamError,"ReadableStreamError");function streamBrandCheckException$1(name){return new TypeError("ReadableStream.prototype."+name+" can only be used on a ReadableStream")}__name2(streamBrandCheckException$1,"streamBrandCheckException$1"),__name(streamBrandCheckException$1,"streamBrandCheckException$1");function convertQueuingStrategyInit(init,context){assertDictionary(init,context);var highWaterMark=init?.highWaterMark;return assertRequiredField(highWaterMark,"highWaterMark","QueuingStrategyInit"),{highWaterMark:convertUnrestrictedDouble(highWaterMark)}}__name2(convertQueuingStrategyInit,"convertQueuingStrategyInit"),__name(convertQueuingStrategyInit,"convertQueuingStrategyInit");var byteLengthSizeFunction=__name(function(chunk){return chunk.byteLength},"byteLengthSizeFunction");try{Object.defineProperty(byteLengthSizeFunction,"name",{value:"size",configurable:!0})}catch{}var ByteLengthQueuingStrategy=function(){function ByteLengthQueuingStrategy2(options){assertRequiredArgument(options,1,"ByteLengthQueuingStrategy"),options=convertQueuingStrategyInit(options,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=options.highWaterMark}return __name2(ByteLengthQueuingStrategy2,"ByteLengthQueuingStrategy2"),__name(ByteLengthQueuingStrategy2,"ByteLengthQueuingStrategy"),Object.defineProperty(ByteLengthQueuingStrategy2.prototype,"highWaterMark",{get:function(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(ByteLengthQueuingStrategy2.prototype,"size",{get:function(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("size");return byteLengthSizeFunction},enumerable:!1,configurable:!0}),ByteLengthQueuingStrategy2}();Object.defineProperties(ByteLengthQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ByteLengthQueuingStrategy.prototype,SymbolPolyfill.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function byteLengthBrandCheckException(name){return new TypeError("ByteLengthQueuingStrategy.prototype."+name+" can only be used on a ByteLengthQueuingStrategy")}__name2(byteLengthBrandCheckException,"byteLengthBrandCheckException"),__name(byteLengthBrandCheckException,"byteLengthBrandCheckException");function IsByteLengthQueuingStrategy(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_byteLengthQueuingStrategyHighWaterMark")?!1:x instanceof ByteLengthQueuingStrategy}__name2(IsByteLengthQueuingStrategy,"IsByteLengthQueuingStrategy"),__name(IsByteLengthQueuingStrategy,"IsByteLengthQueuingStrategy");var countSizeFunction=__name(function(){return 1},"countSizeFunction");try{Object.defineProperty(countSizeFunction,"name",{value:"size",configurable:!0})}catch{}var CountQueuingStrategy=function(){function CountQueuingStrategy2(options){assertRequiredArgument(options,1,"CountQueuingStrategy"),options=convertQueuingStrategyInit(options,"First parameter"),this._countQueuingStrategyHighWaterMark=options.highWaterMark}return __name2(CountQueuingStrategy2,"CountQueuingStrategy2"),__name(CountQueuingStrategy2,"CountQueuingStrategy"),Object.defineProperty(CountQueuingStrategy2.prototype,"highWaterMark",{get:function(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(CountQueuingStrategy2.prototype,"size",{get:function(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("size");return countSizeFunction},enumerable:!1,configurable:!0}),CountQueuingStrategy2}();Object.defineProperties(CountQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(CountQueuingStrategy.prototype,SymbolPolyfill.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function countBrandCheckException(name){return new TypeError("CountQueuingStrategy.prototype."+name+" can only be used on a CountQueuingStrategy")}__name2(countBrandCheckException,"countBrandCheckException"),__name(countBrandCheckException,"countBrandCheckException");function IsCountQueuingStrategy(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_countQueuingStrategyHighWaterMark")?!1:x instanceof CountQueuingStrategy}__name2(IsCountQueuingStrategy,"IsCountQueuingStrategy"),__name(IsCountQueuingStrategy,"IsCountQueuingStrategy");function convertTransformer(original,context){assertDictionary(original,context);var flush=original?.flush,readableType=original?.readableType,start=original?.start,transform=original?.transform,writableType=original?.writableType;return{flush:flush===void 0?void 0:convertTransformerFlushCallback(flush,original,context+" has member 'flush' that"),readableType,start:start===void 0?void 0:convertTransformerStartCallback(start,original,context+" has member 'start' that"),transform:transform===void 0?void 0:convertTransformerTransformCallback(transform,original,context+" has member 'transform' that"),writableType}}__name2(convertTransformer,"convertTransformer"),__name(convertTransformer,"convertTransformer");function convertTransformerFlushCallback(fn,original,context){return assertFunction(fn,context),function(controller){return promiseCall(fn,original,[controller])}}__name2(convertTransformerFlushCallback,"convertTransformerFlushCallback"),__name(convertTransformerFlushCallback,"convertTransformerFlushCallback");function convertTransformerStartCallback(fn,original,context){return assertFunction(fn,context),function(controller){return reflectCall(fn,original,[controller])}}__name2(convertTransformerStartCallback,"convertTransformerStartCallback"),__name(convertTransformerStartCallback,"convertTransformerStartCallback");function convertTransformerTransformCallback(fn,original,context){return assertFunction(fn,context),function(chunk,controller){return promiseCall(fn,original,[chunk,controller])}}__name2(convertTransformerTransformCallback,"convertTransformerTransformCallback"),__name(convertTransformerTransformCallback,"convertTransformerTransformCallback");var TransformStream=function(){function TransformStream2(rawTransformer,rawWritableStrategy,rawReadableStrategy){rawTransformer===void 0&&(rawTransformer={}),rawWritableStrategy===void 0&&(rawWritableStrategy={}),rawReadableStrategy===void 0&&(rawReadableStrategy={}),rawTransformer===void 0&&(rawTransformer=null);var writableStrategy=convertQueuingStrategy(rawWritableStrategy,"Second parameter"),readableStrategy=convertQueuingStrategy(rawReadableStrategy,"Third parameter"),transformer=convertTransformer(rawTransformer,"First parameter");if(transformer.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(transformer.writableType!==void 0)throw new RangeError("Invalid writableType specified");var readableHighWaterMark=ExtractHighWaterMark(readableStrategy,0),readableSizeAlgorithm=ExtractSizeAlgorithm(readableStrategy),writableHighWaterMark=ExtractHighWaterMark(writableStrategy,1),writableSizeAlgorithm=ExtractSizeAlgorithm(writableStrategy),startPromise_resolve,startPromise=newPromise(function(resolve){startPromise_resolve=resolve});InitializeTransformStream(this,startPromise,writableHighWaterMark,writableSizeAlgorithm,readableHighWaterMark,readableSizeAlgorithm),SetUpTransformStreamDefaultControllerFromTransformer(this,transformer),transformer.start!==void 0?startPromise_resolve(transformer.start(this._transformStreamController)):startPromise_resolve(void 0)}return __name2(TransformStream2,"TransformStream2"),__name(TransformStream2,"TransformStream"),Object.defineProperty(TransformStream2.prototype,"readable",{get:function(){if(!IsTransformStream(this))throw streamBrandCheckException("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(TransformStream2.prototype,"writable",{get:function(){if(!IsTransformStream(this))throw streamBrandCheckException("writable");return this._writable},enumerable:!1,configurable:!0}),TransformStream2}();Object.defineProperties(TransformStream.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(TransformStream.prototype,SymbolPolyfill.toStringTag,{value:"TransformStream",configurable:!0});function InitializeTransformStream(stream,startPromise,writableHighWaterMark,writableSizeAlgorithm,readableHighWaterMark,readableSizeAlgorithm){function startAlgorithm(){return startPromise}__name2(startAlgorithm,"startAlgorithm"),__name(startAlgorithm,"startAlgorithm");function writeAlgorithm(chunk){return TransformStreamDefaultSinkWriteAlgorithm(stream,chunk)}__name2(writeAlgorithm,"writeAlgorithm"),__name(writeAlgorithm,"writeAlgorithm");function abortAlgorithm(reason){return TransformStreamDefaultSinkAbortAlgorithm(stream,reason)}__name2(abortAlgorithm,"abortAlgorithm"),__name(abortAlgorithm,"abortAlgorithm");function closeAlgorithm(){return TransformStreamDefaultSinkCloseAlgorithm(stream)}__name2(closeAlgorithm,"closeAlgorithm"),__name(closeAlgorithm,"closeAlgorithm"),stream._writable=CreateWritableStream(startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,writableHighWaterMark,writableSizeAlgorithm);function pullAlgorithm(){return TransformStreamDefaultSourcePullAlgorithm(stream)}__name2(pullAlgorithm,"pullAlgorithm"),__name(pullAlgorithm,"pullAlgorithm");function cancelAlgorithm(reason){return TransformStreamErrorWritableAndUnblockWrite(stream,reason),promiseResolvedWith(void 0)}__name2(cancelAlgorithm,"cancelAlgorithm"),__name(cancelAlgorithm,"cancelAlgorithm"),stream._readable=CreateReadableStream(startAlgorithm,pullAlgorithm,cancelAlgorithm,readableHighWaterMark,readableSizeAlgorithm),stream._backpressure=void 0,stream._backpressureChangePromise=void 0,stream._backpressureChangePromise_resolve=void 0,TransformStreamSetBackpressure(stream,!0),stream._transformStreamController=void 0}__name2(InitializeTransformStream,"InitializeTransformStream"),__name(InitializeTransformStream,"InitializeTransformStream");function IsTransformStream(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_transformStreamController")?!1:x instanceof TransformStream}__name2(IsTransformStream,"IsTransformStream"),__name(IsTransformStream,"IsTransformStream");function TransformStreamError(stream,e){ReadableStreamDefaultControllerError(stream._readable._readableStreamController,e),TransformStreamErrorWritableAndUnblockWrite(stream,e)}__name2(TransformStreamError,"TransformStreamError"),__name(TransformStreamError,"TransformStreamError");function TransformStreamErrorWritableAndUnblockWrite(stream,e){TransformStreamDefaultControllerClearAlgorithms(stream._transformStreamController),WritableStreamDefaultControllerErrorIfNeeded(stream._writable._writableStreamController,e),stream._backpressure&&TransformStreamSetBackpressure(stream,!1)}__name2(TransformStreamErrorWritableAndUnblockWrite,"TransformStreamErrorWritableAndUnblockWrite"),__name(TransformStreamErrorWritableAndUnblockWrite,"TransformStreamErrorWritableAndUnblockWrite");function TransformStreamSetBackpressure(stream,backpressure){stream._backpressureChangePromise!==void 0&&stream._backpressureChangePromise_resolve(),stream._backpressureChangePromise=newPromise(function(resolve){stream._backpressureChangePromise_resolve=resolve}),stream._backpressure=backpressure}__name2(TransformStreamSetBackpressure,"TransformStreamSetBackpressure"),__name(TransformStreamSetBackpressure,"TransformStreamSetBackpressure");var TransformStreamDefaultController=function(){function TransformStreamDefaultController2(){throw new TypeError("Illegal constructor")}return __name2(TransformStreamDefaultController2,"TransformStreamDefaultController2"),__name(TransformStreamDefaultController2,"TransformStreamDefaultController"),Object.defineProperty(TransformStreamDefaultController2.prototype,"desiredSize",{get:function(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("desiredSize");var readableController=this._controlledTransformStream._readable._readableStreamController;return ReadableStreamDefaultControllerGetDesiredSize(readableController)},enumerable:!1,configurable:!0}),TransformStreamDefaultController2.prototype.enqueue=function(chunk){if(chunk===void 0&&(chunk=void 0),!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("enqueue");TransformStreamDefaultControllerEnqueue(this,chunk)},TransformStreamDefaultController2.prototype.error=function(reason){if(reason===void 0&&(reason=void 0),!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("error");TransformStreamDefaultControllerError(this,reason)},TransformStreamDefaultController2.prototype.terminate=function(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("terminate");TransformStreamDefaultControllerTerminate(this)},TransformStreamDefaultController2}();Object.defineProperties(TransformStreamDefaultController.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(TransformStreamDefaultController.prototype,SymbolPolyfill.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function IsTransformStreamDefaultController(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_controlledTransformStream")?!1:x instanceof TransformStreamDefaultController}__name2(IsTransformStreamDefaultController,"IsTransformStreamDefaultController"),__name(IsTransformStreamDefaultController,"IsTransformStreamDefaultController");function SetUpTransformStreamDefaultController(stream,controller,transformAlgorithm,flushAlgorithm){controller._controlledTransformStream=stream,stream._transformStreamController=controller,controller._transformAlgorithm=transformAlgorithm,controller._flushAlgorithm=flushAlgorithm}__name2(SetUpTransformStreamDefaultController,"SetUpTransformStreamDefaultController"),__name(SetUpTransformStreamDefaultController,"SetUpTransformStreamDefaultController");function SetUpTransformStreamDefaultControllerFromTransformer(stream,transformer){var controller=Object.create(TransformStreamDefaultController.prototype),transformAlgorithm=__name(function(chunk){try{return TransformStreamDefaultControllerEnqueue(controller,chunk),promiseResolvedWith(void 0)}catch(transformResultE){return promiseRejectedWith(transformResultE)}},"transformAlgorithm"),flushAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"flushAlgorithm");transformer.transform!==void 0&&(transformAlgorithm=__name(function(chunk){return transformer.transform(chunk,controller)},"transformAlgorithm")),transformer.flush!==void 0&&(flushAlgorithm=__name(function(){return transformer.flush(controller)},"flushAlgorithm")),SetUpTransformStreamDefaultController(stream,controller,transformAlgorithm,flushAlgorithm)}__name2(SetUpTransformStreamDefaultControllerFromTransformer,"SetUpTransformStreamDefaultControllerFromTransformer"),__name(SetUpTransformStreamDefaultControllerFromTransformer,"SetUpTransformStreamDefaultControllerFromTransformer");function TransformStreamDefaultControllerClearAlgorithms(controller){controller._transformAlgorithm=void 0,controller._flushAlgorithm=void 0}__name2(TransformStreamDefaultControllerClearAlgorithms,"TransformStreamDefaultControllerClearAlgorithms"),__name(TransformStreamDefaultControllerClearAlgorithms,"TransformStreamDefaultControllerClearAlgorithms");function TransformStreamDefaultControllerEnqueue(controller,chunk){var stream=controller._controlledTransformStream,readableController=stream._readable._readableStreamController;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(readableController))throw new TypeError("Readable side is not in a state that permits enqueue");try{ReadableStreamDefaultControllerEnqueue(readableController,chunk)}catch(e){throw TransformStreamErrorWritableAndUnblockWrite(stream,e),stream._readable._storedError}var backpressure=ReadableStreamDefaultControllerHasBackpressure(readableController);backpressure!==stream._backpressure&&TransformStreamSetBackpressure(stream,!0)}__name2(TransformStreamDefaultControllerEnqueue,"TransformStreamDefaultControllerEnqueue"),__name(TransformStreamDefaultControllerEnqueue,"TransformStreamDefaultControllerEnqueue");function TransformStreamDefaultControllerError(controller,e){TransformStreamError(controller._controlledTransformStream,e)}__name2(TransformStreamDefaultControllerError,"TransformStreamDefaultControllerError"),__name(TransformStreamDefaultControllerError,"TransformStreamDefaultControllerError");function TransformStreamDefaultControllerPerformTransform(controller,chunk){var transformPromise=controller._transformAlgorithm(chunk);return transformPromiseWith(transformPromise,void 0,function(r){throw TransformStreamError(controller._controlledTransformStream,r),r})}__name2(TransformStreamDefaultControllerPerformTransform,"TransformStreamDefaultControllerPerformTransform"),__name(TransformStreamDefaultControllerPerformTransform,"TransformStreamDefaultControllerPerformTransform");function TransformStreamDefaultControllerTerminate(controller){var stream=controller._controlledTransformStream,readableController=stream._readable._readableStreamController;ReadableStreamDefaultControllerClose(readableController);var error=new TypeError("TransformStream terminated");TransformStreamErrorWritableAndUnblockWrite(stream,error)}__name2(TransformStreamDefaultControllerTerminate,"TransformStreamDefaultControllerTerminate"),__name(TransformStreamDefaultControllerTerminate,"TransformStreamDefaultControllerTerminate");function TransformStreamDefaultSinkWriteAlgorithm(stream,chunk){var controller=stream._transformStreamController;if(stream._backpressure){var backpressureChangePromise=stream._backpressureChangePromise;return transformPromiseWith(backpressureChangePromise,function(){var writable=stream._writable,state=writable._state;if(state==="erroring")throw writable._storedError;return TransformStreamDefaultControllerPerformTransform(controller,chunk)})}return TransformStreamDefaultControllerPerformTransform(controller,chunk)}__name2(TransformStreamDefaultSinkWriteAlgorithm,"TransformStreamDefaultSinkWriteAlgorithm"),__name(TransformStreamDefaultSinkWriteAlgorithm,"TransformStreamDefaultSinkWriteAlgorithm");function TransformStreamDefaultSinkAbortAlgorithm(stream,reason){return TransformStreamError(stream,reason),promiseResolvedWith(void 0)}__name2(TransformStreamDefaultSinkAbortAlgorithm,"TransformStreamDefaultSinkAbortAlgorithm"),__name(TransformStreamDefaultSinkAbortAlgorithm,"TransformStreamDefaultSinkAbortAlgorithm");function TransformStreamDefaultSinkCloseAlgorithm(stream){var readable=stream._readable,controller=stream._transformStreamController,flushPromise=controller._flushAlgorithm();return TransformStreamDefaultControllerClearAlgorithms(controller),transformPromiseWith(flushPromise,function(){if(readable._state==="errored")throw readable._storedError;ReadableStreamDefaultControllerClose(readable._readableStreamController)},function(r){throw TransformStreamError(stream,r),readable._storedError})}__name2(TransformStreamDefaultSinkCloseAlgorithm,"TransformStreamDefaultSinkCloseAlgorithm"),__name(TransformStreamDefaultSinkCloseAlgorithm,"TransformStreamDefaultSinkCloseAlgorithm");function TransformStreamDefaultSourcePullAlgorithm(stream){return TransformStreamSetBackpressure(stream,!1),stream._backpressureChangePromise}__name2(TransformStreamDefaultSourcePullAlgorithm,"TransformStreamDefaultSourcePullAlgorithm"),__name(TransformStreamDefaultSourcePullAlgorithm,"TransformStreamDefaultSourcePullAlgorithm");function defaultControllerBrandCheckException(name){return new TypeError("TransformStreamDefaultController.prototype."+name+" can only be used on a TransformStreamDefaultController")}__name2(defaultControllerBrandCheckException,"defaultControllerBrandCheckException"),__name(defaultControllerBrandCheckException,"defaultControllerBrandCheckException");function streamBrandCheckException(name){return new TypeError("TransformStream.prototype."+name+" can only be used on a TransformStream")}__name2(streamBrandCheckException,"streamBrandCheckException"),__name(streamBrandCheckException,"streamBrandCheckException"),exports3.ByteLengthQueuingStrategy=ByteLengthQueuingStrategy,exports3.CountQueuingStrategy=CountQueuingStrategy,exports3.ReadableByteStreamController=ReadableByteStreamController,exports3.ReadableStream=ReadableStream2,exports3.ReadableStreamBYOBReader=ReadableStreamBYOBReader,exports3.ReadableStreamBYOBRequest=ReadableStreamBYOBRequest,exports3.ReadableStreamDefaultController=ReadableStreamDefaultController,exports3.ReadableStreamDefaultReader=ReadableStreamDefaultReader,exports3.TransformStream=TransformStream,exports3.TransformStreamDefaultController=TransformStreamDefaultController,exports3.WritableStream=WritableStream,exports3.WritableStreamDefaultController=WritableStreamDefaultController,exports3.WritableStreamDefaultWriter=WritableStreamDefaultWriter,Object.defineProperty(exports3,"__esModule",{value:!0})})}(ponyfill,ponyfill.exports)),ponyfill.exports}__name2(requirePonyfill,"requirePonyfill"),__name(requirePonyfill,"requirePonyfill"),function(module,exports){__name(__name2(function(root,factory){module.exports=factory()},"webpackUniversalModuleDefinition"),"webpackUniversalModuleDefinition")(globalThis,()=>(()=>{var __webpack_modules__=[,(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.VerbosityLevel=exports2.Util=exports2.UnknownErrorException=exports2.UnexpectedResponseException=exports2.UNSUPPORTED_FEATURES=exports2.TextRenderingMode=exports2.StreamType=exports2.RenderingIntentFlag=exports2.PermissionFlag=exports2.PasswordResponses=exports2.PasswordException=exports2.PageActionEventType=exports2.OPS=exports2.MissingPDFException=exports2.LINE_FACTOR=exports2.LINE_DESCENT_FACTOR=exports2.InvalidPDFException=exports2.ImageKind=exports2.IDENTITY_MATRIX=exports2.FormatError=exports2.FontType=exports2.FeatureTest=exports2.FONT_IDENTITY_MATRIX=exports2.DocumentActionEventType=exports2.CMapCompressionType=exports2.BaseException=exports2.AnnotationType=exports2.AnnotationStateModelType=exports2.AnnotationReviewState=exports2.AnnotationReplyType=exports2.AnnotationMode=exports2.AnnotationMarkedState=exports2.AnnotationFlag=exports2.AnnotationFieldFlag=exports2.AnnotationEditorType=exports2.AnnotationEditorPrefix=exports2.AnnotationEditorParamsType=exports2.AnnotationBorderStyleType=exports2.AnnotationActionEventType=exports2.AbortException=void 0,exports2.arrayByteLength=arrayByteLength,exports2.arraysToBytes=arraysToBytes,exports2.assert=assert,exports2.bytesToString=bytesToString,exports2.createPromiseCapability=createPromiseCapability,exports2.createValidAbsoluteUrl=createValidAbsoluteUrl,exports2.escapeString=escapeString,exports2.getModificationDate=getModificationDate,exports2.getVerbosityLevel=getVerbosityLevel,exports2.info=info,exports2.isArrayBuffer=isArrayBuffer,exports2.isArrayEqual=isArrayEqual,exports2.isAscii=isAscii,exports2.objectFromMap=objectFromMap,exports2.objectSize=objectSize,exports2.setVerbosityLevel=setVerbosityLevel,exports2.shadow=shadow,exports2.string32=string32,exports2.stringToBytes=stringToBytes,exports2.stringToPDFString=stringToPDFString,exports2.stringToUTF16BEString=stringToUTF16BEString,exports2.stringToUTF8String=stringToUTF8String,exports2.unreachable=unreachable,exports2.utf8StringToString=utf8StringToString,exports2.warn=warn,__w_pdfjs_require__2(2);const IDENTITY_MATRIX=[1,0,0,1,0,0];exports2.IDENTITY_MATRIX=IDENTITY_MATRIX;const FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];exports2.FONT_IDENTITY_MATRIX=FONT_IDENTITY_MATRIX;const LINE_FACTOR=1.35;exports2.LINE_FACTOR=LINE_FACTOR;const LINE_DESCENT_FACTOR=.35;exports2.LINE_DESCENT_FACTOR=LINE_DESCENT_FACTOR;const RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};exports2.RenderingIntentFlag=RenderingIntentFlag;const AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};exports2.AnnotationMode=AnnotationMode;const AnnotationEditorPrefix="pdfjs_internal_editor_";exports2.AnnotationEditorPrefix=AnnotationEditorPrefix;const AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};exports2.AnnotationEditorType=AnnotationEditorType;const AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};exports2.AnnotationEditorParamsType=AnnotationEditorParamsType;const PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};exports2.PermissionFlag=PermissionFlag;const TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};exports2.TextRenderingMode=TextRenderingMode;const ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};exports2.ImageKind=ImageKind;const AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};exports2.AnnotationType=AnnotationType;const AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};exports2.AnnotationStateModelType=AnnotationStateModelType;const AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};exports2.AnnotationMarkedState=AnnotationMarkedState;const AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};exports2.AnnotationReviewState=AnnotationReviewState;const AnnotationReplyType={GROUP:"Group",REPLY:"R"};exports2.AnnotationReplyType=AnnotationReplyType;const AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};exports2.AnnotationFlag=AnnotationFlag;const AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};exports2.AnnotationFieldFlag=AnnotationFieldFlag;const AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};exports2.AnnotationBorderStyleType=AnnotationBorderStyleType;const AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};exports2.AnnotationActionEventType=AnnotationActionEventType;const DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};exports2.DocumentActionEventType=DocumentActionEventType;const PageActionEventType={O:"PageOpen",C:"PageClose"};exports2.PageActionEventType=PageActionEventType;const StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};exports2.StreamType=StreamType;const FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};exports2.FontType=FontType;const VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};exports2.VerbosityLevel=VerbosityLevel;const CMapCompressionType={NONE:0,BINARY:1,STREAM:2};exports2.CMapCompressionType=CMapCompressionType;const OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};exports2.OPS=OPS;const UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};exports2.UNSUPPORTED_FEATURES=UNSUPPORTED_FEATURES;const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};exports2.PasswordResponses=PasswordResponses;let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(level){Number.isInteger(level)&&(verbosity=level)}__name2(setVerbosityLevel,"setVerbosityLevel"),__name(setVerbosityLevel,"setVerbosityLevel");function getVerbosityLevel(){return verbosity}__name2(getVerbosityLevel,"getVerbosityLevel"),__name(getVerbosityLevel,"getVerbosityLevel");function info(msg){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${msg}`)}__name2(info,"info"),__name(info,"info");function warn(msg){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${msg}`)}__name2(warn,"warn"),__name(warn,"warn");function unreachable(msg){throw new Error(msg)}__name2(unreachable,"unreachable"),__name(unreachable,"unreachable");function assert(cond,msg){cond||unreachable(msg)}__name2(assert,"assert"),__name(assert,"assert");function _isValidProtocol(url){if(!url)return!1;switch(url.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}__name2(_isValidProtocol,"_isValidProtocol"),__name(_isValidProtocol,"_isValidProtocol");function createValidAbsoluteUrl(url){let baseUrl=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,options=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!url)return null;try{if(options&&typeof url=="string"){if(options.addDefaultProtocol&&url.startsWith("www.")){const dots=url.match(/\./g);dots&&dots.length>=2&&(url=`http://${url}`)}if(options.tryConvertEncoding)try{url=stringToUTF8String(url)}catch{}}const absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(_isValidProtocol(absoluteUrl))return absoluteUrl}catch{}return null}__name2(createValidAbsoluteUrl,"createValidAbsoluteUrl"),__name(createValidAbsoluteUrl,"createValidAbsoluteUrl");function shadow(obj,prop,value){return Object.defineProperty(obj,prop,{value,enumerable:!0,configurable:!0,writable:!1}),value}__name2(shadow,"shadow"),__name(shadow,"shadow");const BaseException=__name(__name2(function(){function BaseException2(message,name){this.constructor===BaseException2&&unreachable("Cannot initialize BaseException."),this.message=message,this.name=name}return __name2(BaseException2,"BaseException2"),__name(BaseException2,"BaseException"),BaseException2.prototype=new Error,BaseException2.constructor=BaseException2,BaseException2},"BaseExceptionClosure"),"BaseExceptionClosure")();exports2.BaseException=BaseException;const _PasswordException=class extends BaseException{static{__name2(this,"_PasswordException")}constructor(msg,code){super(msg,"PasswordException"),this.code=code}};__name(_PasswordException,"PasswordException");let PasswordException=_PasswordException;exports2.PasswordException=PasswordException;const _UnknownErrorException=class extends BaseException{static{__name2(this,"_UnknownErrorException")}constructor(msg,details){super(msg,"UnknownErrorException"),this.details=details}};__name(_UnknownErrorException,"UnknownErrorException");let UnknownErrorException=_UnknownErrorException;exports2.UnknownErrorException=UnknownErrorException;const _InvalidPDFException=class extends BaseException{static{__name2(this,"_InvalidPDFException")}constructor(msg){super(msg,"InvalidPDFException")}};__name(_InvalidPDFException,"InvalidPDFException");let InvalidPDFException=_InvalidPDFException;exports2.InvalidPDFException=InvalidPDFException;const _MissingPDFException=class extends BaseException{static{__name2(this,"_MissingPDFException")}constructor(msg){super(msg,"MissingPDFException")}};__name(_MissingPDFException,"MissingPDFException");let MissingPDFException=_MissingPDFException;exports2.MissingPDFException=MissingPDFException;const _UnexpectedResponseException=class extends BaseException{static{__name2(this,"_UnexpectedResponseException")}constructor(msg,status){super(msg,"UnexpectedResponseException"),this.status=status}};__name(_UnexpectedResponseException,"UnexpectedResponseException");let UnexpectedResponseException=_UnexpectedResponseException;exports2.UnexpectedResponseException=UnexpectedResponseException;const _FormatError=class extends BaseException{static{__name2(this,"_FormatError")}constructor(msg){super(msg,"FormatError")}};__name(_FormatError,"FormatError");let FormatError=_FormatError;exports2.FormatError=FormatError;const _AbortException=class extends BaseException{static{__name2(this,"_AbortException")}constructor(msg){super(msg,"AbortException")}};__name(_AbortException,"AbortException");let AbortException=_AbortException;exports2.AbortException=AbortException;function bytesToString(bytes){(typeof bytes!="object"||bytes===null||bytes.length===void 0)&&unreachable("Invalid argument for bytesToString");const length=bytes.length,MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT)return String.fromCharCode.apply(null,bytes);const strBuf=[];for(let i=0;i<length;i+=MAX_ARGUMENT_COUNT){const chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length),chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk))}return strBuf.join("")}__name2(bytesToString,"bytesToString"),__name(bytesToString,"bytesToString");function stringToBytes(str){typeof str!="string"&&unreachable("Invalid argument for stringToBytes");const length=str.length,bytes=new Uint8Array(length);for(let i=0;i<length;++i)bytes[i]=str.charCodeAt(i)&255;return bytes}__name2(stringToBytes,"stringToBytes"),__name(stringToBytes,"stringToBytes");function arrayByteLength(arr){if(arr.length!==void 0)return arr.length;if(arr.byteLength!==void 0)return arr.byteLength;unreachable("Invalid argument for arrayByteLength")}__name2(arrayByteLength,"arrayByteLength"),__name(arrayByteLength,"arrayByteLength");function arraysToBytes(arr){const length=arr.length;if(length===1&&arr[0]instanceof Uint8Array)return arr[0];let resultLength=0;for(let i=0;i<length;i++)resultLength+=arrayByteLength(arr[i]);let pos=0;const data=new Uint8Array(resultLength);for(let i=0;i<length;i++){let item=arr[i];item instanceof Uint8Array||(typeof item=="string"?item=stringToBytes(item):item=new Uint8Array(item));const itemLength=item.byteLength;data.set(item,pos),pos+=itemLength}return data}__name2(arraysToBytes,"arraysToBytes"),__name(arraysToBytes,"arraysToBytes");function string32(value){return String.fromCharCode(value>>24&255,value>>16&255,value>>8&255,value&255)}__name2(string32,"string32"),__name(string32,"string32");function objectSize(obj){return Object.keys(obj).length}__name2(objectSize,"objectSize"),__name(objectSize,"objectSize");function objectFromMap(map){const obj=Object.create(null);for(const[key,value]of map)obj[key]=value;return obj}__name2(objectFromMap,"objectFromMap"),__name(objectFromMap,"objectFromMap");function isLittleEndian(){const buffer8=new Uint8Array(4);return buffer8[0]=1,new Uint32Array(buffer8.buffer,0,1)[0]===1}__name2(isLittleEndian,"isLittleEndian"),__name(isLittleEndian,"isLittleEndian");function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}__name2(isEvalSupported,"isEvalSupported"),__name(isEvalSupported,"isEvalSupported");const _FeatureTest=class{static{__name2(this,"_FeatureTest")}static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};__name(_FeatureTest,"FeatureTest");let FeatureTest=_FeatureTest;exports2.FeatureTest=FeatureTest;const hexNumbers=[...Array(256).keys()].map(n=>n.toString(16).padStart(2,"0")),_Util=class _Util2{static{__name2(this,"_Util")}static makeHexColor(r,g,b){return`#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`}static scaleMinMax(transform,minMax){let temp;transform[0]?(transform[0]<0&&(temp=minMax[0],minMax[0]=minMax[1],minMax[1]=temp),minMax[0]*=transform[0],minMax[1]*=transform[0],transform[3]<0&&(temp=minMax[2],minMax[2]=minMax[3],minMax[3]=temp),minMax[2]*=transform[3],minMax[3]*=transform[3]):(temp=minMax[0],minMax[0]=minMax[2],minMax[2]=temp,temp=minMax[1],minMax[1]=minMax[3],minMax[3]=temp,transform[1]<0&&(temp=minMax[2],minMax[2]=minMax[3],minMax[3]=temp),minMax[2]*=transform[1],minMax[3]*=transform[1],transform[2]<0&&(temp=minMax[0],minMax[0]=minMax[1],minMax[1]=temp),minMax[0]*=transform[2],minMax[1]*=transform[2]),minMax[0]+=transform[4],minMax[1]+=transform[4],minMax[2]+=transform[5],minMax[3]+=transform[5]}static transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]]}static applyTransform(p,m){const xt=p[0]*m[0]+p[1]*m[2]+m[4],yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt]}static applyInverseTransform(p,m){const d=m[0]*m[3]-m[1]*m[2],xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d,yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt]}static getAxialAlignedBoundingBox(r,m){const p1=_Util2.applyTransform(r,m),p2=_Util2.applyTransform(r.slice(2,4),m),p3=_Util2.applyTransform([r[0],r[3]],m),p4=_Util2.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])]}static inverseTransform(m){const d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d]}static apply3dTransform(m,v){return[m[0]*v[0]+m[1]*v[1]+m[2]*v[2],m[3]*v[0]+m[4]*v[1]+m[5]*v[2],m[6]*v[0]+m[7]*v[1]+m[8]*v[2]]}static singularValueDecompose2dScale(m){const transpose=[m[0],m[2],m[1],m[3]],a=m[0]*transpose[0]+m[1]*transpose[2],b=m[0]*transpose[1]+m[1]*transpose[3],c=m[2]*transpose[0]+m[3]*transpose[2],d=m[2]*transpose[1]+m[3]*transpose[3],first=(a+d)/2,second=Math.sqrt((a+d)**2-4*(a*d-c*b))/2,sx=first+second||1,sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)]}static normalizeRect(rect){const r=rect.slice(0);return rect[0]>rect[2]&&(r[0]=rect[2],r[2]=rect[0]),rect[1]>rect[3]&&(r[1]=rect[3],r[3]=rect[1]),r}static intersect(rect1,rect2){const xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2])),xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh)return null;const yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3])),yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));return yLow>yHigh?null:[xLow,yLow,xHigh,yHigh]}static bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3){const tvalues=[],bounds=[[],[]];let a,b,c,t,t1,t2,b2ac,sqrtb2ac;for(let i=0;i<2;++i){if(i===0?(b=6*x0-12*x1+6*x2,a=-3*x0+9*x1-9*x2+3*x3,c=3*x1-3*x0):(b=6*y0-12*y1+6*y2,a=-3*y0+9*y1-9*y2+3*y3,c=3*y1-3*y0),Math.abs(a)<1e-12){if(Math.abs(b)<1e-12)continue;t=-c/b,0<t&&t<1&&tvalues.push(t);continue}b2ac=b*b-4*c*a,sqrtb2ac=Math.sqrt(b2ac),!(b2ac<0)&&(t1=(-b+sqrtb2ac)/(2*a),0<t1&&t1<1&&tvalues.push(t1),t2=(-b-sqrtb2ac)/(2*a),0<t2&&t2<1&&tvalues.push(t2))}let j=tvalues.length,mt;const jlen=j;for(;j--;)t=tvalues[j],mt=1-t,bounds[0][j]=mt*mt*mt*x0+3*mt*mt*t*x1+3*mt*t*t*x2+t*t*t*x3,bounds[1][j]=mt*mt*mt*y0+3*mt*mt*t*y1+3*mt*t*t*y2+t*t*t*y3;return bounds[0][jlen]=x0,bounds[1][jlen]=y0,bounds[0][jlen+1]=x3,bounds[1][jlen+1]=y3,bounds[0].length=bounds[1].length=jlen+2,[Math.min(...bounds[0]),Math.min(...bounds[1]),Math.max(...bounds[0]),Math.max(...bounds[1])]}};__name(_Util,"Util");let Util=_Util;exports2.Util=Util;const PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToPDFString(str){if(str[0]>="\xEF"){let encoding;if(str[0]==="\xFE"&&str[1]==="\xFF"?encoding="utf-16be":str[0]==="\xFF"&&str[1]==="\xFE"?encoding="utf-16le":str[0]==="\xEF"&&str[1]==="\xBB"&&str[2]==="\xBF"&&(encoding="utf-8"),encoding)try{const decoder=new TextDecoder(encoding,{fatal:!0}),buffer=stringToBytes(str);return decoder.decode(buffer)}catch(ex){warn(`stringToPDFString: "${ex}".`)}}const strBuf=[];for(let i=0,ii=str.length;i<ii;i++){const code=PDFStringTranslateTable[str.charCodeAt(i)];strBuf.push(code?String.fromCharCode(code):str.charAt(i))}return strBuf.join("")}__name2(stringToPDFString,"stringToPDFString"),__name(stringToPDFString,"stringToPDFString");function escapeString(str){return str.replace(/([()\\\n\r])/g,match=>match===`
`?"\\n":match==="\r"?"\\r":`\\${match}`)}__name2(escapeString,"escapeString"),__name(escapeString,"escapeString");function isAscii(str){return/^[\x00-\x7F]*$/.test(str)}__name2(isAscii,"isAscii"),__name(isAscii,"isAscii");function stringToUTF16BEString(str){const buf=["\xFE\xFF"];for(let i=0,ii=str.length;i<ii;i++){const char=str.charCodeAt(i);buf.push(String.fromCharCode(char>>8&255),String.fromCharCode(char&255))}return buf.join("")}__name2(stringToUTF16BEString,"stringToUTF16BEString"),__name(stringToUTF16BEString,"stringToUTF16BEString");function stringToUTF8String(str){return decodeURIComponent(escape(str))}__name2(stringToUTF8String,"stringToUTF8String"),__name(stringToUTF8String,"stringToUTF8String");function utf8StringToString(str){return unescape(encodeURIComponent(str))}__name2(utf8StringToString,"utf8StringToString"),__name(utf8StringToString,"utf8StringToString");function isArrayBuffer(v){return typeof v=="object"&&v!==null&&v.byteLength!==void 0}__name2(isArrayBuffer,"isArrayBuffer"),__name(isArrayBuffer,"isArrayBuffer");function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length)return!1;for(let i=0,ii=arr1.length;i<ii;i++)if(arr1[i]!==arr2[i])return!1;return!0}__name2(isArrayEqual,"isArrayEqual"),__name(isArrayEqual,"isArrayEqual");function getModificationDate(){let date=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,"0"),date.getUTCDate().toString().padStart(2,"0"),date.getUTCHours().toString().padStart(2,"0"),date.getUTCMinutes().toString().padStart(2,"0"),date.getUTCSeconds().toString().padStart(2,"0")].join("")}__name2(getModificationDate,"getModificationDate"),__name(getModificationDate,"getModificationDate");function createPromiseCapability(){const capability=Object.create(null);let isSettled=!1;return Object.defineProperty(capability,"settled",{get(){return isSettled}}),capability.promise=new Promise(function(resolve,reject){capability.resolve=function(data){isSettled=!0,resolve(data)},capability.reject=function(reason){isSettled=!0,reject(reason)}}),capability}__name2(createPromiseCapability,"createPromiseCapability"),__name(createPromiseCapability,"createPromiseCapability")},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var _is_node2=__w_pdfjs_require__2(3);globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,__name(__name2(function(){globalThis.btoa||!_is_node2.isNodeJS||(globalThis.btoa=function(chars){return Buffer.from(chars,"binary").toString("base64")})},"checkNodeBtoa"),"checkNodeBtoa")(),__name(__name2(function(){globalThis.atob||!_is_node2.isNodeJS||(globalThis.atob=function(input){return Buffer.from(input,"base64").toString("binary")})},"checkNodeAtob"),"checkNodeAtob")(),__name(__name2(function(){globalThis.DOMMatrix||!_is_node2.isNodeJS||(globalThis.DOMMatrix=requireDommatrix())},"checkDOMMatrix"),"checkDOMMatrix")(),__name(__name2(function(){globalThis.ReadableStream||!_is_node2.isNodeJS||(globalThis.ReadableStream=requirePonyfill().ReadableStream)},"checkReadableStream"),"checkReadableStream")(),__name(__name2(function(){Array.prototype.at||__w_pdfjs_require__2(4)},"checkArrayAt"),"checkArrayAt")(),__name(__name2(function(){Uint8Array.prototype.at||__w_pdfjs_require__2(76)},"checkTypedArrayAt"),"checkTypedArrayAt")(),__name(__name2(function(){globalThis.structuredClone||__w_pdfjs_require__2(86)},"checkStructuredClone"),"checkStructuredClone")())},(__unused_webpack_module2,exports2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.isNodeJS=void 0;const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");exports2.isNodeJS=isNodeJS},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{__w_pdfjs_require__2(5);var entryUnbind=__w_pdfjs_require__2(75);module2.exports=entryUnbind("Array","at")},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var $=__w_pdfjs_require__2(6),toObject=__w_pdfjs_require__2(41),lengthOfArrayLike=__w_pdfjs_require__2(65),toIntegerOrInfinity=__w_pdfjs_require__2(63),addToUnscopables=__w_pdfjs_require__2(70);$({target:"Array",proto:!0},{at:__name(__name2(function(index){var O=toObject(this),len=lengthOfArrayLike(O),relativeIndex=toIntegerOrInfinity(index),k=relativeIndex>=0?relativeIndex:len+relativeIndex;return k<0||k>=len?void 0:O[k]},"at"),"at")}),addToUnscopables("at")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),getOwnPropertyDescriptor=__w_pdfjs_require__2(8).f,createNonEnumerableProperty=__w_pdfjs_require__2(45),defineBuiltIn=__w_pdfjs_require__2(49),defineGlobalProperty=__w_pdfjs_require__2(39),copyConstructorProperties=__w_pdfjs_require__2(57),isForced=__w_pdfjs_require__2(69);module2.exports=function(options,source){var TARGET=options.target,GLOBAL=options.global,STATIC=options.stat,FORCED,target,key,targetProperty,sourceProperty,descriptor;if(GLOBAL?target=global2:STATIC?target=global2[TARGET]||defineGlobalProperty(TARGET,{}):target=(global2[TARGET]||{}).prototype,target)for(key in source){if(sourceProperty=source[key],options.dontCallGetSet?(descriptor=getOwnPropertyDescriptor(target,key),targetProperty=descriptor&&descriptor.value):targetProperty=target[key],FORCED=isForced(GLOBAL?key:TARGET+(STATIC?".":"#")+key,options.forced),!FORCED&&targetProperty!==void 0){if(typeof sourceProperty==typeof targetProperty)continue;copyConstructorProperties(sourceProperty,targetProperty)}(options.sham||targetProperty&&targetProperty.sham)&&createNonEnumerableProperty(sourceProperty,"sham",!0),defineBuiltIn(target,key,sourceProperty,options)}}},module2=>{var check=__name(function(it){return it&&it.Math==Math&&it},"check");module2.exports=check(typeof globalThis=="object"&&globalThis)||check(typeof window=="object"&&window)||check(typeof self=="object"&&self)||check(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||Function("return this")()},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),call=__w_pdfjs_require__2(11),propertyIsEnumerableModule=__w_pdfjs_require__2(13),createPropertyDescriptor=__w_pdfjs_require__2(14),toIndexedObject=__w_pdfjs_require__2(15),toPropertyKey=__w_pdfjs_require__2(20),hasOwn=__w_pdfjs_require__2(40),IE8_DOM_DEFINE=__w_pdfjs_require__2(43),$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;exports2.f=DESCRIPTORS?$getOwnPropertyDescriptor:__name(__name2(function(O,P){if(O=toIndexedObject(O),P=toPropertyKey(P),IE8_DOM_DEFINE)try{return $getOwnPropertyDescriptor(O,P)}catch{}if(hasOwn(O,P))return createPropertyDescriptor(!call(propertyIsEnumerableModule.f,O,P),O[P])},"getOwnPropertyDescriptor"),"getOwnPropertyDescriptor")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10);module2.exports=!fails(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},module2=>{module2.exports=function(exec){try{return!!exec()}catch{return!0}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var NATIVE_BIND=__w_pdfjs_require__2(12),call=Function.prototype.call;module2.exports=NATIVE_BIND?call.bind(call):function(){return call.apply(call,arguments)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10);module2.exports=!fails(function(){var test=function(){}.bind();return typeof test!="function"||test.hasOwnProperty("prototype")})},(__unused_webpack_module2,exports2)=>{var $propertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!$propertyIsEnumerable.call({1:2},1);exports2.f=NASHORN_BUG?__name(__name2(function(V){var descriptor=getOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable},"propertyIsEnumerable"),"propertyIsEnumerable"):$propertyIsEnumerable},module2=>{module2.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var IndexedObject=__w_pdfjs_require__2(16),requireObjectCoercible=__w_pdfjs_require__2(19);module2.exports=function(it){return IndexedObject(requireObjectCoercible(it))}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),fails=__w_pdfjs_require__2(10),classof=__w_pdfjs_require__2(18),$Object=Object,split=uncurryThis("".split);module2.exports=fails(function(){return!$Object("z").propertyIsEnumerable(0)})?function(it){return classof(it)=="String"?split(it,""):$Object(it)}:$Object},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var NATIVE_BIND=__w_pdfjs_require__2(12),FunctionPrototype=Function.prototype,bind=FunctionPrototype.bind,call=FunctionPrototype.call,uncurryThis=NATIVE_BIND&&bind.bind(call,call);module2.exports=NATIVE_BIND?function(fn){return fn&&uncurryThis(fn)}:function(fn){return fn&&function(){return call.apply(fn,arguments)}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),toString=uncurryThis({}.toString),stringSlice=uncurryThis("".slice);module2.exports=function(it){return stringSlice(toString(it),8,-1)}},module2=>{var $TypeError=TypeError;module2.exports=function(it){if(it==null)throw $TypeError("Can't call method on "+it);return it}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toPrimitive=__w_pdfjs_require__2(21),isSymbol=__w_pdfjs_require__2(24);module2.exports=function(argument){var key=toPrimitive(argument,"string");return isSymbol(key)?key:key+""}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var call=__w_pdfjs_require__2(11),isObject=__w_pdfjs_require__2(22),isSymbol=__w_pdfjs_require__2(24),getMethod=__w_pdfjs_require__2(31),ordinaryToPrimitive=__w_pdfjs_require__2(34),wellKnownSymbol=__w_pdfjs_require__2(35),$TypeError=TypeError,TO_PRIMITIVE=wellKnownSymbol("toPrimitive");module2.exports=function(input,pref){if(!isObject(input)||isSymbol(input))return input;var exoticToPrim=getMethod(input,TO_PRIMITIVE),result;if(exoticToPrim){if(pref===void 0&&(pref="default"),result=call(exoticToPrim,input,pref),!isObject(result)||isSymbol(result))return result;throw $TypeError("Can't convert object to primitive value")}return pref===void 0&&(pref="number"),ordinaryToPrimitive(input,pref)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isCallable=__w_pdfjs_require__2(23);module2.exports=function(it){return typeof it=="object"?it!==null:isCallable(it)}},module2=>{module2.exports=function(argument){return typeof argument=="function"}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var getBuiltIn=__w_pdfjs_require__2(25),isCallable=__w_pdfjs_require__2(23),isPrototypeOf=__w_pdfjs_require__2(26),USE_SYMBOL_AS_UID=__w_pdfjs_require__2(27),$Object=Object;module2.exports=USE_SYMBOL_AS_UID?function(it){return typeof it=="symbol"}:function(it){var $Symbol=getBuiltIn("Symbol");return isCallable($Symbol)&&isPrototypeOf($Symbol.prototype,$Object(it))}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),isCallable=__w_pdfjs_require__2(23),aFunction=__name(function(argument){return isCallable(argument)?argument:void 0},"aFunction");module2.exports=function(namespace,method){return arguments.length<2?aFunction(global2[namespace]):global2[namespace]&&global2[namespace][method]}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17);module2.exports=uncurryThis({}.isPrototypeOf)},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var NATIVE_SYMBOL=__w_pdfjs_require__2(28);module2.exports=NATIVE_SYMBOL&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var V8_VERSION=__w_pdfjs_require__2(29),fails=__w_pdfjs_require__2(10);module2.exports=!!Object.getOwnPropertySymbols&&!fails(function(){var symbol=Symbol();return!String(symbol)||!(Object(symbol)instanceof Symbol)||!Symbol.sham&&V8_VERSION&&V8_VERSION<41})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),userAgent=__w_pdfjs_require__2(30),process2=global2.process,Deno2=global2.Deno,versions=process2&&process2.versions||Deno2&&Deno2.version,v8=versions&&versions.v8,match,version2;v8&&(match=v8.split("."),version2=match[0]>0&&match[0]<4?1:+(match[0]+match[1])),!version2&&userAgent&&(match=userAgent.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=userAgent.match(/Chrome\/(\d+)/),match&&(version2=+match[1]))),module2.exports=version2},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var getBuiltIn=__w_pdfjs_require__2(25);module2.exports=getBuiltIn("navigator","userAgent")||""},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var aCallable=__w_pdfjs_require__2(32);module2.exports=function(V,P){var func=V[P];return func==null?void 0:aCallable(func)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isCallable=__w_pdfjs_require__2(23),tryToString=__w_pdfjs_require__2(33),$TypeError=TypeError;module2.exports=function(argument){if(isCallable(argument))return argument;throw $TypeError(tryToString(argument)+" is not a function")}},module2=>{var $String=String;module2.exports=function(argument){try{return $String(argument)}catch{return"Object"}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var call=__w_pdfjs_require__2(11),isCallable=__w_pdfjs_require__2(23),isObject=__w_pdfjs_require__2(22),$TypeError=TypeError;module2.exports=function(input,pref){var fn,val;if(pref==="string"&&isCallable(fn=input.toString)&&!isObject(val=call(fn,input))||isCallable(fn=input.valueOf)&&!isObject(val=call(fn,input))||pref!=="string"&&isCallable(fn=input.toString)&&!isObject(val=call(fn,input)))return val;throw $TypeError("Can't convert object to primitive value")}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),shared=__w_pdfjs_require__2(36),hasOwn=__w_pdfjs_require__2(40),uid=__w_pdfjs_require__2(42),NATIVE_SYMBOL=__w_pdfjs_require__2(28),USE_SYMBOL_AS_UID=__w_pdfjs_require__2(27),WellKnownSymbolsStore=shared("wks"),Symbol2=global2.Symbol,symbolFor=Symbol2&&Symbol2.for,createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol2:Symbol2&&Symbol2.withoutSetter||uid;module2.exports=function(name){if(!hasOwn(WellKnownSymbolsStore,name)||!(NATIVE_SYMBOL||typeof WellKnownSymbolsStore[name]=="string")){var description="Symbol."+name;NATIVE_SYMBOL&&hasOwn(Symbol2,name)?WellKnownSymbolsStore[name]=Symbol2[name]:USE_SYMBOL_AS_UID&&symbolFor?WellKnownSymbolsStore[name]=symbolFor(description):WellKnownSymbolsStore[name]=createWellKnownSymbol(description)}return WellKnownSymbolsStore[name]}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var IS_PURE=__w_pdfjs_require__2(37),store=__w_pdfjs_require__2(38);(module2.exports=function(key,value){return store[key]||(store[key]=value!==void 0?value:{})})("versions",[]).push({version:"3.24.1",mode:IS_PURE?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})},module2=>{module2.exports=!1},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),defineGlobalProperty=__w_pdfjs_require__2(39),SHARED="__core-js_shared__",store=global2[SHARED]||defineGlobalProperty(SHARED,{});module2.exports=store},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),defineProperty=Object.defineProperty;module2.exports=function(key,value){try{defineProperty(global2,key,{value,configurable:!0,writable:!0})}catch{global2[key]=value}return value}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),toObject=__w_pdfjs_require__2(41),hasOwnProperty=uncurryThis({}.hasOwnProperty);module2.exports=Object.hasOwn||__name(__name2(function(it,key){return hasOwnProperty(toObject(it),key)},"hasOwn"),"hasOwn")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var requireObjectCoercible=__w_pdfjs_require__2(19),$Object=Object;module2.exports=function(argument){return $Object(requireObjectCoercible(argument))}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),id=0,postfix=Math.random(),toString=uncurryThis(1 .toString);module2.exports=function(key){return"Symbol("+(key===void 0?"":key)+")_"+toString(++id+postfix,36)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),fails=__w_pdfjs_require__2(10),createElement=__w_pdfjs_require__2(44);module2.exports=!DESCRIPTORS&&!fails(function(){return Object.defineProperty(createElement("div"),"a",{get:function(){return 7}}).a!=7})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),isObject=__w_pdfjs_require__2(22),document2=global2.document,EXISTS=isObject(document2)&&isObject(document2.createElement);module2.exports=function(it){return EXISTS?document2.createElement(it):{}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),definePropertyModule=__w_pdfjs_require__2(46),createPropertyDescriptor=__w_pdfjs_require__2(14);module2.exports=DESCRIPTORS?function(object,key,value){return definePropertyModule.f(object,key,createPropertyDescriptor(1,value))}:function(object,key,value){return object[key]=value,object}},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),IE8_DOM_DEFINE=__w_pdfjs_require__2(43),V8_PROTOTYPE_DEFINE_BUG=__w_pdfjs_require__2(47),anObject=__w_pdfjs_require__2(48),toPropertyKey=__w_pdfjs_require__2(20),$TypeError=TypeError,$defineProperty=Object.defineProperty,$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE="configurable",WRITABLE="writable";exports2.f=DESCRIPTORS?V8_PROTOTYPE_DEFINE_BUG?__name(__name2(function(O,P,Attributes){if(anObject(O),P=toPropertyKey(P),anObject(Attributes),typeof O=="function"&&P==="prototype"&&"value"in Attributes&&WRITABLE in Attributes&&!Attributes[WRITABLE]){var current=$getOwnPropertyDescriptor(O,P);current&&current[WRITABLE]&&(O[P]=Attributes.value,Attributes={configurable:CONFIGURABLE in Attributes?Attributes[CONFIGURABLE]:current[CONFIGURABLE],enumerable:ENUMERABLE in Attributes?Attributes[ENUMERABLE]:current[ENUMERABLE],writable:!1})}return $defineProperty(O,P,Attributes)},"defineProperty"),"defineProperty"):$defineProperty:__name(__name2(function(O,P,Attributes){if(anObject(O),P=toPropertyKey(P),anObject(Attributes),IE8_DOM_DEFINE)try{return $defineProperty(O,P,Attributes)}catch{}if("get"in Attributes||"set"in Attributes)throw $TypeError("Accessors not supported");return"value"in Attributes&&(O[P]=Attributes.value),O},"defineProperty"),"defineProperty")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),fails=__w_pdfjs_require__2(10);module2.exports=DESCRIPTORS&&fails(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isObject=__w_pdfjs_require__2(22),$String=String,$TypeError=TypeError;module2.exports=function(argument){if(isObject(argument))return argument;throw $TypeError($String(argument)+" is not an object")}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isCallable=__w_pdfjs_require__2(23),definePropertyModule=__w_pdfjs_require__2(46),makeBuiltIn=__w_pdfjs_require__2(50),defineGlobalProperty=__w_pdfjs_require__2(39);module2.exports=function(O,key,value,options){options||(options={});var simple=options.enumerable,name=options.name!==void 0?options.name:key;if(isCallable(value)&&makeBuiltIn(value,name,options),options.global)simple?O[key]=value:defineGlobalProperty(key,value);else{try{options.unsafe?O[key]&&(simple=!0):delete O[key]}catch{}simple?O[key]=value:definePropertyModule.f(O,key,{value,enumerable:!1,configurable:!options.nonConfigurable,writable:!options.nonWritable})}return O}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10),isCallable=__w_pdfjs_require__2(23),hasOwn=__w_pdfjs_require__2(40),DESCRIPTORS=__w_pdfjs_require__2(9),CONFIGURABLE_FUNCTION_NAME=__w_pdfjs_require__2(51).CONFIGURABLE,inspectSource=__w_pdfjs_require__2(52),InternalStateModule=__w_pdfjs_require__2(53),enforceInternalState=InternalStateModule.enforce,getInternalState=InternalStateModule.get,defineProperty=Object.defineProperty,CONFIGURABLE_LENGTH=DESCRIPTORS&&!fails(function(){return defineProperty(function(){},"length",{value:8}).length!==8}),TEMPLATE=String(String).split("String"),makeBuiltIn=module2.exports=function(value,name,options){String(name).slice(0,7)==="Symbol("&&(name="["+String(name).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),options&&options.getter&&(name="get "+name),options&&options.setter&&(name="set "+name),(!hasOwn(value,"name")||CONFIGURABLE_FUNCTION_NAME&&value.name!==name)&&(DESCRIPTORS?defineProperty(value,"name",{value:name,configurable:!0}):value.name=name),CONFIGURABLE_LENGTH&&options&&hasOwn(options,"arity")&&value.length!==options.arity&&defineProperty(value,"length",{value:options.arity});try{options&&hasOwn(options,"constructor")&&options.constructor?DESCRIPTORS&&defineProperty(value,"prototype",{writable:!1}):value.prototype&&(value.prototype=void 0)}catch{}var state=enforceInternalState(value);return hasOwn(state,"source")||(state.source=TEMPLATE.join(typeof name=="string"?name:"")),value};Function.prototype.toString=makeBuiltIn(__name(__name2(function(){return isCallable(this)&&getInternalState(this).source||inspectSource(this)},"toString"),"toString"),"toString")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),hasOwn=__w_pdfjs_require__2(40),FunctionPrototype=Function.prototype,getDescriptor=DESCRIPTORS&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn(FunctionPrototype,"name"),PROPER=EXISTS&&__name(__name2(function(){},"something"),"something").name==="something",CONFIGURABLE=EXISTS&&(!DESCRIPTORS||DESCRIPTORS&&getDescriptor(FunctionPrototype,"name").configurable);module2.exports={EXISTS,PROPER,CONFIGURABLE}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),isCallable=__w_pdfjs_require__2(23),store=__w_pdfjs_require__2(38),functionToString=uncurryThis(Function.toString);isCallable(store.inspectSource)||(store.inspectSource=function(it){return functionToString(it)}),module2.exports=store.inspectSource},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var NATIVE_WEAK_MAP=__w_pdfjs_require__2(54),global2=__w_pdfjs_require__2(7),uncurryThis=__w_pdfjs_require__2(17),isObject=__w_pdfjs_require__2(22),createNonEnumerableProperty=__w_pdfjs_require__2(45),hasOwn=__w_pdfjs_require__2(40),shared=__w_pdfjs_require__2(38),sharedKey=__w_pdfjs_require__2(55),hiddenKeys=__w_pdfjs_require__2(56),OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError2=global2.TypeError,WeakMap2=global2.WeakMap,set,get,has,enforce=__name(function(it){return has(it)?get(it):set(it,{})},"enforce"),getterFor=__name(function(TYPE){return function(it){var state;if(!isObject(it)||(state=get(it)).type!==TYPE)throw TypeError2("Incompatible receiver, "+TYPE+" required");return state}},"getterFor");if(NATIVE_WEAK_MAP||shared.state){var store=shared.state||(shared.state=new WeakMap2),wmget=uncurryThis(store.get),wmhas=uncurryThis(store.has),wmset=uncurryThis(store.set);set=__name(function(it,metadata){if(wmhas(store,it))throw new TypeError2(OBJECT_ALREADY_INITIALIZED);return metadata.facade=it,wmset(store,it,metadata),metadata},"set"),get=__name(function(it){return wmget(store,it)||{}},"get"),has=__name(function(it){return wmhas(store,it)},"has")}else{var STATE=sharedKey("state");hiddenKeys[STATE]=!0,set=__name(function(it,metadata){if(hasOwn(it,STATE))throw new TypeError2(OBJECT_ALREADY_INITIALIZED);return metadata.facade=it,createNonEnumerableProperty(it,STATE,metadata),metadata},"set"),get=__name(function(it){return hasOwn(it,STATE)?it[STATE]:{}},"get"),has=__name(function(it){return hasOwn(it,STATE)},"has")}module2.exports={set,get,has,enforce,getterFor}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),isCallable=__w_pdfjs_require__2(23),inspectSource=__w_pdfjs_require__2(52),WeakMap2=global2.WeakMap;module2.exports=isCallable(WeakMap2)&&/native code/.test(inspectSource(WeakMap2))},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var shared=__w_pdfjs_require__2(36),uid=__w_pdfjs_require__2(42),keys=shared("keys");module2.exports=function(key){return keys[key]||(keys[key]=uid(key))}},module2=>{module2.exports={}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var hasOwn=__w_pdfjs_require__2(40),ownKeys=__w_pdfjs_require__2(58),getOwnPropertyDescriptorModule=__w_pdfjs_require__2(8),definePropertyModule=__w_pdfjs_require__2(46);module2.exports=function(target,source,exceptions){for(var keys=ownKeys(source),defineProperty=definePropertyModule.f,getOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,i=0;i<keys.length;i++){var key=keys[i];!hasOwn(target,key)&&!(exceptions&&hasOwn(exceptions,key))&&defineProperty(target,key,getOwnPropertyDescriptor(source,key))}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var getBuiltIn=__w_pdfjs_require__2(25),uncurryThis=__w_pdfjs_require__2(17),getOwnPropertyNamesModule=__w_pdfjs_require__2(59),getOwnPropertySymbolsModule=__w_pdfjs_require__2(68),anObject=__w_pdfjs_require__2(48),concat=uncurryThis([].concat);module2.exports=getBuiltIn("Reflect","ownKeys")||__name(__name2(function(it){var keys=getOwnPropertyNamesModule.f(anObject(it)),getOwnPropertySymbols=getOwnPropertySymbolsModule.f;return getOwnPropertySymbols?concat(keys,getOwnPropertySymbols(it)):keys},"ownKeys"),"ownKeys")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var internalObjectKeys=__w_pdfjs_require__2(60),enumBugKeys=__w_pdfjs_require__2(67),hiddenKeys=enumBugKeys.concat("length","prototype");exports2.f=Object.getOwnPropertyNames||__name(__name2(function(O){return internalObjectKeys(O,hiddenKeys)},"getOwnPropertyNames"),"getOwnPropertyNames")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),hasOwn=__w_pdfjs_require__2(40),toIndexedObject=__w_pdfjs_require__2(15),indexOf=__w_pdfjs_require__2(61).indexOf,hiddenKeys=__w_pdfjs_require__2(56),push=uncurryThis([].push);module2.exports=function(object,names){var O=toIndexedObject(object),i=0,result=[],key;for(key in O)!hasOwn(hiddenKeys,key)&&hasOwn(O,key)&&push(result,key);for(;names.length>i;)hasOwn(O,key=names[i++])&&(~indexOf(result,key)||push(result,key));return result}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toIndexedObject=__w_pdfjs_require__2(15),toAbsoluteIndex=__w_pdfjs_require__2(62),lengthOfArrayLike=__w_pdfjs_require__2(65),createMethod=__name(function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIndexedObject($this),length=lengthOfArrayLike(O),index=toAbsoluteIndex(fromIndex,length),value;if(IS_INCLUDES&&el!=el){for(;length>index;)if(value=O[index++],value!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}},"createMethod");module2.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toIntegerOrInfinity=__w_pdfjs_require__2(63),max=Math.max,min=Math.min;module2.exports=function(index,length){var integer=toIntegerOrInfinity(index);return integer<0?max(integer+length,0):min(integer,length)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var trunc=__w_pdfjs_require__2(64);module2.exports=function(argument){var number=+argument;return number!==number||number===0?0:trunc(number)}},module2=>{var ceil=Math.ceil,floor=Math.floor;module2.exports=Math.trunc||__name(__name2(function(x){var n=+x;return(n>0?floor:ceil)(n)},"trunc"),"trunc")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toLength=__w_pdfjs_require__2(66);module2.exports=function(obj){return toLength(obj.length)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toIntegerOrInfinity=__w_pdfjs_require__2(63),min=Math.min;module2.exports=function(argument){return argument>0?min(toIntegerOrInfinity(argument),9007199254740991):0}},module2=>{module2.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(__unused_webpack_module2,exports2)=>{exports2.f=Object.getOwnPropertySymbols},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10),isCallable=__w_pdfjs_require__2(23),replacement=/#|\.prototype\./,isForced=__name(function(feature,detection){var value=data[normalize2(feature)];return value==POLYFILL?!0:value==NATIVE?!1:isCallable(detection)?fails(detection):!!detection},"isForced"),normalize2=isForced.normalize=function(string){return String(string).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P";module2.exports=isForced},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var wellKnownSymbol=__w_pdfjs_require__2(35),create=__w_pdfjs_require__2(71),defineProperty=__w_pdfjs_require__2(46).f,UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;ArrayPrototype[UNSCOPABLES]==null&&defineProperty(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:create(null)}),module2.exports=function(key){ArrayPrototype[UNSCOPABLES][key]=!0}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var anObject=__w_pdfjs_require__2(48),definePropertiesModule=__w_pdfjs_require__2(72),enumBugKeys=__w_pdfjs_require__2(67),hiddenKeys=__w_pdfjs_require__2(56),html=__w_pdfjs_require__2(74),documentCreateElement=__w_pdfjs_require__2(44),sharedKey=__w_pdfjs_require__2(55),GT=">",LT="<",PROTOTYPE="prototype",SCRIPT="script",IE_PROTO=sharedKey("IE_PROTO"),EmptyConstructor=__name(function(){},"EmptyConstructor"),scriptTag=__name(function(content){return LT+SCRIPT+GT+content+LT+"/"+SCRIPT+GT},"scriptTag"),NullProtoObjectViaActiveX=__name(function(activeXDocument2){activeXDocument2.write(scriptTag("")),activeXDocument2.close();var temp=activeXDocument2.parentWindow.Object;return activeXDocument2=null,temp},"NullProtoObjectViaActiveX"),NullProtoObjectViaIFrame=__name(function(){var iframe=documentCreateElement("iframe"),JS="java"+SCRIPT+":",iframeDocument;return iframe.style.display="none",html.appendChild(iframe),iframe.src=String(JS),iframeDocument=iframe.contentWindow.document,iframeDocument.open(),iframeDocument.write(scriptTag("document.F=Object")),iframeDocument.close(),iframeDocument.F},"NullProtoObjectViaIFrame"),activeXDocument,NullProtoObject=__name(function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch{}NullProtoObject=typeof document<"u"?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var length=enumBugKeys.length;length--;)delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];return NullProtoObject()},"NullProtoObject");hiddenKeys[IE_PROTO]=!0,module2.exports=Object.create||__name(__name2(function(O,Properties){var result;return O!==null?(EmptyConstructor[PROTOTYPE]=anObject(O),result=new EmptyConstructor,EmptyConstructor[PROTOTYPE]=null,result[IE_PROTO]=O):result=NullProtoObject(),Properties===void 0?result:definePropertiesModule.f(result,Properties)},"create"),"create")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),V8_PROTOTYPE_DEFINE_BUG=__w_pdfjs_require__2(47),definePropertyModule=__w_pdfjs_require__2(46),anObject=__w_pdfjs_require__2(48),toIndexedObject=__w_pdfjs_require__2(15),objectKeys=__w_pdfjs_require__2(73);exports2.f=DESCRIPTORS&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:__name(__name2(function(O,Properties){anObject(O);for(var props=toIndexedObject(Properties),keys=objectKeys(Properties),length=keys.length,index=0,key;length>index;)definePropertyModule.f(O,key=keys[index++],props[key]);return O},"defineProperties"),"defineProperties")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var internalObjectKeys=__w_pdfjs_require__2(60),enumBugKeys=__w_pdfjs_require__2(67);module2.exports=Object.keys||__name(__name2(function(O){return internalObjectKeys(O,enumBugKeys)},"keys"),"keys")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var getBuiltIn=__w_pdfjs_require__2(25);module2.exports=getBuiltIn("document","documentElement")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),uncurryThis=__w_pdfjs_require__2(17);module2.exports=function(CONSTRUCTOR,METHOD){return uncurryThis(global2[CONSTRUCTOR].prototype[METHOD])}},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{__w_pdfjs_require__2(77)},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var ArrayBufferViewCore=__w_pdfjs_require__2(78),lengthOfArrayLike=__w_pdfjs_require__2(65),toIntegerOrInfinity=__w_pdfjs_require__2(63),aTypedArray=ArrayBufferViewCore.aTypedArray,exportTypedArrayMethod=ArrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod("at",__name(__name2(function(index){var O=aTypedArray(this),len=lengthOfArrayLike(O),relativeIndex=toIntegerOrInfinity(index),k=relativeIndex>=0?relativeIndex:len+relativeIndex;return k<0||k>=len?void 0:O[k]},"at"),"at"))},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var NATIVE_ARRAY_BUFFER=__w_pdfjs_require__2(79),DESCRIPTORS=__w_pdfjs_require__2(9),global2=__w_pdfjs_require__2(7),isCallable=__w_pdfjs_require__2(23),isObject=__w_pdfjs_require__2(22),hasOwn=__w_pdfjs_require__2(40),classof=__w_pdfjs_require__2(80),tryToString=__w_pdfjs_require__2(33),createNonEnumerableProperty=__w_pdfjs_require__2(45),defineBuiltIn=__w_pdfjs_require__2(49),defineProperty=__w_pdfjs_require__2(46).f,isPrototypeOf=__w_pdfjs_require__2(26),getPrototypeOf=__w_pdfjs_require__2(82),setPrototypeOf=__w_pdfjs_require__2(84),wellKnownSymbol=__w_pdfjs_require__2(35),uid=__w_pdfjs_require__2(42),InternalStateModule=__w_pdfjs_require__2(53),enforceInternalState=InternalStateModule.enforce,getInternalState=InternalStateModule.get,Int8Array2=global2.Int8Array,Int8ArrayPrototype=Int8Array2&&Int8Array2.prototype,Uint8ClampedArray2=global2.Uint8ClampedArray,Uint8ClampedArrayPrototype=Uint8ClampedArray2&&Uint8ClampedArray2.prototype,TypedArray=Int8Array2&&getPrototypeOf(Int8Array2),TypedArrayPrototype=Int8ArrayPrototype&&getPrototypeOf(Int8ArrayPrototype),ObjectPrototype=Object.prototype,TypeError2=global2.TypeError,TO_STRING_TAG=wellKnownSymbol("toStringTag"),TYPED_ARRAY_TAG=uid("TYPED_ARRAY_TAG"),TYPED_ARRAY_CONSTRUCTOR="TypedArrayConstructor",NATIVE_ARRAY_BUFFER_VIEWS=NATIVE_ARRAY_BUFFER&&!!setPrototypeOf&&classof(global2.opera)!=="Opera",TYPED_ARRAY_TAG_REQUIRED=!1,NAME,Constructor,Prototype,TypedArrayConstructorsList={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},BigIntArrayConstructorsList={BigInt64Array:8,BigUint64Array:8},isView=__name(__name2(function(it){if(!isObject(it))return!1;var klass=classof(it);return klass==="DataView"||hasOwn(TypedArrayConstructorsList,klass)||hasOwn(BigIntArrayConstructorsList,klass)},"isView2"),"isView"),getTypedArrayConstructor=__name(function(it){var proto=getPrototypeOf(it);if(isObject(proto)){var state=getInternalState(proto);return state&&hasOwn(state,TYPED_ARRAY_CONSTRUCTOR)?state[TYPED_ARRAY_CONSTRUCTOR]:getTypedArrayConstructor(proto)}},"getTypedArrayConstructor"),isTypedArray=__name(function(it){if(!isObject(it))return!1;var klass=classof(it);return hasOwn(TypedArrayConstructorsList,klass)||hasOwn(BigIntArrayConstructorsList,klass)},"isTypedArray"),aTypedArray=__name(function(it){if(isTypedArray(it))return it;throw TypeError2("Target is not a typed array")},"aTypedArray"),aTypedArrayConstructor=__name(function(C){if(isCallable(C)&&(!setPrototypeOf||isPrototypeOf(TypedArray,C)))return C;throw TypeError2(tryToString(C)+" is not a typed array constructor")},"aTypedArrayConstructor"),exportTypedArrayMethod=__name(function(KEY,property,forced,options){if(DESCRIPTORS){if(forced)for(var ARRAY in TypedArrayConstructorsList){var TypedArrayConstructor=global2[ARRAY];if(TypedArrayConstructor&&hasOwn(TypedArrayConstructor.prototype,KEY))try{delete TypedArrayConstructor.prototype[KEY]}catch{try{TypedArrayConstructor.prototype[KEY]=property}catch{}}}(!TypedArrayPrototype[KEY]||forced)&&defineBuiltIn(TypedArrayPrototype,KEY,forced?property:NATIVE_ARRAY_BUFFER_VIEWS&&Int8ArrayPrototype[KEY]||property,options)}},"exportTypedArrayMethod"),exportTypedArrayStaticMethod=__name(function(KEY,property,forced){var ARRAY,TypedArrayConstructor;if(DESCRIPTORS){if(setPrototypeOf){if(forced){for(ARRAY in TypedArrayConstructorsList)if(TypedArrayConstructor=global2[ARRAY],TypedArrayConstructor&&hasOwn(TypedArrayConstructor,KEY))try{delete TypedArrayConstructor[KEY]}catch{}}if(!TypedArray[KEY]||forced)try{return defineBuiltIn(TypedArray,KEY,forced?property:NATIVE_ARRAY_BUFFER_VIEWS&&TypedArray[KEY]||property)}catch{}else return}for(ARRAY in TypedArrayConstructorsList)TypedArrayConstructor=global2[ARRAY],TypedArrayConstructor&&(!TypedArrayConstructor[KEY]||forced)&&defineBuiltIn(TypedArrayConstructor,KEY,property)}},"exportTypedArrayStaticMethod");for(NAME in TypedArrayConstructorsList)Constructor=global2[NAME],Prototype=Constructor&&Constructor.prototype,Prototype?enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor:NATIVE_ARRAY_BUFFER_VIEWS=!1;for(NAME in BigIntArrayConstructorsList)Constructor=global2[NAME],Prototype=Constructor&&Constructor.prototype,Prototype&&(enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor);if((!NATIVE_ARRAY_BUFFER_VIEWS||!isCallable(TypedArray)||TypedArray===Function.prototype)&&(TypedArray=__name(__name2(function(){throw TypeError2("Incorrect invocation")},"TypedArray2"),"TypedArray"),NATIVE_ARRAY_BUFFER_VIEWS))for(NAME in TypedArrayConstructorsList)global2[NAME]&&setPrototypeOf(global2[NAME],TypedArray);if((!NATIVE_ARRAY_BUFFER_VIEWS||!TypedArrayPrototype||TypedArrayPrototype===ObjectPrototype)&&(TypedArrayPrototype=TypedArray.prototype,NATIVE_ARRAY_BUFFER_VIEWS))for(NAME in TypedArrayConstructorsList)global2[NAME]&&setPrototypeOf(global2[NAME].prototype,TypedArrayPrototype);if(NATIVE_ARRAY_BUFFER_VIEWS&&getPrototypeOf(Uint8ClampedArrayPrototype)!==TypedArrayPrototype&&setPrototypeOf(Uint8ClampedArrayPrototype,TypedArrayPrototype),DESCRIPTORS&&!hasOwn(TypedArrayPrototype,TO_STRING_TAG)){TYPED_ARRAY_TAG_REQUIRED=!0,defineProperty(TypedArrayPrototype,TO_STRING_TAG,{get:function(){return isObject(this)?this[TYPED_ARRAY_TAG]:void 0}});for(NAME in TypedArrayConstructorsList)global2[NAME]&&createNonEnumerableProperty(global2[NAME],TYPED_ARRAY_TAG,NAME)}module2.exports={NATIVE_ARRAY_BUFFER_VIEWS,TYPED_ARRAY_TAG:TYPED_ARRAY_TAG_REQUIRED&&TYPED_ARRAY_TAG,aTypedArray,aTypedArrayConstructor,exportTypedArrayMethod,exportTypedArrayStaticMethod,getTypedArrayConstructor,isView,isTypedArray,TypedArray,TypedArrayPrototype}},module2=>{module2.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var TO_STRING_TAG_SUPPORT=__w_pdfjs_require__2(81),isCallable=__w_pdfjs_require__2(23),classofRaw=__w_pdfjs_require__2(18),wellKnownSymbol=__w_pdfjs_require__2(35),TO_STRING_TAG=wellKnownSymbol("toStringTag"),$Object=Object,CORRECT_ARGUMENTS=classofRaw(function(){return arguments}())=="Arguments",tryGet=__name(function(it,key){try{return it[key]}catch{}},"tryGet");module2.exports=TO_STRING_TAG_SUPPORT?classofRaw:function(it){var O,tag,result;return it===void 0?"Undefined":it===null?"Null":typeof(tag=tryGet(O=$Object(it),TO_STRING_TAG))=="string"?tag:CORRECT_ARGUMENTS?classofRaw(O):(result=classofRaw(O))=="Object"&&isCallable(O.callee)?"Arguments":result}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var wellKnownSymbol=__w_pdfjs_require__2(35),TO_STRING_TAG=wellKnownSymbol("toStringTag"),test={};test[TO_STRING_TAG]="z",module2.exports=String(test)==="[object z]"},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var hasOwn=__w_pdfjs_require__2(40),isCallable=__w_pdfjs_require__2(23),toObject=__w_pdfjs_require__2(41),sharedKey=__w_pdfjs_require__2(55),CORRECT_PROTOTYPE_GETTER=__w_pdfjs_require__2(83),IE_PROTO=sharedKey("IE_PROTO"),$Object=Object,ObjectPrototype=$Object.prototype;module2.exports=CORRECT_PROTOTYPE_GETTER?$Object.getPrototypeOf:function(O){var object=toObject(O);if(hasOwn(object,IE_PROTO))return object[IE_PROTO];var constructor=object.constructor;return isCallable(constructor)&&object instanceof constructor?constructor.prototype:object instanceof $Object?ObjectPrototype:null}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10);module2.exports=!fails(function(){function F(){}return __name2(F,"F"),__name(F,"F"),F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),anObject=__w_pdfjs_require__2(48),aPossiblePrototype=__w_pdfjs_require__2(85);module2.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var CORRECT_SETTER=!1,test={},setter;try{setter=uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),setter(test,[]),CORRECT_SETTER=test instanceof Array}catch{}return __name(__name2(function(O,proto){return anObject(O),aPossiblePrototype(proto),CORRECT_SETTER?setter(O,proto):O.__proto__=proto,O},"setPrototypeOf"),"setPrototypeOf")}():void 0)},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isCallable=__w_pdfjs_require__2(23),$String=String,$TypeError=TypeError;module2.exports=function(argument){if(typeof argument=="object"||isCallable(argument))return argument;throw $TypeError("Can't set "+$String(argument)+" as a prototype")}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{__w_pdfjs_require__2(87),__w_pdfjs_require__2(93),__w_pdfjs_require__2(95),__w_pdfjs_require__2(117),__w_pdfjs_require__2(119);var path=__w_pdfjs_require__2(128);module2.exports=path.structuredClone},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toIndexedObject=__w_pdfjs_require__2(15),addToUnscopables=__w_pdfjs_require__2(70),Iterators=__w_pdfjs_require__2(88),InternalStateModule=__w_pdfjs_require__2(53),defineProperty=__w_pdfjs_require__2(46).f,defineIterator=__w_pdfjs_require__2(89),IS_PURE=__w_pdfjs_require__2(37),DESCRIPTORS=__w_pdfjs_require__2(9),ARRAY_ITERATOR="Array Iterator",setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor(ARRAY_ITERATOR);module2.exports=defineIterator(Array,"Array",function(iterated,kind){setInternalState(this,{type:ARRAY_ITERATOR,target:toIndexedObject(iterated),index:0,kind})},function(){var state=getInternalState(this),target=state.target,kind=state.kind,index=state.index++;return!target||index>=target.length?(state.target=void 0,{value:void 0,done:!0}):kind=="keys"?{value:index,done:!1}:kind=="values"?{value:target[index],done:!1}:{value:[index,target[index]],done:!1}},"values");var values=Iterators.Arguments=Iterators.Array;if(addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries"),!IS_PURE&&DESCRIPTORS&&values.name!=="values")try{defineProperty(values,"name",{value:"values"})}catch{}},module2=>{module2.exports={}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var $=__w_pdfjs_require__2(6),call=__w_pdfjs_require__2(11),IS_PURE=__w_pdfjs_require__2(37),FunctionName=__w_pdfjs_require__2(51),isCallable=__w_pdfjs_require__2(23),createIteratorConstructor=__w_pdfjs_require__2(90),getPrototypeOf=__w_pdfjs_require__2(82),setPrototypeOf=__w_pdfjs_require__2(84),setToStringTag=__w_pdfjs_require__2(92),createNonEnumerableProperty=__w_pdfjs_require__2(45),defineBuiltIn=__w_pdfjs_require__2(49),wellKnownSymbol=__w_pdfjs_require__2(35),Iterators=__w_pdfjs_require__2(88),IteratorsCore=__w_pdfjs_require__2(91),PROPER_FUNCTION_NAME=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR=wellKnownSymbol("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=__name(function(){return this},"returnThis");module2.exports=function(Iterable,NAME,IteratorConstructor,next,DEFAULT,IS_SET,FORCED){createIteratorConstructor(IteratorConstructor,NAME,next);var getIterationMethod=__name(function(KIND){if(KIND===DEFAULT&&defaultIterator)return defaultIterator;if(!BUGGY_SAFARI_ITERATORS&&KIND in IterablePrototype)return IterablePrototype[KIND];switch(KIND){case KEYS:return __name(__name2(function(){return new IteratorConstructor(this,KIND)},"keys"),"keys");case VALUES:return __name(__name2(function(){return new IteratorConstructor(this,KIND)},"values"),"values");case ENTRIES:return __name(__name2(function(){return new IteratorConstructor(this,KIND)},"entries"),"entries")}return function(){return new IteratorConstructor(this)}},"getIterationMethod"),TO_STRING_TAG=NAME+" Iterator",INCORRECT_VALUES_NAME=!1,IterablePrototype=Iterable.prototype,nativeIterator=IterablePrototype[ITERATOR]||IterablePrototype["@@iterator"]||DEFAULT&&IterablePrototype[DEFAULT],defaultIterator=!BUGGY_SAFARI_ITERATORS&&nativeIterator||getIterationMethod(DEFAULT),anyNativeIterator=NAME=="Array"&&IterablePrototype.entries||nativeIterator,CurrentIteratorPrototype,methods,KEY;if(anyNativeIterator&&(CurrentIteratorPrototype=getPrototypeOf(anyNativeIterator.call(new Iterable)),CurrentIteratorPrototype!==Object.prototype&&CurrentIteratorPrototype.next&&(!IS_PURE&&getPrototypeOf(CurrentIteratorPrototype)!==IteratorPrototype&&(setPrototypeOf?setPrototypeOf(CurrentIteratorPrototype,IteratorPrototype):isCallable(CurrentIteratorPrototype[ITERATOR])||defineBuiltIn(CurrentIteratorPrototype,ITERATOR,returnThis)),setToStringTag(CurrentIteratorPrototype,TO_STRING_TAG,!0,!0),IS_PURE&&(Iterators[TO_STRING_TAG]=returnThis))),PROPER_FUNCTION_NAME&&DEFAULT==VALUES&&nativeIterator&&nativeIterator.name!==VALUES&&(!IS_PURE&&CONFIGURABLE_FUNCTION_NAME?createNonEnumerableProperty(IterablePrototype,"name",VALUES):(INCORRECT_VALUES_NAME=!0,defaultIterator=__name(__name2(function(){return call(nativeIterator,this)},"values"),"values"))),DEFAULT)if(methods={values:getIterationMethod(VALUES),keys:IS_SET?defaultIterator:getIterationMethod(KEYS),entries:getIterationMethod(ENTRIES)},FORCED)for(KEY in methods)(BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME||!(KEY in IterablePrototype))&&defineBuiltIn(IterablePrototype,KEY,methods[KEY]);else $({target:NAME,proto:!0,forced:BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME},methods);return(!IS_PURE||FORCED)&&IterablePrototype[ITERATOR]!==defaultIterator&&defineBuiltIn(IterablePrototype,ITERATOR,defaultIterator,{name:DEFAULT}),Iterators[NAME]=defaultIterator,methods}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var IteratorPrototype=__w_pdfjs_require__2(91).IteratorPrototype,create=__w_pdfjs_require__2(71),createPropertyDescriptor=__w_pdfjs_require__2(14),setToStringTag=__w_pdfjs_require__2(92),Iterators=__w_pdfjs_require__2(88),returnThis=__name(function(){return this},"returnThis");module2.exports=function(IteratorConstructor,NAME,next,ENUMERABLE_NEXT){var TO_STRING_TAG=NAME+" Iterator";return IteratorConstructor.prototype=create(IteratorPrototype,{next:createPropertyDescriptor(+!ENUMERABLE_NEXT,next)}),setToStringTag(IteratorConstructor,TO_STRING_TAG,!1,!0),Iterators[TO_STRING_TAG]=returnThis,IteratorConstructor}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10),isCallable=__w_pdfjs_require__2(23),create=__w_pdfjs_require__2(71),getPrototypeOf=__w_pdfjs_require__2(82),defineBuiltIn=__w_pdfjs_require__2(49),wellKnownSymbol=__w_pdfjs_require__2(35),IS_PURE=__w_pdfjs_require__2(37),ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1,IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=getPrototypeOf(getPrototypeOf(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS=!0);var NEW_ITERATOR_PROTOTYPE=IteratorPrototype==null||fails(function(){var test={};return IteratorPrototype[ITERATOR].call(test)!==test});NEW_ITERATOR_PROTOTYPE?IteratorPrototype={}:IS_PURE&&(IteratorPrototype=create(IteratorPrototype)),isCallable(IteratorPrototype[ITERATOR])||defineBuiltIn(IteratorPrototype,ITERATOR,function(){return this}),module2.exports={IteratorPrototype,BUGGY_SAFARI_ITERATORS}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var defineProperty=__w_pdfjs_require__2(46).f,hasOwn=__w_pdfjs_require__2(40),wellKnownSymbol=__w_pdfjs_require__2(35),TO_STRING_TAG=wellKnownSymbol("toStringTag");module2.exports=function(target,TAG,STATIC){target&&!STATIC&&(target=target.prototype),target&&!hasOwn(target,TO_STRING_TAG)&&defineProperty(target,TO_STRING_TAG,{configurable:!0,value:TAG})}},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var TO_STRING_TAG_SUPPORT=__w_pdfjs_require__2(81),defineBuiltIn=__w_pdfjs_require__2(49),toString=__w_pdfjs_require__2(94);TO_STRING_TAG_SUPPORT||defineBuiltIn(Object.prototype,"toString",toString,{unsafe:!0})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var TO_STRING_TAG_SUPPORT=__w_pdfjs_require__2(81),classof=__w_pdfjs_require__2(80);module2.exports=TO_STRING_TAG_SUPPORT?{}.toString:__name(__name2(function(){return"[object "+classof(this)+"]"},"toString"),"toString")},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{__w_pdfjs_require__2(96)},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var collection=__w_pdfjs_require__2(97),collectionStrong=__w_pdfjs_require__2(114);collection("Map",function(init){return __name(__name2(function(){return init(this,arguments.length?arguments[0]:void 0)},"Map2"),"Map")},collectionStrong)},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var $=__w_pdfjs_require__2(6),global2=__w_pdfjs_require__2(7),uncurryThis=__w_pdfjs_require__2(17),isForced=__w_pdfjs_require__2(69),defineBuiltIn=__w_pdfjs_require__2(49),InternalMetadataModule=__w_pdfjs_require__2(98),iterate=__w_pdfjs_require__2(105),anInstance=__w_pdfjs_require__2(111),isCallable=__w_pdfjs_require__2(23),isObject=__w_pdfjs_require__2(22),fails=__w_pdfjs_require__2(10),checkCorrectnessOfIteration=__w_pdfjs_require__2(112),setToStringTag=__w_pdfjs_require__2(92),inheritIfRequired=__w_pdfjs_require__2(113);module2.exports=function(CONSTRUCTOR_NAME,wrapper,common){var IS_MAP=CONSTRUCTOR_NAME.indexOf("Map")!==-1,IS_WEAK=CONSTRUCTOR_NAME.indexOf("Weak")!==-1,ADDER=IS_MAP?"set":"add",NativeConstructor=global2[CONSTRUCTOR_NAME],NativePrototype=NativeConstructor&&NativeConstructor.prototype,Constructor=NativeConstructor,exported={},fixMethod=__name(function(KEY){var uncurriedNativeMethod=uncurryThis(NativePrototype[KEY]);defineBuiltIn(NativePrototype,KEY,KEY=="add"?__name(__name2(function(value){return uncurriedNativeMethod(this,value===0?0:value),this},"add"),"add"):KEY=="delete"?function(key){return IS_WEAK&&!isObject(key)?!1:uncurriedNativeMethod(this,key===0?0:key)}:KEY=="get"?__name(__name2(function(key){return IS_WEAK&&!isObject(key)?void 0:uncurriedNativeMethod(this,key===0?0:key)},"get"),"get"):KEY=="has"?__name(__name2(function(key){return IS_WEAK&&!isObject(key)?!1:uncurriedNativeMethod(this,key===0?0:key)},"has"),"has"):__name(__name2(function(key,value){return uncurriedNativeMethod(this,key===0?0:key,value),this},"set"),"set"))},"fixMethod"),REPLACE=isForced(CONSTRUCTOR_NAME,!isCallable(NativeConstructor)||!(IS_WEAK||NativePrototype.forEach&&!fails(function(){new NativeConstructor().entries().next()})));if(REPLACE)Constructor=common.getConstructor(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER),InternalMetadataModule.enable();else if(isForced(CONSTRUCTOR_NAME,!0)){var instance=new Constructor,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails(function(){instance.has(1)}),ACCEPT_ITERABLES=checkCorrectnessOfIteration(function(iterable){new NativeConstructor(iterable)}),BUGGY_ZERO=!IS_WEAK&&fails(function(){for(var $instance=new NativeConstructor,index=5;index--;)$instance[ADDER](index,index);return!$instance.has(-0)});ACCEPT_ITERABLES||(Constructor=wrapper(function(dummy,iterable){anInstance(dummy,NativePrototype);var that=inheritIfRequired(new NativeConstructor,dummy,Constructor);return iterable!=null&&iterate(iterable,that[ADDER],{that,AS_ENTRIES:IS_MAP}),that}),Constructor.prototype=NativePrototype,NativePrototype.constructor=Constructor),(THROWS_ON_PRIMITIVES||BUGGY_ZERO)&&(fixMethod("delete"),fixMethod("has"),IS_MAP&&fixMethod("get")),(BUGGY_ZERO||HASNT_CHAINING)&&fixMethod(ADDER),IS_WEAK&&NativePrototype.clear&&delete NativePrototype.clear}return exported[CONSTRUCTOR_NAME]=Constructor,$({global:!0,constructor:!0,forced:Constructor!=NativeConstructor},exported),setToStringTag(Constructor,CONSTRUCTOR_NAME),IS_WEAK||common.setStrong(Constructor,CONSTRUCTOR_NAME,IS_MAP),Constructor}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var $=__w_pdfjs_require__2(6),uncurryThis=__w_pdfjs_require__2(17),hiddenKeys=__w_pdfjs_require__2(56),isObject=__w_pdfjs_require__2(22),hasOwn=__w_pdfjs_require__2(40),defineProperty=__w_pdfjs_require__2(46).f,getOwnPropertyNamesModule=__w_pdfjs_require__2(59),getOwnPropertyNamesExternalModule=__w_pdfjs_require__2(99),isExtensible=__w_pdfjs_require__2(102),uid=__w_pdfjs_require__2(42),FREEZING=__w_pdfjs_require__2(104),REQUIRED=!1,METADATA=uid("meta"),id=0,setMetadata=__name(function(it){defineProperty(it,METADATA,{value:{objectID:"O"+id++,weakData:{}}})},"setMetadata"),fastKey=__name(function(it,create){if(!isObject(it))return typeof it=="symbol"?it:(typeof it=="string"?"S":"P")+it;if(!hasOwn(it,METADATA)){if(!isExtensible(it))return"F";if(!create)return"E";setMetadata(it)}return it[METADATA].objectID},"fastKey"),getWeakData=__name(function(it,create){if(!hasOwn(it,METADATA)){if(!isExtensible(it))return!0;if(!create)return!1;setMetadata(it)}return it[METADATA].weakData},"getWeakData"),onFreeze=__name(function(it){return FREEZING&&REQUIRED&&isExtensible(it)&&!hasOwn(it,METADATA)&&setMetadata(it),it},"onFreeze"),enable=__name(function(){meta.enable=function(){},REQUIRED=!0;var getOwnPropertyNames=getOwnPropertyNamesModule.f,splice=uncurryThis([].splice),test={};test[METADATA]=1,getOwnPropertyNames(test).length&&(getOwnPropertyNamesModule.f=function(it){for(var result=getOwnPropertyNames(it),i=0,length=result.length;i<length;i++)if(result[i]===METADATA){splice(result,i,1);break}return result},$({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:getOwnPropertyNamesExternalModule.f}))},"enable"),meta=module2.exports={enable,fastKey,getWeakData,onFreeze};hiddenKeys[METADATA]=!0},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var classof=__w_pdfjs_require__2(18),toIndexedObject=__w_pdfjs_require__2(15),$getOwnPropertyNames=__w_pdfjs_require__2(59).f,arraySlice=__w_pdfjs_require__2(100),windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=__name(function(it){try{return $getOwnPropertyNames(it)}catch{return arraySlice(windowNames)}},"getWindowNames");module2.exports.f=__name(__name2(function(it){return windowNames&&classof(it)=="Window"?getWindowNames(it):$getOwnPropertyNames(toIndexedObject(it))},"getOwnPropertyNames"),"getOwnPropertyNames")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toAbsoluteIndex=__w_pdfjs_require__2(62),lengthOfArrayLike=__w_pdfjs_require__2(65),createProperty=__w_pdfjs_require__2(101),$Array=Array,max=Math.max;module2.exports=function(O,start,end){for(var length=lengthOfArrayLike(O),k=toAbsoluteIndex(start,length),fin=toAbsoluteIndex(end===void 0?length:end,length),result=$Array(max(fin-k,0)),n=0;k<fin;k++,n++)createProperty(result,n,O[k]);return result.length=n,result}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toPropertyKey=__w_pdfjs_require__2(20),definePropertyModule=__w_pdfjs_require__2(46),createPropertyDescriptor=__w_pdfjs_require__2(14);module2.exports=function(object,key,value){var propertyKey=toPropertyKey(key);propertyKey in object?definePropertyModule.f(object,propertyKey,createPropertyDescriptor(0,value)):object[propertyKey]=value}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10),isObject=__w_pdfjs_require__2(22),classof=__w_pdfjs_require__2(18),ARRAY_BUFFER_NON_EXTENSIBLE=__w_pdfjs_require__2(103),$isExtensible=Object.isExtensible,FAILS_ON_PRIMITIVES=fails(function(){});module2.exports=FAILS_ON_PRIMITIVES||ARRAY_BUFFER_NON_EXTENSIBLE?__name(__name2(function(it){return!isObject(it)||ARRAY_BUFFER_NON_EXTENSIBLE&&classof(it)=="ArrayBuffer"?!1:$isExtensible?$isExtensible(it):!0},"isExtensible"),"isExtensible"):$isExtensible},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10);module2.exports=fails(function(){if(typeof ArrayBuffer=="function"){var buffer=new ArrayBuffer(8);Object.isExtensible(buffer)&&Object.defineProperty(buffer,"a",{value:8})}})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10);module2.exports=!fails(function(){return Object.isExtensible(Object.preventExtensions({}))})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var bind=__w_pdfjs_require__2(106),call=__w_pdfjs_require__2(11),anObject=__w_pdfjs_require__2(48),tryToString=__w_pdfjs_require__2(33),isArrayIteratorMethod=__w_pdfjs_require__2(107),lengthOfArrayLike=__w_pdfjs_require__2(65),isPrototypeOf=__w_pdfjs_require__2(26),getIterator=__w_pdfjs_require__2(108),getIteratorMethod=__w_pdfjs_require__2(109),iteratorClose=__w_pdfjs_require__2(110),$TypeError=TypeError,Result=__name(function(stopped,result){this.stopped=stopped,this.result=result},"Result"),ResultPrototype=Result.prototype;module2.exports=function(iterable,unboundFunction,options){var that=options&&options.that,AS_ENTRIES=!!(options&&options.AS_ENTRIES),IS_RECORD=!!(options&&options.IS_RECORD),IS_ITERATOR=!!(options&&options.IS_ITERATOR),INTERRUPTED=!!(options&&options.INTERRUPTED),fn=bind(unboundFunction,that),iterator,iterFn,index,length,result,next,step,stop=__name(function(condition){return iterator&&iteratorClose(iterator,"normal",condition),new Result(!0,condition)},"stop"),callFn=__name(function(value){return AS_ENTRIES?(anObject(value),INTERRUPTED?fn(value[0],value[1],stop):fn(value[0],value[1])):INTERRUPTED?fn(value,stop):fn(value)},"callFn");if(IS_RECORD)iterator=iterable.iterator;else if(IS_ITERATOR)iterator=iterable;else{if(iterFn=getIteratorMethod(iterable),!iterFn)throw $TypeError(tryToString(iterable)+" is not iterable");if(isArrayIteratorMethod(iterFn)){for(index=0,length=lengthOfArrayLike(iterable);length>index;index++)if(result=callFn(iterable[index]),result&&isPrototypeOf(ResultPrototype,result))return result;return new Result(!1)}iterator=getIterator(iterable,iterFn)}for(next=IS_RECORD?iterable.next:iterator.next;!(step=call(next,iterator)).done;){try{result=callFn(step.value)}catch(error){iteratorClose(iterator,"throw",error)}if(typeof result=="object"&&result&&isPrototypeOf(ResultPrototype,result))return result}return new Result(!1)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),aCallable=__w_pdfjs_require__2(32),NATIVE_BIND=__w_pdfjs_require__2(12),bind=uncurryThis(uncurryThis.bind);module2.exports=function(fn,that){return aCallable(fn),that===void 0?fn:NATIVE_BIND?bind(fn,that):function(){return fn.apply(that,arguments)}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var wellKnownSymbol=__w_pdfjs_require__2(35),Iterators=__w_pdfjs_require__2(88),ITERATOR=wellKnownSymbol("iterator"),ArrayPrototype=Array.prototype;module2.exports=function(it){return it!==void 0&&(Iterators.Array===it||ArrayPrototype[ITERATOR]===it)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var call=__w_pdfjs_require__2(11),aCallable=__w_pdfjs_require__2(32),anObject=__w_pdfjs_require__2(48),tryToString=__w_pdfjs_require__2(33),getIteratorMethod=__w_pdfjs_require__2(109),$TypeError=TypeError;module2.exports=function(argument,usingIterator){var iteratorMethod=arguments.length<2?getIteratorMethod(argument):usingIterator;if(aCallable(iteratorMethod))return anObject(call(iteratorMethod,argument));throw $TypeError(tryToString(argument)+" is not iterable")}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var classof=__w_pdfjs_require__2(80),getMethod=__w_pdfjs_require__2(31),Iterators=__w_pdfjs_require__2(88),wellKnownSymbol=__w_pdfjs_require__2(35),ITERATOR=wellKnownSymbol("iterator");module2.exports=function(it){if(it!=null)return getMethod(it,ITERATOR)||getMethod(it,"@@iterator")||Iterators[classof(it)]}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var call=__w_pdfjs_require__2(11),anObject=__w_pdfjs_require__2(48),getMethod=__w_pdfjs_require__2(31);module2.exports=function(iterator,kind,value){var innerResult,innerError;anObject(iterator);try{if(innerResult=getMethod(iterator,"return"),!innerResult){if(kind==="throw")throw value;return value}innerResult=call(innerResult,iterator)}catch(error){innerError=!0,innerResult=error}if(kind==="throw")throw value;if(innerError)throw innerResult;return anObject(innerResult),value}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isPrototypeOf=__w_pdfjs_require__2(26),$TypeError=TypeError;module2.exports=function(it,Prototype){if(isPrototypeOf(Prototype,it))return it;throw $TypeError("Incorrect invocation")}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var wellKnownSymbol=__w_pdfjs_require__2(35),ITERATOR=wellKnownSymbol("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR]=function(){return this},Array.from(iteratorWithReturn,function(){throw 2})}catch{}module2.exports=function(exec,SKIP_CLOSING){if(!SKIP_CLOSING&&!SAFE_CLOSING)return!1;var ITERATION_SUPPORT=!1;try{var object={};object[ITERATOR]=function(){return{next:function(){return{done:ITERATION_SUPPORT=!0}}}},exec(object)}catch{}return ITERATION_SUPPORT}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isCallable=__w_pdfjs_require__2(23),isObject=__w_pdfjs_require__2(22),setPrototypeOf=__w_pdfjs_require__2(84);module2.exports=function($this,dummy,Wrapper){var NewTarget,NewTargetPrototype;return setPrototypeOf&&isCallable(NewTarget=dummy.constructor)&&NewTarget!==Wrapper&&isObject(NewTargetPrototype=NewTarget.prototype)&&NewTargetPrototype!==Wrapper.prototype&&setPrototypeOf($this,NewTargetPrototype),$this}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var defineProperty=__w_pdfjs_require__2(46).f,create=__w_pdfjs_require__2(71),defineBuiltIns=__w_pdfjs_require__2(115),bind=__w_pdfjs_require__2(106),anInstance=__w_pdfjs_require__2(111),iterate=__w_pdfjs_require__2(105),defineIterator=__w_pdfjs_require__2(89),setSpecies=__w_pdfjs_require__2(116),DESCRIPTORS=__w_pdfjs_require__2(9),fastKey=__w_pdfjs_require__2(98).fastKey,InternalStateModule=__w_pdfjs_require__2(53),setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor;module2.exports={getConstructor:function(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var Constructor=wrapper(function(that,iterable){anInstance(that,Prototype),setInternalState(that,{type:CONSTRUCTOR_NAME,index:create(null),first:void 0,last:void 0,size:0}),DESCRIPTORS||(that.size=0),iterable!=null&&iterate(iterable,that[ADDER],{that,AS_ENTRIES:IS_MAP})}),Prototype=Constructor.prototype,getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME),define=__name(function(that,key,value){var state=getInternalState(that),entry=getEntry(that,key),previous,index;return entry?entry.value=value:(state.last=entry={index:index=fastKey(key,!0),key,value,previous:previous=state.last,next:void 0,removed:!1},state.first||(state.first=entry),previous&&(previous.next=entry),DESCRIPTORS?state.size++:that.size++,index!=="F"&&(state.index[index]=entry)),that},"define"),getEntry=__name(function(that,key){var state=getInternalState(that),index=fastKey(key),entry;if(index!=="F")return state.index[index];for(entry=state.first;entry;entry=entry.next)if(entry.key==key)return entry},"getEntry");return defineBuiltIns(Prototype,{clear:__name(__name2(function(){for(var that=this,state=getInternalState(that),data=state.index,entry=state.first;entry;)entry.removed=!0,entry.previous&&(entry.previous=entry.previous.next=void 0),delete data[entry.index],entry=entry.next;state.first=state.last=void 0,DESCRIPTORS?state.size=0:that.size=0},"clear"),"clear"),delete:function(key){var that=this,state=getInternalState(that),entry=getEntry(that,key);if(entry){var next=entry.next,prev=entry.previous;delete state.index[entry.index],entry.removed=!0,prev&&(prev.next=next),next&&(next.previous=prev),state.first==entry&&(state.first=next),state.last==entry&&(state.last=prev),DESCRIPTORS?state.size--:that.size--}return!!entry},forEach:__name(__name2(function(callbackfn){for(var state=getInternalState(this),boundFunction=bind(callbackfn,arguments.length>1?arguments[1]:void 0),entry;entry=entry?entry.next:state.first;)for(boundFunction(entry.value,entry.key,this);entry&&entry.removed;)entry=entry.previous},"forEach"),"forEach"),has:__name(__name2(function(key){return!!getEntry(this,key)},"has"),"has")}),defineBuiltIns(Prototype,IS_MAP?{get:__name(__name2(function(key){var entry=getEntry(this,key);return entry&&entry.value},"get"),"get"),set:__name(__name2(function(key,value){return define(this,key===0?0:key,value)},"set"),"set")}:{add:__name(__name2(function(value){return define(this,value=value===0?0:value,value)},"add"),"add")}),DESCRIPTORS&&defineProperty(Prototype,"size",{get:function(){return getInternalState(this).size}}),Constructor},setStrong:function(Constructor,CONSTRUCTOR_NAME,IS_MAP){var ITERATOR_NAME=CONSTRUCTOR_NAME+" Iterator",getInternalCollectionState=internalStateGetterFor(CONSTRUCTOR_NAME),getInternalIteratorState=internalStateGetterFor(ITERATOR_NAME);defineIterator(Constructor,CONSTRUCTOR_NAME,function(iterated,kind){setInternalState(this,{type:ITERATOR_NAME,target:iterated,state:getInternalCollectionState(iterated),kind,last:void 0})},function(){for(var state=getInternalIteratorState(this),kind=state.kind,entry=state.last;entry&&entry.removed;)entry=entry.previous;return!state.target||!(state.last=entry=entry?entry.next:state.state.first)?(state.target=void 0,{value:void 0,done:!0}):kind=="keys"?{value:entry.key,done:!1}:kind=="values"?{value:entry.value,done:!1}:{value:[entry.key,entry.value],done:!1}},IS_MAP?"entries":"values",!IS_MAP,!0),setSpecies(CONSTRUCTOR_NAME)}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var defineBuiltIn=__w_pdfjs_require__2(49);module2.exports=function(target,src,options){for(var key in src)defineBuiltIn(target,key,src[key],options);return target}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var getBuiltIn=__w_pdfjs_require__2(25),definePropertyModule=__w_pdfjs_require__2(46),wellKnownSymbol=__w_pdfjs_require__2(35),DESCRIPTORS=__w_pdfjs_require__2(9),SPECIES=wellKnownSymbol("species");module2.exports=function(CONSTRUCTOR_NAME){var Constructor=getBuiltIn(CONSTRUCTOR_NAME),defineProperty=definePropertyModule.f;DESCRIPTORS&&Constructor&&!Constructor[SPECIES]&&defineProperty(Constructor,SPECIES,{configurable:!0,get:function(){return this}})}},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{__w_pdfjs_require__2(118)},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var collection=__w_pdfjs_require__2(97),collectionStrong=__w_pdfjs_require__2(114);collection("Set",function(init){return __name(__name2(function(){return init(this,arguments.length?arguments[0]:void 0)},"Set2"),"Set")},collectionStrong)},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var IS_PURE=__w_pdfjs_require__2(37),$=__w_pdfjs_require__2(6),global2=__w_pdfjs_require__2(7),getBuiltin=__w_pdfjs_require__2(25),uncurryThis=__w_pdfjs_require__2(17),fails=__w_pdfjs_require__2(10),uid=__w_pdfjs_require__2(42),isCallable=__w_pdfjs_require__2(23),isConstructor=__w_pdfjs_require__2(120),isObject=__w_pdfjs_require__2(22),isSymbol=__w_pdfjs_require__2(24),iterate=__w_pdfjs_require__2(105),anObject=__w_pdfjs_require__2(48),classof=__w_pdfjs_require__2(80),hasOwn=__w_pdfjs_require__2(40),createProperty=__w_pdfjs_require__2(101),createNonEnumerableProperty=__w_pdfjs_require__2(45),lengthOfArrayLike=__w_pdfjs_require__2(65),validateArgumentsLength=__w_pdfjs_require__2(121),getRegExpFlags=__w_pdfjs_require__2(122),ERROR_STACK_INSTALLABLE=__w_pdfjs_require__2(124),V8=__w_pdfjs_require__2(29),IS_BROWSER=__w_pdfjs_require__2(125),IS_DENO=__w_pdfjs_require__2(126),IS_NODE=__w_pdfjs_require__2(127),Object2=global2.Object,Date2=global2.Date,Error2=global2.Error,EvalError=global2.EvalError,RangeError2=global2.RangeError,ReferenceError2=global2.ReferenceError,SyntaxError=global2.SyntaxError,TypeError2=global2.TypeError,URIError=global2.URIError,PerformanceMark=global2.PerformanceMark,WebAssembly=global2.WebAssembly,CompileError=WebAssembly&&WebAssembly.CompileError||Error2,LinkError=WebAssembly&&WebAssembly.LinkError||Error2,RuntimeError=WebAssembly&&WebAssembly.RuntimeError||Error2,DOMException2=getBuiltin("DOMException"),Set2=getBuiltin("Set"),Map2=getBuiltin("Map"),MapPrototype=Map2.prototype,mapHas=uncurryThis(MapPrototype.has),mapGet=uncurryThis(MapPrototype.get),mapSet=uncurryThis(MapPrototype.set),setAdd=uncurryThis(Set2.prototype.add),objectKeys=getBuiltin("Object","keys"),push=uncurryThis([].push),booleanValueOf=uncurryThis((!0).valueOf),numberValueOf=uncurryThis(1 .valueOf),stringValueOf=uncurryThis("".valueOf),getTime=uncurryThis(Date2.prototype.getTime),PERFORMANCE_MARK=uid("structuredClone"),DATA_CLONE_ERROR="DataCloneError",TRANSFERRING="Transferring",checkBasicSemantic=__name(function(structuredCloneImplementation){return!fails(function(){var set1=new global2.Set([7]),set2=structuredCloneImplementation(set1),number=structuredCloneImplementation(Object2(7));return set2==set1||!set2.has(7)||typeof number!="object"||number!=7})&&structuredCloneImplementation},"checkBasicSemantic"),checkErrorsCloning=__name(function(structuredCloneImplementation,$Error){return!fails(function(){var error=new $Error,test=structuredCloneImplementation({a:error,b:error});return!(test&&test.a===test.b&&test.a instanceof $Error&&test.a.stack===error.stack)})},"checkErrorsCloning"),checkNewErrorsCloningSemantic=__name(function(structuredCloneImplementation){return!fails(function(){var test=structuredCloneImplementation(new global2.AggregateError([1],PERFORMANCE_MARK,{cause:3}));return test.name!="AggregateError"||test.errors[0]!=1||test.message!=PERFORMANCE_MARK||test.cause!=3})},"checkNewErrorsCloningSemantic"),nativeStructuredClone=global2.structuredClone,FORCED_REPLACEMENT=IS_PURE||!checkErrorsCloning(nativeStructuredClone,Error2)||!checkErrorsCloning(nativeStructuredClone,DOMException2)||!checkNewErrorsCloningSemantic(nativeStructuredClone),structuredCloneFromMark=!nativeStructuredClone&&checkBasicSemantic(function(value){return new PerformanceMark(PERFORMANCE_MARK,{detail:value}).detail}),nativeRestrictedStructuredClone=checkBasicSemantic(nativeStructuredClone)||structuredCloneFromMark,throwUncloneable=__name(function(type){throw new DOMException2("Uncloneable type: "+type,DATA_CLONE_ERROR)},"throwUncloneable"),throwUnpolyfillable=__name(function(type,kind){throw new DOMException2((kind||"Cloning")+" of "+type+" cannot be properly polyfilled in this engine",DATA_CLONE_ERROR)},"throwUnpolyfillable"),structuredCloneInternal=__name(function(value,map){if(isSymbol(value)&&throwUncloneable("Symbol"),!isObject(value))return value;if(map){if(mapHas(map,value))return mapGet(map,value)}else map=new Map2;var type=classof(value),deep=!1,C,name,cloned,dataTransfer,i,length,keys,key,source,target;switch(type){case"Array":cloned=[],deep=!0;break;case"Object":cloned={},deep=!0;break;case"Map":cloned=new Map2,deep=!0;break;case"Set":cloned=new Set2,deep=!0;break;case"RegExp":cloned=new RegExp(value.source,getRegExpFlags(value));break;case"Error":switch(name=value.name,name){case"AggregateError":cloned=getBuiltin("AggregateError")([]);break;case"EvalError":cloned=EvalError();break;case"RangeError":cloned=RangeError2();break;case"ReferenceError":cloned=ReferenceError2();break;case"SyntaxError":cloned=SyntaxError();break;case"TypeError":cloned=TypeError2();break;case"URIError":cloned=URIError();break;case"CompileError":cloned=CompileError();break;case"LinkError":cloned=LinkError();break;case"RuntimeError":cloned=RuntimeError();break;default:cloned=Error2()}deep=!0;break;case"DOMException":cloned=new DOMException2(value.message,value.name),deep=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":C=global2[type],isObject(C)||throwUnpolyfillable(type),cloned=new C(structuredCloneInternal(value.buffer,map),value.byteOffset,type==="DataView"?value.byteLength:value.length);break;case"DOMQuad":try{cloned=new DOMQuad(structuredCloneInternal(value.p1,map),structuredCloneInternal(value.p2,map),structuredCloneInternal(value.p3,map),structuredCloneInternal(value.p4,map))}catch{nativeRestrictedStructuredClone?cloned=nativeRestrictedStructuredClone(value):throwUnpolyfillable(type)}break;case"FileList":if(C=global2.DataTransfer,isConstructor(C)){for(dataTransfer=new C,i=0,length=lengthOfArrayLike(value);i<length;i++)dataTransfer.items.add(structuredCloneInternal(value[i],map));cloned=dataTransfer.files}else nativeRestrictedStructuredClone?cloned=nativeRestrictedStructuredClone(value):throwUnpolyfillable(type);break;case"ImageData":try{cloned=new ImageData(structuredCloneInternal(value.data,map),value.width,value.height,{colorSpace:value.colorSpace})}catch{nativeRestrictedStructuredClone?cloned=nativeRestrictedStructuredClone(value):throwUnpolyfillable(type)}break;default:if(nativeRestrictedStructuredClone)cloned=nativeRestrictedStructuredClone(value);else switch(type){case"BigInt":cloned=Object2(value.valueOf());break;case"Boolean":cloned=Object2(booleanValueOf(value));break;case"Number":cloned=Object2(numberValueOf(value));break;case"String":cloned=Object2(stringValueOf(value));break;case"Date":cloned=new Date2(getTime(value));break;case"ArrayBuffer":C=global2.DataView,!C&&typeof value.slice!="function"&&throwUnpolyfillable(type);try{if(typeof value.slice=="function")cloned=value.slice(0);else for(length=value.byteLength,cloned=new ArrayBuffer(length),source=new C(value),target=new C(cloned),i=0;i<length;i++)target.setUint8(i,source.getUint8(i))}catch{throw new DOMException2("ArrayBuffer is detached",DATA_CLONE_ERROR)}break;case"SharedArrayBuffer":cloned=value;break;case"Blob":try{cloned=value.slice(0,value.size,value.type)}catch{throwUnpolyfillable(type)}break;case"DOMPoint":case"DOMPointReadOnly":C=global2[type];try{cloned=C.fromPoint?C.fromPoint(value):new C(value.x,value.y,value.z,value.w)}catch{throwUnpolyfillable(type)}break;case"DOMRect":case"DOMRectReadOnly":C=global2[type];try{cloned=C.fromRect?C.fromRect(value):new C(value.x,value.y,value.width,value.height)}catch{throwUnpolyfillable(type)}break;case"DOMMatrix":case"DOMMatrixReadOnly":C=global2[type];try{cloned=C.fromMatrix?C.fromMatrix(value):new C(value)}catch{throwUnpolyfillable(type)}break;case"AudioData":case"VideoFrame":isCallable(value.clone)||throwUnpolyfillable(type);try{cloned=value.clone()}catch{throwUncloneable(type)}break;case"File":try{cloned=new File([value],value.name,value)}catch{throwUnpolyfillable(type)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":throwUnpolyfillable(type);default:throwUncloneable(type)}}if(mapSet(map,value,cloned),deep)switch(type){case"Array":case"Object":for(keys=objectKeys(value),i=0,length=lengthOfArrayLike(keys);i<length;i++)key=keys[i],createProperty(cloned,key,structuredCloneInternal(value[key],map));break;case"Map":value.forEach(function(v,k){mapSet(cloned,structuredCloneInternal(k,map),structuredCloneInternal(v,map))});break;case"Set":value.forEach(function(v){setAdd(cloned,structuredCloneInternal(v,map))});break;case"Error":createNonEnumerableProperty(cloned,"message",structuredCloneInternal(value.message,map)),hasOwn(value,"cause")&&createNonEnumerableProperty(cloned,"cause",structuredCloneInternal(value.cause,map)),name=="AggregateError"&&(cloned.errors=structuredCloneInternal(value.errors,map));case"DOMException":ERROR_STACK_INSTALLABLE&&createNonEnumerableProperty(cloned,"stack",structuredCloneInternal(value.stack,map))}return cloned},"structuredCloneInternal"),PROPER_TRANSFER=nativeStructuredClone&&!fails(function(){if(IS_DENO&&V8>92||IS_NODE&&V8>94||IS_BROWSER&&V8>97)return!1;var buffer=new ArrayBuffer(8),clone=nativeStructuredClone(buffer,{transfer:[buffer]});return buffer.byteLength!=0||clone.byteLength!=8}),tryToTransfer=__name(function(rawTransfer,map){if(!isObject(rawTransfer))throw TypeError2("Transfer option cannot be converted to a sequence");var transfer=[];iterate(rawTransfer,function(value2){push(transfer,anObject(value2))});var i=0,length=lengthOfArrayLike(transfer),value,type,C,transferredArray,transferred,canvas,context;if(PROPER_TRANSFER)for(transferredArray=nativeStructuredClone(transfer,{transfer});i<length;)mapSet(map,transfer[i],transferredArray[i++]);else for(;i<length;){if(value=transfer[i++],mapHas(map,value))throw new DOMException2("Duplicate transferable",DATA_CLONE_ERROR);switch(type=classof(value),type){case"ImageBitmap":C=global2.OffscreenCanvas,isConstructor(C)||throwUnpolyfillable(type,TRANSFERRING);try{canvas=new C(value.width,value.height),context=canvas.getContext("bitmaprenderer"),context.transferFromImageBitmap(value),transferred=canvas.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!isCallable(value.clone)||!isCallable(value.close))&&throwUnpolyfillable(type,TRANSFERRING);try{transferred=value.clone(),value.close()}catch{}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":throwUnpolyfillable(type,TRANSFERRING)}if(transferred===void 0)throw new DOMException2("This object cannot be transferred: "+type,DATA_CLONE_ERROR);mapSet(map,value,transferred)}},"tryToTransfer");$({global:!0,enumerable:!0,sham:!PROPER_TRANSFER,forced:FORCED_REPLACEMENT},{structuredClone:__name(__name2(function(value){var options=validateArgumentsLength(arguments.length,1)>1&&arguments[1]!=null?anObject(arguments[1]):void 0,transfer=options?options.transfer:void 0,map;return transfer!==void 0&&(map=new Map2,tryToTransfer(transfer,map)),structuredCloneInternal(value,map)},"structuredClone2"),"structuredClone")})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),fails=__w_pdfjs_require__2(10),isCallable=__w_pdfjs_require__2(23),classof=__w_pdfjs_require__2(80),getBuiltIn=__w_pdfjs_require__2(25),inspectSource=__w_pdfjs_require__2(52),noop=__name(function(){},"noop"),empty=[],construct=getBuiltIn("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec=uncurryThis(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.exec(noop),isConstructorModern=__name(__name2(function(argument){if(!isCallable(argument))return!1;try{return construct(noop,empty,argument),!0}catch{return!1}},"isConstructor"),"isConstructor"),isConstructorLegacy=__name(__name2(function(argument){if(!isCallable(argument))return!1;switch(classof(argument)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec(constructorRegExp,inspectSource(argument))}catch{return!0}},"isConstructor"),"isConstructor");isConstructorLegacy.sham=!0,module2.exports=!construct||fails(function(){var called;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern(function(){called=!0})||called})?isConstructorLegacy:isConstructorModern},module2=>{var $TypeError=TypeError;module2.exports=function(passed,required){if(passed<required)throw $TypeError("Not enough arguments");return passed}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var call=__w_pdfjs_require__2(11),hasOwn=__w_pdfjs_require__2(40),isPrototypeOf=__w_pdfjs_require__2(26),regExpFlags=__w_pdfjs_require__2(123),RegExpPrototype=RegExp.prototype;module2.exports=function(R){var flags=R.flags;return flags===void 0&&!("flags"in RegExpPrototype)&&!hasOwn(R,"flags")&&isPrototypeOf(RegExpPrototype,R)?call(regExpFlags,R):flags}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var anObject=__w_pdfjs_require__2(48);module2.exports=function(){var that=anObject(this),result="";return that.hasIndices&&(result+="d"),that.global&&(result+="g"),that.ignoreCase&&(result+="i"),that.multiline&&(result+="m"),that.dotAll&&(result+="s"),that.unicode&&(result+="u"),that.unicodeSets&&(result+="v"),that.sticky&&(result+="y"),result}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10),createPropertyDescriptor=__w_pdfjs_require__2(14);module2.exports=!fails(function(){var error=Error("a");return"stack"in error?(Object.defineProperty(error,"stack",createPropertyDescriptor(1,7)),error.stack!==7):!0})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var IS_DENO=__w_pdfjs_require__2(126),IS_NODE=__w_pdfjs_require__2(127);module2.exports=!IS_DENO&&!IS_NODE&&typeof window=="object"&&typeof document=="object"},module2=>{module2.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var classof=__w_pdfjs_require__2(18),global2=__w_pdfjs_require__2(7);module2.exports=classof(global2.process)=="process"},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7);module2.exports=global2},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(130),_display_utils=__w_pdfjs_require__(133),_font_loader=__w_pdfjs_require__(136),_canvas=__w_pdfjs_require__(137),_worker_options=__w_pdfjs_require__(140),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(141),_metadata=__w_pdfjs_require__(142),_optional_content_config=__w_pdfjs_require__(143),_transport_stream=__w_pdfjs_require__(144),_xfa_text=__w_pdfjs_require__(145);function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec,"_classPrivateMethodInitSpec"),__name(_classPrivateMethodInitSpec,"_classPrivateMethodInitSpec");function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet,"_classPrivateMethodGet"),__name(_classPrivateMethodGet,"_classPrivateMethodGet");function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec,"_classPrivateFieldInitSpec"),__name(_classPrivateFieldInitSpec,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration,"_checkPrivateRedeclaration"),__name(_checkPrivateRedeclaration,"_checkPrivateRedeclaration");function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");return _classApplyDescriptorSet(receiver,descriptor,value),value}__name2(_classPrivateFieldSet,"_classPrivateFieldSet"),__name(_classPrivateFieldSet,"_classPrivateFieldSet");function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor)}__name2(_classPrivateFieldGet,"_classPrivateFieldGet"),__name(_classPrivateFieldGet,"_classPrivateFieldGet");function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor,"_classExtractFieldDescriptor"),__name(_classExtractFieldDescriptor,"_classExtractFieldDescriptor");function _classStaticPrivateFieldSpecSet(receiver,classConstructor,descriptor,value){return _classCheckPrivateStaticAccess(receiver,classConstructor),_classCheckPrivateStaticFieldDescriptor(descriptor,"set"),_classApplyDescriptorSet(receiver,descriptor,value),value}__name2(_classStaticPrivateFieldSpecSet,"_classStaticPrivateFieldSpecSet"),__name(_classStaticPrivateFieldSpecSet,"_classStaticPrivateFieldSpecSet");function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet,"_classApplyDescriptorSet"),__name(_classApplyDescriptorSet,"_classApplyDescriptorSet");function _classStaticPrivateFieldSpecGet(receiver,classConstructor,descriptor){return _classCheckPrivateStaticAccess(receiver,classConstructor),_classCheckPrivateStaticFieldDescriptor(descriptor,"get"),_classApplyDescriptorGet(receiver,descriptor)}__name2(_classStaticPrivateFieldSpecGet,"_classStaticPrivateFieldSpecGet"),__name(_classStaticPrivateFieldSpecGet,"_classStaticPrivateFieldSpecGet");function _classCheckPrivateStaticFieldDescriptor(descriptor,action){if(descriptor===void 0)throw new TypeError("attempted to "+action+" private static field before its declaration")}__name2(_classCheckPrivateStaticFieldDescriptor,"_classCheckPrivateStaticFieldDescriptor"),__name(_classCheckPrivateStaticFieldDescriptor,"_classCheckPrivateStaticFieldDescriptor");function _classCheckPrivateStaticAccess(receiver,classConstructor){if(receiver!==classConstructor)throw new TypeError("Private static access of wrong provenance")}__name2(_classCheckPrivateStaticAccess,"_classCheckPrivateStaticAccess"),__name(_classCheckPrivateStaticAccess,"_classCheckPrivateStaticAccess");function _classApplyDescriptorGet(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet,"_classApplyDescriptorGet"),__name(_classApplyDescriptorGet,"_classApplyDescriptorGet");const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory,NodeCMapReaderFactory,NodeStandardFontDataFactory}=__w_pdfjs_require__(146);exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}let createPDFNetworkStream;function setPDFNetworkStreamFactory(pdfNetworkStreamFactory){createPDFNetworkStream=pdfNetworkStreamFactory}__name2(setPDFNetworkStreamFactory,"setPDFNetworkStreamFactory"),__name(setPDFNetworkStreamFactory,"setPDFNetworkStreamFactory");function getDocument(src){const task=new PDFDocumentLoadingTask;let source;if(typeof src=="string"||src instanceof URL)source={url:src};else if((0,_util.isArrayBuffer)(src))source={data:src};else if(src instanceof PDFDataRangeTransport)source={range:src};else{if(typeof src!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!src.url&&!src.data&&!src.range)throw new Error("Invalid parameter object: need either .data, .range or .url");source=src}const params=Object.create(null);let rangeTransport=null,worker2=null;for(const key in source){const value=source[key];switch(key){case"url":if(typeof window<"u")try{params[key]=new URL(value,window.location).href;continue}catch(ex){(0,_util.warn)(`Cannot create valid URL: "${ex}".`)}else if(typeof value=="string"||value instanceof URL){params[key]=value.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":rangeTransport=value;continue;case"worker":worker2=value;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&value instanceof Buffer)params[key]=new Uint8Array(value);else{if(value instanceof Uint8Array)break;if(typeof value=="string")params[key]=(0,_util.stringToBytes)(value);else if(typeof value=="object"&&value!==null&&!isNaN(value.length))params[key]=new Uint8Array(value);else if((0,_util.isArrayBuffer)(value))params[key]=new Uint8Array(value);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}params[key]=value}if(params.CMapReaderFactory=params.CMapReaderFactory||DefaultCMapReaderFactory,params.StandardFontDataFactory=params.StandardFontDataFactory||DefaultStandardFontDataFactory,params.ignoreErrors=params.stopAtErrors!==!0,params.fontExtraProperties=params.fontExtraProperties===!0,params.pdfBug=params.pdfBug===!0,params.enableXfa=params.enableXfa===!0,(!Number.isInteger(params.rangeChunkSize)||params.rangeChunkSize<1)&&(params.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof params.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(params.docBaseUrl))&&(params.docBaseUrl=null),(!Number.isInteger(params.maxImageSize)||params.maxImageSize<-1)&&(params.maxImageSize=-1),typeof params.cMapUrl!="string"&&(params.cMapUrl=null),typeof params.standardFontDataUrl!="string"&&(params.standardFontDataUrl=null),typeof params.useWorkerFetch!="boolean"&&(params.useWorkerFetch=params.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&params.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof params.isEvalSupported!="boolean"&&(params.isEvalSupported=!0),typeof params.disableFontFace!="boolean"&&(params.disableFontFace=_is_node.isNodeJS),typeof params.useSystemFonts!="boolean"&&(params.useSystemFonts=!_is_node.isNodeJS&&!params.disableFontFace),(typeof params.ownerDocument!="object"||params.ownerDocument===null)&&(params.ownerDocument=globalThis.document),typeof params.disableRange!="boolean"&&(params.disableRange=!1),typeof params.disableStream!="boolean"&&(params.disableStream=!1),typeof params.disableAutoFetch!="boolean"&&(params.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(params.verbosity),!worker2){const workerParams={verbosity:params.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};worker2=workerParams.port?PDFWorker.fromPort(workerParams):new PDFWorker(workerParams),task._worker=worker2}const docId=task.docId;return worker2.promise.then(function(){if(task.destroyed)throw new Error("Loading aborted");const workerIdPromise=_fetchDocument(worker2,params,rangeTransport,docId),networkStreamPromise=new Promise(function(resolve){let networkStream;rangeTransport?networkStream=new _transport_stream.PDFDataTransportStream({length:params.length,initialData:params.initialData,progressiveDone:params.progressiveDone,contentDispositionFilename:params.contentDispositionFilename,disableRange:params.disableRange,disableStream:params.disableStream},rangeTransport):params.data||(networkStream=createPDFNetworkStream({url:params.url,length:params.length,httpHeaders:params.httpHeaders,withCredentials:params.withCredentials,rangeChunkSize:params.rangeChunkSize,disableRange:params.disableRange,disableStream:params.disableStream})),resolve(networkStream)});return Promise.all([workerIdPromise,networkStreamPromise]).then(function(_ref){let[workerId,networkStream]=_ref;if(task.destroyed)throw new Error("Loading aborted");const messageHandler=new _message_handler.MessageHandler(docId,workerId,worker2.port),transport=new WorkerTransport(messageHandler,task,networkStream,params);task._transport=transport,messageHandler.send("Ready",null)})}).catch(task._capability.reject),task}__name2(getDocument,"getDocument"),__name(getDocument,"getDocument");async function _fetchDocument(worker2,source,pdfDataRangeTransport,docId){if(worker2.destroyed)throw new Error("Worker was destroyed");pdfDataRangeTransport&&(source.length=pdfDataRangeTransport.length,source.initialData=pdfDataRangeTransport.initialData,source.progressiveDone=pdfDataRangeTransport.progressiveDone,source.contentDispositionFilename=pdfDataRangeTransport.contentDispositionFilename);const workerId=await worker2.messageHandler.sendWithPromise("GetDocRequest",{docId,apiVersion:"2.16.105",source:{data:source.data,url:source.url,password:source.password,disableAutoFetch:source.disableAutoFetch,rangeChunkSize:source.rangeChunkSize,length:source.length},maxImageSize:source.maxImageSize,disableFontFace:source.disableFontFace,docBaseUrl:source.docBaseUrl,ignoreErrors:source.ignoreErrors,isEvalSupported:source.isEvalSupported,fontExtraProperties:source.fontExtraProperties,enableXfa:source.enableXfa,useSystemFonts:source.useSystemFonts,cMapUrl:source.useWorkerFetch?source.cMapUrl:null,standardFontDataUrl:source.useWorkerFetch?source.standardFontDataUrl:null});if(source.data&&(source.data=null),worker2.destroyed)throw new Error("Worker was destroyed");return workerId}__name2(_fetchDocument,"_fetchDocument"),__name(_fetchDocument,"_fetchDocument");const _PDFDocumentLoadingTask=class _PDFDocumentLoadingTask2{static{__name2(this,"_PDFDocumentLoadingTask")}constructor(){var _PDFDocumentLoadingTa,_PDFDocumentLoadingTa2;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(_PDFDocumentLoadingTask2,_PDFDocumentLoadingTask2,_docId,(_PDFDocumentLoadingTa=_classStaticPrivateFieldSpecGet(_PDFDocumentLoadingTask2,_PDFDocumentLoadingTask2,_docId),_PDFDocumentLoadingTa2=_PDFDocumentLoadingTa++,_PDFDocumentLoadingTa)),_PDFDocumentLoadingTa2}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var _this$_transport;this.destroyed=!0,await((_this$_transport=this._transport)===null||_this$_transport===void 0?void 0:_this$_transport.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};__name(_PDFDocumentLoadingTask,"PDFDocumentLoadingTask");let PDFDocumentLoadingTask=_PDFDocumentLoadingTask;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:!0,value:0};const _PDFDataRangeTransport=class{static{__name2(this,"_PDFDataRangeTransport")}constructor(length,initialData){let progressiveDone=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,contentDispositionFilename=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=length,this.initialData=initialData,this.progressiveDone=progressiveDone,this.contentDispositionFilename=contentDispositionFilename,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(listener){this._rangeListeners.push(listener)}addProgressListener(listener){this._progressListeners.push(listener)}addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener)}addProgressiveDoneListener(listener){this._progressiveDoneListeners.push(listener)}onDataRange(begin,chunk){for(const listener of this._rangeListeners)listener(begin,chunk)}onDataProgress(loaded,total){this._readyCapability.promise.then(()=>{for(const listener of this._progressListeners)listener(loaded,total)})}onDataProgressiveRead(chunk){this._readyCapability.promise.then(()=>{for(const listener of this._progressiveReadListeners)listener(chunk)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const listener of this._progressiveDoneListeners)listener()})}transportReady(){this._readyCapability.resolve()}requestDataRange(begin,end){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};__name(_PDFDataRangeTransport,"PDFDataRangeTransport");let PDFDataRangeTransport=_PDFDataRangeTransport;exports.PDFDataRangeTransport=PDFDataRangeTransport;const _PDFDocumentProxy=class{static{__name2(this,"_PDFDocumentProxy")}constructor(pdfInfo,transport){this._pdfInfo=pdfInfo,this._transport=transport,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(pageNumber){return this._transport.getPage(pageNumber)}getPageIndex(ref){return this._transport.getPageIndex(ref)}getDestinations(){return this._transport.getDestinations()}getDestination(id){return this._transport.getDestination(id)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let keepLoadedFonts=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(keepLoadedFonts||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}};__name(_PDFDocumentProxy,"PDFDocumentProxy");let PDFDocumentProxy=_PDFDocumentProxy;exports.PDFDocumentProxy=PDFDocumentProxy;const _PDFPageProxy=class{static{__name2(this,"_PDFPageProxy")}constructor(pageIndex,pageInfo,transport,ownerDocument){let pdfBug=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;this._pageIndex=pageIndex,this._pageInfo=pageInfo,this._ownerDocument=ownerDocument,this._transport=transport,this._stats=pdfBug?new _display_utils.StatTimer:null,this._pdfBug=pdfBug,this.commonObjs=transport.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale,rotation=this.rotate,offsetX=0,offsetY=0,dontFlip=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale,rotation,offsetX,offsetY,dontFlip})}getAnnotations(){let{intent="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const intentArgs=this._transport.getRenderingIntent(intent);let promise=this._annotationPromises.get(intentArgs.cacheKey);return promise||(promise=this._transport.getAnnotations(this._pageIndex,intentArgs.renderingIntent),this._annotationPromises.set(intentArgs.cacheKey,promise),promise=promise.then(annotations=>{for(const annotation of annotations)annotation.titleObj!==void 0&&Object.defineProperty(annotation,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),annotation.titleObj.str}}),annotation.contentsObj!==void 0&&Object.defineProperty(annotation,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),annotation.contentsObj.str}});return annotations})),promise}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var _this$_transport$_htm;return((_this$_transport$_htm=this._transport._htmlForXfa)===null||_this$_transport$_htm===void 0?void 0:_this$_transport$_htm.children[this._pageIndex])||null}render(_ref2){var _arguments$,_arguments$2,_intentState;let{canvasContext,viewport,intent="display",annotationMode=_util.AnnotationMode.ENABLE,transform=null,imageLayer=null,canvasFactory=null,background=null,optionalContentConfigPromise=null,annotationCanvasMap=null,pageColors=null,printAnnotationStorage=null}=_ref2;((_arguments$=arguments[0])===null||_arguments$===void 0?void 0:_arguments$.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&annotationMode===_util.AnnotationMode.ENABLE&&(annotationMode=_util.AnnotationMode.ENABLE_FORMS)),((_arguments$2=arguments[0])===null||_arguments$2===void 0?void 0:_arguments$2.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&annotationMode===_util.AnnotationMode.ENABLE&&(annotationMode=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage);this.pendingCleanup=!1,optionalContentConfigPromise||(optionalContentConfigPromise=this._transport.getOptionalContentConfig());let intentState=this._intentStates.get(intentArgs.cacheKey);intentState||(intentState=Object.create(null),this._intentStates.set(intentArgs.cacheKey,intentState)),intentState.streamReaderCancelTimeout&&(clearTimeout(intentState.streamReaderCancelTimeout),intentState.streamReaderCancelTimeout=null);const canvasFactoryInstance=canvasFactory||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),intentPrint=!!(intentArgs.renderingIntent&_util.RenderingIntentFlag.PRINT);intentState.displayReadyCapability||(intentState.displayReadyCapability=(0,_util.createPromiseCapability)(),intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(intentArgs));const complete=__name(error=>{intentState.renderTasks.delete(internalRenderTask),(this.cleanupAfterRender||intentPrint)&&(this.pendingCleanup=!0),this._tryCleanup(),error?(internalRenderTask.capability.reject(error),this._abortOperatorList({intentState,reason:error instanceof Error?error:new Error(error)})):internalRenderTask.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},"complete"),internalRenderTask=new InternalRenderTask({callback:complete,params:{canvasContext,viewport,transform,imageLayer,background},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap,operatorList:intentState.operatorList,pageIndex:this._pageIndex,canvasFactory:canvasFactoryInstance,useRequestAnimationFrame:!intentPrint,pdfBug:this._pdfBug,pageColors});((_intentState=intentState).renderTasks||(_intentState.renderTasks=new Set)).add(internalRenderTask);const renderTask=internalRenderTask.task;return Promise.all([intentState.displayReadyCapability.promise,optionalContentConfigPromise]).then(_ref3=>{let[transparency,optionalContentConfig]=_ref3;if(this.pendingCleanup){complete();return}this._stats&&this._stats.time("Rendering"),internalRenderTask.initializeGraphics({transparency,optionalContentConfig}),internalRenderTask.operatorListChanged()}).catch(complete),renderTask}getOperatorList(){let{intent="display",annotationMode=_util.AnnotationMode.ENABLE,printAnnotationStorage=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function operatorListChanged(){intentState.operatorList.lastChunk&&(intentState.opListReadCapability.resolve(intentState.operatorList),intentState.renderTasks.delete(opListTask))}__name2(operatorListChanged,"operatorListChanged"),__name(operatorListChanged,"operatorListChanged");const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage,!0);let intentState=this._intentStates.get(intentArgs.cacheKey);intentState||(intentState=Object.create(null),this._intentStates.set(intentArgs.cacheKey,intentState));let opListTask;if(!intentState.opListReadCapability){var _intentState2;opListTask=Object.create(null),opListTask.operatorListChanged=operatorListChanged,intentState.opListReadCapability=(0,_util.createPromiseCapability)(),((_intentState2=intentState).renderTasks||(_intentState2.renderTasks=new Set)).add(opListTask),intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(intentArgs)}return intentState.opListReadCapability.promise}streamTextContent(){let{disableCombineTextItems=!1,includeMarkedContent=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const TEXT_CONTENT_CHUNK_SIZE=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:disableCombineTextItems!==!0,includeMarkedContent:includeMarkedContent===!0},{highWaterMark:TEXT_CONTENT_CHUNK_SIZE,size(textContent){return textContent.items.length}})}getTextContent(){let params=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(xfa=>_xfa_text.XfaText.textContent(xfa));const readableStream=this.streamTextContent(params);return new Promise(function(resolve,reject){function pump(){reader.read().then(function(_ref4){let{value,done}=_ref4;if(done){resolve(textContent);return}Object.assign(textContent.styles,value.styles),textContent.items.push(...value.items),pump()},reject)}__name2(pump,"pump"),__name(pump,"pump");const reader=readableStream.getReader(),textContent={items:[],styles:Object.create(null)};pump()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const waitOn=[];for(const intentState of this._intentStates.values())if(this._abortOperatorList({intentState,reason:new Error("Page was destroyed."),force:!0}),!intentState.opListReadCapability)for(const internalRenderTask of intentState.renderTasks)waitOn.push(internalRenderTask.completed),internalRenderTask.cancel();this.objs.clear();for(const bitmap of this._bitmaps)bitmap.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(waitOn)}cleanup(){let resetStats=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.pendingCleanup=!0,this._tryCleanup(resetStats)}_tryCleanup(){let resetStats=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.pendingCleanup)return!1;for(const{renderTasks,operatorList}of this._intentStates.values())if(renderTasks.size>0||!operatorList.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,resetStats&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const bitmap of this._bitmaps)bitmap.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(transparency,cacheKey){const intentState=this._intentStates.get(cacheKey);intentState&&(this._stats&&this._stats.timeEnd("Page Request"),intentState.displayReadyCapability&&intentState.displayReadyCapability.resolve(transparency))}_renderPageChunk(operatorListChunk,intentState){for(let i=0,ii=operatorListChunk.length;i<ii;i++)intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]),intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);intentState.operatorList.lastChunk=operatorListChunk.lastChunk,intentState.operatorList.separateAnnots=operatorListChunk.separateAnnots;for(const internalRenderTask of intentState.renderTasks)internalRenderTask.operatorListChanged();operatorListChunk.lastChunk&&this._tryCleanup()}_pumpOperatorList(_ref5){let{renderingIntent,cacheKey,annotationStorageMap}=_ref5;const reader=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:renderingIntent,cacheKey,annotationStorage:annotationStorageMap}).getReader(),intentState=this._intentStates.get(cacheKey);intentState.streamReader=reader;const pump=__name(()=>{reader.read().then(_ref6=>{let{value,done}=_ref6;if(done){intentState.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(value,intentState),pump())},reason=>{if(intentState.streamReader=null,!this._transport.destroyed){if(intentState.operatorList){intentState.operatorList.lastChunk=!0;for(const internalRenderTask of intentState.renderTasks)internalRenderTask.operatorListChanged();this._tryCleanup()}if(intentState.displayReadyCapability)intentState.displayReadyCapability.reject(reason);else if(intentState.opListReadCapability)intentState.opListReadCapability.reject(reason);else throw reason}})},"pump");pump()}_abortOperatorList(_ref7){let{intentState,reason,force=!1}=_ref7;if(intentState.streamReader){if(!force){if(intentState.renderTasks.size>0)return;if(reason instanceof _display_utils.RenderingCancelledException){intentState.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState,reason,force:!0}),intentState.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(intentState.streamReader.cancel(new _util.AbortException(reason.message)).catch(()=>{}),intentState.streamReader=null,!this._transport.destroyed){for(const[curCacheKey,curIntentState]of this._intentStates)if(curIntentState===intentState){this._intentStates.delete(curCacheKey);break}this.cleanup()}}}get stats(){return this._stats}};__name(_PDFPageProxy,"PDFPageProxy");let PDFPageProxy=_PDFPageProxy;exports.PDFPageProxy=PDFPageProxy;const _LoopbackPort=class{static{__name2(this,"_LoopbackPort")}constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(obj,transfers){const event={data:structuredClone(obj,transfers)};this._deferred.then(()=>{for(const listener of this._listeners)listener.call(this,event)})}addEventListener(name,listener){this._listeners.push(listener)}removeEventListener(name,listener){const i=this._listeners.indexOf(listener);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}};__name(_LoopbackPort,"LoopbackPort");let LoopbackPort=_LoopbackPort;exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){var _document,_document$currentScri;const pdfjsFilePath=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(baseUrl,otherUrl){let base;try{if(base=new URL(baseUrl),!base.origin||base.origin==="null")return!1}catch{return!1}const other=new URL(otherUrl,base);return base.origin===other.origin},PDFWorkerUtil.createCDNWrapper=function(url){const wrapper=`importScripts("${url}");`;return URL.createObjectURL(new Blob([wrapper]))}}const _PDFWorker=class __PDFWorker{static{__name2(this,"_PDFWorker")}constructor(){let{name=null,port=null,verbosity=(0,_util.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(port&&_classStaticPrivateFieldSpecGet(__PDFWorker,__PDFWorker,_workerPorts).has(port))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=name,this.destroyed=!1,this.verbosity=verbosity,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,port){_classStaticPrivateFieldSpecGet(__PDFWorker,__PDFWorker,_workerPorts).set(port,this),this._initializeFromPort(port);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(port){this._port=port,this._messageHandler=new _message_handler.MessageHandler("main","worker",port),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!__PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc}=__PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,workerSrc)||(workerSrc=PDFWorkerUtil.createCDNWrapper(new URL(workerSrc,window.location).href));const worker2=new Worker(workerSrc),messageHandler=new _message_handler.MessageHandler("main","worker",worker2),terminateEarly=__name(()=>{worker2.removeEventListener("error",onWorkerError),messageHandler.destroy(),worker2.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},"terminateEarly"),onWorkerError=__name(()=>{this._webWorker||terminateEarly()},"onWorkerError");worker2.addEventListener("error",onWorkerError),messageHandler.on("test",data=>{if(worker2.removeEventListener("error",onWorkerError),this.destroyed){terminateEarly();return}data?(this._messageHandler=messageHandler,this._port=worker2,this._webWorker=worker2,this._readyCapability.resolve(),messageHandler.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),messageHandler.destroy(),worker2.terminate())}),messageHandler.on("ready",data=>{if(worker2.removeEventListener("error",onWorkerError),this.destroyed){terminateEarly();return}try{sendTest()}catch{this._setupFakeWorker()}});const sendTest=__name(()=>{const testObj=new Uint8Array;messageHandler.send("test",testObj,[testObj.buffer])},"sendTest");sendTest();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),__PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const port=new LoopbackPort;this._port=port;const id=`fake${PDFWorkerUtil.fakeWorkerId++}`,workerHandler=new _message_handler.MessageHandler(id+"_worker",id,port);WorkerMessageHandler.setup(workerHandler,port);const messageHandler=new _message_handler.MessageHandler(id,id+"_worker",port);this._messageHandler=messageHandler,this._readyCapability.resolve(),messageHandler.send("configure",{verbosity:this.verbosity})}).catch(reason=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${reason.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(__PDFWorker,__PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(params){if(!(params!=null&&params.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,__PDFWorker,_workerPorts).has(params.port)?_classStaticPrivateFieldSpecGet(this,__PDFWorker,_workerPorts).get(params.port):new __PDFWorker(params)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var _globalThis$pdfjsWork;return((_globalThis$pdfjsWork=globalThis.pdfjsWorker)===null||_globalThis$pdfjsWork===void 0?void 0:_globalThis$pdfjsWork.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=__name(async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler},"loader");return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};__name(_PDFWorker,"PDFWorker");let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;var _workerPorts={writable:!0,value:new WeakMap};PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;const _WorkerTransport=class{static{__name2(this,"_WorkerTransport")}constructor(messageHandler,loadingTask,networkStream,params){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=messageHandler,this.loadingTask=loadingTask,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:loadingTask.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:params.ownerDocument,styleElement:params.styleElement}),this._params=params,params.useWorkerFetch||(this.CMapReaderFactory=new params.CMapReaderFactory({baseUrl:params.cMapUrl,isCompressed:params.cMapPacked}),this.StandardFontDataFactory=new params.StandardFontDataFactory({baseUrl:params.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=networkStream,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(intent){let annotationMode=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,printAnnotationStorage=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,isOpList=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,renderingIntent=_util.RenderingIntentFlag.DISPLAY,annotationMap=null;switch(intent){case"any":renderingIntent=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":renderingIntent=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${intent}`)}switch(annotationMode){case _util.AnnotationMode.DISABLE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,annotationMap=(renderingIntent&_util.RenderingIntentFlag.PRINT&&printAnnotationStorage instanceof _annotation_storage.PrintAnnotationStorage?printAnnotationStorage:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${annotationMode}`)}return isOpList&&(renderingIntent+=_util.RenderingIntentFlag.OPLIST),{renderingIntent,cacheKey:`${renderingIntent}_${_annotation_storage.AnnotationStorage.getHash(annotationMap)}`,annotationStorageMap:annotationMap}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const waitOn=[];for(const page of _classPrivateFieldGet(this,_pageCache).values())waitOn.push(page._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const terminated=this.messageHandler.sendWithPromise("Terminate",null);return waitOn.push(terminated),Promise.all(waitOn).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler,loadingTask}=this;messageHandler.on("GetReader",(data,sink)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=evt=>{this._lastProgress={loaded:evt.loaded,total:evt.total}},sink.onPull=()=>{this._fullReader.read().then(function(_ref8){let{value,done}=_ref8;if(done){sink.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(value),"GetReader - expected an ArrayBuffer."),sink.enqueue(new Uint8Array(value),1,[value])}).catch(reason=>{sink.error(reason)})},sink.onCancel=reason=>{this._fullReader.cancel(reason),sink.ready.catch(readyReason=>{if(!this.destroyed)throw readyReason})}}),messageHandler.on("ReaderHeadersReady",data=>{const headersCapability=(0,_util.createPromiseCapability)(),fullReader=this._fullReader;return fullReader.headersReady.then(()=>{if(!fullReader.isStreamingSupported||!fullReader.isRangeSupported){if(this._lastProgress){var _loadingTask$onProgre;(_loadingTask$onProgre=loadingTask.onProgress)===null||_loadingTask$onProgre===void 0||_loadingTask$onProgre.call(loadingTask,this._lastProgress)}fullReader.onProgress=evt=>{var _loadingTask$onProgre2;(_loadingTask$onProgre2=loadingTask.onProgress)===null||_loadingTask$onProgre2===void 0||_loadingTask$onProgre2.call(loadingTask,{loaded:evt.loaded,total:evt.total})}}headersCapability.resolve({isStreamingSupported:fullReader.isStreamingSupported,isRangeSupported:fullReader.isRangeSupported,contentLength:fullReader.contentLength})},headersCapability.reject),headersCapability.promise}),messageHandler.on("GetRangeReader",(data,sink)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const rangeReader=this._networkStream.getRangeReader(data.begin,data.end);if(!rangeReader){sink.close();return}sink.onPull=()=>{rangeReader.read().then(function(_ref9){let{value,done}=_ref9;if(done){sink.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(value),"GetRangeReader - expected an ArrayBuffer."),sink.enqueue(new Uint8Array(value),1,[value])}).catch(reason=>{sink.error(reason)})},sink.onCancel=reason=>{rangeReader.cancel(reason),sink.ready.catch(readyReason=>{if(!this.destroyed)throw readyReason})}}),messageHandler.on("GetDoc",_ref10=>{let{pdfInfo}=_ref10;this._numPages=pdfInfo.numPages,this._htmlForXfa=pdfInfo.htmlForXfa,delete pdfInfo.htmlForXfa,loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo,this))}),messageHandler.on("DocException",function(ex){let reason;switch(ex.name){case"PasswordException":reason=new _util.PasswordException(ex.message,ex.code);break;case"InvalidPDFException":reason=new _util.InvalidPDFException(ex.message);break;case"MissingPDFException":reason=new _util.MissingPDFException(ex.message);break;case"UnexpectedResponseException":reason=new _util.UnexpectedResponseException(ex.message,ex.status);break;case"UnknownErrorException":reason=new _util.UnknownErrorException(ex.message,ex.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}loadingTask._capability.reject(reason)}),messageHandler.on("PasswordRequest",exception=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),loadingTask.onPassword){const updatePassword=__name(password=>{password instanceof Error?this._passwordCapability.reject(password):this._passwordCapability.resolve({password})},"updatePassword");try{loadingTask.onPassword(updatePassword,exception.code)}catch(ex){this._passwordCapability.reject(ex)}}else this._passwordCapability.reject(new _util.PasswordException(exception.message,exception.code));return this._passwordCapability.promise}),messageHandler.on("DataLoaded",data=>{var _loadingTask$onProgre3;(_loadingTask$onProgre3=loadingTask.onProgress)===null||_loadingTask$onProgre3===void 0||_loadingTask$onProgre3.call(loadingTask,{loaded:data.length,total:data.length}),this.downloadInfoCapability.resolve(data)}),messageHandler.on("StartRenderPage",data=>{if(this.destroyed)return;_classPrivateFieldGet(this,_pageCache).get(data.pageIndex)._startRenderPage(data.transparency,data.cacheKey)}),messageHandler.on("commonobj",_ref11=>{var _globalThis$FontInspe;let[id,type,exportedData]=_ref11;if(!this.destroyed&&!this.commonObjs.has(id))switch(type){case"Font":const params=this._params;if("error"in exportedData){const exportedError=exportedData.error;(0,_util.warn)(`Error during font loading: ${exportedError}`),this.commonObjs.resolve(id,exportedError);break}let fontRegistry=null;params.pdfBug&&(_globalThis$FontInspe=globalThis.FontInspector)!==null&&_globalThis$FontInspe!==void 0&&_globalThis$FontInspe.enabled&&(fontRegistry={registerFont(font2,url){globalThis.FontInspector.fontAdded(font2,url)}});const font=new _font_loader.FontFaceObject(exportedData,{isEvalSupported:params.isEvalSupported,disableFontFace:params.disableFontFace,ignoreErrors:params.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry});this.fontLoader.bind(font).catch(reason=>messageHandler.sendWithPromise("FontFallback",{id})).finally(()=>{!params.fontExtraProperties&&font.data&&(font.data=null),this.commonObjs.resolve(id,font)});break;case"FontPath":case"Image":this.commonObjs.resolve(id,exportedData);break;default:throw new Error(`Got unknown common object type ${type}`)}}),messageHandler.on("obj",_ref12=>{let[id,pageIndex,type,imageData]=_ref12;if(this.destroyed)return;const pageProxy=_classPrivateFieldGet(this,_pageCache).get(pageIndex);if(!pageProxy.objs.has(id))switch(type){case"Image":pageProxy.objs.resolve(id,imageData);const MAX_IMAGE_SIZE_TO_STORE=8e6;if(imageData){let length;if(imageData.bitmap){const{bitmap,width,height}=imageData;length=width*height*4,pageProxy._bitmaps.add(bitmap)}else{var _imageData$data;length=((_imageData$data=imageData.data)===null||_imageData$data===void 0?void 0:_imageData$data.length)||0}length>MAX_IMAGE_SIZE_TO_STORE&&(pageProxy.cleanupAfterRender=!0)}break;case"Pattern":pageProxy.objs.resolve(id,imageData);break;default:throw new Error(`Got unknown object type ${type}`)}}),messageHandler.on("DocProgress",data=>{var _loadingTask$onProgre4;this.destroyed||(_loadingTask$onProgre4=loadingTask.onProgress)===null||_loadingTask$onProgre4===void 0||_loadingTask$onProgre4.call(loadingTask,{loaded:data.loaded,total:data.total})}),messageHandler.on("DocStats",data=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(data.streamTypes),fontTypes:Object.freeze(data.fontTypes)}))}),messageHandler.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),messageHandler.on("FetchBuiltInCMap",data=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(data):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),messageHandler.on("FetchStandardFontData",data=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(data):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature(_ref13){var _this$loadingTask$onU,_this$loadingTask;let{featureId}=_ref13;this.destroyed||(_this$loadingTask$onU=(_this$loadingTask=this.loadingTask).onUnsupportedFeature)===null||_this$loadingTask$onU===void 0||_this$loadingTask$onU.call(_this$loadingTask,featureId)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(pageNumber){if(!Number.isInteger(pageNumber)||pageNumber<=0||pageNumber>this._numPages)return Promise.reject(new Error("Invalid page request."));const pageIndex=pageNumber-1,cachedPromise=_classPrivateFieldGet(this,_pagePromises).get(pageIndex);if(cachedPromise)return cachedPromise;const promise=this.messageHandler.sendWithPromise("GetPage",{pageIndex}).then(pageInfo=>{if(this.destroyed)throw new Error("Transport destroyed");const page=new PDFPageProxy(pageIndex,pageInfo,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(pageIndex,page),page});return _classPrivateFieldGet(this,_pagePromises).set(pageIndex,promise),promise}getPageIndex(ref){return typeof ref!="object"||ref===null||!Number.isInteger(ref.num)||ref.num<0||!Number.isInteger(ref.gen)||ref.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:ref.num,gen:ref.gen})}getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex,intent})}saveDocument(){var _this$_fullReader$fil,_this$_fullReader;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(_this$_fullReader$fil=(_this$_fullReader=this._fullReader)===null||_this$_fullReader===void 0?void 0:_this$_fullReader.filename)!==null&&_this$_fullReader$fil!==void 0?_this$_fullReader$fil:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(id){return typeof id!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(pageIndex){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex})}getStructTree(pageIndex){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(results=>new _optional_content_config.OptionalContentConfig(results))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(results=>{var _this$_fullReader$fil2,_this$_fullReader2,_this$_fullReader$con,_this$_fullReader3;return{info:results[0],metadata:results[1]?new _metadata.Metadata(results[1]):null,contentDispositionFilename:(_this$_fullReader$fil2=(_this$_fullReader2=this._fullReader)===null||_this$_fullReader2===void 0?void 0:_this$_fullReader2.filename)!==null&&_this$_fullReader$fil2!==void 0?_this$_fullReader$fil2:null,contentLength:(_this$_fullReader$con=(_this$_fullReader3=this._fullReader)===null||_this$_fullReader3===void 0?void 0:_this$_fullReader3.contentLength)!==null&&_this$_fullReader$con!==void 0?_this$_fullReader$con:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let keepLoadedFonts=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const page of _classPrivateFieldGet(this,_pageCache).values())if(!page.cleanup())throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);this.commonObjs.clear(),keepLoadedFonts||this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const params=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:params.disableAutoFetch,enableXfa:params.enableXfa})}};__name(_WorkerTransport,"WorkerTransport");let WorkerTransport=_WorkerTransport;var _objs=new WeakMap,_ensureObj=new WeakSet;const _PDFObjects=class{static{__name2(this,"_PDFObjects")}constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(objId){let callback=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(callback){const obj2=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,objId);return obj2.capability.promise.then(()=>callback(obj2.data)),null}const obj=_classPrivateFieldGet(this,_objs)[objId];if(!(obj!=null&&obj.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${objId}.`);return obj.data}has(objId){const obj=_classPrivateFieldGet(this,_objs)[objId];return obj?.capability.settled||!1}resolve(objId){let data=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const obj=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,objId);obj.data=data,obj.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}};__name(_PDFObjects,"PDFObjects");let PDFObjects=_PDFObjects;function _ensureObj2(objId){const obj=_classPrivateFieldGet(this,_objs)[objId];return obj||(_classPrivateFieldGet(this,_objs)[objId]={capability:(0,_util.createPromiseCapability)(),data:null})}__name2(_ensureObj2,"_ensureObj2"),__name(_ensureObj2,"_ensureObj2");var _internalRenderTask=new WeakMap;const _RenderTask=class{static{__name2(this,"_RenderTask")}constructor(internalRenderTask){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,internalRenderTask),this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}get separateAnnots(){const{separateAnnots}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!separateAnnots)return!1;const{annotationCanvasMap}=_classPrivateFieldGet(this,_internalRenderTask);return separateAnnots.form||separateAnnots.canvas&&annotationCanvasMap?.size>0}};__name(_RenderTask,"RenderTask");let RenderTask=_RenderTask;exports.RenderTask=RenderTask;const _InternalRenderTask=class _InternalRenderTask2{static{__name2(this,"_InternalRenderTask")}constructor(_ref14){let{callback,params,objs,commonObjs,annotationCanvasMap,operatorList,pageIndex,canvasFactory,useRequestAnimationFrame=!1,pdfBug=!1,pageColors=null}=_ref14;this.callback=callback,this.params=params,this.objs=objs,this.commonObjs=commonObjs,this.annotationCanvasMap=annotationCanvasMap,this.operatorListIdx=null,this.operatorList=operatorList,this._pageIndex=pageIndex,this.canvasFactory=canvasFactory,this._pdfBug=pdfBug,this.pageColors=pageColors,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=useRequestAnimationFrame===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=params.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(_ref15){var _globalThis$StepperMa;let{transparency=!1,optionalContentConfig}=_ref15;if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(_InternalRenderTask2,_InternalRenderTask2,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(_InternalRenderTask2,_InternalRenderTask2,_canvasInUse).add(this._canvas)}this._pdfBug&&(_globalThis$StepperMa=globalThis.StepperManager)!==null&&_globalThis$StepperMa!==void 0&&_globalThis$StepperMa.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext,viewport,transform,imageLayer,background}=this.params;this.gfx=new _canvas.CanvasGraphics(canvasContext,this.commonObjs,this.objs,this.canvasFactory,imageLayer,optionalContentConfig,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform,viewport,transparency,background}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(){let error=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(_InternalRenderTask2,_InternalRenderTask2,_canvasInUse).delete(this._canvas),this.callback(error||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(_InternalRenderTask2,_InternalRenderTask2,_canvasInUse).delete(this._canvas),this.callback())))}};__name(_InternalRenderTask,"InternalRenderTask");let InternalRenderTask=_InternalRenderTask;var _canvasInUse={writable:!0,value:new WeakSet};const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PrintAnnotationStorage=exports2.AnnotationStorage=void 0;var _util2=__w_pdfjs_require__2(1),_editor=__w_pdfjs_require__2(131),_murmurhash=__w_pdfjs_require__2(135);function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");var _setModified=new WeakSet;const _AnnotationStorage=class{static{__name2(this,"_AnnotationStorage")}constructor(){_classPrivateMethodInitSpec2(this,_setModified),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(key,defaultValue){const value=this._storage.get(key);return value===void 0?defaultValue:Object.assign(defaultValue,value)}getRawValue(key){return this._storage.get(key)}remove(key){if(this._storage.delete(key),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const value of this._storage.values())if(value instanceof _editor.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(key,value){const obj=this._storage.get(key);let modified=!1;if(obj!==void 0)for(const[entry,val]of Object.entries(value))obj[entry]!==val&&(modified=!0,obj[entry]=val);else modified=!0,this._storage.set(key,value);modified&&_classPrivateMethodGet2(this,_setModified,_setModified2).call(this),value instanceof _editor.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(value.constructor._type)}has(key){return this._storage.has(key)}getAll(){return this._storage.size>0?(0,_util2.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(this._storage.size===0)return null;const clone=new Map;for(const[key,val]of this._storage){const serialized=val instanceof _editor.AnnotationEditor?val.serialize():val;serialized&&clone.set(key,serialized)}return clone}static getHash(map){if(!map)return"";const hash=new _murmurhash.MurmurHash3_64;for(const[key,val]of map)hash.update(`${key}:${JSON.stringify(val)}`);return hash.hexdigest()}};__name(_AnnotationStorage,"AnnotationStorage");let AnnotationStorage=_AnnotationStorage;exports2.AnnotationStorage=AnnotationStorage;function _setModified2(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}__name2(_setModified2,"_setModified2"),__name(_setModified2,"_setModified2");var _serializable=new WeakMap;const _PrintAnnotationStorage=class extends AnnotationStorage{static{__name2(this,"_PrintAnnotationStorage")}constructor(parent){super(),_classPrivateFieldInitSpec2(this,_serializable,{writable:!0,value:null}),_classPrivateFieldSet2(this,_serializable,structuredClone(parent.serializable))}get print(){(0,_util2.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return _classPrivateFieldGet2(this,_serializable)}};__name(_PrintAnnotationStorage,"PrintAnnotationStorage");let PrintAnnotationStorage=_PrintAnnotationStorage;exports2.PrintAnnotationStorage=PrintAnnotationStorage},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.AnnotationEditor=void 0;var _tools=__w_pdfjs_require__2(132),_util2=__w_pdfjs_require__2(1);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name2(_defineProperty,"_defineProperty"),__name(_defineProperty,"_defineProperty");function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");var _boundFocusin=new WeakMap,_boundFocusout=new WeakMap,_hasBeenSelected=new WeakMap,_isEditing=new WeakMap,_isInEditMode=new WeakMap,_zIndex=new WeakMap;const _AnnotationEditor=class _AnnotationEditor2{static{__name2(this,"_AnnotationEditor")}constructor(parameters){_classPrivateFieldInitSpec2(this,_boundFocusin,{writable:!0,value:this.focusin.bind(this)}),_classPrivateFieldInitSpec2(this,_boundFocusout,{writable:!0,value:this.focusout.bind(this)}),_classPrivateFieldInitSpec2(this,_hasBeenSelected,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_isEditing,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_isInEditMode,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_zIndex,{writable:!0,value:_AnnotationEditor2._zIndex++}),this.constructor===_AnnotationEditor2&&(0,_util2.unreachable)("Cannot initialize AnnotationEditor."),this.parent=parameters.parent,this.id=parameters.id,this.width=this.height=null,this.pageIndex=parameters.parent.pageIndex,this.name=parameters.name,this.div=null;const[width,height]=this.parent.viewportBaseDimensions;this.x=parameters.x/width,this.y=parameters.y/height,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,_util2.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=_classPrivateFieldGet2(this,_zIndex)}focusin(event){_classPrivateFieldGet2(this,_hasBeenSelected)?_classPrivateFieldSet2(this,_hasBeenSelected,!1):this.parent.setSelected(this)}focusout(event){if(!this.isAttachedToDOM)return;const target=event.relatedTarget;target!=null&&target.closest(`#${this.id}`)||(event.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(event){const rect=this.parent.div.getBoundingClientRect();this.startX=event.clientX-rect.x,this.startY=event.clientY-rect.y,event.dataTransfer.setData("text/plain",this.id),event.dataTransfer.effectAllowed="move"}setAt(x,y,tx,ty){const[width,height]=this.parent.viewportBaseDimensions;[tx,ty]=this.screenToPageTranslation(tx,ty),this.x=(x+tx)/width,this.y=(y+ty)/height,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(x,y){const[width,height]=this.parent.viewportBaseDimensions;[x,y]=this.screenToPageTranslation(x,y),this.x+=x/width,this.y+=y/height,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(x,y){const{rotation}=this.parent.viewport;switch(rotation){case 90:return[y,-x];case 180:return[-x,-y];case 270:return[-y,x];default:return[x,y]}}setDims(width,height){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*width/parentWidth}%`,this.div.style.height=`${100*height/parentHeight}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",_classPrivateFieldGet2(this,_boundFocusin)),this.div.addEventListener("focusout",_classPrivateFieldGet2(this,_boundFocusout));const[tx,ty]=this.getInitialTranslation();return this.translate(tx,ty),(0,_tools.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(event){const isMac=_tools.KeyboardManager.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){event.preventDefault();return}event.ctrlKey&&!isMac||event.shiftKey||event.metaKey&&isMac?this.parent.toggleSelected(this):this.parent.setSelected(this),_classPrivateFieldSet2(this,_hasBeenSelected,!0)}getRect(tx,ty){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions,[pageWidth,pageHeight]=this.parent.pageDimensions,shiftX=pageWidth*tx/parentWidth,shiftY=pageHeight*ty/parentHeight,x=this.x*pageWidth,y=this.y*pageHeight,width=this.width*pageWidth,height=this.height*pageHeight;switch(this.rotation){case 0:return[x+shiftX,pageHeight-y-shiftY-height,x+shiftX+width,pageHeight-y-shiftY];case 90:return[x+shiftY,pageHeight-y+shiftX,x+shiftY+height,pageHeight-y+shiftX+width];case 180:return[x-shiftX-width,pageHeight-y+shiftY,x-shiftX,pageHeight-y+shiftY+height];case 270:return[x-shiftY-height,pageHeight-y-shiftX-width,x-shiftY,pageHeight-y-shiftX];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(rect,pageHeight){const[x1,y1,x2,y2]=rect,width=x2-x1,height=y2-y1;switch(this.rotation){case 0:return[x1,pageHeight-y2,width,height];case 90:return[x1,pageHeight-y1,height,width];case 180:return[x2,pageHeight-y1,width,height];case 270:return[x2,pageHeight-y2,height,width];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_classPrivateFieldSet2(this,_isInEditMode,!0)}disableEditMode(){_classPrivateFieldSet2(this,_isInEditMode,!1)}isInEditMode(){return _classPrivateFieldGet2(this,_isInEditMode)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var _this$div;(_this$div=this.div)===null||_this$div===void 0||_this$div.addEventListener("focusin",_classPrivateFieldGet2(this,_boundFocusin))}serialize(){(0,_util2.unreachable)("An editor must be serializable")}static deserialize(data,parent){const editor=new this.prototype.constructor({parent,id:parent.getNextId()});editor.rotation=data.rotation;const[pageWidth,pageHeight]=parent.pageDimensions,[x,y,width,height]=editor.getRectInCurrentCoords(data.rect,pageHeight);return editor.x=x/pageWidth,editor.y=y/pageHeight,editor.width=width/pageWidth,editor.height=height/pageHeight,editor}remove(){this.div.removeEventListener("focusin",_classPrivateFieldGet2(this,_boundFocusin)),this.div.removeEventListener("focusout",_classPrivateFieldGet2(this,_boundFocusout)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var _this$div2;(_this$div2=this.div)===null||_this$div2===void 0||_this$div2.classList.add("selectedEditor")}unselect(){var _this$div3;(_this$div3=this.div)===null||_this$div3===void 0||_this$div3.classList.remove("selectedEditor")}updateParams(type,value){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return _classPrivateFieldGet2(this,_isEditing)}set isEditing(value){_classPrivateFieldSet2(this,_isEditing,value),value?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};__name(_AnnotationEditor,"AnnotationEditor");let AnnotationEditor=_AnnotationEditor;exports2.AnnotationEditor=AnnotationEditor,_defineProperty(AnnotationEditor,"_colorManager",new _tools.ColorManager),_defineProperty(AnnotationEditor,"_zIndex",1)},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.KeyboardManager=exports2.CommandManager=exports2.ColorManager=exports2.AnnotationEditorUIManager=void 0,exports2.bindEvents=bindEvents,exports2.opacityToHex=opacityToHex;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(133);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name2(_defineProperty,"_defineProperty"),__name(_defineProperty,"_defineProperty");function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");function bindEvents(obj,element,names){for(const name of names)element.addEventListener(name,obj[name].bind(obj))}__name2(bindEvents,"bindEvents"),__name(bindEvents,"bindEvents");function opacityToHex(opacity){return Math.round(Math.min(255,Math.max(1,255*opacity))).toString(16).padStart(2,"0")}__name2(opacityToHex,"opacityToHex"),__name(opacityToHex,"opacityToHex");var _id=new WeakMap;const _IdManager=class{static{__name2(this,"_IdManager")}constructor(){_classPrivateFieldInitSpec2(this,_id,{writable:!0,value:0})}getId(){var _this$id,_this$id2;return`${_util2.AnnotationEditorPrefix}${_classPrivateFieldSet2(this,_id,(_this$id=_classPrivateFieldGet2(this,_id),_this$id2=_this$id++,_this$id)),_this$id2}`}};__name(_IdManager,"IdManager");let IdManager=_IdManager;var _commands=new WeakMap,_locked=new WeakMap,_maxSize=new WeakMap,_position=new WeakMap;const _CommandManager=class{static{__name2(this,"_CommandManager")}constructor(){let maxSize=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;_classPrivateFieldInitSpec2(this,_commands,{writable:!0,value:[]}),_classPrivateFieldInitSpec2(this,_locked,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_maxSize,{writable:!0,value:void 0}),_classPrivateFieldInitSpec2(this,_position,{writable:!0,value:-1}),_classPrivateFieldSet2(this,_maxSize,maxSize)}add(_ref){let{cmd,undo,mustExec,type=NaN,overwriteIfSameType=!1,keepUndo=!1}=_ref;if(mustExec&&cmd(),_classPrivateFieldGet2(this,_locked))return;const save={cmd,undo,type};if(_classPrivateFieldGet2(this,_position)===-1){_classPrivateFieldGet2(this,_commands).length>0&&(_classPrivateFieldGet2(this,_commands).length=0),_classPrivateFieldSet2(this,_position,0),_classPrivateFieldGet2(this,_commands).push(save);return}if(overwriteIfSameType&&_classPrivateFieldGet2(this,_commands)[_classPrivateFieldGet2(this,_position)].type===type){keepUndo&&(save.undo=_classPrivateFieldGet2(this,_commands)[_classPrivateFieldGet2(this,_position)].undo),_classPrivateFieldGet2(this,_commands)[_classPrivateFieldGet2(this,_position)]=save;return}const next=_classPrivateFieldGet2(this,_position)+1;next===_classPrivateFieldGet2(this,_maxSize)?_classPrivateFieldGet2(this,_commands).splice(0,1):(_classPrivateFieldSet2(this,_position,next),next<_classPrivateFieldGet2(this,_commands).length&&_classPrivateFieldGet2(this,_commands).splice(next)),_classPrivateFieldGet2(this,_commands).push(save)}undo(){_classPrivateFieldGet2(this,_position)!==-1&&(_classPrivateFieldSet2(this,_locked,!0),_classPrivateFieldGet2(this,_commands)[_classPrivateFieldGet2(this,_position)].undo(),_classPrivateFieldSet2(this,_locked,!1),_classPrivateFieldSet2(this,_position,_classPrivateFieldGet2(this,_position)-1))}redo(){_classPrivateFieldGet2(this,_position)<_classPrivateFieldGet2(this,_commands).length-1&&(_classPrivateFieldSet2(this,_position,_classPrivateFieldGet2(this,_position)+1),_classPrivateFieldSet2(this,_locked,!0),_classPrivateFieldGet2(this,_commands)[_classPrivateFieldGet2(this,_position)].cmd(),_classPrivateFieldSet2(this,_locked,!1))}hasSomethingToUndo(){return _classPrivateFieldGet2(this,_position)!==-1}hasSomethingToRedo(){return _classPrivateFieldGet2(this,_position)<_classPrivateFieldGet2(this,_commands).length-1}destroy(){_classPrivateFieldSet2(this,_commands,null)}};__name(_CommandManager,"CommandManager");let CommandManager=_CommandManager;exports2.CommandManager=CommandManager;var _serialize=new WeakSet;const _KeyboardManager=class _KeyboardManager2{static{__name2(this,"_KeyboardManager")}constructor(callbacks){_classPrivateMethodInitSpec2(this,_serialize),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const isMac=_KeyboardManager2.platform.isMac;for(const[keys,callback]of callbacks)for(const key of keys){const isMacKey=key.startsWith("mac+");isMac&&isMacKey?(this.callbacks.set(key.slice(4),callback),this.allKeys.add(key.split("+").at(-1))):!isMac&&!isMacKey&&(this.callbacks.set(key,callback),this.allKeys.add(key.split("+").at(-1)))}}static get platform(){const platform=typeof navigator<"u"?navigator.platform:"";return(0,_util2.shadow)(this,"platform",{isWin:platform.includes("Win"),isMac:platform.includes("Mac")})}exec(self2,event){if(!this.allKeys.has(event.key))return;const callback=this.callbacks.get(_classPrivateMethodGet2(this,_serialize,_serialize2).call(this,event));callback&&(callback.bind(self2)(),event.stopPropagation(),event.preventDefault())}};__name(_KeyboardManager,"KeyboardManager");let KeyboardManager=_KeyboardManager;exports2.KeyboardManager=KeyboardManager;function _serialize2(event){event.altKey&&this.buffer.push("alt"),event.ctrlKey&&this.buffer.push("ctrl"),event.metaKey&&this.buffer.push("meta"),event.shiftKey&&this.buffer.push("shift"),this.buffer.push(event.key);const str=this.buffer.join("+");return this.buffer.length=0,str}__name2(_serialize2,"_serialize2"),__name(_serialize2,"_serialize2");var _elements=new WeakMap;const _ClipboardManager=class{static{__name2(this,"_ClipboardManager")}constructor(){_classPrivateFieldInitSpec2(this,_elements,{writable:!0,value:null})}copy(element){element&&(Array.isArray(element)?_classPrivateFieldSet2(this,_elements,element.map(el=>el.serialize())):_classPrivateFieldSet2(this,_elements,[element.serialize()]),_classPrivateFieldSet2(this,_elements,_classPrivateFieldGet2(this,_elements).filter(el=>!!el)),_classPrivateFieldGet2(this,_elements).length===0&&_classPrivateFieldSet2(this,_elements,null))}paste(){return _classPrivateFieldGet2(this,_elements)}isEmpty(){return _classPrivateFieldGet2(this,_elements)===null}destroy(){_classPrivateFieldSet2(this,_elements,null)}};__name(_ClipboardManager,"ClipboardManager");let ClipboardManager=_ClipboardManager;const _ColorManager=class _ColorManager2{static{__name2(this,"_ColorManager")}get _colors(){const colors=new Map([["CanvasText",null],["Canvas",null]]);return(0,_display_utils2.getColorValues)(colors),(0,_util2.shadow)(this,"_colors",colors)}convert(color){const rgb=(0,_display_utils2.getRGB)(color);if(!window.matchMedia("(forced-colors: active)").matches)return rgb;for(const[name,RGB]of this._colors)if(RGB.every((x,i)=>x===rgb[i]))return _ColorManager2._colorsMapping.get(name);return rgb}getHexCode(name){const rgb=this._colors.get(name);return rgb?_util2.Util.makeHexColor(...rgb):name}};__name(_ColorManager,"ColorManager");let ColorManager=_ColorManager;exports2.ColorManager=ColorManager,_defineProperty(ColorManager,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var _activeEditor=new WeakMap,_allEditors=new WeakMap,_allLayers=new WeakMap,_clipboardManager=new WeakMap,_commandManager=new WeakMap,_currentPageIndex=new WeakMap,_editorTypes=new WeakMap,_eventBus=new WeakMap,_idManager=new WeakMap,_isEnabled=new WeakMap,_mode=new WeakMap,_selectedEditors=new WeakMap,_boundKeydown=new WeakMap,_boundOnEditingAction=new WeakMap,_boundOnPageChanging=new WeakMap,_previousStates=new WeakMap,_container=new WeakMap,_addKeyboardManager=new WeakSet,_removeKeyboardManager=new WeakSet,_dispatchUpdateStates=new WeakSet,_dispatchUpdateUI=new WeakSet,_enableAll=new WeakSet,_disableAll=new WeakSet,_addEditorToLayer=new WeakSet,_isEmpty=new WeakSet,_selectEditors=new WeakSet;const _AnnotationEditorUIManager=class _AnnotationEditorUIManager2{static{__name2(this,"_AnnotationEditorUIManager")}constructor(container,eventBus){_classPrivateMethodInitSpec2(this,_selectEditors),_classPrivateMethodInitSpec2(this,_isEmpty),_classPrivateMethodInitSpec2(this,_addEditorToLayer),_classPrivateMethodInitSpec2(this,_disableAll),_classPrivateMethodInitSpec2(this,_enableAll),_classPrivateMethodInitSpec2(this,_dispatchUpdateUI),_classPrivateMethodInitSpec2(this,_dispatchUpdateStates),_classPrivateMethodInitSpec2(this,_removeKeyboardManager),_classPrivateMethodInitSpec2(this,_addKeyboardManager),_classPrivateFieldInitSpec2(this,_activeEditor,{writable:!0,value:null}),_classPrivateFieldInitSpec2(this,_allEditors,{writable:!0,value:new Map}),_classPrivateFieldInitSpec2(this,_allLayers,{writable:!0,value:new Map}),_classPrivateFieldInitSpec2(this,_clipboardManager,{writable:!0,value:new ClipboardManager}),_classPrivateFieldInitSpec2(this,_commandManager,{writable:!0,value:new CommandManager}),_classPrivateFieldInitSpec2(this,_currentPageIndex,{writable:!0,value:0}),_classPrivateFieldInitSpec2(this,_editorTypes,{writable:!0,value:null}),_classPrivateFieldInitSpec2(this,_eventBus,{writable:!0,value:null}),_classPrivateFieldInitSpec2(this,_idManager,{writable:!0,value:new IdManager}),_classPrivateFieldInitSpec2(this,_isEnabled,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_mode,{writable:!0,value:_util2.AnnotationEditorType.NONE}),_classPrivateFieldInitSpec2(this,_selectedEditors,{writable:!0,value:new Set}),_classPrivateFieldInitSpec2(this,_boundKeydown,{writable:!0,value:this.keydown.bind(this)}),_classPrivateFieldInitSpec2(this,_boundOnEditingAction,{writable:!0,value:this.onEditingAction.bind(this)}),_classPrivateFieldInitSpec2(this,_boundOnPageChanging,{writable:!0,value:this.onPageChanging.bind(this)}),_classPrivateFieldInitSpec2(this,_previousStates,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),_classPrivateFieldInitSpec2(this,_container,{writable:!0,value:null}),_classPrivateFieldSet2(this,_container,container),_classPrivateFieldSet2(this,_eventBus,eventBus),_classPrivateFieldGet2(this,_eventBus)._on("editingaction",_classPrivateFieldGet2(this,_boundOnEditingAction)),_classPrivateFieldGet2(this,_eventBus)._on("pagechanging",_classPrivateFieldGet2(this,_boundOnPageChanging))}destroy(){_classPrivateMethodGet2(this,_removeKeyboardManager,_removeKeyboardManager2).call(this),_classPrivateFieldGet2(this,_eventBus)._off("editingaction",_classPrivateFieldGet2(this,_boundOnEditingAction)),_classPrivateFieldGet2(this,_eventBus)._off("pagechanging",_classPrivateFieldGet2(this,_boundOnPageChanging));for(const layer of _classPrivateFieldGet2(this,_allLayers).values())layer.destroy();_classPrivateFieldGet2(this,_allLayers).clear(),_classPrivateFieldGet2(this,_allEditors).clear(),_classPrivateFieldSet2(this,_activeEditor,null),_classPrivateFieldGet2(this,_selectedEditors).clear(),_classPrivateFieldGet2(this,_clipboardManager).destroy(),_classPrivateFieldGet2(this,_commandManager).destroy()}onPageChanging(_ref2){let{pageNumber}=_ref2;_classPrivateFieldSet2(this,_currentPageIndex,pageNumber-1)}focusMainContainer(){_classPrivateFieldGet2(this,_container).focus()}keydown(event){var _this$getActive;(_this$getActive=this.getActive())!==null&&_this$getActive!==void 0&&_this$getActive.shouldGetKeyboardEvents()||_AnnotationEditorUIManager2._keyboardManager.exec(this,event)}onEditingAction(details){["undo","redo","cut","copy","paste","delete","selectAll"].includes(details.name)&&this[details.name]()}setEditingState(isEditing){isEditing?(_classPrivateMethodGet2(this,_addKeyboardManager,_addKeyboardManager2).call(this),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{isEditing:_classPrivateFieldGet2(this,_mode)!==_util2.AnnotationEditorType.NONE,isEmpty:_classPrivateMethodGet2(this,_isEmpty,_isEmpty2).call(this),hasSomethingToUndo:_classPrivateFieldGet2(this,_commandManager).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet2(this,_commandManager).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:_classPrivateFieldGet2(this,_clipboardManager).isEmpty()})):(_classPrivateMethodGet2(this,_removeKeyboardManager,_removeKeyboardManager2).call(this),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{isEditing:!1}))}registerEditorTypes(types){_classPrivateFieldSet2(this,_editorTypes,types);for(const editorType of _classPrivateFieldGet2(this,_editorTypes))_classPrivateMethodGet2(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editorType.defaultPropertiesToUpdate)}getId(){return _classPrivateFieldGet2(this,_idManager).getId()}addLayer(layer){_classPrivateFieldGet2(this,_allLayers).set(layer.pageIndex,layer),_classPrivateFieldGet2(this,_isEnabled)?layer.enable():layer.disable()}removeLayer(layer){_classPrivateFieldGet2(this,_allLayers).delete(layer.pageIndex)}updateMode(mode){if(_classPrivateFieldSet2(this,_mode,mode),mode===_util2.AnnotationEditorType.NONE)this.setEditingState(!1),_classPrivateMethodGet2(this,_disableAll,_disableAll2).call(this);else{this.setEditingState(!0),_classPrivateMethodGet2(this,_enableAll,_enableAll2).call(this);for(const layer of _classPrivateFieldGet2(this,_allLayers).values())layer.updateMode(mode)}}updateToolbar(mode){mode!==_classPrivateFieldGet2(this,_mode)&&_classPrivateFieldGet2(this,_eventBus).dispatch("switchannotationeditormode",{source:this,mode})}updateParams(type,value){for(const editor of _classPrivateFieldGet2(this,_selectedEditors))editor.updateParams(type,value);for(const editorType of _classPrivateFieldGet2(this,_editorTypes))editorType.updateDefaultParams(type,value)}getEditors(pageIndex){const editors=[];for(const editor of _classPrivateFieldGet2(this,_allEditors).values())editor.pageIndex===pageIndex&&editors.push(editor);return editors}getEditor(id){return _classPrivateFieldGet2(this,_allEditors).get(id)}addEditor(editor){_classPrivateFieldGet2(this,_allEditors).set(editor.id,editor)}removeEditor(editor){_classPrivateFieldGet2(this,_allEditors).delete(editor.id),this.unselect(editor)}setActiveEditor(editor){_classPrivateFieldGet2(this,_activeEditor)!==editor&&(_classPrivateFieldSet2(this,_activeEditor,editor),editor&&_classPrivateMethodGet2(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate))}toggleSelected(editor){if(_classPrivateFieldGet2(this,_selectedEditors).has(editor)){_classPrivateFieldGet2(this,_selectedEditors).delete(editor),editor.unselect(),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection});return}_classPrivateFieldGet2(this,_selectedEditors).add(editor),editor.select(),_classPrivateMethodGet2(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}setSelected(editor){for(const ed of _classPrivateFieldGet2(this,_selectedEditors))ed!==editor&&ed.unselect();_classPrivateFieldGet2(this,_selectedEditors).clear(),_classPrivateFieldGet2(this,_selectedEditors).add(editor),editor.select(),_classPrivateMethodGet2(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}isSelected(editor){return _classPrivateFieldGet2(this,_selectedEditors).has(editor)}unselect(editor){editor.unselect(),_classPrivateFieldGet2(this,_selectedEditors).delete(editor),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return _classPrivateFieldGet2(this,_selectedEditors).size!==0}undo(){_classPrivateFieldGet2(this,_commandManager).undo(),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:_classPrivateFieldGet2(this,_commandManager).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_classPrivateMethodGet2(this,_isEmpty,_isEmpty2).call(this)})}redo(){_classPrivateFieldGet2(this,_commandManager).redo(),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_classPrivateFieldGet2(this,_commandManager).hasSomethingToRedo(),isEmpty:_classPrivateMethodGet2(this,_isEmpty,_isEmpty2).call(this)})}addCommands(params){_classPrivateFieldGet2(this,_commandManager).add(params),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_classPrivateMethodGet2(this,_isEmpty,_isEmpty2).call(this)})}delete(){if(_classPrivateFieldGet2(this,_activeEditor)&&_classPrivateFieldGet2(this,_activeEditor).commitOrRemove(),!this.hasSelection)return;const editors=[..._classPrivateFieldGet2(this,_selectedEditors)],cmd=__name(()=>{for(const editor of editors)editor.remove()},"cmd"),undo=__name(()=>{for(const editor of editors)_classPrivateMethodGet2(this,_addEditorToLayer,_addEditorToLayer2).call(this,editor)},"undo");this.addCommands({cmd,undo,mustExec:!0})}copy(){if(_classPrivateFieldGet2(this,_activeEditor)&&_classPrivateFieldGet2(this,_activeEditor).commitOrRemove(),this.hasSelection){const editors=[];for(const editor of _classPrivateFieldGet2(this,_selectedEditors))editor.isEmpty()||editors.push(editor);if(editors.length===0)return;_classPrivateFieldGet2(this,_clipboardManager).copy(editors),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(_classPrivateFieldGet2(this,_clipboardManager).isEmpty())return;this.unselectAll();const layer=_classPrivateFieldGet2(this,_allLayers).get(_classPrivateFieldGet2(this,_currentPageIndex)),newEditors=_classPrivateFieldGet2(this,_clipboardManager).paste().map(data=>layer.deserialize(data)),cmd=__name(()=>{for(const editor of newEditors)_classPrivateMethodGet2(this,_addEditorToLayer,_addEditorToLayer2).call(this,editor);_classPrivateMethodGet2(this,_selectEditors,_selectEditors2).call(this,newEditors)},"cmd"),undo=__name(()=>{for(const editor of newEditors)editor.remove()},"undo");this.addCommands({cmd,undo,mustExec:!0})}selectAll(){for(const editor of _classPrivateFieldGet2(this,_selectedEditors))editor.commit();_classPrivateMethodGet2(this,_selectEditors,_selectEditors2).call(this,_classPrivateFieldGet2(this,_allEditors).values())}unselectAll(){if(_classPrivateFieldGet2(this,_activeEditor)){_classPrivateFieldGet2(this,_activeEditor).commitOrRemove();return}if(_classPrivateMethodGet2(this,_selectEditors,_selectEditors2).size!==0){for(const editor of _classPrivateFieldGet2(this,_selectedEditors))editor.unselect();_classPrivateFieldGet2(this,_selectedEditors).clear(),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!1})}}isActive(editor){return _classPrivateFieldGet2(this,_activeEditor)===editor}getActive(){return _classPrivateFieldGet2(this,_activeEditor)}getMode(){return _classPrivateFieldGet2(this,_mode)}};__name(_AnnotationEditorUIManager,"AnnotationEditorUIManager");let AnnotationEditorUIManager=_AnnotationEditorUIManager;exports2.AnnotationEditorUIManager=AnnotationEditorUIManager;function _addKeyboardManager2(){_classPrivateFieldGet2(this,_container).addEventListener("keydown",_classPrivateFieldGet2(this,_boundKeydown))}__name2(_addKeyboardManager2,"_addKeyboardManager2"),__name(_addKeyboardManager2,"_addKeyboardManager2");function _removeKeyboardManager2(){_classPrivateFieldGet2(this,_container).removeEventListener("keydown",_classPrivateFieldGet2(this,_boundKeydown))}__name2(_removeKeyboardManager2,"_removeKeyboardManager2"),__name(_removeKeyboardManager2,"_removeKeyboardManager2");function _dispatchUpdateStates2(details){Object.entries(details).some(_ref3=>{let[key,value]=_ref3;return _classPrivateFieldGet2(this,_previousStates)[key]!==value})&&_classPrivateFieldGet2(this,_eventBus).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet2(this,_previousStates),details)})}__name2(_dispatchUpdateStates2,"_dispatchUpdateStates2"),__name(_dispatchUpdateStates2,"_dispatchUpdateStates2");function _dispatchUpdateUI2(details){_classPrivateFieldGet2(this,_eventBus).dispatch("annotationeditorparamschanged",{source:this,details})}__name2(_dispatchUpdateUI2,"_dispatchUpdateUI2"),__name(_dispatchUpdateUI2,"_dispatchUpdateUI2");function _enableAll2(){if(!_classPrivateFieldGet2(this,_isEnabled)){_classPrivateFieldSet2(this,_isEnabled,!0);for(const layer of _classPrivateFieldGet2(this,_allLayers).values())layer.enable()}}__name2(_enableAll2,"_enableAll2"),__name(_enableAll2,"_enableAll2");function _disableAll2(){if(this.unselectAll(),_classPrivateFieldGet2(this,_isEnabled)){_classPrivateFieldSet2(this,_isEnabled,!1);for(const layer of _classPrivateFieldGet2(this,_allLayers).values())layer.disable()}}__name2(_disableAll2,"_disableAll2"),__name(_disableAll2,"_disableAll2");function _addEditorToLayer2(editor){const layer=_classPrivateFieldGet2(this,_allLayers).get(editor.pageIndex);layer?layer.addOrRebuild(editor):this.addEditor(editor)}__name2(_addEditorToLayer2,"_addEditorToLayer2"),__name(_addEditorToLayer2,"_addEditorToLayer2");function _isEmpty2(){if(_classPrivateFieldGet2(this,_allEditors).size===0)return!0;if(_classPrivateFieldGet2(this,_allEditors).size===1)for(const editor of _classPrivateFieldGet2(this,_allEditors).values())return editor.isEmpty();return!1}__name2(_isEmpty2,"_isEmpty2"),__name(_isEmpty2,"_isEmpty2");function _selectEditors2(editors){_classPrivateFieldGet2(this,_selectedEditors).clear();for(const editor of editors)editor.isEmpty()||(_classPrivateFieldGet2(this,_selectedEditors).add(editor),editor.select());_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}__name2(_selectEditors2,"_selectEditors2"),__name(_selectEditors2,"_selectEditors2"),_defineProperty(AnnotationEditorUIManager,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],AnnotationEditorUIManager.prototype.selectAll],[["ctrl+c","mac+meta+c"],AnnotationEditorUIManager.prototype.copy],[["ctrl+v","mac+meta+v"],AnnotationEditorUIManager.prototype.paste],[["ctrl+x","mac+meta+x"],AnnotationEditorUIManager.prototype.cut],[["ctrl+z","mac+meta+z"],AnnotationEditorUIManager.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],AnnotationEditorUIManager.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],AnnotationEditorUIManager.prototype.delete],[["Escape","mac+Escape"],AnnotationEditorUIManager.prototype.unselectAll]]))},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.StatTimer=exports2.RenderingCancelledException=exports2.PixelsPerInch=exports2.PageViewport=exports2.PDFDateString=exports2.DOMStandardFontDataFactory=exports2.DOMSVGFactory=exports2.DOMCanvasFactory=exports2.DOMCMapReaderFactory=exports2.AnnotationPrefix=void 0,exports2.deprecated=deprecated,exports2.getColorValues=getColorValues,exports2.getCurrentTransform=getCurrentTransform,exports2.getCurrentTransformInverse=getCurrentTransformInverse,exports2.getFilenameFromUrl=getFilenameFromUrl,exports2.getPdfFilenameFromUrl=getPdfFilenameFromUrl,exports2.getRGB=getRGB,exports2.getXfaPageViewport=getXfaPageViewport,exports2.isDataScheme=isDataScheme,exports2.isPdfFile=isPdfFile,exports2.isValidFetchUrl=isValidFetchUrl,exports2.loadScript=loadScript;var _base_factory=__w_pdfjs_require__2(134),_util2=__w_pdfjs_require__2(1);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name2(_defineProperty,"_defineProperty"),__name(_defineProperty,"_defineProperty");const SVG_NS="http://www.w3.org/2000/svg",AnnotationPrefix="pdfjs_internal_id_";exports2.AnnotationPrefix=AnnotationPrefix;const _PixelsPerInch=class{static{__name2(this,"_PixelsPerInch")}};__name(_PixelsPerInch,"PixelsPerInch");let PixelsPerInch=_PixelsPerInch;exports2.PixelsPerInch=PixelsPerInch,_defineProperty(PixelsPerInch,"CSS",96),_defineProperty(PixelsPerInch,"PDF",72),_defineProperty(PixelsPerInch,"PDF_TO_CSS_UNITS",PixelsPerInch.CSS/PixelsPerInch.PDF);const _DOMCanvasFactory=class extends _base_factory.BaseCanvasFactory{static{__name2(this,"_DOMCanvasFactory")}constructor(){let{ownerDocument=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=ownerDocument}_createCanvas(width,height){const canvas=this._document.createElement("canvas");return canvas.width=width,canvas.height=height,canvas}};__name(_DOMCanvasFactory,"DOMCanvasFactory");let DOMCanvasFactory=_DOMCanvasFactory;exports2.DOMCanvasFactory=DOMCanvasFactory;async function fetchData(url){let asTypedArray=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(isValidFetchUrl(url,document.baseURI)){const response=await fetch(url);if(!response.ok)throw new Error(response.statusText);return asTypedArray?new Uint8Array(await response.arrayBuffer()):(0,_util2.stringToBytes)(await response.text())}return new Promise((resolve,reject)=>{const request=new XMLHttpRequest;request.open("GET",url,!0),asTypedArray&&(request.responseType="arraybuffer"),request.onreadystatechange=()=>{if(request.readyState===XMLHttpRequest.DONE){if(request.status===200||request.status===0){let data;if(asTypedArray&&request.response?data=new Uint8Array(request.response):!asTypedArray&&request.responseText&&(data=(0,_util2.stringToBytes)(request.responseText)),data){resolve(data);return}}reject(new Error(request.statusText))}},request.send(null)})}__name2(fetchData,"fetchData"),__name(fetchData,"fetchData");const _DOMCMapReaderFactory=class extends _base_factory.BaseCMapReaderFactory{static{__name2(this,"_DOMCMapReaderFactory")}_fetchData(url,compressionType){return fetchData(url,this.isCompressed).then(data=>({cMapData:data,compressionType}))}};__name(_DOMCMapReaderFactory,"DOMCMapReaderFactory");let DOMCMapReaderFactory=_DOMCMapReaderFactory;exports2.DOMCMapReaderFactory=DOMCMapReaderFactory;const _DOMStandardFontDataFactory=class extends _base_factory.BaseStandardFontDataFactory{static{__name2(this,"_DOMStandardFontDataFactory")}_fetchData(url){return fetchData(url,!0)}};__name(_DOMStandardFontDataFactory,"DOMStandardFontDataFactory");let DOMStandardFontDataFactory=_DOMStandardFontDataFactory;exports2.DOMStandardFontDataFactory=DOMStandardFontDataFactory;const _DOMSVGFactory=class extends _base_factory.BaseSVGFactory{static{__name2(this,"_DOMSVGFactory")}_createSVG(type){return document.createElementNS(SVG_NS,type)}};__name(_DOMSVGFactory,"DOMSVGFactory");let DOMSVGFactory=_DOMSVGFactory;exports2.DOMSVGFactory=DOMSVGFactory;const _PageViewport=class _PageViewport2{static{__name2(this,"_PageViewport")}constructor(_ref){let{viewBox,scale,rotation,offsetX=0,offsetY=0,dontFlip=!1}=_ref;this.viewBox=viewBox,this.scale=scale,this.rotation=rotation,this.offsetX=offsetX,this.offsetY=offsetY;const centerX=(viewBox[2]+viewBox[0])/2,centerY=(viewBox[3]+viewBox[1])/2;let rotateA,rotateB,rotateC,rotateD;switch(rotation%=360,rotation<0&&(rotation+=360),rotation){case 180:rotateA=-1,rotateB=0,rotateC=0,rotateD=1;break;case 90:rotateA=0,rotateB=1,rotateC=1,rotateD=0;break;case 270:rotateA=0,rotateB=-1,rotateC=-1,rotateD=0;break;case 0:rotateA=1,rotateB=0,rotateC=0,rotateD=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}dontFlip&&(rotateC=-rotateC,rotateD=-rotateD);let offsetCanvasX,offsetCanvasY,width,height;rotateA===0?(offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX,offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY,width=Math.abs(viewBox[3]-viewBox[1])*scale,height=Math.abs(viewBox[2]-viewBox[0])*scale):(offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX,offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY,width=Math.abs(viewBox[2]-viewBox[0])*scale,height=Math.abs(viewBox[3]-viewBox[1])*scale),this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY],this.width=width,this.height=height}clone(){let{scale=this.scale,rotation=this.rotation,offsetX=this.offsetX,offsetY=this.offsetY,dontFlip=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _PageViewport2({viewBox:this.viewBox.slice(),scale,rotation,offsetX,offsetY,dontFlip})}convertToViewportPoint(x,y){return _util2.Util.applyTransform([x,y],this.transform)}convertToViewportRectangle(rect){const topLeft=_util2.Util.applyTransform([rect[0],rect[1]],this.transform),bottomRight=_util2.Util.applyTransform([rect[2],rect[3]],this.transform);return[topLeft[0],topLeft[1],bottomRight[0],bottomRight[1]]}convertToPdfPoint(x,y){return _util2.Util.applyInverseTransform([x,y],this.transform)}};__name(_PageViewport,"PageViewport");let PageViewport=_PageViewport;exports2.PageViewport=PageViewport;const _RenderingCancelledException=class extends _util2.BaseException{static{__name2(this,"_RenderingCancelledException")}constructor(msg,type){super(msg,"RenderingCancelledException"),this.type=type}};__name(_RenderingCancelledException,"RenderingCancelledException");let RenderingCancelledException=_RenderingCancelledException;exports2.RenderingCancelledException=RenderingCancelledException;function isDataScheme(url){const ii=url.length;let i=0;for(;i<ii&&url[i].trim()==="";)i++;return url.substring(i,i+5).toLowerCase()==="data:"}__name2(isDataScheme,"isDataScheme"),__name(isDataScheme,"isDataScheme");function isPdfFile(filename){return typeof filename=="string"&&/\.pdf$/i.test(filename)}__name2(isPdfFile,"isPdfFile"),__name(isPdfFile,"isPdfFile");function getFilenameFromUrl(url){const anchor=url.indexOf("#"),query=url.indexOf("?"),end=Math.min(anchor>0?anchor:url.length,query>0?query:url.length);return url.substring(url.lastIndexOf("/",end)+1,end)}__name2(getFilenameFromUrl,"getFilenameFromUrl"),__name(getFilenameFromUrl,"getFilenameFromUrl");function getPdfFilenameFromUrl(url){let defaultFilename=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof url!="string")return defaultFilename;if(isDataScheme(url))return(0,_util2.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),defaultFilename;const reURI=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,reFilename=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,splitURI=reURI.exec(url);let suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename&&(suggestedFilename=suggestedFilename[0],suggestedFilename.includes("%")))try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0]}catch{}return suggestedFilename||defaultFilename}__name2(getPdfFilenameFromUrl,"getPdfFilenameFromUrl"),__name(getPdfFilenameFromUrl,"getPdfFilenameFromUrl");const _StatTimer=class{static{__name2(this,"_StatTimer")}constructor(){this.started=Object.create(null),this.times=[]}time(name){name in this.started&&(0,_util2.warn)(`Timer is already running for ${name}`),this.started[name]=Date.now()}timeEnd(name){name in this.started||(0,_util2.warn)(`Timer has not been started for ${name}`),this.times.push({name,start:this.started[name],end:Date.now()}),delete this.started[name]}toString(){const outBuf=[];let longest=0;for(const time of this.times){const name=time.name;name.length>longest&&(longest=name.length)}for(const time of this.times){const duration=time.end-time.start;outBuf.push(`${time.name.padEnd(longest)} ${duration}ms
`)}return outBuf.join("")}};__name(_StatTimer,"StatTimer");let StatTimer=_StatTimer;exports2.StatTimer=StatTimer;function isValidFetchUrl(url,baseUrl){try{const{protocol}=baseUrl?new URL(url,baseUrl):new URL(url);return protocol==="http:"||protocol==="https:"}catch{return!1}}__name2(isValidFetchUrl,"isValidFetchUrl"),__name(isValidFetchUrl,"isValidFetchUrl");function loadScript(src){let removeScriptElement=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new Promise((resolve,reject)=>{const script=document.createElement("script");script.src=src,script.onload=function(evt){removeScriptElement&&script.remove(),resolve(evt)},script.onerror=function(){reject(new Error(`Cannot load script at: ${script.src}`))},(document.head||document.documentElement).append(script)})}__name2(loadScript,"loadScript"),__name(loadScript,"loadScript");function deprecated(details){console.log("Deprecated API usage: "+details)}__name2(deprecated,"deprecated"),__name(deprecated,"deprecated");let pdfDateStringRegex;const _PDFDateString=class{static{__name2(this,"_PDFDateString")}static toDateObject(input){if(!input||typeof input!="string")return null;pdfDateStringRegex||(pdfDateStringRegex=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const matches=pdfDateStringRegex.exec(input);if(!matches)return null;const year=parseInt(matches[1],10);let month=parseInt(matches[2],10);month=month>=1&&month<=12?month-1:0;let day=parseInt(matches[3],10);day=day>=1&&day<=31?day:1;let hour=parseInt(matches[4],10);hour=hour>=0&&hour<=23?hour:0;let minute=parseInt(matches[5],10);minute=minute>=0&&minute<=59?minute:0;let second=parseInt(matches[6],10);second=second>=0&&second<=59?second:0;const universalTimeRelation=matches[7]||"Z";let offsetHour=parseInt(matches[8],10);offsetHour=offsetHour>=0&&offsetHour<=23?offsetHour:0;let offsetMinute=parseInt(matches[9],10)||0;return offsetMinute=offsetMinute>=0&&offsetMinute<=59?offsetMinute:0,universalTimeRelation==="-"?(hour+=offsetHour,minute+=offsetMinute):universalTimeRelation==="+"&&(hour-=offsetHour,minute-=offsetMinute),new Date(Date.UTC(year,month,day,hour,minute,second))}};__name(_PDFDateString,"PDFDateString");let PDFDateString=_PDFDateString;exports2.PDFDateString=PDFDateString;function getXfaPageViewport(xfaPage,_ref2){let{scale=1,rotation=0}=_ref2;const{width,height}=xfaPage.attributes.style,viewBox=[0,0,parseInt(width),parseInt(height)];return new PageViewport({viewBox,scale,rotation})}__name2(getXfaPageViewport,"getXfaPageViewport"),__name(getXfaPageViewport,"getXfaPageViewport");function getRGB(color){if(color.startsWith("#")){const colorRGB=parseInt(color.slice(1),16);return[(colorRGB&16711680)>>16,(colorRGB&65280)>>8,colorRGB&255]}return color.startsWith("rgb(")?color.slice(4,-1).split(",").map(x=>parseInt(x)):color.startsWith("rgba(")?color.slice(5,-1).split(",").map(x=>parseInt(x)).slice(0,3):((0,_util2.warn)(`Not a valid color format: "${color}"`),[0,0,0])}__name2(getRGB,"getRGB"),__name(getRGB,"getRGB");function getColorValues(colors){const span=document.createElement("span");span.style.visibility="hidden",document.body.append(span);for(const name of colors.keys()){span.style.color=name;const computedColor=window.getComputedStyle(span).color;colors.set(name,getRGB(computedColor))}span.remove()}__name2(getColorValues,"getColorValues"),__name(getColorValues,"getColorValues");function getCurrentTransform(ctx){const{a,b,c,d,e,f}=ctx.getTransform();return[a,b,c,d,e,f]}__name2(getCurrentTransform,"getCurrentTransform"),__name(getCurrentTransform,"getCurrentTransform");function getCurrentTransformInverse(ctx){const{a,b,c,d,e,f}=ctx.getTransform().invertSelf();return[a,b,c,d,e,f]}__name2(getCurrentTransformInverse,"getCurrentTransformInverse"),__name(getCurrentTransformInverse,"getCurrentTransformInverse")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.BaseStandardFontDataFactory=exports2.BaseSVGFactory=exports2.BaseCanvasFactory=exports2.BaseCMapReaderFactory=void 0;var _util2=__w_pdfjs_require__2(1);const _BaseCanvasFactory=class _BaseCanvasFactory2{static{__name2(this,"_BaseCanvasFactory")}constructor(){this.constructor===_BaseCanvasFactory2&&(0,_util2.unreachable)("Cannot initialize BaseCanvasFactory.")}create(width,height){if(width<=0||height<=0)throw new Error("Invalid canvas size");const canvas=this._createCanvas(width,height);return{canvas,context:canvas.getContext("2d")}}reset(canvasAndContext,width,height){if(!canvasAndContext.canvas)throw new Error("Canvas is not specified");if(width<=0||height<=0)throw new Error("Invalid canvas size");canvasAndContext.canvas.width=width,canvasAndContext.canvas.height=height}destroy(canvasAndContext){if(!canvasAndContext.canvas)throw new Error("Canvas is not specified");canvasAndContext.canvas.width=0,canvasAndContext.canvas.height=0,canvasAndContext.canvas=null,canvasAndContext.context=null}_createCanvas(width,height){(0,_util2.unreachable)("Abstract method `_createCanvas` called.")}};__name(_BaseCanvasFactory,"BaseCanvasFactory");let BaseCanvasFactory=_BaseCanvasFactory;exports2.BaseCanvasFactory=BaseCanvasFactory;const _BaseCMapReaderFactory=class _BaseCMapReaderFactory2{static{__name2(this,"_BaseCMapReaderFactory")}constructor(_ref){let{baseUrl=null,isCompressed=!1}=_ref;this.constructor===_BaseCMapReaderFactory2&&(0,_util2.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=baseUrl,this.isCompressed=isCompressed}async fetch(_ref2){let{name}=_ref2;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!name)throw new Error("CMap name must be specified.");const url=this.baseUrl+name+(this.isCompressed?".bcmap":""),compressionType=this.isCompressed?_util2.CMapCompressionType.BINARY:_util2.CMapCompressionType.NONE;return this._fetchData(url,compressionType).catch(reason=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${url}`)})}_fetchData(url,compressionType){(0,_util2.unreachable)("Abstract method `_fetchData` called.")}};__name(_BaseCMapReaderFactory,"BaseCMapReaderFactory");let BaseCMapReaderFactory=_BaseCMapReaderFactory;exports2.BaseCMapReaderFactory=BaseCMapReaderFactory;const _BaseStandardFontDataFactory=class _BaseStandardFontDataFactory2{static{__name2(this,"_BaseStandardFontDataFactory")}constructor(_ref3){let{baseUrl=null}=_ref3;this.constructor===_BaseStandardFontDataFactory2&&(0,_util2.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=baseUrl}async fetch(_ref4){let{filename}=_ref4;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!filename)throw new Error("Font filename must be specified.");const url=`${this.baseUrl}${filename}`;return this._fetchData(url).catch(reason=>{throw new Error(`Unable to load font data at: ${url}`)})}_fetchData(url){(0,_util2.unreachable)("Abstract method `_fetchData` called.")}};__name(_BaseStandardFontDataFactory,"BaseStandardFontDataFactory");let BaseStandardFontDataFactory=_BaseStandardFontDataFactory;exports2.BaseStandardFontDataFactory=BaseStandardFontDataFactory;const _BaseSVGFactory=class _BaseSVGFactory2{static{__name2(this,"_BaseSVGFactory")}constructor(){this.constructor===_BaseSVGFactory2&&(0,_util2.unreachable)("Cannot initialize BaseSVGFactory.")}create(width,height){let skipDimensions=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(width<=0||height<=0)throw new Error("Invalid SVG dimensions");const svg=this._createSVG("svg:svg");return svg.setAttribute("version","1.1"),skipDimensions||(svg.setAttribute("width",`${width}px`),svg.setAttribute("height",`${height}px`)),svg.setAttribute("preserveAspectRatio","none"),svg.setAttribute("viewBox",`0 0 ${width} ${height}`),svg}createElement(type){if(typeof type!="string")throw new Error("Invalid SVG element type");return this._createSVG(type)}_createSVG(type){(0,_util2.unreachable)("Abstract method `_createSVG` called.")}};__name(_BaseSVGFactory,"BaseSVGFactory");let BaseSVGFactory=_BaseSVGFactory;exports2.BaseSVGFactory=BaseSVGFactory},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.MurmurHash3_64=void 0;var _util2=__w_pdfjs_require__2(1);const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535,_MurmurHash3_64=class{static{__name2(this,"_MurmurHash3_64")}constructor(seed){this.h1=seed?seed&4294967295:SEED,this.h2=seed?seed&4294967295:SEED}update(input){let data,length;if(typeof input=="string"){data=new Uint8Array(input.length*2),length=0;for(let i=0,ii=input.length;i<ii;i++){const code=input.charCodeAt(i);code<=255?data[length++]=code:(data[length++]=code>>>8,data[length++]=code&255)}}else if((0,_util2.isArrayBuffer)(input))data=input.slice(),length=data.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const blockCounts=length>>2,tailLength=length-blockCounts*4,dataUint32=new Uint32Array(data.buffer,0,blockCounts);let k1=0,k2=0,h1=this.h1,h2=this.h2;const C1=3432918353,C2=461845907,C1_LOW=C1&MASK_LOW,C2_LOW=C2&MASK_LOW;for(let i=0;i<blockCounts;i++)i&1?(k1=dataUint32[i],k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW,k1=k1<<15|k1>>>17,k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW,h1^=k1,h1=h1<<13|h1>>>19,h1=h1*5+3864292196):(k2=dataUint32[i],k2=k2*C1&MASK_HIGH|k2*C1_LOW&MASK_LOW,k2=k2<<15|k2>>>17,k2=k2*C2&MASK_HIGH|k2*C2_LOW&MASK_LOW,h2^=k2,h2=h2<<13|h2>>>19,h2=h2*5+3864292196);switch(k1=0,tailLength){case 3:k1^=data[blockCounts*4+2]<<16;case 2:k1^=data[blockCounts*4+1]<<8;case 1:k1^=data[blockCounts*4],k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW,k1=k1<<15|k1>>>17,k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW,blockCounts&1?h1^=k1:h2^=k1}this.h1=h1,this.h2=h2}hexdigest(){let h1=this.h1,h2=this.h2;h1^=h2>>>1,h1=h1*3981806797&MASK_HIGH|h1*36045&MASK_LOW,h2=h2*4283543511&MASK_HIGH|((h2<<16|h1>>>16)*2950163797&MASK_HIGH)>>>16,h1^=h2>>>1,h1=h1*444984403&MASK_HIGH|h1*60499&MASK_LOW,h2=h2*3301882366&MASK_HIGH|((h2<<16|h1>>>16)*3120437893&MASK_HIGH)>>>16,h1^=h2>>>1;const hex1=(h1>>>0).toString(16),hex2=(h2>>>0).toString(16);return hex1.padStart(8,"0")+hex2.padStart(8,"0")}};__name(_MurmurHash3_64,"MurmurHash3_64");let MurmurHash3_64=_MurmurHash3_64;exports2.MurmurHash3_64=MurmurHash3_64},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _a2;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.FontLoader=exports2.FontFaceObject=void 0;var _util2=__w_pdfjs_require__2(1);const _BaseFontLoader=class _BaseFontLoader2{static{__name2(this,"_BaseFontLoader")}constructor(_ref){let{docId,onUnsupportedFeature,ownerDocument=globalThis.document,styleElement=null}=_ref;this.constructor===_BaseFontLoader2&&(0,_util2.unreachable)("Cannot initialize BaseFontLoader."),this.docId=docId,this._onUnsupportedFeature=onUnsupportedFeature,this._document=ownerDocument,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(nativeFontFace){this.nativeFontFaces.push(nativeFontFace),this._document.fonts.add(nativeFontFace)}insertRule(rule){let styleElement=this.styleElement;styleElement||(styleElement=this.styleElement=this._document.createElement("style"),styleElement.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(styleElement));const styleSheet=styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length)}clear(){for(const nativeFontFace of this.nativeFontFaces)this._document.fonts.delete(nativeFontFace);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(font){if(font.attached||font.missingFile)return;if(font.attached=!0,this.isFontLoadingAPISupported){const nativeFontFace=font.createNativeFontFace();if(nativeFontFace){this.addNativeFontFace(nativeFontFace);try{await nativeFontFace.loaded}catch(ex){throw this._onUnsupportedFeature({featureId:_util2.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,_util2.warn)(`Failed to load font '${nativeFontFace.family}': '${ex}'.`),font.disableFontFace=!0,ex}}return}const rule=font.createFontFaceRule();if(rule){if(this.insertRule(rule),this.isSyncFontLoadingSupported)return;await new Promise(resolve=>{const request=this._queueLoadingCallback(resolve);this._prepareFontLoadEvent([rule],[font],request)})}}_queueLoadingCallback(callback){(0,_util2.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var _this$_document;const hasFonts=!!((_this$_document=this._document)!==null&&_this$_document!==void 0&&_this$_document.fonts);return(0,_util2.shadow)(this,"isFontLoadingAPISupported",hasFonts)}get isSyncFontLoadingSupported(){(0,_util2.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,_util2.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(rules,fontsToLoad,request){(0,_util2.unreachable)("Abstract method `_prepareFontLoadEvent`.")}};__name(_BaseFontLoader,"BaseFontLoader");let BaseFontLoader=_BaseFontLoader,FontLoader;exports2.FontLoader=FontLoader,exports2.FontLoader=FontLoader=(_a2=class extends BaseFontLoader{static{__name2(this,"_a")}constructor(params){super(params),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let supported=!1;if(typeof navigator>"u")supported=!0;else{const m=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);m?.[1]>=14&&(supported=!0)}return(0,_util2.shadow)(this,"isSyncFontLoadingSupported",supported)}_queueLoadingCallback(callback){function completeRequest(){for((0,_util2.assert)(!request.done,"completeRequest() cannot be called twice."),request.done=!0;context.requests.length>0&&context.requests[0].done;){const otherRequest=context.requests.shift();setTimeout(otherRequest.callback,0)}}__name2(completeRequest,"completeRequest"),__name(completeRequest,"completeRequest");const context=this.loadingContext,request={id:`pdfjs-font-loading-${context.nextRequestId++}`,done:!1,complete:completeRequest,callback};return context.requests.push(request),request}get _loadTestFont(){const getLoadTestFont=__name(function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")},"getLoadTestFont");return(0,_util2.shadow)(this,"_loadTestFont",getLoadTestFont())}_prepareFontLoadEvent(rules,fonts,request){function int32(data2,offset){return data2.charCodeAt(offset)<<24|data2.charCodeAt(offset+1)<<16|data2.charCodeAt(offset+2)<<8|data2.charCodeAt(offset+3)&255}__name2(int32,"int32"),__name(int32,"int32");function spliceString(s,offset,remove,insert){const chunk1=s.substring(0,offset),chunk2=s.substring(offset+remove);return chunk1+insert+chunk2}__name2(spliceString,"spliceString"),__name(spliceString,"spliceString");let i,ii;const canvas=this._document.createElement("canvas");canvas.width=1,canvas.height=1;const ctx=canvas.getContext("2d");let called=0;function isFontReady(name,callback){if(called++,called>30){(0,_util2.warn)("Load test font never loaded."),callback();return}if(ctx.font="30px "+name,ctx.fillText(".",0,20),ctx.getImageData(0,0,1,1).data[3]>0){callback();return}setTimeout(isFontReady.bind(null,name,callback))}__name2(isFontReady,"isFontReady"),__name(isFontReady,"isFontReady");const loadTestFontId=`lt${Date.now()}${this.loadTestFontId++}`;let data=this._loadTestFont;data=spliceString(data,976,loadTestFontId.length,loadTestFontId);const CFF_CHECKSUM_OFFSET=16,XXXX_VALUE=1482184792;let checksum=int32(data,CFF_CHECKSUM_OFFSET);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4)checksum=checksum-XXXX_VALUE+int32(loadTestFontId,i)|0;i<loadTestFontId.length&&(checksum=checksum-XXXX_VALUE+int32(loadTestFontId+"XXX",i)|0),data=spliceString(data,CFF_CHECKSUM_OFFSET,4,(0,_util2.string32)(checksum));const url=`url(data:font/opentype;base64,${btoa(data)});`,rule=`@font-face {font-family:"${loadTestFontId}";src:${url}}`;this.insertRule(rule);const names=[];for(const font of fonts)names.push(font.loadedName);names.push(loadTestFontId);const div=this._document.createElement("div");div.style.visibility="hidden",div.style.width=div.style.height="10px",div.style.position="absolute",div.style.top=div.style.left="0px";for(const name of names){const span=this._document.createElement("span");span.textContent="Hi",span.style.fontFamily=name,div.append(span)}this._document.body.append(div),isFontReady(loadTestFontId,()=>{div.remove(),request.complete()})}},__name(_a2,"GenericFontLoader"),_a2);const _FontFaceObject=class{static{__name2(this,"_FontFaceObject")}constructor(translatedData,_ref2){let{isEvalSupported=!0,disableFontFace=!1,ignoreErrors=!1,onUnsupportedFeature,fontRegistry=null}=_ref2;this.compiledGlyphs=Object.create(null);for(const i in translatedData)this[i]=translatedData[i];this.isEvalSupported=isEvalSupported!==!1,this.disableFontFace=disableFontFace===!0,this.ignoreErrors=ignoreErrors===!0,this._onUnsupportedFeature=onUnsupportedFeature,this.fontRegistry=fontRegistry}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let nativeFontFace;if(!this.cssFontInfo)nativeFontFace=new FontFace(this.loadedName,this.data,{});else{const css={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(css.style=`oblique ${this.cssFontInfo.italicAngle}deg`),nativeFontFace=new FontFace(this.cssFontInfo.fontFamily,this.data,css)}return this.fontRegistry&&this.fontRegistry.registerFont(this),nativeFontFace}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const data=(0,_util2.bytesToString)(this.data),url=`url(data:${this.mimetype};base64,${btoa(data)});`;let rule;if(!this.cssFontInfo)rule=`@font-face {font-family:"${this.loadedName}";src:${url}}`;else{let css=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(css+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),rule=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${css}src:${url}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,url),rule}getPathGenerator(objs,character){if(this.compiledGlyphs[character]!==void 0)return this.compiledGlyphs[character];let cmds;try{cmds=objs.get(this.loadedName+"_path_"+character)}catch(ex){if(!this.ignoreErrors)throw ex;return this._onUnsupportedFeature({featureId:_util2.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,_util2.warn)(`getPathGenerator - ignoring character: "${ex}".`),this.compiledGlyphs[character]=function(c,size){}}if(this.isEvalSupported&&_util2.FeatureTest.isEvalSupported){const jsBuf=[];for(const current of cmds){const args=current.args!==void 0?current.args.join(","):"";jsBuf.push("c.",current.cmd,"(",args,`);
`)}return this.compiledGlyphs[character]=new Function("c","size",jsBuf.join(""))}return this.compiledGlyphs[character]=function(c,size){for(const current of cmds)current.cmd==="scale"&&(current.args=[size,-size]),c[current.cmd].apply(c,current.args)}}};__name(_FontFaceObject,"FontFaceObject");let FontFaceObject=_FontFaceObject;exports2.FontFaceObject=FontFaceObject},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.CanvasGraphics=void 0;var _display_utils2=__w_pdfjs_require__2(133),_util2=__w_pdfjs_require__2(1),_pattern_helper=__w_pdfjs_require__2(138),_image_utils=__w_pdfjs_require__2(139),_is_node2=__w_pdfjs_require__2(3);function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,MAX_GROUP_SIZE=4096,EXECUTION_TIME=15,EXECUTION_STEPS=10,MAX_SIZE_TO_COMPILE=_is_node2.isNodeJS&&typeof Path2D>"u"?-1:1e3,FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(ctx,destCtx){if(ctx._removeMirroring)throw new Error("Context is already forwarding operations.");ctx.__originalSave=ctx.save,ctx.__originalRestore=ctx.restore,ctx.__originalRotate=ctx.rotate,ctx.__originalScale=ctx.scale,ctx.__originalTranslate=ctx.translate,ctx.__originalTransform=ctx.transform,ctx.__originalSetTransform=ctx.setTransform,ctx.__originalResetTransform=ctx.resetTransform,ctx.__originalClip=ctx.clip,ctx.__originalMoveTo=ctx.moveTo,ctx.__originalLineTo=ctx.lineTo,ctx.__originalBezierCurveTo=ctx.bezierCurveTo,ctx.__originalRect=ctx.rect,ctx.__originalClosePath=ctx.closePath,ctx.__originalBeginPath=ctx.beginPath,ctx._removeMirroring=()=>{ctx.save=ctx.__originalSave,ctx.restore=ctx.__originalRestore,ctx.rotate=ctx.__originalRotate,ctx.scale=ctx.__originalScale,ctx.translate=ctx.__originalTranslate,ctx.transform=ctx.__originalTransform,ctx.setTransform=ctx.__originalSetTransform,ctx.resetTransform=ctx.__originalResetTransform,ctx.clip=ctx.__originalClip,ctx.moveTo=ctx.__originalMoveTo,ctx.lineTo=ctx.__originalLineTo,ctx.bezierCurveTo=ctx.__originalBezierCurveTo,ctx.rect=ctx.__originalRect,ctx.closePath=ctx.__originalClosePath,ctx.beginPath=ctx.__originalBeginPath,delete ctx._removeMirroring},ctx.save=__name(__name2(function(){destCtx.save(),this.__originalSave()},"ctxSave"),"ctxSave"),ctx.restore=__name(__name2(function(){destCtx.restore(),this.__originalRestore()},"ctxRestore"),"ctxRestore"),ctx.translate=__name(__name2(function(x,y){destCtx.translate(x,y),this.__originalTranslate(x,y)},"ctxTranslate"),"ctxTranslate"),ctx.scale=__name(__name2(function(x,y){destCtx.scale(x,y),this.__originalScale(x,y)},"ctxScale"),"ctxScale"),ctx.transform=__name(__name2(function(a,b,c,d,e,f){destCtx.transform(a,b,c,d,e,f),this.__originalTransform(a,b,c,d,e,f)},"ctxTransform"),"ctxTransform"),ctx.setTransform=__name(__name2(function(a,b,c,d,e,f){destCtx.setTransform(a,b,c,d,e,f),this.__originalSetTransform(a,b,c,d,e,f)},"ctxSetTransform"),"ctxSetTransform"),ctx.resetTransform=__name(__name2(function(){destCtx.resetTransform(),this.__originalResetTransform()},"ctxResetTransform"),"ctxResetTransform"),ctx.rotate=__name(__name2(function(angle){destCtx.rotate(angle),this.__originalRotate(angle)},"ctxRotate"),"ctxRotate"),ctx.clip=__name(__name2(function(rule){destCtx.clip(rule),this.__originalClip(rule)},"ctxRotate"),"ctxRotate"),ctx.moveTo=function(x,y){destCtx.moveTo(x,y),this.__originalMoveTo(x,y)},ctx.lineTo=function(x,y){destCtx.lineTo(x,y),this.__originalLineTo(x,y)},ctx.bezierCurveTo=function(cp1x,cp1y,cp2x,cp2y,x,y){destCtx.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y),this.__originalBezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y)},ctx.rect=function(x,y,width,height){destCtx.rect(x,y,width,height),this.__originalRect(x,y,width,height)},ctx.closePath=function(){destCtx.closePath(),this.__originalClosePath()},ctx.beginPath=function(){destCtx.beginPath(),this.__originalBeginPath()}}__name2(mirrorContextOperations,"mirrorContextOperations"),__name(mirrorContextOperations,"mirrorContextOperations");const _CachedCanvases=class{static{__name2(this,"_CachedCanvases")}constructor(canvasFactory){this.canvasFactory=canvasFactory,this.cache=Object.create(null)}getCanvas(id,width,height){let canvasEntry;return this.cache[id]!==void 0?(canvasEntry=this.cache[id],this.canvasFactory.reset(canvasEntry,width,height)):(canvasEntry=this.canvasFactory.create(width,height),this.cache[id]=canvasEntry),canvasEntry}delete(id){delete this.cache[id]}clear(){for(const id in this.cache){const canvasEntry=this.cache[id];this.canvasFactory.destroy(canvasEntry),delete this.cache[id]}}};__name(_CachedCanvases,"CachedCanvases");let CachedCanvases=_CachedCanvases;function drawImageAtIntegerCoords(ctx,srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH){const[a,b,c,d,tx,ty]=(0,_display_utils2.getCurrentTransform)(ctx);if(b===0&&c===0){const tlX=destX*a+tx,rTlX=Math.round(tlX),tlY=destY*d+ty,rTlY=Math.round(tlY),brX=(destX+destW)*a+tx,rWidth=Math.abs(Math.round(brX)-rTlX)||1,brY=(destY+destH)*d+ty,rHeight=Math.abs(Math.round(brY)-rTlY)||1;return ctx.setTransform(Math.sign(a),0,0,Math.sign(d),rTlX,rTlY),ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rWidth,rHeight),ctx.setTransform(a,b,c,d,tx,ty),[rWidth,rHeight]}if(a===0&&d===0){const tlX=destY*c+tx,rTlX=Math.round(tlX),tlY=destX*b+ty,rTlY=Math.round(tlY),brX=(destY+destH)*c+tx,rWidth=Math.abs(Math.round(brX)-rTlX)||1,brY=(destX+destW)*b+ty,rHeight=Math.abs(Math.round(brY)-rTlY)||1;return ctx.setTransform(0,Math.sign(b),Math.sign(c),0,rTlX,rTlY),ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rHeight,rWidth),ctx.setTransform(a,b,c,d,tx,ty),[rHeight,rWidth]}ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);const scaleX=Math.hypot(a,b),scaleY=Math.hypot(c,d);return[scaleX*destW,scaleY*destH]}__name2(drawImageAtIntegerCoords,"drawImageAtIntegerCoords"),__name(drawImageAtIntegerCoords,"drawImageAtIntegerCoords");function compileType3Glyph(imgData){const{width,height}=imgData;if(width>MAX_SIZE_TO_COMPILE||height>MAX_SIZE_TO_COMPILE)return null;const POINT_TO_PROCESS_LIMIT=1e3,POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),width1=width+1;let points=new Uint8Array(width1*(height+1)),i,j,j0;const lineSize=width+7&-8;let data=new Uint8Array(lineSize*height),pos=0;for(const elem of imgData.data){let mask=128;for(;mask>0;)data[pos++]=elem&mask?0:255,mask>>=1}let count=0;for(pos=0,data[pos]!==0&&(points[0]=1,++count),j=1;j<width;j++)data[pos]!==data[pos+1]&&(points[j]=data[pos]?2:1,++count),pos++;for(data[pos]!==0&&(points[j]=2,++count),i=1;i<height;i++){pos=i*lineSize,j0=i*width1,data[pos-lineSize]!==data[pos]&&(points[j0]=data[pos]?1:8,++count);let sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++)sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0),POINT_TYPES[sum]&&(points[j0+j]=POINT_TYPES[sum],++count),pos++;if(data[pos-lineSize]!==data[pos]&&(points[j0+j]=data[pos]?2:4,++count),count>POINT_TO_PROCESS_LIMIT)return null}for(pos=lineSize*(height-1),j0=i*width1,data[pos]!==0&&(points[j0]=8,++count),j=1;j<width;j++)data[pos]!==data[pos+1]&&(points[j0+j]=data[pos]?4:8,++count),pos++;if(data[pos]!==0&&(points[j0+j]=4,++count),count>POINT_TO_PROCESS_LIMIT)return null;const steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]),path=new Path2D;for(i=0;count&&i<=height;i++){let p=i*width1;const end=p+width;for(;p<end&&!points[p];)p++;if(p===end)continue;path.moveTo(p%width1,i);const p0=p;let type=points[p];do{const step=steps[type];do p+=step;while(!points[p]);const pp=points[p];pp!==5&&pp!==10?(type=pp,points[p]=0):(type=pp&51*type>>4,points[p]&=type>>2|type<<2),path.lineTo(p%width1,p/width1|0),points[p]||--count}while(p0!==p);--i}return data=null,points=null,__name(function(c){c.save(),c.scale(1/width,-1/height),c.translate(0,-height),c.fill(path),c.beginPath(),c.restore()},"drawOutline")}__name2(compileType3Glyph,"compileType3Glyph"),__name(compileType3Glyph,"compileType3Glyph");const _CanvasExtraState=class{static{__name2(this,"_CanvasExtraState")}constructor(width,height){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=_util2.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=_util2.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=_util2.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,width,height])}clone(){const clone=Object.create(this);return clone.clipBox=this.clipBox.slice(),clone}setCurrentPoint(x,y){this.x=x,this.y=y}updatePathMinMax(transform,x,y){[x,y]=_util2.Util.applyTransform([x,y],transform),this.minX=Math.min(this.minX,x),this.minY=Math.min(this.minY,y),this.maxX=Math.max(this.maxX,x),this.maxY=Math.max(this.maxY,y)}updateRectMinMax(transform,rect){const p1=_util2.Util.applyTransform(rect,transform),p2=_util2.Util.applyTransform(rect.slice(2),transform);this.minX=Math.min(this.minX,p1[0],p2[0]),this.minY=Math.min(this.minY,p1[1],p2[1]),this.maxX=Math.max(this.maxX,p1[0],p2[0]),this.maxY=Math.max(this.maxY,p1[1],p2[1])}updateScalingPathMinMax(transform,minMax){_util2.Util.scaleMinMax(transform,minMax),this.minX=Math.min(this.minX,minMax[0]),this.maxX=Math.max(this.maxX,minMax[1]),this.minY=Math.min(this.minY,minMax[2]),this.maxY=Math.max(this.maxY,minMax[3])}updateCurvePathMinMax(transform,x0,y0,x1,y1,x2,y2,x3,y3,minMax){const box=_util2.Util.bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3);if(minMax){minMax[0]=Math.min(minMax[0],box[0],box[2]),minMax[1]=Math.max(minMax[1],box[0],box[2]),minMax[2]=Math.min(minMax[2],box[1],box[3]),minMax[3]=Math.max(minMax[3],box[1],box[3]);return}this.updateRectMinMax(transform,box)}getPathBoundingBox(){let pathType=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_pattern_helper.PathType.FILL,transform=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const box=[this.minX,this.minY,this.maxX,this.maxY];if(pathType===_pattern_helper.PathType.STROKE){transform||(0,_util2.unreachable)("Stroke bounding box must include transform.");const scale=_util2.Util.singularValueDecompose2dScale(transform),xStrokePad=scale[0]*this.lineWidth/2,yStrokePad=scale[1]*this.lineWidth/2;box[0]-=xStrokePad,box[1]-=yStrokePad,box[2]+=xStrokePad,box[3]+=yStrokePad}return box}updateClipFromPath(){const intersect=_util2.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(intersect||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(box){this.clipBox=box,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let pathType=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_pattern_helper.PathType.FILL,transform=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return _util2.Util.intersect(this.clipBox,this.getPathBoundingBox(pathType,transform))}};__name(_CanvasExtraState,"CanvasExtraState");let CanvasExtraState=_CanvasExtraState;function putBinaryImageData(ctx,imgData){let transferMaps=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(typeof ImageData<"u"&&imgData instanceof ImageData){ctx.putImageData(imgData,0,0);return}const height=imgData.height,width=imgData.width,partialChunkHeight=height%FULL_CHUNK_HEIGHT,fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT,totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);let srcPos=0,destPos;const src=imgData.data,dest=chunkImgData.data;let i,j,thisChunkHeight,elemsInThisChunk,transferMapRed,transferMapGreen,transferMapBlue,transferMapGray;if(transferMaps)switch(transferMaps.length){case 1:transferMapRed=transferMaps[0],transferMapGreen=transferMaps[0],transferMapBlue=transferMaps[0],transferMapGray=transferMaps[0];break;case 4:transferMapRed=transferMaps[0],transferMapGreen=transferMaps[1],transferMapBlue=transferMaps[2],transferMapGray=transferMaps[3];break}if(imgData.kind===_util2.ImageKind.GRAYSCALE_1BPP){const srcLength=src.byteLength,dest32=new Uint32Array(dest.buffer,0,dest.byteLength>>2),dest32DataLength=dest32.length,fullSrcDiff=width+7>>3;let white=4294967295,black=_util2.FeatureTest.isLittleEndian?4278190080:255;for(transferMapGray&&transferMapGray[0]===255&&transferMapGray[255]===0&&([white,black]=[black,white]),i=0;i<totalChunks;i++){for(thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight,destPos=0,j=0;j<thisChunkHeight;j++){const srcDiff=srcLength-srcPos;let k=0;const kEnd=srcDiff>fullSrcDiff?width:srcDiff*8-7,kEndUnrolled=kEnd&-8;let mask=0,srcByte=0;for(;k<kEndUnrolled;k+=8)srcByte=src[srcPos++],dest32[destPos++]=srcByte&128?white:black,dest32[destPos++]=srcByte&64?white:black,dest32[destPos++]=srcByte&32?white:black,dest32[destPos++]=srcByte&16?white:black,dest32[destPos++]=srcByte&8?white:black,dest32[destPos++]=srcByte&4?white:black,dest32[destPos++]=srcByte&2?white:black,dest32[destPos++]=srcByte&1?white:black;for(;k<kEnd;k++)mask===0&&(srcByte=src[srcPos++],mask=128),dest32[destPos++]=srcByte&mask?white:black,mask>>=1}for(;destPos<dest32DataLength;)dest32[destPos++]=0;ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT)}}else if(imgData.kind===_util2.ImageKind.RGBA_32BPP){const hasTransferMaps=!!(transferMapRed||transferMapGreen||transferMapBlue);for(j=0,elemsInThisChunk=width*FULL_CHUNK_HEIGHT*4,i=0;i<fullChunks;i++){if(dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),srcPos+=elemsInThisChunk,hasTransferMaps)for(let k=0;k<elemsInThisChunk;k+=4)transferMapRed&&(dest[k+0]=transferMapRed[dest[k+0]]),transferMapGreen&&(dest[k+1]=transferMapGreen[dest[k+1]]),transferMapBlue&&(dest[k+2]=transferMapBlue[dest[k+2]]);ctx.putImageData(chunkImgData,0,j),j+=FULL_CHUNK_HEIGHT}if(i<totalChunks){if(elemsInThisChunk=width*partialChunkHeight*4,dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),hasTransferMaps)for(let k=0;k<elemsInThisChunk;k+=4)transferMapRed&&(dest[k+0]=transferMapRed[dest[k+0]]),transferMapGreen&&(dest[k+1]=transferMapGreen[dest[k+1]]),transferMapBlue&&(dest[k+2]=transferMapBlue[dest[k+2]]);ctx.putImageData(chunkImgData,0,j)}}else if(imgData.kind===_util2.ImageKind.RGB_24BPP){const hasTransferMaps=!!(transferMapRed||transferMapGreen||transferMapBlue);for(thisChunkHeight=FULL_CHUNK_HEIGHT,elemsInThisChunk=width*thisChunkHeight,i=0;i<totalChunks;i++){for(i>=fullChunks&&(thisChunkHeight=partialChunkHeight,elemsInThisChunk=width*thisChunkHeight),destPos=0,j=elemsInThisChunk;j--;)dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=255;if(hasTransferMaps)for(let k=0;k<destPos;k+=4)transferMapRed&&(dest[k+0]=transferMapRed[dest[k+0]]),transferMapGreen&&(dest[k+1]=transferMapGreen[dest[k+1]]),transferMapBlue&&(dest[k+2]=transferMapBlue[dest[k+2]]);ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT)}}else throw new Error(`bad image kind: ${imgData.kind}`)}__name2(putBinaryImageData,"putBinaryImageData"),__name(putBinaryImageData,"putBinaryImageData");function putBinaryImageMask(ctx,imgData){if(imgData.bitmap){ctx.drawImage(imgData.bitmap,0,0);return}const height=imgData.height,width=imgData.width,partialChunkHeight=height%FULL_CHUNK_HEIGHT,fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT,totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);let srcPos=0;const src=imgData.data,dest=chunkImgData.data;for(let i=0;i<totalChunks;i++){const thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;({srcPos}=(0,_image_utils.applyMaskImageData)({src,srcPos,dest,width,height:thisChunkHeight})),ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT)}}__name2(putBinaryImageMask,"putBinaryImageMask"),__name(putBinaryImageMask,"putBinaryImageMask");function copyCtxState(sourceCtx,destCtx){const properties=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let i=0,ii=properties.length;i<ii;i++){const property=properties[i];sourceCtx[property]!==void 0&&(destCtx[property]=sourceCtx[property])}sourceCtx.setLineDash!==void 0&&(destCtx.setLineDash(sourceCtx.getLineDash()),destCtx.lineDashOffset=sourceCtx.lineDashOffset)}__name2(copyCtxState,"copyCtxState"),__name(copyCtxState,"copyCtxState");function resetCtxToDefault(ctx,foregroundColor){ctx.strokeStyle=ctx.fillStyle=foregroundColor||"#000000",ctx.fillRule="nonzero",ctx.globalAlpha=1,ctx.lineWidth=1,ctx.lineCap="butt",ctx.lineJoin="miter",ctx.miterLimit=10,ctx.globalCompositeOperation="source-over",ctx.font="10px sans-serif",ctx.setLineDash!==void 0&&(ctx.setLineDash([]),ctx.lineDashOffset=0)}__name2(resetCtxToDefault,"resetCtxToDefault"),__name(resetCtxToDefault,"resetCtxToDefault");function composeSMaskBackdrop(bytes,r0,g0,b0){const length=bytes.length;for(let i=3;i<length;i+=4){const alpha=bytes[i];if(alpha===0)bytes[i-3]=r0,bytes[i-2]=g0,bytes[i-1]=b0;else if(alpha<255){const alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8,bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8,bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8}}}__name2(composeSMaskBackdrop,"composeSMaskBackdrop"),__name(composeSMaskBackdrop,"composeSMaskBackdrop");function composeSMaskAlpha(maskData,layerData,transferMap){const length=maskData.length,scale=1/255;for(let i=3;i<length;i+=4){const alpha=transferMap?transferMap[maskData[i]]:maskData[i];layerData[i]=layerData[i]*alpha*scale|0}}__name2(composeSMaskAlpha,"composeSMaskAlpha"),__name(composeSMaskAlpha,"composeSMaskAlpha");function composeSMaskLuminosity(maskData,layerData,transferMap){const length=maskData.length;for(let i=3;i<length;i+=4){const y=maskData[i-3]*77+maskData[i-2]*152+maskData[i-1]*28;layerData[i]=transferMap?layerData[i]*transferMap[y>>8]>>8:layerData[i]*y>>16}}__name2(composeSMaskLuminosity,"composeSMaskLuminosity"),__name(composeSMaskLuminosity,"composeSMaskLuminosity");function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap,layerOffsetX,layerOffsetY,maskOffsetX,maskOffsetY){const hasBackdrop=!!backdrop,r0=hasBackdrop?backdrop[0]:0,g0=hasBackdrop?backdrop[1]:0,b0=hasBackdrop?backdrop[2]:0;let composeFn;subtype==="Luminosity"?composeFn=composeSMaskLuminosity:composeFn=composeSMaskAlpha;const chunkSize=Math.min(height,Math.ceil(1048576/width));for(let row=0;row<height;row+=chunkSize){const chunkHeight=Math.min(chunkSize,height-row),maskData=maskCtx.getImageData(layerOffsetX-maskOffsetX,row+(layerOffsetY-maskOffsetY),width,chunkHeight),layerData=layerCtx.getImageData(layerOffsetX,row+layerOffsetY,width,chunkHeight);hasBackdrop&&composeSMaskBackdrop(maskData.data,r0,g0,b0),composeFn(maskData.data,layerData.data,transferMap),layerCtx.putImageData(layerData,layerOffsetX,row+layerOffsetY)}}__name2(genericComposeSMask,"genericComposeSMask"),__name(genericComposeSMask,"genericComposeSMask");function composeSMask(ctx,smask,layerCtx,layerBox){const layerOffsetX=layerBox[0],layerOffsetY=layerBox[1],layerWidth=layerBox[2]-layerOffsetX,layerHeight=layerBox[3]-layerOffsetY;layerWidth===0||layerHeight===0||(genericComposeSMask(smask.context,layerCtx,layerWidth,layerHeight,smask.subtype,smask.backdrop,smask.transferMap,layerOffsetX,layerOffsetY,smask.offsetX,smask.offsetY),ctx.save(),ctx.globalAlpha=1,ctx.globalCompositeOperation="source-over",ctx.setTransform(1,0,0,1,0,0),ctx.drawImage(layerCtx.canvas,0,0),ctx.restore())}__name2(composeSMask,"composeSMask"),__name(composeSMask,"composeSMask");function getImageSmoothingEnabled(transform,interpolate){const scale=_util2.Util.singularValueDecompose2dScale(transform);scale[0]=Math.fround(scale[0]),scale[1]=Math.fround(scale[1]);const actualScale=Math.fround((globalThis.devicePixelRatio||1)*_display_utils2.PixelsPerInch.PDF_TO_CSS_UNITS);return interpolate!==void 0?interpolate:scale[0]<=actualScale||scale[1]<=actualScale}__name2(getImageSmoothingEnabled,"getImageSmoothingEnabled"),__name(getImageSmoothingEnabled,"getImageSmoothingEnabled");const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var _restoreInitialState=new WeakSet;const _CanvasGraphics=class _CanvasGraphics2{static{__name2(this,"_CanvasGraphics")}constructor(canvasCtx,commonObjs,objs,canvasFactory,imageLayer,optionalContentConfig,annotationCanvasMap,pageColors){_classPrivateMethodInitSpec2(this,_restoreInitialState),this.ctx=canvasCtx,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=commonObjs,this.objs=objs,this.canvasFactory=canvasFactory,this.imageLayer=imageLayer,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=optionalContentConfig,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=annotationCanvasMap,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=pageColors?.background||null,this.foregroundColor=pageColors?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(data){let fallback=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof data=="string"?data.startsWith("g_")?this.commonObjs.get(data):this.objs.get(data):fallback}beginDrawing(_ref){let{transform,viewport,transparency=!1,background=null}=_ref;const width=this.ctx.canvas.width,height=this.ctx.canvas.height,defaultBackgroundColor=background||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const fg=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const bg=this.backgroundColor=this.ctx.fillStyle;let isValidDefaultBg=!0,defaultBg=defaultBackgroundColor;if(this.ctx.fillStyle=defaultBackgroundColor,defaultBg=this.ctx.fillStyle,isValidDefaultBg=typeof defaultBg=="string"&&/^#[0-9A-Fa-f]{6}$/.test(defaultBg),fg==="#000000"&&bg==="#ffffff"||fg===bg||!isValidDefaultBg)this.foregroundColor=this.backgroundColor=null;else{const[rB,gB,bB]=(0,_display_utils2.getRGB)(defaultBg),newComp=__name(x=>(x/=255,x<=.03928?x/12.92:((x+.055)/1.055)**2.4),"newComp"),lumB=Math.round(.2126*newComp(rB)+.7152*newComp(gB)+.0722*newComp(bB));this.selectColor=(r,g,b)=>{const lumC=.2126*newComp(r)+.7152*newComp(g)+.0722*newComp(b);return Math.round(lumC)===lumB?bg:fg}}}if(this.ctx.fillStyle=this.backgroundColor||defaultBackgroundColor,this.ctx.fillRect(0,0,width,height),this.ctx.restore(),transparency){const transparentCanvas=this.cachedCanvases.getCanvas("transparent",width,height);this.compositeCtx=this.ctx,this.transparentCanvas=transparentCanvas.canvas,this.ctx=transparentCanvas.context,this.ctx.save(),this.ctx.transform(...(0,_display_utils2.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx,this.foregroundColor),transform&&(this.ctx.transform(...transform),this.outputScaleX=transform[0],this.outputScaleY=transform[0]),this.ctx.transform(...viewport.transform),this.viewportScale=viewport.scale,this.baseTransform=(0,_display_utils2.getCurrentTransform)(this.ctx),this.imageLayer&&((0,_display_utils2.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){const argsArray=operatorList.argsArray,fnArray=operatorList.fnArray;let i=executionStartIdx||0;const argsArrayLen=argsArray.length;if(argsArrayLen===i)return i;const chunkOperations=argsArrayLen-i>EXECUTION_STEPS&&typeof continueCallback=="function",endTime=chunkOperations?Date.now()+EXECUTION_TIME:0;let steps=0;const commonObjs=this.commonObjs,objs=this.objs;let fnId;for(;;){if(stepper!==void 0&&i===stepper.nextBreakPoint)return stepper.breakIt(i,continueCallback),i;if(fnId=fnArray[i],fnId!==_util2.OPS.dependency)this[fnId].apply(this,argsArray[i]);else for(const depObjId of argsArray[i]){const objsPool=depObjId.startsWith("g_")?commonObjs:objs;if(!objsPool.has(depObjId))return objsPool.get(depObjId,continueCallback),i}if(i++,i===argsArrayLen)return i;if(chunkOperations&&++steps>EXECUTION_STEPS){if(Date.now()>endTime)return continueCallback(),i;steps=0}}}endDrawing(){_classPrivateMethodGet2(this,_restoreInitialState,_restoreInitialState2).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const cache of this._cachedBitmapsMap.values()){for(const canvas of cache.values())typeof HTMLCanvasElement<"u"&&canvas instanceof HTMLCanvasElement&&(canvas.width=canvas.height=0);cache.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(img,inverseTransform){const width=img.width,height=img.height;let widthScale=Math.max(Math.hypot(inverseTransform[0],inverseTransform[1]),1),heightScale=Math.max(Math.hypot(inverseTransform[2],inverseTransform[3]),1),paintWidth=width,paintHeight=height,tmpCanvasId="prescale1",tmpCanvas,tmpCtx;for(;widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1;){let newWidth=paintWidth,newHeight=paintHeight;widthScale>2&&paintWidth>1&&(newWidth=Math.ceil(paintWidth/2),widthScale/=paintWidth/newWidth),heightScale>2&&paintHeight>1&&(newHeight=Math.ceil(paintHeight/2),heightScale/=paintHeight/newHeight),tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight),tmpCtx=tmpCanvas.context,tmpCtx.clearRect(0,0,newWidth,newHeight),tmpCtx.drawImage(img,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight),img=tmpCanvas.canvas,paintWidth=newWidth,paintHeight=newHeight,tmpCanvasId=tmpCanvasId==="prescale1"?"prescale2":"prescale1"}return{img,paintWidth,paintHeight}}_createMaskCanvas(img){const ctx=this.ctx,{width,height}=img,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill,currentTransform=(0,_display_utils2.getCurrentTransform)(ctx);let cache,cacheKey,scaled,maskCanvas;if((img.bitmap||img.data)&&img.count>1){const mainKey=img.bitmap||img.data.buffer,withoutTranslation=currentTransform.slice(0,4);cacheKey=JSON.stringify(isPatternFill?withoutTranslation:[withoutTranslation,fillColor]),cache=this._cachedBitmapsMap.get(mainKey),cache||(cache=new Map,this._cachedBitmapsMap.set(mainKey,cache));const cachedImage=cache.get(cacheKey);if(cachedImage&&!isPatternFill){const offsetX2=Math.round(Math.min(currentTransform[0],currentTransform[2])+currentTransform[4]),offsetY2=Math.round(Math.min(currentTransform[1],currentTransform[3])+currentTransform[5]);return{canvas:cachedImage,offsetX:offsetX2,offsetY:offsetY2}}scaled=cachedImage}scaled||(maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),putBinaryImageMask(maskCanvas.context,img));let maskToCanvas=_util2.Util.transform(currentTransform,[1/width,0,0,-1/height,0,0]);maskToCanvas=_util2.Util.transform(maskToCanvas,[1,0,0,1,0,-height]);const cord1=_util2.Util.applyTransform([0,0],maskToCanvas),cord2=_util2.Util.applyTransform([width,height],maskToCanvas),rect=_util2.Util.normalizeRect([cord1[0],cord1[1],cord2[0],cord2[1]]),drawnWidth=Math.round(rect[2]-rect[0])||1,drawnHeight=Math.round(rect[3]-rect[1])||1,fillCanvas=this.cachedCanvases.getCanvas("fillCanvas",drawnWidth,drawnHeight),fillCtx=fillCanvas.context,offsetX=Math.min(cord1[0],cord2[0]),offsetY=Math.min(cord1[1],cord2[1]);fillCtx.translate(-offsetX,-offsetY),fillCtx.transform(...maskToCanvas),scaled||(scaled=this._scaleImage(maskCanvas.canvas,(0,_display_utils2.getCurrentTransformInverse)(fillCtx)),scaled=scaled.img,cache&&isPatternFill&&cache.set(cacheKey,scaled)),fillCtx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils2.getCurrentTransform)(fillCtx),img.interpolate),drawImageAtIntegerCoords(fillCtx,scaled,0,0,scaled.width,scaled.height,0,0,width,height),fillCtx.globalCompositeOperation="source-in";const inverse=_util2.Util.transform((0,_display_utils2.getCurrentTransformInverse)(fillCtx),[1,0,0,1,-offsetX,-offsetY]);return fillCtx.fillStyle=isPatternFill?fillColor.getPattern(ctx,this,inverse,_pattern_helper.PathType.FILL):fillColor,fillCtx.fillRect(0,0,width,height),cache&&!isPatternFill&&(this.cachedCanvases.delete("fillCanvas"),cache.set(cacheKey,fillCanvas.canvas)),{canvas:fillCanvas.canvas,offsetX:Math.round(offsetX),offsetY:Math.round(offsetY)}}setLineWidth(width){width!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=width,this.ctx.lineWidth=width}setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style]}setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style]}setMiterLimit(limit){this.ctx.miterLimit=limit}setDash(dashArray,dashPhase){const ctx=this.ctx;ctx.setLineDash!==void 0&&(ctx.setLineDash(dashArray),ctx.lineDashOffset=dashPhase)}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(let i=0,ii=states.length;i<ii;i++){const state=states[i],key=state[0],value=state[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value[0],value[1]);break;case"CA":this.current.strokeAlpha=state[1];break;case"ca":this.current.fillAlpha=state[1],this.ctx.globalAlpha=state[1];break;case"BM":this.ctx.globalCompositeOperation=value;break;case"SMask":this.current.activeSMask=value?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=value}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const inSMaskMode=this.inSMaskMode;this.current.activeSMask&&!inSMaskMode?this.beginSMaskMode():!this.current.activeSMask&&inSMaskMode&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const drawnWidth=this.ctx.canvas.width,drawnHeight=this.ctx.canvas.height,cacheId="smaskGroupAt"+this.groupLevel,scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);this.suspendedCtx=this.ctx,this.ctx=scratchCanvas.context;const ctx=this.ctx;ctx.setTransform(...(0,_display_utils2.getCurrentTransform)(this.suspendedCtx)),copyCtxState(this.suspendedCtx,ctx),mirrorContextOperations(ctx,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(dirtyBox){if(!this.current.activeSMask)return;dirtyBox?(dirtyBox[0]=Math.floor(dirtyBox[0]),dirtyBox[1]=Math.floor(dirtyBox[1]),dirtyBox[2]=Math.ceil(dirtyBox[2]),dirtyBox[3]=Math.ceil(dirtyBox[3])):dirtyBox=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const smask=this.current.activeSMask,suspendedCtx=this.suspendedCtx;composeSMask(suspendedCtx,smask,this.ctx,dirtyBox),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(copyCtxState(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const old=this.current;this.stateStack.push(old),this.current=old.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),copyCtxState(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(ops,args,minMax){const ctx=this.ctx,current=this.current;let x=current.x,y=current.y,startX,startY;const currentTransform=(0,_display_utils2.getCurrentTransform)(ctx),isScalingMatrix=currentTransform[0]===0&&currentTransform[3]===0||currentTransform[1]===0&&currentTransform[2]===0,minMaxForBezier=isScalingMatrix?minMax.slice(0):null;for(let i=0,j=0,ii=ops.length;i<ii;i++)switch(ops[i]|0){case _util2.OPS.rectangle:x=args[j++],y=args[j++];const width=args[j++],height=args[j++],xw=x+width,yh=y+height;ctx.moveTo(x,y),width===0||height===0?ctx.lineTo(xw,yh):(ctx.lineTo(xw,y),ctx.lineTo(xw,yh),ctx.lineTo(x,yh)),isScalingMatrix||current.updateRectMinMax(currentTransform,[x,y,xw,yh]),ctx.closePath();break;case _util2.OPS.moveTo:x=args[j++],y=args[j++],ctx.moveTo(x,y),isScalingMatrix||current.updatePathMinMax(currentTransform,x,y);break;case _util2.OPS.lineTo:x=args[j++],y=args[j++],ctx.lineTo(x,y),isScalingMatrix||current.updatePathMinMax(currentTransform,x,y);break;case _util2.OPS.curveTo:startX=x,startY=y,x=args[j+4],y=args[j+5],ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y),current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],args[j+2],args[j+3],x,y,minMaxForBezier),j+=6;break;case _util2.OPS.curveTo2:startX=x,startY=y,ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]),current.updateCurvePathMinMax(currentTransform,startX,startY,x,y,args[j],args[j+1],args[j+2],args[j+3],minMaxForBezier),x=args[j+2],y=args[j+3],j+=4;break;case _util2.OPS.curveTo3:startX=x,startY=y,x=args[j+2],y=args[j+3],ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y),current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],x,y,x,y,minMaxForBezier),j+=4;break;case _util2.OPS.closePath:ctx.closePath();break}isScalingMatrix&&current.updateScalingPathMinMax(currentTransform,minMaxForBezier),current.setCurrentPoint(x,y)}closePath(){this.ctx.closePath()}stroke(consumePath){consumePath=typeof consumePath<"u"?consumePath:!0;const ctx=this.ctx,strokeColor=this.current.strokeColor;ctx.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof strokeColor=="object"&&strokeColor!==null&&strokeColor!==void 0&&strokeColor.getPattern?(ctx.save(),ctx.strokeStyle=strokeColor.getPattern(ctx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.STROKE),this.rescaleAndStroke(!1),ctx.restore()):this.rescaleAndStroke(!0)),consumePath&&this.consumePath(this.current.getClippedPathBoundingBox()),ctx.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(consumePath){consumePath=typeof consumePath<"u"?consumePath:!0;const ctx=this.ctx,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill;let needRestore=!1;isPatternFill&&(ctx.save(),ctx.fillStyle=fillColor.getPattern(ctx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL),needRestore=!0);const intersect=this.current.getClippedPathBoundingBox();this.contentVisible&&intersect!==null&&(this.pendingEOFill?(ctx.fill("evenodd"),this.pendingEOFill=!1):ctx.fill()),needRestore&&ctx.restore(),consumePath&&this.consumePath(intersect)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=_util2.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const paths=this.pendingTextPaths,ctx=this.ctx;if(paths===void 0){ctx.beginPath();return}ctx.save(),ctx.beginPath();for(const path of paths)ctx.setTransform(...path.transform),ctx.translate(path.x,path.y),path.addToPath(ctx,path.fontSize);ctx.restore(),ctx.clip(),ctx.beginPath(),delete this.pendingTextPaths}setCharSpacing(spacing){this.current.charSpacing=spacing}setWordSpacing(spacing){this.current.wordSpacing=spacing}setHScale(scale){this.current.textHScale=scale/100}setLeading(leading){this.current.leading=-leading}setFont(fontRefName,size){const fontObj=this.commonObjs.get(fontRefName),current=this.current;if(!fontObj)throw new Error(`Can't find font for ${fontRefName}`);if(current.fontMatrix=fontObj.fontMatrix||_util2.FONT_IDENTITY_MATRIX,(current.fontMatrix[0]===0||current.fontMatrix[3]===0)&&(0,_util2.warn)("Invalid font matrix for font "+fontRefName),size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,this.current.font=fontObj,this.current.fontSize=size,fontObj.isType3Font)return;const name=fontObj.loadedName||"sans-serif";let bold="normal";fontObj.black?bold="900":fontObj.bold&&(bold="bold");const italic=fontObj.italic?"italic":"normal",typeface=`"${name}", ${fontObj.fallbackName}`;let browserFontSize=size;size<MIN_FONT_SIZE?browserFontSize=MIN_FONT_SIZE:size>MAX_FONT_SIZE&&(browserFontSize=MAX_FONT_SIZE),this.current.fontSizeScale=size/browserFontSize,this.ctx.font=`${italic} ${bold} ${browserFontSize}px ${typeface}`}setTextRenderingMode(mode){this.current.textRenderingMode=mode}setTextRise(rise){this.current.textRise=rise}moveText(x,y){this.current.x=this.current.lineX+=x,this.current.y=this.current.lineY+=y}setLeadingMoveText(x,y){this.setLeading(-y),this.moveText(x,y)}setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f],this.current.textMatrixScale=Math.hypot(a,b),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(character,x,y,patternTransform){const ctx=this.ctx,current=this.current,font=current.font,textRenderingMode=current.textRenderingMode,fontSize=current.fontSize/current.fontSizeScale,fillStrokeMode=textRenderingMode&_util2.TextRenderingMode.FILL_STROKE_MASK,isAddToPathSet=!!(textRenderingMode&_util2.TextRenderingMode.ADD_TO_PATH_FLAG),patternFill=current.patternFill&&!font.missingFile;let addToPath;(font.disableFontFace||isAddToPathSet||patternFill)&&(addToPath=font.getPathGenerator(this.commonObjs,character)),font.disableFontFace||patternFill?(ctx.save(),ctx.translate(x,y),ctx.beginPath(),addToPath(ctx,fontSize),patternTransform&&ctx.setTransform(...patternTransform),(fillStrokeMode===_util2.TextRenderingMode.FILL||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&ctx.fill(),(fillStrokeMode===_util2.TextRenderingMode.STROKE||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&ctx.stroke(),ctx.restore()):((fillStrokeMode===_util2.TextRenderingMode.FILL||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&ctx.fillText(character,x,y),(fillStrokeMode===_util2.TextRenderingMode.STROKE||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&ctx.strokeText(character,x,y)),isAddToPathSet&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,_display_utils2.getCurrentTransform)(ctx),x,y,fontSize,addToPath})}get isFontSubpixelAAEnabled(){const{context:ctx}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);ctx.scale(1.5,1),ctx.fillText("I",0,10);const data=ctx.getImageData(0,0,10,10).data;let enabled=!1;for(let i=3;i<data.length;i+=4)if(data[i]>0&&data[i]<255){enabled=!0;break}return(0,_util2.shadow)(this,"isFontSubpixelAAEnabled",enabled)}showText(glyphs){const current=this.current,font=current.font;if(font.isType3Font)return this.showType3Text(glyphs);const fontSize=current.fontSize;if(fontSize===0)return;const ctx=this.ctx,fontSizeScale=current.fontSizeScale,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,glyphsLength=glyphs.length,vertical=font.vertical,spacingDir=vertical?1:-1,defaultVMetrics=font.defaultVMetrics,widthAdvanceScale=fontSize*current.fontMatrix[0],simpleFillText=current.textRenderingMode===_util2.TextRenderingMode.FILL&&!font.disableFontFace&&!current.patternFill;ctx.save(),ctx.transform(...current.textMatrix),ctx.translate(current.x,current.y+current.textRise),fontDirection>0?ctx.scale(textHScale,-1):ctx.scale(textHScale,1);let patternTransform;if(current.patternFill){ctx.save();const pattern=current.fillColor.getPattern(ctx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL);patternTransform=(0,_display_utils2.getCurrentTransform)(ctx),ctx.restore(),ctx.fillStyle=pattern}let lineWidth=current.lineWidth;const scale=current.textMatrixScale;if(scale===0||lineWidth===0){const fillStrokeMode=current.textRenderingMode&_util2.TextRenderingMode.FILL_STROKE_MASK;(fillStrokeMode===_util2.TextRenderingMode.STROKE||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&(lineWidth=this.getSinglePixelWidth())}else lineWidth/=scale;fontSizeScale!==1&&(ctx.scale(fontSizeScale,fontSizeScale),lineWidth/=fontSizeScale),ctx.lineWidth=lineWidth;let x=0,i;for(i=0;i<glyphsLength;++i){const glyph=glyphs[i];if(typeof glyph=="number"){x+=spacingDir*glyph*fontSize/1e3;continue}let restoreNeeded=!1;const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,character=glyph.fontChar,accent=glyph.accent;let scaledX,scaledY,width=glyph.width;if(vertical){const vmetric=glyph.vmetric||defaultVMetrics,vx=-(glyph.vmetric?vmetric[1]:width*.5)*widthAdvanceScale,vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width,scaledX=vx/fontSizeScale,scaledY=(x+vy)/fontSizeScale}else scaledX=x/fontSizeScale,scaledY=0;if(font.remeasure&&width>0){const measuredWidth=ctx.measureText(character).width*1e3/fontSize*fontSizeScale;if(width<measuredWidth&&this.isFontSubpixelAAEnabled){const characterScaleX=width/measuredWidth;restoreNeeded=!0,ctx.save(),ctx.scale(characterScaleX,1),scaledX/=characterScaleX}else width!==measuredWidth&&(scaledX+=(width-measuredWidth)/2e3*fontSize/fontSizeScale)}if(this.contentVisible&&(glyph.isInFont||font.missingFile)){if(simpleFillText&&!accent)ctx.fillText(character,scaledX,scaledY);else if(this.paintChar(character,scaledX,scaledY,patternTransform),accent){const scaledAccentX=scaledX+fontSize*accent.offset.x/fontSizeScale,scaledAccentY=scaledY-fontSize*accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY,patternTransform)}}let charWidth;vertical?charWidth=width*widthAdvanceScale-spacing*fontDirection:charWidth=width*widthAdvanceScale+spacing*fontDirection,x+=charWidth,restoreNeeded&&ctx.restore()}vertical?current.y-=x:current.x+=x*textHScale,ctx.restore(),this.compose()}showType3Text(glyphs){const ctx=this.ctx,current=this.current,font=current.font,fontSize=current.fontSize,fontDirection=current.fontDirection,spacingDir=font.vertical?1:-1,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,textHScale=current.textHScale*fontDirection,fontMatrix=current.fontMatrix||_util2.FONT_IDENTITY_MATRIX,glyphsLength=glyphs.length,isTextInvisible=current.textRenderingMode===_util2.TextRenderingMode.INVISIBLE;let i,glyph,width,spacingLength;if(!(isTextInvisible||fontSize===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,ctx.save(),ctx.transform(...current.textMatrix),ctx.translate(current.x,current.y),ctx.scale(textHScale,fontDirection),i=0;i<glyphsLength;++i){if(glyph=glyphs[i],typeof glyph=="number"){spacingLength=spacingDir*glyph*fontSize/1e3,this.ctx.translate(spacingLength,0),current.x+=spacingLength*textHScale;continue}const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){(0,_util2.warn)(`Type3 character "${glyph.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=glyph,this.save(),ctx.scale(fontSize,fontSize),ctx.transform(...fontMatrix),this.executeOperatorList(operatorList),this.restore()),width=_util2.Util.applyTransform([glyph.width,0],fontMatrix)[0]*fontSize+spacing,ctx.translate(width,0),current.x+=width*textHScale}ctx.restore(),this.processingType3=null}}setCharWidth(xWidth,yWidth){}setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly),this.ctx.clip(),this.endPath()}getColorN_Pattern(IR){let pattern;if(IR[0]==="TilingPattern"){const color=IR[1],baseTransform=this.baseTransform||(0,_display_utils2.getCurrentTransform)(this.ctx),canvasGraphicsFactory={createCanvasGraphics:ctx=>new _CanvasGraphics2(ctx,this.commonObjs,this.objs,this.canvasFactory)};pattern=new _pattern_helper.TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform)}else pattern=this._getPattern(IR[1],IR[2]);return pattern}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(r,g,b){var _this$selectColor;const color=((_this$selectColor=this.selectColor)===null||_this$selectColor===void 0?void 0:_this$selectColor.call(this,r,g,b))||_util2.Util.makeHexColor(r,g,b);this.ctx.strokeStyle=color,this.current.strokeColor=color}setFillRGBColor(r,g,b){var _this$selectColor2;const color=((_this$selectColor2=this.selectColor)===null||_this$selectColor2===void 0?void 0:_this$selectColor2.call(this,r,g,b))||_util2.Util.makeHexColor(r,g,b);this.ctx.fillStyle=color,this.current.fillColor=color,this.current.patternFill=!1}_getPattern(objId){let matrix=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,pattern;return this.cachedPatterns.has(objId)?pattern=this.cachedPatterns.get(objId):(pattern=(0,_pattern_helper.getShadingPattern)(this.objs.get(objId)),this.cachedPatterns.set(objId,pattern)),matrix&&(pattern.matrix=matrix),pattern}shadingFill(objId){if(!this.contentVisible)return;const ctx=this.ctx;this.save();const pattern=this._getPattern(objId);ctx.fillStyle=pattern.getPattern(ctx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.SHADING);const inv=(0,_display_utils2.getCurrentTransformInverse)(ctx);if(inv){const canvas=ctx.canvas,width=canvas.width,height=canvas.height,bl=_util2.Util.applyTransform([0,0],inv),br=_util2.Util.applyTransform([0,height],inv),ul=_util2.Util.applyTransform([width,0],inv),ur=_util2.Util.applyTransform([width,height],inv),x0=Math.min(bl[0],br[0],ul[0],ur[0]),y0=Math.min(bl[1],br[1],ul[1],ur[1]),x1=Math.max(bl[0],br[0],ul[0],ur[0]),y1=Math.max(bl[1],br[1],ul[1],ur[1]);this.ctx.fillRect(x0,y0,x1-x0,y1-y0)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,_util2.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,_util2.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(matrix,bbox){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(matrix)&&matrix.length===6&&this.transform(...matrix),this.baseTransform=(0,_display_utils2.getCurrentTransform)(this.ctx),bbox)){const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height),this.current.updateRectMinMax((0,_display_utils2.getCurrentTransform)(this.ctx),bbox),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(group){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const currentCtx=this.ctx;group.isolated||(0,_util2.info)("TODO: Support non-isolated groups."),group.knockout&&(0,_util2.warn)("Knockout groups not supported.");const currentTransform=(0,_display_utils2.getCurrentTransform)(currentCtx);if(group.matrix&&currentCtx.transform(...group.matrix),!group.bbox)throw new Error("Bounding box is required.");let bounds=_util2.Util.getAxialAlignedBoundingBox(group.bbox,(0,_display_utils2.getCurrentTransform)(currentCtx));const canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=_util2.Util.intersect(bounds,canvasBounds)||[0,0,0,0];const offsetX=Math.floor(bounds[0]),offsetY=Math.floor(bounds[1]);let drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1),drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1),scaleX=1,scaleY=1;drawnWidth>MAX_GROUP_SIZE&&(scaleX=drawnWidth/MAX_GROUP_SIZE,drawnWidth=MAX_GROUP_SIZE),drawnHeight>MAX_GROUP_SIZE&&(scaleY=drawnHeight/MAX_GROUP_SIZE,drawnHeight=MAX_GROUP_SIZE),this.current.startNewPathAndClipBox([0,0,drawnWidth,drawnHeight]);let cacheId="groupAt"+this.groupLevel;group.smask&&(cacheId+="_smask_"+this.smaskCounter++%2);const scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight),groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX,1/scaleY),groupCtx.translate(-offsetX,-offsetY),groupCtx.transform(...currentTransform),group.smask?this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX,offsetY,scaleX,scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null}):(currentCtx.setTransform(1,0,0,1,0,0),currentCtx.translate(offsetX,offsetY),currentCtx.scale(scaleX,scaleY),currentCtx.save()),copyCtxState(currentCtx,groupCtx),this.ctx=groupCtx,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(currentCtx),this.groupLevel++}endGroup(group){if(!this.contentVisible)return;this.groupLevel--;const groupCtx=this.ctx,ctx=this.groupStack.pop();if(this.ctx=ctx,this.ctx.imageSmoothingEnabled=!1,group.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const currentMtx=(0,_display_utils2.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...currentMtx);const dirtyBox=_util2.Util.getAxialAlignedBoundingBox([0,0,groupCtx.canvas.width,groupCtx.canvas.height],currentMtx);this.ctx.drawImage(groupCtx.canvas,0,0),this.ctx.restore(),this.compose(dirtyBox)}}beginAnnotation(id,rect,transform,matrix,hasOwnCanvas){if(_classPrivateMethodGet2(this,_restoreInitialState,_restoreInitialState2).call(this),resetCtxToDefault(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(rect)&&rect.length===4){const width=rect[2]-rect[0],height=rect[3]-rect[1];if(hasOwnCanvas&&this.annotationCanvasMap){transform=transform.slice(),transform[4]-=rect[0],transform[5]-=rect[1],rect=rect.slice(),rect[0]=rect[1]=0,rect[2]=width,rect[3]=height;const[scaleX,scaleY]=_util2.Util.singularValueDecompose2dScale((0,_display_utils2.getCurrentTransform)(this.ctx)),{viewportScale}=this,canvasWidth=Math.ceil(width*this.outputScaleX*viewportScale),canvasHeight=Math.ceil(height*this.outputScaleY*viewportScale);this.annotationCanvas=this.canvasFactory.create(canvasWidth,canvasHeight);const{canvas,context}=this.annotationCanvas;this.annotationCanvasMap.set(id,canvas),this.annotationCanvas.savedCtx=this.ctx,this.ctx=context,this.ctx.setTransform(scaleX,0,0,-scaleY,0,height*scaleY),resetCtxToDefault(this.ctx,this.foregroundColor)}else resetCtxToDefault(this.ctx,this.foregroundColor),this.ctx.rect(rect[0],rect[1],width,height),this.ctx.clip(),this.endPath()}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...transform),this.transform(...matrix)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(img){if(!this.contentVisible)return;const count=img.count;img=this.getObject(img.data,img),img.count=count;const ctx=this.ctx,glyph=this.processingType3;if(glyph&&(glyph.compiled===void 0&&(glyph.compiled=compileType3Glyph(img)),glyph.compiled)){glyph.compiled(ctx);return}const mask=this._createMaskCanvas(img),maskCanvas=mask.canvas;ctx.save(),ctx.setTransform(1,0,0,1,0,0),ctx.drawImage(maskCanvas,mask.offsetX,mask.offsetY),ctx.restore(),this.compose()}paintImageMaskXObjectRepeat(img,scaleX){let skewX=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,skewY=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,scaleY=arguments.length>4?arguments[4]:void 0,positions=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;img=this.getObject(img.data,img);const ctx=this.ctx;ctx.save();const currentTransform=(0,_display_utils2.getCurrentTransform)(ctx);ctx.transform(scaleX,skewX,skewY,scaleY,0,0);const mask=this._createMaskCanvas(img);ctx.setTransform(1,0,0,1,0,0);for(let i=0,ii=positions.length;i<ii;i+=2){const trans=_util2.Util.transform(currentTransform,[scaleX,skewX,skewY,scaleY,positions[i],positions[i+1]]),[x,y]=_util2.Util.applyTransform([0,0],trans);ctx.drawImage(mask.canvas,x,y)}ctx.restore(),this.compose()}paintImageMaskXObjectGroup(images){if(!this.contentVisible)return;const ctx=this.ctx,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill;for(const image of images){const{data,width,height,transform}=image,maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),maskCtx=maskCanvas.context;maskCtx.save();const img=this.getObject(data,image);putBinaryImageMask(maskCtx,img),maskCtx.globalCompositeOperation="source-in",maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL):fillColor,maskCtx.fillRect(0,0,width,height),maskCtx.restore(),ctx.save(),ctx.transform(...transform),ctx.scale(1,-1),drawImageAtIntegerCoords(ctx,maskCanvas.canvas,0,0,width,height,0,-1,1,1),ctx.restore()}this.compose()}paintImageXObject(objId){if(!this.contentVisible)return;const imgData=this.getObject(objId);if(!imgData){(0,_util2.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(imgData)}paintImageXObjectRepeat(objId,scaleX,scaleY,positions){if(!this.contentVisible)return;const imgData=this.getObject(objId);if(!imgData){(0,_util2.warn)("Dependent image isn't ready yet");return}const width=imgData.width,height=imgData.height,map=[];for(let i=0,ii=positions.length;i<ii;i+=2)map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height});this.paintInlineImageXObjectGroup(imgData,map)}paintInlineImageXObject(imgData){if(!this.contentVisible)return;const width=imgData.width,height=imgData.height,ctx=this.ctx;this.save(),ctx.scale(1/width,-1/height);let imgToPaint;if(typeof HTMLElement=="function"&&imgData instanceof HTMLElement||!imgData.data)imgToPaint=imgData;else{const tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",width,height),tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData,this.current.transferMaps),imgToPaint=tmpCanvas.canvas}const scaled=this._scaleImage(imgToPaint,(0,_display_utils2.getCurrentTransformInverse)(ctx));ctx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils2.getCurrentTransform)(ctx),imgData.interpolate);const[rWidth,rHeight]=drawImageAtIntegerCoords(ctx,scaled.img,0,0,scaled.paintWidth,scaled.paintHeight,0,-height,width,height);if(this.imageLayer){const[left,top]=_util2.Util.applyTransform([0,-height],(0,_display_utils2.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData,left,top,width:rWidth,height:rHeight})}this.compose(),this.restore()}paintInlineImageXObjectGroup(imgData,map){if(!this.contentVisible)return;const ctx=this.ctx,w=imgData.width,h=imgData.height,tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",w,h),tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData,this.current.transferMaps);for(const entry of map){if(ctx.save(),ctx.transform(...entry.transform),ctx.scale(1,-1),drawImageAtIntegerCoords(ctx,tmpCanvas.canvas,entry.x,entry.y,entry.w,entry.h,0,-1,1,1),this.imageLayer){const[left,top]=_util2.Util.applyTransform([entry.x,entry.y],(0,_display_utils2.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData,left,top,width:w,height:h})}ctx.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(tag){}markPointProps(tag,properties){}beginMarkedContent(tag){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(tag,properties){tag==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(properties)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(clipBox){const isEmpty=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(clipBox);const ctx=this.ctx;this.pendingClip&&(isEmpty||(this.pendingClip===EO_CLIP?ctx.clip("evenodd"):ctx.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),ctx.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const m=(0,_display_utils2.getCurrentTransform)(this.ctx);if(m[1]===0&&m[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));else{const absDet=Math.abs(m[0]*m[3]-m[2]*m[1]),normX=Math.hypot(m[0],m[2]),normY=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(normX,normY)/absDet}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth}=this.current,m=(0,_display_utils2.getCurrentTransform)(this.ctx);let scaleX,scaleY;if(m[1]===0&&m[2]===0){const normX=Math.abs(m[0]),normY=Math.abs(m[3]);if(lineWidth===0)scaleX=1/normX,scaleY=1/normY;else{const scaledXLineWidth=normX*lineWidth,scaledYLineWidth=normY*lineWidth;scaleX=scaledXLineWidth<1?1/scaledXLineWidth:1,scaleY=scaledYLineWidth<1?1/scaledYLineWidth:1}}else{const absDet=Math.abs(m[0]*m[3]-m[2]*m[1]),normX=Math.hypot(m[0],m[1]),normY=Math.hypot(m[2],m[3]);if(lineWidth===0)scaleX=normY/absDet,scaleY=normX/absDet;else{const baseArea=lineWidth*absDet;scaleX=normY>baseArea?normY/baseArea:1,scaleY=normX>baseArea?normX/baseArea:1}}this._cachedScaleForStroking=[scaleX,scaleY]}return this._cachedScaleForStroking}rescaleAndStroke(saveRestore){const{ctx}=this,{lineWidth}=this.current,[scaleX,scaleY]=this.getScaleForStroking();if(ctx.lineWidth=lineWidth||1,scaleX===1&&scaleY===1){ctx.stroke();return}let savedMatrix,savedDashes,savedDashOffset;saveRestore&&(savedMatrix=(0,_display_utils2.getCurrentTransform)(ctx),savedDashes=ctx.getLineDash().slice(),savedDashOffset=ctx.lineDashOffset),ctx.scale(scaleX,scaleY);const scale=Math.max(scaleX,scaleY);ctx.setLineDash(ctx.getLineDash().map(x=>x/scale)),ctx.lineDashOffset/=scale,ctx.stroke(),saveRestore&&(ctx.setTransform(...savedMatrix),ctx.setLineDash(savedDashes),ctx.lineDashOffset=savedDashOffset)}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}};__name(_CanvasGraphics,"CanvasGraphics");let CanvasGraphics=_CanvasGraphics;exports2.CanvasGraphics=CanvasGraphics;function _restoreInitialState2(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}__name2(_restoreInitialState2,"_restoreInitialState2"),__name(_restoreInitialState2,"_restoreInitialState2");for(const op in _util2.OPS)CanvasGraphics.prototype[op]!==void 0&&(CanvasGraphics.prototype[_util2.OPS[op]]=CanvasGraphics.prototype[op])},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.TilingPattern=exports2.PathType=void 0,exports2.getShadingPattern=getShadingPattern;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(133),_is_node2=__w_pdfjs_require__2(3);const PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};exports2.PathType=PathType;function applyBoundingBox(ctx,bbox){if(!bbox||_is_node2.isNodeJS)return;const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],region=new Path2D;region.rect(bbox[0],bbox[1],width,height),ctx.clip(region)}__name2(applyBoundingBox,"applyBoundingBox"),__name(applyBoundingBox,"applyBoundingBox");const _BaseShadingPattern=class _BaseShadingPattern2{static{__name2(this,"_BaseShadingPattern")}constructor(){this.constructor===_BaseShadingPattern2&&(0,_util2.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,_util2.unreachable)("Abstract method `getPattern` called.")}};__name(_BaseShadingPattern,"BaseShadingPattern");let BaseShadingPattern=_BaseShadingPattern;const _RadialAxialShadingPattern=class extends BaseShadingPattern{static{__name2(this,"_RadialAxialShadingPattern")}constructor(IR){super(),this._type=IR[1],this._bbox=IR[2],this._colorStops=IR[3],this._p0=IR[4],this._p1=IR[5],this._r0=IR[6],this._r1=IR[7],this.matrix=null}_createGradient(ctx){let grad;this._type==="axial"?grad=ctx.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(grad=ctx.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const colorStop of this._colorStops)grad.addColorStop(colorStop[0],colorStop[1]);return grad}getPattern(ctx,owner,inverse,pathType){let pattern;if(pathType===PathType.STROKE||pathType===PathType.FILL){const ownerBBox=owner.current.getClippedPathBoundingBox(pathType,(0,_display_utils2.getCurrentTransform)(ctx))||[0,0,0,0],width=Math.ceil(ownerBBox[2]-ownerBBox[0])||1,height=Math.ceil(ownerBBox[3]-ownerBBox[1])||1,tmpCanvas=owner.cachedCanvases.getCanvas("pattern",width,height,!0),tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height),tmpCtx.beginPath(),tmpCtx.rect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height),tmpCtx.translate(-ownerBBox[0],-ownerBBox[1]),inverse=_util2.Util.transform(inverse,[1,0,0,1,ownerBBox[0],ownerBBox[1]]),tmpCtx.transform(...owner.baseTransform),this.matrix&&tmpCtx.transform(...this.matrix),applyBoundingBox(tmpCtx,this._bbox),tmpCtx.fillStyle=this._createGradient(tmpCtx),tmpCtx.fill(),pattern=ctx.createPattern(tmpCanvas.canvas,"no-repeat");const domMatrix=new DOMMatrix(inverse);try{pattern.setTransform(domMatrix)}catch(ex){(0,_util2.warn)(`RadialAxialShadingPattern.getPattern: "${ex?.message}".`)}}else applyBoundingBox(ctx,this._bbox),pattern=this._createGradient(ctx);return pattern}};__name(_RadialAxialShadingPattern,"RadialAxialShadingPattern");let RadialAxialShadingPattern=_RadialAxialShadingPattern;function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){const coords=context.coords,colors=context.colors,bytes=data.data,rowSize=data.width*4;let tmp;coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp),coords[p2+1]>coords[p3+1]&&(tmp=p2,p2=p3,p3=tmp,tmp=c2,c2=c3,c3=tmp),coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp);const x1=(coords[p1]+context.offsetX)*context.scaleX,y1=(coords[p1+1]+context.offsetY)*context.scaleY,x2=(coords[p2]+context.offsetX)*context.scaleX,y2=(coords[p2+1]+context.offsetY)*context.scaleY,x3=(coords[p3]+context.offsetX)*context.scaleX,y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3)return;const c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2],c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2],c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2],minY=Math.round(y1),maxY=Math.round(y3);let xa,car,cag,cab,xb,cbr,cbg,cbb;for(let y=minY;y<=maxY;y++){if(y<y2){let k2;y<y1?k2=0:k2=(y1-y)/(y1-y2),xa=x1-(x1-x2)*k2,car=c1r-(c1r-c2r)*k2,cag=c1g-(c1g-c2g)*k2,cab=c1b-(c1b-c2b)*k2}else{let k2;y>y3?k2=1:y2===y3?k2=0:k2=(y2-y)/(y2-y3),xa=x2-(x2-x3)*k2,car=c2r-(c2r-c3r)*k2,cag=c2g-(c2g-c3g)*k2,cab=c2b-(c2b-c3b)*k2}let k;y<y1?k=0:y>y3?k=1:k=(y1-y)/(y1-y3),xb=x1-(x1-x3)*k,cbr=c1r-(c1r-c3r)*k,cbg=c1g-(c1g-c3g)*k,cbb=c1b-(c1b-c3b)*k;const x1_=Math.round(Math.min(xa,xb)),x2_=Math.round(Math.max(xa,xb));let j=rowSize*y+x1_*4;for(let x=x1_;x<=x2_;x++)k=(xa-x)/(xa-xb),k<0?k=0:k>1&&(k=1),bytes[j++]=car-(car-cbr)*k|0,bytes[j++]=cag-(cag-cbg)*k|0,bytes[j++]=cab-(cab-cbb)*k|0,bytes[j++]=255}}__name2(drawTriangle,"drawTriangle"),__name(drawTriangle,"drawTriangle");function drawFigure(data,figure,context){const ps=figure.coords,cs=figure.colors;let i,ii;switch(figure.type){case"lattice":const verticesPerRow=figure.verticesPerRow,rows=Math.floor(ps.length/verticesPerRow)-1,cols=verticesPerRow-1;for(i=0;i<rows;i++){let q=i*verticesPerRow;for(let j=0;j<cols;j++,q++)drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]),drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow])}break;case"triangles":for(i=0,ii=ps.length;i<ii;i+=3)drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2]);break;default:throw new Error("illegal figure")}}__name2(drawFigure,"drawFigure"),__name(drawFigure,"drawFigure");const _MeshShadingPattern=class extends BaseShadingPattern{static{__name2(this,"_MeshShadingPattern")}constructor(IR){super(),this._coords=IR[2],this._colors=IR[3],this._figures=IR[4],this._bounds=IR[5],this._bbox=IR[7],this._background=IR[8],this.matrix=null}_createMeshCanvas(combinedScale,backgroundColor,cachedCanvases){const offsetX=Math.floor(this._bounds[0]),offsetY=Math.floor(this._bounds[1]),boundsWidth=Math.ceil(this._bounds[2])-offsetX,boundsHeight=Math.ceil(this._bounds[3])-offsetY,width=Math.min(Math.ceil(Math.abs(boundsWidth*combinedScale[0]*1.1)),3e3),height=Math.min(Math.ceil(Math.abs(boundsHeight*combinedScale[1]*1.1)),3e3),scaleX=boundsWidth/width,scaleY=boundsHeight/height,context={coords:this._coords,colors:this._colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY},paddedWidth=width+2*2,paddedHeight=height+2*2,tmpCanvas=cachedCanvases.getCanvas("mesh",paddedWidth,paddedHeight,!1),tmpCtx=tmpCanvas.context,data=tmpCtx.createImageData(width,height);if(backgroundColor){const bytes=data.data;for(let i=0,ii=bytes.length;i<ii;i+=4)bytes[i]=backgroundColor[0],bytes[i+1]=backgroundColor[1],bytes[i+2]=backgroundColor[2],bytes[i+3]=255}for(const figure of this._figures)drawFigure(data,figure,context);return tmpCtx.putImageData(data,2,2),{canvas:tmpCanvas.canvas,offsetX:offsetX-2*scaleX,offsetY:offsetY-2*scaleY,scaleX,scaleY}}getPattern(ctx,owner,inverse,pathType){applyBoundingBox(ctx,this._bbox);let scale;if(pathType===PathType.SHADING)scale=_util2.Util.singularValueDecompose2dScale((0,_display_utils2.getCurrentTransform)(ctx));else if(scale=_util2.Util.singularValueDecompose2dScale(owner.baseTransform),this.matrix){const matrixScale=_util2.Util.singularValueDecompose2dScale(this.matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]]}const temporaryPatternCanvas=this._createMeshCanvas(scale,pathType===PathType.SHADING?null:this._background,owner.cachedCanvases);return pathType!==PathType.SHADING&&(ctx.setTransform(...owner.baseTransform),this.matrix&&ctx.transform(...this.matrix)),ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY),ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY),ctx.createPattern(temporaryPatternCanvas.canvas,"no-repeat")}};__name(_MeshShadingPattern,"MeshShadingPattern");let MeshShadingPattern=_MeshShadingPattern;const _DummyShadingPattern=class extends BaseShadingPattern{static{__name2(this,"_DummyShadingPattern")}getPattern(){return"hotpink"}};__name(_DummyShadingPattern,"DummyShadingPattern");let DummyShadingPattern=_DummyShadingPattern;function getShadingPattern(IR){switch(IR[0]){case"RadialAxial":return new RadialAxialShadingPattern(IR);case"Mesh":return new MeshShadingPattern(IR);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${IR[0]}`)}__name2(getShadingPattern,"getShadingPattern"),__name(getShadingPattern,"getShadingPattern");const PaintType={COLORED:1,UNCOLORED:2},_TilingPattern=class _TilingPattern2{static{__name2(this,"_TilingPattern")}static get MAX_PATTERN_SIZE(){return(0,_util2.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(IR,color,ctx,canvasGraphicsFactory,baseTransform){this.operatorList=IR[2],this.matrix=IR[3]||[1,0,0,1,0,0],this.bbox=IR[4],this.xstep=IR[5],this.ystep=IR[6],this.paintType=IR[7],this.tilingType=IR[8],this.color=color,this.ctx=ctx,this.canvasGraphicsFactory=canvasGraphicsFactory,this.baseTransform=baseTransform}createPatternCanvas(owner){const operatorList=this.operatorList,bbox=this.bbox,xstep=this.xstep,ystep=this.ystep,paintType=this.paintType,tilingType=this.tilingType,color=this.color,canvasGraphicsFactory=this.canvasGraphicsFactory;(0,_util2.info)("TilingType: "+tilingType);const x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3],matrixScale=_util2.Util.singularValueDecompose2dScale(this.matrix),curMatrixScale=_util2.Util.singularValueDecompose2dScale(this.baseTransform),combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]],dimx=this.getSizeAndScale(xstep,this.ctx.canvas.width,combinedScale[0]),dimy=this.getSizeAndScale(ystep,this.ctx.canvas.height,combinedScale[1]),tmpCanvas=owner.cachedCanvases.getCanvas("pattern",dimx.size,dimy.size,!0),tmpCtx=tmpCanvas.context,graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);graphics.groupLevel=owner.groupLevel,this.setFillAndStrokeStyleToContext(graphics,paintType,color);let adjustedX0=x0,adjustedY0=y0,adjustedX1=x1,adjustedY1=y1;return x0<0&&(adjustedX0=0,adjustedX1+=Math.abs(x0)),y0<0&&(adjustedY0=0,adjustedY1+=Math.abs(y0)),tmpCtx.translate(-(dimx.scale*adjustedX0),-(dimy.scale*adjustedY0)),graphics.transform(dimx.scale,0,0,dimy.scale,0,0),tmpCtx.save(),this.clipBbox(graphics,adjustedX0,adjustedY0,adjustedX1,adjustedY1),graphics.baseTransform=(0,_display_utils2.getCurrentTransform)(graphics.ctx),graphics.executeOperatorList(operatorList),graphics.endDrawing(),{canvas:tmpCanvas.canvas,scaleX:dimx.scale,scaleY:dimy.scale,offsetX:adjustedX0,offsetY:adjustedY0}}getSizeAndScale(step,realOutputSize,scale){step=Math.abs(step);const maxSize=Math.max(_TilingPattern2.MAX_PATTERN_SIZE,realOutputSize);let size=Math.ceil(step*scale);return size>=maxSize?size=maxSize:scale=size/step,{scale,size}}clipBbox(graphics,x0,y0,x1,y1){const bboxWidth=x1-x0,bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight),graphics.current.updateRectMinMax((0,_display_utils2.getCurrentTransform)(graphics.ctx),[x0,y0,x1,y1]),graphics.clip(),graphics.endPath()}setFillAndStrokeStyleToContext(graphics,paintType,color){const context=graphics.ctx,current=graphics.current;switch(paintType){case PaintType.COLORED:const ctx=this.ctx;context.fillStyle=ctx.fillStyle,context.strokeStyle=ctx.strokeStyle,current.fillColor=ctx.fillStyle,current.strokeColor=ctx.strokeStyle;break;case PaintType.UNCOLORED:const cssColor=_util2.Util.makeHexColor(color[0],color[1],color[2]);context.fillStyle=cssColor,context.strokeStyle=cssColor,current.fillColor=cssColor,current.strokeColor=cssColor;break;default:throw new _util2.FormatError(`Unsupported paint type: ${paintType}`)}}getPattern(ctx,owner,inverse,pathType){let matrix=inverse;pathType!==PathType.SHADING&&(matrix=_util2.Util.transform(matrix,owner.baseTransform),this.matrix&&(matrix=_util2.Util.transform(matrix,this.matrix)));const temporaryPatternCanvas=this.createPatternCanvas(owner);let domMatrix=new DOMMatrix(matrix);domMatrix=domMatrix.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY),domMatrix=domMatrix.scale(1/temporaryPatternCanvas.scaleX,1/temporaryPatternCanvas.scaleY);const pattern=ctx.createPattern(temporaryPatternCanvas.canvas,"repeat");try{pattern.setTransform(domMatrix)}catch(ex){(0,_util2.warn)(`TilingPattern.getPattern: "${ex?.message}".`)}return pattern}};__name(_TilingPattern,"TilingPattern");let TilingPattern=_TilingPattern;exports2.TilingPattern=TilingPattern},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.applyMaskImageData=applyMaskImageData;var _util2=__w_pdfjs_require__2(1);function applyMaskImageData(_ref){let{src,srcPos=0,dest,destPos=0,width,height,inverseDecode=!1}=_ref;const opaque=_util2.FeatureTest.isLittleEndian?4278190080:255,[zeroMapping,oneMapping]=inverseDecode?[0,opaque]:[opaque,0],widthInSource=width>>3,widthRemainder=width&7,srcLength=src.length;dest=new Uint32Array(dest.buffer);for(let i=0;i<height;i++){for(const max=srcPos+widthInSource;srcPos<max;srcPos++){const elem2=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=elem2&128?oneMapping:zeroMapping,dest[destPos++]=elem2&64?oneMapping:zeroMapping,dest[destPos++]=elem2&32?oneMapping:zeroMapping,dest[destPos++]=elem2&16?oneMapping:zeroMapping,dest[destPos++]=elem2&8?oneMapping:zeroMapping,dest[destPos++]=elem2&4?oneMapping:zeroMapping,dest[destPos++]=elem2&2?oneMapping:zeroMapping,dest[destPos++]=elem2&1?oneMapping:zeroMapping}if(widthRemainder===0)continue;const elem=srcPos<srcLength?src[srcPos++]:255;for(let j=0;j<widthRemainder;j++)dest[destPos++]=elem&1<<7-j?oneMapping:zeroMapping}return{srcPos,destPos}}__name2(applyMaskImageData,"applyMaskImageData"),__name(applyMaskImageData,"applyMaskImageData")},(__unused_webpack_module2,exports2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.GlobalWorkerOptions=void 0;const GlobalWorkerOptions=Object.create(null);exports2.GlobalWorkerOptions=GlobalWorkerOptions,GlobalWorkerOptions.workerPort=GlobalWorkerOptions.workerPort===void 0?null:GlobalWorkerOptions.workerPort,GlobalWorkerOptions.workerSrc=GlobalWorkerOptions.workerSrc===void 0?"":GlobalWorkerOptions.workerSrc},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.MessageHandler=void 0;var _util2=__w_pdfjs_require__2(1);const CallbackKind={UNKNOWN:0,DATA:1,ERROR:2},StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(reason){switch(reason instanceof Error||typeof reason=="object"&&reason!==null||(0,_util2.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),reason.name){case"AbortException":return new _util2.AbortException(reason.message);case"MissingPDFException":return new _util2.MissingPDFException(reason.message);case"PasswordException":return new _util2.PasswordException(reason.message,reason.code);case"UnexpectedResponseException":return new _util2.UnexpectedResponseException(reason.message,reason.status);case"UnknownErrorException":return new _util2.UnknownErrorException(reason.message,reason.details);default:return new _util2.UnknownErrorException(reason.message,reason.toString())}}__name2(wrapReason,"wrapReason"),__name(wrapReason,"wrapReason");const _MessageHandler=class{static{__name2(this,"_MessageHandler")}constructor(sourceName,targetName,comObj){this.sourceName=sourceName,this.targetName=targetName,this.comObj=comObj,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=event=>{const data=event.data;if(data.targetName!==this.sourceName)return;if(data.stream){this._processStreamMessage(data);return}if(data.callback){const callbackId=data.callbackId,capability=this.callbackCapabilities[callbackId];if(!capability)throw new Error(`Cannot resolve callback ${callbackId}`);if(delete this.callbackCapabilities[callbackId],data.callback===CallbackKind.DATA)capability.resolve(data.data);else if(data.callback===CallbackKind.ERROR)capability.reject(wrapReason(data.reason));else throw new Error("Unexpected callback case");return}const action=this.actionHandler[data.action];if(!action)throw new Error(`Unknown action from worker: ${data.action}`);if(data.callbackId){const cbSourceName=this.sourceName,cbTargetName=data.sourceName;new Promise(function(resolve){resolve(action(data.data))}).then(function(result){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.DATA,callbackId:data.callbackId,data:result})},function(reason){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.ERROR,callbackId:data.callbackId,reason:wrapReason(reason)})});return}if(data.streamId){this._createStreamSink(data);return}action(data.data)},comObj.addEventListener("message",this._onComObjOnMessage)}on(actionName,handler){const ah=this.actionHandler;if(ah[actionName])throw new Error(`There is already an actionName called "${actionName}"`);ah[actionName]=handler}send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data},transfers)}sendWithPromise(actionName,data,transfers){const callbackId=this.callbackId++,capability=(0,_util2.createPromiseCapability)();this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId,data},transfers)}catch(ex){capability.reject(ex)}return capability.promise}sendWithStream(actionName,data,queueingStrategy,transfers){const streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:controller=>{const startCapability=(0,_util2.createPromiseCapability)();return this.streamControllers[streamId]={controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:!1},comObj.postMessage({sourceName,targetName,action:actionName,streamId,data,desiredSize:controller.desiredSize},transfers),startCapability.promise},pull:controller=>{const pullCapability=(0,_util2.createPromiseCapability)();return this.streamControllers[streamId].pullCall=pullCapability,comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL,streamId,desiredSize:controller.desiredSize}),pullCapability.promise},cancel:reason=>{(0,_util2.assert)(reason instanceof Error,"cancel must have a valid reason");const cancelCapability=(0,_util2.createPromiseCapability)();return this.streamControllers[streamId].cancelCall=cancelCapability,this.streamControllers[streamId].isClosed=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL,streamId,reason:wrapReason(reason)}),cancelCapability.promise}},queueingStrategy)}_createStreamSink(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,self2=this,action=this.actionHandler[data.action],streamSink={enqueue(chunk){let size=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,transfers=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const lastDesiredSize=this.desiredSize;this.desiredSize-=size,lastDesiredSize>0&&this.desiredSize<=0&&(this.sinkCapability=(0,_util2.createPromiseCapability)(),this.ready=this.sinkCapability.promise),comObj.postMessage({sourceName,targetName,stream:StreamKind.ENQUEUE,streamId,chunk},transfers)},close(){this.isCancelled||(this.isCancelled=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.CLOSE,streamId}),delete self2.streamSinks[streamId])},error(reason){(0,_util2.assert)(reason instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.ERROR,streamId,reason:wrapReason(reason)}))},sinkCapability:(0,_util2.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve(),streamSink.ready=streamSink.sinkCapability.promise,this.streamSinks[streamId]=streamSink,new Promise(function(resolve){resolve(action(data.data,streamSink))}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,reason:wrapReason(reason)})})}_processStreamMessage(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:data.success?streamController.startCall.resolve():streamController.startCall.reject(wrapReason(data.reason));break;case StreamKind.PULL_COMPLETE:data.success?streamController.pullCall.resolve():streamController.pullCall.reject(wrapReason(data.reason));break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:!0});break}streamSink.desiredSize<=0&&data.desiredSize>0&&streamSink.sinkCapability.resolve(),streamSink.desiredSize=data.desiredSize,new Promise(function(resolve){resolve(streamSink.onPull&&streamSink.onPull())}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,reason:wrapReason(reason)})});break;case StreamKind.ENQUEUE:if((0,_util2.assert)(streamController,"enqueue should have stream controller"),streamController.isClosed)break;streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:if((0,_util2.assert)(streamController,"close should have stream controller"),streamController.isClosed)break;streamController.isClosed=!0,streamController.controller.close(),this._deleteStreamController(streamController,streamId);break;case StreamKind.ERROR:(0,_util2.assert)(streamController,"error should have stream controller"),streamController.controller.error(wrapReason(data.reason)),this._deleteStreamController(streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:data.success?streamController.cancelCall.resolve():streamController.cancelCall.reject(wrapReason(data.reason)),this._deleteStreamController(streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink)break;new Promise(function(resolve){resolve(streamSink.onCancel&&streamSink.onCancel(wrapReason(data.reason)))}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,reason:wrapReason(reason)})}),streamSink.sinkCapability.reject(wrapReason(data.reason)),streamSink.isCancelled=!0,delete this.streamSinks[streamId];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(streamController,streamId){await Promise.allSettled([streamController.startCall&&streamController.startCall.promise,streamController.pullCall&&streamController.pullCall.promise,streamController.cancelCall&&streamController.cancelCall.promise]),delete this.streamControllers[streamId]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}};__name(_MessageHandler,"MessageHandler");let MessageHandler=_MessageHandler;exports2.MessageHandler=MessageHandler},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.Metadata=void 0;var _util2=__w_pdfjs_require__2(1);function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");var _metadataMap=new WeakMap,_data=new WeakMap;const _Metadata=class{static{__name2(this,"_Metadata")}constructor(_ref){let{parsedData,rawData}=_ref;_classPrivateFieldInitSpec2(this,_metadataMap,{writable:!0,value:void 0}),_classPrivateFieldInitSpec2(this,_data,{writable:!0,value:void 0}),_classPrivateFieldSet2(this,_metadataMap,parsedData),_classPrivateFieldSet2(this,_data,rawData)}getRaw(){return _classPrivateFieldGet2(this,_data)}get(name){var _classPrivateFieldGet22;return(_classPrivateFieldGet22=_classPrivateFieldGet2(this,_metadataMap).get(name))!==null&&_classPrivateFieldGet22!==void 0?_classPrivateFieldGet22:null}getAll(){return(0,_util2.objectFromMap)(_classPrivateFieldGet2(this,_metadataMap))}has(name){return _classPrivateFieldGet2(this,_metadataMap).has(name)}};__name(_Metadata,"Metadata");let Metadata=_Metadata;exports2.Metadata=Metadata},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.OptionalContentConfig=void 0;var _util2=__w_pdfjs_require__2(1);function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");const INTERNAL=Symbol("INTERNAL");var _visible=new WeakMap;const _OptionalContentGroup=class{static{__name2(this,"_OptionalContentGroup")}constructor(name,intent){_classPrivateFieldInitSpec2(this,_visible,{writable:!0,value:!0}),this.name=name,this.intent=intent}get visible(){return _classPrivateFieldGet2(this,_visible)}_setVisible(internal,visible){internal!==INTERNAL&&(0,_util2.unreachable)("Internal method `_setVisible` called."),_classPrivateFieldSet2(this,_visible,visible)}};__name(_OptionalContentGroup,"OptionalContentGroup");let OptionalContentGroup=_OptionalContentGroup;var _cachedHasInitialVisibility=new WeakMap,_groups=new WeakMap,_initialVisibility=new WeakMap,_order=new WeakMap,_evaluateVisibilityExpression=new WeakSet;const _OptionalContentConfig=class{static{__name2(this,"_OptionalContentConfig")}constructor(data){if(_classPrivateMethodInitSpec2(this,_evaluateVisibilityExpression),_classPrivateFieldInitSpec2(this,_cachedHasInitialVisibility,{writable:!0,value:!0}),_classPrivateFieldInitSpec2(this,_groups,{writable:!0,value:new Map}),_classPrivateFieldInitSpec2(this,_initialVisibility,{writable:!0,value:null}),_classPrivateFieldInitSpec2(this,_order,{writable:!0,value:null}),this.name=null,this.creator=null,data!==null){this.name=data.name,this.creator=data.creator,_classPrivateFieldSet2(this,_order,data.order);for(const group of data.groups)_classPrivateFieldGet2(this,_groups).set(group.id,new OptionalContentGroup(group.name,group.intent));if(data.baseState==="OFF")for(const group of _classPrivateFieldGet2(this,_groups).values())group._setVisible(INTERNAL,!1);for(const on of data.on)_classPrivateFieldGet2(this,_groups).get(on)._setVisible(INTERNAL,!0);for(const off of data.off)_classPrivateFieldGet2(this,_groups).get(off)._setVisible(INTERNAL,!1);_classPrivateFieldSet2(this,_initialVisibility,new Map);for(const[id,group]of _classPrivateFieldGet2(this,_groups))_classPrivateFieldGet2(this,_initialVisibility).set(id,group.visible)}}isVisible(group){if(_classPrivateFieldGet2(this,_groups).size===0)return!0;if(!group)return(0,_util2.warn)("Optional content group not defined."),!0;if(group.type==="OCG")return _classPrivateFieldGet2(this,_groups).has(group.id)?_classPrivateFieldGet2(this,_groups).get(group.id).visible:((0,_util2.warn)(`Optional content group not found: ${group.id}`),!0);if(group.type==="OCMD"){if(group.expression)return _classPrivateMethodGet2(this,_evaluateVisibilityExpression,_evaluateVisibilityExpression2).call(this,group.expression);if(!group.policy||group.policy==="AnyOn"){for(const id of group.ids){if(!_classPrivateFieldGet2(this,_groups).has(id))return(0,_util2.warn)(`Optional content group not found: ${id}`),!0;if(_classPrivateFieldGet2(this,_groups).get(id).visible)return!0}return!1}else if(group.policy==="AllOn"){for(const id of group.ids){if(!_classPrivateFieldGet2(this,_groups).has(id))return(0,_util2.warn)(`Optional content group not found: ${id}`),!0;if(!_classPrivateFieldGet2(this,_groups).get(id).visible)return!1}return!0}else if(group.policy==="AnyOff"){for(const id of group.ids){if(!_classPrivateFieldGet2(this,_groups).has(id))return(0,_util2.warn)(`Optional content group not found: ${id}`),!0;if(!_classPrivateFieldGet2(this,_groups).get(id).visible)return!0}return!1}else if(group.policy==="AllOff"){for(const id of group.ids){if(!_classPrivateFieldGet2(this,_groups).has(id))return(0,_util2.warn)(`Optional content group not found: ${id}`),!0;if(_classPrivateFieldGet2(this,_groups).get(id).visible)return!1}return!0}return(0,_util2.warn)(`Unknown optional content policy ${group.policy}.`),!0}return(0,_util2.warn)(`Unknown group type ${group.type}.`),!0}setVisibility(id){let visible=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!_classPrivateFieldGet2(this,_groups).has(id)){(0,_util2.warn)(`Optional content group not found: ${id}`);return}_classPrivateFieldGet2(this,_groups).get(id)._setVisible(INTERNAL,!!visible),_classPrivateFieldSet2(this,_cachedHasInitialVisibility,null)}get hasInitialVisibility(){if(_classPrivateFieldGet2(this,_cachedHasInitialVisibility)!==null)return _classPrivateFieldGet2(this,_cachedHasInitialVisibility);for(const[id,group]of _classPrivateFieldGet2(this,_groups)){const visible=_classPrivateFieldGet2(this,_initialVisibility).get(id);if(group.visible!==visible)return _classPrivateFieldSet2(this,_cachedHasInitialVisibility,!1)}return _classPrivateFieldSet2(this,_cachedHasInitialVisibility,!0)}getOrder(){return _classPrivateFieldGet2(this,_groups).size?_classPrivateFieldGet2(this,_order)?_classPrivateFieldGet2(this,_order).slice():[..._classPrivateFieldGet2(this,_groups).keys()]:null}getGroups(){return _classPrivateFieldGet2(this,_groups).size>0?(0,_util2.objectFromMap)(_classPrivateFieldGet2(this,_groups)):null}getGroup(id){return _classPrivateFieldGet2(this,_groups).get(id)||null}};__name(_OptionalContentConfig,"OptionalContentConfig");let OptionalContentConfig=_OptionalContentConfig;exports2.OptionalContentConfig=OptionalContentConfig;function _evaluateVisibilityExpression2(array){const length=array.length;if(length<2)return!0;const operator=array[0];for(let i=1;i<length;i++){const element=array[i];let state;if(Array.isArray(element))state=_classPrivateMethodGet2(this,_evaluateVisibilityExpression,_evaluateVisibilityExpression2).call(this,element);else if(_classPrivateFieldGet2(this,_groups).has(element))state=_classPrivateFieldGet2(this,_groups).get(element).visible;else return(0,_util2.warn)(`Optional content group not found: ${element}`),!0;switch(operator){case"And":if(!state)return!1;break;case"Or":if(state)return!0;break;case"Not":return!state;default:return!0}}return operator==="And"}__name2(_evaluateVisibilityExpression2,"_evaluateVisibilityExpression2"),__name(_evaluateVisibilityExpression2,"_evaluateVisibilityExpression2")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PDFDataTransportStream=void 0;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(133);const _PDFDataTransportStream=class{static{__name2(this,"_PDFDataTransportStream")}constructor(params,pdfDataRangeTransport){(0,_util2.assert)(pdfDataRangeTransport,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=params.progressiveDone||!1,this._contentDispositionFilename=params.contentDispositionFilename||null;const initialData=params.initialData;if(initialData?.length>0){const buffer=new Uint8Array(initialData).buffer;this._queuedChunks.push(buffer)}this._pdfDataRangeTransport=pdfDataRangeTransport,this._isStreamingSupported=!params.disableStream,this._isRangeSupported=!params.disableRange,this._contentLength=params.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((begin,chunk)=>{this._onReceiveData({begin,chunk})}),this._pdfDataRangeTransport.addProgressListener((loaded,total)=>{this._onProgress({loaded,total})}),this._pdfDataRangeTransport.addProgressiveReadListener(chunk=>{this._onReceiveData({chunk})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(args){const buffer=new Uint8Array(args.chunk).buffer;if(args.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(buffer):this._queuedChunks.push(buffer);else{const found=this._rangeReaders.some(function(rangeReader){return rangeReader._begin!==args.begin?!1:(rangeReader._enqueue(buffer),!0)});(0,_util2.assert)(found,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var _this$_fullRequestRea,_this$_fullRequestRea2;return(_this$_fullRequestRea=(_this$_fullRequestRea2=this._fullRequestReader)===null||_this$_fullRequestRea2===void 0?void 0:_this$_fullRequestRea2._loaded)!==null&&_this$_fullRequestRea!==void 0?_this$_fullRequestRea:0}_onProgress(evt){if(evt.total===void 0){const firstReader=this._rangeReaders[0];firstReader!=null&&firstReader.onProgress&&firstReader.onProgress({loaded:evt.loaded})}else{const fullReader=this._fullRequestReader;fullReader!=null&&fullReader.onProgress&&fullReader.onProgress({loaded:evt.loaded,total:evt.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(reader){const i=this._rangeReaders.indexOf(reader);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){(0,_util2.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const queuedChunks=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,queuedChunks,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(begin,end){if(end<=this._progressiveDataLength)return null;const reader=new PDFDataTransportStreamRangeReader(this,begin,end);return this._pdfDataRangeTransport.requestDataRange(begin,end),this._rangeReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);for(const reader of this._rangeReaders.slice(0))reader.cancel(reason);this._pdfDataRangeTransport.abort()}};__name(_PDFDataTransportStream,"PDFDataTransportStream");let PDFDataTransportStream=_PDFDataTransportStream;exports2.PDFDataTransportStream=PDFDataTransportStream;const _PDFDataTransportStreamReader=class{static{__name2(this,"_PDFDataTransportStreamReader")}constructor(stream,queuedChunks){let progressiveDone=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,contentDispositionFilename=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=stream,this._done=progressiveDone||!1,this._filename=(0,_display_utils2.isPdfFile)(contentDispositionFilename)?contentDispositionFilename:null,this._queuedChunks=queuedChunks||[],this._loaded=0;for(const chunk of this._queuedChunks)this._loaded+=chunk.byteLength;this._requests=[],this._headersReady=Promise.resolve(),stream._fullRequestReader=this,this.onProgress=null}_enqueue(chunk){this._done||(this._requests.length>0?this._requests.shift().resolve({value:chunk,done:!1}):this._queuedChunks.push(chunk),this._loaded+=chunk.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util2.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}};__name(_PDFDataTransportStreamReader,"PDFDataTransportStreamReader");let PDFDataTransportStreamReader=_PDFDataTransportStreamReader;const _PDFDataTransportStreamRangeReader=class{static{__name2(this,"_PDFDataTransportStreamRangeReader")}constructor(stream,begin,end){this._stream=stream,this._begin=begin,this._end=end,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(chunk){if(!this._done){if(this._requests.length===0)this._queuedChunk=chunk;else{this._requests.shift().resolve({value:chunk,done:!1});for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const chunk=this._queuedChunk;return this._queuedChunk=null,{value:chunk,done:!1}}if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util2.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};__name(_PDFDataTransportStreamRangeReader,"PDFDataTransportStreamRangeReader");let PDFDataTransportStreamRangeReader=_PDFDataTransportStreamRangeReader},(__unused_webpack_module2,exports2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.XfaText=void 0;const _XfaText=class _XfaText2{static{__name2(this,"_XfaText")}static textContent(xfa){const items=[],output={items,styles:Object.create(null)};function walk(node){var _node$attributes;if(!node)return;let str=null;const name=node.name;if(name==="#text")str=node.value;else if(_XfaText2.shouldBuildText(name))node!=null&&(_node$attributes=node.attributes)!==null&&_node$attributes!==void 0&&_node$attributes.textContent?str=node.attributes.textContent:node.value&&(str=node.value);else return;if(str!==null&&items.push({str}),!!node.children)for(const child of node.children)walk(child)}return __name2(walk,"walk"),__name(walk,"walk"),walk(xfa),output}static shouldBuildText(name){return!(name==="textarea"||name==="input"||name==="option"||name==="select")}};__name(_XfaText,"XfaText");let XfaText=_XfaText;exports2.XfaText=XfaText},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.NodeStandardFontDataFactory=exports2.NodeCanvasFactory=exports2.NodeCMapReaderFactory=void 0;var _base_factory=__w_pdfjs_require__2(134);const fetchData=__name(function(url){return new Promise((resolve,reject)=>{require$$7.readFile(url,(error,data)=>{if(error||!data){reject(new Error(error));return}resolve(new Uint8Array(data))})})},"fetchData"),_NodeCanvasFactory=class extends _base_factory.BaseCanvasFactory{static{__name2(this,"_NodeCanvasFactory")}_createCanvas(width,height){return require$$7.createCanvas(width,height)}};__name(_NodeCanvasFactory,"NodeCanvasFactory");let NodeCanvasFactory=_NodeCanvasFactory;exports2.NodeCanvasFactory=NodeCanvasFactory;const _NodeCMapReaderFactory=class extends _base_factory.BaseCMapReaderFactory{static{__name2(this,"_NodeCMapReaderFactory")}_fetchData(url,compressionType){return fetchData(url).then(data=>({cMapData:data,compressionType}))}};__name(_NodeCMapReaderFactory,"NodeCMapReaderFactory");let NodeCMapReaderFactory=_NodeCMapReaderFactory;exports2.NodeCMapReaderFactory=NodeCMapReaderFactory;const _NodeStandardFontDataFactory=class extends _base_factory.BaseStandardFontDataFactory{static{__name2(this,"_NodeStandardFontDataFactory")}_fetchData(url){return fetchData(url)}};__name(_NodeStandardFontDataFactory,"NodeStandardFontDataFactory");let NodeStandardFontDataFactory=_NodeStandardFontDataFactory;exports2.NodeStandardFontDataFactory=NodeStandardFontDataFactory},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.AnnotationEditorLayer=void 0;var _tools=__w_pdfjs_require__2(132),_util2=__w_pdfjs_require__2(1),_freetext=__w_pdfjs_require__2(148),_ink=__w_pdfjs_require__2(149);function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name2(_defineProperty,"_defineProperty"),__name(_defineProperty,"_defineProperty");function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");var _accessibilityManager=new WeakMap,_allowClick=new WeakMap,_boundPointerup=new WeakMap,_boundPointerdown=new WeakMap,_editors=new WeakMap,_hadPointerDown=new WeakMap,_isCleaningUp=new WeakMap,_uiManager=new WeakMap,_changeParent=new WeakSet,_createNewEditor=new WeakSet,_createAndAddNewEditor=new WeakSet,_cleanup=new WeakSet;const _AnnotationEditorLayer=class _AnnotationEditorLayer2{static{__name2(this,"_AnnotationEditorLayer")}constructor(options){_classPrivateMethodInitSpec2(this,_cleanup),_classPrivateMethodInitSpec2(this,_createAndAddNewEditor),_classPrivateMethodInitSpec2(this,_createNewEditor),_classPrivateMethodInitSpec2(this,_changeParent),_classPrivateFieldInitSpec2(this,_accessibilityManager,{writable:!0,value:void 0}),_classPrivateFieldInitSpec2(this,_allowClick,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_boundPointerup,{writable:!0,value:this.pointerup.bind(this)}),_classPrivateFieldInitSpec2(this,_boundPointerdown,{writable:!0,value:this.pointerdown.bind(this)}),_classPrivateFieldInitSpec2(this,_editors,{writable:!0,value:new Map}),_classPrivateFieldInitSpec2(this,_hadPointerDown,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_isCleaningUp,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_uiManager,{writable:!0,value:void 0}),_AnnotationEditorLayer2._initialized||(_AnnotationEditorLayer2._initialized=!0,_freetext.FreeTextEditor.initialize(options.l10n),_ink.InkEditor.initialize(options.l10n),options.uiManager.registerEditorTypes([_freetext.FreeTextEditor,_ink.InkEditor])),_classPrivateFieldSet2(this,_uiManager,options.uiManager),this.annotationStorage=options.annotationStorage,this.pageIndex=options.pageIndex,this.div=options.div,_classPrivateFieldSet2(this,_accessibilityManager,options.accessibilityManager),_classPrivateFieldGet2(this,_uiManager).addLayer(this)}updateToolbar(mode){_classPrivateFieldGet2(this,_uiManager).updateToolbar(mode)}updateMode(){let mode=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_classPrivateFieldGet2(this,_uiManager).getMode();_classPrivateMethodGet2(this,_cleanup,_cleanup2).call(this),mode===_util2.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),_classPrivateFieldGet2(this,_uiManager).unselectAll()}addInkEditorIfNeeded(isCommitting){if(!isCommitting&&_classPrivateFieldGet2(this,_uiManager).getMode()!==_util2.AnnotationEditorType.INK)return;if(!isCommitting){for(const editor2 of _classPrivateFieldGet2(this,_editors).values())if(editor2.isEmpty()){editor2.setInBackground();return}}_classPrivateMethodGet2(this,_createAndAddNewEditor,_createAndAddNewEditor2).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(isEditing){_classPrivateFieldGet2(this,_uiManager).setEditingState(isEditing)}addCommands(params){_classPrivateFieldGet2(this,_uiManager).addCommands(params)}enable(){this.div.style.pointerEvents="auto";for(const editor of _classPrivateFieldGet2(this,_editors).values())editor.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const editor of _classPrivateFieldGet2(this,_editors).values())editor.disableEditing()}setActiveEditor(editor){_classPrivateFieldGet2(this,_uiManager).getActive()!==editor&&_classPrivateFieldGet2(this,_uiManager).setActiveEditor(editor)}enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet2(this,_boundPointerdown)),this.div.addEventListener("pointerup",_classPrivateFieldGet2(this,_boundPointerup))}disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet2(this,_boundPointerdown)),this.div.removeEventListener("pointerup",_classPrivateFieldGet2(this,_boundPointerup))}attach(editor){_classPrivateFieldGet2(this,_editors).set(editor.id,editor)}detach(editor){var _classPrivateFieldGet22;_classPrivateFieldGet2(this,_editors).delete(editor.id),(_classPrivateFieldGet22=_classPrivateFieldGet2(this,_accessibilityManager))===null||_classPrivateFieldGet22===void 0||_classPrivateFieldGet22.removePointerInTextLayer(editor.contentDiv)}remove(editor){_classPrivateFieldGet2(this,_uiManager).removeEditor(editor),this.detach(editor),this.annotationStorage.remove(editor.id),editor.div.style.display="none",setTimeout(()=>{editor.div.style.display="",editor.div.remove(),editor.isAttachedToDOM=!1,document.activeElement===document.body&&_classPrivateFieldGet2(this,_uiManager).focusMainContainer()},0),_classPrivateFieldGet2(this,_isCleaningUp)||this.addInkEditorIfNeeded(!1)}add(editor){if(_classPrivateMethodGet2(this,_changeParent,_changeParent2).call(this,editor),_classPrivateFieldGet2(this,_uiManager).addEditor(editor),this.attach(editor),!editor.isAttachedToDOM){const div=editor.render();this.div.append(div),editor.isAttachedToDOM=!0}this.moveEditorInDOM(editor),editor.onceAdded(),this.addToAnnotationStorage(editor)}moveEditorInDOM(editor){var _classPrivateFieldGet3;(_classPrivateFieldGet3=_classPrivateFieldGet2(this,_accessibilityManager))===null||_classPrivateFieldGet3===void 0||_classPrivateFieldGet3.moveElementInDOM(this.div,editor.div,editor.contentDiv,!0)}addToAnnotationStorage(editor){!editor.isEmpty()&&!this.annotationStorage.has(editor.id)&&this.annotationStorage.setValue(editor.id,editor)}addOrRebuild(editor){editor.needsToBeRebuilt()?editor.rebuild():this.add(editor)}addANewEditor(editor){const cmd=__name(()=>{this.addOrRebuild(editor)},"cmd"),undo=__name(()=>{editor.remove()},"undo");this.addCommands({cmd,undo,mustExec:!0})}addUndoableEditor(editor){const cmd=__name(()=>{this.addOrRebuild(editor)},"cmd"),undo=__name(()=>{editor.remove()},"undo");this.addCommands({cmd,undo,mustExec:!1})}getNextId(){return _classPrivateFieldGet2(this,_uiManager).getId()}deserialize(data){switch(data.annotationType){case _util2.AnnotationEditorType.FREETEXT:return _freetext.FreeTextEditor.deserialize(data,this);case _util2.AnnotationEditorType.INK:return _ink.InkEditor.deserialize(data,this)}return null}setSelected(editor){_classPrivateFieldGet2(this,_uiManager).setSelected(editor)}toggleSelected(editor){_classPrivateFieldGet2(this,_uiManager).toggleSelected(editor)}isSelected(editor){return _classPrivateFieldGet2(this,_uiManager).isSelected(editor)}unselect(editor){_classPrivateFieldGet2(this,_uiManager).unselect(editor)}pointerup(event){const isMac=_tools.KeyboardManager.platform.isMac;if(!(event.button!==0||event.ctrlKey&&isMac)&&event.target===this.div&&_classPrivateFieldGet2(this,_hadPointerDown)){if(_classPrivateFieldSet2(this,_hadPointerDown,!1),!_classPrivateFieldGet2(this,_allowClick)){_classPrivateFieldSet2(this,_allowClick,!0);return}_classPrivateMethodGet2(this,_createAndAddNewEditor,_createAndAddNewEditor2).call(this,event)}}pointerdown(event){const isMac=_tools.KeyboardManager.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac||event.target!==this.div)return;_classPrivateFieldSet2(this,_hadPointerDown,!0);const editor=_classPrivateFieldGet2(this,_uiManager).getActive();_classPrivateFieldSet2(this,_allowClick,!editor||editor.isEmpty())}drop(event){const id=event.dataTransfer.getData("text/plain"),editor=_classPrivateFieldGet2(this,_uiManager).getEditor(id);if(!editor)return;event.preventDefault(),event.dataTransfer.dropEffect="move",_classPrivateMethodGet2(this,_changeParent,_changeParent2).call(this,editor);const rect=this.div.getBoundingClientRect(),endX=event.clientX-rect.x,endY=event.clientY-rect.y;editor.translate(endX-editor.startX,endY-editor.startY),this.moveEditorInDOM(editor),editor.div.focus()}dragover(event){event.preventDefault()}destroy(){var _classPrivateFieldGet4;((_classPrivateFieldGet4=_classPrivateFieldGet2(this,_uiManager).getActive())===null||_classPrivateFieldGet4===void 0?void 0:_classPrivateFieldGet4.parent)===this&&_classPrivateFieldGet2(this,_uiManager).setActiveEditor(null);for(const editor of _classPrivateFieldGet2(this,_editors).values()){var _classPrivateFieldGet5;(_classPrivateFieldGet5=_classPrivateFieldGet2(this,_accessibilityManager))===null||_classPrivateFieldGet5===void 0||_classPrivateFieldGet5.removePointerInTextLayer(editor.contentDiv),editor.isAttachedToDOM=!1,editor.div.remove(),editor.parent=null}this.div=null,_classPrivateFieldGet2(this,_editors).clear(),_classPrivateFieldGet2(this,_uiManager).removeLayer(this)}render(parameters){this.viewport=parameters.viewport,(0,_tools.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const editor of _classPrivateFieldGet2(this,_uiManager).getEditors(this.pageIndex))this.add(editor);this.updateMode()}update(parameters){this.viewport=parameters.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[pageLLx,pageLLy,pageURx,pageURy]=this.viewport.viewBox,width=pageURx-pageLLx,height=pageURy-pageLLy;return[width,height]}get viewportBaseDimensions(){const{width,height,rotation}=this.viewport;return rotation%180===0?[width,height]:[height,width]}setDimensions(){const{width,height,rotation}=this.viewport,flipOrientation=rotation%180!==0,widthStr=Math.floor(width)+"px",heightStr=Math.floor(height)+"px";this.div.style.width=flipOrientation?heightStr:widthStr,this.div.style.height=flipOrientation?widthStr:heightStr,this.div.setAttribute("data-main-rotation",rotation)}};__name(_AnnotationEditorLayer,"AnnotationEditorLayer");let AnnotationEditorLayer=_AnnotationEditorLayer;exports2.AnnotationEditorLayer=AnnotationEditorLayer;function _changeParent2(editor){var _editor$parent;editor.parent!==this&&(this.attach(editor),editor.pageIndex=this.pageIndex,(_editor$parent=editor.parent)===null||_editor$parent===void 0||_editor$parent.detach(editor),editor.parent=this,editor.div&&editor.isAttachedToDOM&&(editor.div.remove(),this.div.append(editor.div)))}__name2(_changeParent2,"_changeParent2"),__name(_changeParent2,"_changeParent2");function _createNewEditor2(params){switch(_classPrivateFieldGet2(this,_uiManager).getMode()){case _util2.AnnotationEditorType.FREETEXT:return new _freetext.FreeTextEditor(params);case _util2.AnnotationEditorType.INK:return new _ink.InkEditor(params)}return null}__name2(_createNewEditor2,"_createNewEditor2"),__name(_createNewEditor2,"_createNewEditor2");function _createAndAddNewEditor2(event){const id=this.getNextId(),editor=_classPrivateMethodGet2(this,_createNewEditor,_createNewEditor2).call(this,{parent:this,id,x:event.offsetX,y:event.offsetY});return editor&&this.add(editor),editor}__name2(_createAndAddNewEditor2,"_createAndAddNewEditor2"),__name(_createAndAddNewEditor2,"_createAndAddNewEditor2");function _cleanup2(){_classPrivateFieldSet2(this,_isCleaningUp,!0);for(const editor of _classPrivateFieldGet2(this,_editors).values())editor.isEmpty()&&editor.remove();_classPrivateFieldSet2(this,_isCleaningUp,!1)}__name2(_cleanup2,"_cleanup2"),__name(_cleanup2,"_cleanup2"),_defineProperty(AnnotationEditorLayer,"_initialized",!1)},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.FreeTextEditor=void 0;var _util2=__w_pdfjs_require__2(1),_tools=__w_pdfjs_require__2(132),_editor=__w_pdfjs_require__2(131);function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name2(_defineProperty,"_defineProperty"),__name(_defineProperty,"_defineProperty");function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");var _boundEditorDivBlur=new WeakMap,_boundEditorDivFocus=new WeakMap,_boundEditorDivKeydown=new WeakMap,_color=new WeakMap,_content=new WeakMap,_hasAlreadyBeenCommitted=new WeakMap,_fontSize=new WeakMap,_updateFontSize=new WeakSet,_updateColor=new WeakSet,_extractText=new WeakSet,_setEditorDimensions=new WeakSet;const _FreeTextEditor=class _FreeTextEditor2 extends _editor.AnnotationEditor{static{__name2(this,"_FreeTextEditor")}constructor(params){super({...params,name:"freeTextEditor"}),_classPrivateMethodInitSpec2(this,_setEditorDimensions),_classPrivateMethodInitSpec2(this,_extractText),_classPrivateMethodInitSpec2(this,_updateColor),_classPrivateMethodInitSpec2(this,_updateFontSize),_classPrivateFieldInitSpec2(this,_boundEditorDivBlur,{writable:!0,value:this.editorDivBlur.bind(this)}),_classPrivateFieldInitSpec2(this,_boundEditorDivFocus,{writable:!0,value:this.editorDivFocus.bind(this)}),_classPrivateFieldInitSpec2(this,_boundEditorDivKeydown,{writable:!0,value:this.editorDivKeydown.bind(this)}),_classPrivateFieldInitSpec2(this,_color,{writable:!0,value:void 0}),_classPrivateFieldInitSpec2(this,_content,{writable:!0,value:""}),_classPrivateFieldInitSpec2(this,_hasAlreadyBeenCommitted,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_fontSize,{writable:!0,value:void 0}),_classPrivateFieldSet2(this,_color,params.color||_FreeTextEditor2._defaultColor||_editor.AnnotationEditor._defaultLineColor),_classPrivateFieldSet2(this,_fontSize,params.fontSize||_FreeTextEditor2._defaultFontSize)}static initialize(l10n){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(str=>[str,l10n.get(str)]));const style=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(style.getPropertyValue("--freetext-padding"))}static updateDefaultParams(type,value){switch(type){case _util2.AnnotationEditorParamsType.FREETEXT_SIZE:_FreeTextEditor2._defaultFontSize=value;break;case _util2.AnnotationEditorParamsType.FREETEXT_COLOR:_FreeTextEditor2._defaultColor=value;break}}updateParams(type,value){switch(type){case _util2.AnnotationEditorParamsType.FREETEXT_SIZE:_classPrivateMethodGet2(this,_updateFontSize,_updateFontSize2).call(this,value);break;case _util2.AnnotationEditorParamsType.FREETEXT_COLOR:_classPrivateMethodGet2(this,_updateColor,_updateColor2).call(this,value);break}}static get defaultPropertiesToUpdate(){return[[_util2.AnnotationEditorParamsType.FREETEXT_SIZE,_FreeTextEditor2._defaultFontSize],[_util2.AnnotationEditorParamsType.FREETEXT_COLOR,_FreeTextEditor2._defaultColor||_editor.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[_util2.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet2(this,_fontSize)],[_util2.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet2(this,_color)]]}getInitialTranslation(){return[-_FreeTextEditor2._internalPadding*this.parent.scaleFactor,-(_FreeTextEditor2._internalPadding+_classPrivateFieldGet2(this,_fontSize))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(_util2.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",_classPrivateFieldGet2(this,_boundEditorDivKeydown)),this.editorDiv.addEventListener("focus",_classPrivateFieldGet2(this,_boundEditorDivFocus)),this.editorDiv.addEventListener("blur",_classPrivateFieldGet2(this,_boundEditorDivBlur)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet2(this,_boundEditorDivKeydown)),this.editorDiv.removeEventListener("focus",_classPrivateFieldGet2(this,_boundEditorDivFocus)),this.editorDiv.removeEventListener("blur",_classPrivateFieldGet2(this,_boundEditorDivBlur)),this.div.focus(),this.isEditing=!1)}focusin(event){super.focusin(event),event.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),_classPrivateFieldGet2(this,_hasAlreadyBeenCommitted)||(_classPrivateFieldSet2(this,_hasAlreadyBeenCommitted,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_classPrivateFieldSet2(this,_content,_classPrivateMethodGet2(this,_extractText,_extractText2).call(this).trimEnd()),_classPrivateMethodGet2(this,_setEditorDimensions,_setEditorDimensions2).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(event){this.enableEditMode(),this.editorDiv.focus()}keydown(event){event.target===this.div&&event.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(event){_FreeTextEditor2._keyboardManager.exec(this,event)}editorDivFocus(event){this.isEditing=!0}editorDivBlur(event){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let baseX,baseY;this.width&&(baseX=this.x,baseY=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),_FreeTextEditor2._l10nPromise.get("editor_free_text_aria_label").then(msg=>{var _this$editorDiv;return(_this$editorDiv=this.editorDiv)===null||_this$editorDiv===void 0?void 0:_this$editorDiv.setAttribute("aria-label",msg)}),_FreeTextEditor2._l10nPromise.get("free_text_default_content").then(msg=>{var _this$editorDiv2;return(_this$editorDiv2=this.editorDiv)===null||_this$editorDiv2===void 0?void 0:_this$editorDiv2.setAttribute("default-content",msg)}),this.editorDiv.contentEditable=!0;const{style}=this.editorDiv;if(style.fontSize=`calc(${_classPrivateFieldGet2(this,_fontSize)}px * var(--scale-factor))`,style.color=_classPrivateFieldGet2(this,_color),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,_tools.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);for(const line of _classPrivateFieldGet2(this,_content).split(`
`)){const div=document.createElement("div");div.append(line?document.createTextNode(line):document.createElement("br")),this.editorDiv.append(div)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(data,parent){const editor=super.deserialize(data,parent);return _classPrivateFieldSet2(editor,_fontSize,data.fontSize),_classPrivateFieldSet2(editor,_color,_util2.Util.makeHexColor(...data.color)),_classPrivateFieldSet2(editor,_content,data.value),editor}serialize(){if(this.isEmpty())return null;const padding=_FreeTextEditor2._internalPadding*this.parent.scaleFactor,rect=this.getRect(padding,padding),color=_editor.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:_util2.AnnotationEditorType.FREETEXT,color,fontSize:_classPrivateFieldGet2(this,_fontSize),value:_classPrivateFieldGet2(this,_content),pageIndex:this.parent.pageIndex,rect,rotation:this.rotation}}};__name(_FreeTextEditor,"FreeTextEditor");let FreeTextEditor=_FreeTextEditor;exports2.FreeTextEditor=FreeTextEditor;function _updateFontSize2(fontSize){const setFontsize=__name(size=>{this.editorDiv.style.fontSize=`calc(${size}px * var(--scale-factor))`,this.translate(0,-(size-_classPrivateFieldGet2(this,_fontSize))*this.parent.scaleFactor),_classPrivateFieldSet2(this,_fontSize,size),_classPrivateMethodGet2(this,_setEditorDimensions,_setEditorDimensions2).call(this)},"setFontsize"),savedFontsize=_classPrivateFieldGet2(this,_fontSize);this.parent.addCommands({cmd:()=>{setFontsize(fontSize)},undo:()=>{setFontsize(savedFontsize)},mustExec:!0,type:_util2.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}__name2(_updateFontSize2,"_updateFontSize2"),__name(_updateFontSize2,"_updateFontSize2");function _updateColor2(color){const savedColor=_classPrivateFieldGet2(this,_color);this.parent.addCommands({cmd:()=>{_classPrivateFieldSet2(this,_color,color),this.editorDiv.style.color=color},undo:()=>{_classPrivateFieldSet2(this,_color,savedColor),this.editorDiv.style.color=savedColor},mustExec:!0,type:_util2.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}__name2(_updateColor2,"_updateColor2"),__name(_updateColor2,"_updateColor2");function _extractText2(){const divs=this.editorDiv.getElementsByTagName("div");if(divs.length===0)return this.editorDiv.innerText;const buffer=[];for(let i=0,ii=divs.length;i<ii;i++){const first=divs[i].firstChild;first?.nodeName==="#text"?buffer.push(first.data):buffer.push("")}return buffer.join(`
`)}__name2(_extractText2,"_extractText2"),__name(_extractText2,"_extractText2");function _setEditorDimensions2(){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions,rect=this.div.getBoundingClientRect();this.width=rect.width/parentWidth,this.height=rect.height/parentHeight}__name2(_setEditorDimensions2,"_setEditorDimensions2"),__name(_setEditorDimensions2,"_setEditorDimensions2"),_defineProperty(FreeTextEditor,"_freeTextDefaultContent",""),_defineProperty(FreeTextEditor,"_l10nPromise",void 0),_defineProperty(FreeTextEditor,"_internalPadding",0),_defineProperty(FreeTextEditor,"_defaultColor",null),_defineProperty(FreeTextEditor,"_defaultFontSize",10),_defineProperty(FreeTextEditor,"_keyboardManager",new _tools.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],FreeTextEditor.prototype.commitOrRemove]])),_defineProperty(FreeTextEditor,"_type","freetext")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.InkEditor=void 0,Object.defineProperty(exports2,"fitCurve",{enumerable:!0,get:function(){return _pdfjsFitCurve.fitCurve}});var _util2=__w_pdfjs_require__2(1),_editor=__w_pdfjs_require__2(131),_pdfjsFitCurve=__w_pdfjs_require__2(150),_tools=__w_pdfjs_require__2(132);function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name2(_defineProperty,"_defineProperty"),__name(_defineProperty,"_defineProperty");function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classStaticPrivateMethodGet(receiver,classConstructor,method){return _classCheckPrivateStaticAccess2(receiver,classConstructor),method}__name2(_classStaticPrivateMethodGet,"_classStaticPrivateMethodGet"),__name(_classStaticPrivateMethodGet,"_classStaticPrivateMethodGet");function _classCheckPrivateStaticAccess2(receiver,classConstructor){if(receiver!==classConstructor)throw new TypeError("Private static access of wrong provenance")}__name2(_classCheckPrivateStaticAccess2,"_classCheckPrivateStaticAccess2"),__name(_classCheckPrivateStaticAccess2,"_classCheckPrivateStaticAccess");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");const RESIZER_SIZE=16;var _aspectRatio=new WeakMap,_baseHeight=new WeakMap,_baseWidth=new WeakMap,_boundCanvasPointermove=new WeakMap,_boundCanvasPointerleave=new WeakMap,_boundCanvasPointerup=new WeakMap,_boundCanvasPointerdown=new WeakMap,_disableEditing=new WeakMap,_isCanvasInitialized=new WeakMap,_lastPoint=new WeakMap,_observer=new WeakMap,_realWidth=new WeakMap,_realHeight=new WeakMap,_requestFrameCallback=new WeakMap,_updateThickness=new WeakSet,_updateColor=new WeakSet,_updateOpacity=new WeakSet,_getInitialBBox=new WeakSet,_setStroke=new WeakSet,_startDrawing=new WeakSet,_draw=new WeakSet,_stopDrawing=new WeakSet,_redraw=new WeakSet,_endDrawing=new WeakSet,_createCanvas=new WeakSet,_createObserver=new WeakSet,_setCanvasDims=new WeakSet,_setScaleFactor=new WeakSet,_updateTransform=new WeakSet,_serializePaths=new WeakSet,_extractPointsOnBezier=new WeakSet,_isAlmostFlat=new WeakSet,_getBbox=new WeakSet,_getPadding=new WeakSet,_fitToContent=new WeakSet,_setMinDims=new WeakSet;const _InkEditor=class _InkEditor2 extends _editor.AnnotationEditor{static{__name2(this,"_InkEditor")}constructor(params){super({...params,name:"inkEditor"}),_classPrivateMethodInitSpec2(this,_setMinDims),_classPrivateMethodInitSpec2(this,_fitToContent),_classPrivateMethodInitSpec2(this,_getPadding),_classPrivateMethodInitSpec2(this,_getBbox),_classPrivateMethodInitSpec2(this,_isAlmostFlat),_classPrivateMethodInitSpec2(this,_extractPointsOnBezier),_classPrivateMethodInitSpec2(this,_serializePaths),_classPrivateMethodInitSpec2(this,_updateTransform),_classPrivateMethodInitSpec2(this,_setScaleFactor),_classPrivateMethodInitSpec2(this,_setCanvasDims),_classPrivateMethodInitSpec2(this,_createObserver),_classPrivateMethodInitSpec2(this,_createCanvas),_classPrivateMethodInitSpec2(this,_endDrawing),_classPrivateMethodInitSpec2(this,_redraw),_classPrivateMethodInitSpec2(this,_stopDrawing),_classPrivateMethodInitSpec2(this,_draw),_classPrivateMethodInitSpec2(this,_startDrawing),_classPrivateMethodInitSpec2(this,_setStroke),_classPrivateMethodInitSpec2(this,_getInitialBBox),_classPrivateMethodInitSpec2(this,_updateOpacity),_classPrivateMethodInitSpec2(this,_updateColor),_classPrivateMethodInitSpec2(this,_updateThickness),_classPrivateFieldInitSpec2(this,_aspectRatio,{writable:!0,value:0}),_classPrivateFieldInitSpec2(this,_baseHeight,{writable:!0,value:0}),_classPrivateFieldInitSpec2(this,_baseWidth,{writable:!0,value:0}),_classPrivateFieldInitSpec2(this,_boundCanvasPointermove,{writable:!0,value:this.canvasPointermove.bind(this)}),_classPrivateFieldInitSpec2(this,_boundCanvasPointerleave,{writable:!0,value:this.canvasPointerleave.bind(this)}),_classPrivateFieldInitSpec2(this,_boundCanvasPointerup,{writable:!0,value:this.canvasPointerup.bind(this)}),_classPrivateFieldInitSpec2(this,_boundCanvasPointerdown,{writable:!0,value:this.canvasPointerdown.bind(this)}),_classPrivateFieldInitSpec2(this,_disableEditing,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_isCanvasInitialized,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_lastPoint,{writable:!0,value:null}),_classPrivateFieldInitSpec2(this,_observer,{writable:!0,value:null}),_classPrivateFieldInitSpec2(this,_realWidth,{writable:!0,value:0}),_classPrivateFieldInitSpec2(this,_realHeight,{writable:!0,value:0}),_classPrivateFieldInitSpec2(this,_requestFrameCallback,{writable:!0,value:null}),this.color=params.color||null,this.thickness=params.thickness||null,this.opacity=params.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(l10n){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(str=>[str,l10n.get(str)]))}static updateDefaultParams(type,value){switch(type){case _util2.AnnotationEditorParamsType.INK_THICKNESS:_InkEditor2._defaultThickness=value;break;case _util2.AnnotationEditorParamsType.INK_COLOR:_InkEditor2._defaultColor=value;break;case _util2.AnnotationEditorParamsType.INK_OPACITY:_InkEditor2._defaultOpacity=value/100;break}}updateParams(type,value){switch(type){case _util2.AnnotationEditorParamsType.INK_THICKNESS:_classPrivateMethodGet2(this,_updateThickness,_updateThickness2).call(this,value);break;case _util2.AnnotationEditorParamsType.INK_COLOR:_classPrivateMethodGet2(this,_updateColor,_updateColor2).call(this,value);break;case _util2.AnnotationEditorParamsType.INK_OPACITY:_classPrivateMethodGet2(this,_updateOpacity,_updateOpacity2).call(this,value);break}}static get defaultPropertiesToUpdate(){return[[_util2.AnnotationEditorParamsType.INK_THICKNESS,_InkEditor2._defaultThickness],[_util2.AnnotationEditorParamsType.INK_COLOR,_InkEditor2._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util2.AnnotationEditorParamsType.INK_OPACITY,Math.round(_InkEditor2._defaultOpacity*100)]]}get propertiesToUpdate(){var _this$opacity;return[[_util2.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||_InkEditor2._defaultThickness],[_util2.AnnotationEditorParamsType.INK_COLOR,this.color||_InkEditor2._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util2.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((_this$opacity=this.opacity)!==null&&_this$opacity!==void 0?_this$opacity:_InkEditor2._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(_classPrivateMethodGet2(this,_createCanvas,_createCanvas2).call(this),_classPrivateMethodGet2(this,_createObserver,_createObserver2).call(this)),this.isAttachedToDOM||(this.parent.add(this),_classPrivateMethodGet2(this,_setCanvasDims,_setCanvasDims2).call(this)),_classPrivateMethodGet2(this,_fitToContent,_fitToContent2).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,_classPrivateFieldGet2(this,_observer).disconnect(),_classPrivateFieldSet2(this,_observer,null),super.remove())}enableEditMode(){_classPrivateFieldGet2(this,_disableEditing)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",_classPrivateFieldGet2(this,_boundCanvasPointerdown)),this.canvas.addEventListener("pointerup",_classPrivateFieldGet2(this,_boundCanvasPointerup)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet2(this,_boundCanvasPointerdown)),this.canvas.removeEventListener("pointerup",_classPrivateFieldGet2(this,_boundCanvasPointerup)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){_classPrivateFieldGet2(this,_disableEditing)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_classPrivateFieldSet2(this,_disableEditing,!0),this.div.classList.add("disabled"),_classPrivateMethodGet2(this,_fitToContent,_fitToContent2).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(event){super.focusin(event),this.enableEditMode()}canvasPointerdown(event){event.button!==0||!this.isInEditMode()||_classPrivateFieldGet2(this,_disableEditing)||(this.setInForeground(),event.type!=="mouse"&&this.div.focus(),event.stopPropagation(),this.canvas.addEventListener("pointerleave",_classPrivateFieldGet2(this,_boundCanvasPointerleave)),this.canvas.addEventListener("pointermove",_classPrivateFieldGet2(this,_boundCanvasPointermove)),_classPrivateMethodGet2(this,_startDrawing,_startDrawing2).call(this,event.offsetX,event.offsetY))}canvasPointermove(event){event.stopPropagation(),_classPrivateMethodGet2(this,_draw,_draw2).call(this,event.offsetX,event.offsetY)}canvasPointerup(event){event.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(event.stopPropagation(),_classPrivateMethodGet2(this,_endDrawing,_endDrawing2).call(this,event),this.setInBackground())}canvasPointerleave(event){_classPrivateMethodGet2(this,_endDrawing,_endDrawing2).call(this,event),this.setInBackground()}render(){if(this.div)return this.div;let baseX,baseY;this.width&&(baseX=this.x,baseY=this.y),super.render(),_InkEditor2._l10nPromise.get("editor_ink_aria_label").then(msg=>{var _this$div;return(_this$div=this.div)===null||_this$div===void 0?void 0:_this$div.setAttribute("aria-label",msg)});const[x,y,w,h]=_classPrivateMethodGet2(this,_getInitialBBox,_getInitialBBox2).call(this);if(this.setAt(x,y,0,0),this.setDims(w,h),_classPrivateMethodGet2(this,_createCanvas,_createCanvas2).call(this),this.width){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight),_classPrivateFieldSet2(this,_isCanvasInitialized,!0),_classPrivateMethodGet2(this,_setCanvasDims,_setCanvasDims2).call(this),this.setDims(this.width*parentWidth,this.height*parentHeight),_classPrivateMethodGet2(this,_redraw,_redraw2).call(this),_classPrivateMethodGet2(this,_setMinDims,_setMinDims2).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _classPrivateMethodGet2(this,_createObserver,_createObserver2).call(this),this.div}setDimensions(width,height){const roundedWidth=Math.round(width),roundedHeight=Math.round(height);if(_classPrivateFieldGet2(this,_realWidth)===roundedWidth&&_classPrivateFieldGet2(this,_realHeight)===roundedHeight)return;_classPrivateFieldSet2(this,_realWidth,roundedWidth),_classPrivateFieldSet2(this,_realHeight,roundedHeight),this.canvas.style.visibility="hidden",_classPrivateFieldGet2(this,_aspectRatio)&&Math.abs(_classPrivateFieldGet2(this,_aspectRatio)-width/height)>.01&&(height=Math.ceil(width/_classPrivateFieldGet2(this,_aspectRatio)),this.setDims(width,height));const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.width=width/parentWidth,this.height=height/parentHeight,_classPrivateFieldGet2(this,_disableEditing)&&_classPrivateMethodGet2(this,_setScaleFactor,_setScaleFactor2).call(this,width,height),_classPrivateMethodGet2(this,_setCanvasDims,_setCanvasDims2).call(this),_classPrivateMethodGet2(this,_redraw,_redraw2).call(this),this.canvas.style.visibility="visible"}static deserialize(data,parent){const editor=super.deserialize(data,parent);editor.thickness=data.thickness,editor.color=_util2.Util.makeHexColor(...data.color),editor.opacity=data.opacity;const[pageWidth,pageHeight]=parent.pageDimensions,width=editor.width*pageWidth,height=editor.height*pageHeight,scaleFactor=parent.scaleFactor,padding=data.thickness/2;_classPrivateFieldSet2(editor,_aspectRatio,width/height),_classPrivateFieldSet2(editor,_disableEditing,!0),_classPrivateFieldSet2(editor,_realWidth,Math.round(width)),_classPrivateFieldSet2(editor,_realHeight,Math.round(height));for(const{bezier}of data.paths){const path=[];editor.paths.push(path);let p0=scaleFactor*(bezier[0]-padding),p1=scaleFactor*(height-bezier[1]-padding);for(let i=2,ii=bezier.length;i<ii;i+=6){const p10=scaleFactor*(bezier[i]-padding),p11=scaleFactor*(height-bezier[i+1]-padding),p20=scaleFactor*(bezier[i+2]-padding),p21=scaleFactor*(height-bezier[i+3]-padding),p30=scaleFactor*(bezier[i+4]-padding),p31=scaleFactor*(height-bezier[i+5]-padding);path.push([[p0,p1],[p10,p11],[p20,p21],[p30,p31]]),p0=p30,p1=p31}const path2D=_classStaticPrivateMethodGet(this,_InkEditor2,_buildPath2D).call(this,path);editor.bezierPath2D.push(path2D)}const bbox=_classPrivateMethodGet2(editor,_getBbox,_getBbox2).call(editor);return _classPrivateFieldSet2(editor,_baseWidth,Math.max(RESIZER_SIZE,bbox[2]-bbox[0])),_classPrivateFieldSet2(editor,_baseHeight,Math.max(RESIZER_SIZE,bbox[3]-bbox[1])),_classPrivateMethodGet2(editor,_setScaleFactor,_setScaleFactor2).call(editor,width,height),editor}serialize(){if(this.isEmpty())return null;const rect=this.getRect(0,0),height=this.rotation%180===0?rect[3]-rect[1]:rect[2]-rect[0],color=_editor.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:_util2.AnnotationEditorType.INK,color,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet2(this,_serializePaths,_serializePaths2).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,height),pageIndex:this.parent.pageIndex,rect,rotation:this.rotation}}};__name(_InkEditor,"InkEditor");let InkEditor=_InkEditor;exports2.InkEditor=InkEditor;function _updateThickness2(thickness){const savedThickness=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=thickness,_classPrivateMethodGet2(this,_fitToContent,_fitToContent2).call(this)},undo:()=>{this.thickness=savedThickness,_classPrivateMethodGet2(this,_fitToContent,_fitToContent2).call(this)},mustExec:!0,type:_util2.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}__name2(_updateThickness2,"_updateThickness2"),__name(_updateThickness2,"_updateThickness2");function _updateColor2(color){const savedColor=this.color;this.parent.addCommands({cmd:()=>{this.color=color,_classPrivateMethodGet2(this,_redraw,_redraw2).call(this)},undo:()=>{this.color=savedColor,_classPrivateMethodGet2(this,_redraw,_redraw2).call(this)},mustExec:!0,type:_util2.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}__name2(_updateColor2,"_updateColor2"),__name(_updateColor2,"_updateColor2");function _updateOpacity2(opacity){opacity/=100;const savedOpacity=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=opacity,_classPrivateMethodGet2(this,_redraw,_redraw2).call(this)},undo:()=>{this.opacity=savedOpacity,_classPrivateMethodGet2(this,_redraw,_redraw2).call(this)},mustExec:!0,type:_util2.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}__name2(_updateOpacity2,"_updateOpacity2"),__name(_updateOpacity2,"_updateOpacity2");function _getInitialBBox2(){const{width,height,rotation}=this.parent.viewport;switch(rotation){case 90:return[0,width,width,height];case 180:return[width,height,width,height];case 270:return[height,0,width,height];default:return[0,0,width,height]}}__name2(_getInitialBBox2,"_getInitialBBox2"),__name(_getInitialBBox2,"_getInitialBBox2");function _setStroke2(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,_tools.opacityToHex)(this.opacity)}`}__name2(_setStroke2,"_setStroke2"),__name(_setStroke2,"_setStroke2");function _startDrawing2(x,y){if(this.isEditing=!0,!_classPrivateFieldGet2(this,_isCanvasInitialized)){var _this$opacity2;_classPrivateFieldSet2(this,_isCanvasInitialized,!0),_classPrivateMethodGet2(this,_setCanvasDims,_setCanvasDims2).call(this),this.thickness||(this.thickness=InkEditor._defaultThickness),this.color||(this.color=InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor),(_this$opacity2=this.opacity)!==null&&_this$opacity2!==void 0||(this.opacity=InkEditor._defaultOpacity)}this.currentPath.push([x,y]),_classPrivateFieldSet2(this,_lastPoint,null),_classPrivateMethodGet2(this,_setStroke,_setStroke2).call(this),this.ctx.beginPath(),this.ctx.moveTo(x,y),_classPrivateFieldSet2(this,_requestFrameCallback,()=>{_classPrivateFieldGet2(this,_requestFrameCallback)&&(_classPrivateFieldGet2(this,_lastPoint)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):_classPrivateMethodGet2(this,_redraw,_redraw2).call(this),this.ctx.lineTo(..._classPrivateFieldGet2(this,_lastPoint)),_classPrivateFieldSet2(this,_lastPoint,null),this.ctx.stroke()),window.requestAnimationFrame(_classPrivateFieldGet2(this,_requestFrameCallback)))}),window.requestAnimationFrame(_classPrivateFieldGet2(this,_requestFrameCallback))}__name2(_startDrawing2,"_startDrawing2"),__name(_startDrawing2,"_startDrawing2");function _draw2(x,y){const[lastX,lastY]=this.currentPath.at(-1);x===lastX&&y===lastY||(this.currentPath.push([x,y]),_classPrivateFieldSet2(this,_lastPoint,[x,y]))}__name2(_draw2,"_draw2"),__name(_draw2,"_draw2");function _stopDrawing2(x,y){this.ctx.closePath(),_classPrivateFieldSet2(this,_requestFrameCallback,null),x=Math.min(Math.max(x,0),this.canvas.width),y=Math.min(Math.max(y,0),this.canvas.height);const[lastX,lastY]=this.currentPath.at(-1);(x!==lastX||y!==lastY)&&this.currentPath.push([x,y]);let bezier;if(this.currentPath.length!==1)bezier=(0,_pdfjsFitCurve.fitCurve)(this.currentPath,30,null);else{const xy=[x,y];bezier=[[xy,xy.slice(),xy.slice(),xy]]}const path2D=_classStaticPrivateMethodGet(InkEditor,InkEditor,_buildPath2D).call(InkEditor,bezier);this.currentPath.length=0;const cmd=__name(()=>{this.paths.push(bezier),this.bezierPath2D.push(path2D),this.rebuild()},"cmd"),undo=__name(()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(_classPrivateMethodGet2(this,_createCanvas,_createCanvas2).call(this),_classPrivateMethodGet2(this,_createObserver,_createObserver2).call(this)),_classPrivateMethodGet2(this,_fitToContent,_fitToContent2).call(this))},"undo");this.parent.addCommands({cmd,undo,mustExec:!0})}__name2(_stopDrawing2,"_stopDrawing2"),__name(_stopDrawing2,"_stopDrawing2");function _redraw2(){if(this.isEmpty()){_classPrivateMethodGet2(this,_updateTransform,_updateTransform2).call(this);return}_classPrivateMethodGet2(this,_setStroke,_setStroke2).call(this);const{canvas,ctx}=this;ctx.setTransform(1,0,0,1,0,0),ctx.clearRect(0,0,canvas.width,canvas.height),_classPrivateMethodGet2(this,_updateTransform,_updateTransform2).call(this);for(const path of this.bezierPath2D)ctx.stroke(path)}__name2(_redraw2,"_redraw2"),__name(_redraw2,"_redraw2");function _endDrawing2(event){_classPrivateMethodGet2(this,_stopDrawing,_stopDrawing2).call(this,event.offsetX,event.offsetY),this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet2(this,_boundCanvasPointerleave)),this.canvas.removeEventListener("pointermove",_classPrivateFieldGet2(this,_boundCanvasPointermove)),this.parent.addToAnnotationStorage(this)}__name2(_endDrawing2,"_endDrawing2"),__name(_endDrawing2,"_endDrawing2");function _createCanvas2(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",InkEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(msg=>{var _this$canvas;return(_this$canvas=this.canvas)===null||_this$canvas===void 0?void 0:_this$canvas.setAttribute("aria-label",msg)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}__name2(_createCanvas2,"_createCanvas2"),__name(_createCanvas2,"_createCanvas2");function _createObserver2(){_classPrivateFieldSet2(this,_observer,new ResizeObserver(entries=>{const rect=entries[0].contentRect;rect.width&&rect.height&&this.setDimensions(rect.width,rect.height)})),_classPrivateFieldGet2(this,_observer).observe(this.div)}__name2(_createObserver2,"_createObserver2"),__name(_createObserver2,"_createObserver2");function _setCanvasDims2(){if(!_classPrivateFieldGet2(this,_isCanvasInitialized))return;const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*parentWidth),this.canvas.height=Math.ceil(this.height*parentHeight),_classPrivateMethodGet2(this,_updateTransform,_updateTransform2).call(this)}__name2(_setCanvasDims2,"_setCanvasDims2"),__name(_setCanvasDims2,"_setCanvasDims2");function _setScaleFactor2(width,height){const padding=_classPrivateMethodGet2(this,_getPadding,_getPadding2).call(this),scaleFactorW=(width-padding)/_classPrivateFieldGet2(this,_baseWidth),scaleFactorH=(height-padding)/_classPrivateFieldGet2(this,_baseHeight);this.scaleFactor=Math.min(scaleFactorW,scaleFactorH)}__name2(_setScaleFactor2,"_setScaleFactor2"),__name(_setScaleFactor2,"_setScaleFactor2");function _updateTransform2(){const padding=_classPrivateMethodGet2(this,_getPadding,_getPadding2).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+padding,this.translationY*this.scaleFactor+padding)}__name2(_updateTransform2,"_updateTransform2"),__name(_updateTransform2,"_updateTransform2");function _buildPath2D(bezier){const path2D=new Path2D;for(let i=0,ii=bezier.length;i<ii;i++){const[first,control1,control2,second]=bezier[i];i===0&&path2D.moveTo(...first),path2D.bezierCurveTo(control1[0],control1[1],control2[0],control2[1],second[0],second[1])}return path2D}__name2(_buildPath2D,"_buildPath2D"),__name(_buildPath2D,"_buildPath2D");function _serializePaths2(s,tx,ty,h){const paths=[],padding=this.thickness/2;let buffer,points;for(const bezier of this.paths){buffer=[],points=[];for(let i=0,ii=bezier.length;i<ii;i++){const[first,control1,control2,second]=bezier[i],p10=s*(first[0]+tx)+padding,p11=h-s*(first[1]+ty)-padding,p20=s*(control1[0]+tx)+padding,p21=h-s*(control1[1]+ty)-padding,p30=s*(control2[0]+tx)+padding,p31=h-s*(control2[1]+ty)-padding,p40=s*(second[0]+tx)+padding,p41=h-s*(second[1]+ty)-padding;i===0&&(buffer.push(p10,p11),points.push(p10,p11)),buffer.push(p20,p21,p30,p31,p40,p41),_classPrivateMethodGet2(this,_extractPointsOnBezier,_extractPointsOnBezier2).call(this,p10,p11,p20,p21,p30,p31,p40,p41,4,points)}paths.push({bezier:buffer,points})}return paths}__name2(_serializePaths2,"_serializePaths2"),__name(_serializePaths2,"_serializePaths2");function _extractPointsOnBezier2(p10,p11,p20,p21,p30,p31,p40,p41,n,points){if(_classPrivateMethodGet2(this,_isAlmostFlat,_isAlmostFlat2).call(this,p10,p11,p20,p21,p30,p31,p40,p41)){points.push(p40,p41);return}for(let i=1;i<n-1;i++){const t=i/n,mt=1-t;let q10=t*p10+mt*p20,q11=t*p11+mt*p21,q20=t*p20+mt*p30,q21=t*p21+mt*p31;const q30=t*p30+mt*p40,q31=t*p31+mt*p41;q10=t*q10+mt*q20,q11=t*q11+mt*q21,q20=t*q20+mt*q30,q21=t*q21+mt*q31,q10=t*q10+mt*q20,q11=t*q11+mt*q21,points.push(q10,q11)}points.push(p40,p41)}__name2(_extractPointsOnBezier2,"_extractPointsOnBezier2"),__name(_extractPointsOnBezier2,"_extractPointsOnBezier2");function _isAlmostFlat2(p10,p11,p20,p21,p30,p31,p40,p41){const ax=(3*p20-2*p10-p40)**2,ay=(3*p21-2*p11-p41)**2,bx=(3*p30-p10-2*p40)**2,by=(3*p31-p11-2*p41)**2;return Math.max(ax,bx)+Math.max(ay,by)<=10}__name2(_isAlmostFlat2,"_isAlmostFlat2"),__name(_isAlmostFlat2,"_isAlmostFlat2");function _getBbox2(){let xMin=1/0,xMax=-1/0,yMin=1/0,yMax=-1/0;for(const path of this.paths)for(const[first,control1,control2,second]of path){const bbox=_util2.Util.bezierBoundingBox(...first,...control1,...control2,...second);xMin=Math.min(xMin,bbox[0]),yMin=Math.min(yMin,bbox[1]),xMax=Math.max(xMax,bbox[2]),yMax=Math.max(yMax,bbox[3])}return[xMin,yMin,xMax,yMax]}__name2(_getBbox2,"_getBbox2"),__name(_getBbox2,"_getBbox2");function _getPadding2(){return _classPrivateFieldGet2(this,_disableEditing)?Math.ceil(this.thickness*this.parent.scaleFactor):0}__name2(_getPadding2,"_getPadding2"),__name(_getPadding2,"_getPadding2");function _fitToContent2(){let firstTime=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return;if(!_classPrivateFieldGet2(this,_disableEditing)){_classPrivateMethodGet2(this,_redraw,_redraw2).call(this);return}const bbox=_classPrivateMethodGet2(this,_getBbox,_getBbox2).call(this),padding=_classPrivateMethodGet2(this,_getPadding,_getPadding2).call(this);_classPrivateFieldSet2(this,_baseWidth,Math.max(RESIZER_SIZE,bbox[2]-bbox[0])),_classPrivateFieldSet2(this,_baseHeight,Math.max(RESIZER_SIZE,bbox[3]-bbox[1]));const width=Math.ceil(padding+_classPrivateFieldGet2(this,_baseWidth)*this.scaleFactor),height=Math.ceil(padding+_classPrivateFieldGet2(this,_baseHeight)*this.scaleFactor),[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.width=width/parentWidth,this.height=height/parentHeight,_classPrivateFieldSet2(this,_aspectRatio,width/height),_classPrivateMethodGet2(this,_setMinDims,_setMinDims2).call(this);const prevTranslationX=this.translationX,prevTranslationY=this.translationY;this.translationX=-bbox[0],this.translationY=-bbox[1],_classPrivateMethodGet2(this,_setCanvasDims,_setCanvasDims2).call(this),_classPrivateMethodGet2(this,_redraw,_redraw2).call(this),_classPrivateFieldSet2(this,_realWidth,width),_classPrivateFieldSet2(this,_realHeight,height),this.setDims(width,height);const unscaledPadding=firstTime?padding/this.scaleFactor/2:0;this.translate(prevTranslationX-this.translationX-unscaledPadding,prevTranslationY-this.translationY-unscaledPadding)}__name2(_fitToContent2,"_fitToContent2"),__name(_fitToContent2,"_fitToContent2");function _setMinDims2(){const{style}=this.div;_classPrivateFieldGet2(this,_aspectRatio)>=1?(style.minHeight=`${RESIZER_SIZE}px`,style.minWidth=`${Math.round(_classPrivateFieldGet2(this,_aspectRatio)*RESIZER_SIZE)}px`):(style.minWidth=`${RESIZER_SIZE}px`,style.minHeight=`${Math.round(RESIZER_SIZE/_classPrivateFieldGet2(this,_aspectRatio))}px`)}__name2(_setMinDims2,"_setMinDims2"),__name(_setMinDims2,"_setMinDims2"),_defineProperty(InkEditor,"_defaultColor",null),_defineProperty(InkEditor,"_defaultOpacity",1),_defineProperty(InkEditor,"_defaultThickness",1),_defineProperty(InkEditor,"_l10nPromise",void 0),_defineProperty(InkEditor,"_type","ink")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.fitCurve=void 0;const fitCurve=__w_pdfjs_require__2(151);exports2.fitCurve=fitCurve},module2=>{function fitCurve(points,maxError,progressCallback){if(!Array.isArray(points))throw new TypeError("First argument should be an array");if(points.forEach(point=>{if(!Array.isArray(point)||point.some(item=>typeof item!="number")||point.length!==points[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),points=points.filter((point,i)=>i===0||!point.every((val,j)=>val===points[i-1][j])),points.length<2)return[];const len=points.length,leftTangent=createTangent(points[1],points[0]),rightTangent=createTangent(points[len-2],points[len-1]);return fitCubic(points,leftTangent,rightTangent,maxError,progressCallback)}__name2(fitCurve,"fitCurve"),__name(fitCurve,"fitCurve");function fitCubic(points,leftTangent,rightTangent,error,progressCallback){var bezCurve,u,uPrime,maxError,prevErr,splitPoint,prevSplit,centerVector,toCenterTangent,fromCenterTangent,beziers,dist,i;if(points.length===2)return dist=maths.vectorLen(maths.subtract(points[0],points[1]))/3,bezCurve=[points[0],maths.addArrays(points[0],maths.mulItems(leftTangent,dist)),maths.addArrays(points[1],maths.mulItems(rightTangent,dist)),points[1]],[bezCurve];if(u=chordLengthParameterize(points),[bezCurve,maxError,splitPoint]=generateAndReport(points,u,u,leftTangent,rightTangent,progressCallback),maxError===0||maxError<error)return[bezCurve];if(maxError<error*error)for(uPrime=u,prevErr=maxError,prevSplit=splitPoint,i=0;i<20;i++){if(uPrime=reparameterize(bezCurve,points,uPrime),[bezCurve,maxError,splitPoint]=generateAndReport(points,u,uPrime,leftTangent,rightTangent,progressCallback),maxError<error)return[bezCurve];if(splitPoint===prevSplit){let errChange=maxError/prevErr;if(errChange>.9999&&errChange<1.0001)break}prevErr=maxError,prevSplit=splitPoint}return beziers=[],centerVector=maths.subtract(points[splitPoint-1],points[splitPoint+1]),centerVector.every(val=>val===0)&&(centerVector=maths.subtract(points[splitPoint-1],points[splitPoint]),[centerVector[0],centerVector[1]]=[-centerVector[1],centerVector[0]]),toCenterTangent=maths.normalize(centerVector),fromCenterTangent=maths.mulItems(toCenterTangent,-1),beziers=beziers.concat(fitCubic(points.slice(0,splitPoint+1),leftTangent,toCenterTangent,error,progressCallback)),beziers=beziers.concat(fitCubic(points.slice(splitPoint),fromCenterTangent,rightTangent,error,progressCallback)),beziers}__name2(fitCubic,"fitCubic"),__name(fitCubic,"fitCubic");function generateAndReport(points,paramsOrig,paramsPrime,leftTangent,rightTangent,progressCallback){var bezCurve,maxError,splitPoint;return bezCurve=generateBezier(points,paramsPrime,leftTangent,rightTangent),[maxError,splitPoint]=computeMaxError(points,bezCurve,paramsOrig),progressCallback&&progressCallback({bez:bezCurve,points,params:paramsOrig,maxErr:maxError,maxPoint:splitPoint}),[bezCurve,maxError,splitPoint]}__name2(generateAndReport,"generateAndReport"),__name(generateAndReport,"generateAndReport");function generateBezier(points,parameters,leftTangent,rightTangent){var bezCurve,A,a,C,X,det_C0_C1,det_C0_X,det_X_C1,alpha_l,alpha_r,epsilon,segLength,i,len,tmp,u,ux,firstPoint=points[0],lastPoint=points[points.length-1];for(bezCurve=[firstPoint,null,null,lastPoint],A=maths.zeros_Xx2x2(parameters.length),i=0,len=parameters.length;i<len;i++)u=parameters[i],ux=1-u,a=A[i],a[0]=maths.mulItems(leftTangent,3*u*(ux*ux)),a[1]=maths.mulItems(rightTangent,3*ux*(u*u));for(C=[[0,0],[0,0]],X=[0,0],i=0,len=points.length;i<len;i++)u=parameters[i],a=A[i],C[0][0]+=maths.dot(a[0],a[0]),C[0][1]+=maths.dot(a[0],a[1]),C[1][0]+=maths.dot(a[0],a[1]),C[1][1]+=maths.dot(a[1],a[1]),tmp=maths.subtract(points[i],bezier.q([firstPoint,firstPoint,lastPoint,lastPoint],u)),X[0]+=maths.dot(a[0],tmp),X[1]+=maths.dot(a[1],tmp);return det_C0_C1=C[0][0]*C[1][1]-C[1][0]*C[0][1],det_C0_X=C[0][0]*X[1]-C[1][0]*X[0],det_X_C1=X[0]*C[1][1]-X[1]*C[0][1],alpha_l=det_C0_C1===0?0:det_X_C1/det_C0_C1,alpha_r=det_C0_C1===0?0:det_C0_X/det_C0_C1,segLength=maths.vectorLen(maths.subtract(firstPoint,lastPoint)),epsilon=1e-6*segLength,alpha_l<epsilon||alpha_r<epsilon?(bezCurve[1]=maths.addArrays(firstPoint,maths.mulItems(leftTangent,segLength/3)),bezCurve[2]=maths.addArrays(lastPoint,maths.mulItems(rightTangent,segLength/3))):(bezCurve[1]=maths.addArrays(firstPoint,maths.mulItems(leftTangent,alpha_l)),bezCurve[2]=maths.addArrays(lastPoint,maths.mulItems(rightTangent,alpha_r))),bezCurve}__name2(generateBezier,"generateBezier"),__name(generateBezier,"generateBezier");function reparameterize(bezier2,points,parameters){return parameters.map((p,i)=>newtonRaphsonRootFind(bezier2,points[i],p))}__name2(reparameterize,"reparameterize"),__name(reparameterize,"reparameterize");function newtonRaphsonRootFind(bez,point,u){var d=maths.subtract(bezier.q(bez,u),point),qprime=bezier.qprime(bez,u),numerator=maths.mulMatrix(d,qprime),denominator=maths.sum(maths.squareItems(qprime))+2*maths.mulMatrix(d,bezier.qprimeprime(bez,u));return denominator===0?u:u-numerator/denominator}__name2(newtonRaphsonRootFind,"newtonRaphsonRootFind"),__name(newtonRaphsonRootFind,"newtonRaphsonRootFind");function chordLengthParameterize(points){var u=[],currU,prevU,prevP;return points.forEach((p,i)=>{currU=i?prevU+maths.vectorLen(maths.subtract(p,prevP)):0,u.push(currU),prevU=currU,prevP=p}),u=u.map(x=>x/prevU),u}__name2(chordLengthParameterize,"chordLengthParameterize"),__name(chordLengthParameterize,"chordLengthParameterize");function computeMaxError(points,bez,parameters){var dist,maxDist,splitPoint,v,i,count,point,t;maxDist=0,splitPoint=Math.floor(points.length/2);const t_distMap=mapTtoRelativeDistances(bez,10);for(i=0,count=points.length;i<count;i++)point=points[i],t=find_t(bez,parameters[i],t_distMap,10),v=maths.subtract(bezier.q(bez,t),point),dist=v[0]*v[0]+v[1]*v[1],dist>maxDist&&(maxDist=dist,splitPoint=i);return[maxDist,splitPoint]}__name2(computeMaxError,"computeMaxError"),__name(computeMaxError,"computeMaxError");var mapTtoRelativeDistances=__name(function(bez,B_parts){for(var B_t_curr,B_t_dist=[0],B_t_prev=bez[0],sumLen=0,i=1;i<=B_parts;i++)B_t_curr=bezier.q(bez,i/B_parts),sumLen+=maths.vectorLen(maths.subtract(B_t_curr,B_t_prev)),B_t_dist.push(sumLen),B_t_prev=B_t_curr;return B_t_dist=B_t_dist.map(x=>x/sumLen),B_t_dist},"mapTtoRelativeDistances");function find_t(bez,param,t_distMap,B_parts){if(param<0)return 0;if(param>1)return 1;for(var lenMax,lenMin,tMax,tMin,t,i=1;i<=B_parts;i++)if(param<=t_distMap[i]){tMin=(i-1)/B_parts,tMax=i/B_parts,lenMin=t_distMap[i-1],lenMax=t_distMap[i],t=(param-lenMin)/(lenMax-lenMin)*(tMax-tMin)+tMin;break}return t}__name2(find_t,"find_t"),__name(find_t,"find_t");function createTangent(pointA,pointB){return maths.normalize(maths.subtract(pointA,pointB))}__name2(createTangent,"createTangent"),__name(createTangent,"createTangent");const _maths=class _maths2{static{__name2(this,"_maths")}static zeros_Xx2x2(x){for(var zs=[];x--;)zs.push([0,0]);return zs}static mulItems(items,multiplier){return items.map(x=>x*multiplier)}static mulMatrix(m1,m2){return m1.reduce((sum,x1,i)=>sum+x1*m2[i],0)}static subtract(arr1,arr2){return arr1.map((x1,i)=>x1-arr2[i])}static addArrays(arr1,arr2){return arr1.map((x1,i)=>x1+arr2[i])}static addItems(items,addition){return items.map(x=>x+addition)}static sum(items){return items.reduce((sum,x)=>sum+x)}static dot(m1,m2){return _maths2.mulMatrix(m1,m2)}static vectorLen(v){return Math.hypot(...v)}static divItems(items,divisor){return items.map(x=>x/divisor)}static squareItems(items){return items.map(x=>x*x)}static normalize(v){return this.divItems(v,this.vectorLen(v))}};__name(_maths,"maths");let maths=_maths;const _bezier=class{static{__name2(this,"_bezier")}static q(ctrlPoly,t){var tx=1-t,pA=maths.mulItems(ctrlPoly[0],tx*tx*tx),pB=maths.mulItems(ctrlPoly[1],3*tx*tx*t),pC=maths.mulItems(ctrlPoly[2],3*tx*t*t),pD=maths.mulItems(ctrlPoly[3],t*t*t);return maths.addArrays(maths.addArrays(pA,pB),maths.addArrays(pC,pD))}static qprime(ctrlPoly,t){var tx=1-t,pA=maths.mulItems(maths.subtract(ctrlPoly[1],ctrlPoly[0]),3*tx*tx),pB=maths.mulItems(maths.subtract(ctrlPoly[2],ctrlPoly[1]),6*tx*t),pC=maths.mulItems(maths.subtract(ctrlPoly[3],ctrlPoly[2]),3*t*t);return maths.addArrays(maths.addArrays(pA,pB),pC)}static qprimeprime(ctrlPoly,t){return maths.addArrays(maths.mulItems(maths.addArrays(maths.subtract(ctrlPoly[2],maths.mulItems(ctrlPoly[1],2)),ctrlPoly[0]),6*(1-t)),maths.mulItems(maths.addArrays(maths.subtract(ctrlPoly[3],maths.mulItems(ctrlPoly[2],2)),ctrlPoly[1]),6*t))}};__name(_bezier,"bezier");let bezier=_bezier;module2.exports=fitCurve,module2.exports.fitCubic=fitCubic,module2.exports.createTangent=createTangent},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.AnnotationLayer=void 0;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(133),_annotation_storage2=__w_pdfjs_require__2(130),_scripting_utils=__w_pdfjs_require__2(153),_xfa_layer=__w_pdfjs_require__2(154);function _classStaticPrivateMethodGet(receiver,classConstructor,method){return _classCheckPrivateStaticAccess2(receiver,classConstructor),method}__name2(_classStaticPrivateMethodGet,"_classStaticPrivateMethodGet"),__name(_classStaticPrivateMethodGet,"_classStaticPrivateMethodGet");function _classCheckPrivateStaticAccess2(receiver,classConstructor){if(receiver!==classConstructor)throw new TypeError("Private static access of wrong provenance")}__name2(_classCheckPrivateStaticAccess2,"_classCheckPrivateStaticAccess2"),__name(_classCheckPrivateStaticAccess2,"_classCheckPrivateStaticAccess");const DEFAULT_TAB_INDEX=1e3,DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet;function getRectDims(rect){return{width:rect[2]-rect[0],height:rect[3]-rect[1]}}__name2(getRectDims,"getRectDims"),__name(getRectDims,"getRectDims");const _AnnotationElementFactory=class{static{__name2(this,"_AnnotationElementFactory")}static create(parameters){switch(parameters.data.annotationType){case _util2.AnnotationType.LINK:return new LinkAnnotationElement(parameters);case _util2.AnnotationType.TEXT:return new TextAnnotationElement(parameters);case _util2.AnnotationType.WIDGET:switch(parameters.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(parameters);case"Btn":return parameters.data.radioButton?new RadioButtonWidgetAnnotationElement(parameters):parameters.data.checkBox?new CheckboxWidgetAnnotationElement(parameters):new PushButtonWidgetAnnotationElement(parameters);case"Ch":return new ChoiceWidgetAnnotationElement(parameters)}return new WidgetAnnotationElement(parameters);case _util2.AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case _util2.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(parameters);case _util2.AnnotationType.LINE:return new LineAnnotationElement(parameters);case _util2.AnnotationType.SQUARE:return new SquareAnnotationElement(parameters);case _util2.AnnotationType.CIRCLE:return new CircleAnnotationElement(parameters);case _util2.AnnotationType.POLYLINE:return new PolylineAnnotationElement(parameters);case _util2.AnnotationType.CARET:return new CaretAnnotationElement(parameters);case _util2.AnnotationType.INK:return new InkAnnotationElement(parameters);case _util2.AnnotationType.POLYGON:return new PolygonAnnotationElement(parameters);case _util2.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case _util2.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case _util2.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case _util2.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case _util2.AnnotationType.STAMP:return new StampAnnotationElement(parameters);case _util2.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters)}}};__name(_AnnotationElementFactory,"AnnotationElementFactory");let AnnotationElementFactory=_AnnotationElementFactory;const _AnnotationElement=class{static{__name2(this,"_AnnotationElement")}constructor(parameters){let{isRenderable=!1,ignoreBorder=!1,createQuadrilaterals=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=isRenderable,this.data=parameters.data,this.layer=parameters.layer,this.page=parameters.page,this.viewport=parameters.viewport,this.linkService=parameters.linkService,this.downloadManager=parameters.downloadManager,this.imageResourcesPath=parameters.imageResourcesPath,this.renderForms=parameters.renderForms,this.svgFactory=parameters.svgFactory,this.annotationStorage=parameters.annotationStorage,this.enableScripting=parameters.enableScripting,this.hasJSActions=parameters.hasJSActions,this._fieldObjects=parameters.fieldObjects,this._mouseState=parameters.mouseState,isRenderable&&(this.container=this._createContainer(ignoreBorder)),createQuadrilaterals&&(this.quadrilaterals=this._createQuadrilaterals(ignoreBorder))}_createContainer(){let ignoreBorder=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const data=this.data,page=this.page,viewport=this.viewport,container=document.createElement("section"),{width,height}=getRectDims(data.rect),[pageLLx,pageLLy,pageURx,pageURy]=viewport.viewBox,pageWidth=pageURx-pageLLx,pageHeight=pageURy-pageLLy;container.setAttribute("data-annotation-id",data.id);const rect=_util2.Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);if(!ignoreBorder&&data.borderStyle.width>0){container.style.borderWidth=`${data.borderStyle.width}px`;const horizontalRadius=data.borderStyle.horizontalCornerRadius,verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){const radius=`calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;container.style.borderRadius=radius}else if(this instanceof RadioButtonWidgetAnnotationElement){const radius=`calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;container.style.borderRadius=radius}switch(data.borderStyle.style){case _util2.AnnotationBorderStyleType.SOLID:container.style.borderStyle="solid";break;case _util2.AnnotationBorderStyleType.DASHED:container.style.borderStyle="dashed";break;case _util2.AnnotationBorderStyleType.BEVELED:(0,_util2.warn)("Unimplemented border style: beveled");break;case _util2.AnnotationBorderStyleType.INSET:(0,_util2.warn)("Unimplemented border style: inset");break;case _util2.AnnotationBorderStyleType.UNDERLINE:container.style.borderBottomStyle="solid";break}const borderColor=data.borderColor||null;borderColor?container.style.borderColor=_util2.Util.makeHexColor(borderColor[0]|0,borderColor[1]|0,borderColor[2]|0):container.style.borderWidth=0}container.style.left=`${100*(rect[0]-pageLLx)/pageWidth}%`,container.style.top=`${100*(rect[1]-pageLLy)/pageHeight}%`;const{rotation}=data;return data.hasOwnCanvas||rotation===0?(container.style.width=`${100*width/pageWidth}%`,container.style.height=`${100*height/pageHeight}%`):this.setRotation(rotation,container),container}setRotation(angle){let container=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;const[pageLLx,pageLLy,pageURx,pageURy]=this.viewport.viewBox,pageWidth=pageURx-pageLLx,pageHeight=pageURy-pageLLy,{width,height}=getRectDims(this.data.rect);let elementWidth,elementHeight;angle%180===0?(elementWidth=100*width/pageWidth,elementHeight=100*height/pageHeight):(elementWidth=100*height/pageWidth,elementHeight=100*width/pageHeight),container.style.width=`${elementWidth}%`,container.style.height=`${elementHeight}%`,container.setAttribute("data-main-rotation",(360-angle)%360)}get _commonActions(){const setColor=__name((jsName,styleName,event)=>{const color=event.detail[jsName];event.target.style[styleName]=_scripting_utils.ColorConverters[`${color[0]}_HTML`](color.slice(1))},"setColor");return(0,_util2.shadow)(this,"_commonActions",{display:event=>{const hidden=event.detail.display%2===1;this.container.style.visibility=hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden,print:event.detail.display===0||event.detail.display===3})},print:event=>{this.annotationStorage.setValue(this.data.id,{print:event.detail.print})},hidden:event=>{this.container.style.visibility=event.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:event.detail.hidden})},focus:event=>{setTimeout(()=>event.target.focus({preventScroll:!1}),0)},userName:event=>{event.target.title=event.detail.userName},readonly:event=>{event.detail.readonly?event.target.setAttribute("readonly",""):event.target.removeAttribute("readonly")},required:event=>{this._setRequired(event.target,event.detail.required)},bgColor:event=>{setColor("bgColor","backgroundColor",event)},fillColor:event=>{setColor("fillColor","backgroundColor",event)},fgColor:event=>{setColor("fgColor","color",event)},textColor:event=>{setColor("textColor","color",event)},borderColor:event=>{setColor("borderColor","borderColor",event)},strokeColor:event=>{setColor("strokeColor","borderColor",event)},rotation:event=>{const angle=event.detail.rotation;this.setRotation(angle),this.annotationStorage.setValue(this.data.id,{rotation:angle})}})}_dispatchEventFromSandbox(actions,jsEvent){const commonActions=this._commonActions;for(const name of Object.keys(jsEvent.detail)){const action=actions[name]||commonActions[name];action&&action(jsEvent)}}_setDefaultPropertiesFromJS(element){if(!this.enableScripting)return;const storedData=this.annotationStorage.getRawValue(this.data.id);if(!storedData)return;const commonActions=this._commonActions;for(const[actionName,detail]of Object.entries(storedData)){const action=commonActions[actionName];if(action){const eventProxy={detail:{[actionName]:detail},target:element};action(eventProxy),delete storedData[actionName]}}}_createQuadrilaterals(){let ignoreBorder=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.data.quadPoints)return null;const quadrilaterals=[],savedRect=this.data.rect;for(const quadPoint of this.data.quadPoints)this.data.rect=[quadPoint[2].x,quadPoint[2].y,quadPoint[1].x,quadPoint[1].y],quadrilaterals.push(this._createContainer(ignoreBorder));return this.data.rect=savedRect,quadrilaterals}_createPopup(trigger,data){let container=this.container;this.quadrilaterals&&(trigger=trigger||this.quadrilaterals,container=this.quadrilaterals[0]),trigger||(trigger=document.createElement("div"),trigger.className="popupTriggerArea",container.append(trigger));const popup=new PopupElement({container,trigger,color:data.color,titleObj:data.titleObj,modificationDate:data.modificationDate,contentsObj:data.contentsObj,richText:data.richText,hideWrapper:!0}).render();popup.style.left="100%",container.append(popup)}_renderQuadrilaterals(className){for(const quadrilateral of this.quadrilaterals)quadrilateral.className=className;return this.quadrilaterals}render(){(0,_util2.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(name){let skipId=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const fields=[];if(this._fieldObjects){const fieldObj=this._fieldObjects[name];if(fieldObj)for(const{page,id,exportValues}of fieldObj){if(page===-1||id===skipId)continue;const exportValue=typeof exportValues=="string"?exportValues:null,domElement=document.querySelector(`[data-element-id="${id}"]`);if(domElement&&!GetElementsByNameSet.has(domElement)){(0,_util2.warn)(`_getElementsByName - element not allowed: ${id}`);continue}fields.push({id,exportValue,domElement})}return fields}for(const domElement of document.getElementsByName(name)){const{id,exportValue}=domElement;id!==skipId&&GetElementsByNameSet.has(domElement)&&fields.push({id,exportValue,domElement})}return fields}static get platform(){const platform=typeof navigator<"u"?navigator.platform:"";return(0,_util2.shadow)(this,"platform",{isWin:platform.includes("Win"),isMac:platform.includes("Mac")})}};__name(_AnnotationElement,"AnnotationElement");let AnnotationElement=_AnnotationElement;const _LinkAnnotationElement=class extends AnnotationElement{static{__name2(this,"_LinkAnnotationElement")}constructor(parameters){let options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(parameters,{isRenderable:!0,ignoreBorder:!!(options!=null&&options.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=parameters.data.isTooltipOnly}render(){const{data,linkService}=this,link=document.createElement("a");link.setAttribute("data-element-id",data.id);let isBound=!1;return data.url?(linkService.addLinkAttributes(link,data.url,data.newWindow),isBound=!0):data.action?(this._bindNamedAction(link,data.action),isBound=!0):data.dest?(this._bindLink(link,data.dest),isBound=!0):(data.actions&&(data.actions.Action||data.actions["Mouse Up"]||data.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(link,data),isBound=!0),data.resetForm?(this._bindResetFormAction(link,data.resetForm),isBound=!0):this.isTooltipOnly&&!isBound&&(this._bindLink(link,""),isBound=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((quadrilateral,index)=>{const linkElement=index===0?link:link.cloneNode();return quadrilateral.append(linkElement),quadrilateral}):(this.container.className="linkAnnotation",isBound&&this.container.append(link),this.container)}_bindLink(link,destination){link.href=this.linkService.getDestinationHash(destination),link.onclick=()=>(destination&&this.linkService.goToDestination(destination),!1),(destination||destination==="")&&(link.className="internalLink")}_bindNamedAction(link,action){link.href=this.linkService.getAnchorUrl(""),link.onclick=()=>(this.linkService.executeNamedAction(action),!1),link.className="internalLink"}_bindJSAction(link,data){link.href=this.linkService.getAnchorUrl("");const map=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const name of Object.keys(data.actions)){const jsName=map.get(name);jsName&&(link[jsName]=()=>{var _this$linkService$eve;return(_this$linkService$eve=this.linkService.eventBus)===null||_this$linkService$eve===void 0||_this$linkService$eve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:data.id,name}}),!1})}link.onclick||(link.onclick=()=>!1),link.className="internalLink"}_bindResetFormAction(link,resetForm){const otherClickAction=link.onclick;if(otherClickAction||(link.href=this.linkService.getAnchorUrl("")),link.className="internalLink",!this._fieldObjects){(0,_util2.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),otherClickAction||(link.onclick=()=>!1);return}link.onclick=()=>{otherClickAction&&otherClickAction();const{fields:resetFormFields,refs:resetFormRefs,include}=resetForm,allFields=[];if(resetFormFields.length!==0||resetFormRefs.length!==0){const fieldIds=new Set(resetFormRefs);for(const fieldName of resetFormFields){const fields=this._fieldObjects[fieldName]||[];for(const{id}of fields)fieldIds.add(id)}for(const fields of Object.values(this._fieldObjects))for(const field of fields)fieldIds.has(field.id)===include&&allFields.push(field)}else for(const fields of Object.values(this._fieldObjects))allFields.push(...fields);const storage=this.annotationStorage,allIds=[];for(const field of allFields){const{id}=field;switch(allIds.push(id),field.type){case"text":{const value=field.defaultValue||"";storage.setValue(id,{value});break}case"checkbox":case"radiobutton":{const value=field.defaultValue===field.exportValues;storage.setValue(id,{value});break}case"combobox":case"listbox":{const value=field.defaultValue||"";storage.setValue(id,{value});break}default:continue}const domElement=document.querySelector(`[data-element-id="${id}"]`);if(domElement){if(!GetElementsByNameSet.has(domElement)){(0,_util2.warn)(`_bindResetFormAction - element not allowed: ${id}`);continue}}else continue;domElement.dispatchEvent(new Event("resetform"))}if(this.enableScripting){var _this$linkService$eve2;(_this$linkService$eve2=this.linkService.eventBus)===null||_this$linkService$eve2===void 0||_this$linkService$eve2.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:allIds,name:"ResetForm"}})}return!1}}};__name(_LinkAnnotationElement,"LinkAnnotationElement");let LinkAnnotationElement=_LinkAnnotationElement;const _TextAnnotationElement=class extends AnnotationElement{static{__name2(this,"_TextAnnotationElement")}constructor(parameters){var _parameters$data$titl,_parameters$data$cont,_parameters$data$rich;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl=parameters.data.titleObj)!==null&&_parameters$data$titl!==void 0&&_parameters$data$titl.str||(_parameters$data$cont=parameters.data.contentsObj)!==null&&_parameters$data$cont!==void 0&&_parameters$data$cont.str||(_parameters$data$rich=parameters.data.richText)!==null&&_parameters$data$rich!==void 0&&_parameters$data$rich.str);super(parameters,{isRenderable})}render(){this.container.className="textAnnotation";const image=document.createElement("img");return image.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",image.alt="[{{type}} Annotation]",image.dataset.l10nId="text_annotation_type",image.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(image,this.data),this.container.append(image),this.container}};__name(_TextAnnotationElement,"TextAnnotationElement");let TextAnnotationElement=_TextAnnotationElement;const _WidgetAnnotationElement=class extends AnnotationElement{static{__name2(this,"_WidgetAnnotationElement")}render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(event){const{isWin,isMac}=AnnotationElement.platform;return isWin&&event.ctrlKey||isMac&&event.metaKey}_setEventListener(element,baseName,eventName,valueGetter){baseName.includes("mouse")?element.addEventListener(baseName,event=>{var _this$linkService$eve3;(_this$linkService$eve3=this.linkService.eventBus)===null||_this$linkService$eve3===void 0||_this$linkService$eve3.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event),shift:event.shiftKey,modifier:this._getKeyModifier(event)}})}):element.addEventListener(baseName,event=>{var _this$linkService$eve4;(_this$linkService$eve4=this.linkService.eventBus)===null||_this$linkService$eve4===void 0||_this$linkService$eve4.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event)}})})}_setEventListeners(element,names,getter){for(const[baseName,eventName]of names){var _this$data$actions;(eventName==="Action"||(_this$data$actions=this.data.actions)!==null&&_this$data$actions!==void 0&&_this$data$actions[eventName])&&this._setEventListener(element,baseName,eventName,getter)}}_setBackgroundColor(element){const color=this.data.backgroundColor||null;element.style.backgroundColor=color===null?"transparent":_util2.Util.makeHexColor(color[0],color[1],color[2])}_setTextStyle(element){const TEXT_ALIGNMENT=["left","center","right"],{fontColor}=this.data.defaultAppearanceData,fontSize=this.data.defaultAppearanceData.fontSize||DEFAULT_FONT_SIZE,style=element.style;let computedFontSize;if(this.data.multiLine){const height=Math.abs(this.data.rect[3]-this.data.rect[1]),numberOfLines=Math.round(height/(_util2.LINE_FACTOR*fontSize))||1,lineHeight=height/numberOfLines;computedFontSize=Math.min(fontSize,Math.round(lineHeight/_util2.LINE_FACTOR))}else{const height=Math.abs(this.data.rect[3]-this.data.rect[1]);computedFontSize=Math.min(fontSize,Math.round(height/_util2.LINE_FACTOR))}style.fontSize=`calc(${computedFontSize}px * var(--scale-factor))`,style.color=_util2.Util.makeHexColor(fontColor[0],fontColor[1],fontColor[2]),this.data.textAlignment!==null&&(style.textAlign=TEXT_ALIGNMENT[this.data.textAlignment])}_setRequired(element,isRequired){isRequired?element.setAttribute("required",!0):element.removeAttribute("required"),element.setAttribute("aria-required",isRequired)}};__name(_WidgetAnnotationElement,"WidgetAnnotationElement");let WidgetAnnotationElement=_WidgetAnnotationElement;const _TextWidgetAnnotationElement=class extends WidgetAnnotationElement{static{__name2(this,"_TextWidgetAnnotationElement")}constructor(parameters){const isRenderable=parameters.renderForms||!parameters.data.hasAppearance&&!!parameters.data.fieldValue;super(parameters,{isRenderable})}setPropertyOnSiblings(base,key,value,keyInStorage){const storage=this.annotationStorage;for(const element of this._getElementsByName(base.name,base.id))element.domElement&&(element.domElement[key]=value),storage.setValue(element.id,{[keyInStorage]:value})}render(){const storage=this.annotationStorage,id=this.data.id;this.container.className="textWidgetAnnotation";let element=null;if(this.renderForms){const storedData=storage.getValue(id,{value:this.data.fieldValue});let textContent=storedData.formattedValue||storedData.value||"";const maxLen=storage.getValue(id,{charLimit:this.data.maxLen}).charLimit;maxLen&&textContent.length>maxLen&&(textContent=textContent.slice(0,maxLen));const elementData={userValue:textContent,formattedValue:null,valueOnFocus:""};this.data.multiLine?(element=document.createElement("textarea"),element.textContent=textContent,this.data.doNotScroll&&(element.style.overflowY="hidden")):(element=document.createElement("input"),element.type="text",element.setAttribute("value",textContent),this.data.doNotScroll&&(element.style.overflowX="hidden")),GetElementsByNameSet.add(element),element.setAttribute("data-element-id",id),element.disabled=this.data.readOnly,element.name=this.data.fieldName,element.tabIndex=DEFAULT_TAB_INDEX,this._setRequired(element,this.data.required),maxLen&&(element.maxLength=maxLen),element.addEventListener("input",event=>{storage.setValue(id,{value:event.target.value}),this.setPropertyOnSiblings(element,"value",event.target.value,"value")}),element.addEventListener("resetform",event=>{var _this$data$defaultFie;const defaultValue=(_this$data$defaultFie=this.data.defaultFieldValue)!==null&&_this$data$defaultFie!==void 0?_this$data$defaultFie:"";element.value=elementData.userValue=defaultValue,elementData.formattedValue=null});let blurListener=__name(event=>{const{formattedValue}=elementData;formattedValue!=null&&(event.target.value=formattedValue),event.target.scrollLeft=0},"blurListener");if(this.enableScripting&&this.hasJSActions){var _this$data$actions2;element.addEventListener("focus",event=>{elementData.userValue&&(event.target.value=elementData.userValue),elementData.valueOnFocus=event.target.value}),element.addEventListener("updatefromsandbox",jsEvent=>{const actions={value(event){var _event$detail$value;elementData.userValue=(_event$detail$value=event.detail.value)!==null&&_event$detail$value!==void 0?_event$detail$value:"",storage.setValue(id,{value:elementData.userValue.toString()}),event.target.value=elementData.userValue},formattedValue(event){const{formattedValue}=event.detail;elementData.formattedValue=formattedValue,formattedValue!=null&&event.target!==document.activeElement&&(event.target.value=formattedValue),storage.setValue(id,{formattedValue})},selRange(event){event.target.setSelectionRange(...event.detail.selRange)},charLimit:event=>{var _this$linkService$eve5;const{charLimit}=event.detail,{target}=event;if(charLimit===0){target.removeAttribute("maxLength");return}target.setAttribute("maxLength",charLimit);let value=elementData.userValue;!value||value.length<=charLimit||(value=value.slice(0,charLimit),target.value=elementData.userValue=value,storage.setValue(id,{value}),(_this$linkService$eve5=this.linkService.eventBus)===null||_this$linkService$eve5===void 0||_this$linkService$eve5.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,willCommit:!0,commitKey:1,selStart:target.selectionStart,selEnd:target.selectionEnd}}))}};this._dispatchEventFromSandbox(actions,jsEvent)}),element.addEventListener("keydown",event=>{var _this$linkService$eve6;let commitKey=-1;if(event.key==="Escape"?commitKey=0:event.key==="Enter"?commitKey=2:event.key==="Tab"&&(commitKey=3),commitKey===-1)return;const{value}=event.target;elementData.valueOnFocus!==value&&(elementData.userValue=value,(_this$linkService$eve6=this.linkService.eventBus)===null||_this$linkService$eve6===void 0||_this$linkService$eve6.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,willCommit:!0,commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}}))});const _blurListener=blurListener;blurListener=null,element.addEventListener("blur",event=>{const{value}=event.target;if(elementData.userValue=value,this._mouseState.isDown&&elementData.valueOnFocus!==value){var _this$linkService$eve7;(_this$linkService$eve7=this.linkService.eventBus)===null||_this$linkService$eve7===void 0||_this$linkService$eve7.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,willCommit:!0,commitKey:1,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}})}_blurListener(event)}),(_this$data$actions2=this.data.actions)!==null&&_this$data$actions2!==void 0&&_this$data$actions2.Keystroke&&element.addEventListener("beforeinput",event=>{var _this$linkService$eve8;const{data,target}=event,{value,selectionStart,selectionEnd}=target;let selStart=selectionStart,selEnd=selectionEnd;switch(event.inputType){case"deleteWordBackward":{const match=value.substring(0,selectionStart).match(/\w*[^\w]*$/);match&&(selStart-=match[0].length);break}case"deleteWordForward":{const match=value.substring(selectionStart).match(/^[^\w]*\w*/);match&&(selEnd+=match[0].length);break}case"deleteContentBackward":selectionStart===selectionEnd&&(selStart-=1);break;case"deleteContentForward":selectionStart===selectionEnd&&(selEnd+=1);break}event.preventDefault(),(_this$linkService$eve8=this.linkService.eventBus)===null||_this$linkService$eve8===void 0||_this$linkService$eve8.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,change:data||"",willCommit:!1,selStart,selEnd}})}),this._setEventListeners(element,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],event=>event.target.value)}if(blurListener&&element.addEventListener("blur",blurListener),this.data.comb){const combWidth=(this.data.rect[2]-this.data.rect[0])/maxLen;element.classList.add("comb"),element.style.letterSpacing=`calc(${combWidth}px * var(--scale-factor) - 1ch)`}}else element=document.createElement("div"),element.textContent=this.data.fieldValue,element.style.verticalAlign="middle",element.style.display="table-cell";return this._setTextStyle(element),this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}};__name(_TextWidgetAnnotationElement,"TextWidgetAnnotationElement");let TextWidgetAnnotationElement=_TextWidgetAnnotationElement;const _CheckboxWidgetAnnotationElement=class extends WidgetAnnotationElement{static{__name2(this,"_CheckboxWidgetAnnotationElement")}constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){const storage=this.annotationStorage,data=this.data,id=data.id;let value=storage.getValue(id,{value:data.exportValue===data.fieldValue}).value;typeof value=="string"&&(value=value!=="Off",storage.setValue(id,{value})),this.container.className="buttonWidgetAnnotation checkBox";const element=document.createElement("input");return GetElementsByNameSet.add(element),element.setAttribute("data-element-id",id),element.disabled=data.readOnly,this._setRequired(element,this.data.required),element.type="checkbox",element.name=data.fieldName,value&&element.setAttribute("checked",!0),element.setAttribute("exportValue",data.exportValue),element.tabIndex=DEFAULT_TAB_INDEX,element.addEventListener("change",event=>{const{name,checked}=event.target;for(const checkbox of this._getElementsByName(name,id)){const curChecked=checked&&checkbox.exportValue===data.exportValue;checkbox.domElement&&(checkbox.domElement.checked=curChecked),storage.setValue(checkbox.id,{value:curChecked})}storage.setValue(id,{value:checked})}),element.addEventListener("resetform",event=>{const defaultValue=data.defaultFieldValue||"Off";event.target.checked=defaultValue===data.exportValue}),this.enableScripting&&this.hasJSActions&&(element.addEventListener("updatefromsandbox",jsEvent=>{const actions={value(event){event.target.checked=event.detail.value!=="Off",storage.setValue(id,{value:event.target.checked})}};this._dispatchEventFromSandbox(actions,jsEvent)}),this._setEventListeners(element,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],event=>event.target.checked)),this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}};__name(_CheckboxWidgetAnnotationElement,"CheckboxWidgetAnnotationElement");let CheckboxWidgetAnnotationElement=_CheckboxWidgetAnnotationElement;const _RadioButtonWidgetAnnotationElement=class extends WidgetAnnotationElement{static{__name2(this,"_RadioButtonWidgetAnnotationElement")}constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const storage=this.annotationStorage,data=this.data,id=data.id;let value=storage.getValue(id,{value:data.fieldValue===data.buttonValue}).value;typeof value=="string"&&(value=value!==data.buttonValue,storage.setValue(id,{value}));const element=document.createElement("input");if(GetElementsByNameSet.add(element),element.setAttribute("data-element-id",id),element.disabled=data.readOnly,this._setRequired(element,this.data.required),element.type="radio",element.name=data.fieldName,value&&element.setAttribute("checked",!0),element.tabIndex=DEFAULT_TAB_INDEX,element.addEventListener("change",event=>{const{name,checked}=event.target;for(const radio of this._getElementsByName(name,id))storage.setValue(radio.id,{value:!1});storage.setValue(id,{value:checked})}),element.addEventListener("resetform",event=>{const defaultValue=data.defaultFieldValue;event.target.checked=defaultValue!=null&&defaultValue===data.buttonValue}),this.enableScripting&&this.hasJSActions){const pdfButtonValue=data.buttonValue;element.addEventListener("updatefromsandbox",jsEvent=>{const actions={value:event=>{const checked=pdfButtonValue===event.detail.value;for(const radio of this._getElementsByName(event.target.name)){const curChecked=checked&&radio.id===id;radio.domElement&&(radio.domElement.checked=curChecked),storage.setValue(radio.id,{value:curChecked})}}};this._dispatchEventFromSandbox(actions,jsEvent)}),this._setEventListeners(element,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],event=>event.target.checked)}return this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}};__name(_RadioButtonWidgetAnnotationElement,"RadioButtonWidgetAnnotationElement");let RadioButtonWidgetAnnotationElement=_RadioButtonWidgetAnnotationElement;const _PushButtonWidgetAnnotationElement=class extends LinkAnnotationElement{static{__name2(this,"_PushButtonWidgetAnnotationElement")}constructor(parameters){super(parameters,{ignoreBorder:parameters.data.hasAppearance})}render(){const container=super.render();container.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(container.title=this.data.alternativeText);const linkElement=container.lastChild;return this.enableScripting&&this.hasJSActions&&linkElement&&(this._setDefaultPropertiesFromJS(linkElement),linkElement.addEventListener("updatefromsandbox",jsEvent=>{this._dispatchEventFromSandbox({},jsEvent)})),container}};__name(_PushButtonWidgetAnnotationElement,"PushButtonWidgetAnnotationElement");let PushButtonWidgetAnnotationElement=_PushButtonWidgetAnnotationElement;const _ChoiceWidgetAnnotationElement=class extends WidgetAnnotationElement{static{__name2(this,"_ChoiceWidgetAnnotationElement")}constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const storage=this.annotationStorage,id=this.data.id,storedData=storage.getValue(id,{value:this.data.fieldValue}),selectElement=document.createElement("select");GetElementsByNameSet.add(selectElement),selectElement.setAttribute("data-element-id",id),selectElement.disabled=this.data.readOnly,this._setRequired(selectElement,this.data.required),selectElement.name=this.data.fieldName,selectElement.tabIndex=DEFAULT_TAB_INDEX;let addAnEmptyEntry=this.data.combo&&this.data.options.length>0;this.data.combo||(selectElement.size=this.data.options.length,this.data.multiSelect&&(selectElement.multiple=!0)),selectElement.addEventListener("resetform",event=>{const defaultValue=this.data.defaultFieldValue;for(const option of selectElement.options)option.selected=option.value===defaultValue});for(const option of this.data.options){const optionElement=document.createElement("option");optionElement.textContent=option.displayValue,optionElement.value=option.exportValue,storedData.value.includes(option.exportValue)&&(optionElement.setAttribute("selected",!0),addAnEmptyEntry=!1),selectElement.append(optionElement)}let removeEmptyEntry=null;if(addAnEmptyEntry){const noneOptionElement=document.createElement("option");noneOptionElement.value=" ",noneOptionElement.setAttribute("hidden",!0),noneOptionElement.setAttribute("selected",!0),selectElement.prepend(noneOptionElement),removeEmptyEntry=__name(()=>{noneOptionElement.remove(),selectElement.removeEventListener("input",removeEmptyEntry),removeEmptyEntry=null},"removeEmptyEntry"),selectElement.addEventListener("input",removeEmptyEntry)}const getValue=__name((event,isExport)=>{const name=isExport?"value":"textContent",options=event.target.options;return event.target.multiple?Array.prototype.filter.call(options,option=>option.selected).map(option=>option[name]):options.selectedIndex===-1?null:options[options.selectedIndex][name]},"getValue"),getItems=__name(event=>{const options=event.target.options;return Array.prototype.map.call(options,option=>({displayValue:option.textContent,exportValue:option.value}))},"getItems");return this.enableScripting&&this.hasJSActions?(selectElement.addEventListener("updatefromsandbox",jsEvent=>{const actions={value(event){var _removeEmptyEntry;(_removeEmptyEntry=removeEmptyEntry)===null||_removeEmptyEntry===void 0||_removeEmptyEntry();const value=event.detail.value,values=new Set(Array.isArray(value)?value:[value]);for(const option of selectElement.options)option.selected=values.has(option.value);storage.setValue(id,{value:getValue(event,!0)})},multipleSelection(event){selectElement.multiple=!0},remove(event){const options=selectElement.options,index=event.detail.remove;options[index].selected=!1,selectElement.remove(index),options.length>0&&Array.prototype.findIndex.call(options,option=>option.selected)===-1&&(options[0].selected=!0),storage.setValue(id,{value:getValue(event,!0),items:getItems(event)})},clear(event){for(;selectElement.length!==0;)selectElement.remove(0);storage.setValue(id,{value:null,items:[]})},insert(event){const{index,displayValue,exportValue}=event.detail.insert,selectChild=selectElement.children[index],optionElement=document.createElement("option");optionElement.textContent=displayValue,optionElement.value=exportValue,selectChild?selectChild.before(optionElement):selectElement.append(optionElement),storage.setValue(id,{value:getValue(event,!0),items:getItems(event)})},items(event){const{items}=event.detail;for(;selectElement.length!==0;)selectElement.remove(0);for(const item of items){const{displayValue,exportValue}=item,optionElement=document.createElement("option");optionElement.textContent=displayValue,optionElement.value=exportValue,selectElement.append(optionElement)}selectElement.options.length>0&&(selectElement.options[0].selected=!0),storage.setValue(id,{value:getValue(event,!0),items:getItems(event)})},indices(event){const indices=new Set(event.detail.indices);for(const option of event.target.options)option.selected=indices.has(option.index);storage.setValue(id,{value:getValue(event,!0)})},editable(event){event.target.disabled=!event.detail.editable}};this._dispatchEventFromSandbox(actions,jsEvent)}),selectElement.addEventListener("input",event=>{var _this$linkService$eve9;const exportValue=getValue(event,!0),value=getValue(event,!1);storage.setValue(id,{value:exportValue}),(_this$linkService$eve9=this.linkService.eventBus)===null||_this$linkService$eve9===void 0||_this$linkService$eve9.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,changeEx:exportValue,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(selectElement,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],event=>event.target.checked)):selectElement.addEventListener("input",function(event){storage.setValue(id,{value:getValue(event,!0)})}),this.data.combo&&this._setTextStyle(selectElement),this._setBackgroundColor(selectElement),this._setDefaultPropertiesFromJS(selectElement),this.container.append(selectElement),this.container}};__name(_ChoiceWidgetAnnotationElement,"ChoiceWidgetAnnotationElement");let ChoiceWidgetAnnotationElement=_ChoiceWidgetAnnotationElement;const _PopupAnnotationElement=class extends AnnotationElement{static{__name2(this,"_PopupAnnotationElement")}constructor(parameters){var _parameters$data$titl2,_parameters$data$cont2,_parameters$data$rich2;const isRenderable=!!((_parameters$data$titl2=parameters.data.titleObj)!==null&&_parameters$data$titl2!==void 0&&_parameters$data$titl2.str||(_parameters$data$cont2=parameters.data.contentsObj)!==null&&_parameters$data$cont2!==void 0&&_parameters$data$cont2.str||(_parameters$data$rich2=parameters.data.richText)!==null&&_parameters$data$rich2!==void 0&&_parameters$data$rich2.str);super(parameters,{isRenderable})}render(){const IGNORE_TYPES=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",IGNORE_TYPES.includes(this.data.parentType))return this.container;const selector=`[data-annotation-id="${this.data.parentId}"]`,parentElements=this.layer.querySelectorAll(selector);if(parentElements.length===0)return this.container;const popup=new PopupElement({container:this.container,trigger:Array.from(parentElements),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),page=this.page,rect=_util2.Util.normalizeRect([this.data.parentRect[0],page.view[3]-this.data.parentRect[1]+page.view[1],this.data.parentRect[2],page.view[3]-this.data.parentRect[3]+page.view[1]]),popupLeft=rect[0]+this.data.parentRect[2]-this.data.parentRect[0],popupTop=rect[1],[pageLLx,pageLLy,pageURx,pageURy]=this.viewport.viewBox,pageWidth=pageURx-pageLLx,pageHeight=pageURy-pageLLy;return this.container.style.left=`${100*(popupLeft-pageLLx)/pageWidth}%`,this.container.style.top=`${100*(popupTop-pageLLy)/pageHeight}%`,this.container.append(popup.render()),this.container}};__name(_PopupAnnotationElement,"PopupAnnotationElement");let PopupAnnotationElement=_PopupAnnotationElement;const _PopupElement=class{static{__name2(this,"_PopupElement")}constructor(parameters){this.container=parameters.container,this.trigger=parameters.trigger,this.color=parameters.color,this.titleObj=parameters.titleObj,this.modificationDate=parameters.modificationDate,this.contentsObj=parameters.contentsObj,this.richText=parameters.richText,this.hideWrapper=parameters.hideWrapper||!1,this.pinned=!1}render(){var _this$richText,_this$contentsObj;const wrapper=document.createElement("div");wrapper.className="popupWrapper",this.hideElement=this.hideWrapper?wrapper:this.container,this.hideElement.hidden=!0;const popup=document.createElement("div");popup.className="popup";const color=this.color;if(color){const r=.7*(255-color[0])+color[0],g=.7*(255-color[1])+color[1],b=.7*(255-color[2])+color[2];popup.style.backgroundColor=_util2.Util.makeHexColor(r|0,g|0,b|0)}const title=document.createElement("h1");title.dir=this.titleObj.dir,title.textContent=this.titleObj.str,popup.append(title);const dateObject=_display_utils2.PDFDateString.toDateObject(this.modificationDate);if(dateObject){const modificationDate=document.createElement("span");modificationDate.className="popupDate",modificationDate.textContent="{{date}}, {{time}}",modificationDate.dataset.l10nId="annotation_date_string",modificationDate.dataset.l10nArgs=JSON.stringify({date:dateObject.toLocaleDateString(),time:dateObject.toLocaleTimeString()}),popup.append(modificationDate)}if((_this$richText=this.richText)!==null&&_this$richText!==void 0&&_this$richText.str&&(!((_this$contentsObj=this.contentsObj)!==null&&_this$contentsObj!==void 0&&_this$contentsObj.str)||this.contentsObj.str===this.richText.str))_xfa_layer.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:popup}),popup.lastChild.className="richText popupContent";else{const contents=this._formatContents(this.contentsObj);popup.append(contents)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const element of this.trigger)element.addEventListener("click",this._toggle.bind(this)),element.addEventListener("mouseover",this._show.bind(this,!1)),element.addEventListener("mouseout",this._hide.bind(this,!1));return popup.addEventListener("click",this._hide.bind(this,!0)),wrapper.append(popup),wrapper}_formatContents(_ref){let{str,dir}=_ref;const p=document.createElement("p");p.className="popupContent",p.dir=dir;const lines=str.split(/(?:\r\n?|\n)/);for(let i=0,ii=lines.length;i<ii;++i){const line=lines[i];p.append(document.createTextNode(line)),i<ii-1&&p.append(document.createElement("br"))}return p}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}};__name(_PopupElement,"PopupElement");let PopupElement=_PopupElement;const _FreeTextAnnotationElement=class extends AnnotationElement{static{__name2(this,"_FreeTextAnnotationElement")}constructor(parameters){var _parameters$data$titl3,_parameters$data$cont3,_parameters$data$rich3;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl3=parameters.data.titleObj)!==null&&_parameters$data$titl3!==void 0&&_parameters$data$titl3.str||(_parameters$data$cont3=parameters.data.contentsObj)!==null&&_parameters$data$cont3!==void 0&&_parameters$data$cont3.str||(_parameters$data$rich3=parameters.data.richText)!==null&&_parameters$data$rich3!==void 0&&_parameters$data$rich3.str);super(parameters,{isRenderable,ignoreBorder:!0}),this.textContent=parameters.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const content=document.createElement("div");content.className="annotationTextContent",content.setAttribute("role","comment");for(const line of this.textContent){const lineSpan=document.createElement("span");lineSpan.textContent=line,content.append(lineSpan)}this.container.append(content)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}};__name(_FreeTextAnnotationElement,"FreeTextAnnotationElement");let FreeTextAnnotationElement=_FreeTextAnnotationElement;const _LineAnnotationElement=class extends AnnotationElement{static{__name2(this,"_LineAnnotationElement")}constructor(parameters){var _parameters$data$titl4,_parameters$data$cont4,_parameters$data$rich4;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl4=parameters.data.titleObj)!==null&&_parameters$data$titl4!==void 0&&_parameters$data$titl4.str||(_parameters$data$cont4=parameters.data.contentsObj)!==null&&_parameters$data$cont4!==void 0&&_parameters$data$cont4.str||(_parameters$data$rich4=parameters.data.richText)!==null&&_parameters$data$rich4!==void 0&&_parameters$data$rich4.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),line=this.svgFactory.createElement("svg:line");return line.setAttribute("x1",data.rect[2]-data.lineCoordinates[0]),line.setAttribute("y1",data.rect[3]-data.lineCoordinates[1]),line.setAttribute("x2",data.rect[2]-data.lineCoordinates[2]),line.setAttribute("y2",data.rect[3]-data.lineCoordinates[3]),line.setAttribute("stroke-width",data.borderStyle.width||1),line.setAttribute("stroke","transparent"),line.setAttribute("fill","transparent"),svg.append(line),this.container.append(svg),this._createPopup(line,data),this.container}};__name(_LineAnnotationElement,"LineAnnotationElement");let LineAnnotationElement=_LineAnnotationElement;const _SquareAnnotationElement=class extends AnnotationElement{static{__name2(this,"_SquareAnnotationElement")}constructor(parameters){var _parameters$data$titl5,_parameters$data$cont5,_parameters$data$rich5;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl5=parameters.data.titleObj)!==null&&_parameters$data$titl5!==void 0&&_parameters$data$titl5.str||(_parameters$data$cont5=parameters.data.contentsObj)!==null&&_parameters$data$cont5!==void 0&&_parameters$data$cont5.str||(_parameters$data$rich5=parameters.data.richText)!==null&&_parameters$data$rich5!==void 0&&_parameters$data$rich5.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),borderWidth=data.borderStyle.width,square=this.svgFactory.createElement("svg:rect");return square.setAttribute("x",borderWidth/2),square.setAttribute("y",borderWidth/2),square.setAttribute("width",width-borderWidth),square.setAttribute("height",height-borderWidth),square.setAttribute("stroke-width",borderWidth||1),square.setAttribute("stroke","transparent"),square.setAttribute("fill","transparent"),svg.append(square),this.container.append(svg),this._createPopup(square,data),this.container}};__name(_SquareAnnotationElement,"SquareAnnotationElement");let SquareAnnotationElement=_SquareAnnotationElement;const _CircleAnnotationElement=class extends AnnotationElement{static{__name2(this,"_CircleAnnotationElement")}constructor(parameters){var _parameters$data$titl6,_parameters$data$cont6,_parameters$data$rich6;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl6=parameters.data.titleObj)!==null&&_parameters$data$titl6!==void 0&&_parameters$data$titl6.str||(_parameters$data$cont6=parameters.data.contentsObj)!==null&&_parameters$data$cont6!==void 0&&_parameters$data$cont6.str||(_parameters$data$rich6=parameters.data.richText)!==null&&_parameters$data$rich6!==void 0&&_parameters$data$rich6.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),borderWidth=data.borderStyle.width,circle=this.svgFactory.createElement("svg:ellipse");return circle.setAttribute("cx",width/2),circle.setAttribute("cy",height/2),circle.setAttribute("rx",width/2-borderWidth/2),circle.setAttribute("ry",height/2-borderWidth/2),circle.setAttribute("stroke-width",borderWidth||1),circle.setAttribute("stroke","transparent"),circle.setAttribute("fill","transparent"),svg.append(circle),this.container.append(svg),this._createPopup(circle,data),this.container}};__name(_CircleAnnotationElement,"CircleAnnotationElement");let CircleAnnotationElement=_CircleAnnotationElement;const _PolylineAnnotationElement=class extends AnnotationElement{static{__name2(this,"_PolylineAnnotationElement")}constructor(parameters){var _parameters$data$titl7,_parameters$data$cont7,_parameters$data$rich7;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl7=parameters.data.titleObj)!==null&&_parameters$data$titl7!==void 0&&_parameters$data$titl7.str||(_parameters$data$cont7=parameters.data.contentsObj)!==null&&_parameters$data$cont7!==void 0&&_parameters$data$cont7.str||(_parameters$data$rich7=parameters.data.richText)!==null&&_parameters$data$rich7!==void 0&&_parameters$data$rich7.str);super(parameters,{isRenderable,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0);let points=[];for(const coordinate of data.vertices){const x=coordinate.x-data.rect[0],y=data.rect[3]-coordinate.y;points.push(x+","+y)}points=points.join(" ");const polyline=this.svgFactory.createElement(this.svgElementName);return polyline.setAttribute("points",points),polyline.setAttribute("stroke-width",data.borderStyle.width||1),polyline.setAttribute("stroke","transparent"),polyline.setAttribute("fill","transparent"),svg.append(polyline),this.container.append(svg),this._createPopup(polyline,data),this.container}};__name(_PolylineAnnotationElement,"PolylineAnnotationElement");let PolylineAnnotationElement=_PolylineAnnotationElement;const _PolygonAnnotationElement=class extends PolylineAnnotationElement{static{__name2(this,"_PolygonAnnotationElement")}constructor(parameters){super(parameters),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}};__name(_PolygonAnnotationElement,"PolygonAnnotationElement");let PolygonAnnotationElement=_PolygonAnnotationElement;const _CaretAnnotationElement=class extends AnnotationElement{static{__name2(this,"_CaretAnnotationElement")}constructor(parameters){var _parameters$data$titl8,_parameters$data$cont8,_parameters$data$rich8;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl8=parameters.data.titleObj)!==null&&_parameters$data$titl8!==void 0&&_parameters$data$titl8.str||(_parameters$data$cont8=parameters.data.contentsObj)!==null&&_parameters$data$cont8!==void 0&&_parameters$data$cont8.str||(_parameters$data$rich8=parameters.data.richText)!==null&&_parameters$data$rich8!==void 0&&_parameters$data$rich8.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}};__name(_CaretAnnotationElement,"CaretAnnotationElement");let CaretAnnotationElement=_CaretAnnotationElement;const _InkAnnotationElement=class extends AnnotationElement{static{__name2(this,"_InkAnnotationElement")}constructor(parameters){var _parameters$data$titl9,_parameters$data$cont9,_parameters$data$rich9;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl9=parameters.data.titleObj)!==null&&_parameters$data$titl9!==void 0&&_parameters$data$titl9.str||(_parameters$data$cont9=parameters.data.contentsObj)!==null&&_parameters$data$cont9!==void 0&&_parameters$data$cont9.str||(_parameters$data$rich9=parameters.data.richText)!==null&&_parameters$data$rich9!==void 0&&_parameters$data$rich9.str);super(parameters,{isRenderable,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0);for(const inkList of data.inkLists){let points=[];for(const coordinate of inkList){const x=coordinate.x-data.rect[0],y=data.rect[3]-coordinate.y;points.push(`${x},${y}`)}points=points.join(" ");const polyline=this.svgFactory.createElement(this.svgElementName);polyline.setAttribute("points",points),polyline.setAttribute("stroke-width",data.borderStyle.width||1),polyline.setAttribute("stroke","transparent"),polyline.setAttribute("fill","transparent"),this._createPopup(polyline,data),svg.append(polyline)}return this.container.append(svg),this.container}};__name(_InkAnnotationElement,"InkAnnotationElement");let InkAnnotationElement=_InkAnnotationElement;const _HighlightAnnotationElement=class extends AnnotationElement{static{__name2(this,"_HighlightAnnotationElement")}constructor(parameters){var _parameters$data$titl10,_parameters$data$cont10,_parameters$data$rich10;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl10=parameters.data.titleObj)!==null&&_parameters$data$titl10!==void 0&&_parameters$data$titl10.str||(_parameters$data$cont10=parameters.data.contentsObj)!==null&&_parameters$data$cont10!==void 0&&_parameters$data$cont10.str||(_parameters$data$rich10=parameters.data.richText)!==null&&_parameters$data$rich10!==void 0&&_parameters$data$rich10.str);super(parameters,{isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}};__name(_HighlightAnnotationElement,"HighlightAnnotationElement");let HighlightAnnotationElement=_HighlightAnnotationElement;const _UnderlineAnnotationElement=class extends AnnotationElement{static{__name2(this,"_UnderlineAnnotationElement")}constructor(parameters){var _parameters$data$titl11,_parameters$data$cont11,_parameters$data$rich11;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl11=parameters.data.titleObj)!==null&&_parameters$data$titl11!==void 0&&_parameters$data$titl11.str||(_parameters$data$cont11=parameters.data.contentsObj)!==null&&_parameters$data$cont11!==void 0&&_parameters$data$cont11.str||(_parameters$data$rich11=parameters.data.richText)!==null&&_parameters$data$rich11!==void 0&&_parameters$data$rich11.str);super(parameters,{isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}};__name(_UnderlineAnnotationElement,"UnderlineAnnotationElement");let UnderlineAnnotationElement=_UnderlineAnnotationElement;const _SquigglyAnnotationElement=class extends AnnotationElement{static{__name2(this,"_SquigglyAnnotationElement")}constructor(parameters){var _parameters$data$titl12,_parameters$data$cont12,_parameters$data$rich12;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl12=parameters.data.titleObj)!==null&&_parameters$data$titl12!==void 0&&_parameters$data$titl12.str||(_parameters$data$cont12=parameters.data.contentsObj)!==null&&_parameters$data$cont12!==void 0&&_parameters$data$cont12.str||(_parameters$data$rich12=parameters.data.richText)!==null&&_parameters$data$rich12!==void 0&&_parameters$data$rich12.str);super(parameters,{isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}};__name(_SquigglyAnnotationElement,"SquigglyAnnotationElement");let SquigglyAnnotationElement=_SquigglyAnnotationElement;const _StrikeOutAnnotationElement=class extends AnnotationElement{static{__name2(this,"_StrikeOutAnnotationElement")}constructor(parameters){var _parameters$data$titl13,_parameters$data$cont13,_parameters$data$rich13;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl13=parameters.data.titleObj)!==null&&_parameters$data$titl13!==void 0&&_parameters$data$titl13.str||(_parameters$data$cont13=parameters.data.contentsObj)!==null&&_parameters$data$cont13!==void 0&&_parameters$data$cont13.str||(_parameters$data$rich13=parameters.data.richText)!==null&&_parameters$data$rich13!==void 0&&_parameters$data$rich13.str);super(parameters,{isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}};__name(_StrikeOutAnnotationElement,"StrikeOutAnnotationElement");let StrikeOutAnnotationElement=_StrikeOutAnnotationElement;const _StampAnnotationElement=class extends AnnotationElement{static{__name2(this,"_StampAnnotationElement")}constructor(parameters){var _parameters$data$titl14,_parameters$data$cont14,_parameters$data$rich14;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl14=parameters.data.titleObj)!==null&&_parameters$data$titl14!==void 0&&_parameters$data$titl14.str||(_parameters$data$cont14=parameters.data.contentsObj)!==null&&_parameters$data$cont14!==void 0&&_parameters$data$cont14.str||(_parameters$data$rich14=parameters.data.richText)!==null&&_parameters$data$rich14!==void 0&&_parameters$data$rich14.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}};__name(_StampAnnotationElement,"StampAnnotationElement");let StampAnnotationElement=_StampAnnotationElement;const _FileAttachmentAnnotationElement=class extends AnnotationElement{static{__name2(this,"_FileAttachmentAnnotationElement")}constructor(parameters){var _this$linkService$eve10;super(parameters,{isRenderable:!0});const{filename,content}=this.data.file;this.filename=(0,_display_utils2.getFilenameFromUrl)(filename),this.content=content,(_this$linkService$eve10=this.linkService.eventBus)===null||_this$linkService$eve10===void 0||_this$linkService$eve10.dispatch("fileattachmentannotation",{source:this,filename,content})}render(){var _this$data$titleObj,_this$data$contentsOb;this.container.className="fileAttachmentAnnotation";const trigger=document.createElement("div");return trigger.className="popupTriggerArea",trigger.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((_this$data$titleObj=this.data.titleObj)!==null&&_this$data$titleObj!==void 0&&_this$data$titleObj.str||(_this$data$contentsOb=this.data.contentsObj)!==null&&_this$data$contentsOb!==void 0&&_this$data$contentsOb.str||this.data.richText)&&this._createPopup(trigger,this.data),this.container.append(trigger),this.container}_download(){var _this$downloadManager;(_this$downloadManager=this.downloadManager)===null||_this$downloadManager===void 0||_this$downloadManager.openOrDownloadData(this.container,this.content,this.filename)}};__name(_FileAttachmentAnnotationElement,"FileAttachmentAnnotationElement");let FileAttachmentAnnotationElement=_FileAttachmentAnnotationElement;const _AnnotationLayer=class _AnnotationLayer2{static{__name2(this,"_AnnotationLayer")}static render(parameters){const{annotations,div,viewport,accessibilityManager}=parameters;_classStaticPrivateMethodGet(this,_AnnotationLayer2,_setDimensions).call(this,div,viewport);let zIndex=0;for(const data of annotations){if(data.annotationType!==_util2.AnnotationType.POPUP){const{width,height}=getRectDims(data.rect);if(width<=0||height<=0)continue}const element=AnnotationElementFactory.create({data,layer:div,page:parameters.page,viewport,linkService:parameters.linkService,downloadManager:parameters.downloadManager,imageResourcesPath:parameters.imageResourcesPath||"",renderForms:parameters.renderForms!==!1,svgFactory:new _display_utils2.DOMSVGFactory,annotationStorage:parameters.annotationStorage||new _annotation_storage2.AnnotationStorage,enableScripting:parameters.enableScripting,hasJSActions:parameters.hasJSActions,fieldObjects:parameters.fieldObjects,mouseState:parameters.mouseState||{isDown:!1}});if(element.isRenderable){const rendered=element.render();if(data.hidden&&(rendered.style.visibility="hidden"),Array.isArray(rendered))for(const renderedElement of rendered)renderedElement.style.zIndex=zIndex++,_classStaticPrivateMethodGet(_AnnotationLayer2,_AnnotationLayer2,_appendElement).call(_AnnotationLayer2,renderedElement,data.id,div,accessibilityManager);else rendered.style.zIndex=zIndex++,element instanceof PopupAnnotationElement?div.prepend(rendered):_classStaticPrivateMethodGet(_AnnotationLayer2,_AnnotationLayer2,_appendElement).call(_AnnotationLayer2,rendered,data.id,div,accessibilityManager)}}_classStaticPrivateMethodGet(this,_AnnotationLayer2,_setAnnotationCanvasMap).call(this,div,parameters.annotationCanvasMap)}static update(parameters){const{annotationCanvasMap,div,viewport}=parameters;_classStaticPrivateMethodGet(this,_AnnotationLayer2,_setDimensions).call(this,div,viewport),_classStaticPrivateMethodGet(this,_AnnotationLayer2,_setAnnotationCanvasMap).call(this,div,annotationCanvasMap),div.hidden=!1}};__name(_AnnotationLayer,"AnnotationLayer");let AnnotationLayer=_AnnotationLayer;exports2.AnnotationLayer=AnnotationLayer;function _appendElement(element,id,div,accessibilityManager){const contentElement=element.firstChild||element;contentElement.id=`${_display_utils2.AnnotationPrefix}${id}`,div.append(element),accessibilityManager?.moveElementInDOM(div,element,contentElement,!1)}__name2(_appendElement,"_appendElement"),__name(_appendElement,"_appendElement");function _setDimensions(div,_ref2){let{width,height,rotation}=_ref2;const{style}=div,flipOrientation=rotation%180!==0,widthStr=Math.floor(width)+"px",heightStr=Math.floor(height)+"px";style.width=flipOrientation?heightStr:widthStr,style.height=flipOrientation?widthStr:heightStr,div.setAttribute("data-main-rotation",rotation)}__name2(_setDimensions,"_setDimensions"),__name(_setDimensions,"_setDimensions");function _setAnnotationCanvasMap(div,annotationCanvasMap){if(annotationCanvasMap){for(const[id,canvas]of annotationCanvasMap){const element=div.querySelector(`[data-annotation-id="${id}"]`);if(!element)continue;const{firstChild}=element;firstChild?firstChild.nodeName==="CANVAS"?firstChild.replaceWith(canvas):firstChild.before(canvas):element.append(canvas)}annotationCanvasMap.clear()}}__name2(_setAnnotationCanvasMap,"_setAnnotationCanvasMap"),__name(_setAnnotationCanvasMap,"_setAnnotationCanvasMap")},(__unused_webpack_module2,exports2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.ColorConverters=void 0;function makeColorComp(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}__name2(makeColorComp,"makeColorComp"),__name(makeColorComp,"makeColorComp");const _ColorConverters=class{static{__name2(this,"_ColorConverters")}static CMYK_G(_ref){let[c,y,m,k]=_ref;return["G",1-Math.min(1,.3*c+.59*m+.11*y+k)]}static G_CMYK(_ref2){let[g]=_ref2;return["CMYK",0,0,0,1-g]}static G_RGB(_ref3){let[g]=_ref3;return["RGB",g,g,g]}static G_HTML(_ref4){let[g]=_ref4;const G=makeColorComp(g);return`#${G}${G}${G}`}static RGB_G(_ref5){let[r,g,b]=_ref5;return["G",.3*r+.59*g+.11*b]}static RGB_HTML(_ref6){let[r,g,b]=_ref6;const R=makeColorComp(r),G=makeColorComp(g),B=makeColorComp(b);return`#${R}${G}${B}`}static T_HTML(){return"#00000000"}static CMYK_RGB(_ref7){let[c,y,m,k]=_ref7;return["RGB",1-Math.min(1,c+k),1-Math.min(1,m+k),1-Math.min(1,y+k)]}static CMYK_HTML(components){const rgb=this.CMYK_RGB(components).slice(1);return this.RGB_HTML(rgb)}static RGB_CMYK(_ref8){let[r,g,b]=_ref8;const c=1-r,m=1-g,y=1-b,k=Math.min(c,m,y);return["CMYK",c,m,y,k]}};__name(_ColorConverters,"ColorConverters");let ColorConverters=_ColorConverters;exports2.ColorConverters=ColorConverters},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.XfaLayer=void 0;var _xfa_text2=__w_pdfjs_require__2(145);const _XfaLayer=class{static{__name2(this,"_XfaLayer")}static setupStorage(html,id,element,storage,intent){const storedData=storage.getValue(id,{value:null});switch(element.name){case"textarea":if(storedData.value!==null&&(html.textContent=storedData.value),intent==="print")break;html.addEventListener("input",event=>{storage.setValue(id,{value:event.target.value})});break;case"input":if(element.attributes.type==="radio"||element.attributes.type==="checkbox"){if(storedData.value===element.attributes.xfaOn?html.setAttribute("checked",!0):storedData.value===element.attributes.xfaOff&&html.removeAttribute("checked"),intent==="print")break;html.addEventListener("change",event=>{storage.setValue(id,{value:event.target.checked?event.target.getAttribute("xfaOn"):event.target.getAttribute("xfaOff")})})}else{if(storedData.value!==null&&html.setAttribute("value",storedData.value),intent==="print")break;html.addEventListener("input",event=>{storage.setValue(id,{value:event.target.value})})}break;case"select":if(storedData.value!==null)for(const option of element.children)option.attributes.value===storedData.value&&(option.attributes.selected=!0);html.addEventListener("input",event=>{const options=event.target.options,value=options.selectedIndex===-1?"":options[options.selectedIndex].value;storage.setValue(id,{value})});break}}static setAttributes(_ref){let{html,element,storage=null,intent,linkService}=_ref;const{attributes}=element,isHTMLAnchorElement=html instanceof HTMLAnchorElement;attributes.type==="radio"&&(attributes.name=`${attributes.name}-${intent}`);for(const[key,value]of Object.entries(attributes))if(value!=null)switch(key){case"class":value.length&&html.setAttribute(key,value.join(" "));break;case"dataId":break;case"id":html.setAttribute("data-element-id",value);break;case"style":Object.assign(html.style,value);break;case"textContent":html.textContent=value;break;default:(!isHTMLAnchorElement||key!=="href"&&key!=="newWindow")&&html.setAttribute(key,value)}isHTMLAnchorElement&&linkService.addLinkAttributes(html,attributes.href,attributes.newWindow),storage&&attributes.dataId&&this.setupStorage(html,attributes.dataId,element,storage)}static render(parameters){const storage=parameters.annotationStorage,linkService=parameters.linkService,root=parameters.xfaHtml,intent=parameters.intent||"display",rootHtml=document.createElement(root.name);root.attributes&&this.setAttributes({html:rootHtml,element:root,intent,linkService});const stack=[[root,-1,rootHtml]],rootDiv=parameters.div;if(rootDiv.append(rootHtml),parameters.viewport){const transform=`matrix(${parameters.viewport.transform.join(",")})`;rootDiv.style.transform=transform}intent!=="richText"&&rootDiv.setAttribute("class","xfaLayer xfaFont");const textDivs=[];for(;stack.length>0;){var _child$attributes;const[parent,i,html]=stack.at(-1);if(i+1===parent.children.length){stack.pop();continue}const child=parent.children[++stack.at(-1)[1]];if(child===null)continue;const{name}=child;if(name==="#text"){const node=document.createTextNode(child.value);textDivs.push(node),html.append(node);continue}let childHtml;if(child!=null&&(_child$attributes=child.attributes)!==null&&_child$attributes!==void 0&&_child$attributes.xmlns?childHtml=document.createElementNS(child.attributes.xmlns,name):childHtml=document.createElement(name),html.append(childHtml),child.attributes&&this.setAttributes({html:childHtml,element:child,storage,intent,linkService}),child.children&&child.children.length>0)stack.push([child,-1,childHtml]);else if(child.value){const node=document.createTextNode(child.value);_xfa_text2.XfaText.shouldBuildText(name)&&textDivs.push(node),childHtml.append(node)}}for(const el of rootDiv.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))el.setAttribute("readOnly",!0);return{textDivs}}static update(parameters){const transform=`matrix(${parameters.viewport.transform.join(",")})`;parameters.div.style.transform=transform,parameters.div.hidden=!1}};__name(_XfaLayer,"XfaLayer");let XfaLayer=_XfaLayer;exports2.XfaLayer=XfaLayer},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.TextLayerRenderTask=void 0,exports2.renderTextLayer=renderTextLayer;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(133);const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30,DEFAULT_FONT_ASCENT=.8,ascentCache=new Map,AllWhitespaceRegexp=/^\s+$/g;function getAscent(fontFamily,ctx){const cachedAscent=ascentCache.get(fontFamily);if(cachedAscent)return cachedAscent;ctx.save(),ctx.font=`${DEFAULT_FONT_SIZE}px ${fontFamily}`;const metrics=ctx.measureText("");let ascent=metrics.fontBoundingBoxAscent,descent=Math.abs(metrics.fontBoundingBoxDescent);if(ascent){ctx.restore();const ratio=ascent/(ascent+descent);return ascentCache.set(fontFamily,ratio),ratio}ctx.strokeStyle="red",ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),ctx.strokeText("g",0,0);let pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;descent=0;for(let i=pixels.length-1-3;i>=0;i-=4)if(pixels[i]>0){descent=Math.ceil(i/4/DEFAULT_FONT_SIZE);break}ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),ctx.strokeText("A",0,DEFAULT_FONT_SIZE),pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data,ascent=0;for(let i=0,ii=pixels.length;i<ii;i+=4)if(pixels[i]>0){ascent=DEFAULT_FONT_SIZE-Math.floor(i/4/DEFAULT_FONT_SIZE);break}if(ctx.restore(),ascent){const ratio=ascent/(ascent+descent);return ascentCache.set(fontFamily,ratio),ratio}return ascentCache.set(fontFamily,DEFAULT_FONT_ASCENT),DEFAULT_FONT_ASCENT}__name2(getAscent,"getAscent"),__name(getAscent,"getAscent");function appendText(task,geom,styles,ctx){const textDiv=document.createElement("span"),textDivProperties=task._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:geom.str!=="",hasEOL:geom.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:geom.str!=="",hasEOL:geom.hasEOL,fontSize:0};task._textDivs.push(textDiv);const tx=_util2.Util.transform(task._viewport.transform,geom.transform);let angle=Math.atan2(tx[1],tx[0]);const style=styles[geom.fontName];style.vertical&&(angle+=Math.PI/2);const fontHeight=Math.hypot(tx[2],tx[3]),fontAscent=fontHeight*getAscent(style.fontFamily,ctx);let left,top;angle===0?(left=tx[4],top=tx[5]-fontAscent):(left=tx[4]+fontAscent*Math.sin(angle),top=tx[5]-fontAscent*Math.cos(angle)),textDiv.style.left=`${left}px`,textDiv.style.top=`${top}px`,textDiv.style.fontSize=`${fontHeight}px`,textDiv.style.fontFamily=style.fontFamily,textDivProperties.fontSize=fontHeight,textDiv.setAttribute("role","presentation"),textDiv.textContent=geom.str,textDiv.dir=geom.dir,task._fontInspectorEnabled&&(textDiv.dataset.fontName=geom.fontName),angle!==0&&(textDivProperties.angle=angle*(180/Math.PI));let shouldScaleText=!1;if(geom.str.length>1||task._enhanceTextSelection&&AllWhitespaceRegexp.test(geom.str))shouldScaleText=!0;else if(geom.str!==" "&&geom.transform[0]!==geom.transform[3]){const absScaleX=Math.abs(geom.transform[0]),absScaleY=Math.abs(geom.transform[3]);absScaleX!==absScaleY&&Math.max(absScaleX,absScaleY)/Math.min(absScaleX,absScaleY)>1.5&&(shouldScaleText=!0)}if(shouldScaleText&&(style.vertical?textDivProperties.canvasWidth=geom.height*task._viewport.scale:textDivProperties.canvasWidth=geom.width*task._viewport.scale),task._textDivProperties.set(textDiv,textDivProperties),task._textContentStream&&task._layoutText(textDiv),task._enhanceTextSelection&&textDivProperties.hasText){let angleCos=1,angleSin=0;angle!==0&&(angleCos=Math.cos(angle),angleSin=Math.sin(angle));const divWidth=(style.vertical?geom.height:geom.width)*task._viewport.scale,divHeight=fontHeight;let m,b;angle!==0?(m=[angleCos,angleSin,-angleSin,angleCos,left,top],b=_util2.Util.getAxialAlignedBoundingBox([0,0,divWidth,divHeight],m)):b=[left,top,left+divWidth,top+divHeight],task._bounds.push({left:b[0],top:b[1],right:b[2],bottom:b[3],div:textDiv,size:[divWidth,divHeight],m})}}__name2(appendText,"appendText"),__name(appendText,"appendText");function render(task){if(task._canceled)return;const textDivs=task._textDivs,capability=task._capability,textDivsLength=textDivs.length;if(textDivsLength>MAX_TEXT_DIVS_TO_RENDER){task._renderingDone=!0,capability.resolve();return}if(!task._textContentStream)for(let i=0;i<textDivsLength;i++)task._layoutText(textDivs[i]);task._renderingDone=!0,capability.resolve()}__name2(render,"render"),__name(render,"render");function findPositiveMin(ts,offset,count){let result=0;for(let i=0;i<count;i++){const t=ts[offset++];t>0&&(result=result?Math.min(t,result):t)}return result}__name2(findPositiveMin,"findPositiveMin"),__name(findPositiveMin,"findPositiveMin");function expand(task){const bounds=task._bounds,viewport=task._viewport,expanded=expandBounds(viewport.width,viewport.height,bounds);for(let i=0;i<expanded.length;i++){const div=bounds[i].div,divProperties=task._textDivProperties.get(div);if(divProperties.angle===0){divProperties.paddingLeft=bounds[i].left-expanded[i].left,divProperties.paddingTop=bounds[i].top-expanded[i].top,divProperties.paddingRight=expanded[i].right-bounds[i].right,divProperties.paddingBottom=expanded[i].bottom-bounds[i].bottom,task._textDivProperties.set(div,divProperties);continue}const e=expanded[i],b=bounds[i],m=b.m,c=m[0],s=m[1],points=[[0,0],[0,b.size[1]],[b.size[0],0],b.size],ts=new Float64Array(64);for(let j=0,jj=points.length;j<jj;j++){const t=_util2.Util.applyTransform(points[j],m);ts[j+0]=c&&(e.left-t[0])/c,ts[j+4]=s&&(e.top-t[1])/s,ts[j+8]=c&&(e.right-t[0])/c,ts[j+12]=s&&(e.bottom-t[1])/s,ts[j+16]=s&&(e.left-t[0])/-s,ts[j+20]=c&&(e.top-t[1])/c,ts[j+24]=s&&(e.right-t[0])/-s,ts[j+28]=c&&(e.bottom-t[1])/c,ts[j+32]=c&&(e.left-t[0])/-c,ts[j+36]=s&&(e.top-t[1])/-s,ts[j+40]=c&&(e.right-t[0])/-c,ts[j+44]=s&&(e.bottom-t[1])/-s,ts[j+48]=s&&(e.left-t[0])/s,ts[j+52]=c&&(e.top-t[1])/-c,ts[j+56]=s&&(e.right-t[0])/s,ts[j+60]=c&&(e.bottom-t[1])/-c}const boxScale=1+Math.min(Math.abs(c),Math.abs(s));divProperties.paddingLeft=findPositiveMin(ts,32,16)/boxScale,divProperties.paddingTop=findPositiveMin(ts,48,16)/boxScale,divProperties.paddingRight=findPositiveMin(ts,0,16)/boxScale,divProperties.paddingBottom=findPositiveMin(ts,16,16)/boxScale,task._textDivProperties.set(div,divProperties)}}__name2(expand,"expand"),__name(expand,"expand");function expandBounds(width,height,boxes){const bounds=boxes.map(function(box,i){return{x1:box.left,y1:box.top,x2:box.right,y2:box.bottom,index:i,x1New:void 0,x2New:void 0}});expandBoundsLTR(width,bounds);const expanded=new Array(boxes.length);for(const b of bounds){const i=b.index;expanded[i]={left:b.x1New,top:0,right:b.x2New,bottom:0}}boxes.map(function(box,i){const e=expanded[i],b=bounds[i];b.x1=box.top,b.y1=width-e.right,b.x2=box.bottom,b.y2=width-e.left,b.index=i,b.x1New=void 0,b.x2New=void 0}),expandBoundsLTR(height,bounds);for(const b of bounds){const i=b.index;expanded[i].top=b.x1New,expanded[i].bottom=b.x2New}return expanded}__name2(expandBounds,"expandBounds"),__name(expandBounds,"expandBounds");function expandBoundsLTR(width,bounds){bounds.sort(function(a,b){return a.x1-b.x1||a.index-b.index});const horizon=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const boundary of bounds){let i=0;for(;i<horizon.length&&horizon[i].end<=boundary.y1;)i++;let j=horizon.length-1;for(;j>=0&&horizon[j].start>=boundary.y2;)j--;let horizonPart,affectedBoundary,q,k,maxXNew=-1/0;for(q=i;q<=j;q++){horizonPart=horizon[q],affectedBoundary=horizonPart.boundary;let xNew;affectedBoundary.x2>boundary.x1?xNew=affectedBoundary.index>boundary.index?affectedBoundary.x1New:boundary.x1:affectedBoundary.x2New===void 0?xNew=(affectedBoundary.x2+boundary.x1)/2:xNew=affectedBoundary.x2New,xNew>maxXNew&&(maxXNew=xNew)}for(boundary.x1New=maxXNew,q=i;q<=j;q++)horizonPart=horizon[q],affectedBoundary=horizonPart.boundary,affectedBoundary.x2New===void 0?affectedBoundary.x2>boundary.x1?affectedBoundary.index>boundary.index&&(affectedBoundary.x2New=affectedBoundary.x2):affectedBoundary.x2New=maxXNew:affectedBoundary.x2New>maxXNew&&(affectedBoundary.x2New=Math.max(maxXNew,affectedBoundary.x2));const changedHorizon=[];let lastBoundary=null;for(q=i;q<=j;q++){horizonPart=horizon[q],affectedBoundary=horizonPart.boundary;const useBoundary=affectedBoundary.x2>boundary.x2?affectedBoundary:boundary;lastBoundary===useBoundary?changedHorizon.at(-1).end=horizonPart.end:(changedHorizon.push({start:horizonPart.start,end:horizonPart.end,boundary:useBoundary}),lastBoundary=useBoundary)}for(horizon[i].start<boundary.y1&&(changedHorizon[0].start=boundary.y1,changedHorizon.unshift({start:horizon[i].start,end:boundary.y1,boundary:horizon[i].boundary})),boundary.y2<horizon[j].end&&(changedHorizon.at(-1).end=boundary.y2,changedHorizon.push({start:boundary.y2,end:horizon[j].end,boundary:horizon[j].boundary})),q=i;q<=j;q++){if(horizonPart=horizon[q],affectedBoundary=horizonPart.boundary,affectedBoundary.x2New!==void 0)continue;let used=!1;for(k=i-1;!used&&k>=0&&horizon[k].start>=affectedBoundary.y1;k--)used=horizon[k].boundary===affectedBoundary;for(k=j+1;!used&&k<horizon.length&&horizon[k].end<=affectedBoundary.y2;k++)used=horizon[k].boundary===affectedBoundary;for(k=0;!used&&k<changedHorizon.length;k++)used=changedHorizon[k].boundary===affectedBoundary;used||(affectedBoundary.x2New=maxXNew)}Array.prototype.splice.apply(horizon,[i,j-i+1,...changedHorizon])}for(const horizonPart of horizon){const affectedBoundary=horizonPart.boundary;affectedBoundary.x2New===void 0&&(affectedBoundary.x2New=Math.max(width,affectedBoundary.x2))}}__name2(expandBoundsLTR,"expandBoundsLTR"),__name(expandBoundsLTR,"expandBoundsLTR");const _TextLayerRenderTask=class{static{__name2(this,"_TextLayerRenderTask")}constructor(_ref){var _globalThis$FontInspe;let{textContent,textContentStream,container,viewport,textDivs,textContentItemsStr,enhanceTextSelection}=_ref;enhanceTextSelection&&(0,_display_utils2.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=textContent,this._textContentStream=textContentStream,this._container=container,this._document=container.ownerDocument,this._viewport=viewport,this._textDivs=textDivs||[],this._textContentItemsStr=textContentItemsStr||[],this._enhanceTextSelection=!!enhanceTextSelection,this._fontInspectorEnabled=!!((_globalThis$FontInspe=globalThis.FontInspector)!==null&&_globalThis$FontInspe!==void 0&&_globalThis$FontInspe.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,_util2.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new _util2.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(items,styleCache){for(let i=0,len=items.length;i<len;i++){if(items[i].str===void 0){if(items[i].type==="beginMarkedContentProps"||items[i].type==="beginMarkedContent"){const parent=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),items[i].id!==null&&this._container.setAttribute("id",`${items[i].id}`),parent.append(this._container)}else items[i].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(items[i].str),appendText(this,items[i],styleCache,this._layoutTextCtx)}}_layoutText(textDiv){const textDivProperties=this._textDivProperties.get(textDiv);let transform="";if(textDivProperties.canvasWidth!==0&&textDivProperties.hasText){const{fontFamily}=textDiv.style,{fontSize}=textDivProperties;(fontSize!==this._layoutTextLastFontSize||fontFamily!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${fontSize*this._devicePixelRatio}px ${fontFamily}`,this._layoutTextLastFontSize=fontSize,this._layoutTextLastFontFamily=fontFamily);const{width}=this._layoutTextCtx.measureText(textDiv.textContent);if(width>0){const scale=this._devicePixelRatio*textDivProperties.canvasWidth/width;this._enhanceTextSelection&&(textDivProperties.scale=scale),transform=`scaleX(${scale})`}}if(textDivProperties.angle!==0&&(transform=`rotate(${textDivProperties.angle}deg) ${transform}`),transform.length>0&&(this._enhanceTextSelection&&(textDivProperties.originalTransform=transform),textDiv.style.transform=transform),textDivProperties.hasText&&this._container.append(textDiv),textDivProperties.hasEOL){const br=document.createElement("br");br.setAttribute("role","presentation"),this._container.append(br)}}_render(){let timeout=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const capability=(0,_util2.createPromiseCapability)();let styleCache=Object.create(null);const canvas=this._document.createElement("canvas");if(canvas.height=canvas.width=DEFAULT_FONT_SIZE,this._layoutTextCtx=canvas.getContext("2d",{alpha:!1}),this._textContent){const textItems=this._textContent.items,textStyles=this._textContent.styles;this._processItems(textItems,textStyles),capability.resolve()}else if(this._textContentStream){const pump=__name(()=>{this._reader.read().then(_ref2=>{let{value,done}=_ref2;if(done){capability.resolve();return}Object.assign(styleCache,value.styles),this._processItems(value.items,styleCache),pump()},capability.reject)},"pump");this._reader=this._textContentStream.getReader(),pump()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');capability.promise.then(()=>{styleCache=null,timeout?this._renderTimer=setTimeout(()=>{render(this),this._renderTimer=null},timeout):render(this)},this._capability.reject)}expandTextDivs(){let expandDivs=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(expand(this),this._bounds=null);const transformBuf=[],paddingBuf=[];for(let i=0,ii=this._textDivs.length;i<ii;i++){const div=this._textDivs[i],divProps=this._textDivProperties.get(div);divProps.hasText&&(expandDivs?(transformBuf.length=0,paddingBuf.length=0,divProps.originalTransform&&transformBuf.push(divProps.originalTransform),divProps.paddingTop>0?(paddingBuf.push(`${divProps.paddingTop}px`),transformBuf.push(`translateY(${-divProps.paddingTop}px)`)):paddingBuf.push(0),divProps.paddingRight>0?paddingBuf.push(`${divProps.paddingRight/divProps.scale}px`):paddingBuf.push(0),divProps.paddingBottom>0?paddingBuf.push(`${divProps.paddingBottom}px`):paddingBuf.push(0),divProps.paddingLeft>0?(paddingBuf.push(`${divProps.paddingLeft/divProps.scale}px`),transformBuf.push(`translateX(${-divProps.paddingLeft/divProps.scale}px)`)):paddingBuf.push(0),div.style.padding=paddingBuf.join(" "),transformBuf.length&&(div.style.transform=transformBuf.join(" "))):(div.style.padding=null,div.style.transform=divProps.originalTransform))}}};__name(_TextLayerRenderTask,"TextLayerRenderTask");let TextLayerRenderTask=_TextLayerRenderTask;exports2.TextLayerRenderTask=TextLayerRenderTask;function renderTextLayer(renderParameters){const task=new TextLayerRenderTask({textContent:renderParameters.textContent,textContentStream:renderParameters.textContentStream,container:renderParameters.container,viewport:renderParameters.viewport,textDivs:renderParameters.textDivs,textContentItemsStr:renderParameters.textContentItemsStr,enhanceTextSelection:renderParameters.enhanceTextSelection});return task._render(renderParameters.timeout),task}__name2(renderTextLayer,"renderTextLayer"),__name(renderTextLayer,"renderTextLayer")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _a2,_b;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.SVGGraphics=void 0;var _display_utils2=__w_pdfjs_require__2(133),_util2=__w_pdfjs_require__2(1),_is_node2=__w_pdfjs_require__2(3);let SVGGraphics=(_a2=class{static{__name2(this,"_a")}constructor(){(0,_util2.unreachable)("Not implemented: SVGGraphics")}},__name(_a2,"SVGGraphics"),_a2);exports2.SVGGraphics=SVGGraphics;{let opListToTree=__name2(function(opList){let opTree=[];const tmp=[];for(const opListElement of opList){if(opListElement.fn==="save"){opTree.push({fnId:92,fn:"group",items:[]}),tmp.push(opTree),opTree=opTree.at(-1).items;continue}opListElement.fn==="restore"?opTree=tmp.pop():opTree.push(opListElement)}return opTree},"opListToTree"),pf=__name2(function(value){if(Number.isInteger(value))return value.toString();const s=value.toFixed(10);let i=s.length-1;if(s[i]!=="0")return s;do i--;while(s[i]==="0");return s.substring(0,s[i]==="."?i:i+1)},"pf"),pm=__name2(function(m){if(m[4]===0&&m[5]===0){if(m[1]===0&&m[2]===0)return m[0]===1&&m[3]===1?"":`scale(${pf(m[0])} ${pf(m[3])})`;if(m[0]===m[3]&&m[1]===-m[2]){const a=Math.acos(m[0])*180/Math.PI;return`rotate(${pf(a)})`}}else if(m[0]===1&&m[1]===0&&m[2]===0&&m[3]===1)return`translate(${pf(m[4])} ${pf(m[5])})`;return`matrix(${pf(m[0])} ${pf(m[1])} ${pf(m[2])} ${pf(m[3])} ${pf(m[4])} ${pf(m[5])})`},"pm");__name(opListToTree,"opListToTree"),__name(pf,"pf"),__name(pm,"pm");const SVG_DEFAULTS={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},XML_NS="http://www.w3.org/XML/1998/namespace",XLINK_NS="http://www.w3.org/1999/xlink",LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],createObjectURL=__name(function(data){let contentType=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",forceDataSchema=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&&typeof Blob<"u"&&!forceDataSchema)return URL.createObjectURL(new Blob([data],{type:contentType}));const digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let buffer=`data:${contentType};base64,`;for(let i=0,ii=data.length;i<ii;i+=3){const b1=data[i]&255,b2=data[i+1]&255,b3=data[i+2]&255,d1=b1>>2,d2=(b1&3)<<4|b2>>4,d3=i+1<ii?(b2&15)<<2|b3>>6:64,d4=i+2<ii?b3&63:64;buffer+=digits[d1]+digits[d2]+digits[d3]+digits[d4]}return buffer},"createObjectURL"),convertImgDataToPng=function(){const PNG_HEADER=new Uint8Array([137,80,78,71,13,10,26,10]),CHUNK_WRAPPER_SIZE=12,crcTable=new Int32Array(256);for(let i=0;i<256;i++){let c=i;for(let h=0;h<8;h++)c&1?c=3988292384^c>>1&2147483647:c=c>>1&2147483647;crcTable[i]=c}function crc32(data,start,end){let crc=-1;for(let i=start;i<end;i++){const a=(crc^data[i])&255,b=crcTable[a];crc=crc>>>8^b}return crc^-1}__name2(crc32,"crc32"),__name(crc32,"crc32");function writePngChunk(type,body,data,offset){let p=offset;const len=body.length;data[p]=len>>24&255,data[p+1]=len>>16&255,data[p+2]=len>>8&255,data[p+3]=len&255,p+=4,data[p]=type.charCodeAt(0)&255,data[p+1]=type.charCodeAt(1)&255,data[p+2]=type.charCodeAt(2)&255,data[p+3]=type.charCodeAt(3)&255,p+=4,data.set(body,p),p+=body.length;const crc=crc32(data,offset+4,p);data[p]=crc>>24&255,data[p+1]=crc>>16&255,data[p+2]=crc>>8&255,data[p+3]=crc&255}__name2(writePngChunk,"writePngChunk"),__name(writePngChunk,"writePngChunk");function adler32(data,start,end){let a=1,b=0;for(let i=start;i<end;++i)a=(a+(data[i]&255))%65521,b=(b+a)%65521;return b<<16|a}__name2(adler32,"adler32"),__name(adler32,"adler32");function deflateSync(literals){if(!_is_node2.isNodeJS)return deflateSyncUncompressed(literals);try{let input;parseInt(process.versions.node)>=8?input=literals:input=Buffer.from(literals);const output=require$$7.deflateSync(input,{level:9});return output instanceof Uint8Array?output:new Uint8Array(output)}catch(e){(0,_util2.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return deflateSyncUncompressed(literals)}__name2(deflateSync,"deflateSync"),__name(deflateSync,"deflateSync");function deflateSyncUncompressed(literals){let len=literals.length;const maxBlockLength=65535,deflateBlocks=Math.ceil(len/maxBlockLength),idat=new Uint8Array(2+len+deflateBlocks*5+4);let pi=0;idat[pi++]=120,idat[pi++]=156;let pos=0;for(;len>maxBlockLength;)idat[pi++]=0,idat[pi++]=255,idat[pi++]=255,idat[pi++]=0,idat[pi++]=0,idat.set(literals.subarray(pos,pos+maxBlockLength),pi),pi+=maxBlockLength,pos+=maxBlockLength,len-=maxBlockLength;idat[pi++]=1,idat[pi++]=len&255,idat[pi++]=len>>8&255,idat[pi++]=~len&65535&255,idat[pi++]=(~len&65535)>>8&255,idat.set(literals.subarray(pos),pi),pi+=literals.length-pos;const adler=adler32(literals,0,literals.length);return idat[pi++]=adler>>24&255,idat[pi++]=adler>>16&255,idat[pi++]=adler>>8&255,idat[pi++]=adler&255,idat}__name2(deflateSyncUncompressed,"deflateSyncUncompressed"),__name(deflateSyncUncompressed,"deflateSyncUncompressed");function encode(imgData,kind,forceDataSchema,isMask){const width=imgData.width,height=imgData.height;let bitDepth,colorType,lineSize;const bytes=imgData.data;switch(kind){case _util2.ImageKind.GRAYSCALE_1BPP:colorType=0,bitDepth=1,lineSize=width+7>>3;break;case _util2.ImageKind.RGB_24BPP:colorType=2,bitDepth=8,lineSize=width*3;break;case _util2.ImageKind.RGBA_32BPP:colorType=6,bitDepth=8,lineSize=width*4;break;default:throw new Error("invalid format")}const literals=new Uint8Array((1+lineSize)*height);let offsetLiterals=0,offsetBytes=0;for(let y=0;y<height;++y)literals[offsetLiterals++]=0,literals.set(bytes.subarray(offsetBytes,offsetBytes+lineSize),offsetLiterals),offsetBytes+=lineSize,offsetLiterals+=lineSize;if(kind===_util2.ImageKind.GRAYSCALE_1BPP&&isMask){offsetLiterals=0;for(let y=0;y<height;y++){offsetLiterals++;for(let i=0;i<lineSize;i++)literals[offsetLiterals++]^=255}}const ihdr=new Uint8Array([width>>24&255,width>>16&255,width>>8&255,width&255,height>>24&255,height>>16&255,height>>8&255,height&255,bitDepth,colorType,0,0,0]),idat=deflateSync(literals),pngLength=PNG_HEADER.length+CHUNK_WRAPPER_SIZE*3+ihdr.length+idat.length,data=new Uint8Array(pngLength);let offset=0;return data.set(PNG_HEADER,offset),offset+=PNG_HEADER.length,writePngChunk("IHDR",ihdr,data,offset),offset+=CHUNK_WRAPPER_SIZE+ihdr.length,writePngChunk("IDATA",idat,data,offset),offset+=CHUNK_WRAPPER_SIZE+idat.length,writePngChunk("IEND",new Uint8Array(0),data,offset),createObjectURL(data,"image/png",forceDataSchema)}return __name2(encode,"encode"),__name(encode,"encode"),__name(__name2(function(imgData,forceDataSchema,isMask){const kind=imgData.kind===void 0?_util2.ImageKind.GRAYSCALE_1BPP:imgData.kind;return encode(imgData,kind,forceDataSchema,isMask)},"convertImgDataToPng2"),"convertImgDataToPng")}(),_SVGExtraState=class{static{__name2(this,"_SVGExtraState")}constructor(){this.fontSizeScale=1,this.fontWeight=SVG_DEFAULTS.fontWeight,this.fontSize=0,this.textMatrix=_util2.IDENTITY_MATRIX,this.fontMatrix=_util2.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_util2.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=SVG_DEFAULTS.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(x,y){this.x=x,this.y=y}};__name(_SVGExtraState,"SVGExtraState");let SVGExtraState=_SVGExtraState,clipCount=0,maskCount=0,shadingCount=0;exports2.SVGGraphics=SVGGraphics=(_b=class{static{__name2(this,"_b")}constructor(commonObjs,objs){let forceDataSchema=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;(0,_display_utils2.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new _display_utils2.DOMSVGFactory,this.current=new SVGExtraState,this.transformMatrix=_util2.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=commonObjs,this.objs=objs,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!forceDataSchema,this._operatorIdMapping=[];for(const op in _util2.OPS)this._operatorIdMapping[_util2.OPS[op]]=op}save(){this.transformStack.push(this.transformMatrix);const old=this.current;this.extraStack.push(old),this.current=old.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(items){this.save(),this.executeOpTree(items),this.restore()}loadDependencies(operatorList){const fnArray=operatorList.fnArray,argsArray=operatorList.argsArray;for(let i=0,ii=fnArray.length;i<ii;i++)if(fnArray[i]===_util2.OPS.dependency)for(const obj of argsArray[i]){const objsPool=obj.startsWith("g_")?this.commonObjs:this.objs,promise=new Promise(resolve=>{objsPool.get(obj,resolve)});this.current.dependencies.push(promise)}return Promise.all(this.current.dependencies)}transform(a,b,c,d,e,f){const transformMatrix=[a,b,c,d,e,f];this.transformMatrix=_util2.Util.transform(this.transformMatrix,transformMatrix),this.tgrp=null}getSVG(operatorList,viewport){this.viewport=viewport;const svgElement=this._initialize(viewport);return this.loadDependencies(operatorList).then(()=>(this.transformMatrix=_util2.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(operatorList)),svgElement))}convertOpList(operatorList){const operatorIdMapping=this._operatorIdMapping,argsArray=operatorList.argsArray,fnArray=operatorList.fnArray,opList=[];for(let i=0,ii=fnArray.length;i<ii;i++){const fnId=fnArray[i];opList.push({fnId,fn:operatorIdMapping[fnId],args:argsArray[i]})}return opListToTree(opList)}executeOpTree(opTree){for(const opTreeElement of opTree){const fn=opTreeElement.fn,fnId=opTreeElement.fnId,args=opTreeElement.args;switch(fnId|0){case _util2.OPS.beginText:this.beginText();break;case _util2.OPS.dependency:break;case _util2.OPS.setLeading:this.setLeading(args);break;case _util2.OPS.setLeadingMoveText:this.setLeadingMoveText(args[0],args[1]);break;case _util2.OPS.setFont:this.setFont(args);break;case _util2.OPS.showText:this.showText(args[0]);break;case _util2.OPS.showSpacedText:this.showText(args[0]);break;case _util2.OPS.endText:this.endText();break;case _util2.OPS.moveText:this.moveText(args[0],args[1]);break;case _util2.OPS.setCharSpacing:this.setCharSpacing(args[0]);break;case _util2.OPS.setWordSpacing:this.setWordSpacing(args[0]);break;case _util2.OPS.setHScale:this.setHScale(args[0]);break;case _util2.OPS.setTextMatrix:this.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util2.OPS.setTextRise:this.setTextRise(args[0]);break;case _util2.OPS.setTextRenderingMode:this.setTextRenderingMode(args[0]);break;case _util2.OPS.setLineWidth:this.setLineWidth(args[0]);break;case _util2.OPS.setLineJoin:this.setLineJoin(args[0]);break;case _util2.OPS.setLineCap:this.setLineCap(args[0]);break;case _util2.OPS.setMiterLimit:this.setMiterLimit(args[0]);break;case _util2.OPS.setFillRGBColor:this.setFillRGBColor(args[0],args[1],args[2]);break;case _util2.OPS.setStrokeRGBColor:this.setStrokeRGBColor(args[0],args[1],args[2]);break;case _util2.OPS.setStrokeColorN:this.setStrokeColorN(args);break;case _util2.OPS.setFillColorN:this.setFillColorN(args);break;case _util2.OPS.shadingFill:this.shadingFill(args[0]);break;case _util2.OPS.setDash:this.setDash(args[0],args[1]);break;case _util2.OPS.setRenderingIntent:this.setRenderingIntent(args[0]);break;case _util2.OPS.setFlatness:this.setFlatness(args[0]);break;case _util2.OPS.setGState:this.setGState(args[0]);break;case _util2.OPS.fill:this.fill();break;case _util2.OPS.eoFill:this.eoFill();break;case _util2.OPS.stroke:this.stroke();break;case _util2.OPS.fillStroke:this.fillStroke();break;case _util2.OPS.eoFillStroke:this.eoFillStroke();break;case _util2.OPS.clip:this.clip("nonzero");break;case _util2.OPS.eoClip:this.clip("evenodd");break;case _util2.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _util2.OPS.paintImageXObject:this.paintImageXObject(args[0]);break;case _util2.OPS.paintInlineImageXObject:this.paintInlineImageXObject(args[0]);break;case _util2.OPS.paintImageMaskXObject:this.paintImageMaskXObject(args[0]);break;case _util2.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(args[0],args[1]);break;case _util2.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _util2.OPS.closePath:this.closePath();break;case _util2.OPS.closeStroke:this.closeStroke();break;case _util2.OPS.closeFillStroke:this.closeFillStroke();break;case _util2.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _util2.OPS.nextLine:this.nextLine();break;case _util2.OPS.transform:this.transform(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util2.OPS.constructPath:this.constructPath(args[0],args[1]);break;case _util2.OPS.endPath:this.endPath();break;case 92:this.group(opTreeElement.items);break;default:(0,_util2.warn)(`Unimplemented operator ${fn}`);break}}}setWordSpacing(wordSpacing){this.current.wordSpacing=wordSpacing}setCharSpacing(charSpacing){this.current.charSpacing=charSpacing}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(a,b,c,d,e,f){const current=this.current;current.textMatrix=current.lineMatrix=[a,b,c,d,e,f],current.textMatrixScale=Math.hypot(a,b),current.x=current.lineX=0,current.y=current.lineY=0,current.xcoords=[],current.ycoords=[],current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.tspan.setAttributeNS(null,"y",pf(-current.y)),current.txtElement=this.svgFactory.createElement("svg:text"),current.txtElement.append(current.tspan)}beginText(){const current=this.current;current.x=current.lineX=0,current.y=current.lineY=0,current.textMatrix=_util2.IDENTITY_MATRIX,current.lineMatrix=_util2.IDENTITY_MATRIX,current.textMatrixScale=1,current.tspan=this.svgFactory.createElement("svg:tspan"),current.txtElement=this.svgFactory.createElement("svg:text"),current.txtgrp=this.svgFactory.createElement("svg:g"),current.xcoords=[],current.ycoords=[]}moveText(x,y){const current=this.current;current.x=current.lineX+=x,current.y=current.lineY+=y,current.xcoords=[],current.ycoords=[],current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.tspan.setAttributeNS(null,"y",pf(-current.y))}showText(glyphs){const current=this.current,font=current.font,fontSize=current.fontSize;if(fontSize===0)return;const fontSizeScale=current.fontSizeScale,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,vertical=font.vertical,spacingDir=vertical?1:-1,defaultVMetrics=font.defaultVMetrics,widthAdvanceScale=fontSize*current.fontMatrix[0];let x=0;for(const glyph of glyphs){if(glyph===null){x+=fontDirection*wordSpacing;continue}else if(typeof glyph=="number"){x+=spacingDir*glyph*fontSize/1e3;continue}const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,character=glyph.fontChar;let scaledX,scaledY,width=glyph.width;if(vertical){let vx;const vmetric=glyph.vmetric||defaultVMetrics;vx=glyph.vmetric?vmetric[1]:width*.5,vx=-vx*widthAdvanceScale;const vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width,scaledX=vx/fontSizeScale,scaledY=(x+vy)/fontSizeScale}else scaledX=x/fontSizeScale,scaledY=0;(glyph.isInFont||font.missingFile)&&(current.xcoords.push(current.x+scaledX),vertical&&current.ycoords.push(-current.y+scaledY),current.tspan.textContent+=character);let charWidth;vertical?charWidth=width*widthAdvanceScale-spacing*fontDirection:charWidth=width*widthAdvanceScale+spacing*fontDirection,x+=charWidth}current.tspan.setAttributeNS(null,"x",current.xcoords.map(pf).join(" ")),vertical?current.tspan.setAttributeNS(null,"y",current.ycoords.map(pf).join(" ")):current.tspan.setAttributeNS(null,"y",pf(-current.y)),vertical?current.y-=x:current.x+=x*textHScale,current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.fontStyle!==SVG_DEFAULTS.fontStyle&&current.tspan.setAttributeNS(null,"font-style",current.fontStyle),current.fontWeight!==SVG_DEFAULTS.fontWeight&&current.tspan.setAttributeNS(null,"font-weight",current.fontWeight);const fillStrokeMode=current.textRenderingMode&_util2.TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===_util2.TextRenderingMode.FILL||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE?(current.fillColor!==SVG_DEFAULTS.fillColor&&current.tspan.setAttributeNS(null,"fill",current.fillColor),current.fillAlpha<1&&current.tspan.setAttributeNS(null,"fill-opacity",current.fillAlpha)):current.textRenderingMode===_util2.TextRenderingMode.ADD_TO_PATH?current.tspan.setAttributeNS(null,"fill","transparent"):current.tspan.setAttributeNS(null,"fill","none"),fillStrokeMode===_util2.TextRenderingMode.STROKE||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE){const lineWidthScale=1/(current.textMatrixScale||1);this._setStrokeAttributes(current.tspan,lineWidthScale)}let textMatrix=current.textMatrix;current.textRise!==0&&(textMatrix=textMatrix.slice(),textMatrix[5]+=current.textRise),current.txtElement.setAttributeNS(null,"transform",`${pm(textMatrix)} scale(${pf(textHScale)}, -1)`),current.txtElement.setAttributeNS(XML_NS,"xml:space","preserve"),current.txtElement.append(current.tspan),current.txtgrp.append(current.txtElement),this._ensureTransformGroup().append(current.txtElement)}setLeadingMoveText(x,y){this.setLeading(-y),this.moveText(x,y)}addFontStyle(fontObj){if(!fontObj.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const url=createObjectURL(fontObj.data,fontObj.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${fontObj.loadedName}"; src: url(${url}); }
`}setFont(details){const current=this.current,fontObj=this.commonObjs.get(details[0]);let size=details[1];current.font=fontObj,this.embedFonts&&!fontObj.missingFile&&!this.embeddedFonts[fontObj.loadedName]&&(this.addFontStyle(fontObj),this.embeddedFonts[fontObj.loadedName]=fontObj),current.fontMatrix=fontObj.fontMatrix||_util2.FONT_IDENTITY_MATRIX;let bold="normal";fontObj.black?bold="900":fontObj.bold&&(bold="bold");const italic=fontObj.italic?"italic":"normal";size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,current.fontSize=size,current.fontFamily=fontObj.loadedName,current.fontWeight=bold,current.fontStyle=italic,current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"y",pf(-current.y)),current.xcoords=[],current.ycoords=[]}endText(){var _current$txtElement;const current=this.current;current.textRenderingMode&_util2.TextRenderingMode.ADD_TO_PATH_FLAG&&(_current$txtElement=current.txtElement)!==null&&_current$txtElement!==void 0&&_current$txtElement.hasChildNodes()&&(current.element=current.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(width){width>0&&(this.current.lineWidth=width)}setLineCap(style){this.current.lineCap=LINE_CAP_STYLES[style]}setLineJoin(style){this.current.lineJoin=LINE_JOIN_STYLES[style]}setMiterLimit(limit){this.current.miterLimit=limit}setStrokeAlpha(strokeAlpha){this.current.strokeAlpha=strokeAlpha}setStrokeRGBColor(r,g,b){this.current.strokeColor=_util2.Util.makeHexColor(r,g,b)}setFillAlpha(fillAlpha){this.current.fillAlpha=fillAlpha}setFillRGBColor(r,g,b){this.current.fillColor=_util2.Util.makeHexColor(r,g,b),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(args){this.current.strokeColor=this._makeColorN_Pattern(args)}setFillColorN(args){this.current.fillColor=this._makeColorN_Pattern(args)}shadingFill(args){const width=this.viewport.width,height=this.viewport.height,inv=_util2.Util.inverseTransform(this.transformMatrix),bl=_util2.Util.applyTransform([0,0],inv),br=_util2.Util.applyTransform([0,height],inv),ul=_util2.Util.applyTransform([width,0],inv),ur=_util2.Util.applyTransform([width,height],inv),x0=Math.min(bl[0],br[0],ul[0],ur[0]),y0=Math.min(bl[1],br[1],ul[1],ur[1]),x1=Math.max(bl[0],br[0],ul[0],ur[0]),y1=Math.max(bl[1],br[1],ul[1],ur[1]),rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x",x0),rect.setAttributeNS(null,"y",y0),rect.setAttributeNS(null,"width",x1-x0),rect.setAttributeNS(null,"height",y1-y0),rect.setAttributeNS(null,"fill",this._makeShadingPattern(args)),this.current.fillAlpha<1&&rect.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(rect)}_makeColorN_Pattern(args){return args[0]==="TilingPattern"?this._makeTilingPattern(args):this._makeShadingPattern(args)}_makeTilingPattern(args){const color=args[1],operatorList=args[2],matrix=args[3]||_util2.IDENTITY_MATRIX,[x0,y0,x1,y1]=args[4],xstep=args[5],ystep=args[6],paintType=args[7],tilingId=`shading${shadingCount++}`,[tx0,ty0,tx1,ty1]=_util2.Util.normalizeRect([..._util2.Util.applyTransform([x0,y0],matrix),..._util2.Util.applyTransform([x1,y1],matrix)]),[xscale,yscale]=_util2.Util.singularValueDecompose2dScale(matrix),txstep=xstep*xscale,tystep=ystep*yscale,tiling=this.svgFactory.createElement("svg:pattern");tiling.setAttributeNS(null,"id",tilingId),tiling.setAttributeNS(null,"patternUnits","userSpaceOnUse"),tiling.setAttributeNS(null,"width",txstep),tiling.setAttributeNS(null,"height",tystep),tiling.setAttributeNS(null,"x",`${tx0}`),tiling.setAttributeNS(null,"y",`${ty0}`);const svg=this.svg,transformMatrix=this.transformMatrix,fillColor=this.current.fillColor,strokeColor=this.current.strokeColor,bbox=this.svgFactory.create(tx1-tx0,ty1-ty0);if(this.svg=bbox,this.transformMatrix=matrix,paintType===2){const cssColor=_util2.Util.makeHexColor(...color);this.current.fillColor=cssColor,this.current.strokeColor=cssColor}return this.executeOpTree(this.convertOpList(operatorList)),this.svg=svg,this.transformMatrix=transformMatrix,this.current.fillColor=fillColor,this.current.strokeColor=strokeColor,tiling.append(bbox.childNodes[0]),this.defs.append(tiling),`url(#${tilingId})`}_makeShadingPattern(args){switch(typeof args=="string"&&(args=this.objs.get(args)),args[0]){case"RadialAxial":const shadingId=`shading${shadingCount++}`,colorStops=args[3];let gradient;switch(args[1]){case"axial":const point0=args[4],point1=args[5];gradient=this.svgFactory.createElement("svg:linearGradient"),gradient.setAttributeNS(null,"id",shadingId),gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),gradient.setAttributeNS(null,"x1",point0[0]),gradient.setAttributeNS(null,"y1",point0[1]),gradient.setAttributeNS(null,"x2",point1[0]),gradient.setAttributeNS(null,"y2",point1[1]);break;case"radial":const focalPoint=args[4],circlePoint=args[5],focalRadius=args[6],circleRadius=args[7];gradient=this.svgFactory.createElement("svg:radialGradient"),gradient.setAttributeNS(null,"id",shadingId),gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),gradient.setAttributeNS(null,"cx",circlePoint[0]),gradient.setAttributeNS(null,"cy",circlePoint[1]),gradient.setAttributeNS(null,"r",circleRadius),gradient.setAttributeNS(null,"fx",focalPoint[0]),gradient.setAttributeNS(null,"fy",focalPoint[1]),gradient.setAttributeNS(null,"fr",focalRadius);break;default:throw new Error(`Unknown RadialAxial type: ${args[1]}`)}for(const colorStop of colorStops){const stop=this.svgFactory.createElement("svg:stop");stop.setAttributeNS(null,"offset",colorStop[0]),stop.setAttributeNS(null,"stop-color",colorStop[1]),gradient.append(stop)}return this.defs.append(gradient),`url(#${shadingId})`;case"Mesh":return(0,_util2.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${args[0]}`)}}setDash(dashArray,dashPhase){this.current.dashArray=dashArray,this.current.dashPhase=dashPhase}constructPath(ops,args){const current=this.current;let x=current.x,y=current.y,d=[],j=0;for(const op of ops)switch(op|0){case _util2.OPS.rectangle:x=args[j++],y=args[j++];const width=args[j++],height=args[j++],xw=x+width,yh=y+height;d.push("M",pf(x),pf(y),"L",pf(xw),pf(y),"L",pf(xw),pf(yh),"L",pf(x),pf(yh),"Z");break;case _util2.OPS.moveTo:x=args[j++],y=args[j++],d.push("M",pf(x),pf(y));break;case _util2.OPS.lineTo:x=args[j++],y=args[j++],d.push("L",pf(x),pf(y));break;case _util2.OPS.curveTo:x=args[j+4],y=args[j+5],d.push("C",pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]),pf(x),pf(y)),j+=6;break;case _util2.OPS.curveTo2:d.push("C",pf(x),pf(y),pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3])),x=args[j+2],y=args[j+3],j+=4;break;case _util2.OPS.curveTo3:x=args[j+2],y=args[j+3],d.push("C",pf(args[j]),pf(args[j+1]),pf(x),pf(y),pf(x),pf(y)),j+=4;break;case _util2.OPS.closePath:d.push("Z");break}d=d.join(" "),current.path&&ops.length>0&&ops[0]!==_util2.OPS.rectangle&&ops[0]!==_util2.OPS.moveTo?d=current.path.getAttributeNS(null,"d")+d:(current.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(current.path)),current.path.setAttributeNS(null,"d",d),current.path.setAttributeNS(null,"fill","none"),current.element=current.path,current.setCurrentPoint(x,y)}endPath(){const current=this.current;if(current.path=null,!this.pendingClip)return;if(!current.element){this.pendingClip=null;return}const clipId=`clippath${clipCount++}`,clipPath=this.svgFactory.createElement("svg:clipPath");clipPath.setAttributeNS(null,"id",clipId),clipPath.setAttributeNS(null,"transform",pm(this.transformMatrix));const clipElement=current.element.cloneNode(!0);if(this.pendingClip==="evenodd"?clipElement.setAttributeNS(null,"clip-rule","evenodd"):clipElement.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,clipPath.append(clipElement),this.defs.append(clipPath),current.activeClipUrl){current.clipGroup=null;for(const prev of this.extraStack)prev.clipGroup=null;clipPath.setAttributeNS(null,"clip-path",current.activeClipUrl)}current.activeClipUrl=`url(#${clipId})`,this.tgrp=null}clip(type){this.pendingClip=type}closePath(){const current=this.current;if(current.path){const d=`${current.path.getAttributeNS(null,"d")}Z`;current.path.setAttributeNS(null,"d",d)}}setLeading(leading){this.current.leading=-leading}setTextRise(textRise){this.current.textRise=textRise}setTextRenderingMode(textRenderingMode){this.current.textRenderingMode=textRenderingMode}setHScale(scale){this.current.textHScale=scale/100}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(const[key,value]of states)switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value);break;case"CA":this.setStrokeAlpha(value);break;case"ca":this.setFillAlpha(value);break;default:(0,_util2.warn)(`Unimplemented graphic state operator ${key}`);break}}fill(){const current=this.current;current.element&&(current.element.setAttributeNS(null,"fill",current.fillColor),current.element.setAttributeNS(null,"fill-opacity",current.fillAlpha),this.endPath())}stroke(){const current=this.current;current.element&&(this._setStrokeAttributes(current.element),current.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(element){let lineWidthScale=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const current=this.current;let dashArray=current.dashArray;lineWidthScale!==1&&dashArray.length>0&&(dashArray=dashArray.map(function(value){return lineWidthScale*value})),element.setAttributeNS(null,"stroke",current.strokeColor),element.setAttributeNS(null,"stroke-opacity",current.strokeAlpha),element.setAttributeNS(null,"stroke-miterlimit",pf(current.miterLimit)),element.setAttributeNS(null,"stroke-linecap",current.lineCap),element.setAttributeNS(null,"stroke-linejoin",current.lineJoin),element.setAttributeNS(null,"stroke-width",pf(lineWidthScale*current.lineWidth)+"px"),element.setAttributeNS(null,"stroke-dasharray",dashArray.map(pf).join(" ")),element.setAttributeNS(null,"stroke-dashoffset",pf(lineWidthScale*current.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0"),rect.setAttributeNS(null,"y","0"),rect.setAttributeNS(null,"width","1px"),rect.setAttributeNS(null,"height","1px"),rect.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(rect)}paintImageXObject(objId){const imgData=objId.startsWith("g_")?this.commonObjs.get(objId):this.objs.get(objId);if(!imgData){(0,_util2.warn)(`Dependent image with object ID ${objId} is not ready yet`);return}this.paintInlineImageXObject(imgData)}paintInlineImageXObject(imgData,mask){const width=imgData.width,height=imgData.height,imgSrc=convertImgDataToPng(imgData,this.forceDataSchema,!!mask),cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x","0"),cliprect.setAttributeNS(null,"y","0"),cliprect.setAttributeNS(null,"width",pf(width)),cliprect.setAttributeNS(null,"height",pf(height)),this.current.element=cliprect,this.clip("nonzero");const imgEl=this.svgFactory.createElement("svg:image");imgEl.setAttributeNS(XLINK_NS,"xlink:href",imgSrc),imgEl.setAttributeNS(null,"x","0"),imgEl.setAttributeNS(null,"y",pf(-height)),imgEl.setAttributeNS(null,"width",pf(width)+"px"),imgEl.setAttributeNS(null,"height",pf(height)+"px"),imgEl.setAttributeNS(null,"transform",`scale(${pf(1/width)} ${pf(-1/height)})`),mask?mask.append(imgEl):this._ensureTransformGroup().append(imgEl)}paintImageMaskXObject(imgData){const current=this.current,width=imgData.width,height=imgData.height,fillColor=current.fillColor;current.maskId=`mask${maskCount++}`;const mask=this.svgFactory.createElement("svg:mask");mask.setAttributeNS(null,"id",current.maskId);const rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0"),rect.setAttributeNS(null,"y","0"),rect.setAttributeNS(null,"width",pf(width)),rect.setAttributeNS(null,"height",pf(height)),rect.setAttributeNS(null,"fill",fillColor),rect.setAttributeNS(null,"mask",`url(#${current.maskId})`),this.defs.append(mask),this._ensureTransformGroup().append(rect),this.paintInlineImageXObject(imgData,mask)}paintFormXObjectBegin(matrix,bbox){if(Array.isArray(matrix)&&matrix.length===6&&this.transform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]),bbox){const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x",bbox[0]),cliprect.setAttributeNS(null,"y",bbox[1]),cliprect.setAttributeNS(null,"width",pf(width)),cliprect.setAttributeNS(null,"height",pf(height)),this.current.element=cliprect,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(viewport){const svg=this.svgFactory.create(viewport.width,viewport.height),definitions=this.svgFactory.createElement("svg:defs");svg.append(definitions),this.defs=definitions;const rootGroup=this.svgFactory.createElement("svg:g");return rootGroup.setAttributeNS(null,"transform",pm(viewport.transform)),svg.append(rootGroup),this.svg=rootGroup,svg}_ensureClipGroup(){if(!this.current.clipGroup){const clipGroup=this.svgFactory.createElement("svg:g");clipGroup.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(clipGroup),this.current.clipGroup=clipGroup}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}},__name(_b,"SVGGraphics"),_b)}},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PDFNodeStream=void 0;var _util2=__w_pdfjs_require__2(1),_network_utils=__w_pdfjs_require__2(158);const fs=require$$7,http=require$$7,https=require$$7,url=require$$7,fileUriRegex=/^file:\/\/\/[a-zA-Z]:\//;function parseUrl(sourceUrl){const parsedUrl=url.parse(sourceUrl);return parsedUrl.protocol==="file:"||parsedUrl.host?parsedUrl:/^[a-z]:[/\\]/i.test(sourceUrl)?url.parse(`file:///${sourceUrl}`):(parsedUrl.host||(parsedUrl.protocol="file:"),parsedUrl)}__name2(parseUrl,"parseUrl"),__name(parseUrl,"parseUrl");const _PDFNodeStream=class{static{__name2(this,"_PDFNodeStream")}constructor(source){this.source=source,this.url=parseUrl(source.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _this$_fullRequestRea,_this$_fullRequestRea2;return(_this$_fullRequestRea=(_this$_fullRequestRea2=this._fullRequestReader)===null||_this$_fullRequestRea2===void 0?void 0:_this$_fullRequestRea2._loaded)!==null&&_this$_fullRequestRea!==void 0?_this$_fullRequestRea:0}getFullReader(){return(0,_util2.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this),this._fullRequestReader}getRangeReader(start,end){if(end<=this._progressiveDataLength)return null;const rangeReader=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,start,end):new PDFNodeStreamRangeReader(this,start,end);return this._rangeRequestReaders.push(rangeReader),rangeReader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}};__name(_PDFNodeStream,"PDFNodeStream");let PDFNodeStream=_PDFNodeStream;exports2.PDFNodeStream=PDFNodeStream;const _BaseFullReader=class{static{__name2(this,"_BaseFullReader")}constructor(stream){this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null;const source=stream.source;this._contentLength=source.length,this._loaded=0,this._filename=null,this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._readableStream=null,this._readCapability=(0,_util2.createPromiseCapability)(),this._headersCapability=(0,_util2.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const chunk=this._readableStream.read();return chunk===null?(this._readCapability=(0,_util2.createPromiseCapability)(),this.read()):(this._loaded+=chunk.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(chunk).buffer,done:!1})}cancel(reason){if(!this._readableStream){this._error(reason);return}this._readableStream.destroy(reason)}_error(reason){this._storedError=reason,this._readCapability.resolve()}_setReadableStream(readableStream){this._readableStream=readableStream,readableStream.on("readable",()=>{this._readCapability.resolve()}),readableStream.on("end",()=>{readableStream.destroy(),this._done=!0,this._readCapability.resolve()}),readableStream.on("error",reason=>{this._error(reason)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new _util2.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}};__name(_BaseFullReader,"BaseFullReader");let BaseFullReader=_BaseFullReader;const _BaseRangeReader=class{static{__name2(this,"_BaseRangeReader")}constructor(stream){this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,_util2.createPromiseCapability)();const source=stream.source;this._isStreamingSupported=!source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const chunk=this._readableStream.read();return chunk===null?(this._readCapability=(0,_util2.createPromiseCapability)(),this.read()):(this._loaded+=chunk.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(chunk).buffer,done:!1})}cancel(reason){if(!this._readableStream){this._error(reason);return}this._readableStream.destroy(reason)}_error(reason){this._storedError=reason,this._readCapability.resolve()}_setReadableStream(readableStream){this._readableStream=readableStream,readableStream.on("readable",()=>{this._readCapability.resolve()}),readableStream.on("end",()=>{readableStream.destroy(),this._done=!0,this._readCapability.resolve()}),readableStream.on("error",reason=>{this._error(reason)}),this._storedError&&this._readableStream.destroy(this._storedError)}};__name(_BaseRangeReader,"BaseRangeReader");let BaseRangeReader=_BaseRangeReader;function createRequestOptions(parsedUrl,headers){return{protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.hostname,port:parsedUrl.port,path:parsedUrl.path,method:"GET",headers}}__name2(createRequestOptions,"createRequestOptions"),__name(createRequestOptions,"createRequestOptions");const _PDFNodeStreamFullReader=class extends BaseFullReader{static{__name2(this,"_PDFNodeStreamFullReader")}constructor(stream){super(stream);const handleResponse=__name(response=>{if(response.statusCode===404){const error=new _util2.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=error,this._headersCapability.reject(error);return}this._headersCapability.resolve(),this._setReadableStream(response);const getResponseHeader=__name(name=>this._readableStream.headers[name.toLowerCase()],"getResponseHeader"),{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests,this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader)},"handleResponse");this._request=null,this._url.protocol==="http:"?this._request=http.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse):this._request=https.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse),this._request.on("error",reason=>{this._storedError=reason,this._headersCapability.reject(reason)}),this._request.end()}};__name(_PDFNodeStreamFullReader,"PDFNodeStreamFullReader");let PDFNodeStreamFullReader=_PDFNodeStreamFullReader;const _PDFNodeStreamRangeReader=class extends BaseRangeReader{static{__name2(this,"_PDFNodeStreamRangeReader")}constructor(stream,start,end){super(stream),this._httpHeaders={};for(const property in stream.httpHeaders){const value=stream.httpHeaders[property];typeof value>"u"||(this._httpHeaders[property]=value)}this._httpHeaders.Range=`bytes=${start}-${end-1}`;const handleResponse=__name(response=>{if(response.statusCode===404){const error=new _util2.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=error;return}this._setReadableStream(response)},"handleResponse");this._request=null,this._url.protocol==="http:"?this._request=http.request(createRequestOptions(this._url,this._httpHeaders),handleResponse):this._request=https.request(createRequestOptions(this._url,this._httpHeaders),handleResponse),this._request.on("error",reason=>{this._storedError=reason}),this._request.end()}};__name(_PDFNodeStreamRangeReader,"PDFNodeStreamRangeReader");let PDFNodeStreamRangeReader=_PDFNodeStreamRangeReader;const _PDFNodeStreamFsFullReader=class extends BaseFullReader{static{__name2(this,"_PDFNodeStreamFsFullReader")}constructor(stream){super(stream);let path=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(path=path.replace(/^\//,"")),fs.lstat(path,(error,stat)=>{if(error){error.code==="ENOENT"&&(error=new _util2.MissingPDFException(`Missing PDF "${path}".`)),this._storedError=error,this._headersCapability.reject(error);return}this._contentLength=stat.size,this._setReadableStream(fs.createReadStream(path)),this._headersCapability.resolve()})}};__name(_PDFNodeStreamFsFullReader,"PDFNodeStreamFsFullReader");let PDFNodeStreamFsFullReader=_PDFNodeStreamFsFullReader;const _PDFNodeStreamFsRangeReader=class extends BaseRangeReader{static{__name2(this,"_PDFNodeStreamFsRangeReader")}constructor(stream,start,end){super(stream);let path=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(path=path.replace(/^\//,"")),this._setReadableStream(fs.createReadStream(path,{start,end:end-1}))}};__name(_PDFNodeStreamFsRangeReader,"PDFNodeStreamFsRangeReader");let PDFNodeStreamFsRangeReader=_PDFNodeStreamFsRangeReader},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.createResponseStatusError=createResponseStatusError,exports2.extractFilenameFromHeader=extractFilenameFromHeader,exports2.validateRangeRequestCapabilities=validateRangeRequestCapabilities,exports2.validateResponseStatus=validateResponseStatus;var _util2=__w_pdfjs_require__2(1),_content_disposition=__w_pdfjs_require__2(159),_display_utils2=__w_pdfjs_require__2(133);function validateRangeRequestCapabilities(_ref){let{getResponseHeader,isHttp,rangeChunkSize,disableRange}=_ref;const returnValues={allowRangeRequests:!1,suggestedLength:void 0},length=parseInt(getResponseHeader("Content-Length"),10);return!Number.isInteger(length)||(returnValues.suggestedLength=length,length<=2*rangeChunkSize)||disableRange||!isHttp||getResponseHeader("Accept-Ranges")!=="bytes"||(getResponseHeader("Content-Encoding")||"identity")!=="identity"||(returnValues.allowRangeRequests=!0),returnValues}__name2(validateRangeRequestCapabilities,"validateRangeRequestCapabilities"),__name(validateRangeRequestCapabilities,"validateRangeRequestCapabilities");function extractFilenameFromHeader(getResponseHeader){const contentDisposition=getResponseHeader("Content-Disposition");if(contentDisposition){let filename=(0,_content_disposition.getFilenameFromContentDispositionHeader)(contentDisposition);if(filename.includes("%"))try{filename=decodeURIComponent(filename)}catch{}if((0,_display_utils2.isPdfFile)(filename))return filename}return null}__name2(extractFilenameFromHeader,"extractFilenameFromHeader"),__name(extractFilenameFromHeader,"extractFilenameFromHeader");function createResponseStatusError(status,url){return status===404||status===0&&url.startsWith("file:")?new _util2.MissingPDFException('Missing PDF "'+url+'".'):new _util2.UnexpectedResponseException(`Unexpected server response (${status}) while retrieving PDF "${url}".`,status)}__name2(createResponseStatusError,"createResponseStatusError"),__name(createResponseStatusError,"createResponseStatusError");function validateResponseStatus(status){return status===200||status===206}__name2(validateResponseStatus,"validateResponseStatus"),__name(validateResponseStatus,"validateResponseStatus")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.getFilenameFromContentDispositionHeader=getFilenameFromContentDispositionHeader;var _util2=__w_pdfjs_require__2(1);function getFilenameFromContentDispositionHeader(contentDisposition){let needsEncodingFixup=!0,tmp=toParamRegExp("filename\\*","i").exec(contentDisposition);if(tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);return filename=unescape(filename),filename=rfc5987decode(filename),filename=rfc2047decode(filename),fixupEncoding(filename)}if(tmp=rfc2231getparam(contentDisposition),tmp){const filename=rfc2047decode(tmp);return fixupEncoding(filename)}if(tmp=toParamRegExp("filename","i").exec(contentDisposition),tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);return filename=rfc2047decode(filename),fixupEncoding(filename)}function toParamRegExp(attributePattern,flags){return new RegExp("(?:^|;)\\s*"+attributePattern+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',flags)}__name2(toParamRegExp,"toParamRegExp"),__name(toParamRegExp,"toParamRegExp");function textdecode(encoding,value){if(encoding){if(!/^[\x00-\xFF]+$/.test(value))return value;try{const decoder=new TextDecoder(encoding,{fatal:!0}),buffer=(0,_util2.stringToBytes)(value);value=decoder.decode(buffer),needsEncodingFixup=!1}catch{}}return value}__name2(textdecode,"textdecode"),__name(textdecode,"textdecode");function fixupEncoding(value){return needsEncodingFixup&&/[\x80-\xff]/.test(value)&&(value=textdecode("utf-8",value),needsEncodingFixup&&(value=textdecode("iso-8859-1",value))),value}__name2(fixupEncoding,"fixupEncoding"),__name(fixupEncoding,"fixupEncoding");function rfc2231getparam(contentDispositionStr){const matches=[];let match;const iter=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(match=iter.exec(contentDispositionStr))!==null;){let[,n,quot,part]=match;if(n=parseInt(n,10),n in matches){if(n===0)break;continue}matches[n]=[quot,part]}const parts=[];for(let n=0;n<matches.length&&n in matches;++n){let[quot,part]=matches[n];part=rfc2616unquote(part),quot&&(part=unescape(part),n===0&&(part=rfc5987decode(part))),parts.push(part)}return parts.join("")}__name2(rfc2231getparam,"rfc2231getparam"),__name(rfc2231getparam,"rfc2231getparam");function rfc2616unquote(value){if(value.startsWith('"')){const parts=value.slice(1).split('\\"');for(let i=0;i<parts.length;++i){const quotindex=parts[i].indexOf('"');quotindex!==-1&&(parts[i]=parts[i].slice(0,quotindex),parts.length=i+1),parts[i]=parts[i].replace(/\\(.)/g,"$1")}value=parts.join('"')}return value}__name2(rfc2616unquote,"rfc2616unquote"),__name(rfc2616unquote,"rfc2616unquote");function rfc5987decode(extvalue){const encodingend=extvalue.indexOf("'");if(encodingend===-1)return extvalue;const encoding=extvalue.slice(0,encodingend),value=extvalue.slice(encodingend+1).replace(/^[^']*'/,"");return textdecode(encoding,value)}__name2(rfc5987decode,"rfc5987decode"),__name(rfc5987decode,"rfc5987decode");function rfc2047decode(value){return!value.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(value)?value:value.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(matches,charset,encoding,text){if(encoding==="q"||encoding==="Q")return text=text.replace(/_/g," "),text=text.replace(/=([0-9a-fA-F]{2})/g,function(match,hex){return String.fromCharCode(parseInt(hex,16))}),textdecode(charset,text);try{text=atob(text)}catch{}return textdecode(charset,text)})}return __name2(rfc2047decode,"rfc2047decode"),__name(rfc2047decode,"rfc2047decode"),""}__name2(getFilenameFromContentDispositionHeader,"getFilenameFromContentDispositionHeader"),__name(getFilenameFromContentDispositionHeader,"getFilenameFromContentDispositionHeader")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PDFNetworkStream=void 0;var _util2=__w_pdfjs_require__2(1),_network_utils=__w_pdfjs_require__2(158);const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function getArrayBuffer(xhr){const data=xhr.response;return typeof data!="string"?data:(0,_util2.stringToBytes)(data).buffer}__name2(getArrayBuffer,"getArrayBuffer"),__name(getArrayBuffer,"getArrayBuffer");const _NetworkManager=class{static{__name2(this,"_NetworkManager")}constructor(url){let args=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=url,this.isHttp=/^https?:/i.test(url),this.httpHeaders=this.isHttp&&args.httpHeaders||Object.create(null),this.withCredentials=args.withCredentials||!1,this.getXhr=args.getXhr||__name(__name2(function(){return new XMLHttpRequest},"NetworkManager_getXhr"),"NetworkManager_getXhr"),this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(begin,end,listeners){const args={begin,end};for(const prop in listeners)args[prop]=listeners[prop];return this.request(args)}requestFull(listeners){return this.request(listeners)}request(args){const xhr=this.getXhr(),xhrId=this.currXhrId++,pendingRequest=this.pendingRequests[xhrId]={xhr};xhr.open("GET",this.url),xhr.withCredentials=this.withCredentials;for(const property in this.httpHeaders){const value=this.httpHeaders[property];typeof value>"u"||xhr.setRequestHeader(property,value)}return this.isHttp&&"begin"in args&&"end"in args?(xhr.setRequestHeader("Range",`bytes=${args.begin}-${args.end-1}`),pendingRequest.expectedStatus=PARTIAL_CONTENT_RESPONSE):pendingRequest.expectedStatus=OK_RESPONSE,xhr.responseType="arraybuffer",args.onError&&(xhr.onerror=function(evt){args.onError(xhr.status)}),xhr.onreadystatechange=this.onStateChange.bind(this,xhrId),xhr.onprogress=this.onProgress.bind(this,xhrId),pendingRequest.onHeadersReceived=args.onHeadersReceived,pendingRequest.onDone=args.onDone,pendingRequest.onError=args.onError,pendingRequest.onProgress=args.onProgress,xhr.send(null),xhrId}onProgress(xhrId,evt){var _pendingRequest$onPro;const pendingRequest=this.pendingRequests[xhrId];pendingRequest&&((_pendingRequest$onPro=pendingRequest.onProgress)===null||_pendingRequest$onPro===void 0||_pendingRequest$onPro.call(pendingRequest,evt))}onStateChange(xhrId,evt){const pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest)return;const xhr=pendingRequest.xhr;if(xhr.readyState>=2&&pendingRequest.onHeadersReceived&&(pendingRequest.onHeadersReceived(),delete pendingRequest.onHeadersReceived),xhr.readyState!==4||!(xhrId in this.pendingRequests))return;if(delete this.pendingRequests[xhrId],xhr.status===0&&this.isHttp){var _pendingRequest$onErr;(_pendingRequest$onErr=pendingRequest.onError)===null||_pendingRequest$onErr===void 0||_pendingRequest$onErr.call(pendingRequest,xhr.status);return}const xhrStatus=xhr.status||OK_RESPONSE;if(!(xhrStatus===OK_RESPONSE&&pendingRequest.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&xhrStatus!==pendingRequest.expectedStatus){var _pendingRequest$onErr2;(_pendingRequest$onErr2=pendingRequest.onError)===null||_pendingRequest$onErr2===void 0||_pendingRequest$onErr2.call(pendingRequest,xhr.status);return}const chunk=getArrayBuffer(xhr);if(xhrStatus===PARTIAL_CONTENT_RESPONSE){const rangeHeader=xhr.getResponseHeader("Content-Range"),matches=/bytes (\d+)-(\d+)\/(\d+)/.exec(rangeHeader);pendingRequest.onDone({begin:parseInt(matches[1],10),chunk})}else if(chunk)pendingRequest.onDone({begin:0,chunk});else{var _pendingRequest$onErr3;(_pendingRequest$onErr3=pendingRequest.onError)===null||_pendingRequest$onErr3===void 0||_pendingRequest$onErr3.call(pendingRequest,xhr.status)}}getRequestXhr(xhrId){return this.pendingRequests[xhrId].xhr}isPendingRequest(xhrId){return xhrId in this.pendingRequests}abortRequest(xhrId){const xhr=this.pendingRequests[xhrId].xhr;delete this.pendingRequests[xhrId],xhr.abort()}};__name(_NetworkManager,"NetworkManager");let NetworkManager=_NetworkManager;const _PDFNetworkStream=class{static{__name2(this,"_PDFNetworkStream")}constructor(source){this._source=source,this._manager=new NetworkManager(source.url,{httpHeaders:source.httpHeaders,withCredentials:source.withCredentials}),this._rangeChunkSize=source.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(reader){const i=this._rangeRequestReaders.indexOf(reader);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return(0,_util2.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(begin,end){const reader=new PDFNetworkStreamRangeRequestReader(this._manager,begin,end);return reader.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(reader),reader}cancelAllRequests(reason){var _this$_fullRequestRea;(_this$_fullRequestRea=this._fullRequestReader)===null||_this$_fullRequestRea===void 0||_this$_fullRequestRea.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}};__name(_PDFNetworkStream,"PDFNetworkStream");let PDFNetworkStream=_PDFNetworkStream;exports2.PDFNetworkStream=PDFNetworkStream;const _PDFNetworkStreamFullRequestReader=class{static{__name2(this,"_PDFNetworkStreamFullRequestReader")}constructor(manager,source){this._manager=manager;const args={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=source.url,this._fullRequestId=manager.requestFull(args),this._headersReceivedCapability=(0,_util2.createPromiseCapability)(),this._disableRange=source.disableRange||!1,this._contentLength=source.length,this._rangeChunkSize=source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const fullRequestXhrId=this._fullRequestId,fullRequestXhr=this._manager.getRequestXhr(fullRequestXhrId),getResponseHeader=__name(name=>fullRequestXhr.getResponseHeader(name),"getResponseHeader"),{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});allowRangeRequests&&(this._isRangeSupported=!0),this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),this._isRangeSupported&&this._manager.abortRequest(fullRequestXhrId),this._headersReceivedCapability.resolve()}_onDone(data){if(data&&(this._requests.length>0?this._requests.shift().resolve({value:data.chunk,done:!1}):this._cachedChunks.push(data.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url),this._headersReceivedCapability.reject(this._storedError);for(const requestCapability of this._requests)requestCapability.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(evt){var _this$onProgress;(_this$onProgress=this.onProgress)===null||_this$onProgress===void 0||_this$onProgress.call(this,{loaded:evt.loaded,total:evt.lengthComputable?evt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util2.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0,this._headersReceivedCapability.reject(reason);for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}};__name(_PDFNetworkStreamFullRequestReader,"PDFNetworkStreamFullRequestReader");let PDFNetworkStreamFullRequestReader=_PDFNetworkStreamFullRequestReader;const _PDFNetworkStreamRangeRequestReader=class{static{__name2(this,"_PDFNetworkStreamRangeRequestReader")}constructor(manager,begin,end){this._manager=manager;const args={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=manager.url,this._requestId=manager.requestRange(begin,end,args),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var _this$onClosed;(_this$onClosed=this.onClosed)===null||_this$onClosed===void 0||_this$onClosed.call(this,this)}_onDone(data){const chunk=data.chunk;this._requests.length>0?this._requests.shift().resolve({value:chunk,done:!1}):this._queuedChunk=chunk,this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url);for(const requestCapability of this._requests)requestCapability.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(evt){if(!this.isStreamingSupported){var _this$onProgress2;(_this$onProgress2=this.onProgress)===null||_this$onProgress2===void 0||_this$onProgress2.call(this,{loaded:evt.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const chunk=this._queuedChunk;return this._queuedChunk=null,{value:chunk,done:!1}}if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util2.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}};__name(_PDFNetworkStreamRangeRequestReader,"PDFNetworkStreamRangeRequestReader");let PDFNetworkStreamRangeRequestReader=_PDFNetworkStreamRangeRequestReader},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PDFFetchStream=void 0;var _util2=__w_pdfjs_require__2(1),_network_utils=__w_pdfjs_require__2(158);function createFetchOptions(headers,withCredentials,abortController){return{method:"GET",headers,signal:abortController.signal,mode:"cors",credentials:withCredentials?"include":"same-origin",redirect:"follow"}}__name2(createFetchOptions,"createFetchOptions"),__name(createFetchOptions,"createFetchOptions");function createHeaders(httpHeaders){const headers=new Headers;for(const property in httpHeaders){const value=httpHeaders[property];typeof value>"u"||headers.append(property,value)}return headers}__name2(createHeaders,"createHeaders"),__name(createHeaders,"createHeaders");const _PDFFetchStream=class{static{__name2(this,"_PDFFetchStream")}constructor(source){this.source=source,this.isHttp=/^https?:/i.test(source.url),this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _this$_fullRequestRea,_this$_fullRequestRea2;return(_this$_fullRequestRea=(_this$_fullRequestRea2=this._fullRequestReader)===null||_this$_fullRequestRea2===void 0?void 0:_this$_fullRequestRea2._loaded)!==null&&_this$_fullRequestRea!==void 0?_this$_fullRequestRea:0}getFullReader(){return(0,_util2.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(begin,end){if(end<=this._progressiveDataLength)return null;const reader=new PDFFetchStreamRangeReader(this,begin,end);return this._rangeRequestReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}};__name(_PDFFetchStream,"PDFFetchStream");let PDFFetchStream=_PDFFetchStream;exports2.PDFFetchStream=PDFFetchStream;const _PDFFetchStreamReader=class{static{__name2(this,"_PDFFetchStreamReader")}constructor(stream){this._stream=stream,this._reader=null,this._loaded=0,this._filename=null;const source=stream.source;this._withCredentials=source.withCredentials||!1,this._contentLength=source.length,this._headersCapability=(0,_util2.createPromiseCapability)(),this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._headers=createHeaders(this._stream.httpHeaders);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);this._reader=response.body.getReader(),this._headersCapability.resolve();const getResponseHeader=__name(name=>response.headers.get(name),"getResponseHeader"),{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests,this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _util2.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value,done}=await this._reader.read();return done?{value,done}:(this._loaded+=value.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(value).buffer,done:!1})}cancel(reason){this._reader&&this._reader.cancel(reason),this._abortController.abort()}};__name(_PDFFetchStreamReader,"PDFFetchStreamReader");let PDFFetchStreamReader=_PDFFetchStreamReader;const _PDFFetchStreamRangeReader=class{static{__name2(this,"_PDFFetchStreamRangeReader")}constructor(stream,begin,end){this._stream=stream,this._reader=null,this._loaded=0;const source=stream.source;this._withCredentials=source.withCredentials||!1,this._readCapability=(0,_util2.createPromiseCapability)(),this._isStreamingSupported=!source.disableStream,this._abortController=new AbortController,this._headers=createHeaders(this._stream.httpHeaders),this._headers.append("Range",`bytes=${begin}-${end-1}`);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);this._readCapability.resolve(),this._reader=response.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value,done}=await this._reader.read();return done?{value,done}:(this._loaded+=value.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(value).buffer,done:!1})}cancel(reason){this._reader&&this._reader.cancel(reason),this._abortController.abort()}};__name(_PDFFetchStreamRangeReader,"PDFFetchStreamRangeReader");let PDFFetchStreamRangeReader=_PDFFetchStreamRangeReader}],__webpack_module_cache__={};function __w_pdfjs_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==void 0)return cachedModule.exports;var module2=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module2,module2.exports,__w_pdfjs_require__),module2.exports}__name2(__w_pdfjs_require__,"__w_pdfjs_require__"),__name(__w_pdfjs_require__,"__w_pdfjs_require__");var __webpack_exports__={};return(()=>{var exports2=__webpack_exports__;Object.defineProperty(exports2,"__esModule",{value:!0}),Object.defineProperty(exports2,"AnnotationEditorLayer",{enumerable:!0,get:function(){return _annotation_editor_layer.AnnotationEditorLayer}}),Object.defineProperty(exports2,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return _util2.AnnotationEditorParamsType}}),Object.defineProperty(exports2,"AnnotationEditorType",{enumerable:!0,get:function(){return _util2.AnnotationEditorType}}),Object.defineProperty(exports2,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return _tools.AnnotationEditorUIManager}}),Object.defineProperty(exports2,"AnnotationLayer",{enumerable:!0,get:function(){return _annotation_layer.AnnotationLayer}}),Object.defineProperty(exports2,"AnnotationMode",{enumerable:!0,get:function(){return _util2.AnnotationMode}}),Object.defineProperty(exports2,"CMapCompressionType",{enumerable:!0,get:function(){return _util2.CMapCompressionType}}),Object.defineProperty(exports2,"GlobalWorkerOptions",{enumerable:!0,get:function(){return _worker_options2.GlobalWorkerOptions}}),Object.defineProperty(exports2,"InvalidPDFException",{enumerable:!0,get:function(){return _util2.InvalidPDFException}}),Object.defineProperty(exports2,"LoopbackPort",{enumerable:!0,get:function(){return _api.LoopbackPort}}),Object.defineProperty(exports2,"MissingPDFException",{enumerable:!0,get:function(){return _util2.MissingPDFException}}),Object.defineProperty(exports2,"OPS",{enumerable:!0,get:function(){return _util2.OPS}}),Object.defineProperty(exports2,"PDFDataRangeTransport",{enumerable:!0,get:function(){return _api.PDFDataRangeTransport}}),Object.defineProperty(exports2,"PDFDateString",{enumerable:!0,get:function(){return _display_utils2.PDFDateString}}),Object.defineProperty(exports2,"PDFWorker",{enumerable:!0,get:function(){return _api.PDFWorker}}),Object.defineProperty(exports2,"PasswordResponses",{enumerable:!0,get:function(){return _util2.PasswordResponses}}),Object.defineProperty(exports2,"PermissionFlag",{enumerable:!0,get:function(){return _util2.PermissionFlag}}),Object.defineProperty(exports2,"PixelsPerInch",{enumerable:!0,get:function(){return _display_utils2.PixelsPerInch}}),Object.defineProperty(exports2,"RenderingCancelledException",{enumerable:!0,get:function(){return _display_utils2.RenderingCancelledException}}),Object.defineProperty(exports2,"SVGGraphics",{enumerable:!0,get:function(){return _svg.SVGGraphics}}),Object.defineProperty(exports2,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return _util2.UNSUPPORTED_FEATURES}}),Object.defineProperty(exports2,"UnexpectedResponseException",{enumerable:!0,get:function(){return _util2.UnexpectedResponseException}}),Object.defineProperty(exports2,"Util",{enumerable:!0,get:function(){return _util2.Util}}),Object.defineProperty(exports2,"VerbosityLevel",{enumerable:!0,get:function(){return _util2.VerbosityLevel}}),Object.defineProperty(exports2,"XfaLayer",{enumerable:!0,get:function(){return _xfa_layer.XfaLayer}}),Object.defineProperty(exports2,"build",{enumerable:!0,get:function(){return _api.build}}),Object.defineProperty(exports2,"createPromiseCapability",{enumerable:!0,get:function(){return _util2.createPromiseCapability}}),Object.defineProperty(exports2,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return _util2.createValidAbsoluteUrl}}),Object.defineProperty(exports2,"getDocument",{enumerable:!0,get:function(){return _api.getDocument}}),Object.defineProperty(exports2,"getFilenameFromUrl",{enumerable:!0,get:function(){return _display_utils2.getFilenameFromUrl}}),Object.defineProperty(exports2,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return _display_utils2.getPdfFilenameFromUrl}}),Object.defineProperty(exports2,"getXfaPageViewport",{enumerable:!0,get:function(){return _display_utils2.getXfaPageViewport}}),Object.defineProperty(exports2,"isPdfFile",{enumerable:!0,get:function(){return _display_utils2.isPdfFile}}),Object.defineProperty(exports2,"loadScript",{enumerable:!0,get:function(){return _display_utils2.loadScript}}),Object.defineProperty(exports2,"renderTextLayer",{enumerable:!0,get:function(){return _text_layer.renderTextLayer}}),Object.defineProperty(exports2,"shadow",{enumerable:!0,get:function(){return _util2.shadow}}),Object.defineProperty(exports2,"version",{enumerable:!0,get:function(){return _api.version}});var _util2=__w_pdfjs_require__(1),_api=__w_pdfjs_require__(129),_display_utils2=__w_pdfjs_require__(133),_annotation_editor_layer=__w_pdfjs_require__(147),_tools=__w_pdfjs_require__(132),_annotation_layer=__w_pdfjs_require__(152),_worker_options2=__w_pdfjs_require__(140),_is_node2=__w_pdfjs_require__(3),_text_layer=__w_pdfjs_require__(155),_svg=__w_pdfjs_require__(156),_xfa_layer=__w_pdfjs_require__(154);if(_is_node2.isNodeJS){const{PDFNodeStream}=__w_pdfjs_require__(157);(0,_api.setPDFNetworkStreamFactory)(params=>new PDFNodeStream(params))}else{const{PDFNetworkStream}=__w_pdfjs_require__(160),{PDFFetchStream}=__w_pdfjs_require__(161);(0,_api.setPDFNetworkStreamFactory)(params=>(0,_display_utils2.isValidFetchUrl)(params.url)?new PDFFetchStream(params):new PDFNetworkStream(params))}})(),__webpack_exports__})())}(pdf);var pdfExports=pdf.exports,pdf_worker_entry={},pdf_worker={exports:{}};(function(module2,exports2){__name(__name2(function(root,factory){module2.exports=factory()},"webpackUniversalModuleDefinition"),"webpackUniversalModuleDefinition")(globalThis,()=>(()=>{var __webpack_modules__2=[,(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.WorkerTask=exports3.WorkerMessageHandler=void 0;var _util2=__w_pdfjs_require__3(2),_primitives=__w_pdfjs_require__3(5),_core_utils=__w_pdfjs_require__3(6),_pdf_manager=__w_pdfjs_require__3(8),_cleanup_helper=__w_pdfjs_require__3(71),_writer=__w_pdfjs_require__3(65),_is_node2=__w_pdfjs_require__3(4),_message_handler2=__w_pdfjs_require__3(102),_worker_stream=__w_pdfjs_require__3(103);const _WorkerTask=class{static{__name2(this,"_WorkerTask")}constructor(name){this.name=name,this.terminated=!1,this._capability=(0,_util2.createPromiseCapability)()}get finished(){return this._capability.promise}finish(){this._capability.resolve()}terminate(){this.terminated=!0}ensureNotTerminated(){if(this.terminated)throw new Error("Worker task was terminated")}};__name(_WorkerTask,"WorkerTask");let WorkerTask=_WorkerTask;exports3.WorkerTask=WorkerTask;const _WorkerMessageHandler=class _WorkerMessageHandler2{static{__name2(this,"_WorkerMessageHandler")}static setup(handler,port){let testMessageProcessed=!1;handler.on("test",__name(__name2(function(data){testMessageProcessed||(testMessageProcessed=!0,handler.send("test",data instanceof Uint8Array))},"wphSetupTest"),"wphSetupTest")),handler.on("configure",__name(__name2(function(data){(0,_util2.setVerbosityLevel)(data.verbosity)},"wphConfigure"),"wphConfigure")),handler.on("GetDocRequest",__name(__name2(function(data){return _WorkerMessageHandler2.createDocumentHandler(data,port)},"wphSetupDoc"),"wphSetupDoc"))}static createDocumentHandler(docParams,port){let pdfManager,terminated=!1,cancelXHRs=null;const WorkerTasks=[],verbosity=(0,_util2.getVerbosityLevel)(),apiVersion=docParams.apiVersion,workerVersion="2.16.105";if(apiVersion!==workerVersion)throw new Error(`The API version "${apiVersion}" does not match the Worker version "${workerVersion}".`);const enumerableProperties=[];for(const property in[])enumerableProperties.push(property);if(enumerableProperties.length)throw new Error("The `Array.prototype` contains unexpected enumerable properties: "+enumerableProperties.join(", ")+"; thus breaking e.g. `for...in` iteration of `Array`s.");if(typeof ReadableStream>"u"){const partialMsg="The browser/environment lacks native support for critical functionality used by the PDF.js library (e.g. `ReadableStream`); ";throw _is_node2.isNodeJS?new Error(partialMsg+"please use a `legacy`-build instead."):new Error(partialMsg+"please update to a supported browser.")}const docId=docParams.docId,docBaseUrl=docParams.docBaseUrl,workerHandlerName=docParams.docId+"_worker";let handler=new _message_handler2.MessageHandler(workerHandlerName,docId,port);function ensureNotTerminated(){if(terminated)throw new Error("Worker was terminated")}__name2(ensureNotTerminated,"ensureNotTerminated"),__name(ensureNotTerminated,"ensureNotTerminated");function startWorkerTask(task){WorkerTasks.push(task)}__name2(startWorkerTask,"startWorkerTask"),__name(startWorkerTask,"startWorkerTask");function finishWorkerTask(task){task.finish();const i=WorkerTasks.indexOf(task);WorkerTasks.splice(i,1)}__name2(finishWorkerTask,"finishWorkerTask"),__name(finishWorkerTask,"finishWorkerTask");async function loadDocument(recoveryMode){await pdfManager.ensureDoc("checkHeader"),await pdfManager.ensureDoc("parseStartXRef"),await pdfManager.ensureDoc("parse",[recoveryMode]),await pdfManager.ensureDoc("checkFirstPage",[recoveryMode]),await pdfManager.ensureDoc("checkLastPage",[recoveryMode]);const isPureXfa=await pdfManager.ensureDoc("isPureXfa");if(isPureXfa){const task=new WorkerTask("loadXfaFonts");startWorkerTask(task),await Promise.all([pdfManager.loadXfaFonts(handler,task).catch(reason=>{}).then(()=>finishWorkerTask(task)),pdfManager.loadXfaImages()])}const[numPages,fingerprints]=await Promise.all([pdfManager.ensureDoc("numPages"),pdfManager.ensureDoc("fingerprints")]),htmlForXfa=isPureXfa?await pdfManager.ensureDoc("htmlForXfa"):null;return{numPages,fingerprints,htmlForXfa}}__name2(loadDocument,"loadDocument"),__name(loadDocument,"loadDocument");function getPdfManager(data,evaluatorOptions,enableXfa){const pdfManagerCapability=(0,_util2.createPromiseCapability)();let newPdfManager;const source=data.source;if(source.data){try{newPdfManager=new _pdf_manager.LocalPdfManager(docId,source.data,source.password,handler,evaluatorOptions,enableXfa,docBaseUrl),pdfManagerCapability.resolve(newPdfManager)}catch(ex){pdfManagerCapability.reject(ex)}return pdfManagerCapability.promise}let pdfStream,cachedChunks=[];try{pdfStream=new _worker_stream.PDFWorkerStream(handler)}catch(ex){return pdfManagerCapability.reject(ex),pdfManagerCapability.promise}const fullRequest=pdfStream.getFullReader();fullRequest.headersReady.then(function(){if(!fullRequest.isRangeSupported)return;const disableAutoFetch=source.disableAutoFetch||fullRequest.isStreamingSupported;newPdfManager=new _pdf_manager.NetworkPdfManager(docId,pdfStream,{msgHandler:handler,password:source.password,length:fullRequest.contentLength,disableAutoFetch,rangeChunkSize:source.rangeChunkSize},evaluatorOptions,enableXfa,docBaseUrl);for(const chunk of cachedChunks)newPdfManager.sendProgressiveData(chunk);cachedChunks=[],pdfManagerCapability.resolve(newPdfManager),cancelXHRs=null}).catch(function(reason){pdfManagerCapability.reject(reason),cancelXHRs=null});let loaded=0;const flushChunks=__name(function(){const pdfFile=(0,_util2.arraysToBytes)(cachedChunks);source.length&&pdfFile.length!==source.length&&(0,_util2.warn)("reported HTTP length is different from actual");try{newPdfManager=new _pdf_manager.LocalPdfManager(docId,pdfFile,source.password,handler,evaluatorOptions,enableXfa,docBaseUrl),pdfManagerCapability.resolve(newPdfManager)}catch(ex){pdfManagerCapability.reject(ex)}cachedChunks=[]},"flushChunks");return new Promise(function(resolve,reject){const readChunk=__name(function({value,done}){try{if(ensureNotTerminated(),done){newPdfManager||flushChunks(),cancelXHRs=null;return}loaded+=(0,_util2.arrayByteLength)(value),fullRequest.isStreamingSupported||handler.send("DocProgress",{loaded,total:Math.max(loaded,fullRequest.contentLength||0)}),newPdfManager?newPdfManager.sendProgressiveData(value):cachedChunks.push(value),fullRequest.read().then(readChunk,reject)}catch(e){reject(e)}},"readChunk");fullRequest.read().then(readChunk,reject)}).catch(function(e){pdfManagerCapability.reject(e),cancelXHRs=null}),cancelXHRs=__name(function(reason){pdfStream.cancelAllRequests(reason)},"cancelXHRs"),pdfManagerCapability.promise}__name2(getPdfManager,"getPdfManager"),__name(getPdfManager,"getPdfManager");function setupDoc(data){function onSuccess(doc){ensureNotTerminated(),handler.send("GetDoc",{pdfInfo:doc})}__name2(onSuccess,"onSuccess"),__name(onSuccess,"onSuccess");function onFailure(ex){if(ensureNotTerminated(),ex instanceof _util2.PasswordException){const task=new WorkerTask(`PasswordException: response ${ex.code}`);startWorkerTask(task),handler.sendWithPromise("PasswordRequest",ex).then(function({password}){finishWorkerTask(task),pdfManager.updatePassword(password),pdfManagerReady()}).catch(function(){finishWorkerTask(task),handler.send("DocException",ex)})}else ex instanceof _util2.InvalidPDFException||ex instanceof _util2.MissingPDFException||ex instanceof _util2.UnexpectedResponseException||ex instanceof _util2.UnknownErrorException?handler.send("DocException",ex):handler.send("DocException",new _util2.UnknownErrorException(ex.message,ex.toString()))}__name2(onFailure,"onFailure"),__name(onFailure,"onFailure");function pdfManagerReady(){ensureNotTerminated(),loadDocument(!1).then(onSuccess,function(reason){if(ensureNotTerminated(),!(reason instanceof _core_utils.XRefParseException)){onFailure(reason);return}pdfManager.requestLoadedStream(),pdfManager.onLoadedStream().then(function(){ensureNotTerminated(),loadDocument(!0).then(onSuccess,onFailure)})})}__name2(pdfManagerReady,"pdfManagerReady"),__name(pdfManagerReady,"pdfManagerReady"),ensureNotTerminated();const evaluatorOptions={maxImageSize:data.maxImageSize,disableFontFace:data.disableFontFace,ignoreErrors:data.ignoreErrors,isEvalSupported:data.isEvalSupported,fontExtraProperties:data.fontExtraProperties,useSystemFonts:data.useSystemFonts,cMapUrl:data.cMapUrl,standardFontDataUrl:data.standardFontDataUrl};getPdfManager(data,evaluatorOptions,data.enableXfa).then(function(newPdfManager){if(terminated)throw newPdfManager.terminate(new _util2.AbortException("Worker was terminated.")),new Error("Worker was terminated");pdfManager=newPdfManager,pdfManager.onLoadedStream().then(function(stream){handler.send("DataLoaded",{length:stream.bytes.byteLength})})}).then(pdfManagerReady,onFailure)}return __name2(setupDoc,"setupDoc"),__name(setupDoc,"setupDoc"),handler.on("GetPage",__name(__name2(function(data){return pdfManager.getPage(data.pageIndex).then(function(page){return Promise.all([pdfManager.ensure(page,"rotate"),pdfManager.ensure(page,"ref"),pdfManager.ensure(page,"userUnit"),pdfManager.ensure(page,"view")]).then(function([rotate,ref,userUnit,view]){return{rotate,ref,userUnit,view}})})},"wphSetupGetPage"),"wphSetupGetPage")),handler.on("GetPageIndex",__name(__name2(function(data){const pageRef=_primitives.Ref.get(data.num,data.gen);return pdfManager.ensureCatalog("getPageIndex",[pageRef])},"wphSetupGetPageIndex"),"wphSetupGetPageIndex")),handler.on("GetDestinations",__name(__name2(function(data){return pdfManager.ensureCatalog("destinations")},"wphSetupGetDestinations"),"wphSetupGetDestinations")),handler.on("GetDestination",__name(__name2(function(data){return pdfManager.ensureCatalog("getDestination",[data.id])},"wphSetupGetDestination"),"wphSetupGetDestination")),handler.on("GetPageLabels",__name(__name2(function(data){return pdfManager.ensureCatalog("pageLabels")},"wphSetupGetPageLabels"),"wphSetupGetPageLabels")),handler.on("GetPageLayout",__name(__name2(function(data){return pdfManager.ensureCatalog("pageLayout")},"wphSetupGetPageLayout"),"wphSetupGetPageLayout")),handler.on("GetPageMode",__name(__name2(function(data){return pdfManager.ensureCatalog("pageMode")},"wphSetupGetPageMode"),"wphSetupGetPageMode")),handler.on("GetViewerPreferences",function(data){return pdfManager.ensureCatalog("viewerPreferences")}),handler.on("GetOpenAction",function(data){return pdfManager.ensureCatalog("openAction")}),handler.on("GetAttachments",__name(__name2(function(data){return pdfManager.ensureCatalog("attachments")},"wphSetupGetAttachments"),"wphSetupGetAttachments")),handler.on("GetJavaScript",__name(__name2(function(data){return pdfManager.ensureCatalog("javaScript")},"wphSetupGetJavaScript"),"wphSetupGetJavaScript")),handler.on("GetDocJSActions",__name(__name2(function(data){return pdfManager.ensureCatalog("jsActions")},"wphSetupGetDocJSActions"),"wphSetupGetDocJSActions")),handler.on("GetPageJSActions",function({pageIndex}){return pdfManager.getPage(pageIndex).then(function(page){return pdfManager.ensure(page,"jsActions")})}),handler.on("GetOutline",__name(__name2(function(data){return pdfManager.ensureCatalog("documentOutline")},"wphSetupGetOutline"),"wphSetupGetOutline")),handler.on("GetOptionalContentConfig",function(data){return pdfManager.ensureCatalog("optionalContentConfig")}),handler.on("GetPermissions",function(data){return pdfManager.ensureCatalog("permissions")}),handler.on("GetMetadata",__name(__name2(function(data){return Promise.all([pdfManager.ensureDoc("documentInfo"),pdfManager.ensureCatalog("metadata")])},"wphSetupGetMetadata"),"wphSetupGetMetadata")),handler.on("GetMarkInfo",__name(__name2(function(data){return pdfManager.ensureCatalog("markInfo")},"wphSetupGetMarkInfo"),"wphSetupGetMarkInfo")),handler.on("GetData",__name(__name2(function(data){return pdfManager.requestLoadedStream(),pdfManager.onLoadedStream().then(function(stream){return stream.bytes})},"wphSetupGetData"),"wphSetupGetData")),handler.on("GetAnnotations",function({pageIndex,intent}){return pdfManager.getPage(pageIndex).then(function(page){const task=new WorkerTask(`GetAnnotations: page ${pageIndex}`);return startWorkerTask(task),page.getAnnotationsData(handler,task,intent).then(data=>(finishWorkerTask(task),data),reason=>{finishWorkerTask(task)})})}),handler.on("GetFieldObjects",function(data){return pdfManager.ensureDoc("fieldObjects")}),handler.on("HasJSActions",function(data){return pdfManager.ensureDoc("hasJSActions")}),handler.on("GetCalculationOrderIds",function(data){return pdfManager.ensureDoc("calculationOrderIds")}),handler.on("SaveDocument",function({isPureXfa,numPages,annotationStorage,filename}){pdfManager.requestLoadedStream();const newAnnotationsByPage=isPureXfa?null:(0,_core_utils.getNewAnnotationsMap)(annotationStorage),promises=[pdfManager.onLoadedStream(),pdfManager.ensureCatalog("acroForm"),pdfManager.ensureCatalog("acroFormRef"),pdfManager.ensureDoc("xref"),pdfManager.ensureDoc("startXRef")];if(newAnnotationsByPage)for(const[pageIndex,annotations]of newAnnotationsByPage)promises.push(pdfManager.getPage(pageIndex).then(page=>{const task=new WorkerTask(`Save (editor): page ${pageIndex}`);return page.saveNewAnnotations(handler,task,annotations).finally(function(){finishWorkerTask(task)})}));if(isPureXfa)promises.push(pdfManager.serializeXfaData(annotationStorage));else for(let pageIndex=0;pageIndex<numPages;pageIndex++)promises.push(pdfManager.getPage(pageIndex).then(function(page){const task=new WorkerTask(`Save: page ${pageIndex}`);return page.save(handler,task,annotationStorage).finally(function(){finishWorkerTask(task)})}));return Promise.all(promises).then(function([stream,acroForm,acroFormRef,xref,startXRef,...refs]){let newRefs=[],xfaData=null;if(isPureXfa){if(xfaData=refs[0],!xfaData)return stream.bytes}else if(newRefs=refs.flat(2),newRefs.length===0)return stream.bytes;const xfa=acroForm instanceof _primitives.Dict&&acroForm.get("XFA")||null;let xfaDatasetsRef=null,hasXfaDatasetsEntry=!1;if(Array.isArray(xfa)){for(let i=0,ii=xfa.length;i<ii;i+=2)xfa[i]==="datasets"&&(xfaDatasetsRef=xfa[i+1],acroFormRef=null,hasXfaDatasetsEntry=!0);xfaDatasetsRef===null&&(xfaDatasetsRef=xref.getNewRef())}else xfa&&(acroFormRef=null,(0,_util2.warn)("Unsupported XFA type."));let newXrefInfo=Object.create(null);if(xref.trailer){const infoObj=Object.create(null),xrefInfo=xref.trailer.get("Info")||null;xrefInfo instanceof _primitives.Dict&&xrefInfo.forEach((key,value)=>{typeof value=="string"&&(infoObj[key]=(0,_util2.stringToPDFString)(value))}),newXrefInfo={rootRef:xref.trailer.getRaw("Root")||null,encryptRef:xref.trailer.getRaw("Encrypt")||null,newRef:xref.getNewRef(),infoRef:xref.trailer.getRaw("Info")||null,info:infoObj,fileIds:xref.trailer.get("ID")||null,startXRef,filename}}return xref.resetNewRef(),(0,_writer.incrementalUpdate)({originalData:stream.bytes,xrefInfo:newXrefInfo,newRefs,xref,hasXfa:!!xfa,xfaDatasetsRef,hasXfaDatasetsEntry,acroFormRef,acroForm,xfaData})})}),handler.on("GetOperatorList",__name(__name2(function(data,sink){const pageIndex=data.pageIndex;pdfManager.getPage(pageIndex).then(function(page){const task=new WorkerTask(`GetOperatorList: page ${pageIndex}`);startWorkerTask(task);const start=verbosity>=_util2.VerbosityLevel.INFOS?Date.now():0;page.getOperatorList({handler,sink,task,intent:data.intent,cacheKey:data.cacheKey,annotationStorage:data.annotationStorage}).then(function(operatorListInfo){finishWorkerTask(task),start&&(0,_util2.info)(`page=${pageIndex+1} - getOperatorList: time=${Date.now()-start}ms, len=${operatorListInfo.length}`),sink.close()},function(reason){finishWorkerTask(task),!task.terminated&&(handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorOperatorList}),sink.error(reason))})})},"wphSetupRenderPage"),"wphSetupRenderPage")),handler.on("GetTextContent",__name(__name2(function(data,sink){const pageIndex=data.pageIndex;pdfManager.getPage(pageIndex).then(function(page){const task=new WorkerTask("GetTextContent: page "+pageIndex);startWorkerTask(task);const start=verbosity>=_util2.VerbosityLevel.INFOS?Date.now():0;page.extractTextContent({handler,task,sink,includeMarkedContent:data.includeMarkedContent,combineTextItems:data.combineTextItems}).then(function(){finishWorkerTask(task),start&&(0,_util2.info)(`page=${pageIndex+1} - getTextContent: time=${Date.now()-start}ms`),sink.close()},function(reason){finishWorkerTask(task),!task.terminated&&sink.error(reason)})})},"wphExtractText"),"wphExtractText")),handler.on("GetStructTree",__name(__name2(function(data){return pdfManager.getPage(data.pageIndex).then(function(page){return pdfManager.ensure(page,"getStructTree")})},"wphGetStructTree"),"wphGetStructTree")),handler.on("FontFallback",function(data){return pdfManager.fontFallback(data.id,handler)}),handler.on("Cleanup",__name(__name2(function(data){return pdfManager.cleanup(!0)},"wphCleanup"),"wphCleanup")),handler.on("Terminate",__name(__name2(function(data){terminated=!0;const waitOn=[];if(pdfManager){pdfManager.terminate(new _util2.AbortException("Worker was terminated."));const cleanupPromise=pdfManager.cleanup();waitOn.push(cleanupPromise),pdfManager=null}else(0,_cleanup_helper.clearGlobalCaches)();cancelXHRs&&cancelXHRs(new _util2.AbortException("Worker was terminated."));for(const task of WorkerTasks)waitOn.push(task.finished),task.terminate();return Promise.all(waitOn).then(function(){handler.destroy(),handler=null})},"wphTerminate"),"wphTerminate")),handler.on("Ready",__name(__name2(function(data){setupDoc(docParams),docParams=null},"wphReady"),"wphReady")),workerHandlerName}static initializeFromPort(port){const handler=new _message_handler2.MessageHandler("worker","main",port);_WorkerMessageHandler2.setup(handler,port),handler.send("ready",null)}};__name(_WorkerMessageHandler,"WorkerMessageHandler");let WorkerMessageHandler=_WorkerMessageHandler;exports3.WorkerMessageHandler=WorkerMessageHandler;function isMessagePort(maybePort){return typeof maybePort.postMessage=="function"&&"onmessage"in maybePort}__name2(isMessagePort,"isMessagePort"),__name(isMessagePort,"isMessagePort"),typeof window>"u"&&!_is_node2.isNodeJS&&typeof self<"u"&&isMessagePort(self)&&WorkerMessageHandler.initializeFromPort(self)},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.VerbosityLevel=exports3.Util=exports3.UnknownErrorException=exports3.UnexpectedResponseException=exports3.UNSUPPORTED_FEATURES=exports3.TextRenderingMode=exports3.StreamType=exports3.RenderingIntentFlag=exports3.PermissionFlag=exports3.PasswordResponses=exports3.PasswordException=exports3.PageActionEventType=exports3.OPS=exports3.MissingPDFException=exports3.LINE_FACTOR=exports3.LINE_DESCENT_FACTOR=exports3.InvalidPDFException=exports3.ImageKind=exports3.IDENTITY_MATRIX=exports3.FormatError=exports3.FontType=exports3.FeatureTest=exports3.FONT_IDENTITY_MATRIX=exports3.DocumentActionEventType=exports3.CMapCompressionType=exports3.BaseException=exports3.AnnotationType=exports3.AnnotationStateModelType=exports3.AnnotationReviewState=exports3.AnnotationReplyType=exports3.AnnotationMode=exports3.AnnotationMarkedState=exports3.AnnotationFlag=exports3.AnnotationFieldFlag=exports3.AnnotationEditorType=exports3.AnnotationEditorPrefix=exports3.AnnotationEditorParamsType=exports3.AnnotationBorderStyleType=exports3.AnnotationActionEventType=exports3.AbortException=void 0,exports3.arrayByteLength=arrayByteLength,exports3.arraysToBytes=arraysToBytes,exports3.assert=assert,exports3.bytesToString=bytesToString,exports3.createPromiseCapability=createPromiseCapability,exports3.createValidAbsoluteUrl=createValidAbsoluteUrl,exports3.escapeString=escapeString,exports3.getModificationDate=getModificationDate,exports3.getVerbosityLevel=getVerbosityLevel,exports3.info=info,exports3.isArrayBuffer=isArrayBuffer,exports3.isArrayEqual=isArrayEqual,exports3.isAscii=isAscii,exports3.objectFromMap=objectFromMap,exports3.objectSize=objectSize,exports3.setVerbosityLevel=setVerbosityLevel,exports3.shadow=shadow,exports3.string32=string32,exports3.stringToBytes=stringToBytes,exports3.stringToPDFString=stringToPDFString,exports3.stringToUTF16BEString=stringToUTF16BEString,exports3.stringToUTF8String=stringToUTF8String,exports3.unreachable=unreachable,exports3.utf8StringToString=utf8StringToString,exports3.warn=warn,__w_pdfjs_require__3(3);const IDENTITY_MATRIX=[1,0,0,1,0,0];exports3.IDENTITY_MATRIX=IDENTITY_MATRIX;const FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];exports3.FONT_IDENTITY_MATRIX=FONT_IDENTITY_MATRIX;const LINE_FACTOR=1.35;exports3.LINE_FACTOR=LINE_FACTOR;const LINE_DESCENT_FACTOR=.35;exports3.LINE_DESCENT_FACTOR=LINE_DESCENT_FACTOR;const RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};exports3.RenderingIntentFlag=RenderingIntentFlag;const AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};exports3.AnnotationMode=AnnotationMode;const AnnotationEditorPrefix="pdfjs_internal_editor_";exports3.AnnotationEditorPrefix=AnnotationEditorPrefix;const AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};exports3.AnnotationEditorType=AnnotationEditorType;const AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};exports3.AnnotationEditorParamsType=AnnotationEditorParamsType;const PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};exports3.PermissionFlag=PermissionFlag;const TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};exports3.TextRenderingMode=TextRenderingMode;const ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};exports3.ImageKind=ImageKind;const AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};exports3.AnnotationType=AnnotationType;const AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};exports3.AnnotationStateModelType=AnnotationStateModelType;const AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};exports3.AnnotationMarkedState=AnnotationMarkedState;const AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};exports3.AnnotationReviewState=AnnotationReviewState;const AnnotationReplyType={GROUP:"Group",REPLY:"R"};exports3.AnnotationReplyType=AnnotationReplyType;const AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};exports3.AnnotationFlag=AnnotationFlag;const AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};exports3.AnnotationFieldFlag=AnnotationFieldFlag;const AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};exports3.AnnotationBorderStyleType=AnnotationBorderStyleType;const AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};exports3.AnnotationActionEventType=AnnotationActionEventType;const DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};exports3.DocumentActionEventType=DocumentActionEventType;const PageActionEventType={O:"PageOpen",C:"PageClose"};exports3.PageActionEventType=PageActionEventType;const StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};exports3.StreamType=StreamType;const FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};exports3.FontType=FontType;const VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};exports3.VerbosityLevel=VerbosityLevel;const CMapCompressionType={NONE:0,BINARY:1,STREAM:2};exports3.CMapCompressionType=CMapCompressionType;const OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};exports3.OPS=OPS;const UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};exports3.UNSUPPORTED_FEATURES=UNSUPPORTED_FEATURES;const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};exports3.PasswordResponses=PasswordResponses;let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(level){Number.isInteger(level)&&(verbosity=level)}__name2(setVerbosityLevel,"setVerbosityLevel"),__name(setVerbosityLevel,"setVerbosityLevel");function getVerbosityLevel(){return verbosity}__name2(getVerbosityLevel,"getVerbosityLevel"),__name(getVerbosityLevel,"getVerbosityLevel");function info(msg){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${msg}`)}__name2(info,"info"),__name(info,"info");function warn(msg){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${msg}`)}__name2(warn,"warn"),__name(warn,"warn");function unreachable(msg){throw new Error(msg)}__name2(unreachable,"unreachable"),__name(unreachable,"unreachable");function assert(cond,msg){cond||unreachable(msg)}__name2(assert,"assert"),__name(assert,"assert");function _isValidProtocol(url){if(!url)return!1;switch(url.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}__name2(_isValidProtocol,"_isValidProtocol"),__name(_isValidProtocol,"_isValidProtocol");function createValidAbsoluteUrl(url,baseUrl=null,options=null){if(!url)return null;try{if(options&&typeof url=="string"){if(options.addDefaultProtocol&&url.startsWith("www.")){const dots=url.match(/\./g);dots&&dots.length>=2&&(url=`http://${url}`)}if(options.tryConvertEncoding)try{url=stringToUTF8String(url)}catch{}}const absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(_isValidProtocol(absoluteUrl))return absoluteUrl}catch{}return null}__name2(createValidAbsoluteUrl,"createValidAbsoluteUrl"),__name(createValidAbsoluteUrl,"createValidAbsoluteUrl");function shadow(obj,prop,value){return Object.defineProperty(obj,prop,{value,enumerable:!0,configurable:!0,writable:!1}),value}__name2(shadow,"shadow"),__name(shadow,"shadow");const BaseException=__name(__name2(function(){function BaseException2(message,name){this.constructor===BaseException2&&unreachable("Cannot initialize BaseException."),this.message=message,this.name=name}return __name2(BaseException2,"BaseException2"),__name(BaseException2,"BaseException"),BaseException2.prototype=new Error,BaseException2.constructor=BaseException2,BaseException2},"BaseExceptionClosure"),"BaseExceptionClosure")();exports3.BaseException=BaseException;const _PasswordException=class extends BaseException{static{__name2(this,"_PasswordException")}constructor(msg,code){super(msg,"PasswordException"),this.code=code}};__name(_PasswordException,"PasswordException");let PasswordException=_PasswordException;exports3.PasswordException=PasswordException;const _UnknownErrorException=class extends BaseException{static{__name2(this,"_UnknownErrorException")}constructor(msg,details){super(msg,"UnknownErrorException"),this.details=details}};__name(_UnknownErrorException,"UnknownErrorException");let UnknownErrorException=_UnknownErrorException;exports3.UnknownErrorException=UnknownErrorException;const _InvalidPDFException=class extends BaseException{static{__name2(this,"_InvalidPDFException")}constructor(msg){super(msg,"InvalidPDFException")}};__name(_InvalidPDFException,"InvalidPDFException");let InvalidPDFException=_InvalidPDFException;exports3.InvalidPDFException=InvalidPDFException;const _MissingPDFException=class extends BaseException{static{__name2(this,"_MissingPDFException")}constructor(msg){super(msg,"MissingPDFException")}};__name(_MissingPDFException,"MissingPDFException");let MissingPDFException=_MissingPDFException;exports3.MissingPDFException=MissingPDFException;const _UnexpectedResponseException=class extends BaseException{static{__name2(this,"_UnexpectedResponseException")}constructor(msg,status){super(msg,"UnexpectedResponseException"),this.status=status}};__name(_UnexpectedResponseException,"UnexpectedResponseException");let UnexpectedResponseException=_UnexpectedResponseException;exports3.UnexpectedResponseException=UnexpectedResponseException;const _FormatError=class extends BaseException{static{__name2(this,"_FormatError")}constructor(msg){super(msg,"FormatError")}};__name(_FormatError,"FormatError");let FormatError=_FormatError;exports3.FormatError=FormatError;const _AbortException=class extends BaseException{static{__name2(this,"_AbortException")}constructor(msg){super(msg,"AbortException")}};__name(_AbortException,"AbortException");let AbortException=_AbortException;exports3.AbortException=AbortException;function bytesToString(bytes){(typeof bytes!="object"||bytes===null||bytes.length===void 0)&&unreachable("Invalid argument for bytesToString");const length=bytes.length,MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT)return String.fromCharCode.apply(null,bytes);const strBuf=[];for(let i=0;i<length;i+=MAX_ARGUMENT_COUNT){const chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length),chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk))}return strBuf.join("")}__name2(bytesToString,"bytesToString"),__name(bytesToString,"bytesToString");function stringToBytes(str){typeof str!="string"&&unreachable("Invalid argument for stringToBytes");const length=str.length,bytes=new Uint8Array(length);for(let i=0;i<length;++i)bytes[i]=str.charCodeAt(i)&255;return bytes}__name2(stringToBytes,"stringToBytes"),__name(stringToBytes,"stringToBytes");function arrayByteLength(arr){if(arr.length!==void 0)return arr.length;if(arr.byteLength!==void 0)return arr.byteLength;unreachable("Invalid argument for arrayByteLength")}__name2(arrayByteLength,"arrayByteLength"),__name(arrayByteLength,"arrayByteLength");function arraysToBytes(arr){const length=arr.length;if(length===1&&arr[0]instanceof Uint8Array)return arr[0];let resultLength=0;for(let i=0;i<length;i++)resultLength+=arrayByteLength(arr[i]);let pos=0;const data=new Uint8Array(resultLength);for(let i=0;i<length;i++){let item=arr[i];item instanceof Uint8Array||(typeof item=="string"?item=stringToBytes(item):item=new Uint8Array(item));const itemLength=item.byteLength;data.set(item,pos),pos+=itemLength}return data}__name2(arraysToBytes,"arraysToBytes"),__name(arraysToBytes,"arraysToBytes");function string32(value){return String.fromCharCode(value>>24&255,value>>16&255,value>>8&255,value&255)}__name2(string32,"string32"),__name(string32,"string32");function objectSize(obj){return Object.keys(obj).length}__name2(objectSize,"objectSize"),__name(objectSize,"objectSize");function objectFromMap(map){const obj=Object.create(null);for(const[key,value]of map)obj[key]=value;return obj}__name2(objectFromMap,"objectFromMap"),__name(objectFromMap,"objectFromMap");function isLittleEndian(){const buffer8=new Uint8Array(4);return buffer8[0]=1,new Uint32Array(buffer8.buffer,0,1)[0]===1}__name2(isLittleEndian,"isLittleEndian"),__name(isLittleEndian,"isLittleEndian");function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}__name2(isEvalSupported,"isEvalSupported"),__name(isEvalSupported,"isEvalSupported");const _FeatureTest=class{static{__name2(this,"_FeatureTest")}static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};__name(_FeatureTest,"FeatureTest");let FeatureTest=_FeatureTest;exports3.FeatureTest=FeatureTest;const hexNumbers=[...Array(256).keys()].map(n=>n.toString(16).padStart(2,"0")),_Util=class _Util2{static{__name2(this,"_Util")}static makeHexColor(r,g,b){return`#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`}static scaleMinMax(transform,minMax){let temp;transform[0]?(transform[0]<0&&(temp=minMax[0],minMax[0]=minMax[1],minMax[1]=temp),minMax[0]*=transform[0],minMax[1]*=transform[0],transform[3]<0&&(temp=minMax[2],minMax[2]=minMax[3],minMax[3]=temp),minMax[2]*=transform[3],minMax[3]*=transform[3]):(temp=minMax[0],minMax[0]=minMax[2],minMax[2]=temp,temp=minMax[1],minMax[1]=minMax[3],minMax[3]=temp,transform[1]<0&&(temp=minMax[2],minMax[2]=minMax[3],minMax[3]=temp),minMax[2]*=transform[1],minMax[3]*=transform[1],transform[2]<0&&(temp=minMax[0],minMax[0]=minMax[1],minMax[1]=temp),minMax[0]*=transform[2],minMax[1]*=transform[2]),minMax[0]+=transform[4],minMax[1]+=transform[4],minMax[2]+=transform[5],minMax[3]+=transform[5]}static transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]]}static applyTransform(p,m){const xt=p[0]*m[0]+p[1]*m[2]+m[4],yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt]}static applyInverseTransform(p,m){const d=m[0]*m[3]-m[1]*m[2],xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d,yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt]}static getAxialAlignedBoundingBox(r,m){const p1=_Util2.applyTransform(r,m),p2=_Util2.applyTransform(r.slice(2,4),m),p3=_Util2.applyTransform([r[0],r[3]],m),p4=_Util2.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])]}static inverseTransform(m){const d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d]}static apply3dTransform(m,v){return[m[0]*v[0]+m[1]*v[1]+m[2]*v[2],m[3]*v[0]+m[4]*v[1]+m[5]*v[2],m[6]*v[0]+m[7]*v[1]+m[8]*v[2]]}static singularValueDecompose2dScale(m){const transpose=[m[0],m[2],m[1],m[3]],a=m[0]*transpose[0]+m[1]*transpose[2],b=m[0]*transpose[1]+m[1]*transpose[3],c=m[2]*transpose[0]+m[3]*transpose[2],d=m[2]*transpose[1]+m[3]*transpose[3],first=(a+d)/2,second=Math.sqrt((a+d)**2-4*(a*d-c*b))/2,sx=first+second||1,sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)]}static normalizeRect(rect){const r=rect.slice(0);return rect[0]>rect[2]&&(r[0]=rect[2],r[2]=rect[0]),rect[1]>rect[3]&&(r[1]=rect[3],r[3]=rect[1]),r}static intersect(rect1,rect2){const xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2])),xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh)return null;const yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3])),yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));return yLow>yHigh?null:[xLow,yLow,xHigh,yHigh]}static bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3){const tvalues=[],bounds=[[],[]];let a,b,c,t,t1,t2,b2ac,sqrtb2ac;for(let i=0;i<2;++i){if(i===0?(b=6*x0-12*x1+6*x2,a=-3*x0+9*x1-9*x2+3*x3,c=3*x1-3*x0):(b=6*y0-12*y1+6*y2,a=-3*y0+9*y1-9*y2+3*y3,c=3*y1-3*y0),Math.abs(a)<1e-12){if(Math.abs(b)<1e-12)continue;t=-c/b,0<t&&t<1&&tvalues.push(t);continue}b2ac=b*b-4*c*a,sqrtb2ac=Math.sqrt(b2ac),!(b2ac<0)&&(t1=(-b+sqrtb2ac)/(2*a),0<t1&&t1<1&&tvalues.push(t1),t2=(-b-sqrtb2ac)/(2*a),0<t2&&t2<1&&tvalues.push(t2))}let j=tvalues.length,mt;const jlen=j;for(;j--;)t=tvalues[j],mt=1-t,bounds[0][j]=mt*mt*mt*x0+3*mt*mt*t*x1+3*mt*t*t*x2+t*t*t*x3,bounds[1][j]=mt*mt*mt*y0+3*mt*mt*t*y1+3*mt*t*t*y2+t*t*t*y3;return bounds[0][jlen]=x0,bounds[1][jlen]=y0,bounds[0][jlen+1]=x3,bounds[1][jlen+1]=y3,bounds[0].length=bounds[1].length=jlen+2,[Math.min(...bounds[0]),Math.min(...bounds[1]),Math.max(...bounds[0]),Math.max(...bounds[1])]}};__name(_Util,"Util");let Util=_Util;exports3.Util=Util;const PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToPDFString(str){if(str[0]>="\xEF"){let encoding;if(str[0]==="\xFE"&&str[1]==="\xFF"?encoding="utf-16be":str[0]==="\xFF"&&str[1]==="\xFE"?encoding="utf-16le":str[0]==="\xEF"&&str[1]==="\xBB"&&str[2]==="\xBF"&&(encoding="utf-8"),encoding)try{const decoder=new TextDecoder(encoding,{fatal:!0}),buffer=stringToBytes(str);return decoder.decode(buffer)}catch(ex){warn(`stringToPDFString: "${ex}".`)}}const strBuf=[];for(let i=0,ii=str.length;i<ii;i++){const code=PDFStringTranslateTable[str.charCodeAt(i)];strBuf.push(code?String.fromCharCode(code):str.charAt(i))}return strBuf.join("")}__name2(stringToPDFString,"stringToPDFString"),__name(stringToPDFString,"stringToPDFString");function escapeString(str){return str.replace(/([()\\\n\r])/g,match=>match===`
`?"\\n":match==="\r"?"\\r":`\\${match}`)}__name2(escapeString,"escapeString"),__name(escapeString,"escapeString");function isAscii(str){return/^[\x00-\x7F]*$/.test(str)}__name2(isAscii,"isAscii"),__name(isAscii,"isAscii");function stringToUTF16BEString(str){const buf=["\xFE\xFF"];for(let i=0,ii=str.length;i<ii;i++){const char=str.charCodeAt(i);buf.push(String.fromCharCode(char>>8&255),String.fromCharCode(char&255))}return buf.join("")}__name2(stringToUTF16BEString,"stringToUTF16BEString"),__name(stringToUTF16BEString,"stringToUTF16BEString");function stringToUTF8String(str){return decodeURIComponent(escape(str))}__name2(stringToUTF8String,"stringToUTF8String"),__name(stringToUTF8String,"stringToUTF8String");function utf8StringToString(str){return unescape(encodeURIComponent(str))}__name2(utf8StringToString,"utf8StringToString"),__name(utf8StringToString,"utf8StringToString");function isArrayBuffer(v){return typeof v=="object"&&v!==null&&v.byteLength!==void 0}__name2(isArrayBuffer,"isArrayBuffer"),__name(isArrayBuffer,"isArrayBuffer");function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length)return!1;for(let i=0,ii=arr1.length;i<ii;i++)if(arr1[i]!==arr2[i])return!1;return!0}__name2(isArrayEqual,"isArrayEqual"),__name(isArrayEqual,"isArrayEqual");function getModificationDate(date=new Date){return[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,"0"),date.getUTCDate().toString().padStart(2,"0"),date.getUTCHours().toString().padStart(2,"0"),date.getUTCMinutes().toString().padStart(2,"0"),date.getUTCSeconds().toString().padStart(2,"0")].join("")}__name2(getModificationDate,"getModificationDate"),__name(getModificationDate,"getModificationDate");function createPromiseCapability(){const capability=Object.create(null);let isSettled=!1;return Object.defineProperty(capability,"settled",{get(){return isSettled}}),capability.promise=new Promise(function(resolve,reject){capability.resolve=function(data){isSettled=!0,resolve(data)},capability.reject=function(reason){isSettled=!0,reject(reason)}}),capability}__name2(createPromiseCapability,"createPromiseCapability"),__name(createPromiseCapability,"createPromiseCapability")},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__3)=>{__w_pdfjs_require__3(4)},(__unused_webpack_module2,exports3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.isNodeJS=void 0;const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");exports3.isNodeJS=isNodeJS},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.RefSetCache=exports3.RefSet=exports3.Ref=exports3.Name=exports3.EOF=exports3.Dict=exports3.Cmd=exports3.CIRCULAR_REF=void 0,exports3.clearPrimitiveCaches=clearPrimitiveCaches,exports3.isCmd=isCmd,exports3.isDict=isDict,exports3.isName=isName,exports3.isRefsEqual=isRefsEqual;var _util2=__w_pdfjs_require__3(2);const CIRCULAR_REF=Symbol("CIRCULAR_REF");exports3.CIRCULAR_REF=CIRCULAR_REF;const EOF=Symbol("EOF");exports3.EOF=EOF;const Name=__name(__name2(function(){let nameCache=Object.create(null);const _Name=class _Name2{static{__name2(this,"_Name")}constructor(name){this.name=name}static get(name){return nameCache[name]||(nameCache[name]=new _Name2(name))}static _clearCache(){nameCache=Object.create(null)}};return __name(_Name,"Name"),_Name},"NameClosure"),"NameClosure")();exports3.Name=Name;const Cmd=__name(__name2(function(){let cmdCache=Object.create(null);const _Cmd=class _Cmd2{static{__name2(this,"_Cmd")}constructor(cmd){this.cmd=cmd}static get(cmd){return cmdCache[cmd]||(cmdCache[cmd]=new _Cmd2(cmd))}static _clearCache(){cmdCache=Object.create(null)}};return __name(_Cmd,"Cmd"),_Cmd},"CmdClosure"),"CmdClosure")();exports3.Cmd=Cmd;const nonSerializable=__name(__name2(function(){return nonSerializable},"nonSerializableClosure"),"nonSerializableClosure"),_Dict=class _Dict2{static{__name2(this,"_Dict")}constructor(xref=null){this._map=Object.create(null),this.xref=xref,this.objId=null,this.suppressEncryption=!1,this.__nonSerializable__=nonSerializable}assignXref(newXref){this.xref=newXref}get size(){return Object.keys(this._map).length}get(key1,key2,key3){let value=this._map[key1];return value===void 0&&key2!==void 0&&(value=this._map[key2],value===void 0&&key3!==void 0&&(value=this._map[key3])),value instanceof Ref&&this.xref?this.xref.fetch(value,this.suppressEncryption):value}async getAsync(key1,key2,key3){let value=this._map[key1];return value===void 0&&key2!==void 0&&(value=this._map[key2],value===void 0&&key3!==void 0&&(value=this._map[key3])),value instanceof Ref&&this.xref?this.xref.fetchAsync(value,this.suppressEncryption):value}getArray(key1,key2,key3){let value=this._map[key1];if(value===void 0&&key2!==void 0&&(value=this._map[key2],value===void 0&&key3!==void 0&&(value=this._map[key3])),value instanceof Ref&&this.xref&&(value=this.xref.fetch(value,this.suppressEncryption)),Array.isArray(value)){value=value.slice();for(let i=0,ii=value.length;i<ii;i++)value[i]instanceof Ref&&this.xref&&(value[i]=this.xref.fetch(value[i],this.suppressEncryption))}return value}getRaw(key){return this._map[key]}getKeys(){return Object.keys(this._map)}getRawValues(){return Object.values(this._map)}set(key,value){this._map[key]=value}has(key){return this._map[key]!==void 0}forEach(callback){for(const key in this._map)callback(key,this.get(key))}static get empty(){const emptyDict=new _Dict2(null);return emptyDict.set=(key,value)=>{(0,_util2.unreachable)("Should not call `set` on the empty dictionary.")},(0,_util2.shadow)(this,"empty",emptyDict)}static merge({xref,dictArray,mergeSubDicts=!1}){const mergedDict=new _Dict2(xref),properties=new Map;for(const dict of dictArray)if(dict instanceof _Dict2)for(const[key,value]of Object.entries(dict._map)){let property=properties.get(key);if(property===void 0)property=[],properties.set(key,property);else if(!mergeSubDicts||!(value instanceof _Dict2))continue;property.push(value)}for(const[name,values]of properties){if(values.length===1||!(values[0]instanceof _Dict2)){mergedDict._map[name]=values[0];continue}const subDict=new _Dict2(xref);for(const dict of values)for(const[key,value]of Object.entries(dict._map))subDict._map[key]===void 0&&(subDict._map[key]=value);subDict.size>0&&(mergedDict._map[name]=subDict)}return properties.clear(),mergedDict.size>0?mergedDict:_Dict2.empty}};__name(_Dict,"Dict");let Dict=_Dict;exports3.Dict=Dict;const Ref=__name(__name2(function(){let refCache=Object.create(null);const _Ref=class _Ref2{static{__name2(this,"_Ref")}constructor(num,gen){this.num=num,this.gen=gen}toString(){return this.gen===0?`${this.num}R`:`${this.num}R${this.gen}`}static get(num,gen){const key=gen===0?`${num}R`:`${num}R${gen}`;return refCache[key]||(refCache[key]=new _Ref2(num,gen))}static _clearCache(){refCache=Object.create(null)}};return __name(_Ref,"Ref"),_Ref},"RefClosure"),"RefClosure")();exports3.Ref=Ref;const _RefSet=class{static{__name2(this,"_RefSet")}constructor(parent=null){this._set=new Set(parent&&parent._set)}has(ref){return this._set.has(ref.toString())}put(ref){this._set.add(ref.toString())}remove(ref){this._set.delete(ref.toString())}[Symbol.iterator](){return this._set.values()}clear(){this._set.clear()}};__name(_RefSet,"RefSet");let RefSet=_RefSet;exports3.RefSet=RefSet;const _RefSetCache=class{static{__name2(this,"_RefSetCache")}constructor(){this._map=new Map}get size(){return this._map.size}get(ref){return this._map.get(ref.toString())}has(ref){return this._map.has(ref.toString())}put(ref,obj){this._map.set(ref.toString(),obj)}putAlias(ref,aliasRef){this._map.set(ref.toString(),this.get(aliasRef))}[Symbol.iterator](){return this._map.values()}clear(){this._map.clear()}};__name(_RefSetCache,"RefSetCache");let RefSetCache=_RefSetCache;exports3.RefSetCache=RefSetCache;function isName(v,name){return v instanceof Name&&(name===void 0||v.name===name)}__name2(isName,"isName"),__name(isName,"isName");function isCmd(v,cmd){return v instanceof Cmd&&(cmd===void 0||v.cmd===cmd)}__name2(isCmd,"isCmd"),__name(isCmd,"isCmd");function isDict(v,type){return v instanceof Dict&&(type===void 0||isName(v.get("Type"),type))}__name2(isDict,"isDict"),__name(isDict,"isDict");function isRefsEqual(v1,v2){return v1.num===v2.num&&v1.gen===v2.gen}__name2(isRefsEqual,"isRefsEqual"),__name(isRefsEqual,"isRefsEqual");function clearPrimitiveCaches(){Cmd._clearCache(),Name._clearCache(),Ref._clearCache()}__name2(clearPrimitiveCaches,"clearPrimitiveCaches"),__name(clearPrimitiveCaches,"clearPrimitiveCaches")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.XRefParseException=exports3.XRefEntryException=exports3.ParserEOFException=exports3.MissingDataException=exports3.DocStats=void 0,exports3.collectActions=collectActions,exports3.encodeToXmlString=encodeToXmlString,exports3.escapePDFName=escapePDFName,exports3.getArrayLookupTableFactory=getArrayLookupTableFactory,exports3.getInheritableProperty=getInheritableProperty,exports3.getLookupTableFactory=getLookupTableFactory,exports3.getNewAnnotationsMap=getNewAnnotationsMap,exports3.isWhiteSpace=isWhiteSpace,exports3.log2=log2,exports3.numberToString=numberToString,exports3.parseXFAPath=parseXFAPath,exports3.readInt8=readInt8,exports3.readUint16=readUint16,exports3.readUint32=readUint32,exports3.recoverJsURL=recoverJsURL,exports3.toRomanNumerals=toRomanNumerals,exports3.validateCSSFont=validateCSSFont;var _util2=__w_pdfjs_require__3(2),_primitives=__w_pdfjs_require__3(5),_base_stream=__w_pdfjs_require__3(7);function getLookupTableFactory(initializer){let lookup;return function(){return initializer&&(lookup=Object.create(null),initializer(lookup),initializer=null),lookup}}__name2(getLookupTableFactory,"getLookupTableFactory"),__name(getLookupTableFactory,"getLookupTableFactory");function getArrayLookupTableFactory(initializer){let lookup;return function(){if(initializer){let arr=initializer();initializer=null,lookup=Object.create(null);for(let i=0,ii=arr.length;i<ii;i+=2)lookup[arr[i]]=arr[i+1];arr=null}return lookup}}__name2(getArrayLookupTableFactory,"getArrayLookupTableFactory"),__name(getArrayLookupTableFactory,"getArrayLookupTableFactory");const _MissingDataException=class extends _util2.BaseException{static{__name2(this,"_MissingDataException")}constructor(begin,end){super(`Missing data [${begin}, ${end})`,"MissingDataException"),this.begin=begin,this.end=end}};__name(_MissingDataException,"MissingDataException");let MissingDataException=_MissingDataException;exports3.MissingDataException=MissingDataException;const _ParserEOFException=class extends _util2.BaseException{static{__name2(this,"_ParserEOFException")}constructor(msg){super(msg,"ParserEOFException")}};__name(_ParserEOFException,"ParserEOFException");let ParserEOFException=_ParserEOFException;exports3.ParserEOFException=ParserEOFException;const _XRefEntryException=class extends _util2.BaseException{static{__name2(this,"_XRefEntryException")}constructor(msg){super(msg,"XRefEntryException")}};__name(_XRefEntryException,"XRefEntryException");let XRefEntryException=_XRefEntryException;exports3.XRefEntryException=XRefEntryException;const _XRefParseException=class extends _util2.BaseException{static{__name2(this,"_XRefParseException")}constructor(msg){super(msg,"XRefParseException")}};__name(_XRefParseException,"XRefParseException");let XRefParseException=_XRefParseException;exports3.XRefParseException=XRefParseException;const _DocStats=class{static{__name2(this,"_DocStats")}constructor(handler){this._handler=handler,this._streamTypes=new Set,this._fontTypes=new Set}_send(){const streamTypes=Object.create(null),fontTypes=Object.create(null);for(const type of this._streamTypes)streamTypes[type]=!0;for(const type of this._fontTypes)fontTypes[type]=!0;this._handler.send("DocStats",{streamTypes,fontTypes})}addStreamType(type){this._streamTypes.has(type)||(this._streamTypes.add(type),this._send())}addFontType(type){this._fontTypes.has(type)||(this._fontTypes.add(type),this._send())}};__name(_DocStats,"DocStats");let DocStats=_DocStats;exports3.DocStats=DocStats;function getInheritableProperty({dict,key,getArray=!1,stopWhenFound=!0}){let values;const visited=new _primitives.RefSet;for(;dict instanceof _primitives.Dict&&!(dict.objId&&visited.has(dict.objId));){dict.objId&&visited.put(dict.objId);const value=getArray?dict.getArray(key):dict.get(key);if(value!==void 0){if(stopWhenFound)return value;values||(values=[]),values.push(value)}dict=dict.get("Parent")}return values}__name2(getInheritableProperty,"getInheritableProperty"),__name(getInheritableProperty,"getInheritableProperty");const ROMAN_NUMBER_MAP=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function toRomanNumerals(number,lowerCase=!1){(0,_util2.assert)(Number.isInteger(number)&&number>0,"The number should be a positive integer.");const romanBuf=[];let pos;for(;number>=1e3;)number-=1e3,romanBuf.push("M");pos=number/100|0,number%=100,romanBuf.push(ROMAN_NUMBER_MAP[pos]),pos=number/10|0,number%=10,romanBuf.push(ROMAN_NUMBER_MAP[10+pos]),romanBuf.push(ROMAN_NUMBER_MAP[20+number]);const romanStr=romanBuf.join("");return lowerCase?romanStr.toLowerCase():romanStr}__name2(toRomanNumerals,"toRomanNumerals"),__name(toRomanNumerals,"toRomanNumerals");function log2(x){return x<=0?0:Math.ceil(Math.log2(x))}__name2(log2,"log2"),__name(log2,"log2");function readInt8(data,offset){return data[offset]<<24>>24}__name2(readInt8,"readInt8"),__name(readInt8,"readInt8");function readUint16(data,offset){return data[offset]<<8|data[offset+1]}__name2(readUint16,"readUint16"),__name(readUint16,"readUint16");function readUint32(data,offset){return(data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3])>>>0}__name2(readUint32,"readUint32"),__name(readUint32,"readUint32");function isWhiteSpace(ch){return ch===32||ch===9||ch===13||ch===10}__name2(isWhiteSpace,"isWhiteSpace"),__name(isWhiteSpace,"isWhiteSpace");function parseXFAPath(path){const positionPattern=/(.+)\[(\d+)\]$/;return path.split(".").map(component=>{const m=component.match(positionPattern);return m?{name:m[1],pos:parseInt(m[2],10)}:{name:component,pos:0}})}__name2(parseXFAPath,"parseXFAPath"),__name(parseXFAPath,"parseXFAPath");function escapePDFName(str){const buffer=[];let start=0;for(let i=0,ii=str.length;i<ii;i++){const char=str.charCodeAt(i);(char<33||char>126||char===35||char===40||char===41||char===60||char===62||char===91||char===93||char===123||char===125||char===47||char===37)&&(start<i&&buffer.push(str.substring(start,i)),buffer.push(`#${char.toString(16)}`),start=i+1)}return buffer.length===0?str:(start<str.length&&buffer.push(str.substring(start,str.length)),buffer.join(""))}__name2(escapePDFName,"escapePDFName"),__name(escapePDFName,"escapePDFName");function _collectJS(entry,xref,list,parents){if(!entry)return;let parent=null;if(entry instanceof _primitives.Ref){if(parents.has(entry))return;parent=entry,parents.put(parent),entry=xref.fetch(entry)}if(Array.isArray(entry))for(const element of entry)_collectJS(element,xref,list,parents);else if(entry instanceof _primitives.Dict){if((0,_primitives.isName)(entry.get("S"),"JavaScript")){const js=entry.get("JS");let code;js instanceof _base_stream.BaseStream?code=js.getString():typeof js=="string"&&(code=js),code=code&&(0,_util2.stringToPDFString)(code).replace(/\u0000/g,""),code&&list.push(code)}_collectJS(entry.getRaw("Next"),xref,list,parents)}parent&&parents.remove(parent)}__name2(_collectJS,"_collectJS"),__name(_collectJS,"_collectJS");function collectActions(xref,dict,eventType){const actions=Object.create(null),additionalActionsDicts=getInheritableProperty({dict,key:"AA",stopWhenFound:!1});if(additionalActionsDicts)for(let i=additionalActionsDicts.length-1;i>=0;i--){const additionalActions=additionalActionsDicts[i];if(additionalActions instanceof _primitives.Dict)for(const key of additionalActions.getKeys()){const action=eventType[key];if(!action)continue;const actionDict=additionalActions.getRaw(key),parents=new _primitives.RefSet,list=[];_collectJS(actionDict,xref,list,parents),list.length>0&&(actions[action]=list)}}if(dict.has("A")){const actionDict=dict.get("A"),parents=new _primitives.RefSet,list=[];_collectJS(actionDict,xref,list,parents),list.length>0&&(actions.Action=list)}return(0,_util2.objectSize)(actions)>0?actions:null}__name2(collectActions,"collectActions"),__name(collectActions,"collectActions");const XMLEntities={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"};function encodeToXmlString(str){const buffer=[];let start=0;for(let i=0,ii=str.length;i<ii;i++){const char=str.codePointAt(i);if(32<=char&&char<=126){const entity=XMLEntities[char];entity&&(start<i&&buffer.push(str.substring(start,i)),buffer.push(entity),start=i+1)}else start<i&&buffer.push(str.substring(start,i)),buffer.push(`&#x${char.toString(16).toUpperCase()};`),char>55295&&(char<57344||char>65533)&&i++,start=i+1}return buffer.length===0?str:(start<str.length&&buffer.push(str.substring(start,str.length)),buffer.join(""))}__name2(encodeToXmlString,"encodeToXmlString"),__name(encodeToXmlString,"encodeToXmlString");function validateCSSFont(cssFontInfo){const DEFAULT_CSS_FONT_OBLIQUE="14",DEFAULT_CSS_FONT_WEIGHT="400",CSS_FONT_WEIGHT_VALUES=new Set(["100","200","300","400","500","600","700","800","900","1000","normal","bold","bolder","lighter"]),{fontFamily,fontWeight,italicAngle}=cssFontInfo;if(/^".*"$/.test(fontFamily)){if(/[^\\]"/.test(fontFamily.slice(1,fontFamily.length-1)))return(0,_util2.warn)(`XFA - FontFamily contains some unescaped ": ${fontFamily}.`),!1}else if(/^'.*'$/.test(fontFamily)){if(/[^\\]'/.test(fontFamily.slice(1,fontFamily.length-1)))return(0,_util2.warn)(`XFA - FontFamily contains some unescaped ': ${fontFamily}.`),!1}else for(const ident of fontFamily.split(/[ \t]+/))if(/^(\d|(-(\d|-)))/.test(ident)||!/^[\w-\\]+$/.test(ident))return(0,_util2.warn)(`XFA - FontFamily contains some invalid <custom-ident>: ${fontFamily}.`),!1;const weight=fontWeight?fontWeight.toString():"";cssFontInfo.fontWeight=CSS_FONT_WEIGHT_VALUES.has(weight)?weight:DEFAULT_CSS_FONT_WEIGHT;const angle=parseFloat(italicAngle);return cssFontInfo.italicAngle=isNaN(angle)||angle<-90||angle>90?DEFAULT_CSS_FONT_OBLIQUE:italicAngle.toString(),!0}__name2(validateCSSFont,"validateCSSFont"),__name(validateCSSFont,"validateCSSFont");function recoverJsURL(str){const URL_OPEN_METHODS=["app.launchURL","window.open","xfa.host.gotoURL"],jsUrl=new RegExp("^\\s*("+URL_OPEN_METHODS.join("|").split(".").join("\\.")+`)\\((?:'|")([^'"]*)(?:'|")(?:,\\s*(\\w+)\\)|\\))`,"i").exec(str);if(jsUrl&&jsUrl[2]){const url=jsUrl[2];let newWindow=!1;return jsUrl[3]==="true"&&jsUrl[1]==="app.launchURL"&&(newWindow=!0),{url,newWindow}}return null}__name2(recoverJsURL,"recoverJsURL"),__name(recoverJsURL,"recoverJsURL");function numberToString(value){if(Number.isInteger(value))return value.toString();const roundedValue=Math.round(value*100);return roundedValue%100===0?(roundedValue/100).toString():roundedValue%10===0?value.toFixed(1):value.toFixed(2)}__name2(numberToString,"numberToString"),__name(numberToString,"numberToString");function getNewAnnotationsMap(annotationStorage){if(!annotationStorage)return null;const newAnnotationsByPage=new Map;for(const[key,value]of annotationStorage){if(!key.startsWith(_util2.AnnotationEditorPrefix))continue;let annotations=newAnnotationsByPage.get(value.pageIndex);annotations||(annotations=[],newAnnotationsByPage.set(value.pageIndex,annotations)),annotations.push(value)}return newAnnotationsByPage.size>0?newAnnotationsByPage:null}__name2(getNewAnnotationsMap,"getNewAnnotationsMap"),__name(getNewAnnotationsMap,"getNewAnnotationsMap")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.BaseStream=void 0;var _util2=__w_pdfjs_require__3(2);const _BaseStream=class _BaseStream2{static{__name2(this,"_BaseStream")}constructor(){this.constructor===_BaseStream2&&(0,_util2.unreachable)("Cannot initialize BaseStream.")}get length(){(0,_util2.unreachable)("Abstract getter `length` accessed")}get isEmpty(){(0,_util2.unreachable)("Abstract getter `isEmpty` accessed")}get isDataLoaded(){return(0,_util2.shadow)(this,"isDataLoaded",!0)}getByte(){(0,_util2.unreachable)("Abstract method `getByte` called")}getBytes(length){(0,_util2.unreachable)("Abstract method `getBytes` called")}peekByte(){const peekedByte=this.getByte();return peekedByte!==-1&&this.pos--,peekedByte}peekBytes(length){const bytes=this.getBytes(length);return this.pos-=bytes.length,bytes}getUint16(){const b0=this.getByte(),b1=this.getByte();return b0===-1||b1===-1?-1:(b0<<8)+b1}getInt32(){const b0=this.getByte(),b1=this.getByte(),b2=this.getByte(),b3=this.getByte();return(b0<<24)+(b1<<16)+(b2<<8)+b3}getByteRange(begin,end){(0,_util2.unreachable)("Abstract method `getByteRange` called")}getString(length){return(0,_util2.bytesToString)(this.getBytes(length))}skip(n){this.pos+=n||1}reset(){(0,_util2.unreachable)("Abstract method `reset` called")}moveStart(){(0,_util2.unreachable)("Abstract method `moveStart` called")}makeSubStream(start,length,dict=null){(0,_util2.unreachable)("Abstract method `makeSubStream` called")}getBaseStreams(){return null}};__name(_BaseStream,"BaseStream");let BaseStream=_BaseStream;exports3.BaseStream=BaseStream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.NetworkPdfManager=exports3.LocalPdfManager=void 0;var _util2=__w_pdfjs_require__3(2),_chunked_stream=__w_pdfjs_require__3(9),_core_utils=__w_pdfjs_require__3(6),_document2=__w_pdfjs_require__3(11),_stream=__w_pdfjs_require__3(10);function parseDocBaseUrl(url){if(url){const absoluteUrl=(0,_util2.createValidAbsoluteUrl)(url);if(absoluteUrl)return absoluteUrl.href;(0,_util2.warn)(`Invalid absolute docBaseUrl: "${url}".`)}return null}__name2(parseDocBaseUrl,"parseDocBaseUrl"),__name(parseDocBaseUrl,"parseDocBaseUrl");const _BasePdfManager=class _BasePdfManager2{static{__name2(this,"_BasePdfManager")}constructor(){this.constructor===_BasePdfManager2&&(0,_util2.unreachable)("Cannot initialize BasePdfManager.")}get docId(){return this._docId}get password(){return this._password}get docBaseUrl(){const catalog=this.pdfDocument.catalog;return(0,_util2.shadow)(this,"docBaseUrl",catalog.baseUrl||this._docBaseUrl)}onLoadedStream(){(0,_util2.unreachable)("Abstract method `onLoadedStream` called")}ensureDoc(prop,args){return this.ensure(this.pdfDocument,prop,args)}ensureXRef(prop,args){return this.ensure(this.pdfDocument.xref,prop,args)}ensureCatalog(prop,args){return this.ensure(this.pdfDocument.catalog,prop,args)}getPage(pageIndex){return this.pdfDocument.getPage(pageIndex)}fontFallback(id,handler){return this.pdfDocument.fontFallback(id,handler)}loadXfaFonts(handler,task){return this.pdfDocument.loadXfaFonts(handler,task)}loadXfaImages(){return this.pdfDocument.loadXfaImages()}serializeXfaData(annotationStorage){return this.pdfDocument.serializeXfaData(annotationStorage)}cleanup(manuallyTriggered=!1){return this.pdfDocument.cleanup(manuallyTriggered)}async ensure(obj,prop,args){(0,_util2.unreachable)("Abstract method `ensure` called")}requestRange(begin,end){(0,_util2.unreachable)("Abstract method `requestRange` called")}requestLoadedStream(){(0,_util2.unreachable)("Abstract method `requestLoadedStream` called")}sendProgressiveData(chunk){(0,_util2.unreachable)("Abstract method `sendProgressiveData` called")}updatePassword(password){this._password=password}terminate(reason){(0,_util2.unreachable)("Abstract method `terminate` called")}};__name(_BasePdfManager,"BasePdfManager");let BasePdfManager=_BasePdfManager;const _LocalPdfManager=class extends BasePdfManager{static{__name2(this,"_LocalPdfManager")}constructor(docId,data,password,msgHandler,evaluatorOptions,enableXfa,docBaseUrl){super(),this._docId=docId,this._password=password,this._docBaseUrl=parseDocBaseUrl(docBaseUrl),this.msgHandler=msgHandler,this.evaluatorOptions=evaluatorOptions,this.enableXfa=enableXfa;const stream=new _stream.Stream(data);this.pdfDocument=new _document2.PDFDocument(this,stream),this._loadedStreamPromise=Promise.resolve(stream)}async ensure(obj,prop,args){const value=obj[prop];return typeof value=="function"?value.apply(obj,args):value}requestRange(begin,end){return Promise.resolve()}requestLoadedStream(){}onLoadedStream(){return this._loadedStreamPromise}terminate(reason){}};__name(_LocalPdfManager,"LocalPdfManager");let LocalPdfManager=_LocalPdfManager;exports3.LocalPdfManager=LocalPdfManager;const _NetworkPdfManager=class extends BasePdfManager{static{__name2(this,"_NetworkPdfManager")}constructor(docId,pdfNetworkStream,args,evaluatorOptions,enableXfa,docBaseUrl){super(),this._docId=docId,this._password=args.password,this._docBaseUrl=parseDocBaseUrl(docBaseUrl),this.msgHandler=args.msgHandler,this.evaluatorOptions=evaluatorOptions,this.enableXfa=enableXfa,this.streamManager=new _chunked_stream.ChunkedStreamManager(pdfNetworkStream,{msgHandler:args.msgHandler,length:args.length,disableAutoFetch:args.disableAutoFetch,rangeChunkSize:args.rangeChunkSize}),this.pdfDocument=new _document2.PDFDocument(this,this.streamManager.getStream())}async ensure(obj,prop,args){try{const value=obj[prop];return typeof value=="function"?value.apply(obj,args):value}catch(ex){if(!(ex instanceof _core_utils.MissingDataException))throw ex;return await this.requestRange(ex.begin,ex.end),this.ensure(obj,prop,args)}}requestRange(begin,end){return this.streamManager.requestRange(begin,end)}requestLoadedStream(){this.streamManager.requestAllChunks()}sendProgressiveData(chunk){this.streamManager.onReceiveData({chunk})}onLoadedStream(){return this.streamManager.onLoadedStream()}terminate(reason){this.streamManager.abort(reason)}};__name(_NetworkPdfManager,"NetworkPdfManager");let NetworkPdfManager=_NetworkPdfManager;exports3.NetworkPdfManager=NetworkPdfManager},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.ChunkedStreamManager=exports3.ChunkedStream=void 0;var _util2=__w_pdfjs_require__3(2),_core_utils=__w_pdfjs_require__3(6),_stream=__w_pdfjs_require__3(10);const _ChunkedStream=class extends _stream.Stream{static{__name2(this,"_ChunkedStream")}constructor(length,chunkSize,manager){super(new Uint8Array(length),0,length,null),this.chunkSize=chunkSize,this._loadedChunks=new Set,this.numChunks=Math.ceil(length/chunkSize),this.manager=manager,this.progressiveDataLength=0,this.lastSuccessfulEnsureByteChunk=-1}getMissingChunks(){const chunks=[];for(let chunk=0,n=this.numChunks;chunk<n;++chunk)this._loadedChunks.has(chunk)||chunks.push(chunk);return chunks}get numChunksLoaded(){return this._loadedChunks.size}get isDataLoaded(){return this.numChunksLoaded===this.numChunks}onReceiveData(begin,chunk){const chunkSize=this.chunkSize;if(begin%chunkSize!==0)throw new Error(`Bad begin offset: ${begin}`);const end=begin+chunk.byteLength;if(end%chunkSize!==0&&end!==this.bytes.length)throw new Error(`Bad end offset: ${end}`);this.bytes.set(new Uint8Array(chunk),begin);const beginChunk=Math.floor(begin/chunkSize),endChunk=Math.floor((end-1)/chunkSize)+1;for(let curChunk=beginChunk;curChunk<endChunk;++curChunk)this._loadedChunks.add(curChunk)}onReceiveProgressiveData(data){let position=this.progressiveDataLength;const beginChunk=Math.floor(position/this.chunkSize);this.bytes.set(new Uint8Array(data),position),position+=data.byteLength,this.progressiveDataLength=position;const endChunk=position>=this.end?this.numChunks:Math.floor(position/this.chunkSize);for(let curChunk=beginChunk;curChunk<endChunk;++curChunk)this._loadedChunks.add(curChunk)}ensureByte(pos){if(pos<this.progressiveDataLength)return;const chunk=Math.floor(pos/this.chunkSize);if(!(chunk>this.numChunks)&&chunk!==this.lastSuccessfulEnsureByteChunk){if(!this._loadedChunks.has(chunk))throw new _core_utils.MissingDataException(pos,pos+1);this.lastSuccessfulEnsureByteChunk=chunk}}ensureRange(begin,end){if(begin>=end||end<=this.progressiveDataLength)return;const beginChunk=Math.floor(begin/this.chunkSize);if(beginChunk>this.numChunks)return;const endChunk=Math.min(Math.floor((end-1)/this.chunkSize)+1,this.numChunks);for(let chunk=beginChunk;chunk<endChunk;++chunk)if(!this._loadedChunks.has(chunk))throw new _core_utils.MissingDataException(begin,end)}nextEmptyChunk(beginChunk){const numChunks=this.numChunks;for(let i=0;i<numChunks;++i){const chunk=(beginChunk+i)%numChunks;if(!this._loadedChunks.has(chunk))return chunk}return null}hasChunk(chunk){return this._loadedChunks.has(chunk)}getByte(){const pos=this.pos;return pos>=this.end?-1:(pos>=this.progressiveDataLength&&this.ensureByte(pos),this.bytes[this.pos++])}getBytes(length){const bytes=this.bytes,pos=this.pos,strEnd=this.end;if(!length)return strEnd>this.progressiveDataLength&&this.ensureRange(pos,strEnd),bytes.subarray(pos,strEnd);let end=pos+length;return end>strEnd&&(end=strEnd),end>this.progressiveDataLength&&this.ensureRange(pos,end),this.pos=end,bytes.subarray(pos,end)}getByteRange(begin,end){return begin<0&&(begin=0),end>this.end&&(end=this.end),end>this.progressiveDataLength&&this.ensureRange(begin,end),this.bytes.subarray(begin,end)}makeSubStream(start,length,dict=null){length?start+length>this.progressiveDataLength&&this.ensureRange(start,start+length):start>=this.progressiveDataLength&&this.ensureByte(start);function ChunkedStreamSubstream(){}__name2(ChunkedStreamSubstream,"ChunkedStreamSubstream"),__name(ChunkedStreamSubstream,"ChunkedStreamSubstream"),ChunkedStreamSubstream.prototype=Object.create(this),ChunkedStreamSubstream.prototype.getMissingChunks=function(){const chunkSize=this.chunkSize,beginChunk=Math.floor(this.start/chunkSize),endChunk=Math.floor((this.end-1)/chunkSize)+1,missingChunks=[];for(let chunk=beginChunk;chunk<endChunk;++chunk)this._loadedChunks.has(chunk)||missingChunks.push(chunk);return missingChunks},Object.defineProperty(ChunkedStreamSubstream.prototype,"isDataLoaded",{get(){return this.numChunksLoaded===this.numChunks?!0:this.getMissingChunks().length===0},configurable:!0});const subStream=new ChunkedStreamSubstream;return subStream.pos=subStream.start=start,subStream.end=start+length||this.end,subStream.dict=dict,subStream}getBaseStreams(){return[this]}};__name(_ChunkedStream,"ChunkedStream");let ChunkedStream=_ChunkedStream;exports3.ChunkedStream=ChunkedStream;const _ChunkedStreamManager=class{static{__name2(this,"_ChunkedStreamManager")}constructor(pdfNetworkStream,args){this.length=args.length,this.chunkSize=args.rangeChunkSize,this.stream=new ChunkedStream(this.length,this.chunkSize,this),this.pdfNetworkStream=pdfNetworkStream,this.disableAutoFetch=args.disableAutoFetch,this.msgHandler=args.msgHandler,this.currRequestId=0,this._chunksNeededByRequest=new Map,this._requestsByChunk=new Map,this._promisesByRequest=new Map,this.progressiveDataLength=0,this.aborted=!1,this._loadedStreamCapability=(0,_util2.createPromiseCapability)()}onLoadedStream(){return this._loadedStreamCapability.promise}sendRequest(begin,end){const rangeReader=this.pdfNetworkStream.getRangeReader(begin,end);rangeReader.isStreamingSupported||(rangeReader.onProgress=this.onProgress.bind(this));let chunks=[],loaded=0;return new Promise((resolve,reject)=>{const readChunk=__name(chunk=>{try{if(!chunk.done){const data=chunk.value;chunks.push(data),loaded+=(0,_util2.arrayByteLength)(data),rangeReader.isStreamingSupported&&this.onProgress({loaded}),rangeReader.read().then(readChunk,reject);return}const chunkData=(0,_util2.arraysToBytes)(chunks);chunks=null,resolve(chunkData)}catch(e){reject(e)}},"readChunk");rangeReader.read().then(readChunk,reject)}).then(data=>{this.aborted||this.onReceiveData({chunk:data,begin})})}requestAllChunks(){const missingChunks=this.stream.getMissingChunks();return this._requestChunks(missingChunks),this._loadedStreamCapability.promise}_requestChunks(chunks){const requestId=this.currRequestId++,chunksNeeded=new Set;this._chunksNeededByRequest.set(requestId,chunksNeeded);for(const chunk of chunks)this.stream.hasChunk(chunk)||chunksNeeded.add(chunk);if(chunksNeeded.size===0)return Promise.resolve();const capability=(0,_util2.createPromiseCapability)();this._promisesByRequest.set(requestId,capability);const chunksToRequest=[];for(const chunk of chunksNeeded){let requestIds=this._requestsByChunk.get(chunk);requestIds||(requestIds=[],this._requestsByChunk.set(chunk,requestIds),chunksToRequest.push(chunk)),requestIds.push(requestId)}if(chunksToRequest.length>0){const groupedChunksToRequest=this.groupChunks(chunksToRequest);for(const groupedChunk of groupedChunksToRequest){const begin=groupedChunk.beginChunk*this.chunkSize,end=Math.min(groupedChunk.endChunk*this.chunkSize,this.length);this.sendRequest(begin,end).catch(capability.reject)}}return capability.promise.catch(reason=>{if(!this.aborted)throw reason})}getStream(){return this.stream}requestRange(begin,end){end=Math.min(end,this.length);const beginChunk=this.getBeginChunk(begin),endChunk=this.getEndChunk(end),chunks=[];for(let chunk=beginChunk;chunk<endChunk;++chunk)chunks.push(chunk);return this._requestChunks(chunks)}requestRanges(ranges=[]){const chunksToRequest=[];for(const range of ranges){const beginChunk=this.getBeginChunk(range.begin),endChunk=this.getEndChunk(range.end);for(let chunk=beginChunk;chunk<endChunk;++chunk)chunksToRequest.includes(chunk)||chunksToRequest.push(chunk)}return chunksToRequest.sort(function(a,b){return a-b}),this._requestChunks(chunksToRequest)}groupChunks(chunks){const groupedChunks=[];let beginChunk=-1,prevChunk=-1;for(let i=0,ii=chunks.length;i<ii;++i){const chunk=chunks[i];beginChunk<0&&(beginChunk=chunk),prevChunk>=0&&prevChunk+1!==chunk&&(groupedChunks.push({beginChunk,endChunk:prevChunk+1}),beginChunk=chunk),i+1===chunks.length&&groupedChunks.push({beginChunk,endChunk:chunk+1}),prevChunk=chunk}return groupedChunks}onProgress(args){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+args.loaded,total:this.length})}onReceiveData(args){const chunk=args.chunk,isProgressive=args.begin===void 0,begin=isProgressive?this.progressiveDataLength:args.begin,end=begin+chunk.byteLength,beginChunk=Math.floor(begin/this.chunkSize),endChunk=end<this.length?Math.floor(end/this.chunkSize):Math.ceil(end/this.chunkSize);isProgressive?(this.stream.onReceiveProgressiveData(chunk),this.progressiveDataLength=end):this.stream.onReceiveData(begin,chunk),this.stream.isDataLoaded&&this._loadedStreamCapability.resolve(this.stream);const loadedRequests=[];for(let curChunk=beginChunk;curChunk<endChunk;++curChunk){const requestIds=this._requestsByChunk.get(curChunk);if(requestIds){this._requestsByChunk.delete(curChunk);for(const requestId of requestIds){const chunksNeeded=this._chunksNeededByRequest.get(requestId);chunksNeeded.has(curChunk)&&chunksNeeded.delete(curChunk),!(chunksNeeded.size>0)&&loadedRequests.push(requestId)}}}if(!this.disableAutoFetch&&this._requestsByChunk.size===0){let nextEmptyChunk;if(this.stream.numChunksLoaded===1){const lastChunk=this.stream.numChunks-1;this.stream.hasChunk(lastChunk)||(nextEmptyChunk=lastChunk)}else nextEmptyChunk=this.stream.nextEmptyChunk(endChunk);Number.isInteger(nextEmptyChunk)&&this._requestChunks([nextEmptyChunk])}for(const requestId of loadedRequests){const capability=this._promisesByRequest.get(requestId);this._promisesByRequest.delete(requestId),capability.resolve()}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length})}onError(err){this._loadedStreamCapability.reject(err)}getBeginChunk(begin){return Math.floor(begin/this.chunkSize)}getEndChunk(end){return Math.floor((end-1)/this.chunkSize)+1}abort(reason){this.aborted=!0,this.pdfNetworkStream&&this.pdfNetworkStream.cancelAllRequests(reason);for(const capability of this._promisesByRequest.values())capability.reject(reason)}};__name(_ChunkedStreamManager,"ChunkedStreamManager");let ChunkedStreamManager=_ChunkedStreamManager;exports3.ChunkedStreamManager=ChunkedStreamManager},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.StringStream=exports3.Stream=exports3.NullStream=void 0;var _base_stream=__w_pdfjs_require__3(7),_util2=__w_pdfjs_require__3(2);const _Stream=class _Stream2 extends _base_stream.BaseStream{static{__name2(this,"_Stream")}constructor(arrayBuffer,start,length,dict){super(),this.bytes=arrayBuffer instanceof Uint8Array?arrayBuffer:new Uint8Array(arrayBuffer),this.start=start||0,this.pos=this.start,this.end=start+length||this.bytes.length,this.dict=dict}get length(){return this.end-this.start}get isEmpty(){return this.length===0}getByte(){return this.pos>=this.end?-1:this.bytes[this.pos++]}getBytes(length){const bytes=this.bytes,pos=this.pos,strEnd=this.end;if(!length)return bytes.subarray(pos,strEnd);let end=pos+length;return end>strEnd&&(end=strEnd),this.pos=end,bytes.subarray(pos,end)}getByteRange(begin,end){return begin<0&&(begin=0),end>this.end&&(end=this.end),this.bytes.subarray(begin,end)}reset(){this.pos=this.start}moveStart(){this.start=this.pos}makeSubStream(start,length,dict=null){return new _Stream2(this.bytes.buffer,start,length,dict)}};__name(_Stream,"Stream");let Stream=_Stream;exports3.Stream=Stream;const _StringStream=class extends Stream{static{__name2(this,"_StringStream")}constructor(str){super((0,_util2.stringToBytes)(str))}};__name(_StringStream,"StringStream");let StringStream=_StringStream;exports3.StringStream=StringStream;const _NullStream=class extends Stream{static{__name2(this,"_NullStream")}constructor(){super(new Uint8Array(0))}};__name(_NullStream,"NullStream");let NullStream=_NullStream;exports3.NullStream=NullStream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.Page=exports3.PDFDocument=void 0;var _annotation=__w_pdfjs_require__3(12),_util2=__w_pdfjs_require__3(2),_core_utils=__w_pdfjs_require__3(6),_primitives=__w_pdfjs_require__3(5),_xfa_fonts=__w_pdfjs_require__3(51),_base_stream=__w_pdfjs_require__3(7),_crypto=__w_pdfjs_require__3(67),_catalog=__w_pdfjs_require__3(69),_cleanup_helper=__w_pdfjs_require__3(71),_dataset_reader=__w_pdfjs_require__3(100),_parser=__w_pdfjs_require__3(17),_stream=__w_pdfjs_require__3(10),_object_loader=__w_pdfjs_require__3(75),_operator_list=__w_pdfjs_require__3(62),_evaluator=__w_pdfjs_require__3(15),_decode_stream=__w_pdfjs_require__3(19),_struct_tree=__w_pdfjs_require__3(74),_writer=__w_pdfjs_require__3(65),_factory=__w_pdfjs_require__3(76),_xref=__w_pdfjs_require__3(101);const DEFAULT_USER_UNIT=1,LETTER_SIZE_MEDIABOX=[0,0,612,792],_Page=class{static{__name2(this,"_Page")}constructor({pdfManager,xref,pageIndex,pageDict,ref,globalIdFactory,fontCache,builtInCMapCache,standardFontDataCache,globalImageCache,nonBlendModesSet,xfaFactory}){this.pdfManager=pdfManager,this.pageIndex=pageIndex,this.pageDict=pageDict,this.xref=xref,this.ref=ref,this.fontCache=fontCache,this.builtInCMapCache=builtInCMapCache,this.standardFontDataCache=standardFontDataCache,this.globalImageCache=globalImageCache,this.nonBlendModesSet=nonBlendModesSet,this.evaluatorOptions=pdfManager.evaluatorOptions,this.resourcesPromise=null,this.xfaFactory=xfaFactory;const idCounters={obj:0};this._localIdFactory=class extends globalIdFactory{static createObjId(){return`p${pageIndex}_${++idCounters.obj}`}static getPageObjId(){return`page${ref.toString()}`}}}_getInheritableProperty(key,getArray=!1){const value=(0,_core_utils.getInheritableProperty)({dict:this.pageDict,key,getArray,stopWhenFound:!1});return Array.isArray(value)?value.length===1||!(value[0]instanceof _primitives.Dict)?value[0]:_primitives.Dict.merge({xref:this.xref,dictArray:value}):value}get content(){return this.pageDict.getArray("Contents")}get resources(){const resources=this._getInheritableProperty("Resources");return(0,_util2.shadow)(this,"resources",resources instanceof _primitives.Dict?resources:_primitives.Dict.empty)}_getBoundingBox(name){if(this.xfaData)return this.xfaData.bbox;const box=this._getInheritableProperty(name,!0);if(Array.isArray(box)&&box.length===4){if(box[2]-box[0]!==0&&box[3]-box[1]!==0)return box;(0,_util2.warn)(`Empty /${name} entry.`)}return null}get mediaBox(){return(0,_util2.shadow)(this,"mediaBox",this._getBoundingBox("MediaBox")||LETTER_SIZE_MEDIABOX)}get cropBox(){return(0,_util2.shadow)(this,"cropBox",this._getBoundingBox("CropBox")||this.mediaBox)}get userUnit(){let obj=this.pageDict.get("UserUnit");return(typeof obj!="number"||obj<=0)&&(obj=DEFAULT_USER_UNIT),(0,_util2.shadow)(this,"userUnit",obj)}get view(){const{cropBox,mediaBox}=this;let view;if(cropBox===mediaBox||(0,_util2.isArrayEqual)(cropBox,mediaBox))view=mediaBox;else{const box=_util2.Util.intersect(cropBox,mediaBox);box&&box[2]-box[0]!==0&&box[3]-box[1]!==0?view=box:(0,_util2.warn)("Empty /CropBox and /MediaBox intersection.")}return(0,_util2.shadow)(this,"view",view||mediaBox)}get rotate(){let rotate=this._getInheritableProperty("Rotate")||0;return rotate%90!==0?rotate=0:rotate>=360?rotate%=360:rotate<0&&(rotate=(rotate%360+360)%360),(0,_util2.shadow)(this,"rotate",rotate)}_onSubStreamError(handler,reason,objId){if(this.evaluatorOptions.ignoreErrors){handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorContentSubStream}),(0,_util2.warn)(`getContentStream - ignoring sub-stream (${objId}): "${reason}".`);return}throw reason}getContentStream(handler){return this.pdfManager.ensure(this,"content").then(content=>content instanceof _base_stream.BaseStream?content:Array.isArray(content)?new _decode_stream.StreamsSequenceStream(content,this._onSubStreamError.bind(this,handler)):new _stream.NullStream)}get xfaData(){return(0,_util2.shadow)(this,"xfaData",this.xfaFactory?{bbox:this.xfaFactory.getBoundingBox(this.pageIndex)}:null)}async saveNewAnnotations(handler,task,annotations){if(this.xfaFactory)throw new Error("XFA: Cannot save new annotations.");const partialEvaluator=new _evaluator.PartialEvaluator({xref:this.xref,handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}),pageDict=this.pageDict,annotationsArray=this.annotations.slice(),newData=await _annotation.AnnotationFactory.saveNewAnnotations(partialEvaluator,task,annotations);for(const{ref}of newData.annotations)annotationsArray.push(ref);const savedDict=pageDict.get("Annots");pageDict.set("Annots",annotationsArray);const buffer=[];let transform=null;this.xref.encrypt&&(transform=this.xref.encrypt.createCipherTransform(this.ref.num,this.ref.gen)),(0,_writer.writeObject)(this.ref,pageDict,buffer,transform),savedDict&&pageDict.set("Annots",savedDict);const objects=newData.dependencies;return objects.push({ref:this.ref,data:buffer.join("")},...newData.annotations),objects}save(handler,task,annotationStorage){const partialEvaluator=new _evaluator.PartialEvaluator({xref:this.xref,handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions});return this._parsedAnnotations.then(function(annotations){const newRefsPromises=[];for(const annotation of annotations)annotation.mustBePrinted(annotationStorage)&&newRefsPromises.push(annotation.save(partialEvaluator,task,annotationStorage).catch(function(reason){return(0,_util2.warn)(`save - ignoring annotation data during "${task.name}" task: "${reason}".`),null}));return Promise.all(newRefsPromises).then(function(newRefs){return newRefs.filter(newRef=>!!newRef)})})}loadResources(keys){return this.resourcesPromise||(this.resourcesPromise=this.pdfManager.ensure(this,"resources")),this.resourcesPromise.then(()=>new _object_loader.ObjectLoader(this.resources,keys,this.xref).load())}getOperatorList({handler,sink,task,intent,cacheKey,annotationStorage=null}){const contentStreamPromise=this.getContentStream(handler),resourcesPromise=this.loadResources(["ColorSpace","ExtGState","Font","Pattern","Properties","Shading","XObject"]),partialEvaluator=new _evaluator.PartialEvaluator({xref:this.xref,handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}),newAnnotationsByPage=this.xfaFactory?null:(0,_core_utils.getNewAnnotationsMap)(annotationStorage);let newAnnotationsPromise=Promise.resolve(null);if(newAnnotationsByPage){const newAnnotations=newAnnotationsByPage.get(this.pageIndex);newAnnotations&&(newAnnotationsPromise=_annotation.AnnotationFactory.printNewAnnotations(partialEvaluator,task,newAnnotations))}const pageListPromise=Promise.all([contentStreamPromise,resourcesPromise]).then(([contentStream])=>{const opList=new _operator_list.OperatorList(intent,sink);return handler.send("StartRenderPage",{transparency:partialEvaluator.hasBlendModes(this.resources,this.nonBlendModesSet),pageIndex:this.pageIndex,cacheKey}),partialEvaluator.getOperatorList({stream:contentStream,task,resources:this.resources,operatorList:opList}).then(function(){return opList})});return Promise.all([pageListPromise,this._parsedAnnotations,newAnnotationsPromise]).then(function([pageOpList,annotations,newAnnotations]){if(newAnnotations&&(annotations=annotations.concat(newAnnotations)),annotations.length===0||intent&_util2.RenderingIntentFlag.ANNOTATIONS_DISABLE)return pageOpList.flush(!0),{length:pageOpList.totalLength};const renderForms=!!(intent&_util2.RenderingIntentFlag.ANNOTATIONS_FORMS),intentAny=!!(intent&_util2.RenderingIntentFlag.ANY),intentDisplay=!!(intent&_util2.RenderingIntentFlag.DISPLAY),intentPrint=!!(intent&_util2.RenderingIntentFlag.PRINT),opListPromises=[];for(const annotation of annotations)(intentAny||intentDisplay&&annotation.mustBeViewed(annotationStorage)||intentPrint&&annotation.mustBePrinted(annotationStorage))&&opListPromises.push(annotation.getOperatorList(partialEvaluator,task,intent,renderForms,annotationStorage).catch(function(reason){return(0,_util2.warn)(`getOperatorList - ignoring annotation data during "${task.name}" task: "${reason}".`),null}));return Promise.all(opListPromises).then(function(opLists){let form=!1,canvas=!1;for(const{opList,separateForm,separateCanvas}of opLists)pageOpList.addOpList(opList),separateForm&&(form=separateForm),separateCanvas&&(canvas=separateCanvas);return pageOpList.flush(!0,{form,canvas}),{length:pageOpList.totalLength}})})}extractTextContent({handler,task,includeMarkedContent,sink,combineTextItems}){const contentStreamPromise=this.getContentStream(handler),resourcesPromise=this.loadResources(["ExtGState","Font","Properties","XObject"]);return Promise.all([contentStreamPromise,resourcesPromise]).then(([contentStream])=>new _evaluator.PartialEvaluator({xref:this.xref,handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}).getTextContent({stream:contentStream,task,resources:this.resources,includeMarkedContent,combineTextItems,sink,viewBox:this.view}))}async getStructTree(){const structTreeRoot=await this.pdfManager.ensureCatalog("structTreeRoot");return structTreeRoot?(await this.pdfManager.ensure(this,"_parseStructTree",[structTreeRoot])).serializable:null}_parseStructTree(structTreeRoot){const tree=new _struct_tree.StructTreePage(structTreeRoot,this.pageDict);return tree.parse(),tree}async getAnnotationsData(handler,task,intent){const annotations=await this._parsedAnnotations;if(annotations.length===0)return[];const textContentPromises=[],annotationsData=[];let partialEvaluator;const intentAny=!!(intent&_util2.RenderingIntentFlag.ANY),intentDisplay=!!(intent&_util2.RenderingIntentFlag.DISPLAY),intentPrint=!!(intent&_util2.RenderingIntentFlag.PRINT);for(const annotation of annotations){const isVisible=intentAny||intentDisplay&&annotation.viewable;(isVisible||intentPrint&&annotation.printable)&&annotationsData.push(annotation.data),annotation.hasTextContent&&isVisible&&(partialEvaluator||(partialEvaluator=new _evaluator.PartialEvaluator({xref:this.xref,handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions})),textContentPromises.push(annotation.extractTextContent(partialEvaluator,task,this.view).catch(function(reason){(0,_util2.warn)(`getAnnotationsData - ignoring textContent during "${task.name}" task: "${reason}".`)})))}return await Promise.all(textContentPromises),annotationsData}get annotations(){const annots=this._getInheritableProperty("Annots");return(0,_util2.shadow)(this,"annotations",Array.isArray(annots)?annots:[])}get _parsedAnnotations(){const parsedAnnotations=this.pdfManager.ensure(this,"annotations").then(()=>{const annotationPromises=[];for(const annotationRef of this.annotations)annotationPromises.push(_annotation.AnnotationFactory.create(this.xref,annotationRef,this.pdfManager,this._localIdFactory,!1).catch(function(reason){return(0,_util2.warn)(`_parsedAnnotations: "${reason}".`),null}));return Promise.all(annotationPromises).then(function(annotations){if(annotations.length===0)return annotations;const sortedAnnotations=[];let popupAnnotations;for(const annotation of annotations)if(annotation){if(annotation instanceof _annotation.PopupAnnotation){popupAnnotations||(popupAnnotations=[]),popupAnnotations.push(annotation);continue}sortedAnnotations.push(annotation)}return popupAnnotations&&sortedAnnotations.push(...popupAnnotations),sortedAnnotations})});return(0,_util2.shadow)(this,"_parsedAnnotations",parsedAnnotations)}get jsActions(){const actions=(0,_core_utils.collectActions)(this.xref,this.pageDict,_util2.PageActionEventType);return(0,_util2.shadow)(this,"jsActions",actions)}};__name(_Page,"Page");let Page=_Page;exports3.Page=Page;const PDF_HEADER_SIGNATURE=new Uint8Array([37,80,68,70,45]),STARTXREF_SIGNATURE=new Uint8Array([115,116,97,114,116,120,114,101,102]),ENDOBJ_SIGNATURE=new Uint8Array([101,110,100,111,98,106]),FINGERPRINT_FIRST_BYTES=1024,EMPTY_FINGERPRINT="\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0",PDF_HEADER_VERSION_REGEXP=/^[1-9]\.\d$/;function find(stream,signature,limit=1024,backwards=!1){const signatureLength=signature.length,scanBytes=stream.peekBytes(limit),scanLength=scanBytes.length-signatureLength;if(scanLength<=0)return!1;if(backwards){const signatureEnd=signatureLength-1;let pos=scanBytes.length-1;for(;pos>=signatureEnd;){let j=0;for(;j<signatureLength&&scanBytes[pos-j]===signature[signatureEnd-j];)j++;if(j>=signatureLength)return stream.pos+=pos-signatureEnd,!0;pos--}}else{let pos=0;for(;pos<=scanLength;){let j=0;for(;j<signatureLength&&scanBytes[pos+j]===signature[j];)j++;if(j>=signatureLength)return stream.pos+=pos,!0;pos++}}return!1}__name2(find,"find"),__name(find,"find");const _PDFDocument=class{static{__name2(this,"_PDFDocument")}constructor(pdfManager,stream){if(stream.length<=0)throw new _util2.InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");this.pdfManager=pdfManager,this.stream=stream,this.xref=new _xref.XRef(stream,pdfManager),this._pagePromises=new Map,this._version=null;const idCounters={font:0};this._globalIdFactory=class{static getDocId(){return`g_${pdfManager.docId}`}static createFontId(){return`f${++idCounters.font}`}static createObjId(){(0,_util2.unreachable)("Abstract method `createObjId` called.")}static getPageObjId(){(0,_util2.unreachable)("Abstract method `getPageObjId` called.")}}}parse(recoveryMode){this.xref.parse(recoveryMode),this.catalog=new _catalog.Catalog(this.pdfManager,this.xref),this.catalog.version&&(this._version=this.catalog.version)}get linearization(){let linearization=null;try{linearization=_parser.Linearization.create(this.stream)}catch(err){if(err instanceof _core_utils.MissingDataException)throw err;(0,_util2.info)(err)}return(0,_util2.shadow)(this,"linearization",linearization)}get startXRef(){const stream=this.stream;let startXRef=0;if(this.linearization)stream.reset(),find(stream,ENDOBJ_SIGNATURE)&&(startXRef=stream.pos+6-stream.start);else{const startXRefLength=STARTXREF_SIGNATURE.length;let found=!1,pos=stream.end;for(;!found&&pos>0;)pos-=1024-startXRefLength,pos<0&&(pos=0),stream.pos=pos,found=find(stream,STARTXREF_SIGNATURE,1024,!0);if(found){stream.skip(9);let ch;do ch=stream.getByte();while((0,_core_utils.isWhiteSpace)(ch));let str="";for(;ch>=32&&ch<=57;)str+=String.fromCharCode(ch),ch=stream.getByte();startXRef=parseInt(str,10),isNaN(startXRef)&&(startXRef=0)}}return(0,_util2.shadow)(this,"startXRef",startXRef)}checkHeader(){const stream=this.stream;if(stream.reset(),!find(stream,PDF_HEADER_SIGNATURE))return;stream.moveStart();const MAX_PDF_VERSION_LENGTH=12;let version2="",ch;for(;(ch=stream.getByte())>32&&!(version2.length>=MAX_PDF_VERSION_LENGTH);)version2+=String.fromCharCode(ch);this._version||(this._version=version2.substring(5))}parseStartXRef(){this.xref.setStartXRef(this.startXRef)}get numPages(){let num=0;return this.catalog.hasActualNumPages?num=this.catalog.numPages:this.xfaFactory?num=this.xfaFactory.getNumPages():this.linearization?num=this.linearization.numPages:num=this.catalog.numPages,(0,_util2.shadow)(this,"numPages",num)}_hasOnlyDocumentSignatures(fields,recursionDepth=0){return Array.isArray(fields)?fields.every(field=>{if(field=this.xref.fetchIfRef(field),!(field instanceof _primitives.Dict))return!1;if(field.has("Kids"))return++recursionDepth>10?((0,_util2.warn)("_hasOnlyDocumentSignatures: maximum recursion depth reached"),!1):this._hasOnlyDocumentSignatures(field.get("Kids"),recursionDepth);const isSignature=(0,_primitives.isName)(field.get("FT"),"Sig"),rectangle=field.get("Rect"),isInvisible=Array.isArray(rectangle)&&rectangle.every(value=>value===0);return isSignature&&isInvisible}):!1}get _xfaStreams(){const acroForm=this.catalog.acroForm;if(!acroForm)return null;const xfa=acroForm.get("XFA"),entries={"xdp:xdp":"",template:"",datasets:"",config:"",connectionSet:"",localeSet:"",stylesheet:"","/xdp:xdp":""};if(xfa instanceof _base_stream.BaseStream&&!xfa.isEmpty)return entries["xdp:xdp"]=xfa,entries;if(!Array.isArray(xfa)||xfa.length===0)return null;for(let i=0,ii=xfa.length;i<ii;i+=2){let name;if(i===0?name="xdp:xdp":i===ii-2?name="/xdp:xdp":name=xfa[i],!entries.hasOwnProperty(name))continue;const data=this.xref.fetchIfRef(xfa[i+1]);!(data instanceof _base_stream.BaseStream)||data.isEmpty||(entries[name]=data)}return entries}get xfaDatasets(){const streams=this._xfaStreams;if(!streams)return(0,_util2.shadow)(this,"xfaDatasets",null);for(const key of["datasets","xdp:xdp"]){const stream=streams[key];if(stream)try{const str=(0,_util2.stringToUTF8String)(stream.getString()),data={[key]:str};return(0,_util2.shadow)(this,"xfaDatasets",new _dataset_reader.DatasetReader(data))}catch{(0,_util2.warn)("XFA - Invalid utf-8 string.");break}}return(0,_util2.shadow)(this,"xfaDatasets",null)}get xfaData(){const streams=this._xfaStreams;if(!streams)return null;const data=Object.create(null);for(const[key,stream]of Object.entries(streams))if(stream)try{data[key]=(0,_util2.stringToUTF8String)(stream.getString())}catch{return(0,_util2.warn)("XFA - Invalid utf-8 string."),null}return data}get xfaFactory(){let data;return this.pdfManager.enableXfa&&this.catalog.needsRendering&&this.formInfo.hasXfa&&!this.formInfo.hasAcroForm&&(data=this.xfaData),(0,_util2.shadow)(this,"xfaFactory",data?new _factory.XFAFactory(data):null)}get isPureXfa(){return this.xfaFactory?this.xfaFactory.isValid():!1}get htmlForXfa(){return this.xfaFactory?this.xfaFactory.getPages():null}async loadXfaImages(){const xfaImagesDict=await this.pdfManager.ensureCatalog("xfaImages");if(!xfaImagesDict)return;const keys=xfaImagesDict.getKeys();await new _object_loader.ObjectLoader(xfaImagesDict,keys,this.xref).load();const xfaImages=new Map;for(const key of keys){const stream=xfaImagesDict.get(key);stream instanceof _base_stream.BaseStream&&xfaImages.set(key,stream.getBytes())}this.xfaFactory.setImages(xfaImages)}async loadXfaFonts(handler,task){const acroForm=await this.pdfManager.ensureCatalog("acroForm");if(!acroForm)return;const resources=await acroForm.getAsync("DR");if(!(resources instanceof _primitives.Dict))return;await new _object_loader.ObjectLoader(resources,["Font"],this.xref).load();const fontRes=resources.get("Font");if(!(fontRes instanceof _primitives.Dict))return;const options=Object.assign(Object.create(null),this.pdfManager.evaluatorOptions);options.useSystemFonts=!1;const partialEvaluator=new _evaluator.PartialEvaluator({xref:this.xref,handler,pageIndex:-1,idFactory:this._globalIdFactory,fontCache:this.catalog.fontCache,builtInCMapCache:this.catalog.builtInCMapCache,standardFontDataCache:this.catalog.standardFontDataCache,options}),operatorList=new _operator_list.OperatorList,pdfFonts=[],initialState={get font(){return pdfFonts.at(-1)},set font(font){pdfFonts.push(font)},clone(){return this}},fonts=new Map;fontRes.forEach((fontName,font)=>{fonts.set(fontName,font)});const promises=[];for(const[fontName,font]of fonts){const descriptor=font.get("FontDescriptor");if(!(descriptor instanceof _primitives.Dict))continue;let fontFamily=descriptor.get("FontFamily");fontFamily=fontFamily.replace(/[ ]+(\d)/g,"$1");const fontWeight=descriptor.get("FontWeight"),italicAngle=-descriptor.get("ItalicAngle"),cssFontInfo={fontFamily,fontWeight,italicAngle};(0,_core_utils.validateCSSFont)(cssFontInfo)&&promises.push(partialEvaluator.handleSetFont(resources,[_primitives.Name.get(fontName),1],null,operatorList,task,initialState,null,cssFontInfo).catch(function(reason){return(0,_util2.warn)(`loadXfaFonts: "${reason}".`),null}))}await Promise.all(promises);const missingFonts=this.xfaFactory.setFonts(pdfFonts);if(!missingFonts)return;options.ignoreErrors=!0,promises.length=0,pdfFonts.length=0;const reallyMissingFonts=new Set;for(const missing of missingFonts)(0,_xfa_fonts.getXfaFontName)(`${missing}-Regular`)||reallyMissingFonts.add(missing);reallyMissingFonts.size&&missingFonts.push("PdfJS-Fallback");for(const missing of missingFonts)if(!reallyMissingFonts.has(missing))for(const fontInfo of[{name:"Regular",fontWeight:400,italicAngle:0},{name:"Bold",fontWeight:700,italicAngle:0},{name:"Italic",fontWeight:400,italicAngle:12},{name:"BoldItalic",fontWeight:700,italicAngle:12}]){const name=`${missing}-${fontInfo.name}`,dict=(0,_xfa_fonts.getXfaFontDict)(name);promises.push(partialEvaluator.handleSetFont(resources,[_primitives.Name.get(name),1],null,operatorList,task,initialState,dict,{fontFamily:missing,fontWeight:fontInfo.fontWeight,italicAngle:fontInfo.italicAngle}).catch(function(reason){return(0,_util2.warn)(`loadXfaFonts: "${reason}".`),null}))}await Promise.all(promises),this.xfaFactory.appendFonts(pdfFonts,reallyMissingFonts)}async serializeXfaData(annotationStorage){return this.xfaFactory?this.xfaFactory.serializeData(annotationStorage):null}get formInfo(){const formInfo={hasFields:!1,hasAcroForm:!1,hasXfa:!1,hasSignatures:!1},acroForm=this.catalog.acroForm;if(!acroForm)return(0,_util2.shadow)(this,"formInfo",formInfo);try{const fields=acroForm.get("Fields"),hasFields=Array.isArray(fields)&&fields.length>0;formInfo.hasFields=hasFields;const xfa=acroForm.get("XFA");formInfo.hasXfa=Array.isArray(xfa)&&xfa.length>0||xfa instanceof _base_stream.BaseStream&&!xfa.isEmpty;const hasSignatures=!!(acroForm.get("SigFlags")&1),hasOnlyDocumentSignatures=hasSignatures&&this._hasOnlyDocumentSignatures(fields);formInfo.hasAcroForm=hasFields&&!hasOnlyDocumentSignatures,formInfo.hasSignatures=hasSignatures}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.warn)(`Cannot fetch form information: "${ex}".`)}return(0,_util2.shadow)(this,"formInfo",formInfo)}get documentInfo(){let version2=this._version;(typeof version2!="string"||!PDF_HEADER_VERSION_REGEXP.test(version2))&&((0,_util2.warn)(`Invalid PDF header version number: ${version2}`),version2=null);const docInfo={PDFFormatVersion:version2,Language:this.catalog.lang,EncryptFilterName:this.xref.encrypt?this.xref.encrypt.filterName:null,IsLinearized:!!this.linearization,IsAcroFormPresent:this.formInfo.hasAcroForm,IsXFAPresent:this.formInfo.hasXfa,IsCollectionPresent:!!this.catalog.collection,IsSignaturesPresent:this.formInfo.hasSignatures};let infoDict;try{infoDict=this.xref.trailer.get("Info")}catch(err){if(err instanceof _core_utils.MissingDataException)throw err;(0,_util2.info)("The document information dictionary is invalid.")}if(!(infoDict instanceof _primitives.Dict))return(0,_util2.shadow)(this,"documentInfo",docInfo);for(const key of infoDict.getKeys()){const value=infoDict.get(key);switch(key){case"Title":case"Author":case"Subject":case"Keywords":case"Creator":case"Producer":case"CreationDate":case"ModDate":if(typeof value=="string"){docInfo[key]=(0,_util2.stringToPDFString)(value);continue}break;case"Trapped":if(value instanceof _primitives.Name){docInfo[key]=value;continue}break;default:let customValue;switch(typeof value){case"string":customValue=(0,_util2.stringToPDFString)(value);break;case"number":case"boolean":customValue=value;break;default:value instanceof _primitives.Name&&(customValue=value);break}if(customValue===void 0){(0,_util2.warn)(`Bad value, for custom key "${key}", in Info: ${value}.`);continue}docInfo.Custom||(docInfo.Custom=Object.create(null)),docInfo.Custom[key]=customValue;continue}(0,_util2.warn)(`Bad value, for key "${key}", in Info: ${value}.`)}return(0,_util2.shadow)(this,"documentInfo",docInfo)}get fingerprints(){function validate(data){return typeof data=="string"&&data.length>0&&data!==EMPTY_FINGERPRINT}__name2(validate,"validate"),__name(validate,"validate");function hexString(hash){const buf=[];for(let i=0,ii=hash.length;i<ii;i++){const hex=hash[i].toString(16);buf.push(hex.padStart(2,"0"))}return buf.join("")}__name2(hexString,"hexString"),__name(hexString,"hexString");const idArray=this.xref.trailer.get("ID");let hashOriginal,hashModified;return Array.isArray(idArray)&&validate(idArray[0])?(hashOriginal=(0,_util2.stringToBytes)(idArray[0]),idArray[1]!==idArray[0]&&validate(idArray[1])&&(hashModified=(0,_util2.stringToBytes)(idArray[1]))):hashOriginal=(0,_crypto.calculateMD5)(this.stream.getByteRange(0,FINGERPRINT_FIRST_BYTES),0,FINGERPRINT_FIRST_BYTES),(0,_util2.shadow)(this,"fingerprints",[hexString(hashOriginal),hashModified?hexString(hashModified):null])}async _getLinearizationPage(pageIndex){const{catalog,linearization,xref}=this,ref=_primitives.Ref.get(linearization.objectNumberFirst,0);try{const obj=await xref.fetchAsync(ref);if(obj instanceof _primitives.Dict){let type=obj.getRaw("Type");if(type instanceof _primitives.Ref&&(type=await xref.fetchAsync(type)),(0,_primitives.isName)(type,"Page")||!obj.has("Type")&&!obj.has("Kids"))return catalog.pageKidsCountCache.has(ref)||catalog.pageKidsCountCache.put(ref,1),catalog.pageIndexCache.has(ref)||catalog.pageIndexCache.put(ref,0),[obj,ref]}throw new _util2.FormatError("The Linearization dictionary doesn't point to a valid Page dictionary.")}catch(reason){return(0,_util2.warn)(`_getLinearizationPage: "${reason.message}".`),catalog.getPageDict(pageIndex)}}getPage(pageIndex){const cachedPromise=this._pagePromises.get(pageIndex);if(cachedPromise)return cachedPromise;const{catalog,linearization,xfaFactory}=this;let promise;return xfaFactory?promise=Promise.resolve([_primitives.Dict.empty,null]):linearization&&linearization.pageFirst===pageIndex?promise=this._getLinearizationPage(pageIndex):promise=catalog.getPageDict(pageIndex),promise=promise.then(([pageDict,ref])=>new Page({pdfManager:this.pdfManager,xref:this.xref,pageIndex,pageDict,ref,globalIdFactory:this._globalIdFactory,fontCache:catalog.fontCache,builtInCMapCache:catalog.builtInCMapCache,standardFontDataCache:catalog.standardFontDataCache,globalImageCache:catalog.globalImageCache,nonBlendModesSet:catalog.nonBlendModesSet,xfaFactory})),this._pagePromises.set(pageIndex,promise),promise}async checkFirstPage(recoveryMode=!1){if(!recoveryMode)try{await this.getPage(0)}catch(reason){if(reason instanceof _core_utils.XRefEntryException)throw this._pagePromises.delete(0),await this.cleanup(),new _core_utils.XRefParseException}}async checkLastPage(recoveryMode=!1){const{catalog,pdfManager}=this;catalog.setActualNumPages();let numPages;try{if(await Promise.all([pdfManager.ensureDoc("xfaFactory"),pdfManager.ensureDoc("linearization"),pdfManager.ensureCatalog("numPages")]),this.xfaFactory)return;if(this.linearization?numPages=this.linearization.numPages:numPages=catalog.numPages,Number.isInteger(numPages)){if(numPages<=1)return}else throw new _util2.FormatError("Page count is not an integer.");await this.getPage(numPages-1)}catch(reason){if(this._pagePromises.delete(numPages-1),await this.cleanup(),reason instanceof _core_utils.XRefEntryException&&!recoveryMode)throw new _core_utils.XRefParseException;(0,_util2.warn)(`checkLastPage - invalid /Pages tree /Count: ${numPages}.`);let pagesTree;try{pagesTree=await catalog.getAllPageDicts(recoveryMode)}catch(reasonAll){if(reasonAll instanceof _core_utils.XRefEntryException&&!recoveryMode)throw new _core_utils.XRefParseException;catalog.setActualNumPages(1);return}for(const[pageIndex,[pageDict,ref]]of pagesTree){let promise;pageDict instanceof Error?(promise=Promise.reject(pageDict),promise.catch(()=>{})):promise=Promise.resolve(new Page({pdfManager,xref:this.xref,pageIndex,pageDict,ref,globalIdFactory:this._globalIdFactory,fontCache:catalog.fontCache,builtInCMapCache:catalog.builtInCMapCache,standardFontDataCache:catalog.standardFontDataCache,globalImageCache:catalog.globalImageCache,nonBlendModesSet:catalog.nonBlendModesSet,xfaFactory:null})),this._pagePromises.set(pageIndex,promise)}catalog.setActualNumPages(pagesTree.size)}}fontFallback(id,handler){return this.catalog.fontFallback(id,handler)}async cleanup(manuallyTriggered=!1){return this.catalog?this.catalog.cleanup(manuallyTriggered):(0,_cleanup_helper.clearGlobalCaches)()}_collectFieldObjects(name,fieldRef,promises){const field=this.xref.fetchIfRef(fieldRef);if(field.has("T")){const partName=(0,_util2.stringToPDFString)(field.get("T"));name===""?name=partName:name=`${name}.${partName}`}if(promises.has(name)||promises.set(name,[]),promises.get(name).push(_annotation.AnnotationFactory.create(this.xref,fieldRef,this.pdfManager,this._localIdFactory,!0).then(annotation=>annotation&&annotation.getFieldObject()).catch(function(reason){return(0,_util2.warn)(`_collectFieldObjects: "${reason}".`),null})),field.has("Kids")){const kids=field.get("Kids");for(const kid of kids)this._collectFieldObjects(name,kid,promises)}}get fieldObjects(){if(!this.formInfo.hasFields)return(0,_util2.shadow)(this,"fieldObjects",Promise.resolve(null));const allFields=Object.create(null),fieldPromises=new Map;for(const fieldRef of this.catalog.acroForm.get("Fields"))this._collectFieldObjects("",fieldRef,fieldPromises);const allPromises=[];for(const[name,promises]of fieldPromises)allPromises.push(Promise.all(promises).then(fields=>{fields=fields.filter(field=>!!field),fields.length>0&&(allFields[name]=fields)}));return(0,_util2.shadow)(this,"fieldObjects",Promise.all(allPromises).then(()=>allFields))}get hasJSActions(){const promise=this.pdfManager.ensureDoc("_parseHasJSActions");return(0,_util2.shadow)(this,"hasJSActions",promise)}async _parseHasJSActions(){const[catalogJsActions,fieldObjects]=await Promise.all([this.pdfManager.ensureCatalog("jsActions"),this.pdfManager.ensureDoc("fieldObjects")]);return catalogJsActions?!0:fieldObjects?Object.values(fieldObjects).some(fieldObject=>fieldObject.some(object=>object.actions!==null)):!1}get calculationOrderIds(){const acroForm=this.catalog.acroForm;if(!acroForm||!acroForm.has("CO"))return(0,_util2.shadow)(this,"calculationOrderIds",null);const calculationOrder=acroForm.get("CO");if(!Array.isArray(calculationOrder)||calculationOrder.length===0)return(0,_util2.shadow)(this,"calculationOrderIds",null);const ids=[];for(const id of calculationOrder)id instanceof _primitives.Ref&&ids.push(id.toString());return ids.length===0?(0,_util2.shadow)(this,"calculationOrderIds",null):(0,_util2.shadow)(this,"calculationOrderIds",ids)}};__name(_PDFDocument,"PDFDocument");let PDFDocument=_PDFDocument;exports3.PDFDocument=PDFDocument},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.PopupAnnotation=exports3.MarkupAnnotation=exports3.AnnotationFactory=exports3.AnnotationBorderStyle=exports3.Annotation=void 0,exports3.getQuadPoints=getQuadPoints;var _util2=__w_pdfjs_require__3(2),_core_utils=__w_pdfjs_require__3(6),_default_appearance=__w_pdfjs_require__3(13),_primitives=__w_pdfjs_require__3(5),_writer=__w_pdfjs_require__3(65),_base_stream=__w_pdfjs_require__3(7),_bidi=__w_pdfjs_require__3(60),_catalog=__w_pdfjs_require__3(69),_colorspace=__w_pdfjs_require__3(14),_file_spec=__w_pdfjs_require__3(72),_object_loader=__w_pdfjs_require__3(75),_operator_list=__w_pdfjs_require__3(62),_stream=__w_pdfjs_require__3(10),_factory=__w_pdfjs_require__3(76);const _AnnotationFactory=class{static{__name2(this,"_AnnotationFactory")}static create(xref,ref,pdfManager,idFactory,collectFields){return Promise.all([pdfManager.ensureCatalog("acroForm"),pdfManager.ensureCatalog("baseUrl"),pdfManager.ensureDoc("xfaDatasets"),collectFields?this._getPageIndex(xref,ref,pdfManager):-1]).then(([acroForm,baseUrl,xfaDatasets,pageIndex])=>pdfManager.ensure(this,"_create",[xref,ref,pdfManager,idFactory,acroForm,xfaDatasets,collectFields,pageIndex]))}static _create(xref,ref,pdfManager,idFactory,acroForm,xfaDatasets,collectFields,pageIndex=-1){const dict=xref.fetchIfRef(ref);if(!(dict instanceof _primitives.Dict))return;const id=ref instanceof _primitives.Ref?ref.toString():`annot_${idFactory.createObjId()}`;let subtype=dict.get("Subtype");subtype=subtype instanceof _primitives.Name?subtype.name:null;const parameters={xref,ref,dict,subtype,id,pdfManager,acroForm:acroForm instanceof _primitives.Dict?acroForm:_primitives.Dict.empty,xfaDatasets,collectFields,pageIndex};switch(subtype){case"Link":return new LinkAnnotation(parameters);case"Text":return new TextAnnotation(parameters);case"Widget":let fieldType=(0,_core_utils.getInheritableProperty)({dict,key:"FT"});switch(fieldType=fieldType instanceof _primitives.Name?fieldType.name:null,fieldType){case"Tx":return new TextWidgetAnnotation(parameters);case"Btn":return new ButtonWidgetAnnotation(parameters);case"Ch":return new ChoiceWidgetAnnotation(parameters);case"Sig":return new SignatureWidgetAnnotation(parameters)}return(0,_util2.warn)(`Unimplemented widget field type "${fieldType}", falling back to base field type.`),new WidgetAnnotation(parameters);case"Popup":return new PopupAnnotation(parameters);case"FreeText":return new FreeTextAnnotation(parameters);case"Line":return new LineAnnotation(parameters);case"Square":return new SquareAnnotation(parameters);case"Circle":return new CircleAnnotation(parameters);case"PolyLine":return new PolylineAnnotation(parameters);case"Polygon":return new PolygonAnnotation(parameters);case"Caret":return new CaretAnnotation(parameters);case"Ink":return new InkAnnotation(parameters);case"Highlight":return new HighlightAnnotation(parameters);case"Underline":return new UnderlineAnnotation(parameters);case"Squiggly":return new SquigglyAnnotation(parameters);case"StrikeOut":return new StrikeOutAnnotation(parameters);case"Stamp":return new StampAnnotation(parameters);case"FileAttachment":return new FileAttachmentAnnotation(parameters);default:return collectFields||(subtype?(0,_util2.warn)(`Unimplemented annotation type "${subtype}", falling back to base annotation.`):(0,_util2.warn)("Annotation is missing the required /Subtype.")),new Annotation(parameters)}}static async _getPageIndex(xref,ref,pdfManager){try{const annotDict=await xref.fetchIfRefAsync(ref);if(!(annotDict instanceof _primitives.Dict))return-1;const pageRef=annotDict.getRaw("P");return pageRef instanceof _primitives.Ref?await pdfManager.ensureCatalog("getPageIndex",[pageRef]):-1}catch(ex){return(0,_util2.warn)(`_getPageIndex: "${ex}".`),-1}}static async saveNewAnnotations(evaluator,task,annotations){const xref=evaluator.xref;let baseFontRef;const dependencies=[],promises=[];for(const annotation of annotations)switch(annotation.annotationType){case _util2.AnnotationEditorType.FREETEXT:if(!baseFontRef){const baseFont=new _primitives.Dict(xref);baseFont.set("BaseFont",_primitives.Name.get("Helvetica")),baseFont.set("Type",_primitives.Name.get("Font")),baseFont.set("Subtype",_primitives.Name.get("Type1")),baseFont.set("Encoding",_primitives.Name.get("WinAnsiEncoding"));const buffer=[];baseFontRef=xref.getNewRef(),(0,_writer.writeObject)(baseFontRef,baseFont,buffer,null),dependencies.push({ref:baseFontRef,data:buffer.join("")})}promises.push(FreeTextAnnotation.createNewAnnotation(xref,annotation,dependencies,{evaluator,task,baseFontRef}));break;case _util2.AnnotationEditorType.INK:promises.push(InkAnnotation.createNewAnnotation(xref,annotation,dependencies))}return{annotations:await Promise.all(promises),dependencies}}static async printNewAnnotations(evaluator,task,annotations){if(!annotations)return null;const xref=evaluator.xref,promises=[];for(const annotation of annotations)switch(annotation.annotationType){case _util2.AnnotationEditorType.FREETEXT:promises.push(FreeTextAnnotation.createNewPrintAnnotation(xref,annotation,{evaluator,task}));break;case _util2.AnnotationEditorType.INK:promises.push(InkAnnotation.createNewPrintAnnotation(xref,annotation));break}return Promise.all(promises)}};__name(_AnnotationFactory,"AnnotationFactory");let AnnotationFactory=_AnnotationFactory;exports3.AnnotationFactory=AnnotationFactory;function getRgbColor(color,defaultColor=new Uint8ClampedArray(3)){if(!Array.isArray(color))return defaultColor;const rgbColor=defaultColor||new Uint8ClampedArray(3);switch(color.length){case 0:return null;case 1:return _colorspace.ColorSpace.singletons.gray.getRgbItem(color,0,rgbColor,0),rgbColor;case 3:return _colorspace.ColorSpace.singletons.rgb.getRgbItem(color,0,rgbColor,0),rgbColor;case 4:return _colorspace.ColorSpace.singletons.cmyk.getRgbItem(color,0,rgbColor,0),rgbColor;default:return defaultColor}}__name2(getRgbColor,"getRgbColor"),__name(getRgbColor,"getRgbColor");function getQuadPoints(dict,rect){if(!dict.has("QuadPoints"))return null;const quadPoints=dict.getArray("QuadPoints");if(!Array.isArray(quadPoints)||quadPoints.length===0||quadPoints.length%8>0)return null;const quadPointsLists=[];for(let i=0,ii=quadPoints.length/8;i<ii;i++){quadPointsLists.push([]);for(let j=i*8,jj=i*8+8;j<jj;j+=2){const x=quadPoints[j],y=quadPoints[j+1];if(rect!==null&&(x<rect[0]||x>rect[2]||y<rect[1]||y>rect[3]))return null;quadPointsLists[i].push({x,y})}}return quadPointsLists.map(quadPointsList=>{const[minX,maxX,minY,maxY]=quadPointsList.reduce(([mX,MX,mY,MY],quadPoint)=>[Math.min(mX,quadPoint.x),Math.max(MX,quadPoint.x),Math.min(mY,quadPoint.y),Math.max(MY,quadPoint.y)],[Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE]);return[{x:minX,y:maxY},{x:maxX,y:maxY},{x:minX,y:minY},{x:maxX,y:minY}]})}__name2(getQuadPoints,"getQuadPoints"),__name(getQuadPoints,"getQuadPoints");function getTransformMatrix(rect,bbox,matrix){const[minX,minY,maxX,maxY]=_util2.Util.getAxialAlignedBoundingBox(bbox,matrix);if(minX===maxX||minY===maxY)return[1,0,0,1,rect[0],rect[1]];const xRatio=(rect[2]-rect[0])/(maxX-minX),yRatio=(rect[3]-rect[1])/(maxY-minY);return[xRatio,0,0,yRatio,rect[0]-minX*xRatio,rect[1]-minY*yRatio]}__name2(getTransformMatrix,"getTransformMatrix"),__name(getTransformMatrix,"getTransformMatrix");const _Annotation=class{static{__name2(this,"_Annotation")}constructor(params){const dict=params.dict;this.setTitle(dict.get("T")),this.setContents(dict.get("Contents")),this.setModificationDate(dict.get("M")),this.setFlags(dict.get("F")),this.setRectangle(dict.getArray("Rect")),this.setColor(dict.getArray("C")),this.setBorderStyle(dict),this.setAppearance(dict),this.setOptionalContent(dict);const MK=dict.get("MK");if(this.setBorderAndBackgroundColors(MK),this.setRotation(MK),this._streams=[],this.appearance&&this._streams.push(this.appearance),this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,backgroundColor:this.backgroundColor,borderColor:this.borderColor,rotation:this.rotation,contentsObj:this._contents,hasAppearance:!!this.appearance,id:params.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:params.subtype,hasOwnCanvas:!1},params.collectFields){const kids=dict.get("Kids");if(Array.isArray(kids)){const kidIds=[];for(const kid of kids)kid instanceof _primitives.Ref&&kidIds.push(kid.toString());kidIds.length!==0&&(this.data.kidIds=kidIds)}this.data.actions=(0,_core_utils.collectActions)(params.xref,dict,_util2.AnnotationActionEventType),this.data.fieldName=this._constructFieldName(dict),this.data.pageIndex=params.pageIndex}this._fallbackFontDict=null}_hasFlag(flags,flag){return!!(flags&flag)}_isViewable(flags){return!this._hasFlag(flags,_util2.AnnotationFlag.INVISIBLE)&&!this._hasFlag(flags,_util2.AnnotationFlag.NOVIEW)}_isPrintable(flags){return this._hasFlag(flags,_util2.AnnotationFlag.PRINT)&&!this._hasFlag(flags,_util2.AnnotationFlag.INVISIBLE)}mustBeViewed(annotationStorage){const storageEntry=annotationStorage&&annotationStorage.get(this.data.id);return storageEntry&&storageEntry.hidden!==void 0?!storageEntry.hidden:this.viewable&&!this._hasFlag(this.flags,_util2.AnnotationFlag.HIDDEN)}mustBePrinted(annotationStorage){const storageEntry=annotationStorage&&annotationStorage.get(this.data.id);return storageEntry&&storageEntry.print!==void 0?storageEntry.print:this.printable}get viewable(){return this.data.quadPoints===null?!1:this.flags===0?!0:this._isViewable(this.flags)}get printable(){return this.data.quadPoints===null||this.flags===0?!1:this._isPrintable(this.flags)}_parseStringHelper(data){const str=typeof data=="string"?(0,_util2.stringToPDFString)(data):"",dir=str&&(0,_bidi.bidi)(str).dir==="rtl"?"rtl":"ltr";return{str,dir}}setTitle(title){this._title=this._parseStringHelper(title)}setContents(contents){this._contents=this._parseStringHelper(contents)}setModificationDate(modificationDate){this.modificationDate=typeof modificationDate=="string"?modificationDate:null}setFlags(flags){this.flags=Number.isInteger(flags)&&flags>0?flags:0}hasFlag(flag){return this._hasFlag(this.flags,flag)}setRectangle(rectangle){Array.isArray(rectangle)&&rectangle.length===4?this.rectangle=_util2.Util.normalizeRect(rectangle):this.rectangle=[0,0,0,0]}setColor(color){this.color=getRgbColor(color)}setLineEndings(lineEndings){if(this.lineEndings=["None","None"],Array.isArray(lineEndings)&&lineEndings.length===2)for(let i=0;i<2;i++){const obj=lineEndings[i];if(obj instanceof _primitives.Name)switch(obj.name){case"None":continue;case"Square":case"Circle":case"Diamond":case"OpenArrow":case"ClosedArrow":case"Butt":case"ROpenArrow":case"RClosedArrow":case"Slash":this.lineEndings[i]=obj.name;continue}(0,_util2.warn)(`Ignoring invalid lineEnding: ${obj}`)}}setRotation(mk){if(this.rotation=0,mk instanceof _primitives.Dict){let angle=mk.get("R")||0;Number.isInteger(angle)&&angle!==0&&(angle%=360,angle<0&&(angle+=360),angle%90===0&&(this.rotation=angle))}}setBorderAndBackgroundColors(mk){mk instanceof _primitives.Dict?(this.borderColor=getRgbColor(mk.getArray("BC"),null),this.backgroundColor=getRgbColor(mk.getArray("BG"),null)):this.borderColor=this.backgroundColor=null}setBorderStyle(borderStyle){if(this.borderStyle=new AnnotationBorderStyle,borderStyle instanceof _primitives.Dict)if(borderStyle.has("BS")){const dict=borderStyle.get("BS"),dictType=dict.get("Type");(!dictType||(0,_primitives.isName)(dictType,"Border"))&&(this.borderStyle.setWidth(dict.get("W"),this.rectangle),this.borderStyle.setStyle(dict.get("S")),this.borderStyle.setDashArray(dict.getArray("D")))}else if(borderStyle.has("Border")){const array=borderStyle.getArray("Border");Array.isArray(array)&&array.length>=3&&(this.borderStyle.setHorizontalCornerRadius(array[0]),this.borderStyle.setVerticalCornerRadius(array[1]),this.borderStyle.setWidth(array[2],this.rectangle),array.length===4&&this.borderStyle.setDashArray(array[3],!0))}else this.borderStyle.setWidth(0)}setAppearance(dict){this.appearance=null;const appearanceStates=dict.get("AP");if(!(appearanceStates instanceof _primitives.Dict))return;const normalAppearanceState=appearanceStates.get("N");if(normalAppearanceState instanceof _base_stream.BaseStream){this.appearance=normalAppearanceState;return}if(!(normalAppearanceState instanceof _primitives.Dict))return;const as=dict.get("AS");!(as instanceof _primitives.Name)||!normalAppearanceState.has(as.name)||(this.appearance=normalAppearanceState.get(as.name))}setOptionalContent(dict){this.oc=null;const oc=dict.get("OC");oc instanceof _primitives.Name?(0,_util2.warn)("setOptionalContent: Support for /Name-entry is not implemented."):oc instanceof _primitives.Dict&&(this.oc=oc)}loadResources(keys,appearance){return appearance.dict.getAsync("Resources").then(resources=>resources?new _object_loader.ObjectLoader(resources,keys,resources.xref).load().then(function(){return resources}):void 0)}async getOperatorList(evaluator,task,intent,renderForms,annotationStorage){const data=this.data;let appearance=this.appearance;const isUsingOwnCanvas=!!(this.data.hasOwnCanvas&&intent&_util2.RenderingIntentFlag.DISPLAY);if(!appearance){if(!isUsingOwnCanvas)return{opList:new _operator_list.OperatorList,separateForm:!1,separateCanvas:!1};appearance=new _stream.StringStream(""),appearance.dict=new _primitives.Dict}const appearanceDict=appearance.dict,resources=await this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"],appearance),bbox=appearanceDict.getArray("BBox")||[0,0,1,1],matrix=appearanceDict.getArray("Matrix")||[1,0,0,1,0,0],transform=getTransformMatrix(data.rect,bbox,matrix),opList=new _operator_list.OperatorList;let optionalContent;return this.oc&&(optionalContent=await evaluator.parseMarkedContentProps(this.oc,null)),optionalContent!==void 0&&opList.addOp(_util2.OPS.beginMarkedContentProps,["OC",optionalContent]),opList.addOp(_util2.OPS.beginAnnotation,[data.id,data.rect,transform,matrix,isUsingOwnCanvas]),await evaluator.getOperatorList({stream:appearance,task,resources,operatorList:opList,fallbackFontDict:this._fallbackFontDict}),opList.addOp(_util2.OPS.endAnnotation,[]),optionalContent!==void 0&&opList.addOp(_util2.OPS.endMarkedContent,[]),this.reset(),{opList,separateForm:!1,separateCanvas:isUsingOwnCanvas}}async save(evaluator,task,annotationStorage){return null}get hasTextContent(){return!1}async extractTextContent(evaluator,task,viewBox){if(!this.appearance)return;const resources=await this.loadResources(["ExtGState","Font","Properties","XObject"],this.appearance),text=[],buffer=[],sink={desiredSize:Math.Infinity,ready:!0,enqueue(chunk,size){for(const item of chunk.items)buffer.push(item.str),item.hasEOL&&(text.push(buffer.join("")),buffer.length=0)}};await evaluator.getTextContent({stream:this.appearance,task,resources,includeMarkedContent:!0,combineTextItems:!0,sink,viewBox}),this.reset(),buffer.length&&text.push(buffer.join("")),text.length>0&&(this.data.textContent=text)}getFieldObject(){return this.data.kidIds?{id:this.data.id,actions:this.data.actions,name:this.data.fieldName,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:"",kidIds:this.data.kidIds,page:this.data.pageIndex,rotation:this.rotation}:null}reset(){for(const stream of this._streams)stream.reset()}_constructFieldName(dict){if(!dict.has("T")&&!dict.has("Parent"))return(0,_util2.warn)("Unknown field name, falling back to empty field name."),"";if(!dict.has("Parent"))return(0,_util2.stringToPDFString)(dict.get("T"));const fieldName=[];dict.has("T")&&fieldName.unshift((0,_util2.stringToPDFString)(dict.get("T")));let loopDict=dict;const visited=new _primitives.RefSet;for(dict.objId&&visited.put(dict.objId);loopDict.has("Parent")&&(loopDict=loopDict.get("Parent"),!(!(loopDict instanceof _primitives.Dict)||loopDict.objId&&visited.has(loopDict.objId)));)loopDict.objId&&visited.put(loopDict.objId),loopDict.has("T")&&fieldName.unshift((0,_util2.stringToPDFString)(loopDict.get("T")));return fieldName.join(".")}};__name(_Annotation,"Annotation");let Annotation=_Annotation;exports3.Annotation=Annotation;const _AnnotationBorderStyle=class{static{__name2(this,"_AnnotationBorderStyle")}constructor(){this.width=1,this.style=_util2.AnnotationBorderStyleType.SOLID,this.dashArray=[3],this.horizontalCornerRadius=0,this.verticalCornerRadius=0}setWidth(width,rect=[0,0,0,0]){if(width instanceof _primitives.Name){this.width=0;return}if(typeof width=="number"){if(width>0){const maxWidth=(rect[2]-rect[0])/2,maxHeight=(rect[3]-rect[1])/2;maxWidth>0&&maxHeight>0&&(width>maxWidth||width>maxHeight)&&((0,_util2.warn)(`AnnotationBorderStyle.setWidth - ignoring width: ${width}`),width=1)}this.width=width}}setStyle(style){if(style instanceof _primitives.Name)switch(style.name){case"S":this.style=_util2.AnnotationBorderStyleType.SOLID;break;case"D":this.style=_util2.AnnotationBorderStyleType.DASHED;break;case"B":this.style=_util2.AnnotationBorderStyleType.BEVELED;break;case"I":this.style=_util2.AnnotationBorderStyleType.INSET;break;case"U":this.style=_util2.AnnotationBorderStyleType.UNDERLINE;break}}setDashArray(dashArray,forceStyle=!1){if(Array.isArray(dashArray)&&dashArray.length>0){let isValid=!0,allZeros=!0;for(const element of dashArray)if(+element>=0)element>0&&(allZeros=!1);else{isValid=!1;break}isValid&&!allZeros?(this.dashArray=dashArray,forceStyle&&this.setStyle(_primitives.Name.get("D"))):this.width=0}else dashArray&&(this.width=0)}setHorizontalCornerRadius(radius){Number.isInteger(radius)&&(this.horizontalCornerRadius=radius)}setVerticalCornerRadius(radius){Number.isInteger(radius)&&(this.verticalCornerRadius=radius)}};__name(_AnnotationBorderStyle,"AnnotationBorderStyle");let AnnotationBorderStyle=_AnnotationBorderStyle;exports3.AnnotationBorderStyle=AnnotationBorderStyle;const _MarkupAnnotation=class extends Annotation{static{__name2(this,"_MarkupAnnotation")}constructor(parameters){super(parameters);const dict=parameters.dict;if(dict.has("IRT")){const rawIRT=dict.getRaw("IRT");this.data.inReplyTo=rawIRT instanceof _primitives.Ref?rawIRT.toString():null;const rt=dict.get("RT");this.data.replyType=rt instanceof _primitives.Name?rt.name:_util2.AnnotationReplyType.REPLY}if(this.data.replyType===_util2.AnnotationReplyType.GROUP){const parent=dict.get("IRT");this.setTitle(parent.get("T")),this.data.titleObj=this._title,this.setContents(parent.get("Contents")),this.data.contentsObj=this._contents,parent.has("CreationDate")?(this.setCreationDate(parent.get("CreationDate")),this.data.creationDate=this.creationDate):this.data.creationDate=null,parent.has("M")?(this.setModificationDate(parent.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,this.data.hasPopup=parent.has("Popup"),parent.has("C")?(this.setColor(parent.getArray("C")),this.data.color=this.color):this.data.color=null}else this.data.titleObj=this._title,this.setCreationDate(dict.get("CreationDate")),this.data.creationDate=this.creationDate,this.data.hasPopup=dict.has("Popup"),dict.has("C")||(this.data.color=null);dict.has("RC")&&(this.data.richText=_factory.XFAFactory.getRichTextAsHtml(dict.get("RC")))}setCreationDate(creationDate){this.creationDate=typeof creationDate=="string"?creationDate:null}_setDefaultAppearance({xref,extra,strokeColor,fillColor,blendMode,strokeAlpha,fillAlpha,pointsCallback}){let minX=Number.MAX_VALUE,minY=Number.MAX_VALUE,maxX=Number.MIN_VALUE,maxY=Number.MIN_VALUE;const buffer=["q"];extra&&buffer.push(extra),strokeColor&&buffer.push(`${strokeColor[0]} ${strokeColor[1]} ${strokeColor[2]} RG`),fillColor&&buffer.push(`${fillColor[0]} ${fillColor[1]} ${fillColor[2]} rg`);let pointsArray=this.data.quadPoints;pointsArray||(pointsArray=[[{x:this.rectangle[0],y:this.rectangle[3]},{x:this.rectangle[2],y:this.rectangle[3]},{x:this.rectangle[0],y:this.rectangle[1]},{x:this.rectangle[2],y:this.rectangle[1]}]]);for(const points of pointsArray){const[mX,MX,mY,MY]=pointsCallback(buffer,points);minX=Math.min(minX,mX),maxX=Math.max(maxX,MX),minY=Math.min(minY,mY),maxY=Math.max(maxY,MY)}buffer.push("Q");const formDict=new _primitives.Dict(xref),appearanceStreamDict=new _primitives.Dict(xref);appearanceStreamDict.set("Subtype",_primitives.Name.get("Form"));const appearanceStream=new _stream.StringStream(buffer.join(" "));appearanceStream.dict=appearanceStreamDict,formDict.set("Fm0",appearanceStream);const gsDict=new _primitives.Dict(xref);blendMode&&gsDict.set("BM",_primitives.Name.get(blendMode)),typeof strokeAlpha=="number"&&gsDict.set("CA",strokeAlpha),typeof fillAlpha=="number"&&gsDict.set("ca",fillAlpha);const stateDict=new _primitives.Dict(xref);stateDict.set("GS0",gsDict);const resources=new _primitives.Dict(xref);resources.set("ExtGState",stateDict),resources.set("XObject",formDict);const appearanceDict=new _primitives.Dict(xref);appearanceDict.set("Resources",resources);const bbox=this.data.rect=[minX,minY,maxX,maxY];appearanceDict.set("BBox",bbox),this.appearance=new _stream.StringStream("/GS0 gs /Fm0 Do"),this.appearance.dict=appearanceDict,this._streams.push(this.appearance,appearanceStream)}static async createNewAnnotation(xref,annotation,dependencies,params){const annotationRef=xref.getNewRef(),apRef=xref.getNewRef(),annotationDict=this.createNewDict(annotation,xref,{apRef}),ap=await this.createNewAppearanceStream(annotation,xref,params),buffer=[];let transform=xref.encrypt?xref.encrypt.createCipherTransform(apRef.num,apRef.gen):null;return(0,_writer.writeObject)(apRef,ap,buffer,transform),dependencies.push({ref:apRef,data:buffer.join("")}),buffer.length=0,transform=xref.encrypt?xref.encrypt.createCipherTransform(annotationRef.num,annotationRef.gen):null,(0,_writer.writeObject)(annotationRef,annotationDict,buffer,transform),{ref:annotationRef,data:buffer.join("")}}static async createNewPrintAnnotation(xref,annotation,params){const ap=await this.createNewAppearanceStream(annotation,xref,params),annotationDict=this.createNewDict(annotation,xref,{ap});return new this.prototype.constructor({dict:annotationDict,xref})}};__name(_MarkupAnnotation,"MarkupAnnotation");let MarkupAnnotation=_MarkupAnnotation;exports3.MarkupAnnotation=MarkupAnnotation;const _WidgetAnnotation=class _WidgetAnnotation2 extends Annotation{static{__name2(this,"_WidgetAnnotation")}constructor(params){super(params);const dict=params.dict,data=this.data;this.ref=params.ref,data.annotationType=_util2.AnnotationType.WIDGET,data.fieldName===void 0&&(data.fieldName=this._constructFieldName(dict)),data.actions===void 0&&(data.actions=(0,_core_utils.collectActions)(params.xref,dict,_util2.AnnotationActionEventType));let fieldValue=(0,_core_utils.getInheritableProperty)({dict,key:"V",getArray:!0});data.fieldValue=this._decodeFormValue(fieldValue);const defaultFieldValue=(0,_core_utils.getInheritableProperty)({dict,key:"DV",getArray:!0});if(data.defaultFieldValue=this._decodeFormValue(defaultFieldValue),fieldValue===void 0&&params.xfaDatasets){const path=this._title.str;path&&(this._hasValueFromXFA=!0,data.fieldValue=fieldValue=params.xfaDatasets.getValue(path))}fieldValue===void 0&&data.defaultFieldValue!==null&&(data.fieldValue=data.defaultFieldValue),data.alternativeText=(0,_util2.stringToPDFString)(dict.get("TU")||"");const defaultAppearance=(0,_core_utils.getInheritableProperty)({dict,key:"DA"})||params.acroForm.get("DA");this._defaultAppearance=typeof defaultAppearance=="string"?defaultAppearance:"",data.defaultAppearanceData=(0,_default_appearance.parseDefaultAppearance)(this._defaultAppearance);const fieldType=(0,_core_utils.getInheritableProperty)({dict,key:"FT"});data.fieldType=fieldType instanceof _primitives.Name?fieldType.name:null;const localResources=(0,_core_utils.getInheritableProperty)({dict,key:"DR"}),acroFormResources=params.acroForm.get("DR"),appearanceResources=this.appearance&&this.appearance.dict.get("Resources");this._fieldResources={localResources,acroFormResources,appearanceResources,mergedResources:_primitives.Dict.merge({xref:params.xref,dictArray:[localResources,appearanceResources,acroFormResources],mergeSubDicts:!0})},data.fieldFlags=(0,_core_utils.getInheritableProperty)({dict,key:"Ff"}),(!Number.isInteger(data.fieldFlags)||data.fieldFlags<0)&&(data.fieldFlags=0),data.readOnly=this.hasFieldFlag(_util2.AnnotationFieldFlag.READONLY),data.required=this.hasFieldFlag(_util2.AnnotationFieldFlag.REQUIRED),data.hidden=this._hasFlag(data.annotationFlags,_util2.AnnotationFlag.HIDDEN)}_decodeFormValue(formValue){return Array.isArray(formValue)?formValue.filter(item=>typeof item=="string").map(item=>(0,_util2.stringToPDFString)(item)):formValue instanceof _primitives.Name?(0,_util2.stringToPDFString)(formValue.name):typeof formValue=="string"?(0,_util2.stringToPDFString)(formValue):null}hasFieldFlag(flag){return!!(this.data.fieldFlags&flag)}static _getRotationMatrix(rotation,width,height){switch(rotation){case 90:return[0,1,-1,0,width,0];case 180:return[-1,0,0,-1,width,height];case 270:return[0,-1,1,0,0,height];default:throw new Error("Invalid rotation")}}getRotationMatrix(annotationStorage){const storageEntry=annotationStorage?annotationStorage.get(this.data.id):void 0;let rotation=storageEntry&&storageEntry.rotation;if(rotation===void 0&&(rotation=this.rotation),rotation===0)return _util2.IDENTITY_MATRIX;const width=this.data.rect[2]-this.data.rect[0],height=this.data.rect[3]-this.data.rect[1];return _WidgetAnnotation2._getRotationMatrix(rotation,width,height)}getBorderAndBackgroundAppearances(annotationStorage){const storageEntry=annotationStorage?annotationStorage.get(this.data.id):void 0;let rotation=storageEntry&&storageEntry.rotation;if(rotation===void 0&&(rotation=this.rotation),!this.backgroundColor&&!this.borderColor)return"";const width=this.data.rect[2]-this.data.rect[0],height=this.data.rect[3]-this.data.rect[1],rect=rotation===0||rotation===180?`0 0 ${width} ${height} re`:`0 0 ${height} ${width} re`;let str="";if(this.backgroundColor&&(str=`${(0,_default_appearance.getPdfColor)(this.backgroundColor,!0)} ${rect} f `),this.borderColor){const borderWidth=this.borderStyle.width||1;str+=`${borderWidth} w ${(0,_default_appearance.getPdfColor)(this.borderColor,!1)} ${rect} S `}return str}async getOperatorList(evaluator,task,intent,renderForms,annotationStorage){if(renderForms&&!(this instanceof SignatureWidgetAnnotation))return{opList:new _operator_list.OperatorList,separateForm:!0,separateCanvas:!1};if(!this._hasText)return super.getOperatorList(evaluator,task,intent,renderForms,annotationStorage);const content=await this._getAppearance(evaluator,task,annotationStorage);if(this.appearance&&content===null)return super.getOperatorList(evaluator,task,intent,renderForms,annotationStorage);const opList=new _operator_list.OperatorList;if(!this._defaultAppearance||content===null)return{opList,separateForm:!1,separateCanvas:!1};const matrix=[1,0,0,1,0,0],bbox=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],transform=getTransformMatrix(this.data.rect,bbox,matrix);let optionalContent;this.oc&&(optionalContent=await evaluator.parseMarkedContentProps(this.oc,null)),optionalContent!==void 0&&opList.addOp(_util2.OPS.beginMarkedContentProps,["OC",optionalContent]),opList.addOp(_util2.OPS.beginAnnotation,[this.data.id,this.data.rect,transform,this.getRotationMatrix(annotationStorage),!1]);const stream=new _stream.StringStream(content);return await evaluator.getOperatorList({stream,task,resources:this._fieldResources.mergedResources,operatorList:opList}),opList.addOp(_util2.OPS.endAnnotation,[]),optionalContent!==void 0&&opList.addOp(_util2.OPS.endMarkedContent,[]),{opList,separateForm:!1,separateCanvas:!1}}_getMKDict(rotation){const mk=new _primitives.Dict(null);return rotation&&mk.set("R",rotation),this.borderColor&&mk.set("BC",Array.from(this.borderColor).map(c=>c/255)),this.backgroundColor&&mk.set("BG",Array.from(this.backgroundColor).map(c=>c/255)),mk.size>0?mk:null}async save(evaluator,task,annotationStorage){const storageEntry=annotationStorage?annotationStorage.get(this.data.id):void 0;let value=storageEntry&&storageEntry.value,rotation=storageEntry&&storageEntry.rotation;if(value===this.data.fieldValue||value===void 0){if(!this._hasValueFromXFA&&rotation===void 0)return null;value=value||this.data.fieldValue}if(rotation===void 0&&!this._hasValueFromXFA&&Array.isArray(value)&&Array.isArray(this.data.fieldValue)&&value.length===this.data.fieldValue.length&&value.every((x,i)=>x===this.data.fieldValue[i]))return null;rotation===void 0&&(rotation=this.rotation);let appearance=await this._getAppearance(evaluator,task,annotationStorage);if(appearance===null)return null;const{xref}=evaluator,dict=xref.fetchIfRef(this.ref);if(!(dict instanceof _primitives.Dict))return null;const bbox=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],xfa={path:(0,_util2.stringToPDFString)(dict.get("T")||""),value},newRef=xref.getNewRef(),AP=new _primitives.Dict(xref);AP.set("N",newRef);const encrypt=xref.encrypt;let originalTransform=null,newTransform=null;encrypt&&(originalTransform=encrypt.createCipherTransform(this.ref.num,this.ref.gen),newTransform=encrypt.createCipherTransform(newRef.num,newRef.gen),appearance=newTransform.encryptString(appearance));const encoder=__name(val=>(0,_util2.isAscii)(val)?val:(0,_util2.stringToUTF16BEString)(val),"encoder");dict.set("V",Array.isArray(value)?value.map(encoder):encoder(value)),dict.set("AP",AP),dict.set("M",`D:${(0,_util2.getModificationDate)()}`);const maybeMK=this._getMKDict(rotation);maybeMK&&dict.set("MK",maybeMK);const appearanceDict=new _primitives.Dict(xref);appearanceDict.set("Length",appearance.length),appearanceDict.set("Subtype",_primitives.Name.get("Form")),appearanceDict.set("Resources",this._getSaveFieldResources(xref)),appearanceDict.set("BBox",bbox);const rotationMatrix=this.getRotationMatrix(annotationStorage);rotationMatrix!==_util2.IDENTITY_MATRIX&&appearanceDict.set("Matrix",rotationMatrix);const bufferOriginal=[`${this.ref.num} ${this.ref.gen} obj
`];(0,_writer.writeDict)(dict,bufferOriginal,originalTransform),bufferOriginal.push(`
endobj
`);const bufferNew=[`${newRef.num} ${newRef.gen} obj
`];return(0,_writer.writeDict)(appearanceDict,bufferNew,newTransform),bufferNew.push(` stream
`,appearance,`
endstream
endobj
`),[{ref:this.ref,data:bufferOriginal.join(""),xfa},{ref:newRef,data:bufferNew.join(""),xfa:null}]}async _getAppearance(evaluator,task,annotationStorage){if(this.hasFieldFlag(_util2.AnnotationFieldFlag.PASSWORD))return null;const storageEntry=annotationStorage?annotationStorage.get(this.data.id):void 0;let value,rotation;if(storageEntry&&(value=storageEntry.formattedValue||storageEntry.value,rotation=storageEntry.rotation),rotation===void 0&&value===void 0&&(!this._hasValueFromXFA||this.appearance))return null;if(value===void 0&&(value=this.data.fieldValue,!value)||(Array.isArray(value)&&value.length===1&&(value=value[0]),(0,_util2.assert)(typeof value=="string","Expected `value` to be a string."),value=value.trim(),value===""))return"";rotation===void 0&&(rotation=this.rotation);let lineCount=-1;this.data.multiLine&&(lineCount=value.split(/\r\n|\r|\n/).length);const defaultPadding=2,hPadding=defaultPadding;let totalHeight=this.data.rect[3]-this.data.rect[1],totalWidth=this.data.rect[2]-this.data.rect[0];(rotation===90||rotation===270)&&([totalWidth,totalHeight]=[totalHeight,totalWidth]),this._defaultAppearance||(this.data.defaultAppearanceData=(0,_default_appearance.parseDefaultAppearance)(this._defaultAppearance="/Helvetica 0 Tf 0 g"));const font=await _WidgetAnnotation2._getFontData(evaluator,task,this.data.defaultAppearanceData,this._fieldResources.mergedResources),[defaultAppearance,fontSize]=this._computeFontSize(totalHeight-defaultPadding,totalWidth-2*hPadding,value,font,lineCount);let descent=font.descent;isNaN(descent)&&(descent=0);const vPadding=Math.min(Math.floor((totalHeight-fontSize)/2),defaultPadding)+Math.abs(descent)*fontSize,alignment=this.data.textAlignment;if(this.data.multiLine)return this._getMultilineAppearance(defaultAppearance,value,font,fontSize,totalWidth,totalHeight,alignment,hPadding,vPadding,annotationStorage);const encodedString=font.encodeString(value).join("");if(this.data.comb)return this._getCombAppearance(defaultAppearance,font,encodedString,totalWidth,hPadding,vPadding,annotationStorage);const colors=this.getBorderAndBackgroundAppearances(annotationStorage);if(alignment===0||alignment>2)return`/Tx BMC q ${colors}BT `+defaultAppearance+` 1 0 0 1 ${hPadding} ${vPadding} Tm (${(0,_util2.escapeString)(encodedString)}) Tj ET Q EMC`;const renderedText=this._renderText(encodedString,font,fontSize,totalWidth,alignment,hPadding,vPadding);return`/Tx BMC q ${colors}BT `+defaultAppearance+` 1 0 0 1 0 0 Tm ${renderedText} ET Q EMC`}static async _getFontData(evaluator,task,appearanceData,resources){const operatorList=new _operator_list.OperatorList,initialState={font:null,clone(){return this}},{fontName,fontSize}=appearanceData;return await evaluator.handleSetFont(resources,[fontName&&_primitives.Name.get(fontName),fontSize],null,operatorList,task,initialState,null),initialState.font}_getTextWidth(text,font){return font.charsToGlyphs(text).reduce((width,glyph)=>width+glyph.width,0)/1e3}_computeFontSize(height,width,text,font,lineCount){let{fontSize}=this.data.defaultAppearanceData;if(!fontSize){const roundWithTwoDigits=__name(x=>Math.floor(x*100)/100,"roundWithTwoDigits");if(lineCount===-1){const textWidth=this._getTextWidth(text,font);fontSize=roundWithTwoDigits(Math.min(height/_util2.LINE_FACTOR,width/textWidth))}else{const lines=text.split(/\r\n?|\n/),cachedLines=[];for(const line of lines){const encoded=font.encodeString(line).join(""),glyphs=font.charsToGlyphs(encoded),positions=font.getCharPositions(encoded);cachedLines.push({line:encoded,glyphs,positions})}const isTooBig=__name(fsize=>{let totalHeight=0;for(const cache of cachedLines){const chunks=this._splitLine(null,font,fsize,width,cache);if(totalHeight+=chunks.length*fsize,totalHeight>height)return!0}return!1},"isTooBig");fontSize=12;let lineHeight=fontSize*_util2.LINE_FACTOR,numberOfLines=Math.round(height/lineHeight);for(numberOfLines=Math.max(numberOfLines,lineCount);;){if(lineHeight=height/numberOfLines,fontSize=roundWithTwoDigits(lineHeight/_util2.LINE_FACTOR),isTooBig(fontSize)){numberOfLines++;continue}break}}const{fontName,fontColor}=this.data.defaultAppearanceData;this._defaultAppearance=(0,_default_appearance.createDefaultAppearance)({fontSize,fontName,fontColor})}return[this._defaultAppearance,fontSize]}_renderText(text,font,fontSize,totalWidth,alignment,hPadding,vPadding){let shift;if(alignment===1){const width=this._getTextWidth(text,font)*fontSize;shift=(totalWidth-width)/2}else if(alignment===2){const width=this._getTextWidth(text,font)*fontSize;shift=totalWidth-width-hPadding}else shift=hPadding;return shift=(0,_core_utils.numberToString)(shift),vPadding=(0,_core_utils.numberToString)(vPadding),`${shift} ${vPadding} Td (${(0,_util2.escapeString)(text)}) Tj`}_getSaveFieldResources(xref){const{localResources,appearanceResources,acroFormResources}=this._fieldResources,fontName=this.data.defaultAppearanceData&&this.data.defaultAppearanceData.fontName;if(!fontName)return localResources||_primitives.Dict.empty;for(const resources of[localResources,appearanceResources])if(resources instanceof _primitives.Dict){const localFont=resources.get("Font");if(localFont instanceof _primitives.Dict&&localFont.has(fontName))return resources}if(acroFormResources instanceof _primitives.Dict){const acroFormFont=acroFormResources.get("Font");if(acroFormFont instanceof _primitives.Dict&&acroFormFont.has(fontName)){const subFontDict=new _primitives.Dict(xref);subFontDict.set(fontName,acroFormFont.getRaw(fontName));const subResourcesDict=new _primitives.Dict(xref);return subResourcesDict.set("Font",subFontDict),_primitives.Dict.merge({xref,dictArray:[subResourcesDict,localResources],mergeSubDicts:!0})}}return localResources||_primitives.Dict.empty}getFieldObject(){return null}};__name(_WidgetAnnotation,"WidgetAnnotation");let WidgetAnnotation=_WidgetAnnotation;const _TextWidgetAnnotation=class extends WidgetAnnotation{static{__name2(this,"_TextWidgetAnnotation")}constructor(params){super(params),this._hasText=!0;const dict=params.dict;typeof this.data.fieldValue!="string"&&(this.data.fieldValue="");let alignment=(0,_core_utils.getInheritableProperty)({dict,key:"Q"});(!Number.isInteger(alignment)||alignment<0||alignment>2)&&(alignment=null),this.data.textAlignment=alignment;let maximumLength=(0,_core_utils.getInheritableProperty)({dict,key:"MaxLen"});(!Number.isInteger(maximumLength)||maximumLength<0)&&(maximumLength=0),this.data.maxLen=maximumLength,this.data.multiLine=this.hasFieldFlag(_util2.AnnotationFieldFlag.MULTILINE),this.data.comb=this.hasFieldFlag(_util2.AnnotationFieldFlag.COMB)&&!this.hasFieldFlag(_util2.AnnotationFieldFlag.MULTILINE)&&!this.hasFieldFlag(_util2.AnnotationFieldFlag.PASSWORD)&&!this.hasFieldFlag(_util2.AnnotationFieldFlag.FILESELECT)&&this.data.maxLen!==0,this.data.doNotScroll=this.hasFieldFlag(_util2.AnnotationFieldFlag.DONOTSCROLL)}_getCombAppearance(defaultAppearance,font,text,width,hPadding,vPadding,annotationStorage){const combWidth=(0,_core_utils.numberToString)(width/this.data.maxLen),buf=[],positions=font.getCharPositions(text);for(const[start,end]of positions)buf.push(`(${(0,_util2.escapeString)(text.substring(start,end))}) Tj`);const colors=this.getBorderAndBackgroundAppearances(annotationStorage),renderedComb=buf.join(` ${combWidth} 0 Td `);return`/Tx BMC q ${colors}BT `+defaultAppearance+` 1 0 0 1 ${hPadding} ${vPadding} Tm ${renderedComb} ET Q EMC`}_getMultilineAppearance(defaultAppearance,text,font,fontSize,width,height,alignment,hPadding,vPadding,annotationStorage){const lines=text.split(/\r\n?|\n/),buf=[],totalWidth=width-2*hPadding;for(const line of lines){const chunks=this._splitLine(line,font,fontSize,totalWidth);for(const chunk of chunks){const padding=buf.length===0?hPadding:0;buf.push(this._renderText(chunk,font,fontSize,width,alignment,padding,-fontSize))}}const renderedText=buf.join(`
`);return`/Tx BMC q ${this.getBorderAndBackgroundAppearances(annotationStorage)}BT `+defaultAppearance+` 1 0 0 1 0 ${height} Tm ${renderedText} ET Q EMC`}_splitLine(line,font,fontSize,width,cache={}){line=cache.line||font.encodeString(line).join("");const glyphs=cache.glyphs||font.charsToGlyphs(line);if(glyphs.length<=1)return[line];const positions=cache.positions||font.getCharPositions(line),scale=fontSize/1e3,chunks=[];let lastSpacePosInStringStart=-1,lastSpacePosInStringEnd=-1,lastSpacePos=-1,startChunk=0,currentWidth=0;for(let i=0,ii=glyphs.length;i<ii;i++){const[start,end]=positions[i],glyph=glyphs[i],glyphWidth=glyph.width*scale;glyph.unicode===" "?currentWidth+glyphWidth>width?(chunks.push(line.substring(startChunk,start)),startChunk=start,currentWidth=glyphWidth,lastSpacePosInStringStart=-1,lastSpacePos=-1):(currentWidth+=glyphWidth,lastSpacePosInStringStart=start,lastSpacePosInStringEnd=end,lastSpacePos=i):currentWidth+glyphWidth>width?lastSpacePosInStringStart!==-1?(chunks.push(line.substring(startChunk,lastSpacePosInStringEnd)),startChunk=lastSpacePosInStringEnd,i=lastSpacePos+1,lastSpacePosInStringStart=-1,currentWidth=0):(chunks.push(line.substring(startChunk,start)),startChunk=start,currentWidth=glyphWidth):currentWidth+=glyphWidth}return startChunk<line.length&&chunks.push(line.substring(startChunk,line.length)),chunks}getFieldObject(){return{id:this.data.id,value:this.data.fieldValue,defaultValue:this.data.defaultFieldValue||"",multiline:this.data.multiLine,password:this.hasFieldFlag(_util2.AnnotationFieldFlag.PASSWORD),charLimit:this.data.maxLen,comb:this.data.comb,editable:!this.data.readOnly,hidden:this.data.hidden,name:this.data.fieldName,rect:this.data.rect,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:"text"}}};__name(_TextWidgetAnnotation,"TextWidgetAnnotation");let TextWidgetAnnotation=_TextWidgetAnnotation;const _ButtonWidgetAnnotation=class extends WidgetAnnotation{static{__name2(this,"_ButtonWidgetAnnotation")}constructor(params){super(params),this.checkedAppearance=null,this.uncheckedAppearance=null,this.data.checkBox=!this.hasFieldFlag(_util2.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(_util2.AnnotationFieldFlag.PUSHBUTTON),this.data.radioButton=this.hasFieldFlag(_util2.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(_util2.AnnotationFieldFlag.PUSHBUTTON),this.data.pushButton=this.hasFieldFlag(_util2.AnnotationFieldFlag.PUSHBUTTON),this.data.isTooltipOnly=!1,this.data.checkBox?this._processCheckBox(params):this.data.radioButton?this._processRadioButton(params):this.data.pushButton?(this.data.hasOwnCanvas=!0,this._processPushButton(params)):(0,_util2.warn)("Invalid field flags for button widget annotation")}async getOperatorList(evaluator,task,intent,renderForms,annotationStorage){if(this.data.pushButton)return super.getOperatorList(evaluator,task,intent,!1,annotationStorage);let value=null,rotation=null;if(annotationStorage){const storageEntry=annotationStorage.get(this.data.id);value=storageEntry?storageEntry.value:null,rotation=storageEntry?storageEntry.rotation:null}if(value===null&&this.appearance)return super.getOperatorList(evaluator,task,intent,renderForms,annotationStorage);value==null&&(this.data.checkBox?value=this.data.fieldValue===this.data.exportValue:value=this.data.fieldValue===this.data.buttonValue);const appearance=value?this.checkedAppearance:this.uncheckedAppearance;if(appearance){const savedAppearance=this.appearance,savedMatrix=appearance.dict.getArray("Matrix")||_util2.IDENTITY_MATRIX;rotation&&appearance.dict.set("Matrix",this.getRotationMatrix(annotationStorage)),this.appearance=appearance;const operatorList=super.getOperatorList(evaluator,task,intent,renderForms,annotationStorage);return this.appearance=savedAppearance,appearance.dict.set("Matrix",savedMatrix),operatorList}return{opList:new _operator_list.OperatorList,separateForm:!1,separateCanvas:!1}}async save(evaluator,task,annotationStorage){return this.data.checkBox?this._saveCheckbox(evaluator,task,annotationStorage):this.data.radioButton?this._saveRadioButton(evaluator,task,annotationStorage):null}async _saveCheckbox(evaluator,task,annotationStorage){if(!annotationStorage)return null;const storageEntry=annotationStorage.get(this.data.id);let rotation=storageEntry&&storageEntry.rotation,value=storageEntry&&storageEntry.value;if(rotation===void 0&&(value===void 0||this.data.fieldValue===this.data.exportValue===value))return null;const dict=evaluator.xref.fetchIfRef(this.ref);if(!(dict instanceof _primitives.Dict))return null;rotation===void 0&&(rotation=this.rotation),value===void 0&&(value=this.data.fieldValue===this.data.exportValue);const xfa={path:(0,_util2.stringToPDFString)(dict.get("T")||""),value:value?this.data.exportValue:""},name=_primitives.Name.get(value?this.data.exportValue:"Off");dict.set("V",name),dict.set("AS",name),dict.set("M",`D:${(0,_util2.getModificationDate)()}`);const maybeMK=this._getMKDict(rotation);maybeMK&&dict.set("MK",maybeMK);const encrypt=evaluator.xref.encrypt;let originalTransform=null;encrypt&&(originalTransform=encrypt.createCipherTransform(this.ref.num,this.ref.gen));const buffer=[`${this.ref.num} ${this.ref.gen} obj
`];return(0,_writer.writeDict)(dict,buffer,originalTransform),buffer.push(`
endobj
`),[{ref:this.ref,data:buffer.join(""),xfa}]}async _saveRadioButton(evaluator,task,annotationStorage){if(!annotationStorage)return null;const storageEntry=annotationStorage.get(this.data.id);let rotation=storageEntry&&storageEntry.rotation,value=storageEntry&&storageEntry.value;if(rotation===void 0&&(value===void 0||this.data.fieldValue===this.data.buttonValue===value))return null;const dict=evaluator.xref.fetchIfRef(this.ref);if(!(dict instanceof _primitives.Dict))return null;value===void 0&&(value=this.data.fieldValue===this.data.buttonValue),rotation===void 0&&(rotation=this.rotation);const xfa={path:(0,_util2.stringToPDFString)(dict.get("T")||""),value:value?this.data.buttonValue:""},name=_primitives.Name.get(value?this.data.buttonValue:"Off");let parentBuffer=null;const encrypt=evaluator.xref.encrypt;if(value)if(this.parent instanceof _primitives.Ref){const parent=evaluator.xref.fetch(this.parent);let parentTransform=null;encrypt&&(parentTransform=encrypt.createCipherTransform(this.parent.num,this.parent.gen)),parent.set("V",name),parentBuffer=[`${this.parent.num} ${this.parent.gen} obj
`],(0,_writer.writeDict)(parent,parentBuffer,parentTransform),parentBuffer.push(`
endobj
`)}else this.parent instanceof _primitives.Dict&&this.parent.set("V",name);dict.set("AS",name),dict.set("M",`D:${(0,_util2.getModificationDate)()}`);const maybeMK=this._getMKDict(rotation);maybeMK&&dict.set("MK",maybeMK);let originalTransform=null;encrypt&&(originalTransform=encrypt.createCipherTransform(this.ref.num,this.ref.gen));const buffer=[`${this.ref.num} ${this.ref.gen} obj
`];(0,_writer.writeDict)(dict,buffer,originalTransform),buffer.push(`
endobj
`);const newRefs=[{ref:this.ref,data:buffer.join(""),xfa}];return parentBuffer!==null&&newRefs.push({ref:this.parent,data:parentBuffer.join(""),xfa:null}),newRefs}_getDefaultCheckedAppearance(params,type){const width=this.data.rect[2]-this.data.rect[0],height=this.data.rect[3]-this.data.rect[1],bbox=[0,0,width,height],FONT_RATIO=.8,fontSize=Math.min(width,height)*FONT_RATIO;let metrics,char;type==="check"?(metrics={width:.755*fontSize,height:.705*fontSize},char="3"):type==="disc"?(metrics={width:.791*fontSize,height:.705*fontSize},char="l"):(0,_util2.unreachable)(`_getDefaultCheckedAppearance - unsupported type: ${type}`);const xShift=(0,_core_utils.numberToString)((width-metrics.width)/2),yShift=(0,_core_utils.numberToString)((height-metrics.height)/2),appearance=`q BT /PdfJsZaDb ${fontSize} Tf 0 g ${xShift} ${yShift} Td (${char}) Tj ET Q`,appearanceStreamDict=new _primitives.Dict(params.xref);appearanceStreamDict.set("FormType",1),appearanceStreamDict.set("Subtype",_primitives.Name.get("Form")),appearanceStreamDict.set("Type",_primitives.Name.get("XObject")),appearanceStreamDict.set("BBox",bbox),appearanceStreamDict.set("Matrix",[1,0,0,1,0,0]),appearanceStreamDict.set("Length",appearance.length);const resources=new _primitives.Dict(params.xref),font=new _primitives.Dict(params.xref);font.set("PdfJsZaDb",this.fallbackFontDict),resources.set("Font",font),appearanceStreamDict.set("Resources",resources),this.checkedAppearance=new _stream.StringStream(appearance),this.checkedAppearance.dict=appearanceStreamDict,this._streams.push(this.checkedAppearance)}_processCheckBox(params){const customAppearance=params.dict.get("AP");if(!(customAppearance instanceof _primitives.Dict))return;const normalAppearance=customAppearance.get("N");if(!(normalAppearance instanceof _primitives.Dict))return;const asValue=this._decodeFormValue(params.dict.get("AS"));typeof asValue=="string"&&(this.data.fieldValue=asValue);const yes=this.data.fieldValue!==null&&this.data.fieldValue!=="Off"?this.data.fieldValue:"Yes",exportValues=normalAppearance.getKeys();if(exportValues.length===0)exportValues.push("Off",yes);else if(exportValues.length===1)exportValues[0]==="Off"?exportValues.push(yes):exportValues.unshift("Off");else if(exportValues.includes(yes))exportValues.length=0,exportValues.push("Off",yes);else{const otherYes=exportValues.find(v=>v!=="Off");exportValues.length=0,exportValues.push("Off",otherYes)}exportValues.includes(this.data.fieldValue)||(this.data.fieldValue="Off"),this.data.exportValue=exportValues[1],this.checkedAppearance=normalAppearance.get(this.data.exportValue)||null,this.uncheckedAppearance=normalAppearance.get("Off")||null,this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(params,"check"),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict}_processRadioButton(params){this.data.fieldValue=this.data.buttonValue=null;const fieldParent=params.dict.get("Parent");if(fieldParent instanceof _primitives.Dict){this.parent=params.dict.getRaw("Parent");const fieldParentValue=fieldParent.get("V");fieldParentValue instanceof _primitives.Name&&(this.data.fieldValue=this._decodeFormValue(fieldParentValue))}const appearanceStates=params.dict.get("AP");if(!(appearanceStates instanceof _primitives.Dict))return;const normalAppearance=appearanceStates.get("N");if(normalAppearance instanceof _primitives.Dict){for(const key of normalAppearance.getKeys())if(key!=="Off"){this.data.buttonValue=this._decodeFormValue(key);break}this.checkedAppearance=normalAppearance.get(this.data.buttonValue)||null,this.uncheckedAppearance=normalAppearance.get("Off")||null,this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(params,"disc"),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict}}_processPushButton(params){if(!params.dict.has("A")&&!params.dict.has("AA")&&!this.data.alternativeText){(0,_util2.warn)("Push buttons without action dictionaries are not supported");return}this.data.isTooltipOnly=!params.dict.has("A")&&!params.dict.has("AA"),_catalog.Catalog.parseDestDictionary({destDict:params.dict,resultObj:this.data,docBaseUrl:params.pdfManager.docBaseUrl})}getFieldObject(){let type="button",exportValues;return this.data.checkBox?(type="checkbox",exportValues=this.data.exportValue):this.data.radioButton&&(type="radiobutton",exportValues=this.data.buttonValue),{id:this.data.id,value:this.data.fieldValue||"Off",defaultValue:this.data.defaultFieldValue,exportValues,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,hidden:this.data.hidden,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type}}get fallbackFontDict(){const dict=new _primitives.Dict;return dict.set("BaseFont",_primitives.Name.get("ZapfDingbats")),dict.set("Type",_primitives.Name.get("FallbackType")),dict.set("Subtype",_primitives.Name.get("FallbackType")),dict.set("Encoding",_primitives.Name.get("ZapfDingbatsEncoding")),(0,_util2.shadow)(this,"fallbackFontDict",dict)}};__name(_ButtonWidgetAnnotation,"ButtonWidgetAnnotation");let ButtonWidgetAnnotation=_ButtonWidgetAnnotation;const _ChoiceWidgetAnnotation=class extends WidgetAnnotation{static{__name2(this,"_ChoiceWidgetAnnotation")}constructor(params){super(params),this.data.options=[];const options=(0,_core_utils.getInheritableProperty)({dict:params.dict,key:"Opt"});if(Array.isArray(options)){const xref=params.xref;for(let i=0,ii=options.length;i<ii;i++){const option=xref.fetchIfRef(options[i]),isOptionArray=Array.isArray(option);this.data.options[i]={exportValue:this._decodeFormValue(isOptionArray?xref.fetchIfRef(option[0]):option),displayValue:this._decodeFormValue(isOptionArray?xref.fetchIfRef(option[1]):option)}}}typeof this.data.fieldValue=="string"?this.data.fieldValue=[this.data.fieldValue]:this.data.fieldValue||(this.data.fieldValue=[]),this.data.combo=this.hasFieldFlag(_util2.AnnotationFieldFlag.COMBO),this.data.multiSelect=this.hasFieldFlag(_util2.AnnotationFieldFlag.MULTISELECT),this._hasText=!0}getFieldObject(){const type=this.data.combo?"combobox":"listbox",value=this.data.fieldValue.length>0?this.data.fieldValue[0]:null;return{id:this.data.id,value,defaultValue:this.data.defaultFieldValue,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,numItems:this.data.fieldValue.length,multipleSelection:this.data.multiSelect,hidden:this.data.hidden,actions:this.data.actions,items:this.data.options,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type}}async _getAppearance(evaluator,task,annotationStorage){if(this.data.combo)return super._getAppearance(evaluator,task,annotationStorage);if(!annotationStorage)return null;const storageEntry=annotationStorage.get(this.data.id);if(!storageEntry)return null;const rotation=storageEntry.rotation;let exportedValue=storageEntry.value;if(rotation===void 0&&exportedValue===void 0)return null;exportedValue===void 0?exportedValue=this.data.fieldValue:Array.isArray(exportedValue)||(exportedValue=[exportedValue]);const defaultPadding=2,hPadding=defaultPadding;let totalHeight=this.data.rect[3]-this.data.rect[1],totalWidth=this.data.rect[2]-this.data.rect[0];(rotation===90||rotation===270)&&([totalWidth,totalHeight]=[totalHeight,totalWidth]);const lineCount=this.data.options.length,valueIndices=[];for(let i=0;i<lineCount;i++){const{exportValue}=this.data.options[i];exportedValue.includes(exportValue)&&valueIndices.push(i)}this._defaultAppearance||(this.data.defaultAppearanceData=(0,_default_appearance.parseDefaultAppearance)(this._defaultAppearance="/Helvetica 0 Tf 0 g"));const font=await WidgetAnnotation._getFontData(evaluator,task,this.data.defaultAppearanceData,this._fieldResources.mergedResources);let defaultAppearance,{fontSize}=this.data.defaultAppearanceData;if(fontSize)defaultAppearance=this._defaultAppearance;else{const lineHeight2=(totalHeight-defaultPadding)/lineCount;let lineWidth=-1,value;for(const{displayValue}of this.data.options){const width=this._getTextWidth(displayValue,font);width>lineWidth&&(lineWidth=width,value=displayValue)}[defaultAppearance,fontSize]=this._computeFontSize(lineHeight2,totalWidth-2*hPadding,value,font,-1)}const lineHeight=fontSize*_util2.LINE_FACTOR,vPadding=(lineHeight-fontSize)/2,numberOfVisibleLines=Math.floor(totalHeight/lineHeight);let firstIndex;if(valueIndices.length===1){const valuePosition=valueIndices[0],indexInPage=valuePosition%numberOfVisibleLines;firstIndex=valuePosition-indexInPage}else firstIndex=valueIndices.length?valueIndices[0]:0;const end=Math.min(firstIndex+numberOfVisibleLines+1,lineCount),buf=["/Tx BMC q",`1 1 ${totalWidth} ${totalHeight} re W n`];if(valueIndices.length){buf.push("0.600006 0.756866 0.854904 rg");for(const index of valueIndices)firstIndex<=index&&index<end&&buf.push(`1 ${totalHeight-(index-firstIndex+1)*lineHeight} ${totalWidth} ${lineHeight} re f`)}buf.push("BT",defaultAppearance,`1 0 0 1 0 ${totalHeight} Tm`);for(let i=firstIndex;i<end;i++){const{displayValue}=this.data.options[i],hpadding=i===firstIndex?hPadding:0,vpadding=i===firstIndex?vPadding:0;buf.push(this._renderText(displayValue,font,fontSize,totalWidth,0,hpadding,-lineHeight+vpadding))}return buf.push("ET Q EMC"),buf.join(`
`)}};__name(_ChoiceWidgetAnnotation,"ChoiceWidgetAnnotation");let ChoiceWidgetAnnotation=_ChoiceWidgetAnnotation;const _SignatureWidgetAnnotation=class extends WidgetAnnotation{static{__name2(this,"_SignatureWidgetAnnotation")}constructor(params){super(params),this.data.fieldValue=null}getFieldObject(){return{id:this.data.id,value:null,page:this.data.pageIndex,type:"signature"}}};__name(_SignatureWidgetAnnotation,"SignatureWidgetAnnotation");let SignatureWidgetAnnotation=_SignatureWidgetAnnotation;const _TextAnnotation=class extends MarkupAnnotation{static{__name2(this,"_TextAnnotation")}constructor(parameters){super(parameters);const dict=parameters.dict;this.data.annotationType=_util2.AnnotationType.TEXT,this.data.hasAppearance?this.data.name="NoIcon":(this.data.rect[1]=this.data.rect[3]-22,this.data.rect[2]=this.data.rect[0]+22,this.data.name=dict.has("Name")?dict.get("Name").name:"Note"),dict.has("State")?(this.data.state=dict.get("State")||null,this.data.stateModel=dict.get("StateModel")||null):(this.data.state=null,this.data.stateModel=null)}};__name(_TextAnnotation,"TextAnnotation");let TextAnnotation=_TextAnnotation;const _LinkAnnotation=class extends Annotation{static{__name2(this,"_LinkAnnotation")}constructor(params){super(params),this.data.annotationType=_util2.AnnotationType.LINK;const quadPoints=getQuadPoints(params.dict,this.rectangle);quadPoints&&(this.data.quadPoints=quadPoints),this.data.borderColor=this.data.borderColor||this.data.color,_catalog.Catalog.parseDestDictionary({destDict:params.dict,resultObj:this.data,docBaseUrl:params.pdfManager.docBaseUrl})}};__name(_LinkAnnotation,"LinkAnnotation");let LinkAnnotation=_LinkAnnotation;const _PopupAnnotation=class extends Annotation{static{__name2(this,"_PopupAnnotation")}constructor(parameters){super(parameters),this.data.annotationType=_util2.AnnotationType.POPUP;let parentItem=parameters.dict.get("Parent");if(!parentItem){(0,_util2.warn)("Popup annotation has a missing or invalid parent annotation.");return}const parentSubtype=parentItem.get("Subtype");this.data.parentType=parentSubtype instanceof _primitives.Name?parentSubtype.name:null;const rawParent=parameters.dict.getRaw("Parent");this.data.parentId=rawParent instanceof _primitives.Ref?rawParent.toString():null;const parentRect=parentItem.getArray("Rect");Array.isArray(parentRect)&&parentRect.length===4?this.data.parentRect=_util2.Util.normalizeRect(parentRect):this.data.parentRect=[0,0,0,0];const rt=parentItem.get("RT");if((0,_primitives.isName)(rt,_util2.AnnotationReplyType.GROUP)&&(parentItem=parentItem.get("IRT")),parentItem.has("M")?(this.setModificationDate(parentItem.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,parentItem.has("C")?(this.setColor(parentItem.getArray("C")),this.data.color=this.color):this.data.color=null,!this.viewable){const parentFlags=parentItem.get("F");this._isViewable(parentFlags)&&this.setFlags(parentFlags)}this.setTitle(parentItem.get("T")),this.data.titleObj=this._title,this.setContents(parentItem.get("Contents")),this.data.contentsObj=this._contents,parentItem.has("RC")&&(this.data.richText=_factory.XFAFactory.getRichTextAsHtml(parentItem.get("RC")))}};__name(_PopupAnnotation,"PopupAnnotation");let PopupAnnotation=_PopupAnnotation;exports3.PopupAnnotation=PopupAnnotation;const _FreeTextAnnotation=class extends MarkupAnnotation{static{__name2(this,"_FreeTextAnnotation")}constructor(parameters){super(parameters),this.data.annotationType=_util2.AnnotationType.FREETEXT}get hasTextContent(){return!!this.appearance}static createNewDict(annotation,xref,{apRef,ap}){const{color,fontSize,rect,rotation,user,value}=annotation,freetext=new _primitives.Dict(xref);freetext.set("Type",_primitives.Name.get("Annot")),freetext.set("Subtype",_primitives.Name.get("FreeText")),freetext.set("CreationDate",`D:${(0,_util2.getModificationDate)()}`),freetext.set("Rect",rect);const da=`/Helv ${fontSize} Tf ${(0,_default_appearance.getPdfColor)(color,!0)}`;freetext.set("DA",da),freetext.set("Contents",value),freetext.set("F",4),freetext.set("Border",[0,0,0]),freetext.set("Rotate",rotation),user&&freetext.set("T",(0,_util2.stringToUTF8String)(user));const n=new _primitives.Dict(xref);return freetext.set("AP",n),apRef?n.set("N",apRef):n.set("N",ap),freetext}static async createNewAppearanceStream(annotation,xref,params){const{baseFontRef,evaluator,task}=params,{color,fontSize,rect,rotation,value}=annotation,resources=new _primitives.Dict(xref),font=new _primitives.Dict(xref);if(baseFontRef)font.set("Helv",baseFontRef);else{const baseFont=new _primitives.Dict(xref);baseFont.set("BaseFont",_primitives.Name.get("Helvetica")),baseFont.set("Type",_primitives.Name.get("Font")),baseFont.set("Subtype",_primitives.Name.get("Type1")),baseFont.set("Encoding",_primitives.Name.get("WinAnsiEncoding")),font.set("Helv",baseFont)}resources.set("Font",font);const helv=await WidgetAnnotation._getFontData(evaluator,task,{fontName:"Helvetica",fontSize},resources),[x1,y1,x2,y2]=rect;let w=x2-x1,h=y2-y1;rotation%180!==0&&([w,h]=[h,w]);const lines=value.split(`
`),scale=fontSize/1e3;let totalWidth=-1/0;const encodedLines=[];for(let line of lines){line=helv.encodeString(line).join(""),encodedLines.push(line);let lineWidth=0;const glyphs=helv.charsToGlyphs(line);for(const glyph of glyphs)lineWidth+=glyph.width*scale;totalWidth=Math.max(totalWidth,lineWidth)}let hscale=1;totalWidth>w&&(hscale=w/totalWidth);let vscale=1;const lineHeight=_util2.LINE_FACTOR*fontSize,lineDescent=_util2.LINE_DESCENT_FACTOR*fontSize,totalHeight=lineHeight*lines.length;totalHeight>h&&(vscale=h/totalHeight);const fscale=Math.min(hscale,vscale),newFontSize=fontSize*fscale,buffer=["q",`0 0 ${(0,_core_utils.numberToString)(w)} ${(0,_core_utils.numberToString)(h)} re W n`,"BT",`1 0 0 1 0 ${(0,_core_utils.numberToString)(h+lineDescent)} Tm 0 Tc ${(0,_default_appearance.getPdfColor)(color,!0)}`,`/Helv ${(0,_core_utils.numberToString)(newFontSize)} Tf`],vShift=(0,_core_utils.numberToString)(lineHeight);for(const line of encodedLines)buffer.push(`0 -${vShift} Td (${(0,_util2.escapeString)(line)}) Tj`);buffer.push("ET","Q");const appearance=buffer.join(`
`),appearanceStreamDict=new _primitives.Dict(xref);if(appearanceStreamDict.set("FormType",1),appearanceStreamDict.set("Subtype",_primitives.Name.get("Form")),appearanceStreamDict.set("Type",_primitives.Name.get("XObject")),appearanceStreamDict.set("BBox",[0,0,w,h]),appearanceStreamDict.set("Length",appearance.length),appearanceStreamDict.set("Resources",resources),rotation){const matrix=WidgetAnnotation._getRotationMatrix(rotation,w,h);appearanceStreamDict.set("Matrix",matrix)}const ap=new _stream.StringStream(appearance);return ap.dict=appearanceStreamDict,ap}};__name(_FreeTextAnnotation,"FreeTextAnnotation");let FreeTextAnnotation=_FreeTextAnnotation;const _LineAnnotation=class extends MarkupAnnotation{static{__name2(this,"_LineAnnotation")}constructor(parameters){super(parameters);const{dict}=parameters;this.data.annotationType=_util2.AnnotationType.LINE;const lineCoordinates=dict.getArray("L");if(this.data.lineCoordinates=_util2.Util.normalizeRect(lineCoordinates),this.setLineEndings(dict.getArray("LE")),this.data.lineEndings=this.lineEndings,!this.appearance){const strokeColor=this.color?Array.from(this.color).map(c=>c/255):[0,0,0],strokeAlpha=dict.get("CA");let fillColor=null,interiorColor=dict.getArray("IC");interiorColor&&(interiorColor=getRgbColor(interiorColor,null),fillColor=interiorColor?Array.from(interiorColor).map(c=>c/255):null);const fillAlpha=fillColor?strokeAlpha:null,borderWidth=this.borderStyle.width||1,borderAdjust=2*borderWidth,bbox=[this.data.lineCoordinates[0]-borderAdjust,this.data.lineCoordinates[1]-borderAdjust,this.data.lineCoordinates[2]+borderAdjust,this.data.lineCoordinates[3]+borderAdjust];_util2.Util.intersect(this.rectangle,bbox)||(this.rectangle=bbox),this._setDefaultAppearance({xref:parameters.xref,extra:`${borderWidth} w`,strokeColor,fillColor,strokeAlpha,fillAlpha,pointsCallback:(buffer,points)=>(buffer.push(`${lineCoordinates[0]} ${lineCoordinates[1]} m`,`${lineCoordinates[2]} ${lineCoordinates[3]} l`,"S"),[points[0].x-borderWidth,points[1].x+borderWidth,points[3].y-borderWidth,points[1].y+borderWidth])})}}};__name(_LineAnnotation,"LineAnnotation");let LineAnnotation=_LineAnnotation;const _SquareAnnotation=class extends MarkupAnnotation{static{__name2(this,"_SquareAnnotation")}constructor(parameters){if(super(parameters),this.data.annotationType=_util2.AnnotationType.SQUARE,!this.appearance){const strokeColor=this.color?Array.from(this.color).map(c=>c/255):[0,0,0],strokeAlpha=parameters.dict.get("CA");let fillColor=null,interiorColor=parameters.dict.getArray("IC");interiorColor&&(interiorColor=getRgbColor(interiorColor,null),fillColor=interiorColor?Array.from(interiorColor).map(c=>c/255):null);const fillAlpha=fillColor?strokeAlpha:null;if(this.borderStyle.width===0&&!fillColor)return;this._setDefaultAppearance({xref:parameters.xref,extra:`${this.borderStyle.width} w`,strokeColor,fillColor,strokeAlpha,fillAlpha,pointsCallback:(buffer,points)=>{const x=points[2].x+this.borderStyle.width/2,y=points[2].y+this.borderStyle.width/2,width=points[3].x-points[2].x-this.borderStyle.width,height=points[1].y-points[3].y-this.borderStyle.width;return buffer.push(`${x} ${y} ${width} ${height} re`),fillColor?buffer.push("B"):buffer.push("S"),[points[0].x,points[1].x,points[3].y,points[1].y]}})}}};__name(_SquareAnnotation,"SquareAnnotation");let SquareAnnotation=_SquareAnnotation;const _CircleAnnotation=class extends MarkupAnnotation{static{__name2(this,"_CircleAnnotation")}constructor(parameters){if(super(parameters),this.data.annotationType=_util2.AnnotationType.CIRCLE,!this.appearance){const strokeColor=this.color?Array.from(this.color).map(c=>c/255):[0,0,0],strokeAlpha=parameters.dict.get("CA");let fillColor=null,interiorColor=parameters.dict.getArray("IC");interiorColor&&(interiorColor=getRgbColor(interiorColor,null),fillColor=interiorColor?Array.from(interiorColor).map(c=>c/255):null);const fillAlpha=fillColor?strokeAlpha:null;if(this.borderStyle.width===0&&!fillColor)return;const controlPointsDistance=4/3*Math.tan(Math.PI/(2*4));this._setDefaultAppearance({xref:parameters.xref,extra:`${this.borderStyle.width} w`,strokeColor,fillColor,strokeAlpha,fillAlpha,pointsCallback:(buffer,points)=>{const x0=points[0].x+this.borderStyle.width/2,y0=points[0].y-this.borderStyle.width/2,x1=points[3].x-this.borderStyle.width/2,y1=points[3].y+this.borderStyle.width/2,xMid=x0+(x1-x0)/2,yMid=y0+(y1-y0)/2,xOffset=(x1-x0)/2*controlPointsDistance,yOffset=(y1-y0)/2*controlPointsDistance;return buffer.push(`${xMid} ${y1} m`,`${xMid+xOffset} ${y1} ${x1} ${yMid+yOffset} ${x1} ${yMid} c`,`${x1} ${yMid-yOffset} ${xMid+xOffset} ${y0} ${xMid} ${y0} c`,`${xMid-xOffset} ${y0} ${x0} ${yMid-yOffset} ${x0} ${yMid} c`,`${x0} ${yMid+yOffset} ${xMid-xOffset} ${y1} ${xMid} ${y1} c`,"h"),fillColor?buffer.push("B"):buffer.push("S"),[points[0].x,points[1].x,points[3].y,points[1].y]}})}}};__name(_CircleAnnotation,"CircleAnnotation");let CircleAnnotation=_CircleAnnotation;const _PolylineAnnotation=class extends MarkupAnnotation{static{__name2(this,"_PolylineAnnotation")}constructor(parameters){super(parameters);const{dict}=parameters;this.data.annotationType=_util2.AnnotationType.POLYLINE,this.data.vertices=[],this instanceof PolygonAnnotation||(this.setLineEndings(dict.getArray("LE")),this.data.lineEndings=this.lineEndings);const rawVertices=dict.getArray("Vertices");if(Array.isArray(rawVertices)){for(let i=0,ii=rawVertices.length;i<ii;i+=2)this.data.vertices.push({x:rawVertices[i],y:rawVertices[i+1]});if(!this.appearance){const strokeColor=this.color?Array.from(this.color).map(c=>c/255):[0,0,0],strokeAlpha=dict.get("CA"),borderWidth=this.borderStyle.width||1,borderAdjust=2*borderWidth,bbox=[1/0,1/0,-1/0,-1/0];for(const vertex of this.data.vertices)bbox[0]=Math.min(bbox[0],vertex.x-borderAdjust),bbox[1]=Math.min(bbox[1],vertex.y-borderAdjust),bbox[2]=Math.max(bbox[2],vertex.x+borderAdjust),bbox[3]=Math.max(bbox[3],vertex.y+borderAdjust);_util2.Util.intersect(this.rectangle,bbox)||(this.rectangle=bbox),this._setDefaultAppearance({xref:parameters.xref,extra:`${borderWidth} w`,strokeColor,strokeAlpha,pointsCallback:(buffer,points)=>{const vertices=this.data.vertices;for(let i=0,ii=vertices.length;i<ii;i++)buffer.push(`${vertices[i].x} ${vertices[i].y} ${i===0?"m":"l"}`);return buffer.push("S"),[points[0].x,points[1].x,points[3].y,points[1].y]}})}}}};__name(_PolylineAnnotation,"PolylineAnnotation");let PolylineAnnotation=_PolylineAnnotation;const _PolygonAnnotation=class extends PolylineAnnotation{static{__name2(this,"_PolygonAnnotation")}constructor(parameters){super(parameters),this.data.annotationType=_util2.AnnotationType.POLYGON}};__name(_PolygonAnnotation,"PolygonAnnotation");let PolygonAnnotation=_PolygonAnnotation;const _CaretAnnotation=class extends MarkupAnnotation{static{__name2(this,"_CaretAnnotation")}constructor(parameters){super(parameters),this.data.annotationType=_util2.AnnotationType.CARET}};__name(_CaretAnnotation,"CaretAnnotation");let CaretAnnotation=_CaretAnnotation;const _InkAnnotation=class extends MarkupAnnotation{static{__name2(this,"_InkAnnotation")}constructor(parameters){super(parameters),this.data.annotationType=_util2.AnnotationType.INK,this.data.inkLists=[];const rawInkLists=parameters.dict.getArray("InkList");if(!Array.isArray(rawInkLists))return;const xref=parameters.xref;for(let i=0,ii=rawInkLists.length;i<ii;++i){this.data.inkLists.push([]);for(let j=0,jj=rawInkLists[i].length;j<jj;j+=2)this.data.inkLists[i].push({x:xref.fetchIfRef(rawInkLists[i][j]),y:xref.fetchIfRef(rawInkLists[i][j+1])})}if(!this.appearance){const strokeColor=this.color?Array.from(this.color).map(c=>c/255):[0,0,0],strokeAlpha=parameters.dict.get("CA"),borderWidth=this.borderStyle.width||1,borderAdjust=2*borderWidth,bbox=[1/0,1/0,-1/0,-1/0];for(const inkLists of this.data.inkLists)for(const vertex of inkLists)bbox[0]=Math.min(bbox[0],vertex.x-borderAdjust),bbox[1]=Math.min(bbox[1],vertex.y-borderAdjust),bbox[2]=Math.max(bbox[2],vertex.x+borderAdjust),bbox[3]=Math.max(bbox[3],vertex.y+borderAdjust);_util2.Util.intersect(this.rectangle,bbox)||(this.rectangle=bbox),this._setDefaultAppearance({xref:parameters.xref,extra:`${borderWidth} w`,strokeColor,strokeAlpha,pointsCallback:(buffer,points)=>{for(const inkList of this.data.inkLists){for(let i=0,ii=inkList.length;i<ii;i++)buffer.push(`${inkList[i].x} ${inkList[i].y} ${i===0?"m":"l"}`);buffer.push("S")}return[points[0].x,points[1].x,points[3].y,points[1].y]}})}}static createNewDict(annotation,xref,{apRef,ap}){const{paths,rect,rotation}=annotation,ink=new _primitives.Dict(xref);ink.set("Type",_primitives.Name.get("Annot")),ink.set("Subtype",_primitives.Name.get("Ink")),ink.set("CreationDate",`D:${(0,_util2.getModificationDate)()}`),ink.set("Rect",rect),ink.set("InkList",paths.map(p=>p.points)),ink.set("F",4),ink.set("Border",[0,0,0]),ink.set("Rotate",rotation);const n=new _primitives.Dict(xref);return ink.set("AP",n),apRef?n.set("N",apRef):n.set("N",ap),ink}static async createNewAppearanceStream(annotation,xref,params){const{color,rect,rotation,paths,thickness,opacity}=annotation,[x1,y1,x2,y2]=rect;let w=x2-x1,h=y2-y1;rotation%180!==0&&([w,h]=[h,w]);const appearanceBuffer=[`${thickness} w 1 J 1 j`,`${(0,_default_appearance.getPdfColor)(color,!1)}`];opacity!==1&&appearanceBuffer.push("/R0 gs");const buffer=[];for(const{bezier}of paths){buffer.length=0,buffer.push(`${(0,_core_utils.numberToString)(bezier[0])} ${(0,_core_utils.numberToString)(bezier[1])} m`);for(let i=2,ii=bezier.length;i<ii;i+=6){const curve=bezier.slice(i,i+6).map(_core_utils.numberToString).join(" ");buffer.push(`${curve} c`)}buffer.push("S"),appearanceBuffer.push(buffer.join(`
`))}const appearance=appearanceBuffer.join(`
`),appearanceStreamDict=new _primitives.Dict(xref);if(appearanceStreamDict.set("FormType",1),appearanceStreamDict.set("Subtype",_primitives.Name.get("Form")),appearanceStreamDict.set("Type",_primitives.Name.get("XObject")),appearanceStreamDict.set("BBox",[0,0,w,h]),appearanceStreamDict.set("Length",appearance.length),rotation){const matrix=WidgetAnnotation._getRotationMatrix(rotation,w,h);appearanceStreamDict.set("Matrix",matrix)}if(opacity!==1){const resources=new _primitives.Dict(xref),extGState=new _primitives.Dict(xref),r0=new _primitives.Dict(xref);r0.set("CA",opacity),r0.set("Type",_primitives.Name.get("ExtGState")),extGState.set("R0",r0),resources.set("ExtGState",extGState),appearanceStreamDict.set("Resources",resources)}const ap=new _stream.StringStream(appearance);return ap.dict=appearanceStreamDict,ap}};__name(_InkAnnotation,"InkAnnotation");let InkAnnotation=_InkAnnotation;const _HighlightAnnotation=class extends MarkupAnnotation{static{__name2(this,"_HighlightAnnotation")}constructor(parameters){if(super(parameters),this.data.annotationType=_util2.AnnotationType.HIGHLIGHT,this.data.quadPoints=getQuadPoints(parameters.dict,null)){const resources=this.appearance&&this.appearance.dict.get("Resources");if(!this.appearance||!(resources&&resources.has("ExtGState"))){this.appearance&&(0,_util2.warn)("HighlightAnnotation - ignoring built-in appearance stream.");const fillColor=this.color?Array.from(this.color).map(c=>c/255):[1,1,0],fillAlpha=parameters.dict.get("CA");this._setDefaultAppearance({xref:parameters.xref,fillColor,blendMode:"Multiply",fillAlpha,pointsCallback:(buffer,points)=>(buffer.push(`${points[0].x} ${points[0].y} m`,`${points[1].x} ${points[1].y} l`,`${points[3].x} ${points[3].y} l`,`${points[2].x} ${points[2].y} l`,"f"),[points[0].x,points[1].x,points[3].y,points[1].y])})}}else this.data.hasPopup=!1}};__name(_HighlightAnnotation,"HighlightAnnotation");let HighlightAnnotation=_HighlightAnnotation;const _UnderlineAnnotation=class extends MarkupAnnotation{static{__name2(this,"_UnderlineAnnotation")}constructor(parameters){if(super(parameters),this.data.annotationType=_util2.AnnotationType.UNDERLINE,this.data.quadPoints=getQuadPoints(parameters.dict,null)){if(!this.appearance){const strokeColor=this.color?Array.from(this.color).map(c=>c/255):[0,0,0],strokeAlpha=parameters.dict.get("CA");this._setDefaultAppearance({xref:parameters.xref,extra:"[] 0 d 1 w",strokeColor,strokeAlpha,pointsCallback:(buffer,points)=>(buffer.push(`${points[2].x} ${points[2].y} m`,`${points[3].x} ${points[3].y} l`,"S"),[points[0].x,points[1].x,points[3].y,points[1].y])})}}else this.data.hasPopup=!1}};__name(_UnderlineAnnotation,"UnderlineAnnotation");let UnderlineAnnotation=_UnderlineAnnotation;const _SquigglyAnnotation=class extends MarkupAnnotation{static{__name2(this,"_SquigglyAnnotation")}constructor(parameters){if(super(parameters),this.data.annotationType=_util2.AnnotationType.SQUIGGLY,this.data.quadPoints=getQuadPoints(parameters.dict,null)){if(!this.appearance){const strokeColor=this.color?Array.from(this.color).map(c=>c/255):[0,0,0],strokeAlpha=parameters.dict.get("CA");this._setDefaultAppearance({xref:parameters.xref,extra:"[] 0 d 1 w",strokeColor,strokeAlpha,pointsCallback:(buffer,points)=>{const dy=(points[0].y-points[2].y)/6;let shift=dy,x=points[2].x;const y=points[2].y,xEnd=points[3].x;buffer.push(`${x} ${y+shift} m`);do x+=2,shift=shift===0?dy:0,buffer.push(`${x} ${y+shift} l`);while(x<xEnd);return buffer.push("S"),[points[2].x,xEnd,y-2*dy,y+2*dy]}})}}else this.data.hasPopup=!1}};__name(_SquigglyAnnotation,"SquigglyAnnotation");let SquigglyAnnotation=_SquigglyAnnotation;const _StrikeOutAnnotation=class extends MarkupAnnotation{static{__name2(this,"_StrikeOutAnnotation")}constructor(parameters){if(super(parameters),this.data.annotationType=_util2.AnnotationType.STRIKEOUT,this.data.quadPoints=getQuadPoints(parameters.dict,null)){if(!this.appearance){const strokeColor=this.color?Array.from(this.color).map(c=>c/255):[0,0,0],strokeAlpha=parameters.dict.get("CA");this._setDefaultAppearance({xref:parameters.xref,extra:"[] 0 d 1 w",strokeColor,strokeAlpha,pointsCallback:(buffer,points)=>(buffer.push(`${(points[0].x+points[2].x)/2} ${(points[0].y+points[2].y)/2} m`,`${(points[1].x+points[3].x)/2} ${(points[1].y+points[3].y)/2} l`,"S"),[points[0].x,points[1].x,points[3].y,points[1].y])})}}else this.data.hasPopup=!1}};__name(_StrikeOutAnnotation,"StrikeOutAnnotation");let StrikeOutAnnotation=_StrikeOutAnnotation;const _StampAnnotation=class extends MarkupAnnotation{static{__name2(this,"_StampAnnotation")}constructor(parameters){super(parameters),this.data.annotationType=_util2.AnnotationType.STAMP}};__name(_StampAnnotation,"StampAnnotation");let StampAnnotation=_StampAnnotation;const _FileAttachmentAnnotation=class extends MarkupAnnotation{static{__name2(this,"_FileAttachmentAnnotation")}constructor(parameters){super(parameters);const file=new _file_spec.FileSpec(parameters.dict.get("FS"),parameters.xref);this.data.annotationType=_util2.AnnotationType.FILEATTACHMENT,this.data.file=file.serializable}};__name(_FileAttachmentAnnotation,"FileAttachmentAnnotation");let FileAttachmentAnnotation=_FileAttachmentAnnotation},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.createDefaultAppearance=createDefaultAppearance,exports3.getPdfColor=getPdfColor,exports3.parseDefaultAppearance=parseDefaultAppearance;var _core_utils=__w_pdfjs_require__3(6),_util2=__w_pdfjs_require__3(2),_colorspace=__w_pdfjs_require__3(14),_evaluator=__w_pdfjs_require__3(15),_primitives=__w_pdfjs_require__3(5),_stream=__w_pdfjs_require__3(10);const _DefaultAppearanceEvaluator=class extends _evaluator.EvaluatorPreprocessor{static{__name2(this,"_DefaultAppearanceEvaluator")}constructor(str){super(new _stream.StringStream(str))}parse(){const operation={fn:0,args:[]},result={fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3)};try{for(;operation.args.length=0,!!this.read(operation);){if(this.savedStatesDepth!==0)continue;const{fn,args}=operation;switch(fn|0){case _util2.OPS.setFont:const[fontName,fontSize]=args;fontName instanceof _primitives.Name&&(result.fontName=fontName.name),typeof fontSize=="number"&&fontSize>0&&(result.fontSize=fontSize);break;case _util2.OPS.setFillRGBColor:_colorspace.ColorSpace.singletons.rgb.getRgbItem(args,0,result.fontColor,0);break;case _util2.OPS.setFillGray:_colorspace.ColorSpace.singletons.gray.getRgbItem(args,0,result.fontColor,0);break;case _util2.OPS.setFillColorSpace:_colorspace.ColorSpace.singletons.cmyk.getRgbItem(args,0,result.fontColor,0);break}}}catch(reason){(0,_util2.warn)(`parseDefaultAppearance - ignoring errors: "${reason}".`)}return result}};__name(_DefaultAppearanceEvaluator,"DefaultAppearanceEvaluator");let DefaultAppearanceEvaluator=_DefaultAppearanceEvaluator;function parseDefaultAppearance(str){return new DefaultAppearanceEvaluator(str).parse()}__name2(parseDefaultAppearance,"parseDefaultAppearance"),__name(parseDefaultAppearance,"parseDefaultAppearance");function getPdfColor(color,isFill){if(color[0]===color[1]&&color[1]===color[2]){const gray=color[0]/255;return`${(0,_core_utils.numberToString)(gray)} ${isFill?"g":"G"}`}return Array.from(color).map(c=>(0,_core_utils.numberToString)(c/255)).join(" ")+` ${isFill?"rg":"RG"}`}__name2(getPdfColor,"getPdfColor"),__name(getPdfColor,"getPdfColor");function createDefaultAppearance({fontSize,fontName,fontColor}){return`/${(0,_core_utils.escapePDFName)(fontName)} ${fontSize} Tf ${getPdfColor(fontColor,!0)}`}__name2(createDefaultAppearance,"createDefaultAppearance"),__name(createDefaultAppearance,"createDefaultAppearance")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.ColorSpace=void 0;var _util2=__w_pdfjs_require__3(2),_primitives=__w_pdfjs_require__3(5),_base_stream=__w_pdfjs_require__3(7),_core_utils=__w_pdfjs_require__3(6);function resizeRgbImage(src,dest,w1,h1,w2,h2,alpha01){alpha01=alpha01!==1?0:alpha01;const xRatio=w1/w2,yRatio=h1/h2;let newIndex=0,oldIndex;const xScaled=new Uint16Array(w2),w1Scanline=w1*3;for(let i=0;i<w2;i++)xScaled[i]=Math.floor(i*xRatio)*3;for(let i=0;i<h2;i++){const py=Math.floor(i*yRatio)*w1Scanline;for(let j=0;j<w2;j++)oldIndex=py+xScaled[j],dest[newIndex++]=src[oldIndex++],dest[newIndex++]=src[oldIndex++],dest[newIndex++]=src[oldIndex++],newIndex+=alpha01}}__name2(resizeRgbImage,"resizeRgbImage"),__name(resizeRgbImage,"resizeRgbImage");const _ColorSpace=class _ColorSpace2{static{__name2(this,"_ColorSpace")}constructor(name,numComps){this.constructor===_ColorSpace2&&(0,_util2.unreachable)("Cannot initialize ColorSpace."),this.name=name,this.numComps=numComps}getRgb(src,srcOffset){const rgb=new Uint8ClampedArray(3);return this.getRgbItem(src,srcOffset,rgb,0),rgb}getRgbItem(src,srcOffset,dest,destOffset){(0,_util2.unreachable)("Should not call ColorSpace.getRgbItem")}getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){(0,_util2.unreachable)("Should not call ColorSpace.getRgbBuffer")}getOutputLength(inputLength,alpha01){(0,_util2.unreachable)("Should not call ColorSpace.getOutputLength")}isPassthrough(bits){return!1}isDefaultDecode(decodeMap,bpc){return _ColorSpace2.isDefaultDecode(decodeMap,this.numComps)}fillRgb(dest,originalWidth,originalHeight,width,height,actualHeight,bpc,comps,alpha01){const count=originalWidth*originalHeight;let rgbBuf=null;const numComponentColors=1<<bpc,needsResizing=originalHeight!==height||originalWidth!==width;if(this.isPassthrough(bpc))rgbBuf=comps;else if(this.numComps===1&&count>numComponentColors&&this.name!=="DeviceGray"&&this.name!=="DeviceRGB"){const allColors=bpc<=8?new Uint8Array(numComponentColors):new Uint16Array(numComponentColors);for(let i=0;i<numComponentColors;i++)allColors[i]=i;const colorMap=new Uint8ClampedArray(numComponentColors*3);if(this.getRgbBuffer(allColors,0,numComponentColors,colorMap,0,bpc,0),needsResizing){rgbBuf=new Uint8Array(count*3);let rgbPos=0;for(let i=0;i<count;++i){const key=comps[i]*3;rgbBuf[rgbPos++]=colorMap[key],rgbBuf[rgbPos++]=colorMap[key+1],rgbBuf[rgbPos++]=colorMap[key+2]}}else{let destPos=0;for(let i=0;i<count;++i){const key=comps[i]*3;dest[destPos++]=colorMap[key],dest[destPos++]=colorMap[key+1],dest[destPos++]=colorMap[key+2],destPos+=alpha01}}}else needsResizing?(rgbBuf=new Uint8ClampedArray(count*3),this.getRgbBuffer(comps,0,count,rgbBuf,0,bpc,0)):this.getRgbBuffer(comps,0,width*actualHeight,dest,0,bpc,alpha01);if(rgbBuf)if(needsResizing)resizeRgbImage(rgbBuf,dest,originalWidth,originalHeight,width,height,alpha01);else{let destPos=0,rgbPos=0;for(let i=0,ii=width*actualHeight;i<ii;i++)dest[destPos++]=rgbBuf[rgbPos++],dest[destPos++]=rgbBuf[rgbPos++],dest[destPos++]=rgbBuf[rgbPos++],destPos+=alpha01}}get usesZeroToOneRange(){return(0,_util2.shadow)(this,"usesZeroToOneRange",!0)}static _cache(cacheKey,xref,localColorSpaceCache,parsedColorSpace){if(!localColorSpaceCache)throw new Error('ColorSpace._cache - expected "localColorSpaceCache" argument.');if(!parsedColorSpace)throw new Error('ColorSpace._cache - expected "parsedColorSpace" argument.');let csName,csRef;cacheKey instanceof _primitives.Ref&&(csRef=cacheKey,cacheKey=xref.fetch(cacheKey)),cacheKey instanceof _primitives.Name&&(csName=cacheKey.name),(csName||csRef)&&localColorSpaceCache.set(csName,csRef,parsedColorSpace)}static getCached(cacheKey,xref,localColorSpaceCache){if(!localColorSpaceCache)throw new Error('ColorSpace.getCached - expected "localColorSpaceCache" argument.');if(cacheKey instanceof _primitives.Ref){const localColorSpace=localColorSpaceCache.getByRef(cacheKey);if(localColorSpace)return localColorSpace;try{cacheKey=xref.fetch(cacheKey)}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex}}if(cacheKey instanceof _primitives.Name){const localColorSpace=localColorSpaceCache.getByName(cacheKey.name);if(localColorSpace)return localColorSpace}return null}static async parseAsync({cs,xref,resources=null,pdfFunctionFactory,localColorSpaceCache}){const parsedColorSpace=this._parse(cs,xref,resources,pdfFunctionFactory);return this._cache(cs,xref,localColorSpaceCache,parsedColorSpace),parsedColorSpace}static parse({cs,xref,resources=null,pdfFunctionFactory,localColorSpaceCache}){const cachedColorSpace=this.getCached(cs,xref,localColorSpaceCache);if(cachedColorSpace)return cachedColorSpace;const parsedColorSpace=this._parse(cs,xref,resources,pdfFunctionFactory);return this._cache(cs,xref,localColorSpaceCache,parsedColorSpace),parsedColorSpace}static _parse(cs,xref,resources=null,pdfFunctionFactory){if(cs=xref.fetchIfRef(cs),cs instanceof _primitives.Name)switch(cs.name){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"Pattern":return new PatternCS(null);default:if(resources instanceof _primitives.Dict){const colorSpaces=resources.get("ColorSpace");if(colorSpaces instanceof _primitives.Dict){const resourcesCS=colorSpaces.get(cs.name);if(resourcesCS){if(resourcesCS instanceof _primitives.Name)return this._parse(resourcesCS,xref,resources,pdfFunctionFactory);cs=resourcesCS;break}}}throw new _util2.FormatError(`Unrecognized ColorSpace: ${cs.name}`)}if(Array.isArray(cs)){const mode=xref.fetchIfRef(cs[0]).name;let params,numComps,baseCS,whitePoint,blackPoint,gamma;switch(mode){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"CalGray":return params=xref.fetchIfRef(cs[1]),whitePoint=params.getArray("WhitePoint"),blackPoint=params.getArray("BlackPoint"),gamma=params.get("Gamma"),new CalGrayCS(whitePoint,blackPoint,gamma);case"CalRGB":params=xref.fetchIfRef(cs[1]),whitePoint=params.getArray("WhitePoint"),blackPoint=params.getArray("BlackPoint"),gamma=params.getArray("Gamma");const matrix=params.getArray("Matrix");return new CalRGBCS(whitePoint,blackPoint,gamma,matrix);case"ICCBased":const dict=xref.fetchIfRef(cs[1]).dict;numComps=dict.get("N");const alt=dict.get("Alternate");if(alt){const altCS=this._parse(alt,xref,resources,pdfFunctionFactory);if(altCS.numComps===numComps)return altCS;(0,_util2.warn)("ICCBased color space: Ignoring incorrect /Alternate entry.")}if(numComps===1)return this.singletons.gray;if(numComps===3)return this.singletons.rgb;if(numComps===4)return this.singletons.cmyk;break;case"Pattern":return baseCS=cs[1]||null,baseCS&&(baseCS=this._parse(baseCS,xref,resources,pdfFunctionFactory)),new PatternCS(baseCS);case"I":case"Indexed":baseCS=this._parse(cs[1],xref,resources,pdfFunctionFactory);const hiVal=xref.fetchIfRef(cs[2])+1,lookup=xref.fetchIfRef(cs[3]);return new IndexedCS(baseCS,hiVal,lookup);case"Separation":case"DeviceN":const name=xref.fetchIfRef(cs[1]);numComps=Array.isArray(name)?name.length:1,baseCS=this._parse(cs[2],xref,resources,pdfFunctionFactory);const tintFn=pdfFunctionFactory.create(cs[3]);return new AlternateCS(numComps,baseCS,tintFn);case"Lab":params=xref.fetchIfRef(cs[1]),whitePoint=params.getArray("WhitePoint"),blackPoint=params.getArray("BlackPoint");const range=params.getArray("Range");return new LabCS(whitePoint,blackPoint,range);default:throw new _util2.FormatError(`Unimplemented ColorSpace object: ${mode}`)}}throw new _util2.FormatError(`Unrecognized ColorSpace object: ${cs}`)}static isDefaultDecode(decode,numComps){if(!Array.isArray(decode))return!0;if(numComps*2!==decode.length)return(0,_util2.warn)("The decode map is not the correct length"),!0;for(let i=0,ii=decode.length;i<ii;i+=2)if(decode[i]!==0||decode[i+1]!==1)return!1;return!0}static get singletons(){return(0,_util2.shadow)(this,"singletons",{get gray(){return(0,_util2.shadow)(this,"gray",new DeviceGrayCS)},get rgb(){return(0,_util2.shadow)(this,"rgb",new DeviceRgbCS)},get cmyk(){return(0,_util2.shadow)(this,"cmyk",new DeviceCmykCS)}})}};__name(_ColorSpace,"ColorSpace");let ColorSpace=_ColorSpace;exports3.ColorSpace=ColorSpace;const _AlternateCS=class extends ColorSpace{static{__name2(this,"_AlternateCS")}constructor(numComps,base,tintFn){super("Alternate",numComps),this.base=base,this.tintFn=tintFn,this.tmpBuf=new Float32Array(base.numComps)}getRgbItem(src,srcOffset,dest,destOffset){const tmpBuf=this.tmpBuf;this.tintFn(src,srcOffset,tmpBuf,0),this.base.getRgbItem(tmpBuf,0,dest,destOffset)}getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){const tintFn=this.tintFn,base=this.base,scale=1/((1<<bits)-1),baseNumComps=base.numComps,usesZeroToOneRange=base.usesZeroToOneRange,isPassthrough=(base.isPassthrough(8)||!usesZeroToOneRange)&&alpha01===0;let pos=isPassthrough?destOffset:0;const baseBuf=isPassthrough?dest:new Uint8ClampedArray(baseNumComps*count),numComps=this.numComps,scaled=new Float32Array(numComps),tinted=new Float32Array(baseNumComps);let i,j;for(i=0;i<count;i++){for(j=0;j<numComps;j++)scaled[j]=src[srcOffset++]*scale;if(tintFn(scaled,0,tinted,0),usesZeroToOneRange)for(j=0;j<baseNumComps;j++)baseBuf[pos++]=tinted[j]*255;else base.getRgbItem(tinted,0,baseBuf,pos),pos+=baseNumComps}isPassthrough||base.getRgbBuffer(baseBuf,0,count,dest,destOffset,8,alpha01)}getOutputLength(inputLength,alpha01){return this.base.getOutputLength(inputLength*this.base.numComps/this.numComps,alpha01)}};__name(_AlternateCS,"AlternateCS");let AlternateCS=_AlternateCS;const _PatternCS=class extends ColorSpace{static{__name2(this,"_PatternCS")}constructor(baseCS){super("Pattern",null),this.base=baseCS}isDefaultDecode(decodeMap,bpc){(0,_util2.unreachable)("Should not call PatternCS.isDefaultDecode")}};__name(_PatternCS,"PatternCS");let PatternCS=_PatternCS;const _IndexedCS=class extends ColorSpace{static{__name2(this,"_IndexedCS")}constructor(base,highVal,lookup){super("Indexed",1),this.base=base,this.highVal=highVal;const length=base.numComps*highVal;if(this.lookup=new Uint8Array(length),lookup instanceof _base_stream.BaseStream){const bytes=lookup.getBytes(length);this.lookup.set(bytes)}else if(typeof lookup=="string")for(let i=0;i<length;++i)this.lookup[i]=lookup.charCodeAt(i)&255;else throw new _util2.FormatError(`IndexedCS - unrecognized lookup table: ${lookup}`)}getRgbItem(src,srcOffset,dest,destOffset){const numComps=this.base.numComps,start=src[srcOffset]*numComps;this.base.getRgbBuffer(this.lookup,start,1,dest,destOffset,8,0)}getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){const base=this.base,numComps=base.numComps,outputDelta=base.getOutputLength(numComps,alpha01),lookup=this.lookup;for(let i=0;i<count;++i){const lookupPos=src[srcOffset++]*numComps;base.getRgbBuffer(lookup,lookupPos,1,dest,destOffset,8,alpha01),destOffset+=outputDelta}}getOutputLength(inputLength,alpha01){return this.base.getOutputLength(inputLength*this.base.numComps,alpha01)}isDefaultDecode(decodeMap,bpc){return Array.isArray(decodeMap)?decodeMap.length!==2?((0,_util2.warn)("Decode map length is not correct"),!0):!Number.isInteger(bpc)||bpc<1?((0,_util2.warn)("Bits per component is not correct"),!0):decodeMap[0]===0&&decodeMap[1]===(1<<bpc)-1:!0}};__name(_IndexedCS,"IndexedCS");let IndexedCS=_IndexedCS;const _DeviceGrayCS=class extends ColorSpace{static{__name2(this,"_DeviceGrayCS")}constructor(){super("DeviceGray",1)}getRgbItem(src,srcOffset,dest,destOffset){const c=src[srcOffset]*255;dest[destOffset]=dest[destOffset+1]=dest[destOffset+2]=c}getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){const scale=255/((1<<bits)-1);let j=srcOffset,q=destOffset;for(let i=0;i<count;++i){const c=scale*src[j++];dest[q++]=c,dest[q++]=c,dest[q++]=c,q+=alpha01}}getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01)}};__name(_DeviceGrayCS,"DeviceGrayCS");let DeviceGrayCS=_DeviceGrayCS;const _DeviceRgbCS=class extends ColorSpace{static{__name2(this,"_DeviceRgbCS")}constructor(){super("DeviceRGB",3)}getRgbItem(src,srcOffset,dest,destOffset){dest[destOffset]=src[srcOffset]*255,dest[destOffset+1]=src[srcOffset+1]*255,dest[destOffset+2]=src[srcOffset+2]*255}getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){if(bits===8&&alpha01===0){dest.set(src.subarray(srcOffset,srcOffset+count*3),destOffset);return}const scale=255/((1<<bits)-1);let j=srcOffset,q=destOffset;for(let i=0;i<count;++i)dest[q++]=scale*src[j++],dest[q++]=scale*src[j++],dest[q++]=scale*src[j++],q+=alpha01}getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01)/3|0}isPassthrough(bits){return bits===8}};__name(_DeviceRgbCS,"DeviceRgbCS");let DeviceRgbCS=_DeviceRgbCS;const DeviceCmykCS=__name(__name2(function(){function convertToRgb(src,srcOffset,srcScale,dest,destOffset){const c=src[srcOffset]*srcScale,m=src[srcOffset+1]*srcScale,y=src[srcOffset+2]*srcScale,k=src[srcOffset+3]*srcScale;dest[destOffset]=255+c*(-4.387332384609988*c+54.48615194189176*m+18.82290502165302*y+212.25662451639585*k+-285.2331026137004)+m*(1.7149763477362134*m-5.6096736904047315*y+-17.873870861415444*k-5.497006427196366)+y*(-2.5217340131683033*y-21.248923337353073*k+17.5119270841813)+k*(-21.86122147463605*k-189.48180835922747),dest[destOffset+1]=255+c*(8.841041422036149*c+60.118027045597366*m+6.871425592049007*y+31.159100130055922*k+-79.2970844816548)+m*(-15.310361306967817*m+17.575251261109482*y+131.35250912493976*k-190.9453302588951)+y*(4.444339102852739*y+9.8632861493405*k-24.86741582555878)+k*(-20.737325471181034*k-187.80453709719578),dest[destOffset+2]=255+c*(.8842522430003296*c+8.078677503112928*m+30.89978309703729*y-.23883238689178934*k+-14.183576799673286)+m*(10.49593273432072*m+63.02378494754052*y+50.606957656360734*k-112.23884253719248)+y*(.03296041114873217*y+115.60384449646641*k+-193.58209356861505)+k*(-22.33816807309886*k-180.12613974708367)}__name2(convertToRgb,"convertToRgb"),__name(convertToRgb,"convertToRgb");const _DeviceCmykCS=class extends ColorSpace{static{__name2(this,"_DeviceCmykCS")}constructor(){super("DeviceCMYK",4)}getRgbItem(src,srcOffset,dest,destOffset){convertToRgb(src,srcOffset,1,dest,destOffset)}getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){const scale=1/((1<<bits)-1);for(let i=0;i<count;i++)convertToRgb(src,srcOffset,scale,dest,destOffset),srcOffset+=4,destOffset+=3+alpha01}getOutputLength(inputLength,alpha01){return inputLength/4*(3+alpha01)|0}};return __name(_DeviceCmykCS,"DeviceCmykCS"),_DeviceCmykCS},"DeviceCmykCSClosure"),"DeviceCmykCSClosure")(),CalGrayCS=__name(__name2(function(){function convertToRgb(cs,src,srcOffset,dest,destOffset,scale){const AG=(src[srcOffset]*scale)**cs.G,L=cs.YW*AG,val=Math.max(295.8*L**.3333333333333333-40.8,0);dest[destOffset]=val,dest[destOffset+1]=val,dest[destOffset+2]=val}__name2(convertToRgb,"convertToRgb"),__name(convertToRgb,"convertToRgb");const _CalGrayCS=class extends ColorSpace{static{__name2(this,"_CalGrayCS")}constructor(whitePoint,blackPoint,gamma){if(super("CalGray",1),!whitePoint)throw new _util2.FormatError("WhitePoint missing - required for color space CalGray");if(blackPoint=blackPoint||[0,0,0],gamma=gamma||1,this.XW=whitePoint[0],this.YW=whitePoint[1],this.ZW=whitePoint[2],this.XB=blackPoint[0],this.YB=blackPoint[1],this.ZB=blackPoint[2],this.G=gamma,this.XW<0||this.ZW<0||this.YW!==1)throw new _util2.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(this.XB<0||this.YB<0||this.ZB<0)&&((0,_util2.info)(`Invalid BlackPoint for ${this.name}, falling back to default.`),this.XB=this.YB=this.ZB=0),(this.XB!==0||this.YB!==0||this.ZB!==0)&&(0,_util2.warn)(`${this.name}, BlackPoint: XB: ${this.XB}, YB: ${this.YB}, ZB: ${this.ZB}, only default values are supported.`),this.G<1&&((0,_util2.info)(`Invalid Gamma: ${this.G} for ${this.name}, falling back to default.`),this.G=1)}getRgbItem(src,srcOffset,dest,destOffset){convertToRgb(this,src,srcOffset,dest,destOffset,1)}getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){const scale=1/((1<<bits)-1);for(let i=0;i<count;++i)convertToRgb(this,src,srcOffset,dest,destOffset,scale),srcOffset+=1,destOffset+=3+alpha01}getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01)}};return __name(_CalGrayCS,"CalGrayCS"),_CalGrayCS},"CalGrayCSClosure"),"CalGrayCSClosure")(),CalRGBCS=__name(__name2(function(){const BRADFORD_SCALE_MATRIX=new Float32Array([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),BRADFORD_SCALE_INVERSE_MATRIX=new Float32Array([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]),SRGB_D65_XYZ_TO_RGB_MATRIX=new Float32Array([3.2404542,-1.5371385,-.4985314,-.969266,1.8760108,.041556,.0556434,-.2040259,1.0572252]),FLAT_WHITEPOINT_MATRIX=new Float32Array([1,1,1]),tempNormalizeMatrix=new Float32Array(3),tempConvertMatrix1=new Float32Array(3),tempConvertMatrix2=new Float32Array(3),DECODE_L_CONSTANT=((8+16)/116)**3/8;function matrixProduct(a,b,result){result[0]=a[0]*b[0]+a[1]*b[1]+a[2]*b[2],result[1]=a[3]*b[0]+a[4]*b[1]+a[5]*b[2],result[2]=a[6]*b[0]+a[7]*b[1]+a[8]*b[2]}__name2(matrixProduct,"matrixProduct"),__name(matrixProduct,"matrixProduct");function convertToFlat(sourceWhitePoint,LMS,result){result[0]=LMS[0]*1/sourceWhitePoint[0],result[1]=LMS[1]*1/sourceWhitePoint[1],result[2]=LMS[2]*1/sourceWhitePoint[2]}__name2(convertToFlat,"convertToFlat"),__name(convertToFlat,"convertToFlat");function convertToD65(sourceWhitePoint,LMS,result){result[0]=LMS[0]*.95047/sourceWhitePoint[0],result[1]=LMS[1]*1/sourceWhitePoint[1],result[2]=LMS[2]*1.08883/sourceWhitePoint[2]}__name2(convertToD65,"convertToD65"),__name(convertToD65,"convertToD65");function sRGBTransferFunction(color){return color<=.0031308?adjustToRange(0,1,12.92*color):color>=.99554525?1:adjustToRange(0,1,(1+.055)*color**(1/2.4)-.055)}__name2(sRGBTransferFunction,"sRGBTransferFunction"),__name(sRGBTransferFunction,"sRGBTransferFunction");function adjustToRange(min,max,value){return Math.max(min,Math.min(max,value))}__name2(adjustToRange,"adjustToRange"),__name(adjustToRange,"adjustToRange");function decodeL(L){return L<0?-decodeL(-L):L>8?((L+16)/116)**3:L*DECODE_L_CONSTANT}__name2(decodeL,"decodeL"),__name(decodeL,"decodeL");function compensateBlackPoint(sourceBlackPoint,XYZ_Flat,result){if(sourceBlackPoint[0]===0&&sourceBlackPoint[1]===0&&sourceBlackPoint[2]===0){result[0]=XYZ_Flat[0],result[1]=XYZ_Flat[1],result[2]=XYZ_Flat[2];return}const zeroDecodeL=decodeL(0),X_DST=zeroDecodeL,X_SRC=decodeL(sourceBlackPoint[0]),Y_DST=zeroDecodeL,Y_SRC=decodeL(sourceBlackPoint[1]),Z_DST=zeroDecodeL,Z_SRC=decodeL(sourceBlackPoint[2]),X_Scale=(1-X_DST)/(1-X_SRC),X_Offset=1-X_Scale,Y_Scale=(1-Y_DST)/(1-Y_SRC),Y_Offset=1-Y_Scale,Z_Scale=(1-Z_DST)/(1-Z_SRC),Z_Offset=1-Z_Scale;result[0]=XYZ_Flat[0]*X_Scale+X_Offset,result[1]=XYZ_Flat[1]*Y_Scale+Y_Offset,result[2]=XYZ_Flat[2]*Z_Scale+Z_Offset}__name2(compensateBlackPoint,"compensateBlackPoint"),__name(compensateBlackPoint,"compensateBlackPoint");function normalizeWhitePointToFlat(sourceWhitePoint,XYZ_In,result){if(sourceWhitePoint[0]===1&&sourceWhitePoint[2]===1){result[0]=XYZ_In[0],result[1]=XYZ_In[1],result[2]=XYZ_In[2];return}const LMS=result;matrixProduct(BRADFORD_SCALE_MATRIX,XYZ_In,LMS);const LMS_Flat=tempNormalizeMatrix;convertToFlat(sourceWhitePoint,LMS,LMS_Flat),matrixProduct(BRADFORD_SCALE_INVERSE_MATRIX,LMS_Flat,result)}__name2(normalizeWhitePointToFlat,"normalizeWhitePointToFlat"),__name(normalizeWhitePointToFlat,"normalizeWhitePointToFlat");function normalizeWhitePointToD65(sourceWhitePoint,XYZ_In,result){const LMS=result;matrixProduct(BRADFORD_SCALE_MATRIX,XYZ_In,LMS);const LMS_D65=tempNormalizeMatrix;convertToD65(sourceWhitePoint,LMS,LMS_D65),matrixProduct(BRADFORD_SCALE_INVERSE_MATRIX,LMS_D65,result)}__name2(normalizeWhitePointToD65,"normalizeWhitePointToD65"),__name(normalizeWhitePointToD65,"normalizeWhitePointToD65");function convertToRgb(cs,src,srcOffset,dest,destOffset,scale){const A=adjustToRange(0,1,src[srcOffset]*scale),B=adjustToRange(0,1,src[srcOffset+1]*scale),C=adjustToRange(0,1,src[srcOffset+2]*scale),AGR=A===1?1:A**cs.GR,BGG=B===1?1:B**cs.GG,CGB=C===1?1:C**cs.GB,X=cs.MXA*AGR+cs.MXB*BGG+cs.MXC*CGB,Y=cs.MYA*AGR+cs.MYB*BGG+cs.MYC*CGB,Z=cs.MZA*AGR+cs.MZB*BGG+cs.MZC*CGB,XYZ=tempConvertMatrix1;XYZ[0]=X,XYZ[1]=Y,XYZ[2]=Z;const XYZ_Flat=tempConvertMatrix2;normalizeWhitePointToFlat(cs.whitePoint,XYZ,XYZ_Flat);const XYZ_Black=tempConvertMatrix1;compensateBlackPoint(cs.blackPoint,XYZ_Flat,XYZ_Black);const XYZ_D65=tempConvertMatrix2;normalizeWhitePointToD65(FLAT_WHITEPOINT_MATRIX,XYZ_Black,XYZ_D65);const SRGB=tempConvertMatrix1;matrixProduct(SRGB_D65_XYZ_TO_RGB_MATRIX,XYZ_D65,SRGB),dest[destOffset]=sRGBTransferFunction(SRGB[0])*255,dest[destOffset+1]=sRGBTransferFunction(SRGB[1])*255,dest[destOffset+2]=sRGBTransferFunction(SRGB[2])*255}__name2(convertToRgb,"convertToRgb"),__name(convertToRgb,"convertToRgb");const _CalRGBCS=class extends ColorSpace{static{__name2(this,"_CalRGBCS")}constructor(whitePoint,blackPoint,gamma,matrix){if(super("CalRGB",3),!whitePoint)throw new _util2.FormatError("WhitePoint missing - required for color space CalRGB");blackPoint=blackPoint||new Float32Array(3),gamma=gamma||new Float32Array([1,1,1]),matrix=matrix||new Float32Array([1,0,0,0,1,0,0,0,1]);const XW=whitePoint[0],YW=whitePoint[1],ZW=whitePoint[2];this.whitePoint=whitePoint;const XB=blackPoint[0],YB=blackPoint[1],ZB=blackPoint[2];if(this.blackPoint=blackPoint,this.GR=gamma[0],this.GG=gamma[1],this.GB=gamma[2],this.MXA=matrix[0],this.MYA=matrix[1],this.MZA=matrix[2],this.MXB=matrix[3],this.MYB=matrix[4],this.MZB=matrix[5],this.MXC=matrix[6],this.MYC=matrix[7],this.MZC=matrix[8],XW<0||ZW<0||YW!==1)throw new _util2.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(XB<0||YB<0||ZB<0)&&((0,_util2.info)(`Invalid BlackPoint for ${this.name} [${XB}, ${YB}, ${ZB}], falling back to default.`),this.blackPoint=new Float32Array(3)),(this.GR<0||this.GG<0||this.GB<0)&&((0,_util2.info)(`Invalid Gamma [${this.GR}, ${this.GG}, ${this.GB}] for ${this.name}, falling back to default.`),this.GR=this.GG=this.GB=1)}getRgbItem(src,srcOffset,dest,destOffset){convertToRgb(this,src,srcOffset,dest,destOffset,1)}getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){const scale=1/((1<<bits)-1);for(let i=0;i<count;++i)convertToRgb(this,src,srcOffset,dest,destOffset,scale),srcOffset+=3,destOffset+=3+alpha01}getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01)/3|0}};return __name(_CalRGBCS,"CalRGBCS"),_CalRGBCS},"CalRGBCSClosure"),"CalRGBCSClosure")(),LabCS=__name(__name2(function(){function fn_g(x){let result;return x>=6/29?result=x**3:result=108/841*(x-4/29),result}__name2(fn_g,"fn_g"),__name(fn_g,"fn_g");function decode(value,high1,low2,high2){return low2+value*(high2-low2)/high1}__name2(decode,"decode"),__name(decode,"decode");function convertToRgb(cs,src,srcOffset,maxVal,dest,destOffset){let Ls=src[srcOffset],as=src[srcOffset+1],bs=src[srcOffset+2];maxVal!==!1&&(Ls=decode(Ls,maxVal,0,100),as=decode(as,maxVal,cs.amin,cs.amax),bs=decode(bs,maxVal,cs.bmin,cs.bmax)),as>cs.amax?as=cs.amax:as<cs.amin&&(as=cs.amin),bs>cs.bmax?bs=cs.bmax:bs<cs.bmin&&(bs=cs.bmin);const M=(Ls+16)/116,L=M+as/500,N=M-bs/200,X=cs.XW*fn_g(L),Y=cs.YW*fn_g(M),Z=cs.ZW*fn_g(N);let r,g,b;cs.ZW<1?(r=X*3.1339+Y*-1.617+Z*-.4906,g=X*-.9785+Y*1.916+Z*.0333,b=X*.072+Y*-.229+Z*1.4057):(r=X*3.2406+Y*-1.5372+Z*-.4986,g=X*-.9689+Y*1.8758+Z*.0415,b=X*.0557+Y*-.204+Z*1.057),dest[destOffset]=Math.sqrt(r)*255,dest[destOffset+1]=Math.sqrt(g)*255,dest[destOffset+2]=Math.sqrt(b)*255}__name2(convertToRgb,"convertToRgb"),__name(convertToRgb,"convertToRgb");const _LabCS=class extends ColorSpace{static{__name2(this,"_LabCS")}constructor(whitePoint,blackPoint,range){if(super("Lab",3),!whitePoint)throw new _util2.FormatError("WhitePoint missing - required for color space Lab");if(blackPoint=blackPoint||[0,0,0],range=range||[-100,100,-100,100],this.XW=whitePoint[0],this.YW=whitePoint[1],this.ZW=whitePoint[2],this.amin=range[0],this.amax=range[1],this.bmin=range[2],this.bmax=range[3],this.XB=blackPoint[0],this.YB=blackPoint[1],this.ZB=blackPoint[2],this.XW<0||this.ZW<0||this.YW!==1)throw new _util2.FormatError("Invalid WhitePoint components, no fallback available");(this.XB<0||this.YB<0||this.ZB<0)&&((0,_util2.info)("Invalid BlackPoint, falling back to default"),this.XB=this.YB=this.ZB=0),(this.amin>this.amax||this.bmin>this.bmax)&&((0,_util2.info)("Invalid Range, falling back to defaults"),this.amin=-100,this.amax=100,this.bmin=-100,this.bmax=100)}getRgbItem(src,srcOffset,dest,destOffset){convertToRgb(this,src,srcOffset,!1,dest,destOffset)}getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){const maxVal=(1<<bits)-1;for(let i=0;i<count;i++)convertToRgb(this,src,srcOffset,maxVal,dest,destOffset),srcOffset+=3,destOffset+=3+alpha01}getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01)/3|0}isDefaultDecode(decodeMap,bpc){return!0}get usesZeroToOneRange(){return(0,_util2.shadow)(this,"usesZeroToOneRange",!1)}};return __name(_LabCS,"LabCS"),_LabCS},"LabCSClosure"),"LabCSClosure")()},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.PartialEvaluator=exports3.EvaluatorPreprocessor=void 0;var _util2=__w_pdfjs_require__3(2),_cmap=__w_pdfjs_require__3(16),_primitives=__w_pdfjs_require__3(5),_fonts=__w_pdfjs_require__3(34),_fonts_utils=__w_pdfjs_require__3(38),_encodings=__w_pdfjs_require__3(37),_standard_fonts=__w_pdfjs_require__3(41),_unicode=__w_pdfjs_require__3(40),_pattern=__w_pdfjs_require__3(50),_xfa_fonts=__w_pdfjs_require__3(51),_to_unicode_map=__w_pdfjs_require__3(42),_function=__w_pdfjs_require__3(57),_parser=__w_pdfjs_require__3(17),_image_utils=__w_pdfjs_require__3(59),_stream=__w_pdfjs_require__3(10),_base_stream=__w_pdfjs_require__3(7),_bidi=__w_pdfjs_require__3(60),_colorspace=__w_pdfjs_require__3(14),_decode_stream=__w_pdfjs_require__3(19),_glyphlist=__w_pdfjs_require__3(39),_core_utils=__w_pdfjs_require__3(6),_metrics=__w_pdfjs_require__3(45),_murmurhash=__w_pdfjs_require__3(61),_operator_list=__w_pdfjs_require__3(62),_image=__w_pdfjs_require__3(63);const DefaultPartialEvaluatorOptions=Object.freeze({maxImageSize:-1,disableFontFace:!1,ignoreErrors:!1,isEvalSupported:!0,fontExtraProperties:!1,useSystemFonts:!0,cMapUrl:null,standardFontDataUrl:null}),PatternType={TILING:1,SHADING:2},TEXT_CHUNK_BATCH_SIZE=10,deferred=Promise.resolve();function normalizeBlendMode(value,parsingArray=!1){if(Array.isArray(value)){for(let i=0,ii=value.length;i<ii;i++){const maybeBM=normalizeBlendMode(value[i],!0);if(maybeBM)return maybeBM}return(0,_util2.warn)(`Unsupported blend mode Array: ${value}`),"source-over"}if(!(value instanceof _primitives.Name))return parsingArray?null:"source-over";switch(value.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity"}return parsingArray?null:((0,_util2.warn)(`Unsupported blend mode: ${value.name}`),"source-over")}__name2(normalizeBlendMode,"normalizeBlendMode"),__name(normalizeBlendMode,"normalizeBlendMode");function incrementCachedImageMaskCount(data){data.fn===_util2.OPS.paintImageMaskXObject&&data.args[0]&&data.args[0].count>0&&data.args[0].count++}__name2(incrementCachedImageMaskCount,"incrementCachedImageMaskCount"),__name(incrementCachedImageMaskCount,"incrementCachedImageMaskCount");const _TimeSlotManager=class _TimeSlotManager2{static{__name2(this,"_TimeSlotManager")}static get TIME_SLOT_DURATION_MS(){return(0,_util2.shadow)(this,"TIME_SLOT_DURATION_MS",20)}static get CHECK_TIME_EVERY(){return(0,_util2.shadow)(this,"CHECK_TIME_EVERY",100)}constructor(){this.reset()}check(){return++this.checked<_TimeSlotManager2.CHECK_TIME_EVERY?!1:(this.checked=0,this.endTime<=Date.now())}reset(){this.endTime=Date.now()+_TimeSlotManager2.TIME_SLOT_DURATION_MS,this.checked=0}};__name(_TimeSlotManager,"TimeSlotManager");let TimeSlotManager=_TimeSlotManager;const _PartialEvaluator=class _PartialEvaluator2{static{__name2(this,"_PartialEvaluator")}constructor({xref,handler,pageIndex,idFactory,fontCache,builtInCMapCache,standardFontDataCache,globalImageCache,options=null}){this.xref=xref,this.handler=handler,this.pageIndex=pageIndex,this.idFactory=idFactory,this.fontCache=fontCache,this.builtInCMapCache=builtInCMapCache,this.standardFontDataCache=standardFontDataCache,this.globalImageCache=globalImageCache,this.options=options||DefaultPartialEvaluatorOptions,this.parsingType3Font=!1,this._fetchBuiltInCMapBound=this.fetchBuiltInCMap.bind(this)}get _pdfFunctionFactory(){const pdfFunctionFactory=new _function.PDFFunctionFactory({xref:this.xref,isEvalSupported:this.options.isEvalSupported});return(0,_util2.shadow)(this,"_pdfFunctionFactory",pdfFunctionFactory)}clone(newOptions=null){const newEvaluator=Object.create(this);return newEvaluator.options=Object.assign(Object.create(null),this.options,newOptions),newEvaluator}hasBlendModes(resources,nonBlendModesSet){if(!(resources instanceof _primitives.Dict)||resources.objId&&nonBlendModesSet.has(resources.objId))return!1;const processed=new _primitives.RefSet(nonBlendModesSet);resources.objId&&processed.put(resources.objId);const nodes=[resources],xref=this.xref;for(;nodes.length;){const node=nodes.shift(),graphicStates=node.get("ExtGState");if(graphicStates instanceof _primitives.Dict)for(let graphicState of graphicStates.getRawValues()){if(graphicState instanceof _primitives.Ref){if(processed.has(graphicState))continue;try{graphicState=xref.fetch(graphicState)}catch(ex){processed.put(graphicState),(0,_util2.info)(`hasBlendModes - ignoring ExtGState: "${ex}".`);continue}}if(!(graphicState instanceof _primitives.Dict))continue;graphicState.objId&&processed.put(graphicState.objId);const bm=graphicState.get("BM");if(bm instanceof _primitives.Name){if(bm.name!=="Normal")return!0;continue}if(bm!==void 0&&Array.isArray(bm)){for(const element of bm)if(element instanceof _primitives.Name&&element.name!=="Normal")return!0}}const xObjects=node.get("XObject");if(xObjects instanceof _primitives.Dict)for(let xObject of xObjects.getRawValues()){if(xObject instanceof _primitives.Ref){if(processed.has(xObject))continue;try{xObject=xref.fetch(xObject)}catch(ex){processed.put(xObject),(0,_util2.info)(`hasBlendModes - ignoring XObject: "${ex}".`);continue}}if(!(xObject instanceof _base_stream.BaseStream))continue;xObject.dict.objId&&processed.put(xObject.dict.objId);const xResources=xObject.dict.get("Resources");xResources instanceof _primitives.Dict&&(xResources.objId&&processed.has(xResources.objId)||(nodes.push(xResources),xResources.objId&&processed.put(xResources.objId)))}}for(const ref of processed)nonBlendModesSet.put(ref);return!1}async fetchBuiltInCMap(name){const cachedData=this.builtInCMapCache.get(name);if(cachedData)return cachedData;let data;if(this.options.cMapUrl!==null){const url=`${this.options.cMapUrl}${name}.bcmap`,response=await fetch(url);if(!response.ok)throw new Error(`fetchBuiltInCMap: failed to fetch file "${url}" with "${response.statusText}".`);data={cMapData:new Uint8Array(await response.arrayBuffer()),compressionType:_util2.CMapCompressionType.BINARY}}else data=await this.handler.sendWithPromise("FetchBuiltInCMap",{name});return data.compressionType!==_util2.CMapCompressionType.NONE&&this.builtInCMapCache.set(name,data),data}async fetchStandardFontData(name){const cachedData=this.standardFontDataCache.get(name);if(cachedData)return new _stream.Stream(cachedData);if(this.options.useSystemFonts&&name!=="Symbol"&&name!=="ZapfDingbats")return null;const standardFontNameToFileName=(0,_standard_fonts.getFontNameToFileMap)(),filename=standardFontNameToFileName[name];let data;if(this.options.standardFontDataUrl!==null){const url=`${this.options.standardFontDataUrl}${filename}`,response=await fetch(url);response.ok?data=await response.arrayBuffer():(0,_util2.warn)(`fetchStandardFontData: failed to fetch file "${url}" with "${response.statusText}".`)}else try{data=await this.handler.sendWithPromise("FetchStandardFontData",{filename})}catch(e){(0,_util2.warn)(`fetchStandardFontData: failed to fetch file "${filename}" with "${e}".`)}return data?(this.standardFontDataCache.set(name,data),new _stream.Stream(data)):null}async buildFormXObject(resources,xobj,smask,operatorList,task,initialState,localColorSpaceCache){const dict=xobj.dict,matrix=dict.getArray("Matrix");let bbox=dict.getArray("BBox");Array.isArray(bbox)&&bbox.length===4?bbox=_util2.Util.normalizeRect(bbox):bbox=null;let optionalContent,groupOptions;dict.has("OC")&&(optionalContent=await this.parseMarkedContentProps(dict.get("OC"),resources)),optionalContent!==void 0&&operatorList.addOp(_util2.OPS.beginMarkedContentProps,["OC",optionalContent]);const group=dict.get("Group");if(group){groupOptions={matrix,bbox,smask,isolated:!1,knockout:!1};const groupSubtype=group.get("S");let colorSpace=null;if((0,_primitives.isName)(groupSubtype,"Transparency")&&(groupOptions.isolated=group.get("I")||!1,groupOptions.knockout=group.get("K")||!1,group.has("CS"))){const cs=group.getRaw("CS"),cachedColorSpace=_colorspace.ColorSpace.getCached(cs,this.xref,localColorSpaceCache);cachedColorSpace?colorSpace=cachedColorSpace:colorSpace=await this.parseColorSpace({cs,resources,localColorSpaceCache})}smask&&smask.backdrop&&(colorSpace=colorSpace||_colorspace.ColorSpace.singletons.rgb,smask.backdrop=colorSpace.getRgb(smask.backdrop,0)),operatorList.addOp(_util2.OPS.beginGroup,[groupOptions])}const args=group?[matrix,null]:[matrix,bbox];return operatorList.addOp(_util2.OPS.paintFormXObjectBegin,args),this.getOperatorList({stream:xobj,task,resources:dict.get("Resources")||resources,operatorList,initialState}).then(function(){operatorList.addOp(_util2.OPS.paintFormXObjectEnd,[]),group&&operatorList.addOp(_util2.OPS.endGroup,[groupOptions]),optionalContent!==void 0&&operatorList.addOp(_util2.OPS.endMarkedContent,[])})}_sendImgData(objId,imgData,cacheGlobally=!1){const transfers=imgData?[imgData.bitmap||imgData.data.buffer]:null;return this.parsingType3Font||cacheGlobally?this.handler.send("commonobj",[objId,"Image",imgData],transfers):this.handler.send("obj",[objId,this.pageIndex,"Image",imgData],transfers)}async buildPaintImageXObject({resources,image,isInline=!1,operatorList,cacheKey,localImageCache,localColorSpaceCache}){const dict=image.dict,imageRef=dict.objId,w=dict.get("W","Width"),h=dict.get("H","Height");if(!(w&&typeof w=="number")||!(h&&typeof h=="number")){(0,_util2.warn)("Image dimensions are missing, or not numbers.");return}const maxImageSize=this.options.maxImageSize;if(maxImageSize!==-1&&w*h>maxImageSize){const msg="Image exceeded maximum allowed size and was removed.";if(this.options.ignoreErrors){(0,_util2.warn)(msg);return}throw new Error(msg)}let optionalContent;dict.has("OC")&&(optionalContent=await this.parseMarkedContentProps(dict.get("OC"),resources));const imageMask=dict.get("IM","ImageMask")||!1;let imgData,args;if(imageMask){const interpolate=dict.get("I","Interpolate"),bitStrideLength=w+7>>3,imgArray=image.getBytes(bitStrideLength*h),decode=dict.getArray("D","Decode");if(this.parsingType3Font){imgData=_image.PDFImage.createRawMask({imgArray,width:w,height:h,imageIsFromDecodeStream:image instanceof _decode_stream.DecodeStream,inverseDecode:!!decode&&decode[0]>0,interpolate}),imgData.cached=!!cacheKey,args=[imgData],operatorList.addImageOps(_util2.OPS.paintImageMaskXObject,args,optionalContent),cacheKey&&localImageCache.set(cacheKey,imageRef,{fn:_util2.OPS.paintImageMaskXObject,args,optionalContent});return}if(imgData=_image.PDFImage.createMask({imgArray,width:w,height:h,imageIsFromDecodeStream:image instanceof _decode_stream.DecodeStream,inverseDecode:!!decode&&decode[0]>0,interpolate}),imgData.isSingleOpaquePixel){operatorList.addImageOps(_util2.OPS.paintSolidColorImageMask,[],optionalContent),cacheKey&&localImageCache.set(cacheKey,imageRef,{fn:_util2.OPS.paintSolidColorImageMask,args:[],optionalContent});return}const objId2=`mask_${this.idFactory.createObjId()}`;operatorList.addDependency(objId2),this._sendImgData(objId2,imgData),args=[{data:objId2,width:imgData.width,height:imgData.height,interpolate:imgData.interpolate,count:1}],operatorList.addImageOps(_util2.OPS.paintImageMaskXObject,args,optionalContent),cacheKey&&localImageCache.set(cacheKey,imageRef,{fn:_util2.OPS.paintImageMaskXObject,args,optionalContent});return}const softMask=dict.get("SM","SMask")||!1,mask=dict.get("Mask")||!1,SMALL_IMAGE_DIMENSIONS=200;if(isInline&&!softMask&&!mask&&w+h<SMALL_IMAGE_DIMENSIONS){imgData=new _image.PDFImage({xref:this.xref,res:resources,image,isInline,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache}).createImageData(!0),operatorList.addImageOps(_util2.OPS.paintInlineImageXObject,[imgData],optionalContent);return}let objId=`img_${this.idFactory.createObjId()}`,cacheGlobally=!1;this.parsingType3Font?objId=`${this.idFactory.getDocId()}_type3_${objId}`:imageRef&&(cacheGlobally=this.globalImageCache.shouldCache(imageRef,this.pageIndex),cacheGlobally&&(objId=`${this.idFactory.getDocId()}_${objId}`)),operatorList.addDependency(objId),args=[objId,w,h],_image.PDFImage.buildImage({xref:this.xref,res:resources,image,isInline,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache}).then(imageObj=>(imgData=imageObj.createImageData(!1),cacheKey&&imageRef&&cacheGlobally&&this.globalImageCache.addByteSize(imageRef,imgData.data.length),this._sendImgData(objId,imgData,cacheGlobally))).catch(reason=>((0,_util2.warn)(`Unable to decode image "${objId}": "${reason}".`),this._sendImgData(objId,null,cacheGlobally))),operatorList.addImageOps(_util2.OPS.paintImageXObject,args,optionalContent),cacheKey&&(localImageCache.set(cacheKey,imageRef,{fn:_util2.OPS.paintImageXObject,args,optionalContent}),imageRef&&((0,_util2.assert)(!isInline,"Cannot cache an inline image globally."),this.globalImageCache.addPageIndex(imageRef,this.pageIndex),cacheGlobally&&this.globalImageCache.setData(imageRef,{objId,fn:_util2.OPS.paintImageXObject,args,optionalContent,byteSize:0})))}handleSMask(smask,resources,operatorList,task,stateManager,localColorSpaceCache){const smaskContent=smask.get("G"),smaskOptions={subtype:smask.get("S").name,backdrop:smask.get("BC")},transferObj=smask.get("TR");if((0,_function.isPDFFunction)(transferObj)){const transferFn=this._pdfFunctionFactory.create(transferObj),transferMap=new Uint8Array(256),tmp=new Float32Array(1);for(let i=0;i<256;i++)tmp[0]=i/255,transferFn(tmp,0,tmp,0),transferMap[i]=tmp[0]*255|0;smaskOptions.transferMap=transferMap}return this.buildFormXObject(resources,smaskContent,smaskOptions,operatorList,task,stateManager.state.clone(),localColorSpaceCache)}handleTransferFunction(tr){let transferArray;if(Array.isArray(tr))transferArray=tr;else if((0,_function.isPDFFunction)(tr))transferArray=[tr];else return null;const transferMaps=[];let numFns=0,numEffectfulFns=0;for(const entry of transferArray){const transferObj=this.xref.fetchIfRef(entry);if(numFns++,(0,_primitives.isName)(transferObj,"Identity")){transferMaps.push(null);continue}else if(!(0,_function.isPDFFunction)(transferObj))return null;const transferFn=this._pdfFunctionFactory.create(transferObj),transferMap=new Uint8Array(256),tmp=new Float32Array(1);for(let j=0;j<256;j++)tmp[0]=j/255,transferFn(tmp,0,tmp,0),transferMap[j]=tmp[0]*255|0;transferMaps.push(transferMap),numEffectfulFns++}return!(numFns===1||numFns===4)||numEffectfulFns===0?null:transferMaps}handleTilingType(fn,color,resources,pattern,patternDict,operatorList,task,localTilingPatternCache){const tilingOpList=new _operator_list.OperatorList,patternResources=_primitives.Dict.merge({xref:this.xref,dictArray:[patternDict.get("Resources"),resources]});return this.getOperatorList({stream:pattern,task,resources:patternResources,operatorList:tilingOpList}).then(function(){const operatorListIR=tilingOpList.getIR(),tilingPatternIR=(0,_pattern.getTilingPatternIR)(operatorListIR,patternDict,color);operatorList.addDependencies(tilingOpList.dependencies),operatorList.addOp(fn,tilingPatternIR),patternDict.objId&&localTilingPatternCache.set(null,patternDict.objId,{operatorListIR,dict:patternDict})}).catch(reason=>{if(!(reason instanceof _util2.AbortException)){if(this.options.ignoreErrors){this.handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorTilingPattern}),(0,_util2.warn)(`handleTilingType - ignoring pattern: "${reason}".`);return}throw reason}})}handleSetFont(resources,fontArgs,fontRef,operatorList,task,state,fallbackFontDict=null,cssFontInfo=null){const fontName=fontArgs&&fontArgs[0]instanceof _primitives.Name?fontArgs[0].name:null;return this.loadFont(fontName,fontRef,resources,fallbackFontDict,cssFontInfo).then(translated=>translated.font.isType3Font?translated.loadType3Data(this,resources,task).then(function(){return operatorList.addDependencies(translated.type3Dependencies),translated}).catch(reason=>(this.handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorFontLoadType3}),new TranslatedFont({loadedName:"g_font_error",font:new _fonts.ErrorFont(`Type3 font load error: ${reason}`),dict:translated.font,evaluatorOptions:this.options}))):translated).then(translated=>(state.font=translated.font,translated.send(this.handler),translated.loadedName))}handleText(chars,state){const font=state.font,glyphs=font.charsToGlyphs(chars);return font.data&&(state.textRenderingMode&_util2.TextRenderingMode.ADD_TO_PATH_FLAG||state.fillColorSpace.name==="Pattern"||font.disableFontFace||this.options.disableFontFace)&&_PartialEvaluator2.buildFontPaths(font,glyphs,this.handler,this.options),glyphs}ensureStateFont(state){if(state.font)return;const reason=new _util2.FormatError("Missing setFont (Tf) operator before text rendering operator.");if(this.options.ignoreErrors){this.handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorFontState}),(0,_util2.warn)(`ensureStateFont: "${reason}".`);return}throw reason}async setGState({resources,gState,operatorList,cacheKey,task,stateManager,localGStateCache,localColorSpaceCache}){const gStateRef=gState.objId;let isSimpleGState=!0;const gStateObj=[],gStateKeys=gState.getKeys();let promise=Promise.resolve();for(let i=0,ii=gStateKeys.length;i<ii;i++){const key=gStateKeys[i],value=gState.get(key);switch(key){case"Type":break;case"LW":case"LC":case"LJ":case"ML":case"D":case"RI":case"FL":case"CA":case"ca":gStateObj.push([key,value]);break;case"Font":isSimpleGState=!1,promise=promise.then(()=>this.handleSetFont(resources,null,value[0],operatorList,task,stateManager.state).then(function(loadedName){operatorList.addDependency(loadedName),gStateObj.push([key,[loadedName,value[1]]])}));break;case"BM":gStateObj.push([key,normalizeBlendMode(value)]);break;case"SMask":if((0,_primitives.isName)(value,"None")){gStateObj.push([key,!1]);break}value instanceof _primitives.Dict?(isSimpleGState=!1,promise=promise.then(()=>this.handleSMask(value,resources,operatorList,task,stateManager,localColorSpaceCache)),gStateObj.push([key,!0])):(0,_util2.warn)("Unsupported SMask type");break;case"TR":const transferMaps=this.handleTransferFunction(value);gStateObj.push([key,transferMaps]);break;case"OP":case"op":case"OPM":case"BG":case"BG2":case"UCR":case"UCR2":case"TR2":case"HT":case"SM":case"SA":case"AIS":case"TK":(0,_util2.info)("graphic state operator "+key);break;default:(0,_util2.info)("Unknown graphic state operator "+key);break}}return promise.then(function(){gStateObj.length>0&&operatorList.addOp(_util2.OPS.setGState,[gStateObj]),isSimpleGState&&localGStateCache.set(cacheKey,gStateRef,gStateObj)})}loadFont(fontName,font,resources,fallbackFontDict=null,cssFontInfo=null){const errorFont=__name(async()=>new TranslatedFont({loadedName:"g_font_error",font:new _fonts.ErrorFont(`Font "${fontName}" is not available.`),dict:font,evaluatorOptions:this.options}),"errorFont"),xref=this.xref;let fontRef;if(font)font instanceof _primitives.Ref&&(fontRef=font);else{const fontRes=resources.get("Font");fontRes&&(fontRef=fontRes.getRaw(fontName))}if(!fontRef){const partialMsg=`Font "${fontName||font&&font.toString()}" is not available`;if(!this.options.ignoreErrors&&!this.parsingType3Font)return(0,_util2.warn)(`${partialMsg}.`),errorFont();this.handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorFontMissing}),(0,_util2.warn)(`${partialMsg} -- attempting to fallback to a default font.`),fallbackFontDict?fontRef=fallbackFontDict:fontRef=_PartialEvaluator2.fallbackFontDict}if(this.parsingType3Font&&this.type3FontRefs.has(fontRef))return errorFont();if(this.fontCache.has(fontRef))return this.fontCache.get(fontRef);if(font=xref.fetchIfRef(fontRef),!(font instanceof _primitives.Dict))return errorFont();if(font.cacheKey&&this.fontCache.has(font.cacheKey))return this.fontCache.get(font.cacheKey);const fontCapability=(0,_util2.createPromiseCapability)();let preEvaluatedFont;try{preEvaluatedFont=this.preEvaluateFont(font),preEvaluatedFont.cssFontInfo=cssFontInfo}catch(reason){return(0,_util2.warn)(`loadFont - preEvaluateFont failed: "${reason}".`),errorFont()}const{descriptor,hash}=preEvaluatedFont,fontRefIsRef=fontRef instanceof _primitives.Ref;let fontID;if(fontRefIsRef&&(fontID=`f${fontRef.toString()}`),hash&&descriptor instanceof _primitives.Dict){descriptor.fontAliases||(descriptor.fontAliases=Object.create(null));const fontAliases=descriptor.fontAliases;if(fontAliases[hash]){const aliasFontRef=fontAliases[hash].aliasRef;if(fontRefIsRef&&aliasFontRef&&this.fontCache.has(aliasFontRef))return this.fontCache.putAlias(fontRef,aliasFontRef),this.fontCache.get(fontRef)}else fontAliases[hash]={fontID:this.idFactory.createFontId()};fontRefIsRef&&(fontAliases[hash].aliasRef=fontRef),fontID=fontAliases[hash].fontID}return fontRefIsRef?this.fontCache.put(fontRef,fontCapability.promise):(fontID||(fontID=this.idFactory.createFontId()),font.cacheKey=`cacheKey_${fontID}`,this.fontCache.put(font.cacheKey,fontCapability.promise)),(0,_util2.assert)(fontID&&fontID.startsWith("f"),'The "fontID" must be (correctly) defined.'),font.loadedName=`${this.idFactory.getDocId()}_${fontID}`,this.translateFont(preEvaluatedFont).then(translatedFont=>{translatedFont.fontType!==void 0&&xref.stats.addFontType(translatedFont.fontType),fontCapability.resolve(new TranslatedFont({loadedName:font.loadedName,font:translatedFont,dict:font,evaluatorOptions:this.options}))}).catch(reason=>{this.handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorFontTranslate}),(0,_util2.warn)(`loadFont - translateFont failed: "${reason}".`);try{const fontFile3=descriptor&&descriptor.get("FontFile3"),subtype=fontFile3&&fontFile3.get("Subtype"),fontType=(0,_fonts_utils.getFontType)(preEvaluatedFont.type,subtype&&subtype.name);fontType!==void 0&&xref.stats.addFontType(fontType)}catch{}fontCapability.resolve(new TranslatedFont({loadedName:font.loadedName,font:new _fonts.ErrorFont(reason instanceof Error?reason.message:reason),dict:font,evaluatorOptions:this.options}))}),fontCapability.promise}buildPath(operatorList,fn,args,parsingText=!1){const lastIndex=operatorList.length-1;args||(args=[]);let minMax;if(lastIndex<0||operatorList.fnArray[lastIndex]!==_util2.OPS.constructPath)parsingText&&((0,_util2.warn)(`Encountered path operator "${fn}" inside of a text object.`),operatorList.addOp(_util2.OPS.save,null)),minMax=[1/0,-1/0,1/0,-1/0],operatorList.addOp(_util2.OPS.constructPath,[[fn],args,minMax]),parsingText&&operatorList.addOp(_util2.OPS.restore,null);else{const opArgs=operatorList.argsArray[lastIndex];opArgs[0].push(fn),Array.prototype.push.apply(opArgs[1],args),minMax=opArgs[2]}switch(fn){case _util2.OPS.rectangle:minMax[0]=Math.min(minMax[0],args[0],args[0]+args[2]),minMax[1]=Math.max(minMax[1],args[0],args[0]+args[2]),minMax[2]=Math.min(minMax[2],args[1],args[1]+args[3]),minMax[3]=Math.max(minMax[3],args[1],args[1]+args[3]);break;case _util2.OPS.moveTo:case _util2.OPS.lineTo:minMax[0]=Math.min(minMax[0],args[0]),minMax[1]=Math.max(minMax[1],args[0]),minMax[2]=Math.min(minMax[2],args[1]),minMax[3]=Math.max(minMax[3],args[1]);break}}parseColorSpace({cs,resources,localColorSpaceCache}){return _colorspace.ColorSpace.parseAsync({cs,xref:this.xref,resources,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache}).catch(reason=>{if(reason instanceof _util2.AbortException)return null;if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorColorSpace}),(0,_util2.warn)(`parseColorSpace - ignoring ColorSpace: "${reason}".`),null;throw reason})}parseShading({shading,resources,localColorSpaceCache,localShadingPatternCache}){let id=localShadingPatternCache.get(shading);if(!id){var shadingFill=_pattern.Pattern.parseShading(shading,this.xref,resources,this.handler,this._pdfFunctionFactory,localColorSpaceCache);const patternIR=shadingFill.getIR();id=`pattern_${this.idFactory.createObjId()}`,localShadingPatternCache.set(shading,id),this.handler.send("obj",[id,this.pageIndex,"Pattern",patternIR])}return id}handleColorN(operatorList,fn,args,cs,patterns,resources,task,localColorSpaceCache,localTilingPatternCache,localShadingPatternCache){const patternName=args.pop();if(patternName instanceof _primitives.Name){const rawPattern=patterns.getRaw(patternName.name),localTilingPattern=rawPattern instanceof _primitives.Ref&&localTilingPatternCache.getByRef(rawPattern);if(localTilingPattern)try{const color=cs.base?cs.base.getRgb(args,0):null,tilingPatternIR=(0,_pattern.getTilingPatternIR)(localTilingPattern.operatorListIR,localTilingPattern.dict,color);operatorList.addOp(fn,tilingPatternIR);return}catch{}const pattern=this.xref.fetchIfRef(rawPattern);if(pattern){const dict=pattern instanceof _base_stream.BaseStream?pattern.dict:pattern,typeNum=dict.get("PatternType");if(typeNum===PatternType.TILING){const color=cs.base?cs.base.getRgb(args,0):null;return this.handleTilingType(fn,color,resources,pattern,dict,operatorList,task,localTilingPatternCache)}else if(typeNum===PatternType.SHADING){const shading=dict.get("Shading"),matrix=dict.getArray("Matrix"),objId=this.parseShading({shading,resources,localColorSpaceCache,localShadingPatternCache});operatorList.addOp(fn,["Shading",objId,matrix]);return}throw new _util2.FormatError(`Unknown PatternType: ${typeNum}`)}}throw new _util2.FormatError(`Unknown PatternName: ${patternName}`)}_parseVisibilityExpression(array,nestingCounter,currentResult){if(++nestingCounter>10){(0,_util2.warn)("Visibility expression is too deeply nested");return}const length=array.length,operator=this.xref.fetchIfRef(array[0]);if(length<2||!(operator instanceof _primitives.Name)){(0,_util2.warn)("Invalid visibility expression");return}switch(operator.name){case"And":case"Or":case"Not":currentResult.push(operator.name);break;default:(0,_util2.warn)(`Invalid operator ${operator.name} in visibility expression`);return}for(let i=1;i<length;i++){const raw=array[i],object=this.xref.fetchIfRef(raw);if(Array.isArray(object)){const nestedResult=[];currentResult.push(nestedResult),this._parseVisibilityExpression(object,nestingCounter,nestedResult)}else raw instanceof _primitives.Ref&&currentResult.push(raw.toString())}}async parseMarkedContentProps(contentProperties,resources){let optionalContent;if(contentProperties instanceof _primitives.Name)optionalContent=resources.get("Properties").get(contentProperties.name);else if(contentProperties instanceof _primitives.Dict)optionalContent=contentProperties;else throw new _util2.FormatError("Optional content properties malformed.");const optionalContentType=optionalContent.get("Type").name;if(optionalContentType==="OCG")return{type:optionalContentType,id:optionalContent.objId};if(optionalContentType==="OCMD"){const expression=optionalContent.get("VE");if(Array.isArray(expression)){const result=[];if(this._parseVisibilityExpression(expression,0,result),result.length>0)return{type:"OCMD",expression:result}}const optionalContentGroups=optionalContent.get("OCGs");if(Array.isArray(optionalContentGroups)||optionalContentGroups instanceof _primitives.Dict){const groupIds=[];if(Array.isArray(optionalContentGroups))for(const ocg of optionalContentGroups)groupIds.push(ocg.toString());else groupIds.push(optionalContentGroups.objId);return{type:optionalContentType,ids:groupIds,policy:optionalContent.get("P")instanceof _primitives.Name?optionalContent.get("P").name:null,expression:null}}else if(optionalContentGroups instanceof _primitives.Ref)return{type:optionalContentType,id:optionalContentGroups.toString()}}return null}getOperatorList({stream,task,resources,operatorList,initialState=null,fallbackFontDict=null}){if(resources=resources||_primitives.Dict.empty,initialState=initialState||new EvalState,!operatorList)throw new Error('getOperatorList: missing "operatorList" parameter');const self2=this,xref=this.xref;let parsingText=!1;const localImageCache=new _image_utils.LocalImageCache,localColorSpaceCache=new _image_utils.LocalColorSpaceCache,localGStateCache=new _image_utils.LocalGStateCache,localTilingPatternCache=new _image_utils.LocalTilingPatternCache,localShadingPatternCache=new Map,xobjs=resources.get("XObject")||_primitives.Dict.empty,patterns=resources.get("Pattern")||_primitives.Dict.empty,stateManager=new StateManager(initialState),preprocessor=new EvaluatorPreprocessor(stream,xref,stateManager),timeSlotManager=new TimeSlotManager;function closePendingRestoreOPS(argument){for(let i=0,ii=preprocessor.savedStatesDepth;i<ii;i++)operatorList.addOp(_util2.OPS.restore,[])}return __name2(closePendingRestoreOPS,"closePendingRestoreOPS"),__name(closePendingRestoreOPS,"closePendingRestoreOPS"),new Promise(__name(__name2(function promiseBody(resolve,reject){const next=__name(function(promise){Promise.all([promise,operatorList.ready]).then(function(){try{promiseBody(resolve,reject)}catch(ex){reject(ex)}},reject)},"next");task.ensureNotTerminated(),timeSlotManager.reset();const operation={};let stop,i,ii,cs,name,isValidName;for(;!(stop=timeSlotManager.check())&&(operation.args=null,!!preprocessor.read(operation));){let args=operation.args,fn=operation.fn;switch(fn|0){case _util2.OPS.paintXObject:if(isValidName=args[0]instanceof _primitives.Name,name=args[0].name,isValidName){const localImage=localImageCache.getByName(name);if(localImage){operatorList.addImageOps(localImage.fn,localImage.args,localImage.optionalContent),incrementCachedImageMaskCount(localImage),args=null;continue}}next(new Promise(function(resolveXObject,rejectXObject){if(!isValidName)throw new _util2.FormatError("XObject must be referred to by name.");let xobj=xobjs.getRaw(name);if(xobj instanceof _primitives.Ref){const localImage=localImageCache.getByRef(xobj);if(localImage){operatorList.addImageOps(localImage.fn,localImage.args,localImage.optionalContent),incrementCachedImageMaskCount(localImage),resolveXObject();return}const globalImage=self2.globalImageCache.getData(xobj,self2.pageIndex);if(globalImage){operatorList.addDependency(globalImage.objId),operatorList.addImageOps(globalImage.fn,globalImage.args,globalImage.optionalContent),resolveXObject();return}xobj=xref.fetch(xobj)}if(!(xobj instanceof _base_stream.BaseStream))throw new _util2.FormatError("XObject should be a stream");const type=xobj.dict.get("Subtype");if(!(type instanceof _primitives.Name))throw new _util2.FormatError("XObject should have a Name subtype");if(type.name==="Form"){stateManager.save(),self2.buildFormXObject(resources,xobj,null,operatorList,task,stateManager.state.clone(),localColorSpaceCache).then(function(){stateManager.restore(),resolveXObject()},rejectXObject);return}else if(type.name==="Image"){self2.buildPaintImageXObject({resources,image:xobj,operatorList,cacheKey:name,localImageCache,localColorSpaceCache}).then(resolveXObject,rejectXObject);return}else if(type.name==="PS")(0,_util2.info)("Ignored XObject subtype PS");else throw new _util2.FormatError(`Unhandled XObject subtype ${type.name}`);resolveXObject()}).catch(function(reason){if(!(reason instanceof _util2.AbortException)){if(self2.options.ignoreErrors){self2.handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorXObject}),(0,_util2.warn)(`getOperatorList - ignoring XObject: "${reason}".`);return}throw reason}}));return;case _util2.OPS.setFont:var fontSize=args[1];next(self2.handleSetFont(resources,args,null,operatorList,task,stateManager.state,fallbackFontDict).then(function(loadedName){operatorList.addDependency(loadedName),operatorList.addOp(_util2.OPS.setFont,[loadedName,fontSize])}));return;case _util2.OPS.beginText:parsingText=!0;break;case _util2.OPS.endText:parsingText=!1;break;case _util2.OPS.endInlineImage:var cacheKey=args[0].cacheKey;if(cacheKey){const localImage=localImageCache.getByName(cacheKey);if(localImage){operatorList.addImageOps(localImage.fn,localImage.args,localImage.optionalContent),incrementCachedImageMaskCount(localImage),args=null;continue}}next(self2.buildPaintImageXObject({resources,image:args[0],isInline:!0,operatorList,cacheKey,localImageCache,localColorSpaceCache}));return;case _util2.OPS.showText:if(!stateManager.state.font){self2.ensureStateFont(stateManager.state);continue}args[0]=self2.handleText(args[0],stateManager.state);break;case _util2.OPS.showSpacedText:if(!stateManager.state.font){self2.ensureStateFont(stateManager.state);continue}var arr=args[0],combinedGlyphs=[],arrLength=arr.length,state=stateManager.state;for(i=0;i<arrLength;++i){const arrItem=arr[i];typeof arrItem=="string"?Array.prototype.push.apply(combinedGlyphs,self2.handleText(arrItem,state)):typeof arrItem=="number"&&combinedGlyphs.push(arrItem)}args[0]=combinedGlyphs,fn=_util2.OPS.showText;break;case _util2.OPS.nextLineShowText:if(!stateManager.state.font){self2.ensureStateFont(stateManager.state);continue}operatorList.addOp(_util2.OPS.nextLine),args[0]=self2.handleText(args[0],stateManager.state),fn=_util2.OPS.showText;break;case _util2.OPS.nextLineSetSpacingShowText:if(!stateManager.state.font){self2.ensureStateFont(stateManager.state);continue}operatorList.addOp(_util2.OPS.nextLine),operatorList.addOp(_util2.OPS.setWordSpacing,[args.shift()]),operatorList.addOp(_util2.OPS.setCharSpacing,[args.shift()]),args[0]=self2.handleText(args[0],stateManager.state),fn=_util2.OPS.showText;break;case _util2.OPS.setTextRenderingMode:stateManager.state.textRenderingMode=args[0];break;case _util2.OPS.setFillColorSpace:{const cachedColorSpace=_colorspace.ColorSpace.getCached(args[0],xref,localColorSpaceCache);if(cachedColorSpace){stateManager.state.fillColorSpace=cachedColorSpace;continue}next(self2.parseColorSpace({cs:args[0],resources,localColorSpaceCache}).then(function(colorSpace){colorSpace&&(stateManager.state.fillColorSpace=colorSpace)}));return}case _util2.OPS.setStrokeColorSpace:{const cachedColorSpace=_colorspace.ColorSpace.getCached(args[0],xref,localColorSpaceCache);if(cachedColorSpace){stateManager.state.strokeColorSpace=cachedColorSpace;continue}next(self2.parseColorSpace({cs:args[0],resources,localColorSpaceCache}).then(function(colorSpace){colorSpace&&(stateManager.state.strokeColorSpace=colorSpace)}));return}case _util2.OPS.setFillColor:cs=stateManager.state.fillColorSpace,args=cs.getRgb(args,0),fn=_util2.OPS.setFillRGBColor;break;case _util2.OPS.setStrokeColor:cs=stateManager.state.strokeColorSpace,args=cs.getRgb(args,0),fn=_util2.OPS.setStrokeRGBColor;break;case _util2.OPS.setFillGray:stateManager.state.fillColorSpace=_colorspace.ColorSpace.singletons.gray,args=_colorspace.ColorSpace.singletons.gray.getRgb(args,0),fn=_util2.OPS.setFillRGBColor;break;case _util2.OPS.setStrokeGray:stateManager.state.strokeColorSpace=_colorspace.ColorSpace.singletons.gray,args=_colorspace.ColorSpace.singletons.gray.getRgb(args,0),fn=_util2.OPS.setStrokeRGBColor;break;case _util2.OPS.setFillCMYKColor:stateManager.state.fillColorSpace=_colorspace.ColorSpace.singletons.cmyk,args=_colorspace.ColorSpace.singletons.cmyk.getRgb(args,0),fn=_util2.OPS.setFillRGBColor;break;case _util2.OPS.setStrokeCMYKColor:stateManager.state.strokeColorSpace=_colorspace.ColorSpace.singletons.cmyk,args=_colorspace.ColorSpace.singletons.cmyk.getRgb(args,0),fn=_util2.OPS.setStrokeRGBColor;break;case _util2.OPS.setFillRGBColor:stateManager.state.fillColorSpace=_colorspace.ColorSpace.singletons.rgb,args=_colorspace.ColorSpace.singletons.rgb.getRgb(args,0);break;case _util2.OPS.setStrokeRGBColor:stateManager.state.strokeColorSpace=_colorspace.ColorSpace.singletons.rgb,args=_colorspace.ColorSpace.singletons.rgb.getRgb(args,0);break;case _util2.OPS.setFillColorN:if(cs=stateManager.state.fillColorSpace,cs.name==="Pattern"){next(self2.handleColorN(operatorList,_util2.OPS.setFillColorN,args,cs,patterns,resources,task,localColorSpaceCache,localTilingPatternCache,localShadingPatternCache));return}args=cs.getRgb(args,0),fn=_util2.OPS.setFillRGBColor;break;case _util2.OPS.setStrokeColorN:if(cs=stateManager.state.strokeColorSpace,cs.name==="Pattern"){next(self2.handleColorN(operatorList,_util2.OPS.setStrokeColorN,args,cs,patterns,resources,task,localColorSpaceCache,localTilingPatternCache,localShadingPatternCache));return}args=cs.getRgb(args,0),fn=_util2.OPS.setStrokeRGBColor;break;case _util2.OPS.shadingFill:var shadingRes=resources.get("Shading");if(!shadingRes)throw new _util2.FormatError("No shading resource found");var shading=shadingRes.get(args[0].name);if(!shading)throw new _util2.FormatError("No shading object found");args=[self2.parseShading({shading,resources,localColorSpaceCache,localShadingPatternCache})],fn=_util2.OPS.shadingFill;break;case _util2.OPS.setGState:if(isValidName=args[0]instanceof _primitives.Name,name=args[0].name,isValidName){const localGStateObj=localGStateCache.getByName(name);if(localGStateObj){localGStateObj.length>0&&operatorList.addOp(_util2.OPS.setGState,[localGStateObj]),args=null;continue}}next(new Promise(function(resolveGState,rejectGState){if(!isValidName)throw new _util2.FormatError("GState must be referred to by name.");const extGState=resources.get("ExtGState");if(!(extGState instanceof _primitives.Dict))throw new _util2.FormatError("ExtGState should be a dictionary.");const gState=extGState.get(name);if(!(gState instanceof _primitives.Dict))throw new _util2.FormatError("GState should be a dictionary.");self2.setGState({resources,gState,operatorList,cacheKey:name,task,stateManager,localGStateCache,localColorSpaceCache}).then(resolveGState,rejectGState)}).catch(function(reason){if(!(reason instanceof _util2.AbortException)){if(self2.options.ignoreErrors){self2.handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorExtGState}),(0,_util2.warn)(`getOperatorList - ignoring ExtGState: "${reason}".`);return}throw reason}}));return;case _util2.OPS.moveTo:case _util2.OPS.lineTo:case _util2.OPS.curveTo:case _util2.OPS.curveTo2:case _util2.OPS.curveTo3:case _util2.OPS.closePath:case _util2.OPS.rectangle:self2.buildPath(operatorList,fn,args,parsingText);continue;case _util2.OPS.markPoint:case _util2.OPS.markPointProps:case _util2.OPS.beginCompat:case _util2.OPS.endCompat:continue;case _util2.OPS.beginMarkedContentProps:if(!(args[0]instanceof _primitives.Name)){(0,_util2.warn)(`Expected name for beginMarkedContentProps arg0=${args[0]}`);continue}if(args[0].name==="OC"){next(self2.parseMarkedContentProps(args[1],resources).then(data=>{operatorList.addOp(_util2.OPS.beginMarkedContentProps,["OC",data])}).catch(reason=>{if(!(reason instanceof _util2.AbortException)){if(self2.options.ignoreErrors){self2.handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorMarkedContent}),(0,_util2.warn)(`getOperatorList - ignoring beginMarkedContentProps: "${reason}".`);return}throw reason}}));return}args=[args[0].name,args[1]instanceof _primitives.Dict?args[1].get("MCID"):null];break;case _util2.OPS.beginMarkedContent:case _util2.OPS.endMarkedContent:default:if(args!==null){for(i=0,ii=args.length;i<ii&&!(args[i]instanceof _primitives.Dict);i++);if(i<ii){(0,_util2.warn)("getOperatorList - ignoring operator: "+fn);continue}}}operatorList.addOp(fn,args)}if(stop){next(deferred);return}closePendingRestoreOPS(),resolve()},"promiseBody"),"promiseBody")).catch(reason=>{if(!(reason instanceof _util2.AbortException)){if(this.options.ignoreErrors){this.handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorOperatorList}),(0,_util2.warn)(`getOperatorList - ignoring errors during "${task.name}" task: "${reason}".`),closePendingRestoreOPS();return}throw reason}})}getTextContent({stream,task,resources,stateManager=null,combineTextItems=!1,includeMarkedContent=!1,sink,seenStyles=new Set,viewBox}){resources=resources||_primitives.Dict.empty,stateManager=stateManager||new StateManager(new TextState);const NormalizedUnicodes=(0,_unicode.getNormalizedUnicodes)(),textContent={items:[],styles:Object.create(null)},textContentItem={initialized:!1,str:[],totalWidth:0,totalHeight:0,width:0,height:0,vertical:!1,prevTransform:null,textAdvanceScale:0,spaceInFlowMin:0,spaceInFlowMax:0,trackingSpaceMin:1/0,negativeSpaceMax:-1/0,notASpace:-1/0,transform:null,fontName:null,hasEOL:!1},twoLastChars=[" "," "];let twoLastCharsPos=0;function saveLastChar(char){const nextPos=(twoLastCharsPos+1)%2,ret=twoLastChars[twoLastCharsPos]!==" "&&twoLastChars[nextPos]===" ";return twoLastChars[twoLastCharsPos]=char,twoLastCharsPos=nextPos,ret}__name2(saveLastChar,"saveLastChar"),__name(saveLastChar,"saveLastChar");function resetLastChars(){twoLastChars[0]=twoLastChars[1]=" ",twoLastCharsPos=0}__name2(resetLastChars,"resetLastChars"),__name(resetLastChars,"resetLastChars");const TRACKING_SPACE_FACTOR=.1,NOT_A_SPACE_FACTOR=.03,NEGATIVE_SPACE_FACTOR=-.2,SPACE_IN_FLOW_MIN_FACTOR=.1,SPACE_IN_FLOW_MAX_FACTOR=.6,self2=this,xref=this.xref,showSpacedTextBuffer=[];let xobjs=null;const emptyXObjectCache=new _image_utils.LocalImageCache,emptyGStateCache=new _image_utils.LocalGStateCache,preprocessor=new EvaluatorPreprocessor(stream,xref,stateManager);let textState;function getCurrentTextTransform(){const font=textState.font,tsm=[textState.fontSize*textState.textHScale,0,0,textState.fontSize,0,textState.textRise];if(font.isType3Font&&(textState.fontSize<=1||font.isCharBBox)&&!(0,_util2.isArrayEqual)(textState.fontMatrix,_util2.FONT_IDENTITY_MATRIX)){const glyphHeight=font.bbox[3]-font.bbox[1];glyphHeight>0&&(tsm[3]*=glyphHeight*textState.fontMatrix[3])}return _util2.Util.transform(textState.ctm,_util2.Util.transform(textState.textMatrix,tsm))}__name2(getCurrentTextTransform,"getCurrentTextTransform"),__name(getCurrentTextTransform,"getCurrentTextTransform");function ensureTextContentItem(){if(textContentItem.initialized)return textContentItem;const font=textState.font,loadedName=font.loadedName;seenStyles.has(loadedName)||(seenStyles.add(loadedName),textContent.styles[loadedName]={fontFamily:font.fallbackName,ascent:font.ascent,descent:font.descent,vertical:font.vertical}),textContentItem.fontName=loadedName;const trm=textContentItem.transform=getCurrentTextTransform();font.vertical?(textContentItem.width=textContentItem.totalWidth=Math.hypot(trm[0],trm[1]),textContentItem.height=textContentItem.totalHeight=0,textContentItem.vertical=!0):(textContentItem.width=textContentItem.totalWidth=0,textContentItem.height=textContentItem.totalHeight=Math.hypot(trm[2],trm[3]),textContentItem.vertical=!1);const scaleLineX=Math.hypot(textState.textLineMatrix[0],textState.textLineMatrix[1]),scaleCtmX=Math.hypot(textState.ctm[0],textState.ctm[1]);return textContentItem.textAdvanceScale=scaleCtmX*scaleLineX,textContentItem.trackingSpaceMin=textState.fontSize*TRACKING_SPACE_FACTOR,textContentItem.notASpace=textState.fontSize*NOT_A_SPACE_FACTOR,textContentItem.negativeSpaceMax=textState.fontSize*NEGATIVE_SPACE_FACTOR,textContentItem.spaceInFlowMin=textState.fontSize*SPACE_IN_FLOW_MIN_FACTOR,textContentItem.spaceInFlowMax=textState.fontSize*SPACE_IN_FLOW_MAX_FACTOR,textContentItem.hasEOL=!1,textContentItem.initialized=!0,textContentItem}__name2(ensureTextContentItem,"ensureTextContentItem"),__name(ensureTextContentItem,"ensureTextContentItem");function updateAdvanceScale(){if(!textContentItem.initialized)return;const scaleLineX=Math.hypot(textState.textLineMatrix[0],textState.textLineMatrix[1]),scaleFactor=Math.hypot(textState.ctm[0],textState.ctm[1])*scaleLineX;scaleFactor!==textContentItem.textAdvanceScale&&(textContentItem.vertical?(textContentItem.totalHeight+=textContentItem.height*textContentItem.textAdvanceScale,textContentItem.height=0):(textContentItem.totalWidth+=textContentItem.width*textContentItem.textAdvanceScale,textContentItem.width=0),textContentItem.textAdvanceScale=scaleFactor)}__name2(updateAdvanceScale,"updateAdvanceScale"),__name(updateAdvanceScale,"updateAdvanceScale");function runBidiTransform(textChunk){const text=textChunk.str.join(""),bidiResult=(0,_bidi.bidi)(text,-1,textChunk.vertical);return{str:bidiResult.str,dir:bidiResult.dir,width:Math.abs(textChunk.totalWidth),height:Math.abs(textChunk.totalHeight),transform:textChunk.transform,fontName:textChunk.fontName,hasEOL:textChunk.hasEOL}}__name2(runBidiTransform,"runBidiTransform"),__name(runBidiTransform,"runBidiTransform");function handleSetFont(fontName,fontRef){return self2.loadFont(fontName,fontRef,resources).then(function(translated){return translated.font.isType3Font?translated.loadType3Data(self2,resources,task).catch(function(){}).then(function(){return translated}):translated}).then(function(translated){textState.font=translated.font,textState.fontMatrix=translated.font.fontMatrix||_util2.FONT_IDENTITY_MATRIX})}__name2(handleSetFont,"handleSetFont"),__name(handleSetFont,"handleSetFont");function applyInverseRotation(x,y,matrix){const scale=Math.hypot(matrix[0],matrix[1]);return[(matrix[0]*x+matrix[1]*y)/scale,(matrix[2]*x+matrix[3]*y)/scale]}__name2(applyInverseRotation,"applyInverseRotation"),__name(applyInverseRotation,"applyInverseRotation");function compareWithLastPosition(){const currentTransform=getCurrentTextTransform();let posX=currentTransform[4],posY=currentTransform[5];const shiftedX=posX-viewBox[0],shiftedY=posY-viewBox[1];if(shiftedX<0||shiftedX>viewBox[2]||shiftedY<0||shiftedY>viewBox[3])return!1;if(!combineTextItems||!textState.font||!textContentItem.prevTransform)return!0;let lastPosX=textContentItem.prevTransform[4],lastPosY=textContentItem.prevTransform[5];if(lastPosX===posX&&lastPosY===posY)return!0;let rotate=-1;switch(currentTransform[0]&&currentTransform[1]===0&&currentTransform[2]===0?rotate=currentTransform[0]>0?0:180:currentTransform[1]&&currentTransform[0]===0&&currentTransform[3]===0&&(rotate=currentTransform[1]>0?90:270),rotate){case 0:break;case 90:[posX,posY]=[posY,posX],[lastPosX,lastPosY]=[lastPosY,lastPosX];break;case 180:[posX,posY,lastPosX,lastPosY]=[-posX,-posY,-lastPosX,-lastPosY];break;case 270:[posX,posY]=[-posY,-posX],[lastPosX,lastPosY]=[-lastPosY,-lastPosX];break;default:[posX,posY]=applyInverseRotation(posX,posY,currentTransform),[lastPosX,lastPosY]=applyInverseRotation(lastPosX,lastPosY,textContentItem.prevTransform)}if(textState.font.vertical){const advanceY2=(lastPosY-posY)/textContentItem.textAdvanceScale,advanceX2=posX-lastPosX,textOrientation2=Math.sign(textContentItem.height);return advanceY2<textOrientation2*textContentItem.negativeSpaceMax?Math.abs(advanceX2)>.5*textContentItem.width?(appendEOL(),!0):(resetLastChars(),flushTextContentItem(),!0):Math.abs(advanceX2)>textContentItem.width?(appendEOL(),!0):(advanceY2<=textOrientation2*textContentItem.notASpace&&resetLastChars(),advanceY2<=textOrientation2*textContentItem.trackingSpaceMin?textContentItem.height+=advanceY2:addFakeSpaces(advanceY2,textContentItem.prevTransform,textOrientation2)||(textContentItem.str.length===0?(resetLastChars(),textContent.items.push({str:" ",dir:"ltr",width:0,height:Math.abs(advanceY2),transform:textContentItem.prevTransform,fontName:textContentItem.fontName,hasEOL:!1})):textContentItem.height+=advanceY2),!0)}const advanceX=(posX-lastPosX)/textContentItem.textAdvanceScale,advanceY=posY-lastPosY,textOrientation=Math.sign(textContentItem.width);return advanceX<textOrientation*textContentItem.negativeSpaceMax?Math.abs(advanceY)>.5*textContentItem.height?(appendEOL(),!0):(resetLastChars(),flushTextContentItem(),!0):Math.abs(advanceY)>textContentItem.height?(appendEOL(),!0):(advanceX<=textOrientation*textContentItem.notASpace&&resetLastChars(),advanceX<=textOrientation*textContentItem.trackingSpaceMin?textContentItem.width+=advanceX:addFakeSpaces(advanceX,textContentItem.prevTransform,textOrientation)||(textContentItem.str.length===0?(resetLastChars(),textContent.items.push({str:" ",dir:"ltr",width:Math.abs(advanceX),height:0,transform:textContentItem.prevTransform,fontName:textContentItem.fontName,hasEOL:!1})):textContentItem.width+=advanceX),!0)}__name2(compareWithLastPosition,"compareWithLastPosition"),__name(compareWithLastPosition,"compareWithLastPosition");function buildTextContentItem({chars,extraSpacing}){const font=textState.font;if(!chars){const charSpacing=textState.charSpacing+extraSpacing;charSpacing&&(font.vertical?textState.translateTextMatrix(0,-charSpacing):textState.translateTextMatrix(charSpacing*textState.textHScale,0));return}const glyphs=font.charsToGlyphs(chars),scale=textState.fontMatrix[0]*textState.fontSize;for(let i=0,ii=glyphs.length;i<ii;i++){const glyph=glyphs[i];if(glyph.isInvisibleFormatMark)continue;let charSpacing=textState.charSpacing+(i+1===ii?extraSpacing:0),glyphWidth=glyph.width;font.vertical&&(glyphWidth=glyph.vmetric?glyph.vmetric[0]:-glyphWidth);let scaledDim=glyphWidth*scale;if(glyph.isWhitespace){font.vertical?(charSpacing+=-scaledDim+textState.wordSpacing,textState.translateTextMatrix(0,-charSpacing)):(charSpacing+=scaledDim+textState.wordSpacing,textState.translateTextMatrix(charSpacing*textState.textHScale,0)),saveLastChar(" ");continue}if(!compareWithLastPosition())continue;const textChunk=ensureTextContentItem();glyph.isZeroWidthDiacritic&&(scaledDim=0),font.vertical?(textState.translateTextMatrix(0,scaledDim),scaledDim=Math.abs(scaledDim),textChunk.height+=scaledDim):(scaledDim*=textState.textHScale,textState.translateTextMatrix(scaledDim,0),textChunk.width+=scaledDim),scaledDim&&(textChunk.prevTransform=getCurrentTextTransform());let glyphUnicode=glyph.unicode;glyphUnicode=NormalizedUnicodes[glyphUnicode]||glyphUnicode,glyphUnicode=(0,_unicode.reverseIfRtl)(glyphUnicode),saveLastChar(glyphUnicode)&&textChunk.str.push(" "),textChunk.str.push(glyphUnicode),charSpacing&&(font.vertical?textState.translateTextMatrix(0,-charSpacing):textState.translateTextMatrix(charSpacing*textState.textHScale,0))}}__name2(buildTextContentItem,"buildTextContentItem"),__name(buildTextContentItem,"buildTextContentItem");function appendEOL(){resetLastChars(),textContentItem.initialized?(textContentItem.hasEOL=!0,flushTextContentItem()):textContent.items.push({str:"",dir:"ltr",width:0,height:0,transform:getCurrentTextTransform(),fontName:textState.font.loadedName,hasEOL:!0})}__name2(appendEOL,"appendEOL"),__name(appendEOL,"appendEOL");function addFakeSpaces(width,transf,textOrientation){if(textOrientation*textContentItem.spaceInFlowMin<=width&&width<=textOrientation*textContentItem.spaceInFlowMax)return textContentItem.initialized&&(resetLastChars(),textContentItem.str.push(" ")),!1;const fontName=textContentItem.fontName;let height=0;return textContentItem.vertical&&(height=width,width=0),flushTextContentItem(),resetLastChars(),textContent.items.push({str:" ",dir:"ltr",width:Math.abs(width),height:Math.abs(height),transform:transf||getCurrentTextTransform(),fontName,hasEOL:!1}),!0}__name2(addFakeSpaces,"addFakeSpaces"),__name(addFakeSpaces,"addFakeSpaces");function flushTextContentItem(){!textContentItem.initialized||!textContentItem.str||(textContentItem.vertical?textContentItem.totalHeight+=textContentItem.height*textContentItem.textAdvanceScale:textContentItem.totalWidth+=textContentItem.width*textContentItem.textAdvanceScale,textContent.items.push(runBidiTransform(textContentItem)),textContentItem.initialized=!1,textContentItem.str.length=0)}__name2(flushTextContentItem,"flushTextContentItem"),__name(flushTextContentItem,"flushTextContentItem");function enqueueChunk(batch=!1){const length=textContent.items.length;length!==0&&(batch&&length<TEXT_CHUNK_BATCH_SIZE||(sink.enqueue(textContent,length),textContent.items=[],textContent.styles=Object.create(null)))}__name2(enqueueChunk,"enqueueChunk"),__name(enqueueChunk,"enqueueChunk");const timeSlotManager=new TimeSlotManager;return new Promise(__name(__name2(function promiseBody(resolve,reject){const next=__name(function(promise){enqueueChunk(!0),Promise.all([promise,sink.ready]).then(function(){try{promiseBody(resolve,reject)}catch(ex){reject(ex)}},reject)},"next");task.ensureNotTerminated(),timeSlotManager.reset();const operation={};let stop,args=[];for(;!(stop=timeSlotManager.check())&&(args.length=0,operation.args=args,!!preprocessor.read(operation));){textState=stateManager.state;const fn=operation.fn;switch(args=operation.args,fn|0){case _util2.OPS.setFont:var fontNameArg=args[0].name,fontSizeArg=args[1];if(textState.font&&fontNameArg===textState.fontName&&fontSizeArg===textState.fontSize)break;flushTextContentItem(),textState.fontName=fontNameArg,textState.fontSize=fontSizeArg,next(handleSetFont(fontNameArg,null));return;case _util2.OPS.setTextRise:textState.textRise=args[0];break;case _util2.OPS.setHScale:textState.textHScale=args[0]/100;break;case _util2.OPS.setLeading:textState.leading=args[0];break;case _util2.OPS.moveText:textState.translateTextLineMatrix(args[0],args[1]),textState.textMatrix=textState.textLineMatrix.slice();break;case _util2.OPS.setLeadingMoveText:textState.leading=-args[1],textState.translateTextLineMatrix(args[0],args[1]),textState.textMatrix=textState.textLineMatrix.slice();break;case _util2.OPS.nextLine:textState.carriageReturn();break;case _util2.OPS.setTextMatrix:textState.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]),textState.setTextLineMatrix(args[0],args[1],args[2],args[3],args[4],args[5]),updateAdvanceScale();break;case _util2.OPS.setCharSpacing:textState.charSpacing=args[0];break;case _util2.OPS.setWordSpacing:textState.wordSpacing=args[0];break;case _util2.OPS.beginText:textState.textMatrix=_util2.IDENTITY_MATRIX.slice(),textState.textLineMatrix=_util2.IDENTITY_MATRIX.slice();break;case _util2.OPS.showSpacedText:if(!stateManager.state.font){self2.ensureStateFont(stateManager.state);continue}const spaceFactor=(textState.font.vertical?1:-1)*textState.fontSize/1e3,elements=args[0];for(let i=0,ii=elements.length;i<ii-1;i++){const item2=elements[i];if(typeof item2=="string")showSpacedTextBuffer.push(item2);else if(typeof item2=="number"&&item2!==0){const str=showSpacedTextBuffer.join("");showSpacedTextBuffer.length=0,buildTextContentItem({chars:str,extraSpacing:item2*spaceFactor})}}const item=elements.at(-1);if(typeof item=="string"&&showSpacedTextBuffer.push(item),showSpacedTextBuffer.length>0){const str=showSpacedTextBuffer.join("");showSpacedTextBuffer.length=0,buildTextContentItem({chars:str,extraSpacing:0})}break;case _util2.OPS.showText:if(!stateManager.state.font){self2.ensureStateFont(stateManager.state);continue}buildTextContentItem({chars:args[0],extraSpacing:0});break;case _util2.OPS.nextLineShowText:if(!stateManager.state.font){self2.ensureStateFont(stateManager.state);continue}textState.carriageReturn(),buildTextContentItem({chars:args[0],extraSpacing:0});break;case _util2.OPS.nextLineSetSpacingShowText:if(!stateManager.state.font){self2.ensureStateFont(stateManager.state);continue}textState.wordSpacing=args[0],textState.charSpacing=args[1],textState.carriageReturn(),buildTextContentItem({chars:args[2],extraSpacing:0});break;case _util2.OPS.paintXObject:flushTextContentItem(),xobjs||(xobjs=resources.get("XObject")||_primitives.Dict.empty);var isValidName=args[0]instanceof _primitives.Name,name=args[0].name;if(isValidName&&emptyXObjectCache.getByName(name))break;next(new Promise(function(resolveXObject,rejectXObject){if(!isValidName)throw new _util2.FormatError("XObject must be referred to by name.");let xobj=xobjs.getRaw(name);if(xobj instanceof _primitives.Ref){if(emptyXObjectCache.getByRef(xobj)){resolveXObject();return}if(self2.globalImageCache.getData(xobj,self2.pageIndex)){resolveXObject();return}xobj=xref.fetch(xobj)}if(!(xobj instanceof _base_stream.BaseStream))throw new _util2.FormatError("XObject should be a stream");const type=xobj.dict.get("Subtype");if(!(type instanceof _primitives.Name))throw new _util2.FormatError("XObject should have a Name subtype");if(type.name!=="Form"){emptyXObjectCache.set(name,xobj.dict.objId,!0),resolveXObject();return}const currentState=stateManager.state.clone(),xObjStateManager=new StateManager(currentState),matrix=xobj.dict.getArray("Matrix");Array.isArray(matrix)&&matrix.length===6&&xObjStateManager.transform(matrix),enqueueChunk();const sinkWrapper={enqueueInvoked:!1,enqueue(chunk,size){this.enqueueInvoked=!0,sink.enqueue(chunk,size)},get desiredSize(){return sink.desiredSize},get ready(){return sink.ready}};self2.getTextContent({stream:xobj,task,resources:xobj.dict.get("Resources")||resources,stateManager:xObjStateManager,combineTextItems,includeMarkedContent,sink:sinkWrapper,seenStyles,viewBox}).then(function(){sinkWrapper.enqueueInvoked||emptyXObjectCache.set(name,xobj.dict.objId,!0),resolveXObject()},rejectXObject)}).catch(function(reason){if(!(reason instanceof _util2.AbortException)){if(self2.options.ignoreErrors){(0,_util2.warn)(`getTextContent - ignoring XObject: "${reason}".`);return}throw reason}}));return;case _util2.OPS.setGState:if(isValidName=args[0]instanceof _primitives.Name,name=args[0].name,isValidName&&emptyGStateCache.getByName(name))break;next(new Promise(function(resolveGState,rejectGState){if(!isValidName)throw new _util2.FormatError("GState must be referred to by name.");const extGState=resources.get("ExtGState");if(!(extGState instanceof _primitives.Dict))throw new _util2.FormatError("ExtGState should be a dictionary.");const gState=extGState.get(name);if(!(gState instanceof _primitives.Dict))throw new _util2.FormatError("GState should be a dictionary.");const gStateFont=gState.get("Font");if(!gStateFont){emptyGStateCache.set(name,gState.objId,!0),resolveGState();return}flushTextContentItem(),textState.fontName=null,textState.fontSize=gStateFont[1],handleSetFont(null,gStateFont[0]).then(resolveGState,rejectGState)}).catch(function(reason){if(!(reason instanceof _util2.AbortException)){if(self2.options.ignoreErrors){(0,_util2.warn)(`getTextContent - ignoring ExtGState: "${reason}".`);return}throw reason}}));return;case _util2.OPS.beginMarkedContent:flushTextContentItem(),includeMarkedContent&&textContent.items.push({type:"beginMarkedContent",tag:args[0]instanceof _primitives.Name?args[0].name:null});break;case _util2.OPS.beginMarkedContentProps:if(flushTextContentItem(),includeMarkedContent){let mcid=null;args[1]instanceof _primitives.Dict&&(mcid=args[1].get("MCID")),textContent.items.push({type:"beginMarkedContentProps",id:Number.isInteger(mcid)?`${self2.idFactory.getPageObjId()}_mcid${mcid}`:null,tag:args[0]instanceof _primitives.Name?args[0].name:null})}break;case _util2.OPS.endMarkedContent:flushTextContentItem(),includeMarkedContent&&textContent.items.push({type:"endMarkedContent"});break}if(textContent.items.length>=sink.desiredSize){stop=!0;break}}if(stop){next(deferred);return}flushTextContentItem(),enqueueChunk(),resolve()},"promiseBody"),"promiseBody")).catch(reason=>{if(!(reason instanceof _util2.AbortException)){if(this.options.ignoreErrors){(0,_util2.warn)(`getTextContent - ignoring errors during "${task.name}" task: "${reason}".`),flushTextContentItem(),enqueueChunk();return}throw reason}})}extractDataStructures(dict,baseDict,properties){const xref=this.xref;let cidToGidBytes;const toUnicodePromise=this.readToUnicode(properties.toUnicode||dict.get("ToUnicode")||baseDict.get("ToUnicode"));if(properties.composite){const cidSystemInfo=dict.get("CIDSystemInfo");cidSystemInfo instanceof _primitives.Dict&&(properties.cidSystemInfo={registry:(0,_util2.stringToPDFString)(cidSystemInfo.get("Registry")),ordering:(0,_util2.stringToPDFString)(cidSystemInfo.get("Ordering")),supplement:cidSystemInfo.get("Supplement")});try{const cidToGidMap=dict.get("CIDToGIDMap");cidToGidMap instanceof _base_stream.BaseStream&&(cidToGidBytes=cidToGidMap.getBytes())}catch(ex){if(!this.options.ignoreErrors)throw ex;(0,_util2.warn)(`extractDataStructures - ignoring CIDToGIDMap data: "${ex}".`)}}const differences=[];let baseEncodingName=null,encoding;if(dict.has("Encoding")){if(encoding=dict.get("Encoding"),encoding instanceof _primitives.Dict){if(baseEncodingName=encoding.get("BaseEncoding"),baseEncodingName=baseEncodingName instanceof _primitives.Name?baseEncodingName.name:null,encoding.has("Differences")){const diffEncoding=encoding.get("Differences");let index=0;for(let j=0,jj=diffEncoding.length;j<jj;j++){const data=xref.fetchIfRef(diffEncoding[j]);if(typeof data=="number")index=data;else if(data instanceof _primitives.Name)differences[index++]=data.name;else throw new _util2.FormatError(`Invalid entry in 'Differences' array: ${data}`)}}}else if(encoding instanceof _primitives.Name)baseEncodingName=encoding.name;else{const msg="Encoding is not a Name nor a Dict";if(!this.options.ignoreErrors)throw new _util2.FormatError(msg);(0,_util2.warn)(msg)}baseEncodingName!=="MacRomanEncoding"&&baseEncodingName!=="MacExpertEncoding"&&baseEncodingName!=="WinAnsiEncoding"&&(baseEncodingName=null)}if(baseEncodingName)properties.defaultEncoding=(0,_encodings.getEncoding)(baseEncodingName);else{const isSymbolicFont=!!(properties.flags&_fonts_utils.FontFlags.Symbolic),isNonsymbolicFont=!!(properties.flags&_fonts_utils.FontFlags.Nonsymbolic);encoding=_encodings.StandardEncoding,properties.type==="TrueType"&&!isNonsymbolicFont&&(encoding=_encodings.WinAnsiEncoding),isSymbolicFont&&(encoding=_encodings.MacRomanEncoding,(!properties.file||properties.isInternalFont)&&(/Symbol/i.test(properties.name)?encoding=_encodings.SymbolSetEncoding:/Dingbats|Wingdings/i.test(properties.name)&&(encoding=_encodings.ZapfDingbatsEncoding))),properties.defaultEncoding=encoding}return properties.differences=differences,properties.baseEncodingName=baseEncodingName,properties.hasEncoding=!!baseEncodingName||differences.length>0,properties.dict=dict,toUnicodePromise.then(readToUnicode=>(properties.toUnicode=readToUnicode,this.buildToUnicode(properties))).then(builtToUnicode=>(properties.toUnicode=builtToUnicode,cidToGidBytes&&(properties.cidToGidMap=this.readCidToGidMap(cidToGidBytes,builtToUnicode)),properties))}_simpleFontToUnicode(properties,forceGlyphs=!1){(0,_util2.assert)(!properties.composite,"Must be a simple font.");const toUnicode=[],encoding=properties.defaultEncoding.slice(),baseEncodingName=properties.baseEncodingName,differences=properties.differences;for(const charcode in differences){const glyphName=differences[charcode];glyphName!==".notdef"&&(encoding[charcode]=glyphName)}const glyphsUnicodeMap=(0,_glyphlist.getGlyphsUnicode)();for(const charcode in encoding){let glyphName=encoding[charcode];if(glyphName!==""){if(glyphsUnicodeMap[glyphName]===void 0){let code=0;switch(glyphName[0]){case"G":glyphName.length===3&&(code=parseInt(glyphName.substring(1),16));break;case"g":glyphName.length===5&&(code=parseInt(glyphName.substring(1),16));break;case"C":case"c":if(glyphName.length>=3&&glyphName.length<=4){const codeStr=glyphName.substring(1);if(forceGlyphs){code=parseInt(codeStr,16);break}if(code=+codeStr,Number.isNaN(code)&&Number.isInteger(parseInt(codeStr,16)))return this._simpleFontToUnicode(properties,!0)}break;default:const unicode=(0,_unicode.getUnicodeForGlyph)(glyphName,glyphsUnicodeMap);unicode!==-1&&(code=unicode)}if(code>0&&code<=1114111&&Number.isInteger(code)){if(baseEncodingName&&code===+charcode){const baseEncoding=(0,_encodings.getEncoding)(baseEncodingName);if(baseEncoding&&(glyphName=baseEncoding[charcode])){toUnicode[charcode]=String.fromCharCode(glyphsUnicodeMap[glyphName]);continue}}toUnicode[charcode]=String.fromCodePoint(code)}continue}toUnicode[charcode]=String.fromCharCode(glyphsUnicodeMap[glyphName])}}return toUnicode}async buildToUnicode(properties){if(properties.hasIncludedToUnicodeMap=!!properties.toUnicode&&properties.toUnicode.length>0,properties.hasIncludedToUnicodeMap)return!properties.composite&&properties.hasEncoding&&(properties.fallbackToUnicode=this._simpleFontToUnicode(properties)),properties.toUnicode;if(!properties.composite)return new _to_unicode_map.ToUnicodeMap(this._simpleFontToUnicode(properties));if(properties.composite&&(properties.cMap.builtInCMap&&!(properties.cMap instanceof _cmap.IdentityCMap)||properties.cidSystemInfo.registry==="Adobe"&&(properties.cidSystemInfo.ordering==="GB1"||properties.cidSystemInfo.ordering==="CNS1"||properties.cidSystemInfo.ordering==="Japan1"||properties.cidSystemInfo.ordering==="Korea1"))){const{registry,ordering}=properties.cidSystemInfo,ucs2CMapName=_primitives.Name.get(`${registry}-${ordering}-UCS2`),ucs2CMap=await _cmap.CMapFactory.create({encoding:ucs2CMapName,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}),toUnicode=[];return properties.cMap.forEach(function(charcode,cid){if(cid>65535)throw new _util2.FormatError("Max size of CID is 65,535");const ucs2=ucs2CMap.lookup(cid);ucs2&&(toUnicode[charcode]=String.fromCharCode((ucs2.charCodeAt(0)<<8)+ucs2.charCodeAt(1)))}),new _to_unicode_map.ToUnicodeMap(toUnicode)}return new _to_unicode_map.IdentityToUnicodeMap(properties.firstChar,properties.lastChar)}readToUnicode(cmapObj){return cmapObj?cmapObj instanceof _primitives.Name?_cmap.CMapFactory.create({encoding:cmapObj,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then(function(cmap){return cmap instanceof _cmap.IdentityCMap?new _to_unicode_map.IdentityToUnicodeMap(0,65535):new _to_unicode_map.ToUnicodeMap(cmap.getMap())}):cmapObj instanceof _base_stream.BaseStream?_cmap.CMapFactory.create({encoding:cmapObj,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then(function(cmap){if(cmap instanceof _cmap.IdentityCMap)return new _to_unicode_map.IdentityToUnicodeMap(0,65535);const map=new Array(cmap.length);return cmap.forEach(function(charCode,token){if(typeof token=="number"){map[charCode]=String.fromCodePoint(token);return}const str=[];for(let k=0;k<token.length;k+=2){const w1=token.charCodeAt(k)<<8|token.charCodeAt(k+1);if((w1&63488)!==55296){str.push(w1);continue}k+=2;const w2=token.charCodeAt(k)<<8|token.charCodeAt(k+1);str.push(((w1&1023)<<10)+(w2&1023)+65536)}map[charCode]=String.fromCodePoint(...str)}),new _to_unicode_map.ToUnicodeMap(map)},reason=>{if(reason instanceof _util2.AbortException)return null;if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorFontToUnicode}),(0,_util2.warn)(`readToUnicode - ignoring ToUnicode data: "${reason}".`),null;throw reason}):Promise.resolve(null):Promise.resolve(null)}readCidToGidMap(glyphsData,toUnicode){const result=[];for(let j=0,jj=glyphsData.length;j<jj;j++){const glyphID=glyphsData[j++]<<8|glyphsData[j],code=j>>1;glyphID===0&&!toUnicode.has(code)||(result[code]=glyphID)}return result}extractWidths(dict,descriptor,properties){const xref=this.xref;let glyphsWidths=[],defaultWidth=0;const glyphsVMetrics=[];let defaultVMetrics,i,ii,j,jj,start,code,widths;if(properties.composite){if(defaultWidth=dict.has("DW")?dict.get("DW"):1e3,widths=dict.get("W"),widths)for(i=0,ii=widths.length;i<ii;i++)if(start=xref.fetchIfRef(widths[i++]),code=xref.fetchIfRef(widths[i]),Array.isArray(code))for(j=0,jj=code.length;j<jj;j++)glyphsWidths[start++]=xref.fetchIfRef(code[j]);else{const width=xref.fetchIfRef(widths[++i]);for(j=start;j<=code;j++)glyphsWidths[j]=width}if(properties.vertical){let vmetrics=dict.getArray("DW2")||[880,-1e3];if(defaultVMetrics=[vmetrics[1],defaultWidth*.5,vmetrics[0]],vmetrics=dict.get("W2"),vmetrics)for(i=0,ii=vmetrics.length;i<ii;i++)if(start=xref.fetchIfRef(vmetrics[i++]),code=xref.fetchIfRef(vmetrics[i]),Array.isArray(code))for(j=0,jj=code.length;j<jj;j++)glyphsVMetrics[start++]=[xref.fetchIfRef(code[j++]),xref.fetchIfRef(code[j++]),xref.fetchIfRef(code[j])];else{const vmetric=[xref.fetchIfRef(vmetrics[++i]),xref.fetchIfRef(vmetrics[++i]),xref.fetchIfRef(vmetrics[++i])];for(j=start;j<=code;j++)glyphsVMetrics[j]=vmetric}}}else{const firstChar=properties.firstChar;if(widths=dict.get("Widths"),widths){for(j=firstChar,i=0,ii=widths.length;i<ii;i++)glyphsWidths[j++]=xref.fetchIfRef(widths[i]);defaultWidth=parseFloat(descriptor.get("MissingWidth"))||0}else{const baseFontName=dict.get("BaseFont");if(baseFontName instanceof _primitives.Name){const metrics=this.getBaseFontMetrics(baseFontName.name);glyphsWidths=this.buildCharCodeToWidth(metrics.widths,properties),defaultWidth=metrics.defaultWidth}}}let isMonospace=!0,firstWidth=defaultWidth;for(const glyph in glyphsWidths){const glyphWidth=glyphsWidths[glyph];if(glyphWidth){if(!firstWidth){firstWidth=glyphWidth;continue}if(firstWidth!==glyphWidth){isMonospace=!1;break}}}isMonospace&&(properties.flags|=_fonts_utils.FontFlags.FixedPitch),properties.defaultWidth=defaultWidth,properties.widths=glyphsWidths,properties.defaultVMetrics=defaultVMetrics,properties.vmetrics=glyphsVMetrics}isSerifFont(baseFontName){const fontNameWoStyle=baseFontName.split("-")[0];return fontNameWoStyle in(0,_standard_fonts.getSerifFonts)()||fontNameWoStyle.search(/serif/gi)!==-1}getBaseFontMetrics(name){let defaultWidth=0,widths=Object.create(null),monospace=!1,lookupName=(0,_standard_fonts.getStdFontMap)()[name]||name;const Metrics=(0,_metrics.getMetrics)();lookupName in Metrics||(this.isSerifFont(name)?lookupName="Times-Roman":lookupName="Helvetica");const glyphWidths=Metrics[lookupName];return typeof glyphWidths=="number"?(defaultWidth=glyphWidths,monospace=!0):widths=glyphWidths(),{defaultWidth,monospace,widths}}buildCharCodeToWidth(widthsByGlyphName,properties){const widths=Object.create(null),differences=properties.differences,encoding=properties.defaultEncoding;for(let charCode=0;charCode<256;charCode++){if(charCode in differences&&widthsByGlyphName[differences[charCode]]){widths[charCode]=widthsByGlyphName[differences[charCode]];continue}if(charCode in encoding&&widthsByGlyphName[encoding[charCode]]){widths[charCode]=widthsByGlyphName[encoding[charCode]];continue}}return widths}preEvaluateFont(dict){const baseDict=dict;let type=dict.get("Subtype");if(!(type instanceof _primitives.Name))throw new _util2.FormatError("invalid font Subtype");let composite=!1,hash,toUnicode;if(type.name==="Type0"){const df=dict.get("DescendantFonts");if(!df)throw new _util2.FormatError("Descendant fonts are not specified");if(dict=Array.isArray(df)?this.xref.fetchIfRef(df[0]):df,!(dict instanceof _primitives.Dict))throw new _util2.FormatError("Descendant font is not a dictionary.");if(type=dict.get("Subtype"),!(type instanceof _primitives.Name))throw new _util2.FormatError("invalid font Subtype");composite=!0}const firstChar=dict.get("FirstChar")||0,lastChar=dict.get("LastChar")||(composite?65535:255),descriptor=dict.get("FontDescriptor");if(descriptor){hash=new _murmurhash.MurmurHash3_64;const encoding=baseDict.getRaw("Encoding");if(encoding instanceof _primitives.Name)hash.update(encoding.name);else if(encoding instanceof _primitives.Ref)hash.update(encoding.toString());else if(encoding instanceof _primitives.Dict){for(const entry of encoding.getRawValues())if(entry instanceof _primitives.Name)hash.update(entry.name);else if(entry instanceof _primitives.Ref)hash.update(entry.toString());else if(Array.isArray(entry)){const diffLength=entry.length,diffBuf=new Array(diffLength);for(let j=0;j<diffLength;j++){const diffEntry=entry[j];diffEntry instanceof _primitives.Name?diffBuf[j]=diffEntry.name:(typeof diffEntry=="number"||diffEntry instanceof _primitives.Ref)&&(diffBuf[j]=diffEntry.toString())}hash.update(diffBuf.join())}}if(hash.update(`${firstChar}-${lastChar}`),toUnicode=dict.get("ToUnicode")||baseDict.get("ToUnicode"),toUnicode instanceof _base_stream.BaseStream){const stream=toUnicode.str||toUnicode,uint8array=stream.buffer?new Uint8Array(stream.buffer.buffer,0,stream.bufferLength):new Uint8Array(stream.bytes.buffer,stream.start,stream.end-stream.start);hash.update(uint8array)}else toUnicode instanceof _primitives.Name&&hash.update(toUnicode.name);const widths=dict.get("Widths")||baseDict.get("Widths");if(Array.isArray(widths)){const widthsBuf=[];for(const entry of widths)(typeof entry=="number"||entry instanceof _primitives.Ref)&&widthsBuf.push(entry.toString());hash.update(widthsBuf.join())}if(composite){hash.update("compositeFont");const compositeWidths=dict.get("W")||baseDict.get("W");if(Array.isArray(compositeWidths)){const widthsBuf=[];for(const entry of compositeWidths)if(typeof entry=="number"||entry instanceof _primitives.Ref)widthsBuf.push(entry.toString());else if(Array.isArray(entry)){const subWidthsBuf=[];for(const element of entry)(typeof element=="number"||element instanceof _primitives.Ref)&&subWidthsBuf.push(element.toString());widthsBuf.push(`[${subWidthsBuf.join()}]`)}hash.update(widthsBuf.join())}const cidToGidMap=dict.getRaw("CIDToGIDMap")||baseDict.getRaw("CIDToGIDMap");cidToGidMap instanceof _primitives.Name?hash.update(cidToGidMap.name):cidToGidMap instanceof _primitives.Ref?hash.update(cidToGidMap.toString()):cidToGidMap instanceof _base_stream.BaseStream&&hash.update(cidToGidMap.peekBytes())}}return{descriptor,dict,baseDict,composite,type:type.name,firstChar,lastChar,toUnicode,hash:hash?hash.hexdigest():""}}async translateFont({descriptor,dict,baseDict,composite,type,firstChar,lastChar,toUnicode,cssFontInfo}){const isType3Font=type==="Type3";let properties;if(!descriptor)if(isType3Font)descriptor=new _primitives.Dict(null),descriptor.set("FontName",_primitives.Name.get(type)),descriptor.set("FontBBox",dict.getArray("FontBBox")||[0,0,0,0]);else{let baseFontName=dict.get("BaseFont");if(!(baseFontName instanceof _primitives.Name))throw new _util2.FormatError("Base font is not specified");baseFontName=baseFontName.name.replace(/[,_]/g,"-");const metrics=this.getBaseFontMetrics(baseFontName),fontNameWoStyle=baseFontName.split("-")[0],flags=(this.isSerifFont(fontNameWoStyle)?_fonts_utils.FontFlags.Serif:0)|(metrics.monospace?_fonts_utils.FontFlags.FixedPitch:0)|((0,_standard_fonts.getSymbolsFonts)()[fontNameWoStyle]?_fonts_utils.FontFlags.Symbolic:_fonts_utils.FontFlags.Nonsymbolic);properties={type,name:baseFontName,loadedName:baseDict.loadedName,widths:metrics.widths,defaultWidth:metrics.defaultWidth,isSimulatedFlags:!0,flags,firstChar,lastChar,toUnicode,xHeight:0,capHeight:0,italicAngle:0,isType3Font};const widths=dict.get("Widths"),standardFontName=(0,_standard_fonts.getStandardFontName)(baseFontName);let file=null;return standardFontName&&(properties.isStandardFont=!0,file=await this.fetchStandardFontData(standardFontName),properties.isInternalFont=!!file),this.extractDataStructures(dict,dict,properties).then(newProperties=>{if(widths){const glyphWidths=[];let j=firstChar;for(let i=0,ii=widths.length;i<ii;i++)glyphWidths[j++]=this.xref.fetchIfRef(widths[i]);newProperties.widths=glyphWidths}else newProperties.widths=this.buildCharCodeToWidth(metrics.widths,newProperties);return new _fonts.Font(baseFontName,file,newProperties)})}let fontName=descriptor.get("FontName"),baseFont=dict.get("BaseFont");if(typeof fontName=="string"&&(fontName=_primitives.Name.get(fontName)),typeof baseFont=="string"&&(baseFont=_primitives.Name.get(baseFont)),!isType3Font){const fontNameStr=fontName&&fontName.name,baseFontStr=baseFont&&baseFont.name;fontNameStr!==baseFontStr&&((0,_util2.info)(`The FontDescriptor's FontName is "${fontNameStr}" but should be the same as the Font's BaseFont "${baseFontStr}".`),fontNameStr&&baseFontStr&&baseFontStr.startsWith(fontNameStr)&&(fontName=baseFont))}if(fontName=fontName||baseFont,!(fontName instanceof _primitives.Name))throw new _util2.FormatError("invalid font name");let fontFile,subtype,length1,length2,length3;try{fontFile=descriptor.get("FontFile","FontFile2","FontFile3")}catch(ex){if(!this.options.ignoreErrors)throw ex;(0,_util2.warn)(`translateFont - fetching "${fontName.name}" font file: "${ex}".`),fontFile=new _stream.NullStream}let isStandardFont=!1,isInternalFont=!1,glyphScaleFactors=null;if(fontFile){if(fontFile.dict){const subtypeEntry=fontFile.dict.get("Subtype");subtypeEntry instanceof _primitives.Name&&(subtype=subtypeEntry.name),length1=fontFile.dict.get("Length1"),length2=fontFile.dict.get("Length2"),length3=fontFile.dict.get("Length3")}}else if(cssFontInfo){const standardFontName=(0,_xfa_fonts.getXfaFontName)(fontName.name);standardFontName&&(cssFontInfo.fontFamily=`${cssFontInfo.fontFamily}-PdfJS-XFA`,cssFontInfo.metrics=standardFontName.metrics||null,glyphScaleFactors=standardFontName.factors||null,fontFile=await this.fetchStandardFontData(standardFontName.name),isInternalFont=!!fontFile,baseDict=dict=(0,_xfa_fonts.getXfaFontDict)(fontName.name),composite=!0)}else if(!isType3Font){const standardFontName=(0,_standard_fonts.getStandardFontName)(fontName.name);standardFontName&&(isStandardFont=!0,fontFile=await this.fetchStandardFontData(standardFontName),isInternalFont=!!fontFile)}if(properties={type,name:fontName.name,subtype,file:fontFile,length1,length2,length3,isStandardFont,isInternalFont,loadedName:baseDict.loadedName,composite,fixedPitch:!1,fontMatrix:dict.getArray("FontMatrix")||_util2.FONT_IDENTITY_MATRIX,firstChar,lastChar,toUnicode,bbox:descriptor.getArray("FontBBox")||dict.getArray("FontBBox"),ascent:descriptor.get("Ascent"),descent:descriptor.get("Descent"),xHeight:descriptor.get("XHeight")||0,capHeight:descriptor.get("CapHeight")||0,flags:descriptor.get("Flags"),italicAngle:descriptor.get("ItalicAngle")||0,isType3Font,cssFontInfo,scaleFactors:glyphScaleFactors},composite){const cidEncoding=baseDict.get("Encoding");cidEncoding instanceof _primitives.Name&&(properties.cidEncoding=cidEncoding.name);const cMap=await _cmap.CMapFactory.create({encoding:cidEncoding,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});properties.cMap=cMap,properties.vertical=properties.cMap.vertical}return this.extractDataStructures(dict,baseDict,properties).then(newProperties=>(this.extractWidths(dict,descriptor,newProperties),new _fonts.Font(fontName.name,fontFile,newProperties)))}static buildFontPaths(font,glyphs,handler,evaluatorOptions){function buildPath(fontChar){const glyphName=`${font.loadedName}_path_${fontChar}`;try{if(font.renderer.hasBuiltPath(fontChar))return;handler.send("commonobj",[glyphName,"FontPath",font.renderer.getPathJs(fontChar)])}catch(reason){if(evaluatorOptions.ignoreErrors){handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.errorFontBuildPath}),(0,_util2.warn)(`buildFontPaths - ignoring ${glyphName} glyph: "${reason}".`);return}throw reason}}__name2(buildPath,"buildPath"),__name(buildPath,"buildPath");for(const glyph of glyphs){buildPath(glyph.fontChar);const accent=glyph.accent;accent&&accent.fontChar&&buildPath(accent.fontChar)}}static get fallbackFontDict(){const dict=new _primitives.Dict;return dict.set("BaseFont",_primitives.Name.get("PDFJS-FallbackFont")),dict.set("Type",_primitives.Name.get("FallbackType")),dict.set("Subtype",_primitives.Name.get("FallbackType")),dict.set("Encoding",_primitives.Name.get("WinAnsiEncoding")),(0,_util2.shadow)(this,"fallbackFontDict",dict)}};__name(_PartialEvaluator,"PartialEvaluator");let PartialEvaluator=_PartialEvaluator;exports3.PartialEvaluator=PartialEvaluator;const _TranslatedFont=class{static{__name2(this,"_TranslatedFont")}constructor({loadedName,font,dict,evaluatorOptions}){this.loadedName=loadedName,this.font=font,this.dict=dict,this._evaluatorOptions=evaluatorOptions||DefaultPartialEvaluatorOptions,this.type3Loaded=null,this.type3Dependencies=font.isType3Font?new Set:null,this.sent=!1}send(handler){this.sent||(this.sent=!0,handler.send("commonobj",[this.loadedName,"Font",this.font.exportData(this._evaluatorOptions.fontExtraProperties)]))}fallback(handler){this.font.data&&(this.font.disableFontFace=!0,PartialEvaluator.buildFontPaths(this.font,this.font.glyphCacheValues,handler,this._evaluatorOptions))}loadType3Data(evaluator,resources,task){if(this.type3Loaded)return this.type3Loaded;if(!this.font.isType3Font)throw new Error("Must be a Type3 font.");const type3Evaluator=evaluator.clone({ignoreErrors:!1});type3Evaluator.parsingType3Font=!0;const type3FontRefs=new _primitives.RefSet(evaluator.type3FontRefs);this.dict.objId&&!type3FontRefs.has(this.dict.objId)&&type3FontRefs.put(this.dict.objId),type3Evaluator.type3FontRefs=type3FontRefs;const translatedFont=this.font,type3Dependencies=this.type3Dependencies;let loadCharProcsPromise=Promise.resolve();const charProcs=this.dict.get("CharProcs"),fontResources=this.dict.get("Resources")||resources,charProcOperatorList=Object.create(null),fontBBox=_util2.Util.normalizeRect(translatedFont.bbox||[0,0,0,0]),width=fontBBox[2]-fontBBox[0],height=fontBBox[3]-fontBBox[1],fontBBoxSize=Math.hypot(width,height);for(const key of charProcs.getKeys())loadCharProcsPromise=loadCharProcsPromise.then(()=>{const glyphStream=charProcs.get(key),operatorList=new _operator_list.OperatorList;return type3Evaluator.getOperatorList({stream:glyphStream,task,resources:fontResources,operatorList}).then(()=>{operatorList.fnArray[0]===_util2.OPS.setCharWidthAndBounds&&this._removeType3ColorOperators(operatorList,fontBBoxSize),charProcOperatorList[key]=operatorList.getIR();for(const dependency of operatorList.dependencies)type3Dependencies.add(dependency)}).catch(function(reason){(0,_util2.warn)(`Type3 font resource "${key}" is not available.`);const dummyOperatorList=new _operator_list.OperatorList;charProcOperatorList[key]=dummyOperatorList.getIR()})});return this.type3Loaded=loadCharProcsPromise.then(()=>{translatedFont.charProcOperatorList=charProcOperatorList,this._bbox&&(translatedFont.isCharBBox=!0,translatedFont.bbox=this._bbox)}),this.type3Loaded}_removeType3ColorOperators(operatorList,fontBBoxSize=NaN){const charBBox=_util2.Util.normalizeRect(operatorList.argsArray[0].slice(2)),width=charBBox[2]-charBBox[0],height=charBBox[3]-charBBox[1],charBBoxSize=Math.hypot(width,height);width===0||height===0?(operatorList.fnArray.splice(0,1),operatorList.argsArray.splice(0,1)):(fontBBoxSize===0||Math.round(charBBoxSize/fontBBoxSize)>=10)&&(this._bbox||(this._bbox=[1/0,1/0,-1/0,-1/0]),this._bbox[0]=Math.min(this._bbox[0],charBBox[0]),this._bbox[1]=Math.min(this._bbox[1],charBBox[1]),this._bbox[2]=Math.max(this._bbox[2],charBBox[2]),this._bbox[3]=Math.max(this._bbox[3],charBBox[3]));let i=0,ii=operatorList.length;for(;i<ii;){switch(operatorList.fnArray[i]){case _util2.OPS.setCharWidthAndBounds:break;case _util2.OPS.setStrokeColorSpace:case _util2.OPS.setFillColorSpace:case _util2.OPS.setStrokeColor:case _util2.OPS.setStrokeColorN:case _util2.OPS.setFillColor:case _util2.OPS.setFillColorN:case _util2.OPS.setStrokeGray:case _util2.OPS.setFillGray:case _util2.OPS.setStrokeRGBColor:case _util2.OPS.setFillRGBColor:case _util2.OPS.setStrokeCMYKColor:case _util2.OPS.setFillCMYKColor:case _util2.OPS.shadingFill:case _util2.OPS.setRenderingIntent:operatorList.fnArray.splice(i,1),operatorList.argsArray.splice(i,1),ii--;continue;case _util2.OPS.setGState:const[gStateObj]=operatorList.argsArray[i];let j=0,jj=gStateObj.length;for(;j<jj;){const[gStateKey]=gStateObj[j];switch(gStateKey){case"TR":case"TR2":case"HT":case"BG":case"BG2":case"UCR":case"UCR2":gStateObj.splice(j,1),jj--;continue}j++}break}i++}}};__name(_TranslatedFont,"TranslatedFont");let TranslatedFont=_TranslatedFont;const _StateManager=class{static{__name2(this,"_StateManager")}constructor(initialState=new EvalState){this.state=initialState,this.stateStack=[]}save(){const old=this.state;this.stateStack.push(this.state),this.state=old.clone()}restore(){const prev=this.stateStack.pop();prev&&(this.state=prev)}transform(args){this.state.ctm=_util2.Util.transform(this.state.ctm,args)}};__name(_StateManager,"StateManager");let StateManager=_StateManager;const _TextState=class{static{__name2(this,"_TextState")}constructor(){this.ctm=new Float32Array(_util2.IDENTITY_MATRIX),this.fontName=null,this.fontSize=0,this.font=null,this.fontMatrix=_util2.FONT_IDENTITY_MATRIX,this.textMatrix=_util2.IDENTITY_MATRIX.slice(),this.textLineMatrix=_util2.IDENTITY_MATRIX.slice(),this.charSpacing=0,this.wordSpacing=0,this.leading=0,this.textHScale=1,this.textRise=0}setTextMatrix(a,b,c,d,e,f){const m=this.textMatrix;m[0]=a,m[1]=b,m[2]=c,m[3]=d,m[4]=e,m[5]=f}setTextLineMatrix(a,b,c,d,e,f){const m=this.textLineMatrix;m[0]=a,m[1]=b,m[2]=c,m[3]=d,m[4]=e,m[5]=f}translateTextMatrix(x,y){const m=this.textMatrix;m[4]=m[0]*x+m[2]*y+m[4],m[5]=m[1]*x+m[3]*y+m[5]}translateTextLineMatrix(x,y){const m=this.textLineMatrix;m[4]=m[0]*x+m[2]*y+m[4],m[5]=m[1]*x+m[3]*y+m[5]}carriageReturn(){this.translateTextLineMatrix(0,-this.leading),this.textMatrix=this.textLineMatrix.slice()}clone(){const clone=Object.create(this);return clone.textMatrix=this.textMatrix.slice(),clone.textLineMatrix=this.textLineMatrix.slice(),clone.fontMatrix=this.fontMatrix.slice(),clone}};__name(_TextState,"TextState");let TextState=_TextState;const _EvalState=class{static{__name2(this,"_EvalState")}constructor(){this.ctm=new Float32Array(_util2.IDENTITY_MATRIX),this.font=null,this.textRenderingMode=_util2.TextRenderingMode.FILL,this.fillColorSpace=_colorspace.ColorSpace.singletons.gray,this.strokeColorSpace=_colorspace.ColorSpace.singletons.gray}clone(){return Object.create(this)}};__name(_EvalState,"EvalState");let EvalState=_EvalState;const _EvaluatorPreprocessor=class _EvaluatorPreprocessor2{static{__name2(this,"_EvaluatorPreprocessor")}static get opMap(){const getOPMap=(0,_core_utils.getLookupTableFactory)(function(t){t.w={id:_util2.OPS.setLineWidth,numArgs:1,variableArgs:!1},t.J={id:_util2.OPS.setLineCap,numArgs:1,variableArgs:!1},t.j={id:_util2.OPS.setLineJoin,numArgs:1,variableArgs:!1},t.M={id:_util2.OPS.setMiterLimit,numArgs:1,variableArgs:!1},t.d={id:_util2.OPS.setDash,numArgs:2,variableArgs:!1},t.ri={id:_util2.OPS.setRenderingIntent,numArgs:1,variableArgs:!1},t.i={id:_util2.OPS.setFlatness,numArgs:1,variableArgs:!1},t.gs={id:_util2.OPS.setGState,numArgs:1,variableArgs:!1},t.q={id:_util2.OPS.save,numArgs:0,variableArgs:!1},t.Q={id:_util2.OPS.restore,numArgs:0,variableArgs:!1},t.cm={id:_util2.OPS.transform,numArgs:6,variableArgs:!1},t.m={id:_util2.OPS.moveTo,numArgs:2,variableArgs:!1},t.l={id:_util2.OPS.lineTo,numArgs:2,variableArgs:!1},t.c={id:_util2.OPS.curveTo,numArgs:6,variableArgs:!1},t.v={id:_util2.OPS.curveTo2,numArgs:4,variableArgs:!1},t.y={id:_util2.OPS.curveTo3,numArgs:4,variableArgs:!1},t.h={id:_util2.OPS.closePath,numArgs:0,variableArgs:!1},t.re={id:_util2.OPS.rectangle,numArgs:4,variableArgs:!1},t.S={id:_util2.OPS.stroke,numArgs:0,variableArgs:!1},t.s={id:_util2.OPS.closeStroke,numArgs:0,variableArgs:!1},t.f={id:_util2.OPS.fill,numArgs:0,variableArgs:!1},t.F={id:_util2.OPS.fill,numArgs:0,variableArgs:!1},t["f*"]={id:_util2.OPS.eoFill,numArgs:0,variableArgs:!1},t.B={id:_util2.OPS.fillStroke,numArgs:0,variableArgs:!1},t["B*"]={id:_util2.OPS.eoFillStroke,numArgs:0,variableArgs:!1},t.b={id:_util2.OPS.closeFillStroke,numArgs:0,variableArgs:!1},t["b*"]={id:_util2.OPS.closeEOFillStroke,numArgs:0,variableArgs:!1},t.n={id:_util2.OPS.endPath,numArgs:0,variableArgs:!1},t.W={id:_util2.OPS.clip,numArgs:0,variableArgs:!1},t["W*"]={id:_util2.OPS.eoClip,numArgs:0,variableArgs:!1},t.BT={id:_util2.OPS.beginText,numArgs:0,variableArgs:!1},t.ET={id:_util2.OPS.endText,numArgs:0,variableArgs:!1},t.Tc={id:_util2.OPS.setCharSpacing,numArgs:1,variableArgs:!1},t.Tw={id:_util2.OPS.setWordSpacing,numArgs:1,variableArgs:!1},t.Tz={id:_util2.OPS.setHScale,numArgs:1,variableArgs:!1},t.TL={id:_util2.OPS.setLeading,numArgs:1,variableArgs:!1},t.Tf={id:_util2.OPS.setFont,numArgs:2,variableArgs:!1},t.Tr={id:_util2.OPS.setTextRenderingMode,numArgs:1,variableArgs:!1},t.Ts={id:_util2.OPS.setTextRise,numArgs:1,variableArgs:!1},t.Td={id:_util2.OPS.moveText,numArgs:2,variableArgs:!1},t.TD={id:_util2.OPS.setLeadingMoveText,numArgs:2,variableArgs:!1},t.Tm={id:_util2.OPS.setTextMatrix,numArgs:6,variableArgs:!1},t["T*"]={id:_util2.OPS.nextLine,numArgs:0,variableArgs:!1},t.Tj={id:_util2.OPS.showText,numArgs:1,variableArgs:!1},t.TJ={id:_util2.OPS.showSpacedText,numArgs:1,variableArgs:!1},t["'"]={id:_util2.OPS.nextLineShowText,numArgs:1,variableArgs:!1},t['"']={id:_util2.OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:!1},t.d0={id:_util2.OPS.setCharWidth,numArgs:2,variableArgs:!1},t.d1={id:_util2.OPS.setCharWidthAndBounds,numArgs:6,variableArgs:!1},t.CS={id:_util2.OPS.setStrokeColorSpace,numArgs:1,variableArgs:!1},t.cs={id:_util2.OPS.setFillColorSpace,numArgs:1,variableArgs:!1},t.SC={id:_util2.OPS.setStrokeColor,numArgs:4,variableArgs:!0},t.SCN={id:_util2.OPS.setStrokeColorN,numArgs:33,variableArgs:!0},t.sc={id:_util2.OPS.setFillColor,numArgs:4,variableArgs:!0},t.scn={id:_util2.OPS.setFillColorN,numArgs:33,variableArgs:!0},t.G={id:_util2.OPS.setStrokeGray,numArgs:1,variableArgs:!1},t.g={id:_util2.OPS.setFillGray,numArgs:1,variableArgs:!1},t.RG={id:_util2.OPS.setStrokeRGBColor,numArgs:3,variableArgs:!1},t.rg={id:_util2.OPS.setFillRGBColor,numArgs:3,variableArgs:!1},t.K={id:_util2.OPS.setStrokeCMYKColor,numArgs:4,variableArgs:!1},t.k={id:_util2.OPS.setFillCMYKColor,numArgs:4,variableArgs:!1},t.sh={id:_util2.OPS.shadingFill,numArgs:1,variableArgs:!1},t.BI={id:_util2.OPS.beginInlineImage,numArgs:0,variableArgs:!1},t.ID={id:_util2.OPS.beginImageData,numArgs:0,variableArgs:!1},t.EI={id:_util2.OPS.endInlineImage,numArgs:1,variableArgs:!1},t.Do={id:_util2.OPS.paintXObject,numArgs:1,variableArgs:!1},t.MP={id:_util2.OPS.markPoint,numArgs:1,variableArgs:!1},t.DP={id:_util2.OPS.markPointProps,numArgs:2,variableArgs:!1},t.BMC={id:_util2.OPS.beginMarkedContent,numArgs:1,variableArgs:!1},t.BDC={id:_util2.OPS.beginMarkedContentProps,numArgs:2,variableArgs:!1},t.EMC={id:_util2.OPS.endMarkedContent,numArgs:0,variableArgs:!1},t.BX={id:_util2.OPS.beginCompat,numArgs:0,variableArgs:!1},t.EX={id:_util2.OPS.endCompat,numArgs:0,variableArgs:!1},t.BM=null,t.BD=null,t.true=null,t.fa=null,t.fal=null,t.fals=null,t.false=null,t.nu=null,t.nul=null,t.null=null});return(0,_util2.shadow)(this,"opMap",getOPMap())}static get MAX_INVALID_PATH_OPS(){return(0,_util2.shadow)(this,"MAX_INVALID_PATH_OPS",10)}constructor(stream,xref,stateManager=new StateManager){this.parser=new _parser.Parser({lexer:new _parser.Lexer(stream,_EvaluatorPreprocessor2.opMap),xref}),this.stateManager=stateManager,this.nonProcessedArgs=[],this._isPathOp=!1,this._numInvalidPathOPS=0}get savedStatesDepth(){return this.stateManager.stateStack.length}read(operation){let args=operation.args;for(;;){const obj=this.parser.getObj();if(obj instanceof _primitives.Cmd){const cmd=obj.cmd,opSpec=_EvaluatorPreprocessor2.opMap[cmd];if(!opSpec){(0,_util2.warn)(`Unknown command "${cmd}".`);continue}const fn=opSpec.id,numArgs=opSpec.numArgs;let argsLength=args!==null?args.length:0;if(this._isPathOp||(this._numInvalidPathOPS=0),this._isPathOp=fn>=_util2.OPS.moveTo&&fn<=_util2.OPS.endPath,opSpec.variableArgs)argsLength>numArgs&&(0,_util2.info)(`Command ${cmd}: expected [0, ${numArgs}] args, but received ${argsLength} args.`);else{if(argsLength!==numArgs){const nonProcessedArgs=this.nonProcessedArgs;for(;argsLength>numArgs;)nonProcessedArgs.push(args.shift()),argsLength--;for(;argsLength<numArgs&&nonProcessedArgs.length!==0;)args===null&&(args=[]),args.unshift(nonProcessedArgs.pop()),argsLength++}if(argsLength<numArgs){const partialMsg=`command ${cmd}: expected ${numArgs} args, but received ${argsLength} args.`;if(this._isPathOp&&++this._numInvalidPathOPS>_EvaluatorPreprocessor2.MAX_INVALID_PATH_OPS)throw new _util2.FormatError(`Invalid ${partialMsg}`);(0,_util2.warn)(`Skipping ${partialMsg}`),args!==null&&(args.length=0);continue}}return this.preprocessCommand(fn,args),operation.fn=fn,operation.args=args,!0}if(obj===_primitives.EOF)return!1;if(obj!==null&&(args===null&&(args=[]),args.push(obj),args.length>33))throw new _util2.FormatError("Too many arguments")}}preprocessCommand(fn,args){switch(fn|0){case _util2.OPS.save:this.stateManager.save();break;case _util2.OPS.restore:this.stateManager.restore();break;case _util2.OPS.transform:this.stateManager.transform(args);break}}};__name(_EvaluatorPreprocessor,"EvaluatorPreprocessor");let EvaluatorPreprocessor=_EvaluatorPreprocessor;exports3.EvaluatorPreprocessor=EvaluatorPreprocessor},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.IdentityCMap=exports3.CMapFactory=exports3.CMap=void 0;var _util2=__w_pdfjs_require__3(2),_primitives=__w_pdfjs_require__3(5),_base_stream=__w_pdfjs_require__3(7),_parser=__w_pdfjs_require__3(17),_core_utils=__w_pdfjs_require__3(6),_stream=__w_pdfjs_require__3(10);const BUILT_IN_CMAPS=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"],MAX_MAP_RANGE=2**24-1,_CMap=class{static{__name2(this,"_CMap")}constructor(builtInCMap=!1){this.codespaceRanges=[[],[],[],[]],this.numCodespaceRanges=0,this._map=[],this.name="",this.vertical=!1,this.useCMap=null,this.builtInCMap=builtInCMap}addCodespaceRange(n,low,high){this.codespaceRanges[n-1].push(low,high),this.numCodespaceRanges++}mapCidRange(low,high,dstLow){if(high-low>MAX_MAP_RANGE)throw new Error("mapCidRange - ignoring data above MAX_MAP_RANGE.");for(;low<=high;)this._map[low++]=dstLow++}mapBfRange(low,high,dstLow){if(high-low>MAX_MAP_RANGE)throw new Error("mapBfRange - ignoring data above MAX_MAP_RANGE.");const lastByte=dstLow.length-1;for(;low<=high;){this._map[low++]=dstLow;const nextCharCode=dstLow.charCodeAt(lastByte)+1;if(nextCharCode>255){dstLow=dstLow.substring(0,lastByte-1)+String.fromCharCode(dstLow.charCodeAt(lastByte-1)+1)+"\0";continue}dstLow=dstLow.substring(0,lastByte)+String.fromCharCode(nextCharCode)}}mapBfRangeToArray(low,high,array){if(high-low>MAX_MAP_RANGE)throw new Error("mapBfRangeToArray - ignoring data above MAX_MAP_RANGE.");const ii=array.length;let i=0;for(;low<=high&&i<ii;)this._map[low]=array[i++],++low}mapOne(src,dst){this._map[src]=dst}lookup(code){return this._map[code]}contains(code){return this._map[code]!==void 0}forEach(callback){const map=this._map,length=map.length;if(length<=65536)for(let i=0;i<length;i++)map[i]!==void 0&&callback(i,map[i]);else for(const i in map)callback(i,map[i])}charCodeOf(value){const map=this._map;if(map.length<=65536)return map.indexOf(value);for(const charCode in map)if(map[charCode]===value)return charCode|0;return-1}getMap(){return this._map}readCharCode(str,offset,out){let c=0;const codespaceRanges=this.codespaceRanges;for(let n=0,nn=codespaceRanges.length;n<nn;n++){c=(c<<8|str.charCodeAt(offset+n))>>>0;const codespaceRange=codespaceRanges[n];for(let k=0,kk=codespaceRange.length;k<kk;){const low=codespaceRange[k++],high=codespaceRange[k++];if(c>=low&&c<=high){out.charcode=c,out.length=n+1;return}}}out.charcode=0,out.length=1}getCharCodeLength(charCode){const codespaceRanges=this.codespaceRanges;for(let n=0,nn=codespaceRanges.length;n<nn;n++){const codespaceRange=codespaceRanges[n];for(let k=0,kk=codespaceRange.length;k<kk;){const low=codespaceRange[k++],high=codespaceRange[k++];if(charCode>=low&&charCode<=high)return n+1}}return 1}get length(){return this._map.length}get isIdentityCMap(){if(!(this.name==="Identity-H"||this.name==="Identity-V")||this._map.length!==65536)return!1;for(let i=0;i<65536;i++)if(this._map[i]!==i)return!1;return!0}};__name(_CMap,"CMap");let CMap=_CMap;exports3.CMap=CMap;const _IdentityCMap=class extends CMap{static{__name2(this,"_IdentityCMap")}constructor(vertical,n){super(),this.vertical=vertical,this.addCodespaceRange(n,0,65535)}mapCidRange(low,high,dstLow){(0,_util2.unreachable)("should not call mapCidRange")}mapBfRange(low,high,dstLow){(0,_util2.unreachable)("should not call mapBfRange")}mapBfRangeToArray(low,high,array){(0,_util2.unreachable)("should not call mapBfRangeToArray")}mapOne(src,dst){(0,_util2.unreachable)("should not call mapCidOne")}lookup(code){return Number.isInteger(code)&&code<=65535?code:void 0}contains(code){return Number.isInteger(code)&&code<=65535}forEach(callback){for(let i=0;i<=65535;i++)callback(i,i)}charCodeOf(value){return Number.isInteger(value)&&value<=65535?value:-1}getMap(){const map=new Array(65536);for(let i=0;i<=65535;i++)map[i]=i;return map}get length(){return 65536}get isIdentityCMap(){(0,_util2.unreachable)("should not access .isIdentityCMap")}};__name(_IdentityCMap,"IdentityCMap");let IdentityCMap=_IdentityCMap;exports3.IdentityCMap=IdentityCMap;const BinaryCMapReader=__name(__name2(function(){function hexToInt(a,size){let n=0;for(let i=0;i<=size;i++)n=n<<8|a[i];return n>>>0}__name2(hexToInt,"hexToInt"),__name(hexToInt,"hexToInt");function hexToStr(a,size){return size===1?String.fromCharCode(a[0],a[1]):size===3?String.fromCharCode(a[0],a[1],a[2],a[3]):String.fromCharCode.apply(null,a.subarray(0,size+1))}__name2(hexToStr,"hexToStr"),__name(hexToStr,"hexToStr");function addHex(a,b,size){let c=0;for(let i=size;i>=0;i--)c+=a[i]+b[i],a[i]=c&255,c>>=8}__name2(addHex,"addHex"),__name(addHex,"addHex");function incHex(a,size){let c=1;for(let i=size;i>=0&&c>0;i--)c+=a[i],a[i]=c&255,c>>=8}__name2(incHex,"incHex"),__name(incHex,"incHex");const MAX_NUM_SIZE=16,MAX_ENCODED_NUM_SIZE=19,_BinaryCMapStream=class{static{__name2(this,"_BinaryCMapStream")}constructor(data){this.buffer=data,this.pos=0,this.end=data.length,this.tmpBuf=new Uint8Array(MAX_ENCODED_NUM_SIZE)}readByte(){return this.pos>=this.end?-1:this.buffer[this.pos++]}readNumber(){let n=0,last;do{const b=this.readByte();if(b<0)throw new _util2.FormatError("unexpected EOF in bcmap");last=!(b&128),n=n<<7|b&127}while(!last);return n}readSigned(){const n=this.readNumber();return n&1?~(n>>>1):n>>>1}readHex(num,size){num.set(this.buffer.subarray(this.pos,this.pos+size+1)),this.pos+=size+1}readHexNumber(num,size){let last;const stack=this.tmpBuf;let sp=0;do{const b=this.readByte();if(b<0)throw new _util2.FormatError("unexpected EOF in bcmap");last=!(b&128),stack[sp++]=b&127}while(!last);let i=size,buffer=0,bufferSize=0;for(;i>=0;){for(;bufferSize<8&&stack.length>0;)buffer|=stack[--sp]<<bufferSize,bufferSize+=7;num[i]=buffer&255,i--,buffer>>=8,bufferSize-=8}}readHexSigned(num,size){this.readHexNumber(num,size);const sign=num[size]&1?255:0;let c=0;for(let i=0;i<=size;i++)c=(c&1)<<8|num[i],num[i]=c>>1^sign}readString(){const len=this.readNumber();let s="";for(let i=0;i<len;i++)s+=String.fromCharCode(this.readNumber());return s}};__name(_BinaryCMapStream,"BinaryCMapStream");let BinaryCMapStream=_BinaryCMapStream;const _BinaryCMapReader=class{static{__name2(this,"_BinaryCMapReader")}async process(data,cMap,extend){const stream=new BinaryCMapStream(data),header=stream.readByte();cMap.vertical=!!(header&1);let useCMap=null;const start=new Uint8Array(MAX_NUM_SIZE),end=new Uint8Array(MAX_NUM_SIZE),char=new Uint8Array(MAX_NUM_SIZE),charCode=new Uint8Array(MAX_NUM_SIZE),tmp=new Uint8Array(MAX_NUM_SIZE);let code,b;for(;(b=stream.readByte())>=0;){const type=b>>5;if(type===7){switch(b&31){case 0:stream.readString();break;case 1:useCMap=stream.readString();break}continue}const sequence=!!(b&16),dataSize=b&15;if(dataSize+1>MAX_NUM_SIZE)throw new Error("BinaryCMapReader.process: Invalid dataSize.");const ucs2DataSize=1,subitemsCount=stream.readNumber();switch(type){case 0:stream.readHex(start,dataSize),stream.readHexNumber(end,dataSize),addHex(end,start,dataSize),cMap.addCodespaceRange(dataSize+1,hexToInt(start,dataSize),hexToInt(end,dataSize));for(let i=1;i<subitemsCount;i++)incHex(end,dataSize),stream.readHexNumber(start,dataSize),addHex(start,end,dataSize),stream.readHexNumber(end,dataSize),addHex(end,start,dataSize),cMap.addCodespaceRange(dataSize+1,hexToInt(start,dataSize),hexToInt(end,dataSize));break;case 1:stream.readHex(start,dataSize),stream.readHexNumber(end,dataSize),addHex(end,start,dataSize),stream.readNumber();for(let i=1;i<subitemsCount;i++)incHex(end,dataSize),stream.readHexNumber(start,dataSize),addHex(start,end,dataSize),stream.readHexNumber(end,dataSize),addHex(end,start,dataSize),stream.readNumber();break;case 2:stream.readHex(char,dataSize),code=stream.readNumber(),cMap.mapOne(hexToInt(char,dataSize),code);for(let i=1;i<subitemsCount;i++)incHex(char,dataSize),sequence||(stream.readHexNumber(tmp,dataSize),addHex(char,tmp,dataSize)),code=stream.readSigned()+(code+1),cMap.mapOne(hexToInt(char,dataSize),code);break;case 3:stream.readHex(start,dataSize),stream.readHexNumber(end,dataSize),addHex(end,start,dataSize),code=stream.readNumber(),cMap.mapCidRange(hexToInt(start,dataSize),hexToInt(end,dataSize),code);for(let i=1;i<subitemsCount;i++)incHex(end,dataSize),sequence?start.set(end):(stream.readHexNumber(start,dataSize),addHex(start,end,dataSize)),stream.readHexNumber(end,dataSize),addHex(end,start,dataSize),code=stream.readNumber(),cMap.mapCidRange(hexToInt(start,dataSize),hexToInt(end,dataSize),code);break;case 4:stream.readHex(char,ucs2DataSize),stream.readHex(charCode,dataSize),cMap.mapOne(hexToInt(char,ucs2DataSize),hexToStr(charCode,dataSize));for(let i=1;i<subitemsCount;i++)incHex(char,ucs2DataSize),sequence||(stream.readHexNumber(tmp,ucs2DataSize),addHex(char,tmp,ucs2DataSize)),incHex(charCode,dataSize),stream.readHexSigned(tmp,dataSize),addHex(charCode,tmp,dataSize),cMap.mapOne(hexToInt(char,ucs2DataSize),hexToStr(charCode,dataSize));break;case 5:stream.readHex(start,ucs2DataSize),stream.readHexNumber(end,ucs2DataSize),addHex(end,start,ucs2DataSize),stream.readHex(charCode,dataSize),cMap.mapBfRange(hexToInt(start,ucs2DataSize),hexToInt(end,ucs2DataSize),hexToStr(charCode,dataSize));for(let i=1;i<subitemsCount;i++)incHex(end,ucs2DataSize),sequence?start.set(end):(stream.readHexNumber(start,ucs2DataSize),addHex(start,end,ucs2DataSize)),stream.readHexNumber(end,ucs2DataSize),addHex(end,start,ucs2DataSize),stream.readHex(charCode,dataSize),cMap.mapBfRange(hexToInt(start,ucs2DataSize),hexToInt(end,ucs2DataSize),hexToStr(charCode,dataSize));break;default:throw new Error(`BinaryCMapReader.process - unknown type: ${type}`)}}return useCMap?extend(useCMap):cMap}};return __name(_BinaryCMapReader,"BinaryCMapReader"),_BinaryCMapReader},"BinaryCMapReaderClosure"),"BinaryCMapReaderClosure")(),CMapFactory=__name(__name2(function(){function strToInt(str){let a=0;for(let i=0;i<str.length;i++)a=a<<8|str.charCodeAt(i);return a>>>0}__name2(strToInt,"strToInt"),__name(strToInt,"strToInt");function expectString(obj){if(typeof obj!="string")throw new _util2.FormatError("Malformed CMap: expected string.")}__name2(expectString,"expectString"),__name(expectString,"expectString");function expectInt(obj){if(!Number.isInteger(obj))throw new _util2.FormatError("Malformed CMap: expected int.")}__name2(expectInt,"expectInt"),__name(expectInt,"expectInt");function parseBfChar(cMap,lexer){for(;;){let obj=lexer.getObj();if(obj===_primitives.EOF)break;if((0,_primitives.isCmd)(obj,"endbfchar"))return;expectString(obj);const src=strToInt(obj);obj=lexer.getObj(),expectString(obj);const dst=obj;cMap.mapOne(src,dst)}}__name2(parseBfChar,"parseBfChar"),__name(parseBfChar,"parseBfChar");function parseBfRange(cMap,lexer){for(;;){let obj=lexer.getObj();if(obj===_primitives.EOF)break;if((0,_primitives.isCmd)(obj,"endbfrange"))return;expectString(obj);const low=strToInt(obj);obj=lexer.getObj(),expectString(obj);const high=strToInt(obj);if(obj=lexer.getObj(),Number.isInteger(obj)||typeof obj=="string"){const dstLow=Number.isInteger(obj)?String.fromCharCode(obj):obj;cMap.mapBfRange(low,high,dstLow)}else if((0,_primitives.isCmd)(obj,"[")){obj=lexer.getObj();const array=[];for(;!(0,_primitives.isCmd)(obj,"]")&&obj!==_primitives.EOF;)array.push(obj),obj=lexer.getObj();cMap.mapBfRangeToArray(low,high,array)}else break}throw new _util2.FormatError("Invalid bf range.")}__name2(parseBfRange,"parseBfRange"),__name(parseBfRange,"parseBfRange");function parseCidChar(cMap,lexer){for(;;){let obj=lexer.getObj();if(obj===_primitives.EOF)break;if((0,_primitives.isCmd)(obj,"endcidchar"))return;expectString(obj);const src=strToInt(obj);obj=lexer.getObj(),expectInt(obj);const dst=obj;cMap.mapOne(src,dst)}}__name2(parseCidChar,"parseCidChar"),__name(parseCidChar,"parseCidChar");function parseCidRange(cMap,lexer){for(;;){let obj=lexer.getObj();if(obj===_primitives.EOF)break;if((0,_primitives.isCmd)(obj,"endcidrange"))return;expectString(obj);const low=strToInt(obj);obj=lexer.getObj(),expectString(obj);const high=strToInt(obj);obj=lexer.getObj(),expectInt(obj);const dstLow=obj;cMap.mapCidRange(low,high,dstLow)}}__name2(parseCidRange,"parseCidRange"),__name(parseCidRange,"parseCidRange");function parseCodespaceRange(cMap,lexer){for(;;){let obj=lexer.getObj();if(obj===_primitives.EOF)break;if((0,_primitives.isCmd)(obj,"endcodespacerange"))return;if(typeof obj!="string")break;const low=strToInt(obj);if(obj=lexer.getObj(),typeof obj!="string")break;const high=strToInt(obj);cMap.addCodespaceRange(obj.length,low,high)}throw new _util2.FormatError("Invalid codespace range.")}__name2(parseCodespaceRange,"parseCodespaceRange"),__name(parseCodespaceRange,"parseCodespaceRange");function parseWMode(cMap,lexer){const obj=lexer.getObj();Number.isInteger(obj)&&(cMap.vertical=!!obj)}__name2(parseWMode,"parseWMode"),__name(parseWMode,"parseWMode");function parseCMapName(cMap,lexer){const obj=lexer.getObj();obj instanceof _primitives.Name&&(cMap.name=obj.name)}__name2(parseCMapName,"parseCMapName"),__name(parseCMapName,"parseCMapName");async function parseCMap(cMap,lexer,fetchBuiltInCMap,useCMap){let previous,embeddedUseCMap;objLoop:for(;;)try{const obj=lexer.getObj();if(obj===_primitives.EOF)break;if(obj instanceof _primitives.Name)obj.name==="WMode"?parseWMode(cMap,lexer):obj.name==="CMapName"&&parseCMapName(cMap,lexer),previous=obj;else if(obj instanceof _primitives.Cmd)switch(obj.cmd){case"endcmap":break objLoop;case"usecmap":previous instanceof _primitives.Name&&(embeddedUseCMap=previous.name);break;case"begincodespacerange":parseCodespaceRange(cMap,lexer);break;case"beginbfchar":parseBfChar(cMap,lexer);break;case"begincidchar":parseCidChar(cMap,lexer);break;case"beginbfrange":parseBfRange(cMap,lexer);break;case"begincidrange":parseCidRange(cMap,lexer);break}}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.warn)("Invalid cMap data: "+ex);continue}return!useCMap&&embeddedUseCMap&&(useCMap=embeddedUseCMap),useCMap?extendCMap(cMap,fetchBuiltInCMap,useCMap):cMap}__name2(parseCMap,"parseCMap"),__name(parseCMap,"parseCMap");async function extendCMap(cMap,fetchBuiltInCMap,useCMap){if(cMap.useCMap=await createBuiltInCMap(useCMap,fetchBuiltInCMap),cMap.numCodespaceRanges===0){const useCodespaceRanges=cMap.useCMap.codespaceRanges;for(let i=0;i<useCodespaceRanges.length;i++)cMap.codespaceRanges[i]=useCodespaceRanges[i].slice();cMap.numCodespaceRanges=cMap.useCMap.numCodespaceRanges}return cMap.useCMap.forEach(function(key,value){cMap.contains(key)||cMap.mapOne(key,cMap.useCMap.lookup(key))}),cMap}__name2(extendCMap,"extendCMap"),__name(extendCMap,"extendCMap");async function createBuiltInCMap(name,fetchBuiltInCMap){if(name==="Identity-H")return new IdentityCMap(!1,2);if(name==="Identity-V")return new IdentityCMap(!0,2);if(!BUILT_IN_CMAPS.includes(name))throw new Error("Unknown CMap name: "+name);if(!fetchBuiltInCMap)throw new Error("Built-in CMap parameters are not provided.");const{cMapData,compressionType}=await fetchBuiltInCMap(name),cMap=new CMap(!0);if(compressionType===_util2.CMapCompressionType.BINARY)return new BinaryCMapReader().process(cMapData,cMap,useCMap=>extendCMap(cMap,fetchBuiltInCMap,useCMap));if(compressionType===_util2.CMapCompressionType.NONE){const lexer=new _parser.Lexer(new _stream.Stream(cMapData));return parseCMap(cMap,lexer,fetchBuiltInCMap,null)}throw new Error("TODO: Only BINARY/NONE CMap compression is currently supported.")}return __name2(createBuiltInCMap,"createBuiltInCMap"),__name(createBuiltInCMap,"createBuiltInCMap"),{async create(params){const encoding=params.encoding,fetchBuiltInCMap=params.fetchBuiltInCMap,useCMap=params.useCMap;if(encoding instanceof _primitives.Name)return createBuiltInCMap(encoding.name,fetchBuiltInCMap);if(encoding instanceof _base_stream.BaseStream){const parsedCMap=await parseCMap(new CMap,new _parser.Lexer(encoding),fetchBuiltInCMap,useCMap);return parsedCMap.isIdentityCMap?createBuiltInCMap(parsedCMap.name,fetchBuiltInCMap):parsedCMap}throw new Error("Encoding required.")}}},"CMapFactoryClosure"),"CMapFactoryClosure")();exports3.CMapFactory=CMapFactory},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.Parser=exports3.Linearization=exports3.Lexer=void 0;var _util2=__w_pdfjs_require__3(2),_primitives=__w_pdfjs_require__3(5),_core_utils=__w_pdfjs_require__3(6),_ascii_85_stream=__w_pdfjs_require__3(18),_ascii_hex_stream=__w_pdfjs_require__3(20),_ccitt_stream=__w_pdfjs_require__3(21),_flate_stream=__w_pdfjs_require__3(23),_jbig2_stream=__w_pdfjs_require__3(24),_jpeg_stream=__w_pdfjs_require__3(27),_jpx_stream=__w_pdfjs_require__3(29),_lzw_stream=__w_pdfjs_require__3(31),_stream=__w_pdfjs_require__3(10),_predictor_stream=__w_pdfjs_require__3(32),_run_length_stream=__w_pdfjs_require__3(33);const MAX_LENGTH_TO_CACHE=1e3,MAX_ADLER32_LENGTH=5552;function computeAdler32(bytes){const bytesLength=bytes.length;let a=1,b=0;for(let i=0;i<bytesLength;++i)a+=bytes[i]&255,b+=a;return b%65521<<16|a%65521}__name2(computeAdler32,"computeAdler32"),__name(computeAdler32,"computeAdler32");const _Parser=class{static{__name2(this,"_Parser")}constructor({lexer,xref,allowStreams=!1,recoveryMode=!1}){this.lexer=lexer,this.xref=xref,this.allowStreams=allowStreams,this.recoveryMode=recoveryMode,this.imageCache=Object.create(null),this.refill()}refill(){this.buf1=this.lexer.getObj(),this.buf2=this.lexer.getObj()}shift(){this.buf2 instanceof _primitives.Cmd&&this.buf2.cmd==="ID"?(this.buf1=this.buf2,this.buf2=null):(this.buf1=this.buf2,this.buf2=this.lexer.getObj())}tryShift(){try{return this.shift(),!0}catch(e){if(e instanceof _core_utils.MissingDataException)throw e;return!1}}getObj(cipherTransform=null){const buf1=this.buf1;if(this.shift(),buf1 instanceof _primitives.Cmd)switch(buf1.cmd){case"BI":return this.makeInlineImage(cipherTransform);case"[":const array=[];for(;!(0,_primitives.isCmd)(this.buf1,"]")&&this.buf1!==_primitives.EOF;)array.push(this.getObj(cipherTransform));if(this.buf1===_primitives.EOF){if(this.recoveryMode)return array;throw new _core_utils.ParserEOFException("End of file inside array.")}return this.shift(),array;case"<<":const dict=new _primitives.Dict(this.xref);for(;!(0,_primitives.isCmd)(this.buf1,">>")&&this.buf1!==_primitives.EOF;){if(!(this.buf1 instanceof _primitives.Name)){(0,_util2.info)("Malformed dictionary: key must be a name object"),this.shift();continue}const key=this.buf1.name;if(this.shift(),this.buf1===_primitives.EOF)break;dict.set(key,this.getObj(cipherTransform))}if(this.buf1===_primitives.EOF){if(this.recoveryMode)return dict;throw new _core_utils.ParserEOFException("End of file inside dictionary.")}return(0,_primitives.isCmd)(this.buf2,"stream")?this.allowStreams?this.makeStream(dict,cipherTransform):dict:(this.shift(),dict);default:return buf1}if(Number.isInteger(buf1)){if(Number.isInteger(this.buf1)&&(0,_primitives.isCmd)(this.buf2,"R")){const ref=_primitives.Ref.get(buf1,this.buf1);return this.shift(),this.shift(),ref}return buf1}return typeof buf1=="string"&&cipherTransform?cipherTransform.decryptString(buf1):buf1}findDefaultInlineStreamEnd(stream){const lexer=this.lexer,startPos=stream.pos,n=10;let state=0,ch,maybeEIPos;for(;(ch=stream.getByte())!==-1;)if(state===0)state=ch===69?1:0;else if(state===1)state=ch===73?2:0;else if((0,_util2.assert)(state===2,"findDefaultInlineStreamEnd - invalid state."),ch===32||ch===10||ch===13){maybeEIPos=stream.pos;const followingBytes=stream.peekBytes(n);for(let i=0,ii=followingBytes.length;i<ii;i++)if(ch=followingBytes[i],!(ch===0&&followingBytes[i+1]!==0)&&ch!==10&&ch!==13&&(ch<32||ch>127)){state=0;break}if(state!==2)continue;if(lexer.knownCommands){const nextObj=lexer.peekObj();nextObj instanceof _primitives.Cmd&&!lexer.knownCommands[nextObj.cmd]&&(state=0)}else(0,_util2.warn)("findDefaultInlineStreamEnd - `lexer.knownCommands` is undefined.");if(state===2)break}else state=0;ch===-1&&((0,_util2.warn)("findDefaultInlineStreamEnd: Reached the end of the stream without finding a valid EI marker"),maybeEIPos&&((0,_util2.warn)('... trying to recover by using the last "EI" occurrence.'),stream.skip(-(stream.pos-maybeEIPos))));let endOffset=4;return stream.skip(-endOffset),ch=stream.peekByte(),stream.skip(endOffset),(0,_core_utils.isWhiteSpace)(ch)||endOffset--,stream.pos-endOffset-startPos}findDCTDecodeInlineStreamEnd(stream){const startPos=stream.pos;let foundEOI=!1,b,markerLength;for(;(b=stream.getByte())!==-1;)if(b===255){switch(stream.getByte()){case 0:break;case 255:stream.skip(-1);break;case 217:foundEOI=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:markerLength=stream.getUint16(),markerLength>2?stream.skip(markerLength-2):stream.skip(-2);break}if(foundEOI)break}const length=stream.pos-startPos;return b===-1?((0,_util2.warn)("Inline DCTDecode image stream: EOI marker not found, searching for /EI/ instead."),stream.skip(-length),this.findDefaultInlineStreamEnd(stream)):(this.inlineStreamSkipEI(stream),length)}findASCII85DecodeInlineStreamEnd(stream){const startPos=stream.pos;let ch;for(;(ch=stream.getByte())!==-1;)if(ch===126){const tildePos=stream.pos;for(ch=stream.peekByte();(0,_core_utils.isWhiteSpace)(ch);)stream.skip(),ch=stream.peekByte();if(ch===62){stream.skip();break}if(stream.pos>tildePos){const maybeEI=stream.peekBytes(2);if(maybeEI[0]===69&&maybeEI[1]===73)break}}const length=stream.pos-startPos;return ch===-1?((0,_util2.warn)("Inline ASCII85Decode image stream: EOD marker not found, searching for /EI/ instead."),stream.skip(-length),this.findDefaultInlineStreamEnd(stream)):(this.inlineStreamSkipEI(stream),length)}findASCIIHexDecodeInlineStreamEnd(stream){const startPos=stream.pos;let ch;for(;(ch=stream.getByte())!==-1&&ch!==62;);const length=stream.pos-startPos;return ch===-1?((0,_util2.warn)("Inline ASCIIHexDecode image stream: EOD marker not found, searching for /EI/ instead."),stream.skip(-length),this.findDefaultInlineStreamEnd(stream)):(this.inlineStreamSkipEI(stream),length)}inlineStreamSkipEI(stream){let state=0,ch;for(;(ch=stream.getByte())!==-1;)if(state===0)state=ch===69?1:0;else if(state===1)state=ch===73?2:0;else if(state===2)break}makeInlineImage(cipherTransform){const lexer=this.lexer,stream=lexer.stream,dict=new _primitives.Dict(this.xref);let dictLength;for(;!(0,_primitives.isCmd)(this.buf1,"ID")&&this.buf1!==_primitives.EOF;){if(!(this.buf1 instanceof _primitives.Name))throw new _util2.FormatError("Dictionary key must be a name object");const key=this.buf1.name;if(this.shift(),this.buf1===_primitives.EOF)break;dict.set(key,this.getObj(cipherTransform))}lexer.beginInlineImagePos!==-1&&(dictLength=stream.pos-lexer.beginInlineImagePos);const filter2=dict.get("F","Filter");let filterName;if(filter2 instanceof _primitives.Name)filterName=filter2.name;else if(Array.isArray(filter2)){const filterZero=this.xref.fetchIfRef(filter2[0]);filterZero instanceof _primitives.Name&&(filterName=filterZero.name)}const startPos=stream.pos;let length;switch(filterName){case"DCT":case"DCTDecode":length=this.findDCTDecodeInlineStreamEnd(stream);break;case"A85":case"ASCII85Decode":length=this.findASCII85DecodeInlineStreamEnd(stream);break;case"AHx":case"ASCIIHexDecode":length=this.findASCIIHexDecodeInlineStreamEnd(stream);break;default:length=this.findDefaultInlineStreamEnd(stream)}let imageStream=stream.makeSubStream(startPos,length,dict),cacheKey;if(length<MAX_LENGTH_TO_CACHE&&dictLength<MAX_ADLER32_LENGTH){const imageBytes=imageStream.getBytes();imageStream.reset();const initialStreamPos=stream.pos;stream.pos=lexer.beginInlineImagePos;const dictBytes=stream.getBytes(dictLength);stream.pos=initialStreamPos,cacheKey=computeAdler32(imageBytes)+"_"+computeAdler32(dictBytes);const cacheEntry=this.imageCache[cacheKey];if(cacheEntry!==void 0)return this.buf2=_primitives.Cmd.get("EI"),this.shift(),cacheEntry.reset(),cacheEntry}return cipherTransform&&(imageStream=cipherTransform.createStream(imageStream,length)),imageStream=this.filter(imageStream,dict,length),imageStream.dict=dict,cacheKey!==void 0&&(imageStream.cacheKey=`inline_${length}_${cacheKey}`,this.imageCache[cacheKey]=imageStream),this.buf2=_primitives.Cmd.get("EI"),this.shift(),imageStream}_findStreamLength(startPos,signature){const{stream}=this.lexer;stream.pos=startPos;const SCAN_BLOCK_LENGTH=2048,signatureLength=signature.length;for(;stream.pos<stream.end;){const scanBytes=stream.peekBytes(SCAN_BLOCK_LENGTH),scanLength=scanBytes.length-signatureLength;if(scanLength<=0)break;let pos=0;for(;pos<scanLength;){let j=0;for(;j<signatureLength&&scanBytes[pos+j]===signature[j];)j++;if(j>=signatureLength)return stream.pos+=pos,stream.pos-startPos;pos++}stream.pos+=scanLength}return-1}makeStream(dict,cipherTransform){const lexer=this.lexer;let stream=lexer.stream;lexer.skipToNextLine();const startPos=stream.pos-1;let length=dict.get("Length");if(Number.isInteger(length)||((0,_util2.info)(`Bad length "${length&&length.toString()}" in stream.`),length=0),stream.pos=startPos+length,lexer.nextChar(),this.tryShift()&&(0,_primitives.isCmd)(this.buf2,"endstream"))this.shift();else{const ENDSTREAM_SIGNATURE=new Uint8Array([101,110,100,115,116,114,101,97,109]);let actualLength=this._findStreamLength(startPos,ENDSTREAM_SIGNATURE);if(actualLength<0){for(let i=1;i<=1;i++){const end=ENDSTREAM_SIGNATURE.length-i,TRUNCATED_SIGNATURE=ENDSTREAM_SIGNATURE.slice(0,end),maybeLength=this._findStreamLength(startPos,TRUNCATED_SIGNATURE);if(maybeLength>=0){const lastByte=stream.peekBytes(end+1)[end];if(!(0,_core_utils.isWhiteSpace)(lastByte))break;(0,_util2.info)(`Found "${(0,_util2.bytesToString)(TRUNCATED_SIGNATURE)}" when searching for endstream command.`),actualLength=maybeLength;break}}if(actualLength<0)throw new _util2.FormatError("Missing endstream command.")}length=actualLength,lexer.nextChar(),this.shift(),this.shift()}return this.shift(),stream=stream.makeSubStream(startPos,length,dict),cipherTransform&&(stream=cipherTransform.createStream(stream,length)),stream=this.filter(stream,dict,length),stream.dict=dict,stream}filter(stream,dict,length){let filter2=dict.get("F","Filter"),params=dict.get("DP","DecodeParms");if(filter2 instanceof _primitives.Name)return Array.isArray(params)&&(0,_util2.warn)("/DecodeParms should not be an Array, when /Filter is a Name."),this.makeFilter(stream,filter2.name,length,params);let maybeLength=length;if(Array.isArray(filter2)){const filterArray=filter2,paramsArray=params;for(let i=0,ii=filterArray.length;i<ii;++i){if(filter2=this.xref.fetchIfRef(filterArray[i]),!(filter2 instanceof _primitives.Name))throw new _util2.FormatError(`Bad filter name "${filter2}"`);params=null,Array.isArray(paramsArray)&&i in paramsArray&&(params=this.xref.fetchIfRef(paramsArray[i])),stream=this.makeFilter(stream,filter2.name,maybeLength,params),maybeLength=null}}return stream}makeFilter(stream,name,maybeLength,params){if(maybeLength===0)return(0,_util2.warn)(`Empty "${name}" stream.`),new _stream.NullStream;const xrefStats=this.xref.stats;try{switch(name){case"Fl":case"FlateDecode":return xrefStats.addStreamType(_util2.StreamType.FLATE),params?new _predictor_stream.PredictorStream(new _flate_stream.FlateStream(stream,maybeLength),maybeLength,params):new _flate_stream.FlateStream(stream,maybeLength);case"LZW":case"LZWDecode":xrefStats.addStreamType(_util2.StreamType.LZW);let earlyChange=1;return params?(params.has("EarlyChange")&&(earlyChange=params.get("EarlyChange")),new _predictor_stream.PredictorStream(new _lzw_stream.LZWStream(stream,maybeLength,earlyChange),maybeLength,params)):new _lzw_stream.LZWStream(stream,maybeLength,earlyChange);case"DCT":case"DCTDecode":return xrefStats.addStreamType(_util2.StreamType.DCT),new _jpeg_stream.JpegStream(stream,maybeLength,params);case"JPX":case"JPXDecode":return xrefStats.addStreamType(_util2.StreamType.JPX),new _jpx_stream.JpxStream(stream,maybeLength,params);case"A85":case"ASCII85Decode":return xrefStats.addStreamType(_util2.StreamType.A85),new _ascii_85_stream.Ascii85Stream(stream,maybeLength);case"AHx":case"ASCIIHexDecode":return xrefStats.addStreamType(_util2.StreamType.AHX),new _ascii_hex_stream.AsciiHexStream(stream,maybeLength);case"CCF":case"CCITTFaxDecode":return xrefStats.addStreamType(_util2.StreamType.CCF),new _ccitt_stream.CCITTFaxStream(stream,maybeLength,params);case"RL":case"RunLengthDecode":return xrefStats.addStreamType(_util2.StreamType.RLX),new _run_length_stream.RunLengthStream(stream,maybeLength);case"JBIG2Decode":return xrefStats.addStreamType(_util2.StreamType.JBIG),new _jbig2_stream.Jbig2Stream(stream,maybeLength,params)}return(0,_util2.warn)(`Filter "${name}" is not supported.`),stream}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;return(0,_util2.warn)(`Invalid stream: "${ex}"`),new _stream.NullStream}}};__name(_Parser,"Parser");let Parser=_Parser;exports3.Parser=Parser;const specialChars=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function toHexDigit(ch){return ch>=48&&ch<=57?ch&15:ch>=65&&ch<=70||ch>=97&&ch<=102?(ch&15)+9:-1}__name2(toHexDigit,"toHexDigit"),__name(toHexDigit,"toHexDigit");const _Lexer=class{static{__name2(this,"_Lexer")}constructor(stream,knownCommands=null){this.stream=stream,this.nextChar(),this.strBuf=[],this.knownCommands=knownCommands,this._hexStringNumWarn=0,this.beginInlineImagePos=-1}nextChar(){return this.currentChar=this.stream.getByte()}peekChar(){return this.stream.peekByte()}getNumber(){let ch=this.currentChar,eNotation=!1,divideBy=0,sign=0;if(ch===45?(sign=-1,ch=this.nextChar(),ch===45&&(ch=this.nextChar())):ch===43&&(sign=1,ch=this.nextChar()),ch===10||ch===13)do ch=this.nextChar();while(ch===10||ch===13);if(ch===46&&(divideBy=10,ch=this.nextChar()),ch<48||ch>57){if((0,_core_utils.isWhiteSpace)(ch)||ch===-1){if(divideBy===10&&sign===0)return(0,_util2.warn)("Lexer.getNumber - treating a single decimal point as zero."),0;if(divideBy===0&&sign===-1)return(0,_util2.warn)("Lexer.getNumber - treating a single minus sign as zero."),0}throw new _util2.FormatError(`Invalid number: ${String.fromCharCode(ch)} (charCode ${ch})`)}sign=sign||1;let baseValue=ch-48,powerValue=0,powerValueSign=1;for(;(ch=this.nextChar())>=0;)if(ch>=48&&ch<=57){const currentDigit=ch-48;eNotation?powerValue=powerValue*10+currentDigit:(divideBy!==0&&(divideBy*=10),baseValue=baseValue*10+currentDigit)}else if(ch===46)if(divideBy===0)divideBy=1;else break;else if(ch===45)(0,_util2.warn)("Badly formatted number: minus sign in the middle");else if(ch===69||ch===101){if(ch=this.peekChar(),ch===43||ch===45)powerValueSign=ch===45?-1:1,this.nextChar();else if(ch<48||ch>57)break;eNotation=!0}else break;return divideBy!==0&&(baseValue/=divideBy),eNotation&&(baseValue*=10**(powerValueSign*powerValue)),sign*baseValue}getString(){let numParen=1,done=!1;const strBuf=this.strBuf;strBuf.length=0;let ch=this.nextChar();for(;;){let charBuffered=!1;switch(ch|0){case-1:(0,_util2.warn)("Unterminated string"),done=!0;break;case 40:++numParen,strBuf.push("(");break;case 41:--numParen===0?(this.nextChar(),done=!0):strBuf.push(")");break;case 92:switch(ch=this.nextChar(),ch){case-1:(0,_util2.warn)("Unterminated string"),done=!0;break;case 110:strBuf.push(`
`);break;case 114:strBuf.push("\r");break;case 116:strBuf.push("	");break;case 98:strBuf.push("\b");break;case 102:strBuf.push("\f");break;case 92:case 40:case 41:strBuf.push(String.fromCharCode(ch));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:let x=ch&15;ch=this.nextChar(),charBuffered=!0,ch>=48&&ch<=55&&(x=(x<<3)+(ch&15),ch=this.nextChar(),ch>=48&&ch<=55&&(charBuffered=!1,x=(x<<3)+(ch&15))),strBuf.push(String.fromCharCode(x));break;case 13:this.peekChar()===10&&this.nextChar();break;case 10:break;default:strBuf.push(String.fromCharCode(ch));break}break;default:strBuf.push(String.fromCharCode(ch));break}if(done)break;charBuffered||(ch=this.nextChar())}return strBuf.join("")}getName(){let ch,previousCh;const strBuf=this.strBuf;for(strBuf.length=0;(ch=this.nextChar())>=0&&!specialChars[ch];)if(ch===35){if(ch=this.nextChar(),specialChars[ch]){(0,_util2.warn)("Lexer_getName: NUMBER SIGN (#) should be followed by a hexadecimal number."),strBuf.push("#");break}const x=toHexDigit(ch);if(x!==-1){previousCh=ch,ch=this.nextChar();const x2=toHexDigit(ch);if(x2===-1){if((0,_util2.warn)(`Lexer_getName: Illegal digit (${String.fromCharCode(ch)}) in hexadecimal number.`),strBuf.push("#",String.fromCharCode(previousCh)),specialChars[ch])break;strBuf.push(String.fromCharCode(ch));continue}strBuf.push(String.fromCharCode(x<<4|x2))}else strBuf.push("#",String.fromCharCode(ch))}else strBuf.push(String.fromCharCode(ch));return strBuf.length>127&&(0,_util2.warn)(`Name token is longer than allowed by the spec: ${strBuf.length}`),_primitives.Name.get(strBuf.join(""))}_hexStringWarn(ch){if(this._hexStringNumWarn++===5){(0,_util2.warn)("getHexString - ignoring additional invalid characters.");return}this._hexStringNumWarn>5||(0,_util2.warn)(`getHexString - ignoring invalid character: ${ch}`)}getHexString(){const strBuf=this.strBuf;strBuf.length=0;let ch=this.currentChar,isFirstHex=!0,firstDigit,secondDigit;for(this._hexStringNumWarn=0;;)if(ch<0){(0,_util2.warn)("Unterminated hex string");break}else if(ch===62){this.nextChar();break}else if(specialChars[ch]===1){ch=this.nextChar();continue}else{if(isFirstHex){if(firstDigit=toHexDigit(ch),firstDigit===-1){this._hexStringWarn(ch),ch=this.nextChar();continue}}else{if(secondDigit=toHexDigit(ch),secondDigit===-1){this._hexStringWarn(ch),ch=this.nextChar();continue}strBuf.push(String.fromCharCode(firstDigit<<4|secondDigit))}isFirstHex=!isFirstHex,ch=this.nextChar()}return strBuf.join("")}getObj(){let comment=!1,ch=this.currentChar;for(;;){if(ch<0)return _primitives.EOF;if(comment)(ch===10||ch===13)&&(comment=!1);else if(ch===37)comment=!0;else if(specialChars[ch]!==1)break;ch=this.nextChar()}switch(ch|0){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),_primitives.Cmd.get("[");case 93:return this.nextChar(),_primitives.Cmd.get("]");case 60:return ch=this.nextChar(),ch===60?(this.nextChar(),_primitives.Cmd.get("<<")):this.getHexString();case 62:return ch=this.nextChar(),ch===62?(this.nextChar(),_primitives.Cmd.get(">>")):_primitives.Cmd.get(">");case 123:return this.nextChar(),_primitives.Cmd.get("{");case 125:return this.nextChar(),_primitives.Cmd.get("}");case 41:throw this.nextChar(),new _util2.FormatError(`Illegal character: ${ch}`)}let str=String.fromCharCode(ch);if(ch<32||ch>127){const nextCh=this.peekChar();if(nextCh>=32&&nextCh<=127)return this.nextChar(),_primitives.Cmd.get(str)}const knownCommands=this.knownCommands;let knownCommandFound=knownCommands&&knownCommands[str]!==void 0;for(;(ch=this.nextChar())>=0&&!specialChars[ch];){const possibleCommand=str+String.fromCharCode(ch);if(knownCommandFound&&knownCommands[possibleCommand]===void 0)break;if(str.length===128)throw new _util2.FormatError(`Command token too long: ${str.length}`);str=possibleCommand,knownCommandFound=knownCommands&&knownCommands[str]!==void 0}return str==="true"?!0:str==="false"?!1:str==="null"?null:(str==="BI"&&(this.beginInlineImagePos=this.stream.pos),_primitives.Cmd.get(str))}peekObj(){const streamPos=this.stream.pos,currentChar=this.currentChar,beginInlineImagePos=this.beginInlineImagePos;let nextObj;try{nextObj=this.getObj()}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.warn)(`peekObj: ${ex}`)}return this.stream.pos=streamPos,this.currentChar=currentChar,this.beginInlineImagePos=beginInlineImagePos,nextObj}skipToNextLine(){let ch=this.currentChar;for(;ch>=0;){if(ch===13){ch=this.nextChar(),ch===10&&this.nextChar();break}else if(ch===10){this.nextChar();break}ch=this.nextChar()}}};__name(_Lexer,"Lexer");let Lexer=_Lexer;exports3.Lexer=Lexer;const _Linearization=class{static{__name2(this,"_Linearization")}static create(stream){function getInt(linDict2,name,allowZeroValue=!1){const obj4=linDict2.get(name);if(Number.isInteger(obj4)&&(allowZeroValue?obj4>=0:obj4>0))return obj4;throw new Error(`The "${name}" parameter in the linearization dictionary is invalid.`)}__name2(getInt,"getInt"),__name(getInt,"getInt");function getHints(linDict2){const hints=linDict2.get("H");let hintsLength;if(Array.isArray(hints)&&((hintsLength=hints.length)===2||hintsLength===4)){for(let index=0;index<hintsLength;index++){const hint=hints[index];if(!(Number.isInteger(hint)&&hint>0))throw new Error(`Hint (${index}) in the linearization dictionary is invalid.`)}return hints}throw new Error("Hint array in the linearization dictionary is invalid.")}__name2(getHints,"getHints"),__name(getHints,"getHints");const parser=new Parser({lexer:new Lexer(stream),xref:null}),obj1=parser.getObj(),obj2=parser.getObj(),obj3=parser.getObj(),linDict=parser.getObj();let obj,length;if(Number.isInteger(obj1)&&Number.isInteger(obj2)&&(0,_primitives.isCmd)(obj3,"obj")&&linDict instanceof _primitives.Dict&&typeof(obj=linDict.get("Linearized"))=="number"&&obj>0){if((length=getInt(linDict,"L"))!==stream.length)throw new Error('The "L" parameter in the linearization dictionary does not equal the stream length.')}else return null;return{length,hints:getHints(linDict),objectNumberFirst:getInt(linDict,"O"),endFirst:getInt(linDict,"E"),numPages:getInt(linDict,"N"),mainXRefEntriesOffset:getInt(linDict,"T"),pageFirst:linDict.has("P")?getInt(linDict,"P",!0):0}}};__name(_Linearization,"Linearization");let Linearization=_Linearization;exports3.Linearization=Linearization},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.Ascii85Stream=void 0;var _decode_stream=__w_pdfjs_require__3(19),_core_utils=__w_pdfjs_require__3(6);const _Ascii85Stream=class extends _decode_stream.DecodeStream{static{__name2(this,"_Ascii85Stream")}constructor(str,maybeLength){maybeLength&&(maybeLength*=.8),super(maybeLength),this.str=str,this.dict=str.dict,this.input=new Uint8Array(5)}readBlock(){const str=this.str;let c=str.getByte();for(;(0,_core_utils.isWhiteSpace)(c);)c=str.getByte();if(c===-1||c===126){this.eof=!0;return}const bufferLength=this.bufferLength;let buffer,i;if(c===122){for(buffer=this.ensureBuffer(bufferLength+4),i=0;i<4;++i)buffer[bufferLength+i]=0;this.bufferLength+=4}else{const input=this.input;for(input[0]=c,i=1;i<5;++i){for(c=str.getByte();(0,_core_utils.isWhiteSpace)(c);)c=str.getByte();if(input[i]=c,c===-1||c===126)break}if(buffer=this.ensureBuffer(bufferLength+i-1),this.bufferLength+=i-1,i<5){for(;i<5;++i)input[i]=33+84;this.eof=!0}let t=0;for(i=0;i<5;++i)t=t*85+(input[i]-33);for(i=3;i>=0;--i)buffer[bufferLength+i]=t&255,t>>=8}}};__name(_Ascii85Stream,"Ascii85Stream");let Ascii85Stream=_Ascii85Stream;exports3.Ascii85Stream=Ascii85Stream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.StreamsSequenceStream=exports3.DecodeStream=void 0;var _base_stream=__w_pdfjs_require__3(7),_stream=__w_pdfjs_require__3(10);const emptyBuffer=new Uint8Array(0),_DecodeStream=class extends _base_stream.BaseStream{static{__name2(this,"_DecodeStream")}constructor(maybeMinBufferLength){if(super(),this._rawMinBufferLength=maybeMinBufferLength||0,this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=emptyBuffer,this.minBufferLength=512,maybeMinBufferLength)for(;this.minBufferLength<maybeMinBufferLength;)this.minBufferLength*=2}get isEmpty(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0}ensureBuffer(requested){const buffer=this.buffer;if(requested<=buffer.byteLength)return buffer;let size=this.minBufferLength;for(;size<requested;)size*=2;const buffer2=new Uint8Array(size);return buffer2.set(buffer),this.buffer=buffer2}getByte(){const pos=this.pos;for(;this.bufferLength<=pos;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]}getBytes(length){const pos=this.pos;let end;if(length){for(this.ensureBuffer(pos+length),end=pos+length;!this.eof&&this.bufferLength<end;)this.readBlock();const bufEnd=this.bufferLength;end>bufEnd&&(end=bufEnd)}else{for(;!this.eof;)this.readBlock();end=this.bufferLength}return this.pos=end,this.buffer.subarray(pos,end)}reset(){this.pos=0}makeSubStream(start,length,dict=null){if(length===void 0)for(;!this.eof;)this.readBlock();else{const end=start+length;for(;this.bufferLength<=end&&!this.eof;)this.readBlock()}return new _stream.Stream(this.buffer,start,length,dict)}getBaseStreams(){return this.str?this.str.getBaseStreams():null}};__name(_DecodeStream,"DecodeStream");let DecodeStream=_DecodeStream;exports3.DecodeStream=DecodeStream;const _StreamsSequenceStream=class extends DecodeStream{static{__name2(this,"_StreamsSequenceStream")}constructor(streams,onError=null){let maybeLength=0;for(const stream of streams)maybeLength+=stream instanceof DecodeStream?stream._rawMinBufferLength:stream.length;super(maybeLength),this.streams=streams,this._onError=onError}readBlock(){const streams=this.streams;if(streams.length===0){this.eof=!0;return}const stream=streams.shift();let chunk;try{chunk=stream.getBytes()}catch(reason){if(this._onError){this._onError(reason,stream.dict&&stream.dict.objId);return}throw reason}const bufferLength=this.bufferLength,newLength=bufferLength+chunk.length;this.ensureBuffer(newLength).set(chunk,bufferLength),this.bufferLength=newLength}getBaseStreams(){const baseStreamsBuf=[];for(const stream of this.streams){const baseStreams=stream.getBaseStreams();baseStreams&&baseStreamsBuf.push(...baseStreams)}return baseStreamsBuf.length>0?baseStreamsBuf:null}};__name(_StreamsSequenceStream,"StreamsSequenceStream");let StreamsSequenceStream=_StreamsSequenceStream;exports3.StreamsSequenceStream=StreamsSequenceStream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.AsciiHexStream=void 0;var _decode_stream=__w_pdfjs_require__3(19);const _AsciiHexStream=class extends _decode_stream.DecodeStream{static{__name2(this,"_AsciiHexStream")}constructor(str,maybeLength){maybeLength&&(maybeLength*=.5),super(maybeLength),this.str=str,this.dict=str.dict,this.firstDigit=-1}readBlock(){const bytes=this.str.getBytes(8e3);if(!bytes.length){this.eof=!0;return}const maxDecodeLength=bytes.length+1>>1,buffer=this.ensureBuffer(this.bufferLength+maxDecodeLength);let bufferLength=this.bufferLength,firstDigit=this.firstDigit;for(const ch of bytes){let digit;if(ch>=48&&ch<=57)digit=ch&15;else if(ch>=65&&ch<=70||ch>=97&&ch<=102)digit=(ch&15)+9;else if(ch===62){this.eof=!0;break}else continue;firstDigit<0?firstDigit=digit:(buffer[bufferLength++]=firstDigit<<4|digit,firstDigit=-1)}firstDigit>=0&&this.eof&&(buffer[bufferLength++]=firstDigit<<4,firstDigit=-1),this.firstDigit=firstDigit,this.bufferLength=bufferLength}};__name(_AsciiHexStream,"AsciiHexStream");let AsciiHexStream=_AsciiHexStream;exports3.AsciiHexStream=AsciiHexStream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.CCITTFaxStream=void 0;var _ccitt=__w_pdfjs_require__3(22),_decode_stream=__w_pdfjs_require__3(19),_primitives=__w_pdfjs_require__3(5);const _CCITTFaxStream=class extends _decode_stream.DecodeStream{static{__name2(this,"_CCITTFaxStream")}constructor(str,maybeLength,params){super(maybeLength),this.str=str,this.dict=str.dict,params instanceof _primitives.Dict||(params=_primitives.Dict.empty);const source={next(){return str.getByte()}};this.ccittFaxDecoder=new _ccitt.CCITTFaxDecoder(source,{K:params.get("K"),EndOfLine:params.get("EndOfLine"),EncodedByteAlign:params.get("EncodedByteAlign"),Columns:params.get("Columns"),Rows:params.get("Rows"),EndOfBlock:params.get("EndOfBlock"),BlackIs1:params.get("BlackIs1")})}readBlock(){for(;!this.eof;){const c=this.ccittFaxDecoder.readNextChar();if(c===-1){this.eof=!0;return}this.ensureBuffer(this.bufferLength+1),this.buffer[this.bufferLength++]=c}}};__name(_CCITTFaxStream,"CCITTFaxStream");let CCITTFaxStream=_CCITTFaxStream;exports3.CCITTFaxStream=CCITTFaxStream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.CCITTFaxDecoder=void 0;var _util2=__w_pdfjs_require__3(2);const ccittEOL=-2,ccittEOF=-1,twoDimPass=0,twoDimHoriz=1,twoDimVert0=2,twoDimVertR1=3,twoDimVertL1=4,twoDimVertR2=5,twoDimVertL2=6,twoDimVertR3=7,twoDimVertL3=8,twoDimTable=[[-1,-1],[-1,-1],[7,twoDimVertL3],[7,twoDimVertR3],[6,twoDimVertL2],[6,twoDimVertL2],[6,twoDimVertR2],[6,twoDimVertR2],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0]],whiteTable1=[[-1,-1],[12,ccittEOL],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],whiteTable2=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],blackTable1=[[-1,-1],[-1,-1],[12,ccittEOL],[12,ccittEOL],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],blackTable2=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],blackTable3=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]],_CCITTFaxDecoder=class{static{__name2(this,"_CCITTFaxDecoder")}constructor(source,options={}){if(!source||typeof source.next!="function")throw new Error('CCITTFaxDecoder - invalid "source" parameter.');this.source=source,this.eof=!1,this.encoding=options.K||0,this.eoline=options.EndOfLine||!1,this.byteAlign=options.EncodedByteAlign||!1,this.columns=options.Columns||1728,this.rows=options.Rows||0;let eoblock=options.EndOfBlock;eoblock==null&&(eoblock=!0),this.eoblock=eoblock,this.black=options.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;let code1;for(;(code1=this._lookBits(12))===0;)this._eatBits(1);code1===1&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}readNextChar(){if(this.eof)return-1;const refLine=this.refLine,codingLine=this.codingLine,columns=this.columns;let refPos,blackPixels,bits,i;if(this.outputBits===0){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;this.err=!1;let code1,code2,code3;if(this.nextLine2D){for(i=0;codingLine[i]<columns;++i)refLine[i]=codingLine[i];for(refLine[i++]=columns,refLine[i]=columns,codingLine[0]=0,this.codingPos=0,refPos=0,blackPixels=0;codingLine[this.codingPos]<columns;)switch(code1=this._getTwoDimCode(),code1){case twoDimPass:this._addPixels(refLine[refPos+1],blackPixels),refLine[refPos+1]<columns&&(refPos+=2);break;case twoDimHoriz:if(code1=code2=0,blackPixels){do code1+=code3=this._getBlackCode();while(code3>=64);do code2+=code3=this._getWhiteCode();while(code3>=64)}else{do code1+=code3=this._getWhiteCode();while(code3>=64);do code2+=code3=this._getBlackCode();while(code3>=64)}for(this._addPixels(codingLine[this.codingPos]+code1,blackPixels),codingLine[this.codingPos]<columns&&this._addPixels(codingLine[this.codingPos]+code2,blackPixels^1);refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case twoDimVertR3:if(this._addPixels(refLine[refPos]+3,blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case twoDimVertR2:if(this._addPixels(refLine[refPos]+2,blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case twoDimVertR1:if(this._addPixels(refLine[refPos]+1,blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case twoDimVert0:if(this._addPixels(refLine[refPos],blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case twoDimVertL3:if(this._addPixelsNeg(refLine[refPos]-3,blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(refPos>0?--refPos:++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case twoDimVertL2:if(this._addPixelsNeg(refLine[refPos]-2,blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(refPos>0?--refPos:++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case twoDimVertL1:if(this._addPixelsNeg(refLine[refPos]-1,blackPixels),blackPixels^=1,codingLine[this.codingPos]<columns)for(refPos>0?--refPos:++refPos;refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns;)refPos+=2;break;case ccittEOF:this._addPixels(columns,0),this.eof=!0;break;default:(0,_util2.info)("bad 2d code"),this._addPixels(columns,0),this.err=!0}}else for(codingLine[0]=0,this.codingPos=0,blackPixels=0;codingLine[this.codingPos]<columns;){if(code1=0,blackPixels)do code1+=code3=this._getBlackCode();while(code3>=64);else do code1+=code3=this._getWhiteCode();while(code3>=64);this._addPixels(codingLine[this.codingPos]+code1,blackPixels),blackPixels^=1}let gotEOL=!1;if(this.byteAlign&&(this.inputBits&=-8),!this.eoblock&&this.row===this.rows-1)this.rowsDone=!0;else{if(code1=this._lookBits(12),this.eoline)for(;code1!==ccittEOF&&code1!==1;)this._eatBits(1),code1=this._lookBits(12);else for(;code1===0;)this._eatBits(1),code1=this._lookBits(12);code1===1?(this._eatBits(12),gotEOL=!0):code1===ccittEOF&&(this.eof=!0)}if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&gotEOL&&this.byteAlign){if(code1=this._lookBits(12),code1===1){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(i=0;i<4;++i)code1=this._lookBits(12),code1!==1&&(0,_util2.info)("bad rtc code: "+code1),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if(code1=this._lookBits(13),code1===ccittEOF)return this.eof=!0,-1;if(code1>>1===1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(code1&1))}codingLine[0]>0?this.outputBits=codingLine[this.codingPos=0]:this.outputBits=codingLine[this.codingPos=1],this.row++}let c;if(this.outputBits>=8)c=this.codingPos&1?0:255,this.outputBits-=8,this.outputBits===0&&codingLine[this.codingPos]<columns&&(this.codingPos++,this.outputBits=codingLine[this.codingPos]-codingLine[this.codingPos-1]);else{bits=8,c=0;do{if(typeof this.outputBits!="number")throw new _util2.FormatError('Invalid /CCITTFaxDecode data, "outputBits" must be a number.');this.outputBits>bits?(c<<=bits,this.codingPos&1||(c|=255>>8-bits),this.outputBits-=bits,bits=0):(c<<=this.outputBits,this.codingPos&1||(c|=255>>8-this.outputBits),bits-=this.outputBits,this.outputBits=0,codingLine[this.codingPos]<columns?(this.codingPos++,this.outputBits=codingLine[this.codingPos]-codingLine[this.codingPos-1]):bits>0&&(c<<=bits,bits=0))}while(bits)}return this.black&&(c^=255),c}_addPixels(a1,blackPixels){const codingLine=this.codingLine;let codingPos=this.codingPos;a1>codingLine[codingPos]&&(a1>this.columns&&((0,_util2.info)("row is wrong length"),this.err=!0,a1=this.columns),codingPos&1^blackPixels&&++codingPos,codingLine[codingPos]=a1),this.codingPos=codingPos}_addPixelsNeg(a1,blackPixels){const codingLine=this.codingLine;let codingPos=this.codingPos;if(a1>codingLine[codingPos])a1>this.columns&&((0,_util2.info)("row is wrong length"),this.err=!0,a1=this.columns),codingPos&1^blackPixels&&++codingPos,codingLine[codingPos]=a1;else if(a1<codingLine[codingPos]){for(a1<0&&((0,_util2.info)("invalid code"),this.err=!0,a1=0);codingPos>0&&a1<codingLine[codingPos-1];)--codingPos;codingLine[codingPos]=a1}this.codingPos=codingPos}_findTableCode(start,end,table,limit){const limitValue=limit||0;for(let i=start;i<=end;++i){let code=this._lookBits(i);if(code===ccittEOF)return[!0,1,!1];if(i<end&&(code<<=end-i),!limitValue||code>=limitValue){const p=table[code-limitValue];if(p[0]===i)return this._eatBits(i),[!0,p[1],!0]}}return[!1,0,!1]}_getTwoDimCode(){let code=0,p;if(this.eoblock){if(code=this._lookBits(7),p=twoDimTable[code],p&&p[0]>0)return this._eatBits(p[0]),p[1]}else{const result=this._findTableCode(1,7,twoDimTable);if(result[0]&&result[2])return result[1]}return(0,_util2.info)("Bad two dim code"),ccittEOF}_getWhiteCode(){let code=0,p;if(this.eoblock){if(code=this._lookBits(12),code===ccittEOF)return 1;if(code>>5?p=whiteTable2[code>>3]:p=whiteTable1[code],p[0]>0)return this._eatBits(p[0]),p[1]}else{let result=this._findTableCode(1,9,whiteTable2);if(result[0]||(result=this._findTableCode(11,12,whiteTable1),result[0]))return result[1]}return(0,_util2.info)("bad white code"),this._eatBits(1),1}_getBlackCode(){let code,p;if(this.eoblock){if(code=this._lookBits(13),code===ccittEOF)return 1;if(code>>7?!(code>>9)&&code>>7?p=blackTable2[(code>>1)-64]:p=blackTable3[code>>7]:p=blackTable1[code],p[0]>0)return this._eatBits(p[0]),p[1]}else{let result=this._findTableCode(2,6,blackTable3);if(result[0]||(result=this._findTableCode(7,12,blackTable2,64),result[0])||(result=this._findTableCode(10,13,blackTable1),result[0]))return result[1]}return(0,_util2.info)("bad black code"),this._eatBits(1),1}_lookBits(n){let c;for(;this.inputBits<n;){if((c=this.source.next())===-1)return this.inputBits===0?ccittEOF:this.inputBuf<<n-this.inputBits&65535>>16-n;this.inputBuf=this.inputBuf<<8|c,this.inputBits+=8}return this.inputBuf>>this.inputBits-n&65535>>16-n}_eatBits(n){(this.inputBits-=n)<0&&(this.inputBits=0)}};__name(_CCITTFaxDecoder,"CCITTFaxDecoder");let CCITTFaxDecoder=_CCITTFaxDecoder;exports3.CCITTFaxDecoder=CCITTFaxDecoder},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.FlateStream=void 0;var _decode_stream=__w_pdfjs_require__3(19),_util2=__w_pdfjs_require__3(2);const codeLenCodeMap=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lengthDecode=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),distDecode=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),fixedLitCodeTab=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],fixedDistCodeTab=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],_FlateStream=class extends _decode_stream.DecodeStream{static{__name2(this,"_FlateStream")}constructor(str,maybeLength){super(maybeLength),this.str=str,this.dict=str.dict;const cmf=str.getByte(),flg=str.getByte();if(cmf===-1||flg===-1)throw new _util2.FormatError(`Invalid header in flate stream: ${cmf}, ${flg}`);if((cmf&15)!==8)throw new _util2.FormatError(`Unknown compression method in flate stream: ${cmf}, ${flg}`);if(((cmf<<8)+flg)%31!==0)throw new _util2.FormatError(`Bad FCHECK in flate stream: ${cmf}, ${flg}`);if(flg&32)throw new _util2.FormatError(`FDICT bit set in flate stream: ${cmf}, ${flg}`);this.codeSize=0,this.codeBuf=0}getBits(bits){const str=this.str;let codeSize=this.codeSize,codeBuf=this.codeBuf,b;for(;codeSize<bits;){if((b=str.getByte())===-1)throw new _util2.FormatError("Bad encoding in flate stream");codeBuf|=b<<codeSize,codeSize+=8}return b=codeBuf&(1<<bits)-1,this.codeBuf=codeBuf>>bits,this.codeSize=codeSize-=bits,b}getCode(table){const str=this.str,codes=table[0],maxLen=table[1];let codeSize=this.codeSize,codeBuf=this.codeBuf,b;for(;codeSize<maxLen&&(b=str.getByte())!==-1;)codeBuf|=b<<codeSize,codeSize+=8;const code=codes[codeBuf&(1<<maxLen)-1],codeLen=code>>16,codeVal=code&65535;if(codeLen<1||codeSize<codeLen)throw new _util2.FormatError("Bad encoding in flate stream");return this.codeBuf=codeBuf>>codeLen,this.codeSize=codeSize-codeLen,codeVal}generateHuffmanTable(lengths){const n=lengths.length;let maxLen=0,i;for(i=0;i<n;++i)lengths[i]>maxLen&&(maxLen=lengths[i]);const size=1<<maxLen,codes=new Int32Array(size);for(let len=1,code=0,skip=2;len<=maxLen;++len,code<<=1,skip<<=1)for(let val=0;val<n;++val)if(lengths[val]===len){let code2=0,t=code;for(i=0;i<len;++i)code2=code2<<1|t&1,t>>=1;for(i=code2;i<size;i+=skip)codes[i]=len<<16|val;++code}return[codes,maxLen]}readBlock(){let buffer,len;const str=this.str;let hdr=this.getBits(3);if(hdr&1&&(this.eof=!0),hdr>>=1,hdr===0){let b;if((b=str.getByte())===-1)throw new _util2.FormatError("Bad block header in flate stream");let blockLen=b;if((b=str.getByte())===-1)throw new _util2.FormatError("Bad block header in flate stream");if(blockLen|=b<<8,(b=str.getByte())===-1)throw new _util2.FormatError("Bad block header in flate stream");let check=b;if((b=str.getByte())===-1)throw new _util2.FormatError("Bad block header in flate stream");if(check|=b<<8,check!==(~blockLen&65535)&&(blockLen!==0||check!==0))throw new _util2.FormatError("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;const bufferLength=this.bufferLength,end=bufferLength+blockLen;if(buffer=this.ensureBuffer(end),this.bufferLength=end,blockLen===0)str.peekByte()===-1&&(this.eof=!0);else{const block=str.getBytes(blockLen);buffer.set(block,bufferLength),block.length<blockLen&&(this.eof=!0)}return}let litCodeTable,distCodeTable;if(hdr===1)litCodeTable=fixedLitCodeTab,distCodeTable=fixedDistCodeTab;else if(hdr===2){const numLitCodes=this.getBits(5)+257,numDistCodes=this.getBits(5)+1,numCodeLenCodes=this.getBits(4)+4,codeLenCodeLengths=new Uint8Array(codeLenCodeMap.length);let i;for(i=0;i<numCodeLenCodes;++i)codeLenCodeLengths[codeLenCodeMap[i]]=this.getBits(3);const codeLenCodeTab=this.generateHuffmanTable(codeLenCodeLengths);len=0,i=0;const codes=numLitCodes+numDistCodes,codeLengths=new Uint8Array(codes);let bitsLength,bitsOffset,what;for(;i<codes;){const code=this.getCode(codeLenCodeTab);if(code===16)bitsLength=2,bitsOffset=3,what=len;else if(code===17)bitsLength=3,bitsOffset=3,what=len=0;else if(code===18)bitsLength=7,bitsOffset=11,what=len=0;else{codeLengths[i++]=len=code;continue}let repeatLength=this.getBits(bitsLength)+bitsOffset;for(;repeatLength-- >0;)codeLengths[i++]=what}litCodeTable=this.generateHuffmanTable(codeLengths.subarray(0,numLitCodes)),distCodeTable=this.generateHuffmanTable(codeLengths.subarray(numLitCodes,codes))}else throw new _util2.FormatError("Unknown block type in flate stream");buffer=this.buffer;let limit=buffer?buffer.length:0,pos=this.bufferLength;for(;;){let code1=this.getCode(litCodeTable);if(code1<256){pos+1>=limit&&(buffer=this.ensureBuffer(pos+1),limit=buffer.length),buffer[pos++]=code1;continue}if(code1===256){this.bufferLength=pos;return}code1-=257,code1=lengthDecode[code1];let code2=code1>>16;code2>0&&(code2=this.getBits(code2)),len=(code1&65535)+code2,code1=this.getCode(distCodeTable),code1=distDecode[code1],code2=code1>>16,code2>0&&(code2=this.getBits(code2));const dist=(code1&65535)+code2;pos+len>=limit&&(buffer=this.ensureBuffer(pos+len),limit=buffer.length);for(let k=0;k<len;++k,++pos)buffer[pos]=buffer[pos-dist]}}};__name(_FlateStream,"FlateStream");let FlateStream=_FlateStream;exports3.FlateStream=FlateStream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.Jbig2Stream=void 0;var _base_stream=__w_pdfjs_require__3(7),_decode_stream=__w_pdfjs_require__3(19),_primitives=__w_pdfjs_require__3(5),_jbig=__w_pdfjs_require__3(25),_util2=__w_pdfjs_require__3(2);const _Jbig2Stream=class extends _decode_stream.DecodeStream{static{__name2(this,"_Jbig2Stream")}constructor(stream,maybeLength,params){super(maybeLength),this.stream=stream,this.dict=stream.dict,this.maybeLength=maybeLength,this.params=params}get bytes(){return(0,_util2.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(requested){}readBlock(){if(this.eof)return;const jbig2Image=new _jbig.Jbig2Image,chunks=[];if(this.params instanceof _primitives.Dict){const globalsStream=this.params.get("JBIG2Globals");if(globalsStream instanceof _base_stream.BaseStream){const globals=globalsStream.getBytes();chunks.push({data:globals,start:0,end:globals.length})}}chunks.push({data:this.bytes,start:0,end:this.bytes.length});const data=jbig2Image.parseChunks(chunks),dataLength=data.length;for(let i=0;i<dataLength;i++)data[i]^=255;this.buffer=data,this.bufferLength=dataLength,this.eof=!0}};__name(_Jbig2Stream,"Jbig2Stream");let Jbig2Stream=_Jbig2Stream;exports3.Jbig2Stream=Jbig2Stream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.Jbig2Image=void 0;var _util2=__w_pdfjs_require__3(2),_core_utils=__w_pdfjs_require__3(6),_arithmetic_decoder=__w_pdfjs_require__3(26),_ccitt=__w_pdfjs_require__3(22);const _Jbig2Error=class extends _util2.BaseException{static{__name2(this,"_Jbig2Error")}constructor(msg){super(`JBIG2 error: ${msg}`,"Jbig2Error")}};__name(_Jbig2Error,"Jbig2Error");let Jbig2Error=_Jbig2Error;const _ContextCache=class{static{__name2(this,"_ContextCache")}getContexts(id){return id in this?this[id]:this[id]=new Int8Array(65536)}};__name(_ContextCache,"ContextCache");let ContextCache=_ContextCache;const _DecodingContext=class{static{__name2(this,"_DecodingContext")}constructor(data,start,end){this.data=data,this.start=start,this.end=end}get decoder(){const decoder=new _arithmetic_decoder.ArithmeticDecoder(this.data,this.start,this.end);return(0,_util2.shadow)(this,"decoder",decoder)}get contextCache(){const cache=new ContextCache;return(0,_util2.shadow)(this,"contextCache",cache)}};__name(_DecodingContext,"DecodingContext");let DecodingContext=_DecodingContext;function decodeInteger(contextCache,procedure,decoder){const contexts=contextCache.getContexts(procedure);let prev=1;function readBits(length){let v=0;for(let i=0;i<length;i++){const bit=decoder.readBit(contexts,prev);prev=prev<256?prev<<1|bit:(prev<<1|bit)&511|256,v=v<<1|bit}return v>>>0}__name2(readBits,"readBits"),__name(readBits,"readBits");const sign=readBits(1),value=readBits(1)?readBits(1)?readBits(1)?readBits(1)?readBits(1)?readBits(32)+4436:readBits(12)+340:readBits(8)+84:readBits(6)+20:readBits(4)+4:readBits(2);return sign===0?value:value>0?-value:null}__name2(decodeInteger,"decodeInteger"),__name(decodeInteger,"decodeInteger");function decodeIAID(contextCache,decoder,codeLength){const contexts=contextCache.getContexts("IAID");let prev=1;for(let i=0;i<codeLength;i++){const bit=decoder.readBit(contexts,prev);prev=prev<<1|bit}return codeLength<31?prev&(1<<codeLength)-1:prev&2147483647}__name2(decodeIAID,"decodeIAID"),__name(decodeIAID,"decodeIAID");const SegmentTypes=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],CodingTemplates=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],RefinementTemplates=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],ReusedContexts=[39717,1941,229,405],RefinementReusedContexts=[32,8];function decodeBitmapTemplate0(width,height,decodingContext){const decoder=decodingContext.decoder,contexts=decodingContext.contextCache.getContexts("GB"),bitmap=[];let contextLabel,i,j,pixel,row,row1,row2;const OLD_PIXEL_MASK=31735;for(i=0;i<height;i++)for(row=bitmap[i]=new Uint8Array(width),row1=i<1?row:bitmap[i-1],row2=i<2?row:bitmap[i-2],contextLabel=row2[0]<<13|row2[1]<<12|row2[2]<<11|row1[0]<<7|row1[1]<<6|row1[2]<<5|row1[3]<<4,j=0;j<width;j++)row[j]=pixel=decoder.readBit(contexts,contextLabel),contextLabel=(contextLabel&OLD_PIXEL_MASK)<<1|(j+3<width?row2[j+3]<<11:0)|(j+4<width?row1[j+4]<<4:0)|pixel;return bitmap}__name2(decodeBitmapTemplate0,"decodeBitmapTemplate0"),__name(decodeBitmapTemplate0,"decodeBitmapTemplate0");function decodeBitmap(mmr,width,height,templateIndex,prediction,skip,at,decodingContext){if(mmr){const input=new Reader(decodingContext.data,decodingContext.start,decodingContext.end);return decodeMMRBitmap(input,width,height,!1)}if(templateIndex===0&&!skip&&!prediction&&at.length===4&&at[0].x===3&&at[0].y===-1&&at[1].x===-3&&at[1].y===-1&&at[2].x===2&&at[2].y===-2&&at[3].x===-2&&at[3].y===-2)return decodeBitmapTemplate0(width,height,decodingContext);const useskip=!!skip,template=CodingTemplates[templateIndex].concat(at);template.sort(function(a,b){return a.y-b.y||a.x-b.x});const templateLength=template.length,templateX=new Int8Array(templateLength),templateY=new Int8Array(templateLength),changingTemplateEntries=[];let reuseMask=0,minX=0,maxX=0,minY=0,c,k;for(k=0;k<templateLength;k++)templateX[k]=template[k].x,templateY[k]=template[k].y,minX=Math.min(minX,template[k].x),maxX=Math.max(maxX,template[k].x),minY=Math.min(minY,template[k].y),k<templateLength-1&&template[k].y===template[k+1].y&&template[k].x===template[k+1].x-1?reuseMask|=1<<templateLength-1-k:changingTemplateEntries.push(k);const changingEntriesLength=changingTemplateEntries.length,changingTemplateX=new Int8Array(changingEntriesLength),changingTemplateY=new Int8Array(changingEntriesLength),changingTemplateBit=new Uint16Array(changingEntriesLength);for(c=0;c<changingEntriesLength;c++)k=changingTemplateEntries[c],changingTemplateX[c]=template[k].x,changingTemplateY[c]=template[k].y,changingTemplateBit[c]=1<<templateLength-1-k;const sbb_left=-minX,sbb_top=-minY,sbb_right=width-maxX,pseudoPixelContext=ReusedContexts[templateIndex];let row=new Uint8Array(width);const bitmap=[],decoder=decodingContext.decoder,contexts=decodingContext.contextCache.getContexts("GB");let ltp=0,j,i0,j0,contextLabel=0,bit,shift;for(let i=0;i<height;i++){if(prediction){const sltp=decoder.readBit(contexts,pseudoPixelContext);if(ltp^=sltp,ltp){bitmap.push(row);continue}}for(row=new Uint8Array(row),bitmap.push(row),j=0;j<width;j++){if(useskip&&skip[i][j]){row[j]=0;continue}if(j>=sbb_left&&j<sbb_right&&i>=sbb_top)for(contextLabel=contextLabel<<1&reuseMask,k=0;k<changingEntriesLength;k++)i0=i+changingTemplateY[k],j0=j+changingTemplateX[k],bit=bitmap[i0][j0],bit&&(bit=changingTemplateBit[k],contextLabel|=bit);else for(contextLabel=0,shift=templateLength-1,k=0;k<templateLength;k++,shift--)j0=j+templateX[k],j0>=0&&j0<width&&(i0=i+templateY[k],i0>=0&&(bit=bitmap[i0][j0],bit&&(contextLabel|=bit<<shift)));const pixel=decoder.readBit(contexts,contextLabel);row[j]=pixel}}return bitmap}__name2(decodeBitmap,"decodeBitmap"),__name(decodeBitmap,"decodeBitmap");function decodeRefinement(width,height,templateIndex,referenceBitmap,offsetX,offsetY,prediction,at,decodingContext){let codingTemplate=RefinementTemplates[templateIndex].coding;templateIndex===0&&(codingTemplate=codingTemplate.concat([at[0]]));const codingTemplateLength=codingTemplate.length,codingTemplateX=new Int32Array(codingTemplateLength),codingTemplateY=new Int32Array(codingTemplateLength);let k;for(k=0;k<codingTemplateLength;k++)codingTemplateX[k]=codingTemplate[k].x,codingTemplateY[k]=codingTemplate[k].y;let referenceTemplate=RefinementTemplates[templateIndex].reference;templateIndex===0&&(referenceTemplate=referenceTemplate.concat([at[1]]));const referenceTemplateLength=referenceTemplate.length,referenceTemplateX=new Int32Array(referenceTemplateLength),referenceTemplateY=new Int32Array(referenceTemplateLength);for(k=0;k<referenceTemplateLength;k++)referenceTemplateX[k]=referenceTemplate[k].x,referenceTemplateY[k]=referenceTemplate[k].y;const referenceWidth=referenceBitmap[0].length,referenceHeight=referenceBitmap.length,pseudoPixelContext=RefinementReusedContexts[templateIndex],bitmap=[],decoder=decodingContext.decoder,contexts=decodingContext.contextCache.getContexts("GR");let ltp=0;for(let i=0;i<height;i++){if(prediction){const sltp=decoder.readBit(contexts,pseudoPixelContext);if(ltp^=sltp,ltp)throw new Jbig2Error("prediction is not supported")}const row=new Uint8Array(width);bitmap.push(row);for(let j=0;j<width;j++){let i0,j0,contextLabel=0;for(k=0;k<codingTemplateLength;k++)i0=i+codingTemplateY[k],j0=j+codingTemplateX[k],i0<0||j0<0||j0>=width?contextLabel<<=1:contextLabel=contextLabel<<1|bitmap[i0][j0];for(k=0;k<referenceTemplateLength;k++)i0=i+referenceTemplateY[k]-offsetY,j0=j+referenceTemplateX[k]-offsetX,i0<0||i0>=referenceHeight||j0<0||j0>=referenceWidth?contextLabel<<=1:contextLabel=contextLabel<<1|referenceBitmap[i0][j0];const pixel=decoder.readBit(contexts,contextLabel);row[j]=pixel}}return bitmap}__name2(decodeRefinement,"decodeRefinement"),__name(decodeRefinement,"decodeRefinement");function decodeSymbolDictionary(huffman,refinement,symbols,numberOfNewSymbols,numberOfExportedSymbols,huffmanTables,templateIndex,at,refinementTemplateIndex,refinementAt,decodingContext,huffmanInput){if(huffman&&refinement)throw new Jbig2Error("symbol refinement with Huffman is not supported");const newSymbols=[];let currentHeight=0,symbolCodeLength=(0,_core_utils.log2)(symbols.length+numberOfNewSymbols);const decoder=decodingContext.decoder,contextCache=decodingContext.contextCache;let tableB1,symbolWidths;for(huffman&&(tableB1=getStandardTable(1),symbolWidths=[],symbolCodeLength=Math.max(symbolCodeLength,1));newSymbols.length<numberOfNewSymbols;){const deltaHeight=huffman?huffmanTables.tableDeltaHeight.decode(huffmanInput):decodeInteger(contextCache,"IADH",decoder);currentHeight+=deltaHeight;let currentWidth=0,totalWidth=0;const firstSymbol=huffman?symbolWidths.length:0;for(;;){const deltaWidth=huffman?huffmanTables.tableDeltaWidth.decode(huffmanInput):decodeInteger(contextCache,"IADW",decoder);if(deltaWidth===null)break;currentWidth+=deltaWidth,totalWidth+=currentWidth;let bitmap;if(refinement){const numberOfInstances=decodeInteger(contextCache,"IAAI",decoder);if(numberOfInstances>1)bitmap=decodeTextRegion(huffman,refinement,currentWidth,currentHeight,0,numberOfInstances,1,symbols.concat(newSymbols),symbolCodeLength,0,0,1,0,huffmanTables,refinementTemplateIndex,refinementAt,decodingContext,0,huffmanInput);else{const symbolId=decodeIAID(contextCache,decoder,symbolCodeLength),rdx=decodeInteger(contextCache,"IARDX",decoder),rdy=decodeInteger(contextCache,"IARDY",decoder),symbol=symbolId<symbols.length?symbols[symbolId]:newSymbols[symbolId-symbols.length];bitmap=decodeRefinement(currentWidth,currentHeight,refinementTemplateIndex,symbol,rdx,rdy,!1,refinementAt,decodingContext)}newSymbols.push(bitmap)}else huffman?symbolWidths.push(currentWidth):(bitmap=decodeBitmap(!1,currentWidth,currentHeight,templateIndex,!1,null,at,decodingContext),newSymbols.push(bitmap))}if(huffman&&!refinement){const bitmapSize=huffmanTables.tableBitmapSize.decode(huffmanInput);huffmanInput.byteAlign();let collectiveBitmap;if(bitmapSize===0)collectiveBitmap=readUncompressedBitmap(huffmanInput,totalWidth,currentHeight);else{const originalEnd=huffmanInput.end,bitmapEnd=huffmanInput.position+bitmapSize;huffmanInput.end=bitmapEnd,collectiveBitmap=decodeMMRBitmap(huffmanInput,totalWidth,currentHeight,!1),huffmanInput.end=originalEnd,huffmanInput.position=bitmapEnd}const numberOfSymbolsDecoded=symbolWidths.length;if(firstSymbol===numberOfSymbolsDecoded-1)newSymbols.push(collectiveBitmap);else{let i2,y,xMin=0,xMax,bitmapWidth,symbolBitmap;for(i2=firstSymbol;i2<numberOfSymbolsDecoded;i2++){for(bitmapWidth=symbolWidths[i2],xMax=xMin+bitmapWidth,symbolBitmap=[],y=0;y<currentHeight;y++)symbolBitmap.push(collectiveBitmap[y].subarray(xMin,xMax));newSymbols.push(symbolBitmap),xMin=xMax}}}}const exportedSymbols=[],flags=[];let currentFlag=!1,i,ii;const totalSymbolsLength=symbols.length+numberOfNewSymbols;for(;flags.length<totalSymbolsLength;){let runLength=huffman?tableB1.decode(huffmanInput):decodeInteger(contextCache,"IAEX",decoder);for(;runLength--;)flags.push(currentFlag);currentFlag=!currentFlag}for(i=0,ii=symbols.length;i<ii;i++)flags[i]&&exportedSymbols.push(symbols[i]);for(let j=0;j<numberOfNewSymbols;i++,j++)flags[i]&&exportedSymbols.push(newSymbols[j]);return exportedSymbols}__name2(decodeSymbolDictionary,"decodeSymbolDictionary"),__name(decodeSymbolDictionary,"decodeSymbolDictionary");function decodeTextRegion(huffman,refinement,width,height,defaultPixelValue,numberOfSymbolInstances,stripSize,inputSymbols,symbolCodeLength,transposed,dsOffset,referenceCorner,combinationOperator,huffmanTables,refinementTemplateIndex,refinementAt,decodingContext,logStripSize,huffmanInput){if(huffman&&refinement)throw new Jbig2Error("refinement with Huffman is not supported");const bitmap=[];let i,row;for(i=0;i<height;i++){if(row=new Uint8Array(width),defaultPixelValue)for(let j=0;j<width;j++)row[j]=defaultPixelValue;bitmap.push(row)}const decoder=decodingContext.decoder,contextCache=decodingContext.contextCache;let stripT=huffman?-huffmanTables.tableDeltaT.decode(huffmanInput):-decodeInteger(contextCache,"IADT",decoder),firstS=0;for(i=0;i<numberOfSymbolInstances;){const deltaT=huffman?huffmanTables.tableDeltaT.decode(huffmanInput):decodeInteger(contextCache,"IADT",decoder);stripT+=deltaT;const deltaFirstS=huffman?huffmanTables.tableFirstS.decode(huffmanInput):decodeInteger(contextCache,"IAFS",decoder);firstS+=deltaFirstS;let currentS=firstS;do{let currentT=0;stripSize>1&&(currentT=huffman?huffmanInput.readBits(logStripSize):decodeInteger(contextCache,"IAIT",decoder));const t=stripSize*stripT+currentT,symbolId=huffman?huffmanTables.symbolIDTable.decode(huffmanInput):decodeIAID(contextCache,decoder,symbolCodeLength),applyRefinement=refinement&&(huffman?huffmanInput.readBit():decodeInteger(contextCache,"IARI",decoder));let symbolBitmap=inputSymbols[symbolId],symbolWidth=symbolBitmap[0].length,symbolHeight=symbolBitmap.length;if(applyRefinement){const rdw=decodeInteger(contextCache,"IARDW",decoder),rdh=decodeInteger(contextCache,"IARDH",decoder),rdx=decodeInteger(contextCache,"IARDX",decoder),rdy=decodeInteger(contextCache,"IARDY",decoder);symbolWidth+=rdw,symbolHeight+=rdh,symbolBitmap=decodeRefinement(symbolWidth,symbolHeight,refinementTemplateIndex,symbolBitmap,(rdw>>1)+rdx,(rdh>>1)+rdy,!1,refinementAt,decodingContext)}const offsetT=t-(referenceCorner&1?0:symbolHeight-1),offsetS=currentS-(referenceCorner&2?symbolWidth-1:0);let s2,t2,symbolRow;if(transposed){for(s2=0;s2<symbolHeight;s2++){if(row=bitmap[offsetS+s2],!row)continue;symbolRow=symbolBitmap[s2];const maxWidth=Math.min(width-offsetT,symbolWidth);switch(combinationOperator){case 0:for(t2=0;t2<maxWidth;t2++)row[offsetT+t2]|=symbolRow[t2];break;case 2:for(t2=0;t2<maxWidth;t2++)row[offsetT+t2]^=symbolRow[t2];break;default:throw new Jbig2Error(`operator ${combinationOperator} is not supported`)}}currentS+=symbolHeight-1}else{for(t2=0;t2<symbolHeight;t2++)if(row=bitmap[offsetT+t2],!!row)switch(symbolRow=symbolBitmap[t2],combinationOperator){case 0:for(s2=0;s2<symbolWidth;s2++)row[offsetS+s2]|=symbolRow[s2];break;case 2:for(s2=0;s2<symbolWidth;s2++)row[offsetS+s2]^=symbolRow[s2];break;default:throw new Jbig2Error(`operator ${combinationOperator} is not supported`)}currentS+=symbolWidth-1}i++;const deltaS=huffman?huffmanTables.tableDeltaS.decode(huffmanInput):decodeInteger(contextCache,"IADS",decoder);if(deltaS===null)break;currentS+=deltaS+dsOffset}while(!0)}return bitmap}__name2(decodeTextRegion,"decodeTextRegion"),__name(decodeTextRegion,"decodeTextRegion");function decodePatternDictionary(mmr,patternWidth,patternHeight,maxPatternIndex,template,decodingContext){const at=[];mmr||(at.push({x:-patternWidth,y:0}),template===0&&at.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const collectiveWidth=(maxPatternIndex+1)*patternWidth,collectiveBitmap=decodeBitmap(mmr,collectiveWidth,patternHeight,template,!1,null,at,decodingContext),patterns=[];for(let i=0;i<=maxPatternIndex;i++){const patternBitmap=[],xMin=patternWidth*i,xMax=xMin+patternWidth;for(let y=0;y<patternHeight;y++)patternBitmap.push(collectiveBitmap[y].subarray(xMin,xMax));patterns.push(patternBitmap)}return patterns}__name2(decodePatternDictionary,"decodePatternDictionary"),__name(decodePatternDictionary,"decodePatternDictionary");function decodeHalftoneRegion(mmr,patterns,template,regionWidth,regionHeight,defaultPixelValue,enableSkip,combinationOperator,gridWidth,gridHeight,gridOffsetX,gridOffsetY,gridVectorX,gridVectorY,decodingContext){if(enableSkip)throw new Jbig2Error("skip is not supported");if(combinationOperator!==0)throw new Jbig2Error(`operator "${combinationOperator}" is not supported in halftone region`);const regionBitmap=[];let i,j,row;for(i=0;i<regionHeight;i++){if(row=new Uint8Array(regionWidth),defaultPixelValue)for(j=0;j<regionWidth;j++)row[j]=defaultPixelValue;regionBitmap.push(row)}const numberOfPatterns=patterns.length,pattern0=patterns[0],patternWidth=pattern0[0].length,patternHeight=pattern0.length,bitsPerValue=(0,_core_utils.log2)(numberOfPatterns),at=[];mmr||(at.push({x:template<=1?3:2,y:-1}),template===0&&at.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const grayScaleBitPlanes=[];let mmrInput,bitmap;for(mmr&&(mmrInput=new Reader(decodingContext.data,decodingContext.start,decodingContext.end)),i=bitsPerValue-1;i>=0;i--)mmr?bitmap=decodeMMRBitmap(mmrInput,gridWidth,gridHeight,!0):bitmap=decodeBitmap(!1,gridWidth,gridHeight,template,!1,null,at,decodingContext),grayScaleBitPlanes[i]=bitmap;let mg,ng,bit,patternIndex,patternBitmap,x,y,patternRow,regionRow;for(mg=0;mg<gridHeight;mg++)for(ng=0;ng<gridWidth;ng++){for(bit=0,patternIndex=0,j=bitsPerValue-1;j>=0;j--)bit^=grayScaleBitPlanes[j][mg][ng],patternIndex|=bit<<j;if(patternBitmap=patterns[patternIndex],x=gridOffsetX+mg*gridVectorY+ng*gridVectorX>>8,y=gridOffsetY+mg*gridVectorX-ng*gridVectorY>>8,x>=0&&x+patternWidth<=regionWidth&&y>=0&&y+patternHeight<=regionHeight)for(i=0;i<patternHeight;i++)for(regionRow=regionBitmap[y+i],patternRow=patternBitmap[i],j=0;j<patternWidth;j++)regionRow[x+j]|=patternRow[j];else{let regionX,regionY;for(i=0;i<patternHeight;i++)if(regionY=y+i,!(regionY<0||regionY>=regionHeight))for(regionRow=regionBitmap[regionY],patternRow=patternBitmap[i],j=0;j<patternWidth;j++)regionX=x+j,regionX>=0&&regionX<regionWidth&&(regionRow[regionX]|=patternRow[j])}}return regionBitmap}__name2(decodeHalftoneRegion,"decodeHalftoneRegion"),__name(decodeHalftoneRegion,"decodeHalftoneRegion");function readSegmentHeader(data,start){const segmentHeader={};segmentHeader.number=(0,_core_utils.readUint32)(data,start);const flags=data[start+4],segmentType=flags&63;if(!SegmentTypes[segmentType])throw new Jbig2Error("invalid segment type: "+segmentType);segmentHeader.type=segmentType,segmentHeader.typeName=SegmentTypes[segmentType],segmentHeader.deferredNonRetain=!!(flags&128);const pageAssociationFieldSize=!!(flags&64),referredFlags=data[start+5];let referredToCount=referredFlags>>5&7;const retainBits=[referredFlags&31];let position=start+6;if(referredFlags===7){referredToCount=(0,_core_utils.readUint32)(data,position-1)&536870911,position+=3;let bytes=referredToCount+7>>3;for(retainBits[0]=data[position++];--bytes>0;)retainBits.push(data[position++])}else if(referredFlags===5||referredFlags===6)throw new Jbig2Error("invalid referred-to flags");segmentHeader.retainBits=retainBits;let referredToSegmentNumberSize=4;segmentHeader.number<=256?referredToSegmentNumberSize=1:segmentHeader.number<=65536&&(referredToSegmentNumberSize=2);const referredTo=[];let i,ii;for(i=0;i<referredToCount;i++){let number;referredToSegmentNumberSize===1?number=data[position]:referredToSegmentNumberSize===2?number=(0,_core_utils.readUint16)(data,position):number=(0,_core_utils.readUint32)(data,position),referredTo.push(number),position+=referredToSegmentNumberSize}if(segmentHeader.referredTo=referredTo,pageAssociationFieldSize?(segmentHeader.pageAssociation=(0,_core_utils.readUint32)(data,position),position+=4):segmentHeader.pageAssociation=data[position++],segmentHeader.length=(0,_core_utils.readUint32)(data,position),position+=4,segmentHeader.length===4294967295)if(segmentType===38){const genericRegionInfo=readRegionSegmentInformation(data,position),genericRegionMmr=!!(data[position+RegionSegmentInformationFieldLength]&1),searchPatternLength=6,searchPattern=new Uint8Array(searchPatternLength);for(genericRegionMmr||(searchPattern[0]=255,searchPattern[1]=172),searchPattern[2]=genericRegionInfo.height>>>24&255,searchPattern[3]=genericRegionInfo.height>>16&255,searchPattern[4]=genericRegionInfo.height>>8&255,searchPattern[5]=genericRegionInfo.height&255,i=position,ii=data.length;i<ii;i++){let j=0;for(;j<searchPatternLength&&searchPattern[j]===data[i+j];)j++;if(j===searchPatternLength){segmentHeader.length=i+searchPatternLength;break}}if(segmentHeader.length===4294967295)throw new Jbig2Error("segment end was not found")}else throw new Jbig2Error("invalid unknown segment length");return segmentHeader.headerEnd=position,segmentHeader}__name2(readSegmentHeader,"readSegmentHeader"),__name(readSegmentHeader,"readSegmentHeader");function readSegments(header,data,start,end){const segments=[];let position=start;for(;position<end;){const segmentHeader=readSegmentHeader(data,position);position=segmentHeader.headerEnd;const segment={header:segmentHeader,data};if(header.randomAccess||(segment.start=position,position+=segmentHeader.length,segment.end=position),segments.push(segment),segmentHeader.type===51)break}if(header.randomAccess)for(let i=0,ii=segments.length;i<ii;i++)segments[i].start=position,position+=segments[i].header.length,segments[i].end=position;return segments}__name2(readSegments,"readSegments"),__name(readSegments,"readSegments");function readRegionSegmentInformation(data,start){return{width:(0,_core_utils.readUint32)(data,start),height:(0,_core_utils.readUint32)(data,start+4),x:(0,_core_utils.readUint32)(data,start+8),y:(0,_core_utils.readUint32)(data,start+12),combinationOperator:data[start+16]&7}}__name2(readRegionSegmentInformation,"readRegionSegmentInformation"),__name(readRegionSegmentInformation,"readRegionSegmentInformation");const RegionSegmentInformationFieldLength=17;function processSegment(segment,visitor){const header=segment.header,data=segment.data,end=segment.end;let position=segment.start,args,at,i,atLength;switch(header.type){case 0:const dictionary={},dictionaryFlags=(0,_core_utils.readUint16)(data,position);if(dictionary.huffman=!!(dictionaryFlags&1),dictionary.refinement=!!(dictionaryFlags&2),dictionary.huffmanDHSelector=dictionaryFlags>>2&3,dictionary.huffmanDWSelector=dictionaryFlags>>4&3,dictionary.bitmapSizeSelector=dictionaryFlags>>6&1,dictionary.aggregationInstancesSelector=dictionaryFlags>>7&1,dictionary.bitmapCodingContextUsed=!!(dictionaryFlags&256),dictionary.bitmapCodingContextRetained=!!(dictionaryFlags&512),dictionary.template=dictionaryFlags>>10&3,dictionary.refinementTemplate=dictionaryFlags>>12&1,position+=2,!dictionary.huffman){for(atLength=dictionary.template===0?4:1,at=[],i=0;i<atLength;i++)at.push({x:(0,_core_utils.readInt8)(data,position),y:(0,_core_utils.readInt8)(data,position+1)}),position+=2;dictionary.at=at}if(dictionary.refinement&&!dictionary.refinementTemplate){for(at=[],i=0;i<2;i++)at.push({x:(0,_core_utils.readInt8)(data,position),y:(0,_core_utils.readInt8)(data,position+1)}),position+=2;dictionary.refinementAt=at}dictionary.numberOfExportedSymbols=(0,_core_utils.readUint32)(data,position),position+=4,dictionary.numberOfNewSymbols=(0,_core_utils.readUint32)(data,position),position+=4,args=[dictionary,header.number,header.referredTo,data,position,end];break;case 6:case 7:const textRegion={};textRegion.info=readRegionSegmentInformation(data,position),position+=RegionSegmentInformationFieldLength;const textRegionSegmentFlags=(0,_core_utils.readUint16)(data,position);if(position+=2,textRegion.huffman=!!(textRegionSegmentFlags&1),textRegion.refinement=!!(textRegionSegmentFlags&2),textRegion.logStripSize=textRegionSegmentFlags>>2&3,textRegion.stripSize=1<<textRegion.logStripSize,textRegion.referenceCorner=textRegionSegmentFlags>>4&3,textRegion.transposed=!!(textRegionSegmentFlags&64),textRegion.combinationOperator=textRegionSegmentFlags>>7&3,textRegion.defaultPixelValue=textRegionSegmentFlags>>9&1,textRegion.dsOffset=textRegionSegmentFlags<<17>>27,textRegion.refinementTemplate=textRegionSegmentFlags>>15&1,textRegion.huffman){const textRegionHuffmanFlags=(0,_core_utils.readUint16)(data,position);position+=2,textRegion.huffmanFS=textRegionHuffmanFlags&3,textRegion.huffmanDS=textRegionHuffmanFlags>>2&3,textRegion.huffmanDT=textRegionHuffmanFlags>>4&3,textRegion.huffmanRefinementDW=textRegionHuffmanFlags>>6&3,textRegion.huffmanRefinementDH=textRegionHuffmanFlags>>8&3,textRegion.huffmanRefinementDX=textRegionHuffmanFlags>>10&3,textRegion.huffmanRefinementDY=textRegionHuffmanFlags>>12&3,textRegion.huffmanRefinementSizeSelector=!!(textRegionHuffmanFlags&16384)}if(textRegion.refinement&&!textRegion.refinementTemplate){for(at=[],i=0;i<2;i++)at.push({x:(0,_core_utils.readInt8)(data,position),y:(0,_core_utils.readInt8)(data,position+1)}),position+=2;textRegion.refinementAt=at}textRegion.numberOfSymbolInstances=(0,_core_utils.readUint32)(data,position),position+=4,args=[textRegion,header.referredTo,data,position,end];break;case 16:const patternDictionary={},patternDictionaryFlags=data[position++];patternDictionary.mmr=!!(patternDictionaryFlags&1),patternDictionary.template=patternDictionaryFlags>>1&3,patternDictionary.patternWidth=data[position++],patternDictionary.patternHeight=data[position++],patternDictionary.maxPatternIndex=(0,_core_utils.readUint32)(data,position),position+=4,args=[patternDictionary,header.number,data,position,end];break;case 22:case 23:const halftoneRegion={};halftoneRegion.info=readRegionSegmentInformation(data,position),position+=RegionSegmentInformationFieldLength;const halftoneRegionFlags=data[position++];halftoneRegion.mmr=!!(halftoneRegionFlags&1),halftoneRegion.template=halftoneRegionFlags>>1&3,halftoneRegion.enableSkip=!!(halftoneRegionFlags&8),halftoneRegion.combinationOperator=halftoneRegionFlags>>4&7,halftoneRegion.defaultPixelValue=halftoneRegionFlags>>7&1,halftoneRegion.gridWidth=(0,_core_utils.readUint32)(data,position),position+=4,halftoneRegion.gridHeight=(0,_core_utils.readUint32)(data,position),position+=4,halftoneRegion.gridOffsetX=(0,_core_utils.readUint32)(data,position)&4294967295,position+=4,halftoneRegion.gridOffsetY=(0,_core_utils.readUint32)(data,position)&4294967295,position+=4,halftoneRegion.gridVectorX=(0,_core_utils.readUint16)(data,position),position+=2,halftoneRegion.gridVectorY=(0,_core_utils.readUint16)(data,position),position+=2,args=[halftoneRegion,header.referredTo,data,position,end];break;case 38:case 39:const genericRegion={};genericRegion.info=readRegionSegmentInformation(data,position),position+=RegionSegmentInformationFieldLength;const genericRegionSegmentFlags=data[position++];if(genericRegion.mmr=!!(genericRegionSegmentFlags&1),genericRegion.template=genericRegionSegmentFlags>>1&3,genericRegion.prediction=!!(genericRegionSegmentFlags&8),!genericRegion.mmr){for(atLength=genericRegion.template===0?4:1,at=[],i=0;i<atLength;i++)at.push({x:(0,_core_utils.readInt8)(data,position),y:(0,_core_utils.readInt8)(data,position+1)}),position+=2;genericRegion.at=at}args=[genericRegion,data,position,end];break;case 48:const pageInfo={width:(0,_core_utils.readUint32)(data,position),height:(0,_core_utils.readUint32)(data,position+4),resolutionX:(0,_core_utils.readUint32)(data,position+8),resolutionY:(0,_core_utils.readUint32)(data,position+12)};pageInfo.height===4294967295&&delete pageInfo.height;const pageSegmentFlags=data[position+16];(0,_core_utils.readUint16)(data,position+17),pageInfo.lossless=!!(pageSegmentFlags&1),pageInfo.refinement=!!(pageSegmentFlags&2),pageInfo.defaultPixelValue=pageSegmentFlags>>2&1,pageInfo.combinationOperator=pageSegmentFlags>>3&3,pageInfo.requiresBuffer=!!(pageSegmentFlags&32),pageInfo.combinationOperatorOverride=!!(pageSegmentFlags&64),args=[pageInfo];break;case 49:break;case 50:break;case 51:break;case 53:args=[header.number,data,position,end];break;case 62:break;default:throw new Jbig2Error(`segment type ${header.typeName}(${header.type}) is not implemented`)}const callbackName="on"+header.typeName;callbackName in visitor&&visitor[callbackName].apply(visitor,args)}__name2(processSegment,"processSegment"),__name(processSegment,"processSegment");function processSegments(segments,visitor){for(let i=0,ii=segments.length;i<ii;i++)processSegment(segments[i],visitor)}__name2(processSegments,"processSegments"),__name(processSegments,"processSegments");function parseJbig2Chunks(chunks){const visitor=new SimpleSegmentVisitor;for(let i=0,ii=chunks.length;i<ii;i++){const chunk=chunks[i],segments=readSegments({},chunk.data,chunk.start,chunk.end);processSegments(segments,visitor)}return visitor.buffer}__name2(parseJbig2Chunks,"parseJbig2Chunks"),__name(parseJbig2Chunks,"parseJbig2Chunks");const _SimpleSegmentVisitor=class{static{__name2(this,"_SimpleSegmentVisitor")}onPageInformation(info){this.currentPageInfo=info;const rowSize=info.width+7>>3,buffer=new Uint8ClampedArray(rowSize*info.height);info.defaultPixelValue&&buffer.fill(255),this.buffer=buffer}drawBitmap(regionInfo,bitmap){const pageInfo=this.currentPageInfo,width=regionInfo.width,height=regionInfo.height,rowSize=pageInfo.width+7>>3,combinationOperator=pageInfo.combinationOperatorOverride?regionInfo.combinationOperator:pageInfo.combinationOperator,buffer=this.buffer,mask0=128>>(regionInfo.x&7);let offset0=regionInfo.y*rowSize+(regionInfo.x>>3),i,j,mask,offset;switch(combinationOperator){case 0:for(i=0;i<height;i++){for(mask=mask0,offset=offset0,j=0;j<width;j++)bitmap[i][j]&&(buffer[offset]|=mask),mask>>=1,mask||(mask=128,offset++);offset0+=rowSize}break;case 2:for(i=0;i<height;i++){for(mask=mask0,offset=offset0,j=0;j<width;j++)bitmap[i][j]&&(buffer[offset]^=mask),mask>>=1,mask||(mask=128,offset++);offset0+=rowSize}break;default:throw new Jbig2Error(`operator ${combinationOperator} is not supported`)}}onImmediateGenericRegion(region,data,start,end){const regionInfo=region.info,decodingContext=new DecodingContext(data,start,end),bitmap=decodeBitmap(region.mmr,regionInfo.width,regionInfo.height,region.template,region.prediction,null,region.at,decodingContext);this.drawBitmap(regionInfo,bitmap)}onImmediateLosslessGenericRegion(){this.onImmediateGenericRegion(...arguments)}onSymbolDictionary(dictionary,currentSegment,referredSegments,data,start,end){let huffmanTables,huffmanInput;dictionary.huffman&&(huffmanTables=getSymbolDictionaryHuffmanTables(dictionary,referredSegments,this.customTables),huffmanInput=new Reader(data,start,end));let symbols=this.symbols;symbols||(this.symbols=symbols={});const inputSymbols=[];for(const referredSegment of referredSegments){const referredSymbols=symbols[referredSegment];referredSymbols&&inputSymbols.push(...referredSymbols)}const decodingContext=new DecodingContext(data,start,end);symbols[currentSegment]=decodeSymbolDictionary(dictionary.huffman,dictionary.refinement,inputSymbols,dictionary.numberOfNewSymbols,dictionary.numberOfExportedSymbols,huffmanTables,dictionary.template,dictionary.at,dictionary.refinementTemplate,dictionary.refinementAt,decodingContext,huffmanInput)}onImmediateTextRegion(region,referredSegments,data,start,end){const regionInfo=region.info;let huffmanTables,huffmanInput;const symbols=this.symbols,inputSymbols=[];for(const referredSegment of referredSegments){const referredSymbols=symbols[referredSegment];referredSymbols&&inputSymbols.push(...referredSymbols)}const symbolCodeLength=(0,_core_utils.log2)(inputSymbols.length);region.huffman&&(huffmanInput=new Reader(data,start,end),huffmanTables=getTextRegionHuffmanTables(region,referredSegments,this.customTables,inputSymbols.length,huffmanInput));const decodingContext=new DecodingContext(data,start,end),bitmap=decodeTextRegion(region.huffman,region.refinement,regionInfo.width,regionInfo.height,region.defaultPixelValue,region.numberOfSymbolInstances,region.stripSize,inputSymbols,symbolCodeLength,region.transposed,region.dsOffset,region.referenceCorner,region.combinationOperator,huffmanTables,region.refinementTemplate,region.refinementAt,decodingContext,region.logStripSize,huffmanInput);this.drawBitmap(regionInfo,bitmap)}onImmediateLosslessTextRegion(){this.onImmediateTextRegion(...arguments)}onPatternDictionary(dictionary,currentSegment,data,start,end){let patterns=this.patterns;patterns||(this.patterns=patterns={});const decodingContext=new DecodingContext(data,start,end);patterns[currentSegment]=decodePatternDictionary(dictionary.mmr,dictionary.patternWidth,dictionary.patternHeight,dictionary.maxPatternIndex,dictionary.template,decodingContext)}onImmediateHalftoneRegion(region,referredSegments,data,start,end){const patterns=this.patterns[referredSegments[0]],regionInfo=region.info,decodingContext=new DecodingContext(data,start,end),bitmap=decodeHalftoneRegion(region.mmr,patterns,region.template,regionInfo.width,regionInfo.height,region.defaultPixelValue,region.enableSkip,region.combinationOperator,region.gridWidth,region.gridHeight,region.gridOffsetX,region.gridOffsetY,region.gridVectorX,region.gridVectorY,decodingContext);this.drawBitmap(regionInfo,bitmap)}onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion(...arguments)}onTables(currentSegment,data,start,end){let customTables=this.customTables;customTables||(this.customTables=customTables={}),customTables[currentSegment]=decodeTablesSegment(data,start,end)}};__name(_SimpleSegmentVisitor,"SimpleSegmentVisitor");let SimpleSegmentVisitor=_SimpleSegmentVisitor;const _HuffmanLine=class{static{__name2(this,"_HuffmanLine")}constructor(lineData){lineData.length===2?(this.isOOB=!0,this.rangeLow=0,this.prefixLength=lineData[0],this.rangeLength=0,this.prefixCode=lineData[1],this.isLowerRange=!1):(this.isOOB=!1,this.rangeLow=lineData[0],this.prefixLength=lineData[1],this.rangeLength=lineData[2],this.prefixCode=lineData[3],this.isLowerRange=lineData[4]==="lower")}};__name(_HuffmanLine,"HuffmanLine");let HuffmanLine=_HuffmanLine;const _HuffmanTreeNode=class _HuffmanTreeNode2{static{__name2(this,"_HuffmanTreeNode")}constructor(line){this.children=[],line?(this.isLeaf=!0,this.rangeLength=line.rangeLength,this.rangeLow=line.rangeLow,this.isLowerRange=line.isLowerRange,this.isOOB=line.isOOB):this.isLeaf=!1}buildTree(line,shift){const bit=line.prefixCode>>shift&1;if(shift<=0)this.children[bit]=new _HuffmanTreeNode2(line);else{let node=this.children[bit];node||(this.children[bit]=node=new _HuffmanTreeNode2(null)),node.buildTree(line,shift-1)}}decodeNode(reader){if(this.isLeaf){if(this.isOOB)return null;const htOffset=reader.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-htOffset:htOffset)}const node=this.children[reader.readBit()];if(!node)throw new Jbig2Error("invalid Huffman data");return node.decodeNode(reader)}};__name(_HuffmanTreeNode,"HuffmanTreeNode");let HuffmanTreeNode=_HuffmanTreeNode;const _HuffmanTable=class{static{__name2(this,"_HuffmanTable")}constructor(lines,prefixCodesDone){prefixCodesDone||this.assignPrefixCodes(lines),this.rootNode=new HuffmanTreeNode(null);for(let i=0,ii=lines.length;i<ii;i++){const line=lines[i];line.prefixLength>0&&this.rootNode.buildTree(line,line.prefixLength-1)}}decode(reader){return this.rootNode.decodeNode(reader)}assignPrefixCodes(lines){const linesLength=lines.length;let prefixLengthMax=0;for(let i=0;i<linesLength;i++)prefixLengthMax=Math.max(prefixLengthMax,lines[i].prefixLength);const histogram=new Uint32Array(prefixLengthMax+1);for(let i=0;i<linesLength;i++)histogram[lines[i].prefixLength]++;let currentLength=1,firstCode=0,currentCode,currentTemp,line;for(histogram[0]=0;currentLength<=prefixLengthMax;){for(firstCode=firstCode+histogram[currentLength-1]<<1,currentCode=firstCode,currentTemp=0;currentTemp<linesLength;)line=lines[currentTemp],line.prefixLength===currentLength&&(line.prefixCode=currentCode,currentCode++),currentTemp++;currentLength++}}};__name(_HuffmanTable,"HuffmanTable");let HuffmanTable=_HuffmanTable;function decodeTablesSegment(data,start,end){const flags=data[start],lowestValue=(0,_core_utils.readUint32)(data,start+1)&4294967295,highestValue=(0,_core_utils.readUint32)(data,start+5)&4294967295,reader=new Reader(data,start+9,end),prefixSizeBits=(flags>>1&7)+1,rangeSizeBits=(flags>>4&7)+1,lines=[];let prefixLength,rangeLength,currentRangeLow=lowestValue;do prefixLength=reader.readBits(prefixSizeBits),rangeLength=reader.readBits(rangeSizeBits),lines.push(new HuffmanLine([currentRangeLow,prefixLength,rangeLength,0])),currentRangeLow+=1<<rangeLength;while(currentRangeLow<highestValue);return prefixLength=reader.readBits(prefixSizeBits),lines.push(new HuffmanLine([lowestValue-1,prefixLength,32,0,"lower"])),prefixLength=reader.readBits(prefixSizeBits),lines.push(new HuffmanLine([highestValue,prefixLength,32,0])),flags&1&&(prefixLength=reader.readBits(prefixSizeBits),lines.push(new HuffmanLine([prefixLength,0]))),new HuffmanTable(lines,!1)}__name2(decodeTablesSegment,"decodeTablesSegment"),__name(decodeTablesSegment,"decodeTablesSegment");const standardTablesCache={};function getStandardTable(number){let table=standardTablesCache[number];if(table)return table;let lines;switch(number){case 1:lines=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:lines=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:lines=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:lines=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:lines=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:lines=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:lines=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:lines=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:lines=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:lines=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:lines=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:lines=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:lines=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:lines=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:lines=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw new Jbig2Error(`standard table B.${number} does not exist`)}for(let i=0,ii=lines.length;i<ii;i++)lines[i]=new HuffmanLine(lines[i]);return table=new HuffmanTable(lines,!0),standardTablesCache[number]=table,table}__name2(getStandardTable,"getStandardTable"),__name(getStandardTable,"getStandardTable");const _Reader=class{static{__name2(this,"_Reader")}constructor(data,start,end){this.data=data,this.start=start,this.end=end,this.position=start,this.shift=-1,this.currentByte=0}readBit(){if(this.shift<0){if(this.position>=this.end)throw new Jbig2Error("end of data while reading bit");this.currentByte=this.data[this.position++],this.shift=7}const bit=this.currentByte>>this.shift&1;return this.shift--,bit}readBits(numBits){let result=0,i;for(i=numBits-1;i>=0;i--)result|=this.readBit()<<i;return result}byteAlign(){this.shift=-1}next(){return this.position>=this.end?-1:this.data[this.position++]}};__name(_Reader,"Reader");let Reader=_Reader;function getCustomHuffmanTable(index,referredTo,customTables){let currentIndex=0;for(let i=0,ii=referredTo.length;i<ii;i++){const table=customTables[referredTo[i]];if(table){if(index===currentIndex)return table;currentIndex++}}throw new Jbig2Error("can't find custom Huffman table")}__name2(getCustomHuffmanTable,"getCustomHuffmanTable"),__name(getCustomHuffmanTable,"getCustomHuffmanTable");function getTextRegionHuffmanTables(textRegion,referredTo,customTables,numberOfSymbols,reader){const codes=[];for(let i=0;i<=34;i++){const codeLength=reader.readBits(4);codes.push(new HuffmanLine([i,codeLength,0,0]))}const runCodesTable=new HuffmanTable(codes,!1);codes.length=0;for(let i=0;i<numberOfSymbols;){const codeLength=runCodesTable.decode(reader);if(codeLength>=32){let repeatedLength,numberOfRepeats,j;switch(codeLength){case 32:if(i===0)throw new Jbig2Error("no previous value in symbol ID table");numberOfRepeats=reader.readBits(2)+3,repeatedLength=codes[i-1].prefixLength;break;case 33:numberOfRepeats=reader.readBits(3)+3,repeatedLength=0;break;case 34:numberOfRepeats=reader.readBits(7)+11,repeatedLength=0;break;default:throw new Jbig2Error("invalid code length in symbol ID table")}for(j=0;j<numberOfRepeats;j++)codes.push(new HuffmanLine([i,repeatedLength,0,0])),i++}else codes.push(new HuffmanLine([i,codeLength,0,0])),i++}reader.byteAlign();const symbolIDTable=new HuffmanTable(codes,!1);let customIndex=0,tableFirstS,tableDeltaS,tableDeltaT;switch(textRegion.huffmanFS){case 0:case 1:tableFirstS=getStandardTable(textRegion.huffmanFS+6);break;case 3:tableFirstS=getCustomHuffmanTable(customIndex,referredTo,customTables),customIndex++;break;default:throw new Jbig2Error("invalid Huffman FS selector")}switch(textRegion.huffmanDS){case 0:case 1:case 2:tableDeltaS=getStandardTable(textRegion.huffmanDS+8);break;case 3:tableDeltaS=getCustomHuffmanTable(customIndex,referredTo,customTables),customIndex++;break;default:throw new Jbig2Error("invalid Huffman DS selector")}switch(textRegion.huffmanDT){case 0:case 1:case 2:tableDeltaT=getStandardTable(textRegion.huffmanDT+11);break;case 3:tableDeltaT=getCustomHuffmanTable(customIndex,referredTo,customTables),customIndex++;break;default:throw new Jbig2Error("invalid Huffman DT selector")}if(textRegion.refinement)throw new Jbig2Error("refinement with Huffman is not supported");return{symbolIDTable,tableFirstS,tableDeltaS,tableDeltaT}}__name2(getTextRegionHuffmanTables,"getTextRegionHuffmanTables"),__name(getTextRegionHuffmanTables,"getTextRegionHuffmanTables");function getSymbolDictionaryHuffmanTables(dictionary,referredTo,customTables){let customIndex=0,tableDeltaHeight,tableDeltaWidth;switch(dictionary.huffmanDHSelector){case 0:case 1:tableDeltaHeight=getStandardTable(dictionary.huffmanDHSelector+4);break;case 3:tableDeltaHeight=getCustomHuffmanTable(customIndex,referredTo,customTables),customIndex++;break;default:throw new Jbig2Error("invalid Huffman DH selector")}switch(dictionary.huffmanDWSelector){case 0:case 1:tableDeltaWidth=getStandardTable(dictionary.huffmanDWSelector+2);break;case 3:tableDeltaWidth=getCustomHuffmanTable(customIndex,referredTo,customTables),customIndex++;break;default:throw new Jbig2Error("invalid Huffman DW selector")}let tableBitmapSize,tableAggregateInstances;return dictionary.bitmapSizeSelector?(tableBitmapSize=getCustomHuffmanTable(customIndex,referredTo,customTables),customIndex++):tableBitmapSize=getStandardTable(1),dictionary.aggregationInstancesSelector?tableAggregateInstances=getCustomHuffmanTable(customIndex,referredTo,customTables):tableAggregateInstances=getStandardTable(1),{tableDeltaHeight,tableDeltaWidth,tableBitmapSize,tableAggregateInstances}}__name2(getSymbolDictionaryHuffmanTables,"getSymbolDictionaryHuffmanTables"),__name(getSymbolDictionaryHuffmanTables,"getSymbolDictionaryHuffmanTables");function readUncompressedBitmap(reader,width,height){const bitmap=[];for(let y=0;y<height;y++){const row=new Uint8Array(width);bitmap.push(row);for(let x=0;x<width;x++)row[x]=reader.readBit();reader.byteAlign()}return bitmap}__name2(readUncompressedBitmap,"readUncompressedBitmap"),__name(readUncompressedBitmap,"readUncompressedBitmap");function decodeMMRBitmap(input,width,height,endOfBlock){const params={K:-1,Columns:width,Rows:height,BlackIs1:!0,EndOfBlock:endOfBlock},decoder=new _ccitt.CCITTFaxDecoder(input,params),bitmap=[];let currentByte,eof=!1;for(let y=0;y<height;y++){const row=new Uint8Array(width);bitmap.push(row);let shift=-1;for(let x=0;x<width;x++)shift<0&&(currentByte=decoder.readNextChar(),currentByte===-1&&(currentByte=0,eof=!0),shift=7),row[x]=currentByte>>shift&1,shift--}if(endOfBlock&&!eof)for(let i=0;i<5&&decoder.readNextChar()!==-1;i++);return bitmap}__name2(decodeMMRBitmap,"decodeMMRBitmap"),__name(decodeMMRBitmap,"decodeMMRBitmap");const _Jbig2Image=class{static{__name2(this,"_Jbig2Image")}parseChunks(chunks){return parseJbig2Chunks(chunks)}parse(data){throw new Error("Not implemented: Jbig2Image.parse")}};__name(_Jbig2Image,"Jbig2Image");let Jbig2Image=_Jbig2Image;exports3.Jbig2Image=Jbig2Image},(__unused_webpack_module2,exports3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.ArithmeticDecoder=void 0;const QeTable=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}],_ArithmeticDecoder=class{static{__name2(this,"_ArithmeticDecoder")}constructor(data,start,end){this.data=data,this.bp=start,this.dataEnd=end,this.chigh=data[start],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}byteIn(){const data=this.data;let bp=this.bp;data[bp]===255?data[bp+1]>143?(this.clow+=65280,this.ct=8):(bp++,this.clow+=data[bp]<<9,this.ct=7,this.bp=bp):(bp++,this.clow+=bp<this.dataEnd?data[bp]<<8:65280,this.ct=8,this.bp=bp),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}readBit(contexts,pos){let cx_index=contexts[pos]>>1,cx_mps=contexts[pos]&1;const qeTableIcx=QeTable[cx_index],qeIcx=qeTableIcx.qe;let d,a=this.a-qeIcx;if(this.chigh<qeIcx)a<qeIcx?(a=qeIcx,d=cx_mps,cx_index=qeTableIcx.nmps):(a=qeIcx,d=1^cx_mps,qeTableIcx.switchFlag===1&&(cx_mps=d),cx_index=qeTableIcx.nlps);else{if(this.chigh-=qeIcx,a&32768)return this.a=a,cx_mps;a<qeIcx?(d=1^cx_mps,qeTableIcx.switchFlag===1&&(cx_mps=d),cx_index=qeTableIcx.nlps):(d=cx_mps,cx_index=qeTableIcx.nmps)}do this.ct===0&&this.byteIn(),a<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--;while(!(a&32768));return this.a=a,contexts[pos]=cx_index<<1|cx_mps,d}};__name(_ArithmeticDecoder,"ArithmeticDecoder");let ArithmeticDecoder=_ArithmeticDecoder;exports3.ArithmeticDecoder=ArithmeticDecoder},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.JpegStream=void 0;var _decode_stream=__w_pdfjs_require__3(19),_primitives=__w_pdfjs_require__3(5),_jpg=__w_pdfjs_require__3(28),_util2=__w_pdfjs_require__3(2);const _JpegStream=class extends _decode_stream.DecodeStream{static{__name2(this,"_JpegStream")}constructor(stream,maybeLength,params){let ch;for(;(ch=stream.getByte())!==-1;)if(ch===255){stream.skip(-1);break}super(maybeLength),this.stream=stream,this.dict=stream.dict,this.maybeLength=maybeLength,this.params=params}get bytes(){return(0,_util2.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(requested){}readBlock(){if(this.eof)return;const jpegOptions={decodeTransform:void 0,colorTransform:void 0},decodeArr=this.dict.getArray("D","Decode");if(this.forceRGB&&Array.isArray(decodeArr)){const bitsPerComponent=this.dict.get("BPC","BitsPerComponent")||8,decodeArrLength=decodeArr.length,transform=new Int32Array(decodeArrLength);let transformNeeded=!1;const maxValue=(1<<bitsPerComponent)-1;for(let i=0;i<decodeArrLength;i+=2)transform[i]=(decodeArr[i+1]-decodeArr[i])*256|0,transform[i+1]=decodeArr[i]*maxValue|0,(transform[i]!==256||transform[i+1]!==0)&&(transformNeeded=!0);transformNeeded&&(jpegOptions.decodeTransform=transform)}if(this.params instanceof _primitives.Dict){const colorTransform=this.params.get("ColorTransform");Number.isInteger(colorTransform)&&(jpegOptions.colorTransform=colorTransform)}const jpegImage=new _jpg.JpegImage(jpegOptions);jpegImage.parse(this.bytes);const data=jpegImage.getData({width:this.drawWidth,height:this.drawHeight,forceRGB:this.forceRGB,isSourcePDF:!0});this.buffer=data,this.bufferLength=data.length,this.eof=!0}};__name(_JpegStream,"JpegStream");let JpegStream=_JpegStream;exports3.JpegStream=JpegStream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.JpegImage=void 0;var _util2=__w_pdfjs_require__3(2),_core_utils=__w_pdfjs_require__3(6);const _JpegError=class extends _util2.BaseException{static{__name2(this,"_JpegError")}constructor(msg){super(`JPEG error: ${msg}`,"JpegError")}};__name(_JpegError,"JpegError");let JpegError=_JpegError;const _DNLMarkerError=class extends _util2.BaseException{static{__name2(this,"_DNLMarkerError")}constructor(message,scanLines){super(message,"DNLMarkerError"),this.scanLines=scanLines}};__name(_DNLMarkerError,"DNLMarkerError");let DNLMarkerError=_DNLMarkerError;const _EOIMarkerError=class extends _util2.BaseException{static{__name2(this,"_EOIMarkerError")}constructor(msg){super(msg,"EOIMarkerError")}};__name(_EOIMarkerError,"EOIMarkerError");let EOIMarkerError=_EOIMarkerError;const dctZigZag=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),dctCos1=4017,dctSin1=799,dctCos3=3406,dctSin3=2276,dctCos6=1567,dctSin6=3784,dctSqrt2=5793,dctSqrt1d2=2896;function buildHuffmanTable(codeLengths,values){let k=0,i,j,length=16;for(;length>0&&!codeLengths[length-1];)length--;const code=[{children:[],index:0}];let p=code[0],q;for(i=0;i<length;i++){for(j=0;j<codeLengths[i];j++){for(p=code.pop(),p.children[p.index]=values[k];p.index>0;)p=code.pop();for(p.index++,code.push(p);code.length<=i;)code.push(q={children:[],index:0}),p.children[p.index]=q.children,p=q;k++}i+1<length&&(code.push(q={children:[],index:0}),p.children[p.index]=q.children,p=q)}return code[0].children}__name2(buildHuffmanTable,"buildHuffmanTable"),__name(buildHuffmanTable,"buildHuffmanTable");function getBlockBufferOffset(component,row,col){return 64*((component.blocksPerLine+1)*row+col)}__name2(getBlockBufferOffset,"getBlockBufferOffset"),__name(getBlockBufferOffset,"getBlockBufferOffset");function decodeScan(data,offset,frame,components,resetInterval,spectralStart,spectralEnd,successivePrev,successive,parseDNLMarker=!1){const mcusPerLine=frame.mcusPerLine,progressive=frame.progressive,startOffset=offset;let bitsData=0,bitsCount=0;function readBit(){if(bitsCount>0)return bitsCount--,bitsData>>bitsCount&1;if(bitsData=data[offset++],bitsData===255){const nextByte=data[offset++];if(nextByte){if(nextByte===220&&parseDNLMarker){offset+=2;const scanLines=(0,_core_utils.readUint16)(data,offset);if(offset+=2,scanLines>0&&scanLines!==frame.scanLines)throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",scanLines)}else if(nextByte===217){if(parseDNLMarker){const maybeScanLines=blockRow*(frame.precision===8?8:0);if(maybeScanLines>0&&Math.round(frame.scanLines/maybeScanLines)>=10)throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",maybeScanLines)}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data")}throw new JpegError(`unexpected marker ${(bitsData<<8|nextByte).toString(16)}`)}}return bitsCount=7,bitsData>>>7}__name2(readBit,"readBit"),__name(readBit,"readBit");function decodeHuffman(tree){let node=tree;for(;;){switch(node=node[readBit()],typeof node){case"number":return node;case"object":continue}throw new JpegError("invalid huffman sequence")}}__name2(decodeHuffman,"decodeHuffman"),__name(decodeHuffman,"decodeHuffman");function receive(length){let n2=0;for(;length>0;)n2=n2<<1|readBit(),length--;return n2}__name2(receive,"receive"),__name(receive,"receive");function receiveAndExtend(length){if(length===1)return readBit()===1?1:-1;const n2=receive(length);return n2>=1<<length-1?n2:n2+(-1<<length)+1}__name2(receiveAndExtend,"receiveAndExtend"),__name(receiveAndExtend,"receiveAndExtend");function decodeBaseline(component2,blockOffset){const t=decodeHuffman(component2.huffmanTableDC),diff=t===0?0:receiveAndExtend(t);component2.blockData[blockOffset]=component2.pred+=diff;let k2=1;for(;k2<64;){const rs=decodeHuffman(component2.huffmanTableAC),s=rs&15,r=rs>>4;if(s===0){if(r<15)break;k2+=16;continue}k2+=r;const z=dctZigZag[k2];component2.blockData[blockOffset+z]=receiveAndExtend(s),k2++}}__name2(decodeBaseline,"decodeBaseline"),__name(decodeBaseline,"decodeBaseline");function decodeDCFirst(component2,blockOffset){const t=decodeHuffman(component2.huffmanTableDC),diff=t===0?0:receiveAndExtend(t)<<successive;component2.blockData[blockOffset]=component2.pred+=diff}__name2(decodeDCFirst,"decodeDCFirst"),__name(decodeDCFirst,"decodeDCFirst");function decodeDCSuccessive(component2,blockOffset){component2.blockData[blockOffset]|=readBit()<<successive}__name2(decodeDCSuccessive,"decodeDCSuccessive"),__name(decodeDCSuccessive,"decodeDCSuccessive");let eobrun=0;function decodeACFirst(component2,blockOffset){if(eobrun>0){eobrun--;return}let k2=spectralStart;const e=spectralEnd;for(;k2<=e;){const rs=decodeHuffman(component2.huffmanTableAC),s=rs&15,r=rs>>4;if(s===0){if(r<15){eobrun=receive(r)+(1<<r)-1;break}k2+=16;continue}k2+=r;const z=dctZigZag[k2];component2.blockData[blockOffset+z]=receiveAndExtend(s)*(1<<successive),k2++}}__name2(decodeACFirst,"decodeACFirst"),__name(decodeACFirst,"decodeACFirst");let successiveACState=0,successiveACNextValue;function decodeACSuccessive(component2,blockOffset){let k2=spectralStart;const e=spectralEnd;let r=0,s,rs;for(;k2<=e;){const offsetZ=blockOffset+dctZigZag[k2],sign=component2.blockData[offsetZ]<0?-1:1;switch(successiveACState){case 0:if(rs=decodeHuffman(component2.huffmanTableAC),s=rs&15,r=rs>>4,s===0)r<15?(eobrun=receive(r)+(1<<r),successiveACState=4):(r=16,successiveACState=1);else{if(s!==1)throw new JpegError("invalid ACn encoding");successiveACNextValue=receiveAndExtend(s),successiveACState=r?2:3}continue;case 1:case 2:component2.blockData[offsetZ]?component2.blockData[offsetZ]+=sign*(readBit()<<successive):(r--,r===0&&(successiveACState=successiveACState===2?3:0));break;case 3:component2.blockData[offsetZ]?component2.blockData[offsetZ]+=sign*(readBit()<<successive):(component2.blockData[offsetZ]=successiveACNextValue<<successive,successiveACState=0);break;case 4:component2.blockData[offsetZ]&&(component2.blockData[offsetZ]+=sign*(readBit()<<successive));break}k2++}successiveACState===4&&(eobrun--,eobrun===0&&(successiveACState=0))}__name2(decodeACSuccessive,"decodeACSuccessive"),__name(decodeACSuccessive,"decodeACSuccessive");let blockRow=0;function decodeMcu(component2,decode,mcu2,row,col){const mcuRow=mcu2/mcusPerLine|0,mcuCol=mcu2%mcusPerLine;blockRow=mcuRow*component2.v+row;const blockCol=mcuCol*component2.h+col,blockOffset=getBlockBufferOffset(component2,blockRow,blockCol);decode(component2,blockOffset)}__name2(decodeMcu,"decodeMcu"),__name(decodeMcu,"decodeMcu");function decodeBlock(component2,decode,mcu2){blockRow=mcu2/component2.blocksPerLine|0;const blockCol=mcu2%component2.blocksPerLine,blockOffset=getBlockBufferOffset(component2,blockRow,blockCol);decode(component2,blockOffset)}__name2(decodeBlock,"decodeBlock"),__name(decodeBlock,"decodeBlock");const componentsLength=components.length;let component,i,j,k,n,decodeFn;progressive?spectralStart===0?decodeFn=successivePrev===0?decodeDCFirst:decodeDCSuccessive:decodeFn=successivePrev===0?decodeACFirst:decodeACSuccessive:decodeFn=decodeBaseline;let mcu=0,fileMarker,mcuExpected;componentsLength===1?mcuExpected=components[0].blocksPerLine*components[0].blocksPerColumn:mcuExpected=mcusPerLine*frame.mcusPerColumn;let h,v;for(;mcu<=mcuExpected;){const mcuToRead=resetInterval?Math.min(mcuExpected-mcu,resetInterval):mcuExpected;if(mcuToRead>0){for(i=0;i<componentsLength;i++)components[i].pred=0;if(eobrun=0,componentsLength===1)for(component=components[0],n=0;n<mcuToRead;n++)decodeBlock(component,decodeFn,mcu),mcu++;else for(n=0;n<mcuToRead;n++){for(i=0;i<componentsLength;i++)for(component=components[i],h=component.h,v=component.v,j=0;j<v;j++)for(k=0;k<h;k++)decodeMcu(component,decodeFn,mcu,j,k);mcu++}}if(bitsCount=0,fileMarker=findNextFileMarker(data,offset),!fileMarker)break;if(fileMarker.invalid){const partialMsg=mcuToRead>0?"unexpected":"excessive";(0,_util2.warn)(`decodeScan - ${partialMsg} MCU data, current marker is: ${fileMarker.invalid}`),offset=fileMarker.offset}if(fileMarker.marker>=65488&&fileMarker.marker<=65495)offset+=2;else break}return offset-startOffset}__name2(decodeScan,"decodeScan"),__name(decodeScan,"decodeScan");function quantizeAndInverse(component,blockBufferOffset,p){const qt=component.quantizationTable,blockData=component.blockData;let v0,v1,v2,v3,v4,v5,v6,v7,p0,p1,p2,p3,p4,p5,p6,p7,t;if(!qt)throw new JpegError("missing required Quantization Table.");for(let row=0;row<64;row+=8){if(p0=blockData[blockBufferOffset+row],p1=blockData[blockBufferOffset+row+1],p2=blockData[blockBufferOffset+row+2],p3=blockData[blockBufferOffset+row+3],p4=blockData[blockBufferOffset+row+4],p5=blockData[blockBufferOffset+row+5],p6=blockData[blockBufferOffset+row+6],p7=blockData[blockBufferOffset+row+7],p0*=qt[row],!(p1|p2|p3|p4|p5|p6|p7)){t=dctSqrt2*p0+512>>10,p[row]=t,p[row+1]=t,p[row+2]=t,p[row+3]=t,p[row+4]=t,p[row+5]=t,p[row+6]=t,p[row+7]=t;continue}p1*=qt[row+1],p2*=qt[row+2],p3*=qt[row+3],p4*=qt[row+4],p5*=qt[row+5],p6*=qt[row+6],p7*=qt[row+7],v0=dctSqrt2*p0+128>>8,v1=dctSqrt2*p4+128>>8,v2=p2,v3=p6,v4=dctSqrt1d2*(p1-p7)+128>>8,v7=dctSqrt1d2*(p1+p7)+128>>8,v5=p3<<4,v6=p5<<4,v0=v0+v1+1>>1,v1=v0-v1,t=v2*dctSin6+v3*dctCos6+128>>8,v2=v2*dctCos6-v3*dctSin6+128>>8,v3=t,v4=v4+v6+1>>1,v6=v4-v6,v7=v7+v5+1>>1,v5=v7-v5,v0=v0+v3+1>>1,v3=v0-v3,v1=v1+v2+1>>1,v2=v1-v2,t=v4*dctSin3+v7*dctCos3+2048>>12,v4=v4*dctCos3-v7*dctSin3+2048>>12,v7=t,t=v5*dctSin1+v6*dctCos1+2048>>12,v5=v5*dctCos1-v6*dctSin1+2048>>12,v6=t,p[row]=v0+v7,p[row+7]=v0-v7,p[row+1]=v1+v6,p[row+6]=v1-v6,p[row+2]=v2+v5,p[row+5]=v2-v5,p[row+3]=v3+v4,p[row+4]=v3-v4}for(let col=0;col<8;++col){if(p0=p[col],p1=p[col+8],p2=p[col+16],p3=p[col+24],p4=p[col+32],p5=p[col+40],p6=p[col+48],p7=p[col+56],!(p1|p2|p3|p4|p5|p6|p7)){t=dctSqrt2*p0+8192>>14,t<-2040?t=0:t>=2024?t=255:t=t+2056>>4,blockData[blockBufferOffset+col]=t,blockData[blockBufferOffset+col+8]=t,blockData[blockBufferOffset+col+16]=t,blockData[blockBufferOffset+col+24]=t,blockData[blockBufferOffset+col+32]=t,blockData[blockBufferOffset+col+40]=t,blockData[blockBufferOffset+col+48]=t,blockData[blockBufferOffset+col+56]=t;continue}v0=dctSqrt2*p0+2048>>12,v1=dctSqrt2*p4+2048>>12,v2=p2,v3=p6,v4=dctSqrt1d2*(p1-p7)+2048>>12,v7=dctSqrt1d2*(p1+p7)+2048>>12,v5=p3,v6=p5,v0=(v0+v1+1>>1)+4112,v1=v0-v1,t=v2*dctSin6+v3*dctCos6+2048>>12,v2=v2*dctCos6-v3*dctSin6+2048>>12,v3=t,v4=v4+v6+1>>1,v6=v4-v6,v7=v7+v5+1>>1,v5=v7-v5,v0=v0+v3+1>>1,v3=v0-v3,v1=v1+v2+1>>1,v2=v1-v2,t=v4*dctSin3+v7*dctCos3+2048>>12,v4=v4*dctCos3-v7*dctSin3+2048>>12,v7=t,t=v5*dctSin1+v6*dctCos1+2048>>12,v5=v5*dctCos1-v6*dctSin1+2048>>12,v6=t,p0=v0+v7,p7=v0-v7,p1=v1+v6,p6=v1-v6,p2=v2+v5,p5=v2-v5,p3=v3+v4,p4=v3-v4,p0<16?p0=0:p0>=4080?p0=255:p0>>=4,p1<16?p1=0:p1>=4080?p1=255:p1>>=4,p2<16?p2=0:p2>=4080?p2=255:p2>>=4,p3<16?p3=0:p3>=4080?p3=255:p3>>=4,p4<16?p4=0:p4>=4080?p4=255:p4>>=4,p5<16?p5=0:p5>=4080?p5=255:p5>>=4,p6<16?p6=0:p6>=4080?p6=255:p6>>=4,p7<16?p7=0:p7>=4080?p7=255:p7>>=4,blockData[blockBufferOffset+col]=p0,blockData[blockBufferOffset+col+8]=p1,blockData[blockBufferOffset+col+16]=p2,blockData[blockBufferOffset+col+24]=p3,blockData[blockBufferOffset+col+32]=p4,blockData[blockBufferOffset+col+40]=p5,blockData[blockBufferOffset+col+48]=p6,blockData[blockBufferOffset+col+56]=p7}}__name2(quantizeAndInverse,"quantizeAndInverse"),__name(quantizeAndInverse,"quantizeAndInverse");function buildComponentData(frame,component){const blocksPerLine=component.blocksPerLine,blocksPerColumn=component.blocksPerColumn,computationBuffer=new Int16Array(64);for(let blockRow=0;blockRow<blocksPerColumn;blockRow++)for(let blockCol=0;blockCol<blocksPerLine;blockCol++){const offset=getBlockBufferOffset(component,blockRow,blockCol);quantizeAndInverse(component,offset,computationBuffer)}return component.blockData}__name2(buildComponentData,"buildComponentData"),__name(buildComponentData,"buildComponentData");function findNextFileMarker(data,currentPos,startPos=currentPos){const maxPos=data.length-1;let newPos=startPos<currentPos?startPos:currentPos;if(currentPos>=maxPos)return null;const currentMarker=(0,_core_utils.readUint16)(data,currentPos);if(currentMarker>=65472&&currentMarker<=65534)return{invalid:null,marker:currentMarker,offset:currentPos};let newMarker=(0,_core_utils.readUint16)(data,newPos);for(;!(newMarker>=65472&&newMarker<=65534);){if(++newPos>=maxPos)return null;newMarker=(0,_core_utils.readUint16)(data,newPos)}return{invalid:currentMarker.toString(16),marker:newMarker,offset:newPos}}__name2(findNextFileMarker,"findNextFileMarker"),__name(findNextFileMarker,"findNextFileMarker");const _JpegImage=class{static{__name2(this,"_JpegImage")}constructor({decodeTransform=null,colorTransform=-1}={}){this._decodeTransform=decodeTransform,this._colorTransform=colorTransform}parse(data,{dnlScanLines=null}={}){function readDataBlock(){const length=(0,_core_utils.readUint16)(data,offset);offset+=2;let endOffset=offset+length-2;const fileMarker2=findNextFileMarker(data,endOffset,offset);fileMarker2&&fileMarker2.invalid&&((0,_util2.warn)("readDataBlock - incorrect length, current marker is: "+fileMarker2.invalid),endOffset=fileMarker2.offset);const array=data.subarray(offset,endOffset);return offset+=array.length,array}__name2(readDataBlock,"readDataBlock"),__name(readDataBlock,"readDataBlock");function prepareComponents(frame2){const mcusPerLine=Math.ceil(frame2.samplesPerLine/8/frame2.maxH),mcusPerColumn=Math.ceil(frame2.scanLines/8/frame2.maxV);for(let i=0,ii=frame2.components.length;i<ii;i++){const component=frame2.components[i],blocksPerLine=Math.ceil(Math.ceil(frame2.samplesPerLine/8)*component.h/frame2.maxH),blocksPerColumn=Math.ceil(Math.ceil(frame2.scanLines/8)*component.v/frame2.maxV),blocksPerLineForMcu=mcusPerLine*component.h,blocksBufferSize=64*(mcusPerColumn*component.v)*(blocksPerLineForMcu+1);component.blockData=new Int16Array(blocksBufferSize),component.blocksPerLine=blocksPerLine,component.blocksPerColumn=blocksPerColumn}frame2.mcusPerLine=mcusPerLine,frame2.mcusPerColumn=mcusPerColumn}__name2(prepareComponents,"prepareComponents"),__name(prepareComponents,"prepareComponents");let offset=0,jfif=null,adobe=null,frame,resetInterval,numSOSMarkers=0;const quantizationTables=[],huffmanTablesAC=[],huffmanTablesDC=[];let fileMarker=(0,_core_utils.readUint16)(data,offset);if(offset+=2,fileMarker!==65496)throw new JpegError("SOI not found");fileMarker=(0,_core_utils.readUint16)(data,offset),offset+=2;markerLoop:for(;fileMarker!==65497;){let i,j,l;switch(fileMarker){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:const appData=readDataBlock();fileMarker===65504&&appData[0]===74&&appData[1]===70&&appData[2]===73&&appData[3]===70&&appData[4]===0&&(jfif={version:{major:appData[5],minor:appData[6]},densityUnits:appData[7],xDensity:appData[8]<<8|appData[9],yDensity:appData[10]<<8|appData[11],thumbWidth:appData[12],thumbHeight:appData[13],thumbData:appData.subarray(14,14+3*appData[12]*appData[13])}),fileMarker===65518&&appData[0]===65&&appData[1]===100&&appData[2]===111&&appData[3]===98&&appData[4]===101&&(adobe={version:appData[5]<<8|appData[6],flags0:appData[7]<<8|appData[8],flags1:appData[9]<<8|appData[10],transformCode:appData[11]});break;case 65499:const quantizationTablesLength=(0,_core_utils.readUint16)(data,offset);offset+=2;const quantizationTablesEnd=quantizationTablesLength+offset-2;let z;for(;offset<quantizationTablesEnd;){const quantizationTableSpec=data[offset++],tableData=new Uint16Array(64);if(quantizationTableSpec>>4)if(quantizationTableSpec>>4===1)for(j=0;j<64;j++)z=dctZigZag[j],tableData[z]=(0,_core_utils.readUint16)(data,offset),offset+=2;else throw new JpegError("DQT - invalid table spec");else for(j=0;j<64;j++)z=dctZigZag[j],tableData[z]=data[offset++];quantizationTables[quantizationTableSpec&15]=tableData}break;case 65472:case 65473:case 65474:if(frame)throw new JpegError("Only single frame JPEGs supported");offset+=2,frame={},frame.extended=fileMarker===65473,frame.progressive=fileMarker===65474,frame.precision=data[offset++];const sofScanLines=(0,_core_utils.readUint16)(data,offset);offset+=2,frame.scanLines=dnlScanLines||sofScanLines,frame.samplesPerLine=(0,_core_utils.readUint16)(data,offset),offset+=2,frame.components=[],frame.componentIds={};const componentsCount=data[offset++];let maxH=0,maxV=0;for(i=0;i<componentsCount;i++){const componentId=data[offset],h=data[offset+1]>>4,v=data[offset+1]&15;maxH<h&&(maxH=h),maxV<v&&(maxV=v);const qId=data[offset+2];l=frame.components.push({h,v,quantizationId:qId,quantizationTable:null}),frame.componentIds[componentId]=l-1,offset+=3}frame.maxH=maxH,frame.maxV=maxV,prepareComponents(frame);break;case 65476:const huffmanLength=(0,_core_utils.readUint16)(data,offset);for(offset+=2,i=2;i<huffmanLength;){const huffmanTableSpec=data[offset++],codeLengths=new Uint8Array(16);let codeLengthSum=0;for(j=0;j<16;j++,offset++)codeLengthSum+=codeLengths[j]=data[offset];const huffmanValues=new Uint8Array(codeLengthSum);for(j=0;j<codeLengthSum;j++,offset++)huffmanValues[j]=data[offset];i+=17+codeLengthSum,(huffmanTableSpec>>4?huffmanTablesAC:huffmanTablesDC)[huffmanTableSpec&15]=buildHuffmanTable(codeLengths,huffmanValues)}break;case 65501:offset+=2,resetInterval=(0,_core_utils.readUint16)(data,offset),offset+=2;break;case 65498:const parseDNLMarker=++numSOSMarkers===1&&!dnlScanLines;offset+=2;const selectorsCount=data[offset++],components=[];for(i=0;i<selectorsCount;i++){const index=data[offset++],componentIndex=frame.componentIds[index],component=frame.components[componentIndex];component.index=index;const tableSpec=data[offset++];component.huffmanTableDC=huffmanTablesDC[tableSpec>>4],component.huffmanTableAC=huffmanTablesAC[tableSpec&15],components.push(component)}const spectralStart=data[offset++],spectralEnd=data[offset++],successiveApproximation=data[offset++];try{const processed=decodeScan(data,offset,frame,components,resetInterval,spectralStart,spectralEnd,successiveApproximation>>4,successiveApproximation&15,parseDNLMarker);offset+=processed}catch(ex){if(ex instanceof DNLMarkerError)return(0,_util2.warn)(`${ex.message} -- attempting to re-parse the JPEG image.`),this.parse(data,{dnlScanLines:ex.scanLines});if(ex instanceof EOIMarkerError){(0,_util2.warn)(`${ex.message} -- ignoring the rest of the image data.`);break markerLoop}throw ex}break;case 65500:offset+=4;break;case 65535:data[offset]!==255&&offset--;break;default:const nextFileMarker=findNextFileMarker(data,offset-2,offset-3);if(nextFileMarker&&nextFileMarker.invalid){(0,_util2.warn)("JpegImage.parse - unexpected data, current marker is: "+nextFileMarker.invalid),offset=nextFileMarker.offset;break}if(!nextFileMarker||offset>=data.length-1){(0,_util2.warn)("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break markerLoop}throw new JpegError("JpegImage.parse - unknown marker: "+fileMarker.toString(16))}fileMarker=(0,_core_utils.readUint16)(data,offset),offset+=2}this.width=frame.samplesPerLine,this.height=frame.scanLines,this.jfif=jfif,this.adobe=adobe,this.components=[];for(let i=0,ii=frame.components.length;i<ii;i++){const component=frame.components[i],quantizationTable=quantizationTables[component.quantizationId];quantizationTable&&(component.quantizationTable=quantizationTable),this.components.push({index:component.index,output:buildComponentData(frame,component),scaleX:component.h/frame.maxH,scaleY:component.v/frame.maxV,blocksPerLine:component.blocksPerLine,blocksPerColumn:component.blocksPerColumn})}this.numComponents=this.components.length}_getLinearizedBlockData(width,height,isSourcePDF=!1){const scaleX=this.width/width,scaleY=this.height/height;let component,componentScaleX,componentScaleY,blocksPerScanline,x,y,i,j,k,index,offset=0,output;const numComponents=this.components.length,dataLength=width*height*numComponents,data=new Uint8ClampedArray(dataLength),xScaleBlockOffset=new Uint32Array(width),mask3LSB=4294967288;let lastComponentScaleX;for(i=0;i<numComponents;i++){if(component=this.components[i],componentScaleX=component.scaleX*scaleX,componentScaleY=component.scaleY*scaleY,offset=i,output=component.output,blocksPerScanline=component.blocksPerLine+1<<3,componentScaleX!==lastComponentScaleX){for(x=0;x<width;x++)j=0|x*componentScaleX,xScaleBlockOffset[x]=(j&mask3LSB)<<3|j&7;lastComponentScaleX=componentScaleX}for(y=0;y<height;y++)for(j=0|y*componentScaleY,index=blocksPerScanline*(j&mask3LSB)|(j&7)<<3,x=0;x<width;x++)data[offset]=output[index+xScaleBlockOffset[x]],offset+=numComponents}let transform=this._decodeTransform;if(!isSourcePDF&&numComponents===4&&!transform&&(transform=new Int32Array([-256,255,-256,255,-256,255,-256,255])),transform)for(i=0;i<dataLength;)for(j=0,k=0;j<numComponents;j++,i++,k+=2)data[i]=(data[i]*transform[k]>>8)+transform[k+1];return data}get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:this.numComponents===3?this._colorTransform===0?!1:!(this.components[0].index===82&&this.components[1].index===71&&this.components[2].index===66):this._colorTransform===1}_convertYccToRgb(data){let Y,Cb,Cr;for(let i=0,length=data.length;i<length;i+=3)Y=data[i],Cb=data[i+1],Cr=data[i+2],data[i]=Y-179.456+1.402*Cr,data[i+1]=Y+135.459-.344*Cb-.714*Cr,data[i+2]=Y-226.816+1.772*Cb;return data}_convertYcckToRgb(data){let Y,Cb,Cr,k,offset=0;for(let i=0,length=data.length;i<length;i+=4)Y=data[i],Cb=data[i+1],Cr=data[i+2],k=data[i+3],data[offset++]=-122.67195406894+Cb*(-660635669420364e-19*Cb+.000437130475926232*Cr-54080610064599e-18*Y+.00048449797120281*k-.154362151871126)+Cr*(-.000957964378445773*Cr+.000817076911346625*Y-.00477271405408747*k+1.53380253221734)+Y*(.000961250184130688*Y-.00266257332283933*k+.48357088451265)+k*(-.000336197177618394*k+.484791561490776),data[offset++]=107.268039397724+Cb*(219927104525741e-19*Cb-.000640992018297945*Cr+.000659397001245577*Y+.000426105652938837*k-.176491792462875)+Cr*(-.000778269941513683*Cr+.00130872261408275*Y+.000770482631801132*k-.151051492775562)+Y*(.00126935368114843*Y-.00265090189010898*k+.25802910206845)+k*(-.000318913117588328*k-.213742400323665),data[offset++]=-20.810012546947+Cb*(-.000570115196973677*Cb-263409051004589e-19*Cr+.0020741088115012*Y-.00288260236853442*k+.814272968359295)+Cr*(-153496057440975e-19*Cr-.000132689043961446*Y+.000560833691242812*k-.195152027534049)+Y*(.00174418132927582*Y-.00255243321439347*k+.116935020465145)+k*(-.000343531996510555*k+.24165260232407);return data.subarray(0,offset)}_convertYcckToCmyk(data){let Y,Cb,Cr;for(let i=0,length=data.length;i<length;i+=4)Y=data[i],Cb=data[i+1],Cr=data[i+2],data[i]=434.456-Y-1.402*Cr,data[i+1]=119.541-Y+.344*Cb+.714*Cr,data[i+2]=481.816-Y-1.772*Cb;return data}_convertCmykToRgb(data){let c,m,y,k,offset=0;for(let i=0,length=data.length;i<length;i+=4)c=data[i],m=data[i+1],y=data[i+2],k=data[i+3],data[offset++]=255+c*(-6747147073602441e-20*c+.0008379262121013727*m+.0002894718188643294*y+.003264231057537806*k-1.1185611867203937)+m*(26374107616089405e-21*m-8626949158638572e-20*y-.0002748769067499491*k-.02155688794978967)+y*(-3878099212869363e-20*y-.0003267808279485286*k+.0686742238595345)-k*(.0003361971776183937*k+.7430659151342254),data[offset++]=255+c*(.00013596372813588848*c+.000924537132573585*m+.00010567359618683593*y+.0004791864687436512*k-.3109689587515875)+m*(-.00023545346108370344*m+.0002702845253534714*y+.0020200308977307156*k-.7488052167015494)+y*(6834815998235662e-20*y+.00015168452363460973*k-.09751927774728933)-k*(.0003189131175883281*k+.7364883807733168),data[offset++]=255+c*(13598650411385307e-21*c+.00012423956175490851*m+.0004751985097583589*y-36729317476630422e-22*k-.05562186980264034)+m*(.00016141380598724676*m+.0009692239130725186*y+.0007782692450036253*k-.44015232367526463)+y*(5068882914068769e-22*y+.0017778369011375071*k-.7591454649749609)-k*(.0003435319965105553*k+.7063770186160144);return data.subarray(0,offset)}getData({width,height,forceRGB=!1,isSourcePDF=!1}){if(this.numComponents>4)throw new JpegError("Unsupported color mode");const data=this._getLinearizedBlockData(width,height,isSourcePDF);if(this.numComponents===1&&forceRGB){const dataLength=data.length,rgbData=new Uint8ClampedArray(dataLength*3);let offset=0;for(let i=0;i<dataLength;i++){const grayColor=data[i];rgbData[offset++]=grayColor,rgbData[offset++]=grayColor,rgbData[offset++]=grayColor}return rgbData}else{if(this.numComponents===3&&this._isColorConversionNeeded)return this._convertYccToRgb(data);if(this.numComponents===4){if(this._isColorConversionNeeded)return forceRGB?this._convertYcckToRgb(data):this._convertYcckToCmyk(data);if(forceRGB)return this._convertCmykToRgb(data)}}return data}};__name(_JpegImage,"JpegImage");let JpegImage=_JpegImage;exports3.JpegImage=JpegImage},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.JpxStream=void 0;var _decode_stream=__w_pdfjs_require__3(19),_jpx=__w_pdfjs_require__3(30),_util2=__w_pdfjs_require__3(2);const _JpxStream=class extends _decode_stream.DecodeStream{static{__name2(this,"_JpxStream")}constructor(stream,maybeLength,params){super(maybeLength),this.stream=stream,this.dict=stream.dict,this.maybeLength=maybeLength,this.params=params}get bytes(){return(0,_util2.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(requested){}readBlock(){if(this.eof)return;const jpxImage=new _jpx.JpxImage;jpxImage.parse(this.bytes);const width=jpxImage.width,height=jpxImage.height,componentsCount=jpxImage.componentsCount,tileCount=jpxImage.tiles.length;if(tileCount===1)this.buffer=jpxImage.tiles[0].items;else{const data=new Uint8ClampedArray(width*height*componentsCount);for(let k=0;k<tileCount;k++){const tileComponents=jpxImage.tiles[k],tileWidth=tileComponents.width,tileHeight=tileComponents.height,tileLeft=tileComponents.left,tileTop=tileComponents.top,src=tileComponents.items;let srcPosition=0,dataPosition=(width*tileTop+tileLeft)*componentsCount;const imgRowSize=width*componentsCount,tileRowSize=tileWidth*componentsCount;for(let j=0;j<tileHeight;j++){const rowBytes=src.subarray(srcPosition,srcPosition+tileRowSize);data.set(rowBytes,dataPosition),srcPosition+=tileRowSize,dataPosition+=imgRowSize}}this.buffer=data}this.bufferLength=this.buffer.length,this.eof=!0}};__name(_JpxStream,"JpxStream");let JpxStream=_JpxStream;exports3.JpxStream=JpxStream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.JpxImage=void 0;var _util2=__w_pdfjs_require__3(2),_core_utils=__w_pdfjs_require__3(6),_arithmetic_decoder=__w_pdfjs_require__3(26);const _JpxError=class extends _util2.BaseException{static{__name2(this,"_JpxError")}constructor(msg){super(`JPX error: ${msg}`,"JpxError")}};__name(_JpxError,"JpxError");let JpxError=_JpxError;const SubbandsGainLog2={LL:0,LH:1,HL:1,HH:2},_JpxImage=class{static{__name2(this,"_JpxImage")}constructor(){this.failOnCorruptedImage=!1}parse(data){if((0,_core_utils.readUint16)(data,0)===65359){this.parseCodestream(data,0,data.length);return}const length=data.length;let position=0;for(;position<length;){let headerSize=8,lbox=(0,_core_utils.readUint32)(data,position);const tbox=(0,_core_utils.readUint32)(data,position+4);if(position+=headerSize,lbox===1&&(lbox=(0,_core_utils.readUint32)(data,position)*4294967296+(0,_core_utils.readUint32)(data,position+4),position+=8,headerSize+=8),lbox===0&&(lbox=length-position+headerSize),lbox<headerSize)throw new JpxError("Invalid box field size");const dataLength=lbox-headerSize;let jumpDataLength=!0;switch(tbox){case 1785737832:jumpDataLength=!1;break;case 1668246642:const method=data[position];if(method===1){const colorspace=(0,_core_utils.readUint32)(data,position+3);switch(colorspace){case 16:case 17:case 18:break;default:(0,_util2.warn)("Unknown colorspace "+colorspace);break}}else method===2&&(0,_util2.info)("ICC profile not supported");break;case 1785737827:this.parseCodestream(data,position,position+dataLength);break;case 1783636e3:(0,_core_utils.readUint32)(data,position)!==218793738&&(0,_util2.warn)("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:const headerType=String.fromCharCode(tbox>>24&255,tbox>>16&255,tbox>>8&255,tbox&255);(0,_util2.warn)(`Unsupported header type ${tbox} (${headerType}).`);break}jumpDataLength&&(position+=dataLength)}}parseImageProperties(stream){let newByte=stream.getByte();for(;newByte>=0;){const oldByte=newByte;if(newByte=stream.getByte(),(oldByte<<8|newByte)===65361){stream.skip(4);const Xsiz=stream.getInt32()>>>0,Ysiz=stream.getInt32()>>>0,XOsiz=stream.getInt32()>>>0,YOsiz=stream.getInt32()>>>0;stream.skip(16);const Csiz=stream.getUint16();this.width=Xsiz-XOsiz,this.height=Ysiz-YOsiz,this.componentsCount=Csiz,this.bitsPerComponent=8;return}}throw new JpxError("No size marker found in JPX stream")}parseCodestream(data,start,end){const context={};let doNotRecover=!1;try{let position=start;for(;position+1<end;){const code=(0,_core_utils.readUint16)(data,position);position+=2;let length=0,j,sqcd,spqcds,spqcdSize,scalarExpounded,tile;switch(code){case 65359:context.mainHeader=!0;break;case 65497:break;case 65361:length=(0,_core_utils.readUint16)(data,position);const siz={};siz.Xsiz=(0,_core_utils.readUint32)(data,position+4),siz.Ysiz=(0,_core_utils.readUint32)(data,position+8),siz.XOsiz=(0,_core_utils.readUint32)(data,position+12),siz.YOsiz=(0,_core_utils.readUint32)(data,position+16),siz.XTsiz=(0,_core_utils.readUint32)(data,position+20),siz.YTsiz=(0,_core_utils.readUint32)(data,position+24),siz.XTOsiz=(0,_core_utils.readUint32)(data,position+28),siz.YTOsiz=(0,_core_utils.readUint32)(data,position+32);const componentsCount=(0,_core_utils.readUint16)(data,position+36);siz.Csiz=componentsCount;const components=[];j=position+38;for(let i=0;i<componentsCount;i++){const component={precision:(data[j]&127)+1,isSigned:!!(data[j]&128),XRsiz:data[j+1],YRsiz:data[j+2]};j+=3,calculateComponentDimensions(component,siz),components.push(component)}context.SIZ=siz,context.components=components,calculateTileGrids(context,components),context.QCC=[],context.COC=[];break;case 65372:length=(0,_core_utils.readUint16)(data,position);const qcd={};switch(j=position+2,sqcd=data[j++],sqcd&31){case 0:spqcdSize=8,scalarExpounded=!0;break;case 1:spqcdSize=16,scalarExpounded=!1;break;case 2:spqcdSize=16,scalarExpounded=!0;break;default:throw new Error("Invalid SQcd value "+sqcd)}for(qcd.noQuantization=spqcdSize===8,qcd.scalarExpounded=scalarExpounded,qcd.guardBits=sqcd>>5,spqcds=[];j<length+position;){const spqcd={};spqcdSize===8?(spqcd.epsilon=data[j++]>>3,spqcd.mu=0):(spqcd.epsilon=data[j]>>3,spqcd.mu=(data[j]&7)<<8|data[j+1],j+=2),spqcds.push(spqcd)}qcd.SPqcds=spqcds,context.mainHeader?context.QCD=qcd:(context.currentTile.QCD=qcd,context.currentTile.QCC=[]);break;case 65373:length=(0,_core_utils.readUint16)(data,position);const qcc={};j=position+2;let cqcc;switch(context.SIZ.Csiz<257?cqcc=data[j++]:(cqcc=(0,_core_utils.readUint16)(data,j),j+=2),sqcd=data[j++],sqcd&31){case 0:spqcdSize=8,scalarExpounded=!0;break;case 1:spqcdSize=16,scalarExpounded=!1;break;case 2:spqcdSize=16,scalarExpounded=!0;break;default:throw new Error("Invalid SQcd value "+sqcd)}for(qcc.noQuantization=spqcdSize===8,qcc.scalarExpounded=scalarExpounded,qcc.guardBits=sqcd>>5,spqcds=[];j<length+position;){const spqcd={};spqcdSize===8?(spqcd.epsilon=data[j++]>>3,spqcd.mu=0):(spqcd.epsilon=data[j]>>3,spqcd.mu=(data[j]&7)<<8|data[j+1],j+=2),spqcds.push(spqcd)}qcc.SPqcds=spqcds,context.mainHeader?context.QCC[cqcc]=qcc:context.currentTile.QCC[cqcc]=qcc;break;case 65362:length=(0,_core_utils.readUint16)(data,position);const cod={};j=position+2;const scod=data[j++];cod.entropyCoderWithCustomPrecincts=!!(scod&1),cod.sopMarkerUsed=!!(scod&2),cod.ephMarkerUsed=!!(scod&4),cod.progressionOrder=data[j++],cod.layersCount=(0,_core_utils.readUint16)(data,j),j+=2,cod.multipleComponentTransform=data[j++],cod.decompositionLevelsCount=data[j++],cod.xcb=(data[j++]&15)+2,cod.ycb=(data[j++]&15)+2;const blockStyle=data[j++];if(cod.selectiveArithmeticCodingBypass=!!(blockStyle&1),cod.resetContextProbabilities=!!(blockStyle&2),cod.terminationOnEachCodingPass=!!(blockStyle&4),cod.verticallyStripe=!!(blockStyle&8),cod.predictableTermination=!!(blockStyle&16),cod.segmentationSymbolUsed=!!(blockStyle&32),cod.reversibleTransformation=data[j++],cod.entropyCoderWithCustomPrecincts){const precinctsSizes=[];for(;j<length+position;){const precinctsSize=data[j++];precinctsSizes.push({PPx:precinctsSize&15,PPy:precinctsSize>>4})}cod.precinctsSizes=precinctsSizes}const unsupported=[];cod.selectiveArithmeticCodingBypass&&unsupported.push("selectiveArithmeticCodingBypass"),cod.terminationOnEachCodingPass&&unsupported.push("terminationOnEachCodingPass"),cod.verticallyStripe&&unsupported.push("verticallyStripe"),cod.predictableTermination&&unsupported.push("predictableTermination"),unsupported.length>0&&(doNotRecover=!0,(0,_util2.warn)(`JPX: Unsupported COD options (${unsupported.join(", ")}).`)),context.mainHeader?context.COD=cod:(context.currentTile.COD=cod,context.currentTile.COC=[]);break;case 65424:length=(0,_core_utils.readUint16)(data,position),tile={},tile.index=(0,_core_utils.readUint16)(data,position+2),tile.length=(0,_core_utils.readUint32)(data,position+4),tile.dataEnd=tile.length+position-2,tile.partIndex=data[position+8],tile.partsCount=data[position+9],context.mainHeader=!1,tile.partIndex===0&&(tile.COD=context.COD,tile.COC=context.COC.slice(0),tile.QCD=context.QCD,tile.QCC=context.QCC.slice(0)),context.currentTile=tile;break;case 65427:tile=context.currentTile,tile.partIndex===0&&(initializeTile(context,tile.index),buildPackets(context)),length=tile.dataEnd-position,parseTilePackets(context,data,position,length);break;case 65363:(0,_util2.warn)("JPX: Codestream code 0xFF53 (COC) is not implemented.");case 65365:case 65367:case 65368:case 65380:length=(0,_core_utils.readUint16)(data,position);break;default:throw new Error("Unknown codestream code: "+code.toString(16))}position+=length}}catch(e){if(doNotRecover||this.failOnCorruptedImage)throw new JpxError(e.message);(0,_util2.warn)(`JPX: Trying to recover from: "${e.message}".`)}this.tiles=transformComponents(context),this.width=context.SIZ.Xsiz-context.SIZ.XOsiz,this.height=context.SIZ.Ysiz-context.SIZ.YOsiz,this.componentsCount=context.SIZ.Csiz}};__name(_JpxImage,"JpxImage");let JpxImage=_JpxImage;exports3.JpxImage=JpxImage;function calculateComponentDimensions(component,siz){component.x0=Math.ceil(siz.XOsiz/component.XRsiz),component.x1=Math.ceil(siz.Xsiz/component.XRsiz),component.y0=Math.ceil(siz.YOsiz/component.YRsiz),component.y1=Math.ceil(siz.Ysiz/component.YRsiz),component.width=component.x1-component.x0,component.height=component.y1-component.y0}__name2(calculateComponentDimensions,"calculateComponentDimensions"),__name(calculateComponentDimensions,"calculateComponentDimensions");function calculateTileGrids(context,components){const siz=context.SIZ,tiles=[];let tile;const numXtiles=Math.ceil((siz.Xsiz-siz.XTOsiz)/siz.XTsiz),numYtiles=Math.ceil((siz.Ysiz-siz.YTOsiz)/siz.YTsiz);for(let q=0;q<numYtiles;q++)for(let p=0;p<numXtiles;p++)tile={},tile.tx0=Math.max(siz.XTOsiz+p*siz.XTsiz,siz.XOsiz),tile.ty0=Math.max(siz.YTOsiz+q*siz.YTsiz,siz.YOsiz),tile.tx1=Math.min(siz.XTOsiz+(p+1)*siz.XTsiz,siz.Xsiz),tile.ty1=Math.min(siz.YTOsiz+(q+1)*siz.YTsiz,siz.Ysiz),tile.width=tile.tx1-tile.tx0,tile.height=tile.ty1-tile.ty0,tile.components=[],tiles.push(tile);context.tiles=tiles;const componentsCount=siz.Csiz;for(let i=0,ii=componentsCount;i<ii;i++){const component=components[i];for(let j=0,jj=tiles.length;j<jj;j++){const tileComponent={};tile=tiles[j],tileComponent.tcx0=Math.ceil(tile.tx0/component.XRsiz),tileComponent.tcy0=Math.ceil(tile.ty0/component.YRsiz),tileComponent.tcx1=Math.ceil(tile.tx1/component.XRsiz),tileComponent.tcy1=Math.ceil(tile.ty1/component.YRsiz),tileComponent.width=tileComponent.tcx1-tileComponent.tcx0,tileComponent.height=tileComponent.tcy1-tileComponent.tcy0,tile.components[i]=tileComponent}}}__name2(calculateTileGrids,"calculateTileGrids"),__name(calculateTileGrids,"calculateTileGrids");function getBlocksDimensions(context,component,r){const codOrCoc=component.codingStyleParameters,result={};return codOrCoc.entropyCoderWithCustomPrecincts?(result.PPx=codOrCoc.precinctsSizes[r].PPx,result.PPy=codOrCoc.precinctsSizes[r].PPy):(result.PPx=15,result.PPy=15),result.xcb_=r>0?Math.min(codOrCoc.xcb,result.PPx-1):Math.min(codOrCoc.xcb,result.PPx),result.ycb_=r>0?Math.min(codOrCoc.ycb,result.PPy-1):Math.min(codOrCoc.ycb,result.PPy),result}__name2(getBlocksDimensions,"getBlocksDimensions"),__name(getBlocksDimensions,"getBlocksDimensions");function buildPrecincts(context,resolution,dimensions){const precinctWidth=1<<dimensions.PPx,precinctHeight=1<<dimensions.PPy,isZeroRes=resolution.resLevel===0,precinctWidthInSubband=1<<dimensions.PPx+(isZeroRes?0:-1),precinctHeightInSubband=1<<dimensions.PPy+(isZeroRes?0:-1),numprecinctswide=resolution.trx1>resolution.trx0?Math.ceil(resolution.trx1/precinctWidth)-Math.floor(resolution.trx0/precinctWidth):0,numprecinctshigh=resolution.try1>resolution.try0?Math.ceil(resolution.try1/precinctHeight)-Math.floor(resolution.try0/precinctHeight):0,numprecincts=numprecinctswide*numprecinctshigh;resolution.precinctParameters={precinctWidth,precinctHeight,numprecinctswide,numprecinctshigh,numprecincts,precinctWidthInSubband,precinctHeightInSubband}}__name2(buildPrecincts,"buildPrecincts"),__name(buildPrecincts,"buildPrecincts");function buildCodeblocks(context,subband,dimensions){const xcb_=dimensions.xcb_,ycb_=dimensions.ycb_,codeblockWidth=1<<xcb_,codeblockHeight=1<<ycb_,cbx0=subband.tbx0>>xcb_,cby0=subband.tby0>>ycb_,cbx1=subband.tbx1+codeblockWidth-1>>xcb_,cby1=subband.tby1+codeblockHeight-1>>ycb_,precinctParameters=subband.resolution.precinctParameters,codeblocks=[],precincts=[];let i,j,codeblock,precinctNumber;for(j=cby0;j<cby1;j++)for(i=cbx0;i<cbx1;i++){codeblock={cbx:i,cby:j,tbx0:codeblockWidth*i,tby0:codeblockHeight*j,tbx1:codeblockWidth*(i+1),tby1:codeblockHeight*(j+1)},codeblock.tbx0_=Math.max(subband.tbx0,codeblock.tbx0),codeblock.tby0_=Math.max(subband.tby0,codeblock.tby0),codeblock.tbx1_=Math.min(subband.tbx1,codeblock.tbx1),codeblock.tby1_=Math.min(subband.tby1,codeblock.tby1);const pi=Math.floor((codeblock.tbx0_-subband.tbx0)/precinctParameters.precinctWidthInSubband),pj=Math.floor((codeblock.tby0_-subband.tby0)/precinctParameters.precinctHeightInSubband);if(precinctNumber=pi+pj*precinctParameters.numprecinctswide,codeblock.precinctNumber=precinctNumber,codeblock.subbandType=subband.type,codeblock.Lblock=3,codeblock.tbx1_<=codeblock.tbx0_||codeblock.tby1_<=codeblock.tby0_)continue;codeblocks.push(codeblock);let precinct=precincts[precinctNumber];precinct!==void 0?(i<precinct.cbxMin?precinct.cbxMin=i:i>precinct.cbxMax&&(precinct.cbxMax=i),j<precinct.cbyMin?precinct.cbxMin=j:j>precinct.cbyMax&&(precinct.cbyMax=j)):precincts[precinctNumber]=precinct={cbxMin:i,cbyMin:j,cbxMax:i,cbyMax:j},codeblock.precinct=precinct}subband.codeblockParameters={codeblockWidth:xcb_,codeblockHeight:ycb_,numcodeblockwide:cbx1-cbx0+1,numcodeblockhigh:cby1-cby0+1},subband.codeblocks=codeblocks,subband.precincts=precincts}__name2(buildCodeblocks,"buildCodeblocks"),__name(buildCodeblocks,"buildCodeblocks");function createPacket(resolution,precinctNumber,layerNumber){const precinctCodeblocks=[],subbands=resolution.subbands;for(let i=0,ii=subbands.length;i<ii;i++){const codeblocks=subbands[i].codeblocks;for(let j=0,jj=codeblocks.length;j<jj;j++){const codeblock=codeblocks[j];codeblock.precinctNumber===precinctNumber&&precinctCodeblocks.push(codeblock)}}return{layerNumber,codeblocks:precinctCodeblocks}}__name2(createPacket,"createPacket"),__name(createPacket,"createPacket");function LayerResolutionComponentPositionIterator(context){const siz=context.SIZ,tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],layersCount=tile.codingStyleDefaultParameters.layersCount,componentsCount=siz.Csiz;let maxDecompositionLevelsCount=0;for(let q=0;q<componentsCount;q++)maxDecompositionLevelsCount=Math.max(maxDecompositionLevelsCount,tile.components[q].codingStyleParameters.decompositionLevelsCount);let l=0,r=0,i=0,k=0;this.nextPacket=__name(__name2(function(){for(;l<layersCount;l++){for(;r<=maxDecompositionLevelsCount;r++){for(;i<componentsCount;i++){const component=tile.components[i];if(r>component.codingStyleParameters.decompositionLevelsCount)continue;const resolution=component.resolutions[r],numprecincts=resolution.precinctParameters.numprecincts;for(;k<numprecincts;){const packet=createPacket(resolution,k,l);return k++,packet}k=0}i=0}r=0}throw new JpxError("Out of packets")},"JpxImage_nextPacket"),"JpxImage_nextPacket")}__name2(LayerResolutionComponentPositionIterator,"LayerResolutionComponentPositionIterator"),__name(LayerResolutionComponentPositionIterator,"LayerResolutionComponentPositionIterator");function ResolutionLayerComponentPositionIterator(context){const siz=context.SIZ,tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],layersCount=tile.codingStyleDefaultParameters.layersCount,componentsCount=siz.Csiz;let maxDecompositionLevelsCount=0;for(let q=0;q<componentsCount;q++)maxDecompositionLevelsCount=Math.max(maxDecompositionLevelsCount,tile.components[q].codingStyleParameters.decompositionLevelsCount);let r=0,l=0,i=0,k=0;this.nextPacket=__name(__name2(function(){for(;r<=maxDecompositionLevelsCount;r++){for(;l<layersCount;l++){for(;i<componentsCount;i++){const component=tile.components[i];if(r>component.codingStyleParameters.decompositionLevelsCount)continue;const resolution=component.resolutions[r],numprecincts=resolution.precinctParameters.numprecincts;for(;k<numprecincts;){const packet=createPacket(resolution,k,l);return k++,packet}k=0}i=0}l=0}throw new JpxError("Out of packets")},"JpxImage_nextPacket"),"JpxImage_nextPacket")}__name2(ResolutionLayerComponentPositionIterator,"ResolutionLayerComponentPositionIterator"),__name(ResolutionLayerComponentPositionIterator,"ResolutionLayerComponentPositionIterator");function ResolutionPositionComponentLayerIterator(context){const siz=context.SIZ,tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],layersCount=tile.codingStyleDefaultParameters.layersCount,componentsCount=siz.Csiz;let l,r,c,p,maxDecompositionLevelsCount=0;for(c=0;c<componentsCount;c++){const component=tile.components[c];maxDecompositionLevelsCount=Math.max(maxDecompositionLevelsCount,component.codingStyleParameters.decompositionLevelsCount)}const maxNumPrecinctsInLevel=new Int32Array(maxDecompositionLevelsCount+1);for(r=0;r<=maxDecompositionLevelsCount;++r){let maxNumPrecincts=0;for(c=0;c<componentsCount;++c){const resolutions=tile.components[c].resolutions;r<resolutions.length&&(maxNumPrecincts=Math.max(maxNumPrecincts,resolutions[r].precinctParameters.numprecincts))}maxNumPrecinctsInLevel[r]=maxNumPrecincts}l=0,r=0,c=0,p=0,this.nextPacket=__name(__name2(function(){for(;r<=maxDecompositionLevelsCount;r++){for(;p<maxNumPrecinctsInLevel[r];p++){for(;c<componentsCount;c++){const component=tile.components[c];if(r>component.codingStyleParameters.decompositionLevelsCount)continue;const resolution=component.resolutions[r],numprecincts=resolution.precinctParameters.numprecincts;if(!(p>=numprecincts)){for(;l<layersCount;){const packet=createPacket(resolution,p,l);return l++,packet}l=0}}c=0}p=0}throw new JpxError("Out of packets")},"JpxImage_nextPacket"),"JpxImage_nextPacket")}__name2(ResolutionPositionComponentLayerIterator,"ResolutionPositionComponentLayerIterator"),__name(ResolutionPositionComponentLayerIterator,"ResolutionPositionComponentLayerIterator");function PositionComponentResolutionLayerIterator(context){const siz=context.SIZ,tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],layersCount=tile.codingStyleDefaultParameters.layersCount,componentsCount=siz.Csiz,precinctsSizes=getPrecinctSizesInImageScale(tile),precinctsIterationSizes=precinctsSizes;let l=0,r=0,c=0,px=0,py=0;this.nextPacket=__name(__name2(function(){for(;py<precinctsIterationSizes.maxNumHigh;py++){for(;px<precinctsIterationSizes.maxNumWide;px++){for(;c<componentsCount;c++){const component=tile.components[c],decompositionLevelsCount=component.codingStyleParameters.decompositionLevelsCount;for(;r<=decompositionLevelsCount;r++){const resolution=component.resolutions[r],sizeInImageScale=precinctsSizes.components[c].resolutions[r],k=getPrecinctIndexIfExist(px,py,sizeInImageScale,precinctsIterationSizes,resolution);if(k!==null){for(;l<layersCount;){const packet=createPacket(resolution,k,l);return l++,packet}l=0}}r=0}c=0}px=0}throw new JpxError("Out of packets")},"JpxImage_nextPacket"),"JpxImage_nextPacket")}__name2(PositionComponentResolutionLayerIterator,"PositionComponentResolutionLayerIterator"),__name(PositionComponentResolutionLayerIterator,"PositionComponentResolutionLayerIterator");function ComponentPositionResolutionLayerIterator(context){const siz=context.SIZ,tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],layersCount=tile.codingStyleDefaultParameters.layersCount,componentsCount=siz.Csiz,precinctsSizes=getPrecinctSizesInImageScale(tile);let l=0,r=0,c=0,px=0,py=0;this.nextPacket=__name(__name2(function(){for(;c<componentsCount;++c){const component=tile.components[c],precinctsIterationSizes=precinctsSizes.components[c],decompositionLevelsCount=component.codingStyleParameters.decompositionLevelsCount;for(;py<precinctsIterationSizes.maxNumHigh;py++){for(;px<precinctsIterationSizes.maxNumWide;px++){for(;r<=decompositionLevelsCount;r++){const resolution=component.resolutions[r],sizeInImageScale=precinctsIterationSizes.resolutions[r],k=getPrecinctIndexIfExist(px,py,sizeInImageScale,precinctsIterationSizes,resolution);if(k!==null){for(;l<layersCount;){const packet=createPacket(resolution,k,l);return l++,packet}l=0}}r=0}px=0}py=0}throw new JpxError("Out of packets")},"JpxImage_nextPacket"),"JpxImage_nextPacket")}__name2(ComponentPositionResolutionLayerIterator,"ComponentPositionResolutionLayerIterator"),__name(ComponentPositionResolutionLayerIterator,"ComponentPositionResolutionLayerIterator");function getPrecinctIndexIfExist(pxIndex,pyIndex,sizeInImageScale,precinctIterationSizes,resolution){const posX=pxIndex*precinctIterationSizes.minWidth,posY=pyIndex*precinctIterationSizes.minHeight;if(posX%sizeInImageScale.width!==0||posY%sizeInImageScale.height!==0)return null;const startPrecinctRowIndex=posY/sizeInImageScale.width*resolution.precinctParameters.numprecinctswide;return posX/sizeInImageScale.height+startPrecinctRowIndex}__name2(getPrecinctIndexIfExist,"getPrecinctIndexIfExist"),__name(getPrecinctIndexIfExist,"getPrecinctIndexIfExist");function getPrecinctSizesInImageScale(tile){const componentsCount=tile.components.length;let minWidth=Number.MAX_VALUE,minHeight=Number.MAX_VALUE,maxNumWide=0,maxNumHigh=0;const sizePerComponent=new Array(componentsCount);for(let c=0;c<componentsCount;c++){const component=tile.components[c],decompositionLevelsCount=component.codingStyleParameters.decompositionLevelsCount,sizePerResolution=new Array(decompositionLevelsCount+1);let minWidthCurrentComponent=Number.MAX_VALUE,minHeightCurrentComponent=Number.MAX_VALUE,maxNumWideCurrentComponent=0,maxNumHighCurrentComponent=0,scale=1;for(let r=decompositionLevelsCount;r>=0;--r){const resolution=component.resolutions[r],widthCurrentResolution=scale*resolution.precinctParameters.precinctWidth,heightCurrentResolution=scale*resolution.precinctParameters.precinctHeight;minWidthCurrentComponent=Math.min(minWidthCurrentComponent,widthCurrentResolution),minHeightCurrentComponent=Math.min(minHeightCurrentComponent,heightCurrentResolution),maxNumWideCurrentComponent=Math.max(maxNumWideCurrentComponent,resolution.precinctParameters.numprecinctswide),maxNumHighCurrentComponent=Math.max(maxNumHighCurrentComponent,resolution.precinctParameters.numprecinctshigh),sizePerResolution[r]={width:widthCurrentResolution,height:heightCurrentResolution},scale<<=1}minWidth=Math.min(minWidth,minWidthCurrentComponent),minHeight=Math.min(minHeight,minHeightCurrentComponent),maxNumWide=Math.max(maxNumWide,maxNumWideCurrentComponent),maxNumHigh=Math.max(maxNumHigh,maxNumHighCurrentComponent),sizePerComponent[c]={resolutions:sizePerResolution,minWidth:minWidthCurrentComponent,minHeight:minHeightCurrentComponent,maxNumWide:maxNumWideCurrentComponent,maxNumHigh:maxNumHighCurrentComponent}}return{components:sizePerComponent,minWidth,minHeight,maxNumWide,maxNumHigh}}__name2(getPrecinctSizesInImageScale,"getPrecinctSizesInImageScale"),__name(getPrecinctSizesInImageScale,"getPrecinctSizesInImageScale");function buildPackets(context){const siz=context.SIZ,tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],componentsCount=siz.Csiz;for(let c=0;c<componentsCount;c++){const component=tile.components[c],decompositionLevelsCount=component.codingStyleParameters.decompositionLevelsCount,resolutions=[],subbands=[];for(let r=0;r<=decompositionLevelsCount;r++){const blocksDimensions=getBlocksDimensions(context,component,r),resolution={},scale=1<<decompositionLevelsCount-r;resolution.trx0=Math.ceil(component.tcx0/scale),resolution.try0=Math.ceil(component.tcy0/scale),resolution.trx1=Math.ceil(component.tcx1/scale),resolution.try1=Math.ceil(component.tcy1/scale),resolution.resLevel=r,buildPrecincts(context,resolution,blocksDimensions),resolutions.push(resolution);let subband;if(r===0)subband={},subband.type="LL",subband.tbx0=Math.ceil(component.tcx0/scale),subband.tby0=Math.ceil(component.tcy0/scale),subband.tbx1=Math.ceil(component.tcx1/scale),subband.tby1=Math.ceil(component.tcy1/scale),subband.resolution=resolution,buildCodeblocks(context,subband,blocksDimensions),subbands.push(subband),resolution.subbands=[subband];else{const bscale=1<<decompositionLevelsCount-r+1,resolutionSubbands=[];subband={},subband.type="HL",subband.tbx0=Math.ceil(component.tcx0/bscale-.5),subband.tby0=Math.ceil(component.tcy0/bscale),subband.tbx1=Math.ceil(component.tcx1/bscale-.5),subband.tby1=Math.ceil(component.tcy1/bscale),subband.resolution=resolution,buildCodeblocks(context,subband,blocksDimensions),subbands.push(subband),resolutionSubbands.push(subband),subband={},subband.type="LH",subband.tbx0=Math.ceil(component.tcx0/bscale),subband.tby0=Math.ceil(component.tcy0/bscale-.5),subband.tbx1=Math.ceil(component.tcx1/bscale),subband.tby1=Math.ceil(component.tcy1/bscale-.5),subband.resolution=resolution,buildCodeblocks(context,subband,blocksDimensions),subbands.push(subband),resolutionSubbands.push(subband),subband={},subband.type="HH",subband.tbx0=Math.ceil(component.tcx0/bscale-.5),subband.tby0=Math.ceil(component.tcy0/bscale-.5),subband.tbx1=Math.ceil(component.tcx1/bscale-.5),subband.tby1=Math.ceil(component.tcy1/bscale-.5),subband.resolution=resolution,buildCodeblocks(context,subband,blocksDimensions),subbands.push(subband),resolutionSubbands.push(subband),resolution.subbands=resolutionSubbands}}component.resolutions=resolutions,component.subbands=subbands}const progressionOrder=tile.codingStyleDefaultParameters.progressionOrder;switch(progressionOrder){case 0:tile.packetsIterator=new LayerResolutionComponentPositionIterator(context);break;case 1:tile.packetsIterator=new ResolutionLayerComponentPositionIterator(context);break;case 2:tile.packetsIterator=new ResolutionPositionComponentLayerIterator(context);break;case 3:tile.packetsIterator=new PositionComponentResolutionLayerIterator(context);break;case 4:tile.packetsIterator=new ComponentPositionResolutionLayerIterator(context);break;default:throw new JpxError(`Unsupported progression order ${progressionOrder}`)}}__name2(buildPackets,"buildPackets"),__name(buildPackets,"buildPackets");function parseTilePackets(context,data,offset,dataLength){let position=0,buffer,bufferSize=0,skipNextBit=!1;function readBits(count){for(;bufferSize<count;){const b=data[offset+position];position++,skipNextBit?(buffer=buffer<<7|b,bufferSize+=7,skipNextBit=!1):(buffer=buffer<<8|b,bufferSize+=8),b===255&&(skipNextBit=!0)}return bufferSize-=count,buffer>>>bufferSize&(1<<count)-1}__name2(readBits,"readBits"),__name(readBits,"readBits");function skipMarkerIfEqual(value){return data[offset+position-1]===255&&data[offset+position]===value?(skipBytes(1),!0):data[offset+position]===255&&data[offset+position+1]===value?(skipBytes(2),!0):!1}__name2(skipMarkerIfEqual,"skipMarkerIfEqual"),__name(skipMarkerIfEqual,"skipMarkerIfEqual");function skipBytes(count){position+=count}__name2(skipBytes,"skipBytes"),__name(skipBytes,"skipBytes");function alignToByte(){bufferSize=0,skipNextBit&&(position++,skipNextBit=!1)}__name2(alignToByte,"alignToByte"),__name(alignToByte,"alignToByte");function readCodingpasses(){if(readBits(1)===0)return 1;if(readBits(1)===0)return 2;let value=readBits(2);return value<3?value+3:(value=readBits(5),value<31?value+6:(value=readBits(7),value+37))}__name2(readCodingpasses,"readCodingpasses"),__name(readCodingpasses,"readCodingpasses");const tileIndex=context.currentTile.index,tile=context.tiles[tileIndex],sopMarkerUsed=context.COD.sopMarkerUsed,ephMarkerUsed=context.COD.ephMarkerUsed,packetsIterator=tile.packetsIterator;for(;position<dataLength;){alignToByte(),sopMarkerUsed&&skipMarkerIfEqual(145)&&skipBytes(4);const packet=packetsIterator.nextPacket();if(!readBits(1))continue;const layerNumber=packet.layerNumber,queue=[];let codeblock;for(let i=0,ii=packet.codeblocks.length;i<ii;i++){codeblock=packet.codeblocks[i];let precinct=codeblock.precinct;const codeblockColumn=codeblock.cbx-precinct.cbxMin,codeblockRow=codeblock.cby-precinct.cbyMin;let codeblockIncluded=!1,firstTimeInclusion=!1,valueReady,zeroBitPlanesTree;if(codeblock.included!==void 0)codeblockIncluded=!!readBits(1);else{precinct=codeblock.precinct;let inclusionTree;if(precinct.inclusionTree!==void 0)inclusionTree=precinct.inclusionTree;else{const width=precinct.cbxMax-precinct.cbxMin+1,height=precinct.cbyMax-precinct.cbyMin+1;inclusionTree=new InclusionTree(width,height,layerNumber),zeroBitPlanesTree=new TagTree(width,height),precinct.inclusionTree=inclusionTree,precinct.zeroBitPlanesTree=zeroBitPlanesTree;for(let l=0;l<layerNumber;l++)if(readBits(1)!==0)throw new JpxError("Invalid tag tree")}if(inclusionTree.reset(codeblockColumn,codeblockRow,layerNumber))for(;;)if(readBits(1)){if(valueReady=!inclusionTree.nextLevel(),valueReady){codeblock.included=!0,codeblockIncluded=firstTimeInclusion=!0;break}}else{inclusionTree.incrementValue(layerNumber);break}}if(!codeblockIncluded)continue;if(firstTimeInclusion){for(zeroBitPlanesTree=precinct.zeroBitPlanesTree,zeroBitPlanesTree.reset(codeblockColumn,codeblockRow);;)if(readBits(1)){if(valueReady=!zeroBitPlanesTree.nextLevel(),valueReady)break}else zeroBitPlanesTree.incrementValue();codeblock.zeroBitPlanes=zeroBitPlanesTree.value}const codingpasses=readCodingpasses();for(;readBits(1);)codeblock.Lblock++;const codingpassesLog2=(0,_core_utils.log2)(codingpasses),bits=(codingpasses<1<<codingpassesLog2?codingpassesLog2-1:codingpassesLog2)+codeblock.Lblock,codedDataLength=readBits(bits);queue.push({codeblock,codingpasses,dataLength:codedDataLength})}for(alignToByte(),ephMarkerUsed&&skipMarkerIfEqual(146);queue.length>0;){const packetItem=queue.shift();codeblock=packetItem.codeblock,codeblock.data===void 0&&(codeblock.data=[]),codeblock.data.push({data,start:offset+position,end:offset+position+packetItem.dataLength,codingpasses:packetItem.codingpasses}),position+=packetItem.dataLength}}return position}__name2(parseTilePackets,"parseTilePackets"),__name(parseTilePackets,"parseTilePackets");function copyCoefficients(coefficients,levelWidth,levelHeight,subband,delta,mb,reversible,segmentationSymbolUsed,resetContextProbabilities){const x0=subband.tbx0,y0=subband.tby0,width=subband.tbx1-subband.tbx0,codeblocks=subband.codeblocks,right=subband.type.charAt(0)==="H"?1:0,bottom=subband.type.charAt(1)==="H"?levelWidth:0;for(let i=0,ii=codeblocks.length;i<ii;++i){const codeblock=codeblocks[i],blockWidth=codeblock.tbx1_-codeblock.tbx0_,blockHeight=codeblock.tby1_-codeblock.tby0_;if(blockWidth===0||blockHeight===0||codeblock.data===void 0)continue;const bitModel=new BitModel(blockWidth,blockHeight,codeblock.subbandType,codeblock.zeroBitPlanes,mb);let currentCodingpassType=2;const data=codeblock.data;let totalLength=0,codingpasses=0,j,jj,dataItem;for(j=0,jj=data.length;j<jj;j++)dataItem=data[j],totalLength+=dataItem.end-dataItem.start,codingpasses+=dataItem.codingpasses;const encodedData=new Uint8Array(totalLength);let position=0;for(j=0,jj=data.length;j<jj;j++){dataItem=data[j];const chunk=dataItem.data.subarray(dataItem.start,dataItem.end);encodedData.set(chunk,position),position+=chunk.length}const decoder=new _arithmetic_decoder.ArithmeticDecoder(encodedData,0,totalLength);for(bitModel.setDecoder(decoder),j=0;j<codingpasses;j++){switch(currentCodingpassType){case 0:bitModel.runSignificancePropagationPass();break;case 1:bitModel.runMagnitudeRefinementPass();break;case 2:bitModel.runCleanupPass(),segmentationSymbolUsed&&bitModel.checkSegmentationSymbol();break}resetContextProbabilities&&bitModel.reset(),currentCodingpassType=(currentCodingpassType+1)%3}let offset=codeblock.tbx0_-x0+(codeblock.tby0_-y0)*width;const sign=bitModel.coefficentsSign,magnitude=bitModel.coefficentsMagnitude,bitsDecoded=bitModel.bitsDecoded,magnitudeCorrection=reversible?0:.5;let k,n,nb;position=0;const interleave=subband.type!=="LL";for(j=0;j<blockHeight;j++){const levelOffset=2*(offset/width|0)*(levelWidth-width)+right+bottom;for(k=0;k<blockWidth;k++){if(n=magnitude[position],n!==0){n=(n+magnitudeCorrection)*delta,sign[position]!==0&&(n=-n),nb=bitsDecoded[position];const pos=interleave?levelOffset+(offset<<1):offset;reversible&&nb>=mb?coefficients[pos]=n:coefficients[pos]=n*(1<<mb-nb)}offset++,position++}offset+=width-blockWidth}}}__name2(copyCoefficients,"copyCoefficients"),__name(copyCoefficients,"copyCoefficients");function transformTile(context,tile,c){const component=tile.components[c],codingStyleParameters=component.codingStyleParameters,quantizationParameters=component.quantizationParameters,decompositionLevelsCount=codingStyleParameters.decompositionLevelsCount,spqcds=quantizationParameters.SPqcds,scalarExpounded=quantizationParameters.scalarExpounded,guardBits=quantizationParameters.guardBits,segmentationSymbolUsed=codingStyleParameters.segmentationSymbolUsed,resetContextProbabilities=codingStyleParameters.resetContextProbabilities,precision=context.components[c].precision,reversible=codingStyleParameters.reversibleTransformation,transform=reversible?new ReversibleTransform:new IrreversibleTransform,subbandCoefficients=[];let b=0;for(let i=0;i<=decompositionLevelsCount;i++){const resolution=component.resolutions[i],width=resolution.trx1-resolution.trx0,height=resolution.try1-resolution.try0,coefficients=new Float32Array(width*height);for(let j=0,jj=resolution.subbands.length;j<jj;j++){let mu,epsilon;scalarExpounded?(mu=spqcds[b].mu,epsilon=spqcds[b].epsilon,b++):(mu=spqcds[0].mu,epsilon=spqcds[0].epsilon+(i>0?1-i:0));const subband=resolution.subbands[j],gainLog2=SubbandsGainLog2[subband.type],delta=reversible?1:2**(precision+gainLog2-epsilon)*(1+mu/2048),mb=guardBits+epsilon-1;copyCoefficients(coefficients,width,height,subband,delta,mb,reversible,segmentationSymbolUsed,resetContextProbabilities)}subbandCoefficients.push({width,height,items:coefficients})}const result=transform.calculate(subbandCoefficients,component.tcx0,component.tcy0);return{left:component.tcx0,top:component.tcy0,width:result.width,height:result.height,items:result.items}}__name2(transformTile,"transformTile"),__name(transformTile,"transformTile");function transformComponents(context){const siz=context.SIZ,components=context.components,componentsCount=siz.Csiz,resultImages=[];for(let i=0,ii=context.tiles.length;i<ii;i++){const tile=context.tiles[i],transformedTiles=[];for(let c=0;c<componentsCount;c++)transformedTiles[c]=transformTile(context,tile,c);const tile0=transformedTiles[0],out=new Uint8ClampedArray(tile0.items.length*componentsCount),result={left:tile0.left,top:tile0.top,width:tile0.width,height:tile0.height,items:out};let shift,offset,pos=0,j,jj,y0,y1,y2;if(tile.codingStyleDefaultParameters.multipleComponentTransform){const fourComponents=componentsCount===4,y0items=transformedTiles[0].items,y1items=transformedTiles[1].items,y2items=transformedTiles[2].items,y3items=fourComponents?transformedTiles[3].items:null;shift=components[0].precision-8,offset=(128<<shift)+.5;const component0=tile.components[0],alpha01=componentsCount-3;if(jj=y0items.length,component0.codingStyleParameters.reversibleTransformation)for(j=0;j<jj;j++,pos+=alpha01){y0=y0items[j]+offset,y1=y1items[j],y2=y2items[j];const g=y0-(y2+y1>>2);out[pos++]=g+y2>>shift,out[pos++]=g>>shift,out[pos++]=g+y1>>shift}else for(j=0;j<jj;j++,pos+=alpha01)y0=y0items[j]+offset,y1=y1items[j],y2=y2items[j],out[pos++]=y0+1.402*y2>>shift,out[pos++]=y0-.34413*y1-.71414*y2>>shift,out[pos++]=y0+1.772*y1>>shift;if(fourComponents)for(j=0,pos=3;j<jj;j++,pos+=4)out[pos]=y3items[j]+offset>>shift}else for(let c=0;c<componentsCount;c++){const items=transformedTiles[c].items;for(shift=components[c].precision-8,offset=(128<<shift)+.5,pos=c,j=0,jj=items.length;j<jj;j++)out[pos]=items[j]+offset>>shift,pos+=componentsCount}resultImages.push(result)}return resultImages}__name2(transformComponents,"transformComponents"),__name(transformComponents,"transformComponents");function initializeTile(context,tileIndex){const componentsCount=context.SIZ.Csiz,tile=context.tiles[tileIndex];for(let c=0;c<componentsCount;c++){const component=tile.components[c],qcdOrQcc=context.currentTile.QCC[c]!==void 0?context.currentTile.QCC[c]:context.currentTile.QCD;component.quantizationParameters=qcdOrQcc;const codOrCoc=context.currentTile.COC[c]!==void 0?context.currentTile.COC[c]:context.currentTile.COD;component.codingStyleParameters=codOrCoc}tile.codingStyleDefaultParameters=context.currentTile.COD}__name2(initializeTile,"initializeTile"),__name(initializeTile,"initializeTile");const _TagTree=class{static{__name2(this,"_TagTree")}constructor(width,height){const levelsLength=(0,_core_utils.log2)(Math.max(width,height))+1;this.levels=[];for(let i=0;i<levelsLength;i++){const level={width,height,items:[]};this.levels.push(level),width=Math.ceil(width/2),height=Math.ceil(height/2)}}reset(i,j){let currentLevel=0,value=0,level;for(;currentLevel<this.levels.length;){level=this.levels[currentLevel];const index=i+j*level.width;if(level.items[index]!==void 0){value=level.items[index];break}level.index=index,i>>=1,j>>=1,currentLevel++}currentLevel--,level=this.levels[currentLevel],level.items[level.index]=value,this.currentLevel=currentLevel,delete this.value}incrementValue(){const level=this.levels[this.currentLevel];level.items[level.index]++}nextLevel(){let currentLevel=this.currentLevel,level=this.levels[currentLevel];const value=level.items[level.index];return currentLevel--,currentLevel<0?(this.value=value,!1):(this.currentLevel=currentLevel,level=this.levels[currentLevel],level.items[level.index]=value,!0)}};__name(_TagTree,"TagTree");let TagTree=_TagTree;const _InclusionTree=class{static{__name2(this,"_InclusionTree")}constructor(width,height,defaultValue){const levelsLength=(0,_core_utils.log2)(Math.max(width,height))+1;this.levels=[];for(let i=0;i<levelsLength;i++){const items=new Uint8Array(width*height);for(let j=0,jj=items.length;j<jj;j++)items[j]=defaultValue;const level={width,height,items};this.levels.push(level),width=Math.ceil(width/2),height=Math.ceil(height/2)}}reset(i,j,stopValue){let currentLevel=0;for(;currentLevel<this.levels.length;){const level=this.levels[currentLevel],index=i+j*level.width;level.index=index;const value=level.items[index];if(value===255)break;if(value>stopValue)return this.currentLevel=currentLevel,this.propagateValues(),!1;i>>=1,j>>=1,currentLevel++}return this.currentLevel=currentLevel-1,!0}incrementValue(stopValue){const level=this.levels[this.currentLevel];level.items[level.index]=stopValue+1,this.propagateValues()}propagateValues(){let levelIndex=this.currentLevel,level=this.levels[levelIndex];const currentValue=level.items[level.index];for(;--levelIndex>=0;)level=this.levels[levelIndex],level.items[level.index]=currentValue}nextLevel(){let currentLevel=this.currentLevel,level=this.levels[currentLevel];const value=level.items[level.index];return level.items[level.index]=255,currentLevel--,currentLevel<0?!1:(this.currentLevel=currentLevel,level=this.levels[currentLevel],level.items[level.index]=value,!0)}};__name(_InclusionTree,"InclusionTree");let InclusionTree=_InclusionTree;const BitModel=__name(__name2(function(){const LLAndLHContextsLabel=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),HLContextLabel=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),HHContextLabel=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]),_BitModel=class{static{__name2(this,"_BitModel")}constructor(width,height,subband,zeroBitPlanes,mb){this.width=width,this.height=height;let contextLabelTable;subband==="HH"?contextLabelTable=HHContextLabel:subband==="HL"?contextLabelTable=HLContextLabel:contextLabelTable=LLAndLHContextsLabel,this.contextLabelTable=contextLabelTable;const coefficientCount=width*height;this.neighborsSignificance=new Uint8Array(coefficientCount),this.coefficentsSign=new Uint8Array(coefficientCount);let coefficentsMagnitude;mb>14?coefficentsMagnitude=new Uint32Array(coefficientCount):mb>6?coefficentsMagnitude=new Uint16Array(coefficientCount):coefficentsMagnitude=new Uint8Array(coefficientCount),this.coefficentsMagnitude=coefficentsMagnitude,this.processingFlags=new Uint8Array(coefficientCount);const bitsDecoded=new Uint8Array(coefficientCount);if(zeroBitPlanes!==0)for(let i=0;i<coefficientCount;i++)bitsDecoded[i]=zeroBitPlanes;this.bitsDecoded=bitsDecoded,this.reset()}setDecoder(decoder){this.decoder=decoder}reset(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6}setNeighborsSignificance(row,column,index){const neighborsSignificance=this.neighborsSignificance,width=this.width,height=this.height,left=column>0,right=column+1<width;let i;row>0&&(i=index-width,left&&(neighborsSignificance[i-1]+=16),right&&(neighborsSignificance[i+1]+=16),neighborsSignificance[i]+=4),row+1<height&&(i=index+width,left&&(neighborsSignificance[i-1]+=16),right&&(neighborsSignificance[i+1]+=16),neighborsSignificance[i]+=4),left&&(neighborsSignificance[index-1]+=1),right&&(neighborsSignificance[index+1]+=1),neighborsSignificance[index]|=128}runSignificancePropagationPass(){const decoder=this.decoder,width=this.width,height=this.height,coefficentsMagnitude=this.coefficentsMagnitude,coefficentsSign=this.coefficentsSign,neighborsSignificance=this.neighborsSignificance,processingFlags=this.processingFlags,contexts=this.contexts,labels=this.contextLabelTable,bitsDecoded=this.bitsDecoded,processedInverseMask=-2,processedMask=1,firstMagnitudeBitMask=2;for(let i0=0;i0<height;i0+=4)for(let j=0;j<width;j++){let index=i0*width+j;for(let i1=0;i1<4;i1++,index+=width){const i=i0+i1;if(i>=height)break;if(processingFlags[index]&=processedInverseMask,coefficentsMagnitude[index]||!neighborsSignificance[index])continue;const contextLabel=labels[neighborsSignificance[index]];if(decoder.readBit(contexts,contextLabel)){const sign=this.decodeSignBit(i,j,index);coefficentsSign[index]=sign,coefficentsMagnitude[index]=1,this.setNeighborsSignificance(i,j,index),processingFlags[index]|=firstMagnitudeBitMask}bitsDecoded[index]++,processingFlags[index]|=processedMask}}}decodeSignBit(row,column,index){const width=this.width,height=this.height,coefficentsMagnitude=this.coefficentsMagnitude,coefficentsSign=this.coefficentsSign;let contribution,sign0,sign1,significance1,contextLabel,decoded;significance1=column>0&&coefficentsMagnitude[index-1]!==0,column+1<width&&coefficentsMagnitude[index+1]!==0?(sign1=coefficentsSign[index+1],significance1?(sign0=coefficentsSign[index-1],contribution=1-sign1-sign0):contribution=1-sign1-sign1):significance1?(sign0=coefficentsSign[index-1],contribution=1-sign0-sign0):contribution=0;const horizontalContribution=3*contribution;return significance1=row>0&&coefficentsMagnitude[index-width]!==0,row+1<height&&coefficentsMagnitude[index+width]!==0?(sign1=coefficentsSign[index+width],significance1?(sign0=coefficentsSign[index-width],contribution=1-sign1-sign0+horizontalContribution):contribution=1-sign1-sign1+horizontalContribution):significance1?(sign0=coefficentsSign[index-width],contribution=1-sign0-sign0+horizontalContribution):contribution=horizontalContribution,contribution>=0?(contextLabel=9+contribution,decoded=this.decoder.readBit(this.contexts,contextLabel)):(contextLabel=9-contribution,decoded=this.decoder.readBit(this.contexts,contextLabel)^1),decoded}runMagnitudeRefinementPass(){const decoder=this.decoder,width=this.width,height=this.height,coefficentsMagnitude=this.coefficentsMagnitude,neighborsSignificance=this.neighborsSignificance,contexts=this.contexts,bitsDecoded=this.bitsDecoded,processingFlags=this.processingFlags,processedMask=1,firstMagnitudeBitMask=2,length=width*height,width4=width*4;for(let index0=0,indexNext;index0<length;index0=indexNext){indexNext=Math.min(length,index0+width4);for(let j=0;j<width;j++)for(let index=index0+j;index<indexNext;index+=width){if(!coefficentsMagnitude[index]||processingFlags[index]&processedMask)continue;let contextLabel=16;processingFlags[index]&firstMagnitudeBitMask&&(processingFlags[index]^=firstMagnitudeBitMask,contextLabel=(neighborsSignificance[index]&127)===0?15:14);const bit=decoder.readBit(contexts,contextLabel);coefficentsMagnitude[index]=coefficentsMagnitude[index]<<1|bit,bitsDecoded[index]++,processingFlags[index]|=processedMask}}}runCleanupPass(){const decoder=this.decoder,width=this.width,height=this.height,neighborsSignificance=this.neighborsSignificance,coefficentsMagnitude=this.coefficentsMagnitude,coefficentsSign=this.coefficentsSign,contexts=this.contexts,labels=this.contextLabelTable,bitsDecoded=this.bitsDecoded,processingFlags=this.processingFlags,processedMask=1,firstMagnitudeBitMask=2,oneRowDown=width,twoRowsDown=width*2,threeRowsDown=width*3;let iNext;for(let i0=0;i0<height;i0=iNext){iNext=Math.min(i0+4,height);const indexBase=i0*width,checkAllEmpty=i0+3<height;for(let j=0;j<width;j++){const index0=indexBase+j,allEmpty=checkAllEmpty&&processingFlags[index0]===0&&processingFlags[index0+oneRowDown]===0&&processingFlags[index0+twoRowsDown]===0&&processingFlags[index0+threeRowsDown]===0&&neighborsSignificance[index0]===0&&neighborsSignificance[index0+oneRowDown]===0&&neighborsSignificance[index0+twoRowsDown]===0&&neighborsSignificance[index0+threeRowsDown]===0;let i1=0,index=index0,i=i0,sign;if(allEmpty){if(!decoder.readBit(contexts,18)){bitsDecoded[index0]++,bitsDecoded[index0+oneRowDown]++,bitsDecoded[index0+twoRowsDown]++,bitsDecoded[index0+threeRowsDown]++;continue}i1=decoder.readBit(contexts,17)<<1|decoder.readBit(contexts,17),i1!==0&&(i=i0+i1,index+=i1*width),sign=this.decodeSignBit(i,j,index),coefficentsSign[index]=sign,coefficentsMagnitude[index]=1,this.setNeighborsSignificance(i,j,index),processingFlags[index]|=firstMagnitudeBitMask,index=index0;for(let i2=i0;i2<=i;i2++,index+=width)bitsDecoded[index]++;i1++}for(i=i0+i1;i<iNext;i++,index+=width){if(coefficentsMagnitude[index]||processingFlags[index]&processedMask)continue;const contextLabel=labels[neighborsSignificance[index]];decoder.readBit(contexts,contextLabel)===1&&(sign=this.decodeSignBit(i,j,index),coefficentsSign[index]=sign,coefficentsMagnitude[index]=1,this.setNeighborsSignificance(i,j,index),processingFlags[index]|=firstMagnitudeBitMask),bitsDecoded[index]++}}}}checkSegmentationSymbol(){const decoder=this.decoder,contexts=this.contexts;if((decoder.readBit(contexts,17)<<3|decoder.readBit(contexts,17)<<2|decoder.readBit(contexts,17)<<1|decoder.readBit(contexts,17))!==10)throw new JpxError("Invalid segmentation symbol")}};return __name(_BitModel,"BitModel"),_BitModel},"BitModelClosure"),"BitModelClosure")(),_Transform=class _Transform2{static{__name2(this,"_Transform")}constructor(){this.constructor===_Transform2&&(0,_util2.unreachable)("Cannot initialize Transform.")}calculate(subbands,u0,v0){let ll=subbands[0];for(let i=1,ii=subbands.length;i<ii;i++)ll=this.iterate(ll,subbands[i],u0,v0);return ll}extend(buffer,offset,size){let i1=offset-1,j1=offset+1,i2=offset+size-2,j2=offset+size;buffer[i1--]=buffer[j1++],buffer[j2++]=buffer[i2--],buffer[i1--]=buffer[j1++],buffer[j2++]=buffer[i2--],buffer[i1--]=buffer[j1++],buffer[j2++]=buffer[i2--],buffer[i1]=buffer[j1],buffer[j2]=buffer[i2]}filter(x,offset,length){(0,_util2.unreachable)("Abstract method `filter` called")}iterate(ll,hl_lh_hh,u0,v0){const llWidth=ll.width,llHeight=ll.height;let llItems=ll.items;const width=hl_lh_hh.width,height=hl_lh_hh.height,items=hl_lh_hh.items;let i,j,k,l,u,v;for(k=0,i=0;i<llHeight;i++)for(l=i*2*width,j=0;j<llWidth;j++,k++,l+=2)items[l]=llItems[k];llItems=ll.items=null;const bufferPadding=4,rowBuffer=new Float32Array(width+2*bufferPadding);if(width===1){if(u0&1)for(v=0,k=0;v<height;v++,k+=width)items[k]*=.5}else for(v=0,k=0;v<height;v++,k+=width)rowBuffer.set(items.subarray(k,k+width),bufferPadding),this.extend(rowBuffer,bufferPadding,width),this.filter(rowBuffer,bufferPadding,width),items.set(rowBuffer.subarray(bufferPadding,bufferPadding+width),k);let numBuffers=16;const colBuffers=[];for(i=0;i<numBuffers;i++)colBuffers.push(new Float32Array(height+2*bufferPadding));let b,currentBuffer=0;if(ll=bufferPadding+height,height===1){if(v0&1)for(u=0;u<width;u++)items[u]*=.5}else for(u=0;u<width;u++){if(currentBuffer===0){for(numBuffers=Math.min(width-u,numBuffers),k=u,l=bufferPadding;l<ll;k+=width,l++)for(b=0;b<numBuffers;b++)colBuffers[b][l]=items[k+b];currentBuffer=numBuffers}currentBuffer--;const buffer=colBuffers[currentBuffer];if(this.extend(buffer,bufferPadding,height),this.filter(buffer,bufferPadding,height),currentBuffer===0)for(k=u-numBuffers+1,l=bufferPadding;l<ll;k+=width,l++)for(b=0;b<numBuffers;b++)items[k+b]=colBuffers[b][l]}return{width,height,items}}};__name(_Transform,"Transform");let Transform=_Transform;const _IrreversibleTransform=class extends Transform{static{__name2(this,"_IrreversibleTransform")}filter(x,offset,length){const len=length>>1;offset|=0;let j,n,current,next;const alpha=-1.586134342059924,beta=-.052980118572961,gamma=.882911075530934,delta=.443506852043971,K=1.230174104914001,K_=1/K;for(j=offset-3,n=len+4;n--;j+=2)x[j]*=K_;for(j=offset-2,current=delta*x[j-1],n=len+3;n--&&(next=delta*x[j+1],x[j]=K*x[j]-current-next,n--);j+=2)j+=2,current=delta*x[j+1],x[j]=K*x[j]-current-next;for(j=offset-1,current=gamma*x[j-1],n=len+2;n--&&(next=gamma*x[j+1],x[j]-=current+next,n--);j+=2)j+=2,current=gamma*x[j+1],x[j]-=current+next;for(j=offset,current=beta*x[j-1],n=len+1;n--&&(next=beta*x[j+1],x[j]-=current+next,n--);j+=2)j+=2,current=beta*x[j+1],x[j]-=current+next;if(len!==0)for(j=offset+1,current=alpha*x[j-1],n=len;n--&&(next=alpha*x[j+1],x[j]-=current+next,n--);j+=2)j+=2,current=alpha*x[j+1],x[j]-=current+next}};__name(_IrreversibleTransform,"IrreversibleTransform");let IrreversibleTransform=_IrreversibleTransform;const _ReversibleTransform=class extends Transform{static{__name2(this,"_ReversibleTransform")}filter(x,offset,length){const len=length>>1;offset|=0;let j,n;for(j=offset,n=len+1;n--;j+=2)x[j]-=x[j-1]+x[j+1]+2>>2;for(j=offset+1,n=len;n--;j+=2)x[j]+=x[j-1]+x[j+1]>>1}};__name(_ReversibleTransform,"ReversibleTransform");let ReversibleTransform=_ReversibleTransform},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.LZWStream=void 0;var _decode_stream=__w_pdfjs_require__3(19);const _LZWStream=class extends _decode_stream.DecodeStream{static{__name2(this,"_LZWStream")}constructor(str,maybeLength,earlyChange){super(maybeLength),this.str=str,this.dict=str.dict,this.cachedData=0,this.bitsCached=0;const maxLzwDictionarySize=4096,lzwState={earlyChange,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(maxLzwDictionarySize),dictionaryLengths:new Uint16Array(maxLzwDictionarySize),dictionaryPrevCodes:new Uint16Array(maxLzwDictionarySize),currentSequence:new Uint8Array(maxLzwDictionarySize),currentSequenceLength:0};for(let i=0;i<256;++i)lzwState.dictionaryValues[i]=i,lzwState.dictionaryLengths[i]=1;this.lzwState=lzwState}readBits(n){let bitsCached=this.bitsCached,cachedData=this.cachedData;for(;bitsCached<n;){const c=this.str.getByte();if(c===-1)return this.eof=!0,null;cachedData=cachedData<<8|c,bitsCached+=8}return this.bitsCached=bitsCached-=n,this.cachedData=cachedData,this.lastCode=null,cachedData>>>bitsCached&(1<<n)-1}readBlock(){let estimatedDecodedSize=1024,i,j,q;const lzwState=this.lzwState;if(!lzwState)return;const earlyChange=lzwState.earlyChange;let nextCode=lzwState.nextCode;const dictionaryValues=lzwState.dictionaryValues,dictionaryLengths=lzwState.dictionaryLengths,dictionaryPrevCodes=lzwState.dictionaryPrevCodes;let codeLength=lzwState.codeLength,prevCode=lzwState.prevCode;const currentSequence=lzwState.currentSequence;let currentSequenceLength=lzwState.currentSequenceLength,decodedLength=0,currentBufferLength=this.bufferLength,buffer=this.ensureBuffer(this.bufferLength+estimatedDecodedSize);for(i=0;i<512;i++){const code=this.readBits(codeLength),hasPrev=currentSequenceLength>0;if(code<256)currentSequence[0]=code,currentSequenceLength=1;else if(code>=258)if(code<nextCode)for(currentSequenceLength=dictionaryLengths[code],j=currentSequenceLength-1,q=code;j>=0;j--)currentSequence[j]=dictionaryValues[q],q=dictionaryPrevCodes[q];else currentSequence[currentSequenceLength++]=currentSequence[0];else if(code===256){codeLength=9,nextCode=258,currentSequenceLength=0;continue}else{this.eof=!0,delete this.lzwState;break}if(hasPrev&&(dictionaryPrevCodes[nextCode]=prevCode,dictionaryLengths[nextCode]=dictionaryLengths[prevCode]+1,dictionaryValues[nextCode]=currentSequence[0],nextCode++,codeLength=nextCode+earlyChange&nextCode+earlyChange-1?codeLength:Math.min(Math.log(nextCode+earlyChange)/.6931471805599453+1,12)|0),prevCode=code,decodedLength+=currentSequenceLength,estimatedDecodedSize<decodedLength){do estimatedDecodedSize+=512;while(estimatedDecodedSize<decodedLength);buffer=this.ensureBuffer(this.bufferLength+estimatedDecodedSize)}for(j=0;j<currentSequenceLength;j++)buffer[currentBufferLength++]=currentSequence[j]}lzwState.nextCode=nextCode,lzwState.codeLength=codeLength,lzwState.prevCode=prevCode,lzwState.currentSequenceLength=currentSequenceLength,this.bufferLength=currentBufferLength}};__name(_LZWStream,"LZWStream");let LZWStream=_LZWStream;exports3.LZWStream=LZWStream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.PredictorStream=void 0;var _decode_stream=__w_pdfjs_require__3(19),_primitives=__w_pdfjs_require__3(5),_util2=__w_pdfjs_require__3(2);const _PredictorStream=class extends _decode_stream.DecodeStream{static{__name2(this,"_PredictorStream")}constructor(str,maybeLength,params){if(super(maybeLength),!(params instanceof _primitives.Dict))return str;const predictor=this.predictor=params.get("Predictor")||1;if(predictor<=1)return str;if(predictor!==2&&(predictor<10||predictor>15))throw new _util2.FormatError(`Unsupported predictor: ${predictor}`);predictor===2?this.readBlock=this.readBlockTiff:this.readBlock=this.readBlockPng,this.str=str,this.dict=str.dict;const colors=this.colors=params.get("Colors")||1,bits=this.bits=params.get("BPC","BitsPerComponent")||8,columns=this.columns=params.get("Columns")||1;return this.pixBytes=colors*bits+7>>3,this.rowBytes=columns*colors*bits+7>>3,this}readBlockTiff(){const rowBytes=this.rowBytes,bufferLength=this.bufferLength,buffer=this.ensureBuffer(bufferLength+rowBytes),bits=this.bits,colors=this.colors,rawBytes=this.str.getBytes(rowBytes);if(this.eof=!rawBytes.length,this.eof)return;let inbuf=0,outbuf=0,inbits=0,outbits=0,pos=bufferLength,i;if(bits===1&&colors===1)for(i=0;i<rowBytes;++i){let c=rawBytes[i]^inbuf;c^=c>>1,c^=c>>2,c^=c>>4,inbuf=(c&1)<<7,buffer[pos++]=c}else if(bits===8){for(i=0;i<colors;++i)buffer[pos++]=rawBytes[i];for(;i<rowBytes;++i)buffer[pos]=buffer[pos-colors]+rawBytes[i],pos++}else if(bits===16){const bytesPerPixel=colors*2;for(i=0;i<bytesPerPixel;++i)buffer[pos++]=rawBytes[i];for(;i<rowBytes;i+=2){const sum=((rawBytes[i]&255)<<8)+(rawBytes[i+1]&255)+((buffer[pos-bytesPerPixel]&255)<<8)+(buffer[pos-bytesPerPixel+1]&255);buffer[pos++]=sum>>8&255,buffer[pos++]=sum&255}}else{const compArray=new Uint8Array(colors+1),bitMask=(1<<bits)-1;let j=0,k=bufferLength;const columns=this.columns;for(i=0;i<columns;++i)for(let kk=0;kk<colors;++kk)inbits<bits&&(inbuf=inbuf<<8|rawBytes[j++]&255,inbits+=8),compArray[kk]=compArray[kk]+(inbuf>>inbits-bits)&bitMask,inbits-=bits,outbuf=outbuf<<bits|compArray[kk],outbits+=bits,outbits>=8&&(buffer[k++]=outbuf>>outbits-8&255,outbits-=8);outbits>0&&(buffer[k++]=(outbuf<<8-outbits)+(inbuf&(1<<8-outbits)-1))}this.bufferLength+=rowBytes}readBlockPng(){const rowBytes=this.rowBytes,pixBytes=this.pixBytes,predictor=this.str.getByte(),rawBytes=this.str.getBytes(rowBytes);if(this.eof=!rawBytes.length,this.eof)return;const bufferLength=this.bufferLength,buffer=this.ensureBuffer(bufferLength+rowBytes);let prevRow=buffer.subarray(bufferLength-rowBytes,bufferLength);prevRow.length===0&&(prevRow=new Uint8Array(rowBytes));let i,j=bufferLength,up,c;switch(predictor){case 0:for(i=0;i<rowBytes;++i)buffer[j++]=rawBytes[i];break;case 1:for(i=0;i<pixBytes;++i)buffer[j++]=rawBytes[i];for(;i<rowBytes;++i)buffer[j]=buffer[j-pixBytes]+rawBytes[i]&255,j++;break;case 2:for(i=0;i<rowBytes;++i)buffer[j++]=prevRow[i]+rawBytes[i]&255;break;case 3:for(i=0;i<pixBytes;++i)buffer[j++]=(prevRow[i]>>1)+rawBytes[i];for(;i<rowBytes;++i)buffer[j]=(prevRow[i]+buffer[j-pixBytes]>>1)+rawBytes[i]&255,j++;break;case 4:for(i=0;i<pixBytes;++i)up=prevRow[i],c=rawBytes[i],buffer[j++]=up+c;for(;i<rowBytes;++i){up=prevRow[i];const upLeft=prevRow[i-pixBytes],left=buffer[j-pixBytes],p=left+up-upLeft;let pa=p-left;pa<0&&(pa=-pa);let pb=p-up;pb<0&&(pb=-pb);let pc=p-upLeft;pc<0&&(pc=-pc),c=rawBytes[i],pa<=pb&&pa<=pc?buffer[j++]=left+c:pb<=pc?buffer[j++]=up+c:buffer[j++]=upLeft+c}break;default:throw new _util2.FormatError(`Unsupported predictor: ${predictor}`)}this.bufferLength+=rowBytes}};__name(_PredictorStream,"PredictorStream");let PredictorStream=_PredictorStream;exports3.PredictorStream=PredictorStream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.RunLengthStream=void 0;var _decode_stream=__w_pdfjs_require__3(19);const _RunLengthStream=class extends _decode_stream.DecodeStream{static{__name2(this,"_RunLengthStream")}constructor(str,maybeLength){super(maybeLength),this.str=str,this.dict=str.dict}readBlock(){const repeatHeader=this.str.getBytes(2);if(!repeatHeader||repeatHeader.length<2||repeatHeader[0]===128){this.eof=!0;return}let buffer,bufferLength=this.bufferLength,n=repeatHeader[0];if(n<128){if(buffer=this.ensureBuffer(bufferLength+n+1),buffer[bufferLength++]=repeatHeader[1],n>0){const source=this.str.getBytes(n);buffer.set(source,bufferLength),bufferLength+=n}}else{n=257-n;const b=repeatHeader[1];buffer=this.ensureBuffer(bufferLength+n+1);for(let i=0;i<n;i++)buffer[bufferLength++]=b}this.bufferLength=bufferLength}};__name(_RunLengthStream,"RunLengthStream");let RunLengthStream=_RunLengthStream;exports3.RunLengthStream=RunLengthStream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.Font=exports3.ErrorFont=void 0;var _util2=__w_pdfjs_require__3(2),_cff_parser=__w_pdfjs_require__3(35),_fonts_utils=__w_pdfjs_require__3(38),_unicode=__w_pdfjs_require__3(40),_glyphlist=__w_pdfjs_require__3(39),_encodings=__w_pdfjs_require__3(37),_standard_fonts=__w_pdfjs_require__3(41),_to_unicode_map=__w_pdfjs_require__3(42),_cff_font=__w_pdfjs_require__3(43),_font_renderer=__w_pdfjs_require__3(44),_metrics=__w_pdfjs_require__3(45),_glyf=__w_pdfjs_require__3(46),_cmap=__w_pdfjs_require__3(16),_opentype_file_builder=__w_pdfjs_require__3(47),_core_utils=__w_pdfjs_require__3(6),_stream=__w_pdfjs_require__3(10),_type1_font=__w_pdfjs_require__3(48);const PRIVATE_USE_AREAS=[[57344,63743],[1048576,1114109]],PDF_GLYPH_SPACE_UNITS=1e3,EXPORT_DATA_PROPERTIES=["ascent","bbox","black","bold","charProcOperatorList","composite","cssFontInfo","data","defaultVMetrics","defaultWidth","descent","fallbackName","fontMatrix","fontType","isType3Font","italic","loadedName","mimetype","missingFile","name","remeasure","subtype","type","vertical"],EXPORT_DATA_EXTRA_PROPERTIES=["cMap","defaultEncoding","differences","isMonospace","isSerifFont","isSymbolicFont","seacMap","toFontChar","toUnicode","vmetrics","widths"];function adjustWidths(properties){if(!properties.fontMatrix||properties.fontMatrix[0]===_util2.FONT_IDENTITY_MATRIX[0])return;const scale=.001/properties.fontMatrix[0],glyphsWidths=properties.widths;for(const glyph in glyphsWidths)glyphsWidths[glyph]*=scale;properties.defaultWidth*=scale}__name2(adjustWidths,"adjustWidths"),__name(adjustWidths,"adjustWidths");function adjustToUnicode(properties,builtInEncoding){if(properties.isInternalFont||builtInEncoding===properties.defaultEncoding||properties.toUnicode instanceof _to_unicode_map.IdentityToUnicodeMap)return;const toUnicode=[],glyphsUnicodeMap=(0,_glyphlist.getGlyphsUnicode)();for(const charCode in builtInEncoding){if(properties.hasIncludedToUnicodeMap){if(properties.toUnicode.has(charCode))continue}else if(properties.hasEncoding&&(properties.differences.length===0||properties.differences[charCode]!==void 0))continue;const glyphName=builtInEncoding[charCode],unicode=(0,_unicode.getUnicodeForGlyph)(glyphName,glyphsUnicodeMap);unicode!==-1&&(toUnicode[charCode]=String.fromCharCode(unicode))}toUnicode.length>0&&properties.toUnicode.amend(toUnicode)}__name2(adjustToUnicode,"adjustToUnicode"),__name(adjustToUnicode,"adjustToUnicode");function amendFallbackToUnicode(properties){if(!properties.fallbackToUnicode||properties.toUnicode instanceof _to_unicode_map.IdentityToUnicodeMap)return;const toUnicode=[];for(const charCode in properties.fallbackToUnicode)properties.toUnicode.has(charCode)||(toUnicode[charCode]=properties.fallbackToUnicode[charCode]);toUnicode.length>0&&properties.toUnicode.amend(toUnicode)}__name2(amendFallbackToUnicode,"amendFallbackToUnicode"),__name(amendFallbackToUnicode,"amendFallbackToUnicode");const _Glyph=class{static{__name2(this,"_Glyph")}constructor(originalCharCode,fontChar,unicode,accent,width,vmetric,operatorListId,isSpace,isInFont){this.originalCharCode=originalCharCode,this.fontChar=fontChar,this.unicode=unicode,this.accent=accent,this.width=width,this.vmetric=vmetric,this.operatorListId=operatorListId,this.isSpace=isSpace,this.isInFont=isInFont;const category=(0,_unicode.getCharUnicodeCategory)(unicode);this.isWhitespace=category.isWhitespace,this.isZeroWidthDiacritic=category.isZeroWidthDiacritic,this.isInvisibleFormatMark=category.isInvisibleFormatMark}matchesForCache(originalCharCode,fontChar,unicode,accent,width,vmetric,operatorListId,isSpace,isInFont){return this.originalCharCode===originalCharCode&&this.fontChar===fontChar&&this.unicode===unicode&&this.accent===accent&&this.width===width&&this.vmetric===vmetric&&this.operatorListId===operatorListId&&this.isSpace===isSpace&&this.isInFont===isInFont}};__name(_Glyph,"Glyph");let Glyph=_Glyph;function int16(b0,b1){return(b0<<8)+b1}__name2(int16,"int16"),__name(int16,"int16");function writeSignedInt16(bytes,index,value){bytes[index+1]=value,bytes[index]=value>>>8}__name2(writeSignedInt16,"writeSignedInt16"),__name(writeSignedInt16,"writeSignedInt16");function signedInt16(b0,b1){const value=(b0<<8)+b1;return value&32768?value-65536:value}__name2(signedInt16,"signedInt16"),__name(signedInt16,"signedInt16");function int32(b0,b1,b2,b3){return(b0<<24)+(b1<<16)+(b2<<8)+b3}__name2(int32,"int32"),__name(int32,"int32");function string16(value){return String.fromCharCode(value>>8&255,value&255)}__name2(string16,"string16"),__name(string16,"string16");function safeString16(value){return value>32767?value=32767:value<-32768&&(value=-32768),String.fromCharCode(value>>8&255,value&255)}__name2(safeString16,"safeString16"),__name(safeString16,"safeString16");function isTrueTypeFile(file){const header=file.peekBytes(4);return(0,_core_utils.readUint32)(header,0)===65536||(0,_util2.bytesToString)(header)==="true"}__name2(isTrueTypeFile,"isTrueTypeFile"),__name(isTrueTypeFile,"isTrueTypeFile");function isTrueTypeCollectionFile(file){const header=file.peekBytes(4);return(0,_util2.bytesToString)(header)==="ttcf"}__name2(isTrueTypeCollectionFile,"isTrueTypeCollectionFile"),__name(isTrueTypeCollectionFile,"isTrueTypeCollectionFile");function isOpenTypeFile(file){const header=file.peekBytes(4);return(0,_util2.bytesToString)(header)==="OTTO"}__name2(isOpenTypeFile,"isOpenTypeFile"),__name(isOpenTypeFile,"isOpenTypeFile");function isType1File(file){const header=file.peekBytes(2);return header[0]===37&&header[1]===33||header[0]===128&&header[1]===1}__name2(isType1File,"isType1File"),__name(isType1File,"isType1File");function isCFFFile(file){const header=file.peekBytes(4);return header[0]>=1&&header[3]>=1&&header[3]<=4}__name2(isCFFFile,"isCFFFile"),__name(isCFFFile,"isCFFFile");function getFontFileType(file,{type,subtype,composite}){let fileType,fileSubtype;return isTrueTypeFile(file)||isTrueTypeCollectionFile(file)?composite?fileType="CIDFontType2":fileType="TrueType":isOpenTypeFile(file)?composite?fileType="CIDFontType2":fileType="OpenType":isType1File(file)?composite?fileType="CIDFontType0":fileType=type==="MMType1"?"MMType1":"Type1":isCFFFile(file)?composite?(fileType="CIDFontType0",fileSubtype="CIDFontType0C"):(fileType=type==="MMType1"?"MMType1":"Type1",fileSubtype="Type1C"):((0,_util2.warn)("getFontFileType: Unable to detect correct font file Type/Subtype."),fileType=type,fileSubtype=subtype),[fileType,fileSubtype]}__name2(getFontFileType,"getFontFileType"),__name(getFontFileType,"getFontFileType");function applyStandardFontGlyphMap(map,glyphMap){for(const charCode in glyphMap)map[+charCode]=glyphMap[charCode]}__name2(applyStandardFontGlyphMap,"applyStandardFontGlyphMap"),__name(applyStandardFontGlyphMap,"applyStandardFontGlyphMap");function buildToFontChar(encoding,glyphsUnicodeMap,differences){const toFontChar=[];let unicode;for(let i=0,ii=encoding.length;i<ii;i++)unicode=(0,_unicode.getUnicodeForGlyph)(encoding[i],glyphsUnicodeMap),unicode!==-1&&(toFontChar[i]=unicode);for(const charCode in differences)unicode=(0,_unicode.getUnicodeForGlyph)(differences[charCode],glyphsUnicodeMap),unicode!==-1&&(toFontChar[+charCode]=unicode);return toFontChar}__name2(buildToFontChar,"buildToFontChar"),__name(buildToFontChar,"buildToFontChar");function convertCidString(charCode,cid,shouldThrow=!1){switch(cid.length){case 1:return cid.charCodeAt(0);case 2:return cid.charCodeAt(0)<<8|cid.charCodeAt(1)}const msg=`Unsupported CID string (charCode ${charCode}): "${cid}".`;if(shouldThrow)throw new _util2.FormatError(msg);return(0,_util2.warn)(msg),cid}__name2(convertCidString,"convertCidString"),__name(convertCidString,"convertCidString");function adjustMapping(charCodeToGlyphId,hasGlyph,newGlyphZeroId,toUnicode){const newMap=Object.create(null),toUnicodeExtraMap=new Map,toFontChar=[],usedGlyphIds=new Set;let privateUseAreaIndex=0;const privateUseOffetStart=PRIVATE_USE_AREAS[privateUseAreaIndex][0];let nextAvailableFontCharCode=privateUseOffetStart,privateUseOffetEnd=PRIVATE_USE_AREAS[privateUseAreaIndex][1];for(let originalCharCode in charCodeToGlyphId){originalCharCode|=0;let glyphId=charCodeToGlyphId[originalCharCode];if(!hasGlyph(glyphId))continue;if(nextAvailableFontCharCode>privateUseOffetEnd){if(privateUseAreaIndex++,privateUseAreaIndex>=PRIVATE_USE_AREAS.length){(0,_util2.warn)("Ran out of space in font private use area.");break}nextAvailableFontCharCode=PRIVATE_USE_AREAS[privateUseAreaIndex][0],privateUseOffetEnd=PRIVATE_USE_AREAS[privateUseAreaIndex][1]}const fontCharCode=nextAvailableFontCharCode++;glyphId===0&&(glyphId=newGlyphZeroId);let unicode=toUnicode.get(originalCharCode);typeof unicode=="string"&&(unicode=unicode.codePointAt(0)),unicode&&unicode<privateUseOffetStart&&!usedGlyphIds.has(glyphId)&&(toUnicodeExtraMap.set(unicode,glyphId),usedGlyphIds.add(glyphId)),newMap[fontCharCode]=glyphId,toFontChar[originalCharCode]=fontCharCode}return{toFontChar,charCodeToGlyphId:newMap,toUnicodeExtraMap,nextAvailableFontCharCode}}__name2(adjustMapping,"adjustMapping"),__name(adjustMapping,"adjustMapping");function getRanges(glyphs,toUnicodeExtraMap,numGlyphs){const codes=[];for(const charCode in glyphs)glyphs[charCode]>=numGlyphs||codes.push({fontCharCode:charCode|0,glyphId:glyphs[charCode]});if(toUnicodeExtraMap)for(const[unicode,glyphId]of toUnicodeExtraMap)glyphId>=numGlyphs||codes.push({fontCharCode:unicode,glyphId});codes.length===0&&codes.push({fontCharCode:0,glyphId:0}),codes.sort(__name(__name2(function(a,b){return a.fontCharCode-b.fontCharCode},"fontGetRangesSort"),"fontGetRangesSort"));const ranges=[],length=codes.length;for(let n=0;n<length;){const start=codes[n].fontCharCode,codeIndices=[codes[n].glyphId];++n;let end=start;for(;n<length&&end+1===codes[n].fontCharCode&&(codeIndices.push(codes[n].glyphId),++end,++n,end!==65535););ranges.push([start,end,codeIndices])}return ranges}__name2(getRanges,"getRanges"),__name(getRanges,"getRanges");function createCmapTable(glyphs,toUnicodeExtraMap,numGlyphs){const ranges=getRanges(glyphs,toUnicodeExtraMap,numGlyphs),numTables=ranges.at(-1)[1]>65535?2:1;let cmap="\0\0"+string16(numTables)+"\0\0"+(0,_util2.string32)(4+numTables*8),i,ii,j,jj;for(i=ranges.length-1;i>=0&&!(ranges[i][0]<=65535);--i);const bmpLength=i+1;ranges[i][0]<65535&&ranges[i][1]===65535&&(ranges[i][1]=65534);const trailingRangesCount=ranges[i][1]<65535?1:0,segCount=bmpLength+trailingRangesCount,searchParams=_opentype_file_builder.OpenTypeFileBuilder.getSearchParams(segCount,2);let startCount="",endCount="",idDeltas="",idRangeOffsets="",glyphsIds="",bias=0,range,start,end,codes;for(i=0,ii=bmpLength;i<ii;i++){range=ranges[i],start=range[0],end=range[1],startCount+=string16(start),endCount+=string16(end),codes=range[2];let contiguous=!0;for(j=1,jj=codes.length;j<jj;++j)if(codes[j]!==codes[j-1]+1){contiguous=!1;break}if(contiguous){const startCode=codes[0];idDeltas+=string16(startCode-start&65535),idRangeOffsets+=string16(0)}else{const offset=(segCount-i)*2+bias*2;for(bias+=end-start+1,idDeltas+=string16(0),idRangeOffsets+=string16(offset),j=0,jj=codes.length;j<jj;++j)glyphsIds+=string16(codes[j])}}trailingRangesCount>0&&(endCount+="\xFF\xFF",startCount+="\xFF\xFF",idDeltas+="\0",idRangeOffsets+="\0\0");const format314="\0\0"+string16(2*segCount)+string16(searchParams.range)+string16(searchParams.entry)+string16(searchParams.rangeShift)+endCount+"\0\0"+startCount+idDeltas+idRangeOffsets+glyphsIds;let format31012="",header31012="";if(numTables>1){for(cmap+=`\0\0
`+(0,_util2.string32)(4+numTables*8+4+format314.length),format31012="",i=0,ii=ranges.length;i<ii;i++){range=ranges[i],start=range[0],codes=range[2];let code=codes[0];for(j=1,jj=codes.length;j<jj;++j)codes[j]!==codes[j-1]+1&&(end=range[0]+j-1,format31012+=(0,_util2.string32)(start)+(0,_util2.string32)(end)+(0,_util2.string32)(code),start=end+1,code=codes[j]);format31012+=(0,_util2.string32)(start)+(0,_util2.string32)(range[1])+(0,_util2.string32)(code)}header31012="\0\f\0\0"+(0,_util2.string32)(format31012.length+16)+"\0\0\0\0"+(0,_util2.string32)(format31012.length/12)}return cmap+"\0"+string16(format314.length+4)+format314+header31012+format31012}__name2(createCmapTable,"createCmapTable"),__name(createCmapTable,"createCmapTable");function validateOS2Table(os2,file){file.pos=(file.start||0)+os2.offset;const version2=file.getUint16();file.skip(60);const selection=file.getUint16();if(version2<4&&selection&768)return!1;const firstChar=file.getUint16(),lastChar=file.getUint16();return firstChar>lastChar||(file.skip(6),file.getUint16()===0)?!1:(os2.data[8]=os2.data[9]=0,!0)}__name2(validateOS2Table,"validateOS2Table"),__name(validateOS2Table,"validateOS2Table");function createOS2Table(properties,charstrings,override){override=override||{unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0};let ulUnicodeRange1=0,ulUnicodeRange2=0,ulUnicodeRange3=0,ulUnicodeRange4=0,firstCharIndex=null,lastCharIndex=0;if(charstrings){for(let code in charstrings){code|=0,(firstCharIndex>code||!firstCharIndex)&&(firstCharIndex=code),lastCharIndex<code&&(lastCharIndex=code);const position=(0,_unicode.getUnicodeRangeFor)(code);if(position<32)ulUnicodeRange1|=1<<position;else if(position<64)ulUnicodeRange2|=1<<position-32;else if(position<96)ulUnicodeRange3|=1<<position-64;else if(position<123)ulUnicodeRange4|=1<<position-96;else throw new _util2.FormatError("Unicode ranges Bits > 123 are reserved for internal usage")}lastCharIndex>65535&&(lastCharIndex=65535)}else firstCharIndex=0,lastCharIndex=255;const bbox=properties.bbox||[0,0,0,0],unitsPerEm=override.unitsPerEm||1/(properties.fontMatrix||_util2.FONT_IDENTITY_MATRIX)[0],scale=properties.ascentScaled?1:unitsPerEm/PDF_GLYPH_SPACE_UNITS,typoAscent=override.ascent||Math.round(scale*(properties.ascent||bbox[3]));let typoDescent=override.descent||Math.round(scale*(properties.descent||bbox[1]));typoDescent>0&&properties.descent>0&&bbox[1]<0&&(typoDescent=-typoDescent);const winAscent=override.yMax||typoAscent,winDescent=-override.yMin||-typoDescent;return"\0$\xF4\0\0\0\x8A\xBB\0\0\0\x8C\x8A\xBB\0\0\xDF\x001\0\0\0\0"+String.fromCharCode(properties.fixedPitch?9:0)+"\0\0\0\0\0\0"+(0,_util2.string32)(ulUnicodeRange1)+(0,_util2.string32)(ulUnicodeRange2)+(0,_util2.string32)(ulUnicodeRange3)+(0,_util2.string32)(ulUnicodeRange4)+"*21*"+string16(properties.italicAngle?1:0)+string16(firstCharIndex||properties.firstChar)+string16(lastCharIndex||properties.lastChar)+string16(typoAscent)+string16(typoDescent)+"\0d"+string16(winAscent)+string16(winDescent)+"\0\0\0\0\0\0\0\0"+string16(properties.xHeight)+string16(properties.capHeight)+string16(0)+string16(firstCharIndex||properties.firstChar)+"\0"}__name2(createOS2Table,"createOS2Table"),__name(createOS2Table,"createOS2Table");function createPostTable(properties){const angle=Math.floor(properties.italicAngle*65536);return"\0\0\0"+(0,_util2.string32)(angle)+"\0\0\0\0"+(0,_util2.string32)(properties.fixedPitch?1:0)+"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}__name2(createPostTable,"createPostTable"),__name(createPostTable,"createPostTable");function createPostscriptName(name){return name.replace(/[^\x21-\x7E]|[[\](){}<>/%]/g,"").slice(0,63)}__name2(createPostscriptName,"createPostscriptName"),__name(createPostscriptName,"createPostscriptName");function createNameTable(name,proto){proto||(proto=[[],[]]);const strings=[proto[0][0]||"Original licence",proto[0][1]||name,proto[0][2]||"Unknown",proto[0][3]||"uniqueID",proto[0][4]||name,proto[0][5]||"Version 0.11",proto[0][6]||createPostscriptName(name),proto[0][7]||"Unknown",proto[0][8]||"Unknown",proto[0][9]||"Unknown"],stringsUnicode=[];let i,ii,j,jj,str;for(i=0,ii=strings.length;i<ii;i++){str=proto[1][i]||strings[i];const strBufUnicode=[];for(j=0,jj=str.length;j<jj;j++)strBufUnicode.push(string16(str.charCodeAt(j)));stringsUnicode.push(strBufUnicode.join(""))}const names=[strings,stringsUnicode],platforms=["\0","\0"],encodings=["\0\0","\0"],languages=["\0\0","	"],namesRecordCount=strings.length*platforms.length;let nameTable="\0\0"+string16(namesRecordCount)+string16(namesRecordCount*12+6),strOffset=0;for(i=0,ii=platforms.length;i<ii;i++){const strs=names[i];for(j=0,jj=strs.length;j<jj;j++){str=strs[j];const nameRecord=platforms[i]+encodings[i]+languages[i]+string16(j)+string16(str.length)+string16(strOffset);nameTable+=nameRecord,strOffset+=str.length}}return nameTable+=strings.join("")+stringsUnicode.join(""),nameTable}__name2(createNameTable,"createNameTable"),__name(createNameTable,"createNameTable");const _Font=class{static{__name2(this,"_Font")}constructor(name,file,properties){this.name=name,this.psName=null,this.mimetype=null,this.disableFontFace=!1,this.loadedName=properties.loadedName,this.isType3Font=properties.isType3Font,this.missingFile=!1,this.cssFontInfo=properties.cssFontInfo,this._charsCache=Object.create(null),this._glyphCache=Object.create(null);let isSerifFont=!!(properties.flags&_fonts_utils.FontFlags.Serif);if(!isSerifFont&&!properties.isSimulatedFlags){const baseName=name.replace(/[,_]/g,"-").split("-")[0],serifFonts=(0,_standard_fonts.getSerifFonts)();for(const namePart of baseName.split("+"))if(serifFonts[namePart]){isSerifFont=!0;break}}this.isSerifFont=isSerifFont,this.isSymbolicFont=!!(properties.flags&_fonts_utils.FontFlags.Symbolic),this.isMonospace=!!(properties.flags&_fonts_utils.FontFlags.FixedPitch);let type=properties.type,subtype=properties.subtype;this.type=type,this.subtype=subtype;let fallbackName="sans-serif";if(this.isMonospace?fallbackName="monospace":this.isSerifFont&&(fallbackName="serif"),this.fallbackName=fallbackName,this.differences=properties.differences,this.widths=properties.widths,this.defaultWidth=properties.defaultWidth,this.composite=properties.composite,this.cMap=properties.cMap,this.capHeight=properties.capHeight/PDF_GLYPH_SPACE_UNITS,this.ascent=properties.ascent/PDF_GLYPH_SPACE_UNITS,this.descent=properties.descent/PDF_GLYPH_SPACE_UNITS,this.lineHeight=this.ascent-this.descent,this.fontMatrix=properties.fontMatrix,this.bbox=properties.bbox,this.defaultEncoding=properties.defaultEncoding,this.toUnicode=properties.toUnicode,this.toFontChar=[],properties.type==="Type3"){for(let charCode=0;charCode<256;charCode++)this.toFontChar[charCode]=this.differences[charCode]||properties.defaultEncoding[charCode];this.fontType=_util2.FontType.TYPE3;return}if(this.cidEncoding=properties.cidEncoding||"",this.vertical=!!properties.vertical,this.vertical&&(this.vmetrics=properties.vmetrics,this.defaultVMetrics=properties.defaultVMetrics),!file||file.isEmpty){file&&(0,_util2.warn)('Font file is empty in "'+name+'" ('+this.loadedName+")"),this.fallbackToSystemFont(properties);return}[type,subtype]=getFontFileType(file,properties),(type!==this.type||subtype!==this.subtype)&&(0,_util2.info)(`Inconsistent font file Type/SubType, expected: ${this.type}/${this.subtype} but found: ${type}/${subtype}.`);let data;try{switch(type){case"MMType1":(0,_util2.info)("MMType1 font ("+name+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";const cff=subtype==="Type1C"||subtype==="CIDFontType0C"?new _cff_font.CFFFont(file,properties):new _type1_font.Type1Font(name,file,properties);adjustWidths(properties),data=this.convert(name,cff,properties);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype",data=this.checkAndRepair(name,file,properties),this.isOpenType&&(adjustWidths(properties),type="OpenType");break;default:throw new _util2.FormatError(`Font ${type} is not supported`)}}catch(e){(0,_util2.warn)(e),this.fallbackToSystemFont(properties);return}amendFallbackToUnicode(properties),this.data=data,this.fontType=(0,_fonts_utils.getFontType)(type,subtype,properties.isStandardFont),this.fontMatrix=properties.fontMatrix,this.widths=properties.widths,this.defaultWidth=properties.defaultWidth,this.toUnicode=properties.toUnicode,this.seacMap=properties.seacMap}get renderer(){const renderer=_font_renderer.FontRendererFactory.create(this,_fonts_utils.SEAC_ANALYSIS_ENABLED);return(0,_util2.shadow)(this,"renderer",renderer)}exportData(extraProperties=!1){const exportDataProperties=extraProperties?[...EXPORT_DATA_PROPERTIES,...EXPORT_DATA_EXTRA_PROPERTIES]:EXPORT_DATA_PROPERTIES,data=Object.create(null);let property,value;for(property of exportDataProperties)value=this[property],value!==void 0&&(data[property]=value);return data}fallbackToSystemFont(properties){this.missingFile=!0;const name=this.name,type=this.type,subtype=this.subtype;let fontName=(0,_fonts_utils.normalizeFontName)(name);const stdFontMap=(0,_standard_fonts.getStdFontMap)(),nonStdFontMap=(0,_standard_fonts.getNonStdFontMap)(),isStandardFont=!!stdFontMap[fontName],isMappedToStandardFont=!!(nonStdFontMap[fontName]&&stdFontMap[nonStdFontMap[fontName]]);fontName=stdFontMap[fontName]||nonStdFontMap[fontName]||fontName;const metrics=(0,_metrics.getFontBasicMetrics)()[fontName];metrics&&(isNaN(this.ascent)&&(this.ascent=metrics.ascent/PDF_GLYPH_SPACE_UNITS),isNaN(this.descent)&&(this.descent=metrics.descent/PDF_GLYPH_SPACE_UNITS),isNaN(this.capHeight)&&(this.capHeight=metrics.capHeight/PDF_GLYPH_SPACE_UNITS)),this.bold=fontName.search(/bold/gi)!==-1,this.italic=fontName.search(/oblique/gi)!==-1||fontName.search(/italic/gi)!==-1,this.black=name.search(/Black/g)!==-1;const isNarrow=name.search(/Narrow/g)!==-1;if(this.remeasure=(!isStandardFont||isNarrow)&&Object.keys(this.widths).length>0,(isStandardFont||isMappedToStandardFont)&&type==="CIDFontType2"&&this.cidEncoding.startsWith("Identity-")){const cidToGidMap=properties.cidToGidMap,map=[];if(applyStandardFontGlyphMap(map,(0,_standard_fonts.getGlyphMapForStandardFonts)()),/Arial-?Black/i.test(name)?applyStandardFontGlyphMap(map,(0,_standard_fonts.getSupplementalGlyphMapForArialBlack)()):/Calibri/i.test(name)&&applyStandardFontGlyphMap(map,(0,_standard_fonts.getSupplementalGlyphMapForCalibri)()),cidToGidMap){for(const charCode in map){const cid=map[charCode];cidToGidMap[cid]!==void 0&&(map[+charCode]=cidToGidMap[cid])}cidToGidMap.length!==this.toUnicode.length&&properties.hasIncludedToUnicodeMap&&this.toUnicode instanceof _to_unicode_map.IdentityToUnicodeMap&&this.toUnicode.forEach(function(charCode,unicodeCharCode){const cid=map[charCode];cidToGidMap[cid]===void 0&&(map[+charCode]=unicodeCharCode)})}this.toUnicode instanceof _to_unicode_map.IdentityToUnicodeMap||this.toUnicode.forEach(function(charCode,unicodeCharCode){map[+charCode]=unicodeCharCode}),this.toFontChar=map,this.toUnicode=new _to_unicode_map.ToUnicodeMap(map)}else if(/Symbol/i.test(fontName))this.toFontChar=buildToFontChar(_encodings.SymbolSetEncoding,(0,_glyphlist.getGlyphsUnicode)(),this.differences);else if(/Dingbats/i.test(fontName))/Wingdings/i.test(name)&&(0,_util2.warn)("Non-embedded Wingdings font, falling back to ZapfDingbats."),this.toFontChar=buildToFontChar(_encodings.ZapfDingbatsEncoding,(0,_glyphlist.getDingbatsGlyphsUnicode)(),this.differences);else if(isStandardFont){const map=buildToFontChar(this.defaultEncoding,(0,_glyphlist.getGlyphsUnicode)(),this.differences);type==="CIDFontType2"&&!this.cidEncoding.startsWith("Identity-")&&!(this.toUnicode instanceof _to_unicode_map.IdentityToUnicodeMap)&&this.toUnicode.forEach(function(charCode,unicodeCharCode){map[+charCode]=unicodeCharCode}),this.toFontChar=map}else{const glyphsUnicodeMap=(0,_glyphlist.getGlyphsUnicode)(),map=[];this.toUnicode.forEach((charCode,unicodeCharCode)=>{if(!this.composite){const glyphName=this.differences[charCode]||this.defaultEncoding[charCode],unicode=(0,_unicode.getUnicodeForGlyph)(glyphName,glyphsUnicodeMap);unicode!==-1&&(unicodeCharCode=unicode)}map[+charCode]=unicodeCharCode}),this.composite&&this.toUnicode instanceof _to_unicode_map.IdentityToUnicodeMap&&/Verdana/i.test(name)&&applyStandardFontGlyphMap(map,(0,_standard_fonts.getGlyphMapForStandardFonts)()),this.toFontChar=map}amendFallbackToUnicode(properties),this.loadedName=fontName.split("-")[0],this.fontType=(0,_fonts_utils.getFontType)(type,subtype,properties.isStandardFont)}checkAndRepair(name,font,properties){const VALID_TABLES=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "];function readTables(file,numTables){const tables2=Object.create(null);tables2["OS/2"]=null,tables2.cmap=null,tables2.head=null,tables2.hhea=null,tables2.hmtx=null,tables2.maxp=null,tables2.name=null,tables2.post=null;for(let i=0;i<numTables;i++){const table=readTableEntry(file);VALID_TABLES.includes(table.tag)&&table.length!==0&&(tables2[table.tag]=table)}return tables2}__name2(readTables,"readTables"),__name(readTables,"readTables");function readTableEntry(file){const tag=file.getString(4),checksum=file.getInt32()>>>0,offset=file.getInt32()>>>0,length=file.getInt32()>>>0,previousPosition=file.pos;file.pos=file.start||0,file.skip(offset);const data=file.getBytes(length);return file.pos=previousPosition,tag==="head"&&(data[8]=data[9]=data[10]=data[11]=0,data[17]|=32),{tag,checksum,length,offset,data}}__name2(readTableEntry,"readTableEntry"),__name(readTableEntry,"readTableEntry");function readOpenTypeHeader(ttf){return{version:ttf.getString(4),numTables:ttf.getUint16(),searchRange:ttf.getUint16(),entrySelector:ttf.getUint16(),rangeShift:ttf.getUint16()}}__name2(readOpenTypeHeader,"readOpenTypeHeader"),__name(readOpenTypeHeader,"readOpenTypeHeader");function readTrueTypeCollectionHeader(ttc){const ttcTag=ttc.getString(4);(0,_util2.assert)(ttcTag==="ttcf","Must be a TrueType Collection font.");const majorVersion=ttc.getUint16(),minorVersion=ttc.getUint16(),numFonts=ttc.getInt32()>>>0,offsetTable=[];for(let i=0;i<numFonts;i++)offsetTable.push(ttc.getInt32()>>>0);const header2={ttcTag,majorVersion,minorVersion,numFonts,offsetTable};switch(majorVersion){case 1:return header2;case 2:return header2.dsigTag=ttc.getInt32()>>>0,header2.dsigLength=ttc.getInt32()>>>0,header2.dsigOffset=ttc.getInt32()>>>0,header2}throw new _util2.FormatError(`Invalid TrueType Collection majorVersion: ${majorVersion}.`)}__name2(readTrueTypeCollectionHeader,"readTrueTypeCollectionHeader"),__name(readTrueTypeCollectionHeader,"readTrueTypeCollectionHeader");function readTrueTypeCollectionData(ttc,fontName){const{numFonts,offsetTable}=readTrueTypeCollectionHeader(ttc),fontNameParts=fontName.split("+");let fallbackData;for(let i=0;i<numFonts;i++){ttc.pos=(ttc.start||0)+offsetTable[i];const potentialHeader=readOpenTypeHeader(ttc),potentialTables=readTables(ttc,potentialHeader.numTables);if(!potentialTables.name)throw new _util2.FormatError('TrueType Collection font must contain a "name" table.');const nameTable=readNameTable(potentialTables.name);for(let j=0,jj=nameTable.length;j<jj;j++)for(let k=0,kk=nameTable[j].length;k<kk;k++){const nameEntry=nameTable[j][k]&&nameTable[j][k].replace(/\s/g,"");if(nameEntry){if(nameEntry===fontName)return{header:potentialHeader,tables:potentialTables};if(!(fontNameParts.length<2))for(const part of fontNameParts)nameEntry===part&&(fallbackData={name:part,header:potentialHeader,tables:potentialTables})}}}if(fallbackData)return(0,_util2.warn)(`TrueType Collection does not contain "${fontName}" font, falling back to "${fallbackData.name}" font instead.`),{header:fallbackData.header,tables:fallbackData.tables};throw new _util2.FormatError(`TrueType Collection does not contain "${fontName}" font.`)}__name2(readTrueTypeCollectionData,"readTrueTypeCollectionData"),__name(readTrueTypeCollectionData,"readTrueTypeCollectionData");function readCmapTable(cmap,file,isSymbolicFont,hasEncoding){if(!cmap)return(0,_util2.warn)("No cmap table available."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};let segment,start=(file.start||0)+cmap.offset;file.pos=start,file.skip(2);const numTables=file.getUint16();let potentialTable,canBreak=!1;for(let i=0;i<numTables;i++){const platformId=file.getUint16(),encodingId=file.getUint16(),offset=file.getInt32()>>>0;let useTable=!1;if(!(potentialTable&&potentialTable.platformId===platformId&&potentialTable.encodingId===encodingId)){if(platformId===0&&(encodingId===0||encodingId===1||encodingId===3))useTable=!0;else if(platformId===1&&encodingId===0)useTable=!0;else if(platformId===3&&encodingId===1&&(hasEncoding||!potentialTable))useTable=!0,isSymbolicFont||(canBreak=!0);else if(isSymbolicFont&&platformId===3&&encodingId===0){useTable=!0;let correctlySorted=!0;if(i<numTables-1){const nextBytes=file.peekBytes(2);int16(nextBytes[0],nextBytes[1])<platformId&&(correctlySorted=!1)}correctlySorted&&(canBreak=!0)}if(useTable&&(potentialTable={platformId,encodingId,offset}),canBreak)break}}if(potentialTable&&(file.pos=start+potentialTable.offset),!potentialTable||file.peekByte()===-1)return(0,_util2.warn)("Could not find a preferred cmap table."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};const format=file.getUint16();let hasShortCmap=!1;const mappings=[];let j,glyphId;if(format===0){for(file.skip(2+2),j=0;j<256;j++){const index=file.getByte();index&&mappings.push({charCode:j,glyphId:index})}hasShortCmap=!0}else if(format===2){file.skip(2+2);const subHeaderKeys=[];let maxSubHeaderKey=0;for(let i=0;i<256;i++){const subHeaderKey=file.getUint16()>>3;subHeaderKeys.push(subHeaderKey),maxSubHeaderKey=Math.max(subHeaderKey,maxSubHeaderKey)}const subHeaders=[];for(let i=0;i<=maxSubHeaderKey;i++)subHeaders.push({firstCode:file.getUint16(),entryCount:file.getUint16(),idDelta:signedInt16(file.getByte(),file.getByte()),idRangePos:file.pos+file.getUint16()});for(let i=0;i<256;i++)if(subHeaderKeys[i]===0)file.pos=subHeaders[0].idRangePos+2*i,glyphId=file.getUint16(),mappings.push({charCode:i,glyphId});else{const s=subHeaders[subHeaderKeys[i]];for(j=0;j<s.entryCount;j++){const charCode=(i<<8)+j+s.firstCode;file.pos=s.idRangePos+2*j,glyphId=file.getUint16(),glyphId!==0&&(glyphId=(glyphId+s.idDelta)%65536),mappings.push({charCode,glyphId})}}}else if(format===4){file.skip(2+2);const segCount=file.getUint16()>>1;file.skip(6);const segments=[];let segIndex;for(segIndex=0;segIndex<segCount;segIndex++)segments.push({end:file.getUint16()});for(file.skip(2),segIndex=0;segIndex<segCount;segIndex++)segments[segIndex].start=file.getUint16();for(segIndex=0;segIndex<segCount;segIndex++)segments[segIndex].delta=file.getUint16();let offsetsCount=0,offsetIndex;for(segIndex=0;segIndex<segCount;segIndex++){segment=segments[segIndex];const rangeOffset=file.getUint16();if(!rangeOffset){segment.offsetIndex=-1;continue}offsetIndex=(rangeOffset>>1)-(segCount-segIndex),segment.offsetIndex=offsetIndex,offsetsCount=Math.max(offsetsCount,offsetIndex+segment.end-segment.start+1)}const offsets=[];for(j=0;j<offsetsCount;j++)offsets.push(file.getUint16());for(segIndex=0;segIndex<segCount;segIndex++){segment=segments[segIndex],start=segment.start;const end=segment.end,delta=segment.delta;for(offsetIndex=segment.offsetIndex,j=start;j<=end;j++)j!==65535&&(glyphId=offsetIndex<0?j:offsets[offsetIndex+j-start],glyphId=glyphId+delta&65535,mappings.push({charCode:j,glyphId}))}}else if(format===6){file.skip(2+2);const firstCode=file.getUint16(),entryCount=file.getUint16();for(j=0;j<entryCount;j++){glyphId=file.getUint16();const charCode=firstCode+j;mappings.push({charCode,glyphId})}}else if(format===12){file.skip(2+4+4);const nGroups=file.getInt32()>>>0;for(j=0;j<nGroups;j++){const startCharCode=file.getInt32()>>>0,endCharCode=file.getInt32()>>>0;let glyphCode=file.getInt32()>>>0;for(let charCode=startCharCode;charCode<=endCharCode;charCode++)mappings.push({charCode,glyphId:glyphCode++})}}else return(0,_util2.warn)("cmap table has unsupported format: "+format),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};mappings.sort(function(a,b){return a.charCode-b.charCode});for(let i=1;i<mappings.length;i++)mappings[i-1].charCode===mappings[i].charCode&&(mappings.splice(i,1),i--);return{platformId:potentialTable.platformId,encodingId:potentialTable.encodingId,mappings,hasShortCmap}}__name2(readCmapTable,"readCmapTable"),__name(readCmapTable,"readCmapTable");function sanitizeMetrics(file,header2,metrics,headTable,numGlyphs2,dupFirstEntry2){if(!header2){metrics&&(metrics.data=null);return}file.pos=(file.start||0)+header2.offset,file.pos+=4,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=2,file.pos+=2;const caretOffset=file.getUint16();file.pos+=8,file.pos+=2;let numOfMetrics=file.getUint16();caretOffset!==0&&(int16(headTable.data[44],headTable.data[45])&2||(header2.data[22]=0,header2.data[23]=0)),numOfMetrics>numGlyphs2&&((0,_util2.info)(`The numOfMetrics (${numOfMetrics}) should not be greater than the numGlyphs (${numGlyphs2}).`),numOfMetrics=numGlyphs2,header2.data[34]=(numOfMetrics&65280)>>8,header2.data[35]=numOfMetrics&255);const numMissing=numGlyphs2-numOfMetrics-(metrics.length-numOfMetrics*4>>1);if(numMissing>0){const entries=new Uint8Array(metrics.length+numMissing*2);entries.set(metrics.data),dupFirstEntry2&&(entries[metrics.length]=metrics.data[2],entries[metrics.length+1]=metrics.data[3]),metrics.data=entries}}__name2(sanitizeMetrics,"sanitizeMetrics"),__name(sanitizeMetrics,"sanitizeMetrics");function sanitizeGlyph(source,sourceStart,sourceEnd,dest,destStart,hintsValid2){const glyphProfile={length:0,sizeOfInstructions:0};if(sourceEnd-sourceStart<=12)return glyphProfile;const glyf=source.subarray(sourceStart,sourceEnd);let contoursCount=signedInt16(glyf[0],glyf[1]);if(contoursCount<0)return contoursCount=-1,writeSignedInt16(glyf,0,contoursCount),dest.set(glyf,destStart),glyphProfile.length=glyf.length,glyphProfile;let i,j=10,flagsCount=0;for(i=0;i<contoursCount;i++)flagsCount=(glyf[j]<<8|glyf[j+1])+1,j+=2;const instructionsStart=j,instructionsLength=glyf[j]<<8|glyf[j+1];glyphProfile.sizeOfInstructions=instructionsLength,j+=2+instructionsLength;const instructionsEnd=j;let coordinatesLength=0;for(i=0;i<flagsCount;i++){const flag=glyf[j++];flag&192&&(glyf[j-1]=flag&63);let xLength=2;flag&2?xLength=1:flag&16&&(xLength=0);let yLength=2;flag&4?yLength=1:flag&32&&(yLength=0);const xyLength=xLength+yLength;if(coordinatesLength+=xyLength,flag&8){const repeat=glyf[j++];i+=repeat,coordinatesLength+=repeat*xyLength}}if(coordinatesLength===0)return glyphProfile;let glyphDataLength=j+coordinatesLength;return glyphDataLength>glyf.length?glyphProfile:!hintsValid2&&instructionsLength>0?(dest.set(glyf.subarray(0,instructionsStart),destStart),dest.set([0,0],destStart+instructionsStart),dest.set(glyf.subarray(instructionsEnd,glyphDataLength),destStart+instructionsStart+2),glyphDataLength-=instructionsLength,glyf.length-glyphDataLength>3&&(glyphDataLength=glyphDataLength+3&-4),glyphProfile.length=glyphDataLength,glyphProfile):glyf.length-glyphDataLength>3?(glyphDataLength=glyphDataLength+3&-4,dest.set(glyf.subarray(0,glyphDataLength),destStart),glyphProfile.length=glyphDataLength,glyphProfile):(dest.set(glyf,destStart),glyphProfile.length=glyf.length,glyphProfile)}__name2(sanitizeGlyph,"sanitizeGlyph"),__name(sanitizeGlyph,"sanitizeGlyph");function sanitizeHead(head,numGlyphs2,locaLength){const data=head.data,version3=int32(data[0],data[1],data[2],data[3]);version3>>16!==1&&((0,_util2.info)("Attempting to fix invalid version in head table: "+version3),data[0]=0,data[1]=1,data[2]=0,data[3]=0);const indexToLocFormat=int16(data[50],data[51]);if(indexToLocFormat<0||indexToLocFormat>1){(0,_util2.info)("Attempting to fix invalid indexToLocFormat in head table: "+indexToLocFormat);const numGlyphsPlusOne=numGlyphs2+1;if(locaLength===numGlyphsPlusOne<<1)data[50]=0,data[51]=0;else if(locaLength===numGlyphsPlusOne<<2)data[50]=0,data[51]=1;else throw new _util2.FormatError("Could not fix indexToLocFormat: "+indexToLocFormat)}}__name2(sanitizeHead,"sanitizeHead"),__name(sanitizeHead,"sanitizeHead");function sanitizeGlyphLocations(loca,glyf,numGlyphs2,isGlyphLocationsLong,hintsValid2,dupFirstEntry2,maxSizeOfInstructions2){let itemSize,itemDecode,itemEncode;isGlyphLocationsLong?(itemSize=4,itemDecode=__name(__name2(function(data,offset){return data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3]},"fontItemDecodeLong"),"fontItemDecodeLong"),itemEncode=__name(__name2(function(data,offset,value){data[offset]=value>>>24&255,data[offset+1]=value>>16&255,data[offset+2]=value>>8&255,data[offset+3]=value&255},"fontItemEncodeLong"),"fontItemEncodeLong")):(itemSize=2,itemDecode=__name(__name2(function(data,offset){return data[offset]<<9|data[offset+1]<<1},"fontItemDecode"),"fontItemDecode"),itemEncode=__name(__name2(function(data,offset,value){data[offset]=value>>9&255,data[offset+1]=value>>1&255},"fontItemEncode"),"fontItemEncode"));const numGlyphsOut2=dupFirstEntry2?numGlyphs2+1:numGlyphs2,locaDataSize=itemSize*(1+numGlyphsOut2),locaData=new Uint8Array(locaDataSize);locaData.set(loca.data.subarray(0,locaDataSize)),loca.data=locaData;const oldGlyfData=glyf.data,oldGlyfDataLength=oldGlyfData.length,newGlyfData=new Uint8Array(oldGlyfDataLength);let i,j;const locaEntries=[];for(i=0,j=0;i<numGlyphs2+1;i++,j+=itemSize){let offset=itemDecode(locaData,j);offset>oldGlyfDataLength&&(offset=oldGlyfDataLength),locaEntries.push({index:i,offset,endOffset:0})}for(locaEntries.sort((a,b)=>a.offset-b.offset),i=0;i<numGlyphs2;i++)locaEntries[i].endOffset=locaEntries[i+1].offset;for(locaEntries.sort((a,b)=>a.index-b.index),i=0;i<numGlyphs2;i++){const{offset,endOffset}=locaEntries[i];if(offset!==0||endOffset!==0)break;const nextOffset=locaEntries[i+1].offset;if(nextOffset!==0){locaEntries[i].endOffset=nextOffset;break}}const missingGlyphs2=Object.create(null);let writeOffset=0;for(itemEncode(locaData,0,writeOffset),i=0,j=itemSize;i<numGlyphs2;i++,j+=itemSize){const glyphProfile=sanitizeGlyph(oldGlyfData,locaEntries[i].offset,locaEntries[i].endOffset,newGlyfData,writeOffset,hintsValid2),newLength=glyphProfile.length;newLength===0&&(missingGlyphs2[i]=!0),glyphProfile.sizeOfInstructions>maxSizeOfInstructions2&&(maxSizeOfInstructions2=glyphProfile.sizeOfInstructions),writeOffset+=newLength,itemEncode(locaData,j,writeOffset)}if(writeOffset===0){const simpleGlyph=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(i=0,j=itemSize;i<numGlyphsOut2;i++,j+=itemSize)itemEncode(locaData,j,simpleGlyph.length);glyf.data=simpleGlyph}else if(dupFirstEntry2){const firstEntryLength=itemDecode(locaData,itemSize);newGlyfData.length>firstEntryLength+writeOffset?glyf.data=newGlyfData.subarray(0,firstEntryLength+writeOffset):(glyf.data=new Uint8Array(firstEntryLength+writeOffset),glyf.data.set(newGlyfData.subarray(0,writeOffset))),glyf.data.set(newGlyfData.subarray(0,firstEntryLength),writeOffset),itemEncode(loca.data,locaData.length-itemSize,writeOffset+firstEntryLength)}else glyf.data=newGlyfData.subarray(0,writeOffset);return{missingGlyphs:missingGlyphs2,maxSizeOfInstructions:maxSizeOfInstructions2}}__name2(sanitizeGlyphLocations,"sanitizeGlyphLocations"),__name(sanitizeGlyphLocations,"sanitizeGlyphLocations");function readPostScriptTable(post,propertiesObj,maxpNumGlyphs){const start=(font.start||0)+post.offset;font.pos=start;const length=post.length,end=start+length,version3=font.getInt32();font.skip(28);let glyphNames,valid=!0,i;switch(version3){case 65536:glyphNames=_fonts_utils.MacStandardGlyphOrdering;break;case 131072:const numGlyphs2=font.getUint16();if(numGlyphs2!==maxpNumGlyphs){valid=!1;break}const glyphNameIndexes=[];for(i=0;i<numGlyphs2;++i){const index=font.getUint16();if(index>=32768){valid=!1;break}glyphNameIndexes.push(index)}if(!valid)break;const customNames=[],strBuf=[];for(;font.pos<end;){const stringLength=font.getByte();for(strBuf.length=stringLength,i=0;i<stringLength;++i)strBuf[i]=String.fromCharCode(font.getByte());customNames.push(strBuf.join(""))}for(glyphNames=[],i=0;i<numGlyphs2;++i){const j=glyphNameIndexes[i];if(j<258){glyphNames.push(_fonts_utils.MacStandardGlyphOrdering[j]);continue}glyphNames.push(customNames[j-258])}break;case 196608:break;default:(0,_util2.warn)("Unknown/unsupported post table version "+version3),valid=!1,propertiesObj.defaultEncoding&&(glyphNames=propertiesObj.defaultEncoding);break}return propertiesObj.glyphNames=glyphNames,valid}__name2(readPostScriptTable,"readPostScriptTable"),__name(readPostScriptTable,"readPostScriptTable");function readNameTable(nameTable){const start=(font.start||0)+nameTable.offset;font.pos=start;const names=[[],[]],length=nameTable.length,end=start+length;if(font.getUint16()!==0||length<6)return names;const numRecords=font.getUint16(),stringsStart=font.getUint16(),records=[],NAME_RECORD_LENGTH=12;let i,ii;for(i=0;i<numRecords&&font.pos+NAME_RECORD_LENGTH<=end;i++){const r={platform:font.getUint16(),encoding:font.getUint16(),language:font.getUint16(),name:font.getUint16(),length:font.getUint16(),offset:font.getUint16()};(r.platform===1&&r.encoding===0&&r.language===0||r.platform===3&&r.encoding===1&&r.language===1033)&&records.push(r)}for(i=0,ii=records.length;i<ii;i++){const record=records[i];if(record.length<=0)continue;const pos=start+stringsStart+record.offset;if(pos+record.length>end)continue;font.pos=pos;const nameIndex=record.name;if(record.encoding){let str="";for(let j=0,jj=record.length;j<jj;j+=2)str+=String.fromCharCode(font.getUint16());names[1][nameIndex]=str}else names[0][nameIndex]=font.getString(record.length)}return names}__name2(readNameTable,"readNameTable"),__name(readNameTable,"readNameTable");const TTOpsStackDeltas=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function sanitizeTTProgram(table,ttContext){let data=table.data,i=0,j,n,b,funcId,pc,lastEndf=0,lastDeff=0;const stack=[],callstack=[],functionsCalled=[];let tooComplexToFollowFunctions=ttContext.tooComplexToFollowFunctions,inFDEF=!1,ifLevel=0,inELSE=0;for(let ii=data.length;i<ii;){const op=data[i++];if(op===64)if(n=data[i++],inFDEF||inELSE)i+=n;else for(j=0;j<n;j++)stack.push(data[i++]);else if(op===65)if(n=data[i++],inFDEF||inELSE)i+=n*2;else for(j=0;j<n;j++)b=data[i++],stack.push(b<<8|data[i++]);else if((op&248)===176)if(n=op-176+1,inFDEF||inELSE)i+=n;else for(j=0;j<n;j++)stack.push(data[i++]);else if((op&248)===184)if(n=op-184+1,inFDEF||inELSE)i+=n*2;else for(j=0;j<n;j++)b=data[i++],stack.push(b<<8|data[i++]);else if(op===43&&!tooComplexToFollowFunctions){if(!inFDEF&&!inELSE){if(funcId=stack.at(-1),isNaN(funcId))(0,_util2.info)("TT: CALL empty stack (or invalid entry).");else if(ttContext.functionsUsed[funcId]=!0,funcId in ttContext.functionsStackDeltas){const newStackLength=stack.length+ttContext.functionsStackDeltas[funcId];if(newStackLength<0){(0,_util2.warn)("TT: CALL invalid functions stack delta."),ttContext.hintsValid=!1;return}stack.length=newStackLength}else if(funcId in ttContext.functionsDefined&&!functionsCalled.includes(funcId)){if(callstack.push({data,i,stackTop:stack.length-1}),functionsCalled.push(funcId),pc=ttContext.functionsDefined[funcId],!pc){(0,_util2.warn)("TT: CALL non-existent function"),ttContext.hintsValid=!1;return}data=pc.data,i=pc.i}}}else if(op===44&&!tooComplexToFollowFunctions)(inFDEF||inELSE)&&((0,_util2.warn)("TT: nested FDEFs not allowed"),tooComplexToFollowFunctions=!0),inFDEF=!0,lastDeff=i,funcId=stack.pop(),ttContext.functionsDefined[funcId]={data,i};else if(op===45)if(inFDEF)inFDEF=!1,lastEndf=i;else{if(pc=callstack.pop(),!pc){(0,_util2.warn)("TT: ENDF bad stack"),ttContext.hintsValid=!1;return}funcId=functionsCalled.pop(),data=pc.data,i=pc.i,ttContext.functionsStackDeltas[funcId]=stack.length-pc.stackTop}else if(op===137)(inFDEF||inELSE)&&((0,_util2.warn)("TT: nested IDEFs not allowed"),tooComplexToFollowFunctions=!0),inFDEF=!0,lastDeff=i;else if(op===88)++ifLevel;else if(op===27)inELSE=ifLevel;else if(op===89)inELSE===ifLevel&&(inELSE=0),--ifLevel;else if(op===28&&!inFDEF&&!inELSE){const offset=stack.at(-1);offset>0&&(i+=offset-1)}if(!inFDEF&&!inELSE){let stackDelta=0;for(op<=142?stackDelta=TTOpsStackDeltas[op]:op>=192&&op<=223?stackDelta=-1:op>=224&&(stackDelta=-2),op>=113&&op<=117&&(n=stack.pop(),isNaN(n)||(stackDelta=-n*2));stackDelta<0&&stack.length>0;)stack.pop(),stackDelta++;for(;stackDelta>0;)stack.push(NaN),stackDelta--}}ttContext.tooComplexToFollowFunctions=tooComplexToFollowFunctions;const content=[data];i>data.length&&content.push(new Uint8Array(i-data.length)),lastDeff>lastEndf&&((0,_util2.warn)("TT: complementing a missing function tail"),content.push(new Uint8Array([34,45]))),foldTTTable(table,content)}__name2(sanitizeTTProgram,"sanitizeTTProgram"),__name(sanitizeTTProgram,"sanitizeTTProgram");function checkInvalidFunctions(ttContext,maxFunctionDefs2){if(!ttContext.tooComplexToFollowFunctions){if(ttContext.functionsDefined.length>maxFunctionDefs2){(0,_util2.warn)("TT: more functions defined than expected"),ttContext.hintsValid=!1;return}for(let j=0,jj=ttContext.functionsUsed.length;j<jj;j++){if(j>maxFunctionDefs2){(0,_util2.warn)("TT: invalid function id: "+j),ttContext.hintsValid=!1;return}if(ttContext.functionsUsed[j]&&!ttContext.functionsDefined[j]){(0,_util2.warn)("TT: undefined function: "+j),ttContext.hintsValid=!1;return}}}}__name2(checkInvalidFunctions,"checkInvalidFunctions"),__name(checkInvalidFunctions,"checkInvalidFunctions");function foldTTTable(table,content){if(content.length>1){let newLength=0,j,jj;for(j=0,jj=content.length;j<jj;j++)newLength+=content[j].length;newLength=newLength+3&-4;const result=new Uint8Array(newLength);let pos=0;for(j=0,jj=content.length;j<jj;j++)result.set(content[j],pos),pos+=content[j].length;table.data=result,table.length=newLength}}__name2(foldTTTable,"foldTTTable"),__name(foldTTTable,"foldTTTable");function sanitizeTTPrograms(fpgm,prep,cvt,maxFunctionDefs2){const ttContext={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:!1,hintsValid:!0};if(fpgm&&sanitizeTTProgram(fpgm,ttContext),prep&&sanitizeTTProgram(prep,ttContext),fpgm&&checkInvalidFunctions(ttContext,maxFunctionDefs2),cvt&&cvt.length&1){const cvtData=new Uint8Array(cvt.length+1);cvtData.set(cvt.data),cvt.data=cvtData}return ttContext.hintsValid}__name2(sanitizeTTPrograms,"sanitizeTTPrograms"),__name(sanitizeTTPrograms,"sanitizeTTPrograms"),font=new _stream.Stream(new Uint8Array(font.getBytes()));let header,tables;if(isTrueTypeCollectionFile(font)){const ttcData=readTrueTypeCollectionData(font,this.name);header=ttcData.header,tables=ttcData.tables}else header=readOpenTypeHeader(font),tables=readTables(font,header.numTables);let cff,cffFile;const isTrueType=!tables["CFF "];if(isTrueType){if(!tables.loca)throw new _util2.FormatError('Required "loca" table is not found');tables.glyf||((0,_util2.warn)('Required "glyf" table is not found -- trying to recover.'),tables.glyf={tag:"glyf",data:new Uint8Array(0)}),this.isOpenType=!1}else{const isComposite=properties.composite&&((properties.cidToGidMap||[]).length>0||!(properties.cMap instanceof _cmap.IdentityCMap));if(header.version==="OTTO"&&!isComposite||!tables.head||!tables.hhea||!tables.maxp||!tables.post)return cffFile=new _stream.Stream(tables["CFF "].data),cff=new _cff_font.CFFFont(cffFile,properties),adjustWidths(properties),this.convert(name,cff,properties);delete tables.glyf,delete tables.loca,delete tables.fpgm,delete tables.prep,delete tables["cvt "],this.isOpenType=!0}if(!tables.maxp)throw new _util2.FormatError('Required "maxp" table is not found');font.pos=(font.start||0)+tables.maxp.offset;const version2=font.getInt32(),numGlyphs=font.getUint16();if(properties.scaleFactors&&properties.scaleFactors.length===numGlyphs&&isTrueType){const{scaleFactors}=properties,isGlyphLocationsLong=int16(tables.head.data[50],tables.head.data[51]),glyphs=new _glyf.GlyfTable({glyfTable:tables.glyf.data,isGlyphLocationsLong,locaTable:tables.loca.data,numGlyphs});glyphs.scale(scaleFactors);const{glyf,loca,isLocationLong}=glyphs.write();tables.glyf.data=glyf,tables.loca.data=loca,isLocationLong!==!!isGlyphLocationsLong&&(tables.head.data[50]=0,tables.head.data[51]=isLocationLong?1:0);const metrics=tables.hmtx.data;for(let i=0;i<numGlyphs;i++){const j=4*i,advanceWidth=Math.round(scaleFactors[i]*int16(metrics[j],metrics[j+1]));metrics[j]=advanceWidth>>8&255,metrics[j+1]=advanceWidth&255;const lsb=Math.round(scaleFactors[i]*signedInt16(metrics[j+2],metrics[j+3]));writeSignedInt16(metrics,j+2,lsb)}}let numGlyphsOut=numGlyphs+1,dupFirstEntry=!0;numGlyphsOut>65535&&(dupFirstEntry=!1,numGlyphsOut=numGlyphs,(0,_util2.warn)("Not enough space in glyfs to duplicate first glyph."));let maxFunctionDefs=0,maxSizeOfInstructions=0;version2>=65536&&tables.maxp.length>=22&&(font.pos+=8,font.getUint16()>2&&(tables.maxp.data[14]=0,tables.maxp.data[15]=2),font.pos+=4,maxFunctionDefs=font.getUint16(),font.pos+=4,maxSizeOfInstructions=font.getUint16()),tables.maxp.data[4]=numGlyphsOut>>8,tables.maxp.data[5]=numGlyphsOut&255;const hintsValid=sanitizeTTPrograms(tables.fpgm,tables.prep,tables["cvt "],maxFunctionDefs);if(hintsValid||(delete tables.fpgm,delete tables.prep,delete tables["cvt "]),sanitizeMetrics(font,tables.hhea,tables.hmtx,tables.head,numGlyphsOut,dupFirstEntry),!tables.head)throw new _util2.FormatError('Required "head" table is not found');sanitizeHead(tables.head,numGlyphs,isTrueType?tables.loca.length:0);let missingGlyphs=Object.create(null);if(isTrueType){const isGlyphLocationsLong=int16(tables.head.data[50],tables.head.data[51]),glyphsInfo=sanitizeGlyphLocations(tables.loca,tables.glyf,numGlyphs,isGlyphLocationsLong,hintsValid,dupFirstEntry,maxSizeOfInstructions);missingGlyphs=glyphsInfo.missingGlyphs,version2>=65536&&tables.maxp.length>=22&&(tables.maxp.data[26]=glyphsInfo.maxSizeOfInstructions>>8,tables.maxp.data[27]=glyphsInfo.maxSizeOfInstructions&255)}if(!tables.hhea)throw new _util2.FormatError('Required "hhea" table is not found');tables.hhea.data[10]===0&&tables.hhea.data[11]===0&&(tables.hhea.data[10]=255,tables.hhea.data[11]=255);const metricsOverride={unitsPerEm:int16(tables.head.data[18],tables.head.data[19]),yMax:int16(tables.head.data[42],tables.head.data[43]),yMin:signedInt16(tables.head.data[38],tables.head.data[39]),ascent:signedInt16(tables.hhea.data[4],tables.hhea.data[5]),descent:signedInt16(tables.hhea.data[6],tables.hhea.data[7]),lineGap:signedInt16(tables.hhea.data[8],tables.hhea.data[9])};this.ascent=metricsOverride.ascent/metricsOverride.unitsPerEm,this.descent=metricsOverride.descent/metricsOverride.unitsPerEm,this.lineGap=metricsOverride.lineGap/metricsOverride.unitsPerEm,this.cssFontInfo&&this.cssFontInfo.lineHeight?(this.lineHeight=this.cssFontInfo.metrics.lineHeight,this.lineGap=this.cssFontInfo.metrics.lineGap):this.lineHeight=this.ascent-this.descent+this.lineGap,tables.post&&readPostScriptTable(tables.post,properties,numGlyphs),tables.post={tag:"post",data:createPostTable(properties)};const charCodeToGlyphId=[];function hasGlyph(glyphId){return!missingGlyphs[glyphId]}if(__name2(hasGlyph,"hasGlyph"),__name(hasGlyph,"hasGlyph"),properties.composite){const cidToGidMap=properties.cidToGidMap||[],isCidToGidMapEmpty=cidToGidMap.length===0;properties.cMap.forEach(function(charCode,cid){if(typeof cid=="string"&&(cid=convertCidString(charCode,cid,!0)),cid>65535)throw new _util2.FormatError("Max size of CID is 65,535");let glyphId=-1;isCidToGidMapEmpty?glyphId=cid:cidToGidMap[cid]!==void 0&&(glyphId=cidToGidMap[cid]),glyphId>=0&&glyphId<numGlyphs&&hasGlyph(glyphId)&&(charCodeToGlyphId[charCode]=glyphId)})}else{const cmapTable=readCmapTable(tables.cmap,font,this.isSymbolicFont,properties.hasEncoding),cmapPlatformId=cmapTable.platformId,cmapEncodingId=cmapTable.encodingId,cmapMappings=cmapTable.mappings,cmapMappingsLength=cmapMappings.length;let baseEncoding=[],forcePostTable=!1;if(properties.hasEncoding&&(properties.baseEncodingName==="MacRomanEncoding"||properties.baseEncodingName==="WinAnsiEncoding")&&(baseEncoding=(0,_encodings.getEncoding)(properties.baseEncodingName)),properties.hasEncoding&&!this.isSymbolicFont&&(cmapPlatformId===3&&cmapEncodingId===1||cmapPlatformId===1&&cmapEncodingId===0)){const glyphsUnicodeMap=(0,_glyphlist.getGlyphsUnicode)();for(let charCode=0;charCode<256;charCode++){let glyphName;if(this.differences[charCode]!==void 0?glyphName=this.differences[charCode]:baseEncoding.length&&baseEncoding[charCode]!==""?glyphName=baseEncoding[charCode]:glyphName=_encodings.StandardEncoding[charCode],!glyphName)continue;const standardGlyphName=(0,_fonts_utils.recoverGlyphName)(glyphName,glyphsUnicodeMap);let unicodeOrCharCode;if(cmapPlatformId===3&&cmapEncodingId===1?unicodeOrCharCode=glyphsUnicodeMap[standardGlyphName]:cmapPlatformId===1&&cmapEncodingId===0&&(unicodeOrCharCode=_encodings.MacRomanEncoding.indexOf(standardGlyphName)),unicodeOrCharCode===void 0){if(!properties.glyphNames&&properties.hasIncludedToUnicodeMap&&!(this.toUnicode instanceof _to_unicode_map.IdentityToUnicodeMap)){const unicode=this.toUnicode.get(charCode);unicode&&(unicodeOrCharCode=unicode.codePointAt(0))}if(unicodeOrCharCode===void 0)continue}for(let i=0;i<cmapMappingsLength;++i)if(cmapMappings[i].charCode===unicodeOrCharCode){charCodeToGlyphId[charCode]=cmapMappings[i].glyphId;break}}}else if(cmapPlatformId===0){for(let i=0;i<cmapMappingsLength;++i)charCodeToGlyphId[cmapMappings[i].charCode]=cmapMappings[i].glyphId;forcePostTable=!0}else for(let i=0;i<cmapMappingsLength;++i){let charCode=cmapMappings[i].charCode;cmapPlatformId===3&&charCode>=61440&&charCode<=61695&&(charCode&=255),charCodeToGlyphId[charCode]=cmapMappings[i].glyphId}if(properties.glyphNames&&(baseEncoding.length||this.differences.length))for(let i=0;i<256;++i){if(!forcePostTable&&charCodeToGlyphId[i]!==void 0)continue;const glyphName=this.differences[i]||baseEncoding[i];if(!glyphName)continue;const glyphId=properties.glyphNames.indexOf(glyphName);glyphId>0&&hasGlyph(glyphId)&&(charCodeToGlyphId[i]=glyphId)}}charCodeToGlyphId.length===0&&(charCodeToGlyphId[0]=0);let glyphZeroId=numGlyphsOut-1;if(dupFirstEntry||(glyphZeroId=0),!properties.cssFontInfo){const newMapping=adjustMapping(charCodeToGlyphId,hasGlyph,glyphZeroId,this.toUnicode);this.toFontChar=newMapping.toFontChar,tables.cmap={tag:"cmap",data:createCmapTable(newMapping.charCodeToGlyphId,newMapping.toUnicodeExtraMap,numGlyphsOut)},(!tables["OS/2"]||!validateOS2Table(tables["OS/2"],font))&&(tables["OS/2"]={tag:"OS/2",data:createOS2Table(properties,newMapping.charCodeToGlyphId,metricsOverride)})}if(!isTrueType)try{cffFile=new _stream.Stream(tables["CFF "].data),cff=new _cff_parser.CFFParser(cffFile,properties,_fonts_utils.SEAC_ANALYSIS_ENABLED).parse(),cff.duplicateFirstGlyph();const compiler=new _cff_parser.CFFCompiler(cff);tables["CFF "].data=compiler.compile()}catch{(0,_util2.warn)("Failed to compile font "+properties.loadedName)}if(!tables.name)tables.name={tag:"name",data:createNameTable(this.name)};else{const namePrototype=readNameTable(tables.name);tables.name.data=createNameTable(name,namePrototype),this.psName=namePrototype[0][6]||null}const builder=new _opentype_file_builder.OpenTypeFileBuilder(header.version);for(const tableTag in tables)builder.addTable(tableTag,tables[tableTag].data);return builder.toArray()}convert(fontName,font,properties){properties.fixedPitch=!1,properties.builtInEncoding&&adjustToUnicode(properties,properties.builtInEncoding);let glyphZeroId=1;font instanceof _cff_font.CFFFont&&(glyphZeroId=font.numGlyphs-1);const mapping=font.getGlyphMapping(properties);let newMapping=null,newCharCodeToGlyphId=mapping,toUnicodeExtraMap=null;properties.cssFontInfo||(newMapping=adjustMapping(mapping,font.hasGlyphId.bind(font),glyphZeroId,this.toUnicode),this.toFontChar=newMapping.toFontChar,newCharCodeToGlyphId=newMapping.charCodeToGlyphId,toUnicodeExtraMap=newMapping.toUnicodeExtraMap);const numGlyphs=font.numGlyphs;function getCharCodes(charCodeToGlyphId,glyphId){let charCodes=null;for(const charCode in charCodeToGlyphId)glyphId===charCodeToGlyphId[charCode]&&(charCodes||(charCodes=[]),charCodes.push(charCode|0));return charCodes}__name2(getCharCodes,"getCharCodes"),__name(getCharCodes,"getCharCodes");function createCharCode(charCodeToGlyphId,glyphId){for(const charCode in charCodeToGlyphId)if(glyphId===charCodeToGlyphId[charCode])return charCode|0;return newMapping.charCodeToGlyphId[newMapping.nextAvailableFontCharCode]=glyphId,newMapping.nextAvailableFontCharCode++}__name2(createCharCode,"createCharCode"),__name(createCharCode,"createCharCode");const seacs=font.seacs;if(newMapping&&_fonts_utils.SEAC_ANALYSIS_ENABLED&&seacs&&seacs.length){const matrix=properties.fontMatrix||_util2.FONT_IDENTITY_MATRIX,charset=font.getCharset(),seacMap=Object.create(null);for(let glyphId in seacs){glyphId|=0;const seac=seacs[glyphId],baseGlyphName=_encodings.StandardEncoding[seac[2]],accentGlyphName=_encodings.StandardEncoding[seac[3]],baseGlyphId=charset.indexOf(baseGlyphName),accentGlyphId=charset.indexOf(accentGlyphName);if(baseGlyphId<0||accentGlyphId<0)continue;const accentOffset={x:seac[0]*matrix[0]+seac[1]*matrix[2]+matrix[4],y:seac[0]*matrix[1]+seac[1]*matrix[3]+matrix[5]},charCodes=getCharCodes(mapping,glyphId);if(charCodes)for(let i=0,ii=charCodes.length;i<ii;i++){const charCode=charCodes[i],charCodeToGlyphId=newMapping.charCodeToGlyphId,baseFontCharCode=createCharCode(charCodeToGlyphId,baseGlyphId),accentFontCharCode=createCharCode(charCodeToGlyphId,accentGlyphId);seacMap[charCode]={baseFontCharCode,accentFontCharCode,accentOffset}}}properties.seacMap=seacMap}const unitsPerEm=1/(properties.fontMatrix||_util2.FONT_IDENTITY_MATRIX)[0],builder=new _opentype_file_builder.OpenTypeFileBuilder("OTTO");return builder.addTable("CFF ",font.data),builder.addTable("OS/2",createOS2Table(properties,newCharCodeToGlyphId)),builder.addTable("cmap",createCmapTable(newCharCodeToGlyphId,toUnicodeExtraMap,numGlyphs)),builder.addTable("head","\0\0\0\0\0\0\0\0\0\0_<\xF5\0\0"+safeString16(unitsPerEm)+"\0\0\0\0\x9E\v~'\0\0\0\0\x9E\v~'\0\0"+safeString16(properties.descent)+"\xFF"+safeString16(properties.ascent)+string16(properties.italicAngle?2:0)+"\0\0\0\0\0\0\0"),builder.addTable("hhea","\0\0\0"+safeString16(properties.ascent)+safeString16(properties.descent)+"\0\0\xFF\xFF\0\0\0\0\0\0"+safeString16(properties.capHeight)+safeString16(Math.tan(properties.italicAngle)*properties.xHeight)+"\0\0\0\0\0\0\0\0\0\0\0\0"+string16(numGlyphs)),builder.addTable("hmtx",__name(__name2(function(){const charstrings=font.charstrings,cffWidths=font.cff?font.cff.widths:null;let hmtx="\0\0\0\0";for(let i=1,ii=numGlyphs;i<ii;i++){let width=0;if(charstrings){const charstring=charstrings[i-1];width="width"in charstring?charstring.width:0}else cffWidths&&(width=Math.ceil(cffWidths[i]||0));hmtx+=string16(width)+string16(0)}return hmtx},"fontFieldsHmtx"),"fontFieldsHmtx")()),builder.addTable("maxp","\0\0P\0"+string16(numGlyphs)),builder.addTable("name",createNameTable(fontName)),builder.addTable("post",createPostTable(properties)),builder.toArray()}get spaceWidth(){const possibleSpaceReplacements=["space","minus","one","i","I"];let width;for(let i=0,ii=possibleSpaceReplacements.length;i<ii;i++){const glyphName=possibleSpaceReplacements[i];if(glyphName in this.widths){width=this.widths[glyphName];break}const glyphUnicode=(0,_glyphlist.getGlyphsUnicode)()[glyphName];let charcode=0;if(this.composite&&this.cMap.contains(glyphUnicode)&&(charcode=this.cMap.lookup(glyphUnicode),typeof charcode=="string"&&(charcode=convertCidString(glyphUnicode,charcode))),!charcode&&this.toUnicode&&(charcode=this.toUnicode.charCodeOf(glyphUnicode)),charcode<=0&&(charcode=glyphUnicode),width=this.widths[charcode],width)break}return width=width||this.defaultWidth,(0,_util2.shadow)(this,"spaceWidth",width)}_charToGlyph(charcode,isSpace=!1){let fontCharCode,width,operatorListId,widthCode=charcode;this.cMap&&this.cMap.contains(charcode)&&(widthCode=this.cMap.lookup(charcode),typeof widthCode=="string"&&(widthCode=convertCidString(charcode,widthCode))),width=this.widths[widthCode],typeof width!="number"&&(width=this.defaultWidth);const vmetric=this.vmetrics&&this.vmetrics[widthCode];let unicode=this.toUnicode.get(charcode)||charcode;typeof unicode=="number"&&(unicode=String.fromCharCode(unicode));let isInFont=this.toFontChar[charcode]!==void 0;if(fontCharCode=this.toFontChar[charcode]||charcode,this.missingFile){const glyphName=this.differences[charcode]||this.defaultEncoding[charcode];(glyphName===".notdef"||glyphName==="")&&this.type==="Type1"&&(fontCharCode=32),fontCharCode=(0,_unicode.mapSpecialUnicodeValues)(fontCharCode)}this.isType3Font&&(operatorListId=fontCharCode);let accent=null;if(this.seacMap&&this.seacMap[charcode]){isInFont=!0;const seac=this.seacMap[charcode];fontCharCode=seac.baseFontCharCode,accent={fontChar:String.fromCodePoint(seac.accentFontCharCode),offset:seac.accentOffset}}let fontChar="";typeof fontCharCode=="number"&&(fontCharCode<=1114111?fontChar=String.fromCodePoint(fontCharCode):(0,_util2.warn)(`charToGlyph - invalid fontCharCode: ${fontCharCode}`));let glyph=this._glyphCache[charcode];return(!glyph||!glyph.matchesForCache(charcode,fontChar,unicode,accent,width,vmetric,operatorListId,isSpace,isInFont))&&(glyph=new Glyph(charcode,fontChar,unicode,accent,width,vmetric,operatorListId,isSpace,isInFont),this._glyphCache[charcode]=glyph),glyph}charsToGlyphs(chars){let glyphs=this._charsCache[chars];if(glyphs)return glyphs;if(glyphs=[],this.cMap){const c=Object.create(null),ii=chars.length;let i=0;for(;i<ii;){this.cMap.readCharCode(chars,i,c);const{charcode,length}=c;i+=length;const glyph=this._charToGlyph(charcode,length===1&&chars.charCodeAt(i-1)===32);glyphs.push(glyph)}}else for(let i=0,ii=chars.length;i<ii;++i){const charcode=chars.charCodeAt(i),glyph=this._charToGlyph(charcode,charcode===32);glyphs.push(glyph)}return this._charsCache[chars]=glyphs}getCharPositions(chars){const positions=[];if(this.cMap){const c=Object.create(null);let i=0;for(;i<chars.length;){this.cMap.readCharCode(chars,i,c);const length=c.length;positions.push([i,i+length]),i+=length}}else for(let i=0,ii=chars.length;i<ii;++i)positions.push([i,i+1]);return positions}get glyphCacheValues(){return Object.values(this._glyphCache)}encodeString(str){const buffers=[],currentBuf=[],hasCurrentBufErrors=__name(()=>buffers.length%2===1,"hasCurrentBufErrors"),getCharCode=this.toUnicode instanceof _to_unicode_map.IdentityToUnicodeMap?unicode=>this.toUnicode.charCodeOf(unicode):unicode=>this.toUnicode.charCodeOf(String.fromCodePoint(unicode));for(let i=0,ii=str.length;i<ii;i++){const unicode=str.codePointAt(i);if(unicode>55295&&(unicode<57344||unicode>65533)&&i++,this.toUnicode){const charCode=getCharCode(unicode);if(charCode!==-1){hasCurrentBufErrors()&&(buffers.push(currentBuf.join("")),currentBuf.length=0);const charCodeLength=this.cMap?this.cMap.getCharCodeLength(charCode):1;for(let j=charCodeLength-1;j>=0;j--)currentBuf.push(String.fromCharCode(charCode>>8*j&255));continue}}hasCurrentBufErrors()||(buffers.push(currentBuf.join("")),currentBuf.length=0),currentBuf.push(String.fromCodePoint(unicode))}return buffers.push(currentBuf.join("")),buffers}};__name(_Font,"Font");let Font=_Font;exports3.Font=Font;const _ErrorFont=class{static{__name2(this,"_ErrorFont")}constructor(error){this.error=error,this.loadedName="g_font_error",this.missingFile=!0}charsToGlyphs(){return[]}encodeString(chars){return[chars]}exportData(extraProperties=!1){return{error:this.error}}};__name(_ErrorFont,"ErrorFont");let ErrorFont=_ErrorFont;exports3.ErrorFont=ErrorFont},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.CFFTopDict=exports3.CFFStrings=exports3.CFFStandardStrings=exports3.CFFPrivateDict=exports3.CFFParser=exports3.CFFIndex=exports3.CFFHeader=exports3.CFFFDSelect=exports3.CFFCompiler=exports3.CFFCharset=exports3.CFF=void 0;var _util2=__w_pdfjs_require__3(2),_charsets=__w_pdfjs_require__3(36),_encodings=__w_pdfjs_require__3(37);const MAX_SUBR_NESTING=10,CFFStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];exports3.CFFStandardStrings=CFFStandardStrings;const NUM_STANDARD_CFF_STRINGS=391,CharstringValidationData=[null,{id:"hstem",min:2,stackClearing:!0,stem:!0},null,{id:"vstem",min:2,stackClearing:!0,stem:!0},{id:"vmoveto",min:1,stackClearing:!0},{id:"rlineto",min:2,resetStack:!0},{id:"hlineto",min:1,resetStack:!0},{id:"vlineto",min:1,resetStack:!0},{id:"rrcurveto",min:6,resetStack:!0},null,{id:"callsubr",min:1,undefStack:!0},{id:"return",min:0,undefStack:!0},null,null,{id:"endchar",min:0,stackClearing:!0},null,null,null,{id:"hstemhm",min:2,stackClearing:!0,stem:!0},{id:"hintmask",min:0,stackClearing:!0},{id:"cntrmask",min:0,stackClearing:!0},{id:"rmoveto",min:2,stackClearing:!0},{id:"hmoveto",min:1,stackClearing:!0},{id:"vstemhm",min:2,stackClearing:!0,stem:!0},{id:"rcurveline",min:8,resetStack:!0},{id:"rlinecurve",min:8,resetStack:!0},{id:"vvcurveto",min:4,resetStack:!0},{id:"hhcurveto",min:4,resetStack:!0},null,{id:"callgsubr",min:1,undefStack:!0},{id:"vhcurveto",min:4,resetStack:!0},{id:"hvcurveto",min:4,resetStack:!0}],CharstringValidationData12=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn(stack,index){stack[index-2]=stack[index-2]+stack[index-1]}},{id:"sub",min:2,stackDelta:-1,stackFn(stack,index){stack[index-2]=stack[index-2]-stack[index-1]}},{id:"div",min:2,stackDelta:-1,stackFn(stack,index){stack[index-2]=stack[index-2]/stack[index-1]}},null,{id:"neg",min:1,stackDelta:0,stackFn(stack,index){stack[index-1]=-stack[index-1]}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn(stack,index){stack[index-2]=stack[index-2]*stack[index-1]}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:!0},{id:"flex",min:13,resetStack:!0},{id:"hflex1",min:9,resetStack:!0},{id:"flex1",min:11,resetStack:!0}],_CFFParser=class{static{__name2(this,"_CFFParser")}constructor(file,properties,seacAnalysisEnabled){this.bytes=file.getBytes(),this.properties=properties,this.seacAnalysisEnabled=!!seacAnalysisEnabled}parse(){const properties=this.properties,cff=new CFF;this.cff=cff;const header=this.parseHeader(),nameIndex=this.parseIndex(header.endPos),topDictIndex=this.parseIndex(nameIndex.endPos),stringIndex=this.parseIndex(topDictIndex.endPos),globalSubrIndex=this.parseIndex(stringIndex.endPos),topDictParsed=this.parseDict(topDictIndex.obj.get(0)),topDict=this.createDict(CFFTopDict,topDictParsed,cff.strings);cff.header=header.obj,cff.names=this.parseNameIndex(nameIndex.obj),cff.strings=this.parseStringIndex(stringIndex.obj),cff.topDict=topDict,cff.globalSubrIndex=globalSubrIndex.obj,this.parsePrivateDict(cff.topDict),cff.isCIDFont=topDict.hasName("ROS");const charStringOffset=topDict.getByName("CharStrings"),charStringIndex=this.parseIndex(charStringOffset).obj,fontMatrix=topDict.getByName("FontMatrix");fontMatrix&&(properties.fontMatrix=fontMatrix);const fontBBox=topDict.getByName("FontBBox");fontBBox&&(properties.ascent=Math.max(fontBBox[3],fontBBox[1]),properties.descent=Math.min(fontBBox[1],fontBBox[3]),properties.ascentScaled=!0);let charset,encoding;if(cff.isCIDFont){const fdArrayIndex=this.parseIndex(topDict.getByName("FDArray")).obj;for(let i=0,ii=fdArrayIndex.count;i<ii;++i){const dictRaw=fdArrayIndex.get(i),fontDict=this.createDict(CFFTopDict,this.parseDict(dictRaw),cff.strings);this.parsePrivateDict(fontDict),cff.fdArray.push(fontDict)}encoding=null,charset=this.parseCharsets(topDict.getByName("charset"),charStringIndex.count,cff.strings,!0),cff.fdSelect=this.parseFDSelect(topDict.getByName("FDSelect"),charStringIndex.count)}else charset=this.parseCharsets(topDict.getByName("charset"),charStringIndex.count,cff.strings,!1),encoding=this.parseEncoding(topDict.getByName("Encoding"),properties,cff.strings,charset.charset);cff.charset=charset,cff.encoding=encoding;const charStringsAndSeacs=this.parseCharStrings({charStrings:charStringIndex,localSubrIndex:topDict.privateDict.subrsIndex,globalSubrIndex:globalSubrIndex.obj,fdSelect:cff.fdSelect,fdArray:cff.fdArray,privateDict:topDict.privateDict});return cff.charStrings=charStringsAndSeacs.charStrings,cff.seacs=charStringsAndSeacs.seacs,cff.widths=charStringsAndSeacs.widths,cff}parseHeader(){let bytes=this.bytes;const bytesLength=bytes.length;let offset=0;for(;offset<bytesLength&&bytes[offset]!==1;)++offset;if(offset>=bytesLength)throw new _util2.FormatError("Invalid CFF header");offset!==0&&((0,_util2.info)("cff data is shifted"),bytes=bytes.subarray(offset),this.bytes=bytes);const major=bytes[0],minor=bytes[1],hdrSize=bytes[2],offSize=bytes[3];return{obj:new CFFHeader(major,minor,hdrSize,offSize),endPos:hdrSize}}parseDict(dict){let pos=0;function parseOperand(){let value=dict[pos++];return value===30?parseFloatOperand():value===28?(value=dict[pos++],value=(value<<24|dict[pos++]<<16)>>16,value):value===29?(value=dict[pos++],value=value<<8|dict[pos++],value=value<<8|dict[pos++],value=value<<8|dict[pos++],value):value>=32&&value<=246?value-139:value>=247&&value<=250?(value-247)*256+dict[pos++]+108:value>=251&&value<=254?-((value-251)*256)-dict[pos++]-108:((0,_util2.warn)('CFFParser_parseDict: "'+value+'" is a reserved command.'),NaN)}__name2(parseOperand,"parseOperand"),__name(parseOperand,"parseOperand");function parseFloatOperand(){let str="";const lookup=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"],length=dict.length;for(;pos<length;){const b=dict[pos++],b1=b>>4,b2=b&15;if(b1===15||(str+=lookup[b1],b2===15))break;str+=lookup[b2]}return parseFloat(str)}__name2(parseFloatOperand,"parseFloatOperand"),__name(parseFloatOperand,"parseFloatOperand");let operands=[];const entries=[];pos=0;const end=dict.length;for(;pos<end;){let b=dict[pos];b<=21?(b===12&&(b=b<<8|dict[++pos]),entries.push([b,operands]),operands=[],++pos):operands.push(parseOperand())}return entries}parseIndex(pos){const cffIndex=new CFFIndex,bytes=this.bytes,count=bytes[pos++]<<8|bytes[pos++],offsets=[];let end=pos,i,ii;if(count!==0){const offsetSize=bytes[pos++],startPos=pos+(count+1)*offsetSize-1;for(i=0,ii=count+1;i<ii;++i){let offset=0;for(let j=0;j<offsetSize;++j)offset<<=8,offset+=bytes[pos++];offsets.push(startPos+offset)}end=offsets[count]}for(i=0,ii=offsets.length-1;i<ii;++i){const offsetStart=offsets[i],offsetEnd=offsets[i+1];cffIndex.add(bytes.subarray(offsetStart,offsetEnd))}return{obj:cffIndex,endPos:end}}parseNameIndex(index){const names=[];for(let i=0,ii=index.count;i<ii;++i){const name=index.get(i);names.push((0,_util2.bytesToString)(name))}return names}parseStringIndex(index){const strings=new CFFStrings;for(let i=0,ii=index.count;i<ii;++i){const data=index.get(i);strings.add((0,_util2.bytesToString)(data))}return strings}createDict(Type,dict,strings){const cffDict=new Type(strings);for(let i=0,ii=dict.length;i<ii;++i){const pair=dict[i],key=pair[0],value=pair[1];cffDict.setByKey(key,value)}return cffDict}parseCharString(state,data,localSubrIndex,globalSubrIndex){if(!data||state.callDepth>MAX_SUBR_NESTING)return!1;let stackSize=state.stackSize;const stack=state.stack,length=data.length;for(let j=0;j<length;){const value=data[j++];let validationCommand=null;if(value===12){const q=data[j++];q===0?(data[j-2]=139,data[j-1]=22,stackSize=0):validationCommand=CharstringValidationData12[q]}else if(value===28)stack[stackSize]=(data[j]<<24|data[j+1]<<16)>>16,j+=2,stackSize++;else if(value===14){if(stackSize>=4&&(stackSize-=4,this.seacAnalysisEnabled))return state.seac=stack.slice(stackSize,stackSize+4),!1;validationCommand=CharstringValidationData[value]}else if(value>=32&&value<=246)stack[stackSize]=value-139,stackSize++;else if(value>=247&&value<=254)stack[stackSize]=value<251?(value-247<<8)+data[j]+108:-(value-251<<8)-data[j]-108,j++,stackSize++;else if(value===255)stack[stackSize]=(data[j]<<24|data[j+1]<<16|data[j+2]<<8|data[j+3])/65536,j+=4,stackSize++;else if(value===19||value===20)state.hints+=stackSize>>1,j+=state.hints+7>>3,stackSize%=2,validationCommand=CharstringValidationData[value];else if(value===10||value===29){let subrsIndex;if(value===10?subrsIndex=localSubrIndex:subrsIndex=globalSubrIndex,!subrsIndex)return validationCommand=CharstringValidationData[value],(0,_util2.warn)("Missing subrsIndex for "+validationCommand.id),!1;let bias=32768;subrsIndex.count<1240?bias=107:subrsIndex.count<33900&&(bias=1131);const subrNumber=stack[--stackSize]+bias;if(subrNumber<0||subrNumber>=subrsIndex.count||isNaN(subrNumber))return validationCommand=CharstringValidationData[value],(0,_util2.warn)("Out of bounds subrIndex for "+validationCommand.id),!1;if(state.stackSize=stackSize,state.callDepth++,!this.parseCharString(state,subrsIndex.get(subrNumber),localSubrIndex,globalSubrIndex))return!1;state.callDepth--,stackSize=state.stackSize;continue}else{if(value===11)return state.stackSize=stackSize,!0;value===0&&j===data.length?(data[j-1]=14,validationCommand=CharstringValidationData[14]):validationCommand=CharstringValidationData[value]}if(validationCommand){if(validationCommand.stem&&(state.hints+=stackSize>>1,value===3||value===23?state.hasVStems=!0:state.hasVStems&&(value===1||value===18)&&((0,_util2.warn)("CFF stem hints are in wrong order"),data[j-1]=value===1?3:23)),"min"in validationCommand&&!state.undefStack&&stackSize<validationCommand.min)return(0,_util2.warn)("Not enough parameters for "+validationCommand.id+"; actual: "+stackSize+", expected: "+validationCommand.min),stackSize===0?(data[j-1]=14,!0):!1;state.firstStackClearing&&validationCommand.stackClearing&&(state.firstStackClearing=!1,stackSize-=validationCommand.min,stackSize>=2&&validationCommand.stem?stackSize%=2:stackSize>1&&(0,_util2.warn)("Found too many parameters for stack-clearing command"),stackSize>0&&(state.width=stack[stackSize-1])),"stackDelta"in validationCommand?("stackFn"in validationCommand&&validationCommand.stackFn(stack,stackSize),stackSize+=validationCommand.stackDelta):validationCommand.stackClearing?stackSize=0:validationCommand.resetStack?(stackSize=0,state.undefStack=!1):validationCommand.undefStack&&(stackSize=0,state.undefStack=!0,state.firstStackClearing=!1)}}return state.stackSize=stackSize,!0}parseCharStrings({charStrings,localSubrIndex,globalSubrIndex,fdSelect,fdArray,privateDict}){const seacs=[],widths=[],count=charStrings.count;for(let i=0;i<count;i++){const charstring=charStrings.get(i),state={callDepth:0,stackSize:0,stack:[],undefStack:!0,hints:0,firstStackClearing:!0,seac:null,width:null,hasVStems:!1};let valid=!0,localSubrToUse=null,privateDictToUse=privateDict;if(fdSelect&&fdArray.length){const fdIndex=fdSelect.getFDIndex(i);fdIndex===-1&&((0,_util2.warn)("Glyph index is not in fd select."),valid=!1),fdIndex>=fdArray.length&&((0,_util2.warn)("Invalid fd index for glyph index."),valid=!1),valid&&(privateDictToUse=fdArray[fdIndex].privateDict,localSubrToUse=privateDictToUse.subrsIndex)}else localSubrIndex&&(localSubrToUse=localSubrIndex);if(valid&&(valid=this.parseCharString(state,charstring,localSubrToUse,globalSubrIndex)),state.width!==null){const nominalWidth=privateDictToUse.getByName("nominalWidthX");widths[i]=nominalWidth+state.width}else{const defaultWidth=privateDictToUse.getByName("defaultWidthX");widths[i]=defaultWidth}state.seac!==null&&(seacs[i]=state.seac),valid||charStrings.set(i,new Uint8Array([14]))}return{charStrings,seacs,widths}}emptyPrivateDictionary(parentDict){const privateDict=this.createDict(CFFPrivateDict,[],parentDict.strings);parentDict.setByKey(18,[0,0]),parentDict.privateDict=privateDict}parsePrivateDict(parentDict){if(!parentDict.hasName("Private")){this.emptyPrivateDictionary(parentDict);return}const privateOffset=parentDict.getByName("Private");if(!Array.isArray(privateOffset)||privateOffset.length!==2){parentDict.removeByName("Private");return}const size=privateOffset[0],offset=privateOffset[1];if(size===0||offset>=this.bytes.length){this.emptyPrivateDictionary(parentDict);return}const privateDictEnd=offset+size,dictData=this.bytes.subarray(offset,privateDictEnd),dict=this.parseDict(dictData),privateDict=this.createDict(CFFPrivateDict,dict,parentDict.strings);if(parentDict.privateDict=privateDict,!privateDict.getByName("Subrs"))return;const subrsOffset=privateDict.getByName("Subrs"),relativeOffset=offset+subrsOffset;if(subrsOffset===0||relativeOffset>=this.bytes.length){this.emptyPrivateDictionary(parentDict);return}const subrsIndex=this.parseIndex(relativeOffset);privateDict.subrsIndex=subrsIndex.obj}parseCharsets(pos,length,strings,cid){if(pos===0)return new CFFCharset(!0,CFFCharsetPredefinedTypes.ISO_ADOBE,_charsets.ISOAdobeCharset);if(pos===1)return new CFFCharset(!0,CFFCharsetPredefinedTypes.EXPERT,_charsets.ExpertCharset);if(pos===2)return new CFFCharset(!0,CFFCharsetPredefinedTypes.EXPERT_SUBSET,_charsets.ExpertSubsetCharset);const bytes=this.bytes,start=pos,format=bytes[pos++],charset=[cid?0:".notdef"];let id,count,i;switch(length-=1,format){case 0:for(i=0;i<length;i++)id=bytes[pos++]<<8|bytes[pos++],charset.push(cid?id:strings.get(id));break;case 1:for(;charset.length<=length;)for(id=bytes[pos++]<<8|bytes[pos++],count=bytes[pos++],i=0;i<=count;i++)charset.push(cid?id++:strings.get(id++));break;case 2:for(;charset.length<=length;)for(id=bytes[pos++]<<8|bytes[pos++],count=bytes[pos++]<<8|bytes[pos++],i=0;i<=count;i++)charset.push(cid?id++:strings.get(id++));break;default:throw new _util2.FormatError("Unknown charset format")}const end=pos,raw=bytes.subarray(start,end);return new CFFCharset(!1,format,charset,raw)}parseEncoding(pos,properties,strings,charset){const encoding=Object.create(null),bytes=this.bytes;let predefined=!1,format,i,ii,raw=null;function readSupplement(){const supplementsCount=bytes[pos++];for(i=0;i<supplementsCount;i++){const code=bytes[pos++],sid=(bytes[pos++]<<8)+(bytes[pos++]&255);encoding[code]=charset.indexOf(strings.get(sid))}}if(__name2(readSupplement,"readSupplement"),__name(readSupplement,"readSupplement"),pos===0||pos===1){predefined=!0,format=pos;const baseEncoding=pos?_encodings.ExpertEncoding:_encodings.StandardEncoding;for(i=0,ii=charset.length;i<ii;i++){const index=baseEncoding.indexOf(charset[i]);index!==-1&&(encoding[index]=i)}}else{const dataStart=pos;switch(format=bytes[pos++],format&127){case 0:const glyphsCount=bytes[pos++];for(i=1;i<=glyphsCount;i++)encoding[bytes[pos++]]=i;break;case 1:const rangesCount=bytes[pos++];let gid=1;for(i=0;i<rangesCount;i++){const start=bytes[pos++],left=bytes[pos++];for(let j=start;j<=start+left;j++)encoding[j]=gid++}break;default:throw new _util2.FormatError(`Unknown encoding format: ${format} in CFF`)}const dataEnd=pos;format&128&&(bytes[dataStart]&=127,readSupplement()),raw=bytes.subarray(dataStart,dataEnd)}return format&=127,new CFFEncoding(predefined,format,encoding,raw)}parseFDSelect(pos,length){const bytes=this.bytes,format=bytes[pos++],fdSelect=[];let i;switch(format){case 0:for(i=0;i<length;++i){const id=bytes[pos++];fdSelect.push(id)}break;case 3:const rangesCount=bytes[pos++]<<8|bytes[pos++];for(i=0;i<rangesCount;++i){let first=bytes[pos++]<<8|bytes[pos++];i===0&&first!==0&&((0,_util2.warn)("parseFDSelect: The first range must have a first GID of 0 -- trying to recover."),first=0);const fdIndex=bytes[pos++],next=bytes[pos]<<8|bytes[pos+1];for(let j=first;j<next;++j)fdSelect.push(fdIndex)}pos+=2;break;default:throw new _util2.FormatError(`parseFDSelect: Unknown format "${format}".`)}if(fdSelect.length!==length)throw new _util2.FormatError("parseFDSelect: Invalid font data.");return new CFFFDSelect(format,fdSelect)}};__name(_CFFParser,"CFFParser");let CFFParser=_CFFParser;exports3.CFFParser=CFFParser;const _CFF=class{static{__name2(this,"_CFF")}constructor(){this.header=null,this.names=[],this.topDict=null,this.strings=new CFFStrings,this.globalSubrIndex=null,this.encoding=null,this.charset=null,this.charStrings=null,this.fdArray=[],this.fdSelect=null,this.isCIDFont=!1}duplicateFirstGlyph(){if(this.charStrings.count>=65535){(0,_util2.warn)("Not enough space in charstrings to duplicate first glyph.");return}const glyphZero=this.charStrings.get(0);this.charStrings.add(glyphZero),this.isCIDFont&&this.fdSelect.fdSelect.push(this.fdSelect.fdSelect[0])}hasGlyphId(id){return id<0||id>=this.charStrings.count?!1:this.charStrings.get(id).length>0}};__name(_CFF,"CFF");let CFF=_CFF;exports3.CFF=CFF;const _CFFHeader=class{static{__name2(this,"_CFFHeader")}constructor(major,minor,hdrSize,offSize){this.major=major,this.minor=minor,this.hdrSize=hdrSize,this.offSize=offSize}};__name(_CFFHeader,"CFFHeader");let CFFHeader=_CFFHeader;exports3.CFFHeader=CFFHeader;const _CFFStrings=class{static{__name2(this,"_CFFStrings")}constructor(){this.strings=[]}get(index){return index>=0&&index<=NUM_STANDARD_CFF_STRINGS-1?CFFStandardStrings[index]:index-NUM_STANDARD_CFF_STRINGS<=this.strings.length?this.strings[index-NUM_STANDARD_CFF_STRINGS]:CFFStandardStrings[0]}getSID(str){let index=CFFStandardStrings.indexOf(str);return index!==-1?index:(index=this.strings.indexOf(str),index!==-1?index+NUM_STANDARD_CFF_STRINGS:-1)}add(value){this.strings.push(value)}get count(){return this.strings.length}};__name(_CFFStrings,"CFFStrings");let CFFStrings=_CFFStrings;exports3.CFFStrings=CFFStrings;const _CFFIndex=class{static{__name2(this,"_CFFIndex")}constructor(){this.objects=[],this.length=0}add(data){this.length+=data.length,this.objects.push(data)}set(index,data){this.length+=data.length-this.objects[index].length,this.objects[index]=data}get(index){return this.objects[index]}get count(){return this.objects.length}};__name(_CFFIndex,"CFFIndex");let CFFIndex=_CFFIndex;exports3.CFFIndex=CFFIndex;const _CFFDict=class{static{__name2(this,"_CFFDict")}constructor(tables,strings){this.keyToNameMap=tables.keyToNameMap,this.nameToKeyMap=tables.nameToKeyMap,this.defaults=tables.defaults,this.types=tables.types,this.opcodes=tables.opcodes,this.order=tables.order,this.strings=strings,this.values=Object.create(null)}setByKey(key,value){if(!(key in this.keyToNameMap))return!1;const valueLength=value.length;if(valueLength===0)return!0;for(let i=0;i<valueLength;i++)if(isNaN(value[i]))return(0,_util2.warn)('Invalid CFFDict value: "'+value+'" for key "'+key+'".'),!0;const type=this.types[key];return(type==="num"||type==="sid"||type==="offset")&&(value=value[0]),this.values[key]=value,!0}setByName(name,value){if(!(name in this.nameToKeyMap))throw new _util2.FormatError(`Invalid dictionary name "${name}"`);this.values[this.nameToKeyMap[name]]=value}hasName(name){return this.nameToKeyMap[name]in this.values}getByName(name){if(!(name in this.nameToKeyMap))throw new _util2.FormatError(`Invalid dictionary name ${name}"`);const key=this.nameToKeyMap[name];return key in this.values?this.values[key]:this.defaults[key]}removeByName(name){delete this.values[this.nameToKeyMap[name]]}static createTables(layout){const tables={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]};for(let i=0,ii=layout.length;i<ii;++i){const entry=layout[i],key=Array.isArray(entry[0])?(entry[0][0]<<8)+entry[0][1]:entry[0];tables.keyToNameMap[key]=entry[1],tables.nameToKeyMap[entry[1]]=key,tables.types[key]=entry[2],tables.defaults[key]=entry[3],tables.opcodes[key]=Array.isArray(entry[0])?entry[0]:[entry[0]],tables.order.push(key)}return tables}};__name(_CFFDict,"CFFDict");let CFFDict=_CFFDict;const CFFTopDictLayout=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[.001,0,0,.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]],_CFFTopDict=class _CFFTopDict2 extends CFFDict{static{__name2(this,"_CFFTopDict")}static get tables(){return(0,_util2.shadow)(this,"tables",this.createTables(CFFTopDictLayout))}constructor(strings){super(_CFFTopDict2.tables,strings),this.privateDict=null}};__name(_CFFTopDict,"CFFTopDict");let CFFTopDict=_CFFTopDict;exports3.CFFTopDict=CFFTopDict;const CFFPrivateDictLayout=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]],_CFFPrivateDict=class _CFFPrivateDict2 extends CFFDict{static{__name2(this,"_CFFPrivateDict")}static get tables(){return(0,_util2.shadow)(this,"tables",this.createTables(CFFPrivateDictLayout))}constructor(strings){super(_CFFPrivateDict2.tables,strings),this.subrsIndex=null}};__name(_CFFPrivateDict,"CFFPrivateDict");let CFFPrivateDict=_CFFPrivateDict;exports3.CFFPrivateDict=CFFPrivateDict;const CFFCharsetPredefinedTypes={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2},_CFFCharset=class{static{__name2(this,"_CFFCharset")}constructor(predefined,format,charset,raw){this.predefined=predefined,this.format=format,this.charset=charset,this.raw=raw}};__name(_CFFCharset,"CFFCharset");let CFFCharset=_CFFCharset;exports3.CFFCharset=CFFCharset;const _CFFEncoding=class{static{__name2(this,"_CFFEncoding")}constructor(predefined,format,encoding,raw){this.predefined=predefined,this.format=format,this.encoding=encoding,this.raw=raw}};__name(_CFFEncoding,"CFFEncoding");let CFFEncoding=_CFFEncoding;const _CFFFDSelect=class{static{__name2(this,"_CFFFDSelect")}constructor(format,fdSelect){this.format=format,this.fdSelect=fdSelect}getFDIndex(glyphIndex){return glyphIndex<0||glyphIndex>=this.fdSelect.length?-1:this.fdSelect[glyphIndex]}};__name(_CFFFDSelect,"CFFFDSelect");let CFFFDSelect=_CFFFDSelect;exports3.CFFFDSelect=CFFFDSelect;const _CFFOffsetTracker=class{static{__name2(this,"_CFFOffsetTracker")}constructor(){this.offsets=Object.create(null)}isTracking(key){return key in this.offsets}track(key,location){if(key in this.offsets)throw new _util2.FormatError(`Already tracking location of ${key}`);this.offsets[key]=location}offset(value){for(const key in this.offsets)this.offsets[key]+=value}setEntryLocation(key,values,output){if(!(key in this.offsets))throw new _util2.FormatError(`Not tracking location of ${key}`);const data=output.data,dataOffset=this.offsets[key],size=5;for(let i=0,ii=values.length;i<ii;++i){const offset0=i*size+dataOffset,offset1=offset0+1,offset2=offset0+2,offset3=offset0+3,offset4=offset0+4;if(data[offset0]!==29||data[offset1]!==0||data[offset2]!==0||data[offset3]!==0||data[offset4]!==0)throw new _util2.FormatError("writing to an offset that is not empty");const value=values[i];data[offset0]=29,data[offset1]=value>>24&255,data[offset2]=value>>16&255,data[offset3]=value>>8&255,data[offset4]=value&255}}};__name(_CFFOffsetTracker,"CFFOffsetTracker");let CFFOffsetTracker=_CFFOffsetTracker;const _CFFCompiler=class _CFFCompiler2{static{__name2(this,"_CFFCompiler")}constructor(cff){this.cff=cff}compile(){const cff=this.cff,output={data:[],length:0,add(data){this.data=this.data.concat(data),this.length=this.data.length}},header=this.compileHeader(cff.header);output.add(header);const nameIndex=this.compileNameIndex(cff.names);if(output.add(nameIndex),cff.isCIDFont&&cff.topDict.hasName("FontMatrix")){const base=cff.topDict.getByName("FontMatrix");cff.topDict.removeByName("FontMatrix");for(let i=0,ii=cff.fdArray.length;i<ii;i++){const subDict=cff.fdArray[i];let matrix=base.slice(0);subDict.hasName("FontMatrix")&&(matrix=_util2.Util.transform(matrix,subDict.getByName("FontMatrix"))),subDict.setByName("FontMatrix",matrix)}}const xuid=cff.topDict.getByName("XUID");xuid&&xuid.length>16&&cff.topDict.removeByName("XUID"),cff.topDict.setByName("charset",0);let compiled=this.compileTopDicts([cff.topDict],output.length,cff.isCIDFont);output.add(compiled.output);const topDictTracker=compiled.trackers[0],stringIndex=this.compileStringIndex(cff.strings.strings);output.add(stringIndex);const globalSubrIndex=this.compileIndex(cff.globalSubrIndex);if(output.add(globalSubrIndex),cff.encoding&&cff.topDict.hasName("Encoding"))if(cff.encoding.predefined)topDictTracker.setEntryLocation("Encoding",[cff.encoding.format],output);else{const encoding=this.compileEncoding(cff.encoding);topDictTracker.setEntryLocation("Encoding",[output.length],output),output.add(encoding)}const charset=this.compileCharset(cff.charset,cff.charStrings.count,cff.strings,cff.isCIDFont);topDictTracker.setEntryLocation("charset",[output.length],output),output.add(charset);const charStrings=this.compileCharStrings(cff.charStrings);if(topDictTracker.setEntryLocation("CharStrings",[output.length],output),output.add(charStrings),cff.isCIDFont){topDictTracker.setEntryLocation("FDSelect",[output.length],output);const fdSelect=this.compileFDSelect(cff.fdSelect);output.add(fdSelect),compiled=this.compileTopDicts(cff.fdArray,output.length,!0),topDictTracker.setEntryLocation("FDArray",[output.length],output),output.add(compiled.output);const fontDictTrackers=compiled.trackers;this.compilePrivateDicts(cff.fdArray,fontDictTrackers,output)}return this.compilePrivateDicts([cff.topDict],[topDictTracker],output),output.add([0]),output.data}encodeNumber(value){return Number.isInteger(value)?this.encodeInteger(value):this.encodeFloat(value)}static get EncodeFloatRegExp(){return(0,_util2.shadow)(this,"EncodeFloatRegExp",/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/)}encodeFloat(num){let value=num.toString();const m=_CFFCompiler2.EncodeFloatRegExp.exec(value);if(m){const epsilon=parseFloat("1e"+((m[2]?+m[2]:0)+m[1].length));value=(Math.round(num*epsilon)/epsilon).toString()}let nibbles="",i,ii;for(i=0,ii=value.length;i<ii;++i){const a=value[i];a==="e"?nibbles+=value[++i]==="-"?"c":"b":a==="."?nibbles+="a":a==="-"?nibbles+="e":nibbles+=a}nibbles+=nibbles.length&1?"f":"ff";const out=[30];for(i=0,ii=nibbles.length;i<ii;i+=2)out.push(parseInt(nibbles.substring(i,i+2),16));return out}encodeInteger(value){let code;return value>=-107&&value<=107?code=[value+139]:value>=108&&value<=1131?(value-=108,code=[(value>>8)+247,value&255]):value>=-1131&&value<=-108?(value=-value-108,code=[(value>>8)+251,value&255]):value>=-32768&&value<=32767?code=[28,value>>8&255,value&255]:code=[29,value>>24&255,value>>16&255,value>>8&255,value&255],code}compileHeader(header){return[header.major,header.minor,4,header.offSize]}compileNameIndex(names){const nameIndex=new CFFIndex;for(let i=0,ii=names.length;i<ii;++i){const name=names[i],length=Math.min(name.length,127);let sanitizedName=new Array(length);for(let j=0;j<length;j++){let char=name[j];(char<"!"||char>"~"||char==="["||char==="]"||char==="("||char===")"||char==="{"||char==="}"||char==="<"||char===">"||char==="/"||char==="%")&&(char="_"),sanitizedName[j]=char}sanitizedName=sanitizedName.join(""),sanitizedName===""&&(sanitizedName="Bad_Font_Name"),nameIndex.add((0,_util2.stringToBytes)(sanitizedName))}return this.compileIndex(nameIndex)}compileTopDicts(dicts,length,removeCidKeys){const fontDictTrackers=[];let fdArrayIndex=new CFFIndex;for(let i=0,ii=dicts.length;i<ii;++i){const fontDict=dicts[i];removeCidKeys&&(fontDict.removeByName("CIDFontVersion"),fontDict.removeByName("CIDFontRevision"),fontDict.removeByName("CIDFontType"),fontDict.removeByName("CIDCount"),fontDict.removeByName("UIDBase"));const fontDictTracker=new CFFOffsetTracker,fontDictData=this.compileDict(fontDict,fontDictTracker);fontDictTrackers.push(fontDictTracker),fdArrayIndex.add(fontDictData),fontDictTracker.offset(length)}return fdArrayIndex=this.compileIndex(fdArrayIndex,fontDictTrackers),{trackers:fontDictTrackers,output:fdArrayIndex}}compilePrivateDicts(dicts,trackers,output){for(let i=0,ii=dicts.length;i<ii;++i){const fontDict=dicts[i],privateDict=fontDict.privateDict;if(!privateDict||!fontDict.hasName("Private"))throw new _util2.FormatError("There must be a private dictionary.");const privateDictTracker=new CFFOffsetTracker,privateDictData=this.compileDict(privateDict,privateDictTracker);let outputLength=output.length;if(privateDictTracker.offset(outputLength),privateDictData.length||(outputLength=0),trackers[i].setEntryLocation("Private",[privateDictData.length,outputLength],output),output.add(privateDictData),privateDict.subrsIndex&&privateDict.hasName("Subrs")){const subrs=this.compileIndex(privateDict.subrsIndex);privateDictTracker.setEntryLocation("Subrs",[privateDictData.length],output),output.add(subrs)}}}compileDict(dict,offsetTracker){const out=[];for(const key of dict.order){if(!(key in dict.values))continue;let values=dict.values[key],types=dict.types[key];if(Array.isArray(types)||(types=[types]),Array.isArray(values)||(values=[values]),values.length!==0){for(let j=0,jj=types.length;j<jj;++j){const type=types[j],value=values[j];switch(type){case"num":case"sid":out.push(...this.encodeNumber(value));break;case"offset":const name=dict.keyToNameMap[key];offsetTracker.isTracking(name)||offsetTracker.track(name,out.length),out.push(29,0,0,0,0);break;case"array":case"delta":out.push(...this.encodeNumber(value));for(let k=1,kk=values.length;k<kk;++k)out.push(...this.encodeNumber(values[k]));break;default:throw new _util2.FormatError(`Unknown data type of ${type}`)}}out.push(...dict.opcodes[key])}}return out}compileStringIndex(strings){const stringIndex=new CFFIndex;for(let i=0,ii=strings.length;i<ii;++i)stringIndex.add((0,_util2.stringToBytes)(strings[i]));return this.compileIndex(stringIndex)}compileGlobalSubrIndex(){const globalSubrIndex=this.cff.globalSubrIndex;this.out.writeByteArray(this.compileIndex(globalSubrIndex))}compileCharStrings(charStrings){const charStringsIndex=new CFFIndex;for(let i=0;i<charStrings.count;i++){const glyph=charStrings.get(i);if(glyph.length===0){charStringsIndex.add(new Uint8Array([139,14]));continue}charStringsIndex.add(glyph)}return this.compileIndex(charStringsIndex)}compileCharset(charset,numGlyphs,strings,isCIDFont){let out;const numGlyphsLessNotDef=numGlyphs-1;if(isCIDFont)out=new Uint8Array([2,0,0,numGlyphsLessNotDef>>8&255,numGlyphsLessNotDef&255]);else{const length=1+numGlyphsLessNotDef*2;out=new Uint8Array(length),out[0]=0;let charsetIndex=0;const numCharsets=charset.charset.length;let warned=!1;for(let i=1;i<out.length;i+=2){let sid=0;if(charsetIndex<numCharsets){const name=charset.charset[charsetIndex++];sid=strings.getSID(name),sid===-1&&(sid=0,warned||(warned=!0,(0,_util2.warn)(`Couldn't find ${name} in CFF strings`)))}out[i]=sid>>8&255,out[i+1]=sid&255}}return this.compileTypedArray(out)}compileEncoding(encoding){return this.compileTypedArray(encoding.raw)}compileFDSelect(fdSelect){const format=fdSelect.format;let out,i;switch(format){case 0:for(out=new Uint8Array(1+fdSelect.fdSelect.length),out[0]=format,i=0;i<fdSelect.fdSelect.length;i++)out[i+1]=fdSelect.fdSelect[i];break;case 3:const start=0;let lastFD=fdSelect.fdSelect[0];const ranges=[format,0,0,start>>8&255,start&255,lastFD];for(i=1;i<fdSelect.fdSelect.length;i++){const currentFD=fdSelect.fdSelect[i];currentFD!==lastFD&&(ranges.push(i>>8&255,i&255,currentFD),lastFD=currentFD)}const numRanges=(ranges.length-3)/3;ranges[1]=numRanges>>8&255,ranges[2]=numRanges&255,ranges.push(i>>8&255,i&255),out=new Uint8Array(ranges);break}return this.compileTypedArray(out)}compileTypedArray(data){const out=[];for(let i=0,ii=data.length;i<ii;++i)out[i]=data[i];return out}compileIndex(index,trackers=[]){const objects=index.objects,count=objects.length;if(count===0)return[0,0];const data=[count>>8&255,count&255];let lastOffset=1,i;for(i=0;i<count;++i)lastOffset+=objects[i].length;let offsetSize;lastOffset<256?offsetSize=1:lastOffset<65536?offsetSize=2:lastOffset<16777216?offsetSize=3:offsetSize=4,data.push(offsetSize);let relativeOffset=1;for(i=0;i<count+1;i++)offsetSize===1?data.push(relativeOffset&255):offsetSize===2?data.push(relativeOffset>>8&255,relativeOffset&255):offsetSize===3?data.push(relativeOffset>>16&255,relativeOffset>>8&255,relativeOffset&255):data.push(relativeOffset>>>24&255,relativeOffset>>16&255,relativeOffset>>8&255,relativeOffset&255),objects[i]&&(relativeOffset+=objects[i].length);for(i=0;i<count;i++){trackers[i]&&trackers[i].offset(data.length);for(let j=0,jj=objects[i].length;j<jj;j++)data.push(objects[i][j])}return data}};__name(_CFFCompiler,"CFFCompiler");let CFFCompiler=_CFFCompiler;exports3.CFFCompiler=CFFCompiler},(__unused_webpack_module2,exports3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.ISOAdobeCharset=exports3.ExpertSubsetCharset=exports3.ExpertCharset=void 0;const ISOAdobeCharset=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"];exports3.ISOAdobeCharset=ISOAdobeCharset;const ExpertCharset=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];exports3.ExpertCharset=ExpertCharset;const ExpertSubsetCharset=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"];exports3.ExpertSubsetCharset=ExpertSubsetCharset},(__unused_webpack_module2,exports3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.ZapfDingbatsEncoding=exports3.WinAnsiEncoding=exports3.SymbolSetEncoding=exports3.StandardEncoding=exports3.MacRomanEncoding=exports3.ExpertEncoding=void 0,exports3.getEncoding=getEncoding;const ExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];exports3.ExpertEncoding=ExpertEncoding;const MacExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall","","","",""],MacRomanEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"];exports3.MacRomanEncoding=MacRomanEncoding;const StandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls","","","",""];exports3.StandardEncoding=StandardEncoding;const WinAnsiEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"];exports3.WinAnsiEncoding=WinAnsiEncoding;const SymbolSetEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt",""];exports3.SymbolSetEncoding=SymbolSetEncoding;const ZapfDingbatsEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191",""];exports3.ZapfDingbatsEncoding=ZapfDingbatsEncoding;function getEncoding(encodingName){switch(encodingName){case"WinAnsiEncoding":return WinAnsiEncoding;case"StandardEncoding":return StandardEncoding;case"MacRomanEncoding":return MacRomanEncoding;case"SymbolSetEncoding":return SymbolSetEncoding;case"ZapfDingbatsEncoding":return ZapfDingbatsEncoding;case"ExpertEncoding":return ExpertEncoding;case"MacExpertEncoding":return MacExpertEncoding;default:return null}}__name2(getEncoding,"getEncoding"),__name(getEncoding,"getEncoding")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.SEAC_ANALYSIS_ENABLED=exports3.MacStandardGlyphOrdering=exports3.FontFlags=void 0,exports3.getFontType=getFontType,exports3.normalizeFontName=normalizeFontName,exports3.recoverGlyphName=recoverGlyphName,exports3.type1FontGlyphMapping=type1FontGlyphMapping;var _util2=__w_pdfjs_require__3(2),_encodings=__w_pdfjs_require__3(37),_glyphlist=__w_pdfjs_require__3(39),_unicode=__w_pdfjs_require__3(40);const SEAC_ANALYSIS_ENABLED=!0;exports3.SEAC_ANALYSIS_ENABLED=SEAC_ANALYSIS_ENABLED;const FontFlags={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144};exports3.FontFlags=FontFlags;const MacStandardGlyphOrdering=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];exports3.MacStandardGlyphOrdering=MacStandardGlyphOrdering;function getFontType(type,subtype,isStandardFont=!1){switch(type){case"Type1":return isStandardFont?_util2.FontType.TYPE1STANDARD:subtype==="Type1C"?_util2.FontType.TYPE1C:_util2.FontType.TYPE1;case"CIDFontType0":return subtype==="CIDFontType0C"?_util2.FontType.CIDFONTTYPE0C:_util2.FontType.CIDFONTTYPE0;case"OpenType":return _util2.FontType.OPENTYPE;case"TrueType":return _util2.FontType.TRUETYPE;case"CIDFontType2":return _util2.FontType.CIDFONTTYPE2;case"MMType1":return _util2.FontType.MMTYPE1;case"Type0":return _util2.FontType.TYPE0;default:return _util2.FontType.UNKNOWN}}__name2(getFontType,"getFontType"),__name(getFontType,"getFontType");function recoverGlyphName(name,glyphsUnicodeMap){if(glyphsUnicodeMap[name]!==void 0)return name;const unicode=(0,_unicode.getUnicodeForGlyph)(name,glyphsUnicodeMap);if(unicode!==-1){for(const key in glyphsUnicodeMap)if(glyphsUnicodeMap[key]===unicode)return key}return(0,_util2.info)("Unable to recover a standard glyph name for: "+name),name}__name2(recoverGlyphName,"recoverGlyphName"),__name(recoverGlyphName,"recoverGlyphName");function type1FontGlyphMapping(properties,builtInEncoding,glyphNames){const charCodeToGlyphId=Object.create(null);let glyphId,charCode,baseEncoding;const isSymbolicFont=!!(properties.flags&FontFlags.Symbolic);if(properties.isInternalFont)for(baseEncoding=builtInEncoding,charCode=0;charCode<baseEncoding.length;charCode++)glyphId=glyphNames.indexOf(baseEncoding[charCode]),glyphId>=0?charCodeToGlyphId[charCode]=glyphId:charCodeToGlyphId[charCode]=0;else if(properties.baseEncodingName)for(baseEncoding=(0,_encodings.getEncoding)(properties.baseEncodingName),charCode=0;charCode<baseEncoding.length;charCode++)glyphId=glyphNames.indexOf(baseEncoding[charCode]),glyphId>=0?charCodeToGlyphId[charCode]=glyphId:charCodeToGlyphId[charCode]=0;else if(isSymbolicFont)for(charCode in builtInEncoding)charCodeToGlyphId[charCode]=builtInEncoding[charCode];else for(baseEncoding=_encodings.StandardEncoding,charCode=0;charCode<baseEncoding.length;charCode++)glyphId=glyphNames.indexOf(baseEncoding[charCode]),glyphId>=0?charCodeToGlyphId[charCode]=glyphId:charCodeToGlyphId[charCode]=0;const differences=properties.differences;let glyphsUnicodeMap;if(differences)for(charCode in differences){const glyphName=differences[charCode];if(glyphId=glyphNames.indexOf(glyphName),glyphId===-1){glyphsUnicodeMap||(glyphsUnicodeMap=(0,_glyphlist.getGlyphsUnicode)());const standardGlyphName=recoverGlyphName(glyphName,glyphsUnicodeMap);standardGlyphName!==glyphName&&(glyphId=glyphNames.indexOf(standardGlyphName))}glyphId>=0?charCodeToGlyphId[charCode]=glyphId:charCodeToGlyphId[charCode]=0}return charCodeToGlyphId}__name2(type1FontGlyphMapping,"type1FontGlyphMapping"),__name(type1FontGlyphMapping,"type1FontGlyphMapping");function normalizeFontName(name){return name.replace(/[,_]/g,"-").replace(/\s/g,"")}__name2(normalizeFontName,"normalizeFontName"),__name(normalizeFontName,"normalizeFontName")},(__unused_webpack_module2,__webpack_exports__3,__w_pdfjs_require__3)=>{__w_pdfjs_require__3.r(__webpack_exports__3),__w_pdfjs_require__3.d(__webpack_exports__3,{getDingbatsGlyphsUnicode:()=>getDingbatsGlyphsUnicode,getGlyphsUnicode:()=>getGlyphsUnicode});var _core_utils_js__WEBPACK_IMPORTED_MODULE_0__=__w_pdfjs_require__3(6);const getGlyphsUnicode=(0,_core_utils_js__WEBPACK_IMPORTED_MODULE_0__.getArrayLookupTableFactory)(function(){return["A",65,"AE",198,"AEacute",508,"AEmacron",482,"AEsmall",63462,"Aacute",193,"Aacutesmall",63457,"Abreve",258,"Abreveacute",7854,"Abrevecyrillic",1232,"Abrevedotbelow",7862,"Abrevegrave",7856,"Abrevehookabove",7858,"Abrevetilde",7860,"Acaron",461,"Acircle",9398,"Acircumflex",194,"Acircumflexacute",7844,"Acircumflexdotbelow",7852,"Acircumflexgrave",7846,"Acircumflexhookabove",7848,"Acircumflexsmall",63458,"Acircumflextilde",7850,"Acute",63177,"Acutesmall",63412,"Acyrillic",1040,"Adblgrave",512,"Adieresis",196,"Adieresiscyrillic",1234,"Adieresismacron",478,"Adieresissmall",63460,"Adotbelow",7840,"Adotmacron",480,"Agrave",192,"Agravesmall",63456,"Ahookabove",7842,"Aiecyrillic",1236,"Ainvertedbreve",514,"Alpha",913,"Alphatonos",902,"Amacron",256,"Amonospace",65313,"Aogonek",260,"Aring",197,"Aringacute",506,"Aringbelow",7680,"Aringsmall",63461,"Asmall",63329,"Atilde",195,"Atildesmall",63459,"Aybarmenian",1329,"B",66,"Bcircle",9399,"Bdotaccent",7682,"Bdotbelow",7684,"Becyrillic",1041,"Benarmenian",1330,"Beta",914,"Bhook",385,"Blinebelow",7686,"Bmonospace",65314,"Brevesmall",63220,"Bsmall",63330,"Btopbar",386,"C",67,"Caarmenian",1342,"Cacute",262,"Caron",63178,"Caronsmall",63221,"Ccaron",268,"Ccedilla",199,"Ccedillaacute",7688,"Ccedillasmall",63463,"Ccircle",9400,"Ccircumflex",264,"Cdot",266,"Cdotaccent",266,"Cedillasmall",63416,"Chaarmenian",1353,"Cheabkhasiancyrillic",1212,"Checyrillic",1063,"Chedescenderabkhasiancyrillic",1214,"Chedescendercyrillic",1206,"Chedieresiscyrillic",1268,"Cheharmenian",1347,"Chekhakassiancyrillic",1227,"Cheverticalstrokecyrillic",1208,"Chi",935,"Chook",391,"Circumflexsmall",63222,"Cmonospace",65315,"Coarmenian",1361,"Csmall",63331,"D",68,"DZ",497,"DZcaron",452,"Daarmenian",1332,"Dafrican",393,"Dcaron",270,"Dcedilla",7696,"Dcircle",9401,"Dcircumflexbelow",7698,"Dcroat",272,"Ddotaccent",7690,"Ddotbelow",7692,"Decyrillic",1044,"Deicoptic",1006,"Delta",8710,"Deltagreek",916,"Dhook",394,"Dieresis",63179,"DieresisAcute",63180,"DieresisGrave",63181,"Dieresissmall",63400,"Digammagreek",988,"Djecyrillic",1026,"Dlinebelow",7694,"Dmonospace",65316,"Dotaccentsmall",63223,"Dslash",272,"Dsmall",63332,"Dtopbar",395,"Dz",498,"Dzcaron",453,"Dzeabkhasiancyrillic",1248,"Dzecyrillic",1029,"Dzhecyrillic",1039,"E",69,"Eacute",201,"Eacutesmall",63465,"Ebreve",276,"Ecaron",282,"Ecedillabreve",7708,"Echarmenian",1333,"Ecircle",9402,"Ecircumflex",202,"Ecircumflexacute",7870,"Ecircumflexbelow",7704,"Ecircumflexdotbelow",7878,"Ecircumflexgrave",7872,"Ecircumflexhookabove",7874,"Ecircumflexsmall",63466,"Ecircumflextilde",7876,"Ecyrillic",1028,"Edblgrave",516,"Edieresis",203,"Edieresissmall",63467,"Edot",278,"Edotaccent",278,"Edotbelow",7864,"Efcyrillic",1060,"Egrave",200,"Egravesmall",63464,"Eharmenian",1335,"Ehookabove",7866,"Eightroman",8551,"Einvertedbreve",518,"Eiotifiedcyrillic",1124,"Elcyrillic",1051,"Elevenroman",8554,"Emacron",274,"Emacronacute",7702,"Emacrongrave",7700,"Emcyrillic",1052,"Emonospace",65317,"Encyrillic",1053,"Endescendercyrillic",1186,"Eng",330,"Enghecyrillic",1188,"Enhookcyrillic",1223,"Eogonek",280,"Eopen",400,"Epsilon",917,"Epsilontonos",904,"Ercyrillic",1056,"Ereversed",398,"Ereversedcyrillic",1069,"Escyrillic",1057,"Esdescendercyrillic",1194,"Esh",425,"Esmall",63333,"Eta",919,"Etarmenian",1336,"Etatonos",905,"Eth",208,"Ethsmall",63472,"Etilde",7868,"Etildebelow",7706,"Euro",8364,"Ezh",439,"Ezhcaron",494,"Ezhreversed",440,"F",70,"Fcircle",9403,"Fdotaccent",7710,"Feharmenian",1366,"Feicoptic",996,"Fhook",401,"Fitacyrillic",1138,"Fiveroman",8548,"Fmonospace",65318,"Fourroman",8547,"Fsmall",63334,"G",71,"GBsquare",13191,"Gacute",500,"Gamma",915,"Gammaafrican",404,"Gangiacoptic",1002,"Gbreve",286,"Gcaron",486,"Gcedilla",290,"Gcircle",9404,"Gcircumflex",284,"Gcommaaccent",290,"Gdot",288,"Gdotaccent",288,"Gecyrillic",1043,"Ghadarmenian",1346,"Ghemiddlehookcyrillic",1172,"Ghestrokecyrillic",1170,"Gheupturncyrillic",1168,"Ghook",403,"Gimarmenian",1331,"Gjecyrillic",1027,"Gmacron",7712,"Gmonospace",65319,"Grave",63182,"Gravesmall",63328,"Gsmall",63335,"Gsmallhook",667,"Gstroke",484,"H",72,"H18533",9679,"H18543",9642,"H18551",9643,"H22073",9633,"HPsquare",13259,"Haabkhasiancyrillic",1192,"Hadescendercyrillic",1202,"Hardsigncyrillic",1066,"Hbar",294,"Hbrevebelow",7722,"Hcedilla",7720,"Hcircle",9405,"Hcircumflex",292,"Hdieresis",7718,"Hdotaccent",7714,"Hdotbelow",7716,"Hmonospace",65320,"Hoarmenian",1344,"Horicoptic",1e3,"Hsmall",63336,"Hungarumlaut",63183,"Hungarumlautsmall",63224,"Hzsquare",13200,"I",73,"IAcyrillic",1071,"IJ",306,"IUcyrillic",1070,"Iacute",205,"Iacutesmall",63469,"Ibreve",300,"Icaron",463,"Icircle",9406,"Icircumflex",206,"Icircumflexsmall",63470,"Icyrillic",1030,"Idblgrave",520,"Idieresis",207,"Idieresisacute",7726,"Idieresiscyrillic",1252,"Idieresissmall",63471,"Idot",304,"Idotaccent",304,"Idotbelow",7882,"Iebrevecyrillic",1238,"Iecyrillic",1045,"Ifraktur",8465,"Igrave",204,"Igravesmall",63468,"Ihookabove",7880,"Iicyrillic",1048,"Iinvertedbreve",522,"Iishortcyrillic",1049,"Imacron",298,"Imacroncyrillic",1250,"Imonospace",65321,"Iniarmenian",1339,"Iocyrillic",1025,"Iogonek",302,"Iota",921,"Iotaafrican",406,"Iotadieresis",938,"Iotatonos",906,"Ismall",63337,"Istroke",407,"Itilde",296,"Itildebelow",7724,"Izhitsacyrillic",1140,"Izhitsadblgravecyrillic",1142,"J",74,"Jaarmenian",1345,"Jcircle",9407,"Jcircumflex",308,"Jecyrillic",1032,"Jheharmenian",1355,"Jmonospace",65322,"Jsmall",63338,"K",75,"KBsquare",13189,"KKsquare",13261,"Kabashkircyrillic",1184,"Kacute",7728,"Kacyrillic",1050,"Kadescendercyrillic",1178,"Kahookcyrillic",1219,"Kappa",922,"Kastrokecyrillic",1182,"Kaverticalstrokecyrillic",1180,"Kcaron",488,"Kcedilla",310,"Kcircle",9408,"Kcommaaccent",310,"Kdotbelow",7730,"Keharmenian",1364,"Kenarmenian",1343,"Khacyrillic",1061,"Kheicoptic",998,"Khook",408,"Kjecyrillic",1036,"Klinebelow",7732,"Kmonospace",65323,"Koppacyrillic",1152,"Koppagreek",990,"Ksicyrillic",1134,"Ksmall",63339,"L",76,"LJ",455,"LL",63167,"Lacute",313,"Lambda",923,"Lcaron",317,"Lcedilla",315,"Lcircle",9409,"Lcircumflexbelow",7740,"Lcommaaccent",315,"Ldot",319,"Ldotaccent",319,"Ldotbelow",7734,"Ldotbelowmacron",7736,"Liwnarmenian",1340,"Lj",456,"Ljecyrillic",1033,"Llinebelow",7738,"Lmonospace",65324,"Lslash",321,"Lslashsmall",63225,"Lsmall",63340,"M",77,"MBsquare",13190,"Macron",63184,"Macronsmall",63407,"Macute",7742,"Mcircle",9410,"Mdotaccent",7744,"Mdotbelow",7746,"Menarmenian",1348,"Mmonospace",65325,"Msmall",63341,"Mturned",412,"Mu",924,"N",78,"NJ",458,"Nacute",323,"Ncaron",327,"Ncedilla",325,"Ncircle",9411,"Ncircumflexbelow",7754,"Ncommaaccent",325,"Ndotaccent",7748,"Ndotbelow",7750,"Nhookleft",413,"Nineroman",8552,"Nj",459,"Njecyrillic",1034,"Nlinebelow",7752,"Nmonospace",65326,"Nowarmenian",1350,"Nsmall",63342,"Ntilde",209,"Ntildesmall",63473,"Nu",925,"O",79,"OE",338,"OEsmall",63226,"Oacute",211,"Oacutesmall",63475,"Obarredcyrillic",1256,"Obarreddieresiscyrillic",1258,"Obreve",334,"Ocaron",465,"Ocenteredtilde",415,"Ocircle",9412,"Ocircumflex",212,"Ocircumflexacute",7888,"Ocircumflexdotbelow",7896,"Ocircumflexgrave",7890,"Ocircumflexhookabove",7892,"Ocircumflexsmall",63476,"Ocircumflextilde",7894,"Ocyrillic",1054,"Odblacute",336,"Odblgrave",524,"Odieresis",214,"Odieresiscyrillic",1254,"Odieresissmall",63478,"Odotbelow",7884,"Ogoneksmall",63227,"Ograve",210,"Ogravesmall",63474,"Oharmenian",1365,"Ohm",8486,"Ohookabove",7886,"Ohorn",416,"Ohornacute",7898,"Ohorndotbelow",7906,"Ohorngrave",7900,"Ohornhookabove",7902,"Ohorntilde",7904,"Ohungarumlaut",336,"Oi",418,"Oinvertedbreve",526,"Omacron",332,"Omacronacute",7762,"Omacrongrave",7760,"Omega",8486,"Omegacyrillic",1120,"Omegagreek",937,"Omegaroundcyrillic",1146,"Omegatitlocyrillic",1148,"Omegatonos",911,"Omicron",927,"Omicrontonos",908,"Omonospace",65327,"Oneroman",8544,"Oogonek",490,"Oogonekmacron",492,"Oopen",390,"Oslash",216,"Oslashacute",510,"Oslashsmall",63480,"Osmall",63343,"Ostrokeacute",510,"Otcyrillic",1150,"Otilde",213,"Otildeacute",7756,"Otildedieresis",7758,"Otildesmall",63477,"P",80,"Pacute",7764,"Pcircle",9413,"Pdotaccent",7766,"Pecyrillic",1055,"Peharmenian",1354,"Pemiddlehookcyrillic",1190,"Phi",934,"Phook",420,"Pi",928,"Piwrarmenian",1363,"Pmonospace",65328,"Psi",936,"Psicyrillic",1136,"Psmall",63344,"Q",81,"Qcircle",9414,"Qmonospace",65329,"Qsmall",63345,"R",82,"Raarmenian",1356,"Racute",340,"Rcaron",344,"Rcedilla",342,"Rcircle",9415,"Rcommaaccent",342,"Rdblgrave",528,"Rdotaccent",7768,"Rdotbelow",7770,"Rdotbelowmacron",7772,"Reharmenian",1360,"Rfraktur",8476,"Rho",929,"Ringsmall",63228,"Rinvertedbreve",530,"Rlinebelow",7774,"Rmonospace",65330,"Rsmall",63346,"Rsmallinverted",641,"Rsmallinvertedsuperior",694,"S",83,"SF010000",9484,"SF020000",9492,"SF030000",9488,"SF040000",9496,"SF050000",9532,"SF060000",9516,"SF070000",9524,"SF080000",9500,"SF090000",9508,"SF100000",9472,"SF110000",9474,"SF190000",9569,"SF200000",9570,"SF210000",9558,"SF220000",9557,"SF230000",9571,"SF240000",9553,"SF250000",9559,"SF260000",9565,"SF270000",9564,"SF280000",9563,"SF360000",9566,"SF370000",9567,"SF380000",9562,"SF390000",9556,"SF400000",9577,"SF410000",9574,"SF420000",9568,"SF430000",9552,"SF440000",9580,"SF450000",9575,"SF460000",9576,"SF470000",9572,"SF480000",9573,"SF490000",9561,"SF500000",9560,"SF510000",9554,"SF520000",9555,"SF530000",9579,"SF540000",9578,"Sacute",346,"Sacutedotaccent",7780,"Sampigreek",992,"Scaron",352,"Scarondotaccent",7782,"Scaronsmall",63229,"Scedilla",350,"Schwa",399,"Schwacyrillic",1240,"Schwadieresiscyrillic",1242,"Scircle",9416,"Scircumflex",348,"Scommaaccent",536,"Sdotaccent",7776,"Sdotbelow",7778,"Sdotbelowdotaccent",7784,"Seharmenian",1357,"Sevenroman",8550,"Shaarmenian",1351,"Shacyrillic",1064,"Shchacyrillic",1065,"Sheicoptic",994,"Shhacyrillic",1210,"Shimacoptic",1004,"Sigma",931,"Sixroman",8549,"Smonospace",65331,"Softsigncyrillic",1068,"Ssmall",63347,"Stigmagreek",986,"T",84,"Tau",932,"Tbar",358,"Tcaron",356,"Tcedilla",354,"Tcircle",9417,"Tcircumflexbelow",7792,"Tcommaaccent",354,"Tdotaccent",7786,"Tdotbelow",7788,"Tecyrillic",1058,"Tedescendercyrillic",1196,"Tenroman",8553,"Tetsecyrillic",1204,"Theta",920,"Thook",428,"Thorn",222,"Thornsmall",63486,"Threeroman",8546,"Tildesmall",63230,"Tiwnarmenian",1359,"Tlinebelow",7790,"Tmonospace",65332,"Toarmenian",1337,"Tonefive",444,"Tonesix",388,"Tonetwo",423,"Tretroflexhook",430,"Tsecyrillic",1062,"Tshecyrillic",1035,"Tsmall",63348,"Twelveroman",8555,"Tworoman",8545,"U",85,"Uacute",218,"Uacutesmall",63482,"Ubreve",364,"Ucaron",467,"Ucircle",9418,"Ucircumflex",219,"Ucircumflexbelow",7798,"Ucircumflexsmall",63483,"Ucyrillic",1059,"Udblacute",368,"Udblgrave",532,"Udieresis",220,"Udieresisacute",471,"Udieresisbelow",7794,"Udieresiscaron",473,"Udieresiscyrillic",1264,"Udieresisgrave",475,"Udieresismacron",469,"Udieresissmall",63484,"Udotbelow",7908,"Ugrave",217,"Ugravesmall",63481,"Uhookabove",7910,"Uhorn",431,"Uhornacute",7912,"Uhorndotbelow",7920,"Uhorngrave",7914,"Uhornhookabove",7916,"Uhorntilde",7918,"Uhungarumlaut",368,"Uhungarumlautcyrillic",1266,"Uinvertedbreve",534,"Ukcyrillic",1144,"Umacron",362,"Umacroncyrillic",1262,"Umacrondieresis",7802,"Umonospace",65333,"Uogonek",370,"Upsilon",933,"Upsilon1",978,"Upsilonacutehooksymbolgreek",979,"Upsilonafrican",433,"Upsilondieresis",939,"Upsilondieresishooksymbolgreek",980,"Upsilonhooksymbol",978,"Upsilontonos",910,"Uring",366,"Ushortcyrillic",1038,"Usmall",63349,"Ustraightcyrillic",1198,"Ustraightstrokecyrillic",1200,"Utilde",360,"Utildeacute",7800,"Utildebelow",7796,"V",86,"Vcircle",9419,"Vdotbelow",7806,"Vecyrillic",1042,"Vewarmenian",1358,"Vhook",434,"Vmonospace",65334,"Voarmenian",1352,"Vsmall",63350,"Vtilde",7804,"W",87,"Wacute",7810,"Wcircle",9420,"Wcircumflex",372,"Wdieresis",7812,"Wdotaccent",7814,"Wdotbelow",7816,"Wgrave",7808,"Wmonospace",65335,"Wsmall",63351,"X",88,"Xcircle",9421,"Xdieresis",7820,"Xdotaccent",7818,"Xeharmenian",1341,"Xi",926,"Xmonospace",65336,"Xsmall",63352,"Y",89,"Yacute",221,"Yacutesmall",63485,"Yatcyrillic",1122,"Ycircle",9422,"Ycircumflex",374,"Ydieresis",376,"Ydieresissmall",63487,"Ydotaccent",7822,"Ydotbelow",7924,"Yericyrillic",1067,"Yerudieresiscyrillic",1272,"Ygrave",7922,"Yhook",435,"Yhookabove",7926,"Yiarmenian",1349,"Yicyrillic",1031,"Yiwnarmenian",1362,"Ymonospace",65337,"Ysmall",63353,"Ytilde",7928,"Yusbigcyrillic",1130,"Yusbigiotifiedcyrillic",1132,"Yuslittlecyrillic",1126,"Yuslittleiotifiedcyrillic",1128,"Z",90,"Zaarmenian",1334,"Zacute",377,"Zcaron",381,"Zcaronsmall",63231,"Zcircle",9423,"Zcircumflex",7824,"Zdot",379,"Zdotaccent",379,"Zdotbelow",7826,"Zecyrillic",1047,"Zedescendercyrillic",1176,"Zedieresiscyrillic",1246,"Zeta",918,"Zhearmenian",1338,"Zhebrevecyrillic",1217,"Zhecyrillic",1046,"Zhedescendercyrillic",1174,"Zhedieresiscyrillic",1244,"Zlinebelow",7828,"Zmonospace",65338,"Zsmall",63354,"Zstroke",437,"a",97,"aabengali",2438,"aacute",225,"aadeva",2310,"aagujarati",2694,"aagurmukhi",2566,"aamatragurmukhi",2622,"aarusquare",13059,"aavowelsignbengali",2494,"aavowelsigndeva",2366,"aavowelsigngujarati",2750,"abbreviationmarkarmenian",1375,"abbreviationsigndeva",2416,"abengali",2437,"abopomofo",12570,"abreve",259,"abreveacute",7855,"abrevecyrillic",1233,"abrevedotbelow",7863,"abrevegrave",7857,"abrevehookabove",7859,"abrevetilde",7861,"acaron",462,"acircle",9424,"acircumflex",226,"acircumflexacute",7845,"acircumflexdotbelow",7853,"acircumflexgrave",7847,"acircumflexhookabove",7849,"acircumflextilde",7851,"acute",180,"acutebelowcmb",791,"acutecmb",769,"acutecomb",769,"acutedeva",2388,"acutelowmod",719,"acutetonecmb",833,"acyrillic",1072,"adblgrave",513,"addakgurmukhi",2673,"adeva",2309,"adieresis",228,"adieresiscyrillic",1235,"adieresismacron",479,"adotbelow",7841,"adotmacron",481,"ae",230,"aeacute",509,"aekorean",12624,"aemacron",483,"afii00208",8213,"afii08941",8356,"afii10017",1040,"afii10018",1041,"afii10019",1042,"afii10020",1043,"afii10021",1044,"afii10022",1045,"afii10023",1025,"afii10024",1046,"afii10025",1047,"afii10026",1048,"afii10027",1049,"afii10028",1050,"afii10029",1051,"afii10030",1052,"afii10031",1053,"afii10032",1054,"afii10033",1055,"afii10034",1056,"afii10035",1057,"afii10036",1058,"afii10037",1059,"afii10038",1060,"afii10039",1061,"afii10040",1062,"afii10041",1063,"afii10042",1064,"afii10043",1065,"afii10044",1066,"afii10045",1067,"afii10046",1068,"afii10047",1069,"afii10048",1070,"afii10049",1071,"afii10050",1168,"afii10051",1026,"afii10052",1027,"afii10053",1028,"afii10054",1029,"afii10055",1030,"afii10056",1031,"afii10057",1032,"afii10058",1033,"afii10059",1034,"afii10060",1035,"afii10061",1036,"afii10062",1038,"afii10063",63172,"afii10064",63173,"afii10065",1072,"afii10066",1073,"afii10067",1074,"afii10068",1075,"afii10069",1076,"afii10070",1077,"afii10071",1105,"afii10072",1078,"afii10073",1079,"afii10074",1080,"afii10075",1081,"afii10076",1082,"afii10077",1083,"afii10078",1084,"afii10079",1085,"afii10080",1086,"afii10081",1087,"afii10082",1088,"afii10083",1089,"afii10084",1090,"afii10085",1091,"afii10086",1092,"afii10087",1093,"afii10088",1094,"afii10089",1095,"afii10090",1096,"afii10091",1097,"afii10092",1098,"afii10093",1099,"afii10094",1100,"afii10095",1101,"afii10096",1102,"afii10097",1103,"afii10098",1169,"afii10099",1106,"afii10100",1107,"afii10101",1108,"afii10102",1109,"afii10103",1110,"afii10104",1111,"afii10105",1112,"afii10106",1113,"afii10107",1114,"afii10108",1115,"afii10109",1116,"afii10110",1118,"afii10145",1039,"afii10146",1122,"afii10147",1138,"afii10148",1140,"afii10192",63174,"afii10193",1119,"afii10194",1123,"afii10195",1139,"afii10196",1141,"afii10831",63175,"afii10832",63176,"afii10846",1241,"afii299",8206,"afii300",8207,"afii301",8205,"afii57381",1642,"afii57388",1548,"afii57392",1632,"afii57393",1633,"afii57394",1634,"afii57395",1635,"afii57396",1636,"afii57397",1637,"afii57398",1638,"afii57399",1639,"afii57400",1640,"afii57401",1641,"afii57403",1563,"afii57407",1567,"afii57409",1569,"afii57410",1570,"afii57411",1571,"afii57412",1572,"afii57413",1573,"afii57414",1574,"afii57415",1575,"afii57416",1576,"afii57417",1577,"afii57418",1578,"afii57419",1579,"afii57420",1580,"afii57421",1581,"afii57422",1582,"afii57423",1583,"afii57424",1584,"afii57425",1585,"afii57426",1586,"afii57427",1587,"afii57428",1588,"afii57429",1589,"afii57430",1590,"afii57431",1591,"afii57432",1592,"afii57433",1593,"afii57434",1594,"afii57440",1600,"afii57441",1601,"afii57442",1602,"afii57443",1603,"afii57444",1604,"afii57445",1605,"afii57446",1606,"afii57448",1608,"afii57449",1609,"afii57450",1610,"afii57451",1611,"afii57452",1612,"afii57453",1613,"afii57454",1614,"afii57455",1615,"afii57456",1616,"afii57457",1617,"afii57458",1618,"afii57470",1607,"afii57505",1700,"afii57506",1662,"afii57507",1670,"afii57508",1688,"afii57509",1711,"afii57511",1657,"afii57512",1672,"afii57513",1681,"afii57514",1722,"afii57519",1746,"afii57534",1749,"afii57636",8362,"afii57645",1470,"afii57658",1475,"afii57664",1488,"afii57665",1489,"afii57666",1490,"afii57667",1491,"afii57668",1492,"afii57669",1493,"afii57670",1494,"afii57671",1495,"afii57672",1496,"afii57673",1497,"afii57674",1498,"afii57675",1499,"afii57676",1500,"afii57677",1501,"afii57678",1502,"afii57679",1503,"afii57680",1504,"afii57681",1505,"afii57682",1506,"afii57683",1507,"afii57684",1508,"afii57685",1509,"afii57686",1510,"afii57687",1511,"afii57688",1512,"afii57689",1513,"afii57690",1514,"afii57694",64298,"afii57695",64299,"afii57700",64331,"afii57705",64287,"afii57716",1520,"afii57717",1521,"afii57718",1522,"afii57723",64309,"afii57793",1460,"afii57794",1461,"afii57795",1462,"afii57796",1467,"afii57797",1464,"afii57798",1463,"afii57799",1456,"afii57800",1458,"afii57801",1457,"afii57802",1459,"afii57803",1474,"afii57804",1473,"afii57806",1465,"afii57807",1468,"afii57839",1469,"afii57841",1471,"afii57842",1472,"afii57929",700,"afii61248",8453,"afii61289",8467,"afii61352",8470,"afii61573",8236,"afii61574",8237,"afii61575",8238,"afii61664",8204,"afii63167",1645,"afii64937",701,"agrave",224,"agujarati",2693,"agurmukhi",2565,"ahiragana",12354,"ahookabove",7843,"aibengali",2448,"aibopomofo",12574,"aideva",2320,"aiecyrillic",1237,"aigujarati",2704,"aigurmukhi",2576,"aimatragurmukhi",2632,"ainarabic",1593,"ainfinalarabic",65226,"aininitialarabic",65227,"ainmedialarabic",65228,"ainvertedbreve",515,"aivowelsignbengali",2504,"aivowelsigndeva",2376,"aivowelsigngujarati",2760,"akatakana",12450,"akatakanahalfwidth",65393,"akorean",12623,"alef",1488,"alefarabic",1575,"alefdageshhebrew",64304,"aleffinalarabic",65166,"alefhamzaabovearabic",1571,"alefhamzaabovefinalarabic",65156,"alefhamzabelowarabic",1573,"alefhamzabelowfinalarabic",65160,"alefhebrew",1488,"aleflamedhebrew",64335,"alefmaddaabovearabic",1570,"alefmaddaabovefinalarabic",65154,"alefmaksuraarabic",1609,"alefmaksurafinalarabic",65264,"alefmaksurainitialarabic",65267,"alefmaksuramedialarabic",65268,"alefpatahhebrew",64302,"alefqamatshebrew",64303,"aleph",8501,"allequal",8780,"alpha",945,"alphatonos",940,"amacron",257,"amonospace",65345,"ampersand",38,"ampersandmonospace",65286,"ampersandsmall",63270,"amsquare",13250,"anbopomofo",12578,"angbopomofo",12580,"angbracketleft",12296,"angbracketright",12297,"angkhankhuthai",3674,"angle",8736,"anglebracketleft",12296,"anglebracketleftvertical",65087,"anglebracketright",12297,"anglebracketrightvertical",65088,"angleleft",9001,"angleright",9002,"angstrom",8491,"anoteleia",903,"anudattadeva",2386,"anusvarabengali",2434,"anusvaradeva",2306,"anusvaragujarati",2690,"aogonek",261,"apaatosquare",13056,"aparen",9372,"apostrophearmenian",1370,"apostrophemod",700,"apple",63743,"approaches",8784,"approxequal",8776,"approxequalorimage",8786,"approximatelyequal",8773,"araeaekorean",12686,"araeakorean",12685,"arc",8978,"arighthalfring",7834,"aring",229,"aringacute",507,"aringbelow",7681,"arrowboth",8596,"arrowdashdown",8675,"arrowdashleft",8672,"arrowdashright",8674,"arrowdashup",8673,"arrowdblboth",8660,"arrowdbldown",8659,"arrowdblleft",8656,"arrowdblright",8658,"arrowdblup",8657,"arrowdown",8595,"arrowdownleft",8601,"arrowdownright",8600,"arrowdownwhite",8681,"arrowheaddownmod",709,"arrowheadleftmod",706,"arrowheadrightmod",707,"arrowheadupmod",708,"arrowhorizex",63719,"arrowleft",8592,"arrowleftdbl",8656,"arrowleftdblstroke",8653,"arrowleftoverright",8646,"arrowleftwhite",8678,"arrowright",8594,"arrowrightdblstroke",8655,"arrowrightheavy",10142,"arrowrightoverleft",8644,"arrowrightwhite",8680,"arrowtableft",8676,"arrowtabright",8677,"arrowup",8593,"arrowupdn",8597,"arrowupdnbse",8616,"arrowupdownbase",8616,"arrowupleft",8598,"arrowupleftofdown",8645,"arrowupright",8599,"arrowupwhite",8679,"arrowvertex",63718,"asciicircum",94,"asciicircummonospace",65342,"asciitilde",126,"asciitildemonospace",65374,"ascript",593,"ascriptturned",594,"asmallhiragana",12353,"asmallkatakana",12449,"asmallkatakanahalfwidth",65383,"asterisk",42,"asteriskaltonearabic",1645,"asteriskarabic",1645,"asteriskmath",8727,"asteriskmonospace",65290,"asterisksmall",65121,"asterism",8258,"asuperior",63209,"asymptoticallyequal",8771,"at",64,"atilde",227,"atmonospace",65312,"atsmall",65131,"aturned",592,"aubengali",2452,"aubopomofo",12576,"audeva",2324,"augujarati",2708,"augurmukhi",2580,"aulengthmarkbengali",2519,"aumatragurmukhi",2636,"auvowelsignbengali",2508,"auvowelsigndeva",2380,"auvowelsigngujarati",2764,"avagrahadeva",2365,"aybarmenian",1377,"ayin",1506,"ayinaltonehebrew",64288,"ayinhebrew",1506,"b",98,"babengali",2476,"backslash",92,"backslashmonospace",65340,"badeva",2348,"bagujarati",2732,"bagurmukhi",2604,"bahiragana",12400,"bahtthai",3647,"bakatakana",12496,"bar",124,"barmonospace",65372,"bbopomofo",12549,"bcircle",9425,"bdotaccent",7683,"bdotbelow",7685,"beamedsixteenthnotes",9836,"because",8757,"becyrillic",1073,"beharabic",1576,"behfinalarabic",65168,"behinitialarabic",65169,"behiragana",12409,"behmedialarabic",65170,"behmeeminitialarabic",64671,"behmeemisolatedarabic",64520,"behnoonfinalarabic",64621,"bekatakana",12505,"benarmenian",1378,"bet",1489,"beta",946,"betasymbolgreek",976,"betdagesh",64305,"betdageshhebrew",64305,"bethebrew",1489,"betrafehebrew",64332,"bhabengali",2477,"bhadeva",2349,"bhagujarati",2733,"bhagurmukhi",2605,"bhook",595,"bihiragana",12403,"bikatakana",12499,"bilabialclick",664,"bindigurmukhi",2562,"birusquare",13105,"blackcircle",9679,"blackdiamond",9670,"blackdownpointingtriangle",9660,"blackleftpointingpointer",9668,"blackleftpointingtriangle",9664,"blacklenticularbracketleft",12304,"blacklenticularbracketleftvertical",65083,"blacklenticularbracketright",12305,"blacklenticularbracketrightvertical",65084,"blacklowerlefttriangle",9699,"blacklowerrighttriangle",9698,"blackrectangle",9644,"blackrightpointingpointer",9658,"blackrightpointingtriangle",9654,"blacksmallsquare",9642,"blacksmilingface",9787,"blacksquare",9632,"blackstar",9733,"blackupperlefttriangle",9700,"blackupperrighttriangle",9701,"blackuppointingsmalltriangle",9652,"blackuppointingtriangle",9650,"blank",9251,"blinebelow",7687,"block",9608,"bmonospace",65346,"bobaimaithai",3610,"bohiragana",12412,"bokatakana",12508,"bparen",9373,"bqsquare",13251,"braceex",63732,"braceleft",123,"braceleftbt",63731,"braceleftmid",63730,"braceleftmonospace",65371,"braceleftsmall",65115,"bracelefttp",63729,"braceleftvertical",65079,"braceright",125,"bracerightbt",63742,"bracerightmid",63741,"bracerightmonospace",65373,"bracerightsmall",65116,"bracerighttp",63740,"bracerightvertical",65080,"bracketleft",91,"bracketleftbt",63728,"bracketleftex",63727,"bracketleftmonospace",65339,"bracketlefttp",63726,"bracketright",93,"bracketrightbt",63739,"bracketrightex",63738,"bracketrightmonospace",65341,"bracketrighttp",63737,"breve",728,"brevebelowcmb",814,"brevecmb",774,"breveinvertedbelowcmb",815,"breveinvertedcmb",785,"breveinverteddoublecmb",865,"bridgebelowcmb",810,"bridgeinvertedbelowcmb",826,"brokenbar",166,"bstroke",384,"bsuperior",63210,"btopbar",387,"buhiragana",12406,"bukatakana",12502,"bullet",8226,"bulletinverse",9688,"bulletoperator",8729,"bullseye",9678,"c",99,"caarmenian",1390,"cabengali",2458,"cacute",263,"cadeva",2330,"cagujarati",2714,"cagurmukhi",2586,"calsquare",13192,"candrabindubengali",2433,"candrabinducmb",784,"candrabindudeva",2305,"candrabindugujarati",2689,"capslock",8682,"careof",8453,"caron",711,"caronbelowcmb",812,"caroncmb",780,"carriagereturn",8629,"cbopomofo",12568,"ccaron",269,"ccedilla",231,"ccedillaacute",7689,"ccircle",9426,"ccircumflex",265,"ccurl",597,"cdot",267,"cdotaccent",267,"cdsquare",13253,"cedilla",184,"cedillacmb",807,"cent",162,"centigrade",8451,"centinferior",63199,"centmonospace",65504,"centoldstyle",63394,"centsuperior",63200,"chaarmenian",1401,"chabengali",2459,"chadeva",2331,"chagujarati",2715,"chagurmukhi",2587,"chbopomofo",12564,"cheabkhasiancyrillic",1213,"checkmark",10003,"checyrillic",1095,"chedescenderabkhasiancyrillic",1215,"chedescendercyrillic",1207,"chedieresiscyrillic",1269,"cheharmenian",1395,"chekhakassiancyrillic",1228,"cheverticalstrokecyrillic",1209,"chi",967,"chieuchacirclekorean",12919,"chieuchaparenkorean",12823,"chieuchcirclekorean",12905,"chieuchkorean",12618,"chieuchparenkorean",12809,"chochangthai",3594,"chochanthai",3592,"chochingthai",3593,"chochoethai",3596,"chook",392,"cieucacirclekorean",12918,"cieucaparenkorean",12822,"cieuccirclekorean",12904,"cieuckorean",12616,"cieucparenkorean",12808,"cieucuparenkorean",12828,"circle",9675,"circlecopyrt",169,"circlemultiply",8855,"circleot",8857,"circleplus",8853,"circlepostalmark",12342,"circlewithlefthalfblack",9680,"circlewithrighthalfblack",9681,"circumflex",710,"circumflexbelowcmb",813,"circumflexcmb",770,"clear",8999,"clickalveolar",450,"clickdental",448,"clicklateral",449,"clickretroflex",451,"club",9827,"clubsuitblack",9827,"clubsuitwhite",9831,"cmcubedsquare",13220,"cmonospace",65347,"cmsquaredsquare",13216,"coarmenian",1409,"colon",58,"colonmonetary",8353,"colonmonospace",65306,"colonsign",8353,"colonsmall",65109,"colontriangularhalfmod",721,"colontriangularmod",720,"comma",44,"commaabovecmb",787,"commaaboverightcmb",789,"commaaccent",63171,"commaarabic",1548,"commaarmenian",1373,"commainferior",63201,"commamonospace",65292,"commareversedabovecmb",788,"commareversedmod",701,"commasmall",65104,"commasuperior",63202,"commaturnedabovecmb",786,"commaturnedmod",699,"compass",9788,"congruent",8773,"contourintegral",8750,"control",8963,"controlACK",6,"controlBEL",7,"controlBS",8,"controlCAN",24,"controlCR",13,"controlDC1",17,"controlDC2",18,"controlDC3",19,"controlDC4",20,"controlDEL",127,"controlDLE",16,"controlEM",25,"controlENQ",5,"controlEOT",4,"controlESC",27,"controlETB",23,"controlETX",3,"controlFF",12,"controlFS",28,"controlGS",29,"controlHT",9,"controlLF",10,"controlNAK",21,"controlNULL",0,"controlRS",30,"controlSI",15,"controlSO",14,"controlSOT",2,"controlSTX",1,"controlSUB",26,"controlSYN",22,"controlUS",31,"controlVT",11,"copyright",169,"copyrightsans",63721,"copyrightserif",63193,"cornerbracketleft",12300,"cornerbracketlefthalfwidth",65378,"cornerbracketleftvertical",65089,"cornerbracketright",12301,"cornerbracketrighthalfwidth",65379,"cornerbracketrightvertical",65090,"corporationsquare",13183,"cosquare",13255,"coverkgsquare",13254,"cparen",9374,"cruzeiro",8354,"cstretched",663,"curlyand",8911,"curlyor",8910,"currency",164,"cyrBreve",63185,"cyrFlex",63186,"cyrbreve",63188,"cyrflex",63189,"d",100,"daarmenian",1380,"dabengali",2470,"dadarabic",1590,"dadeva",2342,"dadfinalarabic",65214,"dadinitialarabic",65215,"dadmedialarabic",65216,"dagesh",1468,"dageshhebrew",1468,"dagger",8224,"daggerdbl",8225,"dagujarati",2726,"dagurmukhi",2598,"dahiragana",12384,"dakatakana",12480,"dalarabic",1583,"dalet",1491,"daletdagesh",64307,"daletdageshhebrew",64307,"dalethebrew",1491,"dalfinalarabic",65194,"dammaarabic",1615,"dammalowarabic",1615,"dammatanaltonearabic",1612,"dammatanarabic",1612,"danda",2404,"dargahebrew",1447,"dargalefthebrew",1447,"dasiapneumatacyrilliccmb",1157,"dblGrave",63187,"dblanglebracketleft",12298,"dblanglebracketleftvertical",65085,"dblanglebracketright",12299,"dblanglebracketrightvertical",65086,"dblarchinvertedbelowcmb",811,"dblarrowleft",8660,"dblarrowright",8658,"dbldanda",2405,"dblgrave",63190,"dblgravecmb",783,"dblintegral",8748,"dbllowline",8215,"dbllowlinecmb",819,"dbloverlinecmb",831,"dblprimemod",698,"dblverticalbar",8214,"dblverticallineabovecmb",782,"dbopomofo",12553,"dbsquare",13256,"dcaron",271,"dcedilla",7697,"dcircle",9427,"dcircumflexbelow",7699,"dcroat",273,"ddabengali",2465,"ddadeva",2337,"ddagujarati",2721,"ddagurmukhi",2593,"ddalarabic",1672,"ddalfinalarabic",64393,"dddhadeva",2396,"ddhabengali",2466,"ddhadeva",2338,"ddhagujarati",2722,"ddhagurmukhi",2594,"ddotaccent",7691,"ddotbelow",7693,"decimalseparatorarabic",1643,"decimalseparatorpersian",1643,"decyrillic",1076,"degree",176,"dehihebrew",1453,"dehiragana",12391,"deicoptic",1007,"dekatakana",12487,"deleteleft",9003,"deleteright",8998,"delta",948,"deltaturned",397,"denominatorminusonenumeratorbengali",2552,"dezh",676,"dhabengali",2471,"dhadeva",2343,"dhagujarati",2727,"dhagurmukhi",2599,"dhook",599,"dialytikatonos",901,"dialytikatonoscmb",836,"diamond",9830,"diamondsuitwhite",9826,"dieresis",168,"dieresisacute",63191,"dieresisbelowcmb",804,"dieresiscmb",776,"dieresisgrave",63192,"dieresistonos",901,"dihiragana",12386,"dikatakana",12482,"dittomark",12291,"divide",247,"divides",8739,"divisionslash",8725,"djecyrillic",1106,"dkshade",9619,"dlinebelow",7695,"dlsquare",13207,"dmacron",273,"dmonospace",65348,"dnblock",9604,"dochadathai",3598,"dodekthai",3604,"dohiragana",12393,"dokatakana",12489,"dollar",36,"dollarinferior",63203,"dollarmonospace",65284,"dollaroldstyle",63268,"dollarsmall",65129,"dollarsuperior",63204,"dong",8363,"dorusquare",13094,"dotaccent",729,"dotaccentcmb",775,"dotbelowcmb",803,"dotbelowcomb",803,"dotkatakana",12539,"dotlessi",305,"dotlessj",63166,"dotlessjstrokehook",644,"dotmath",8901,"dottedcircle",9676,"doubleyodpatah",64287,"doubleyodpatahhebrew",64287,"downtackbelowcmb",798,"downtackmod",725,"dparen",9375,"dsuperior",63211,"dtail",598,"dtopbar",396,"duhiragana",12389,"dukatakana",12485,"dz",499,"dzaltone",675,"dzcaron",454,"dzcurl",677,"dzeabkhasiancyrillic",1249,"dzecyrillic",1109,"dzhecyrillic",1119,"e",101,"eacute",233,"earth",9793,"ebengali",2447,"ebopomofo",12572,"ebreve",277,"ecandradeva",2317,"ecandragujarati",2701,"ecandravowelsigndeva",2373,"ecandravowelsigngujarati",2757,"ecaron",283,"ecedillabreve",7709,"echarmenian",1381,"echyiwnarmenian",1415,"ecircle",9428,"ecircumflex",234,"ecircumflexacute",7871,"ecircumflexbelow",7705,"ecircumflexdotbelow",7879,"ecircumflexgrave",7873,"ecircumflexhookabove",7875,"ecircumflextilde",7877,"ecyrillic",1108,"edblgrave",517,"edeva",2319,"edieresis",235,"edot",279,"edotaccent",279,"edotbelow",7865,"eegurmukhi",2575,"eematragurmukhi",2631,"efcyrillic",1092,"egrave",232,"egujarati",2703,"eharmenian",1383,"ehbopomofo",12573,"ehiragana",12360,"ehookabove",7867,"eibopomofo",12575,"eight",56,"eightarabic",1640,"eightbengali",2542,"eightcircle",9319,"eightcircleinversesansserif",10129,"eightdeva",2414,"eighteencircle",9329,"eighteenparen",9349,"eighteenperiod",9369,"eightgujarati",2798,"eightgurmukhi",2670,"eighthackarabic",1640,"eighthangzhou",12328,"eighthnotebeamed",9835,"eightideographicparen",12839,"eightinferior",8328,"eightmonospace",65304,"eightoldstyle",63288,"eightparen",9339,"eightperiod",9359,"eightpersian",1784,"eightroman",8567,"eightsuperior",8312,"eightthai",3672,"einvertedbreve",519,"eiotifiedcyrillic",1125,"ekatakana",12456,"ekatakanahalfwidth",65396,"ekonkargurmukhi",2676,"ekorean",12628,"elcyrillic",1083,"element",8712,"elevencircle",9322,"elevenparen",9342,"elevenperiod",9362,"elevenroman",8570,"ellipsis",8230,"ellipsisvertical",8942,"emacron",275,"emacronacute",7703,"emacrongrave",7701,"emcyrillic",1084,"emdash",8212,"emdashvertical",65073,"emonospace",65349,"emphasismarkarmenian",1371,"emptyset",8709,"enbopomofo",12579,"encyrillic",1085,"endash",8211,"endashvertical",65074,"endescendercyrillic",1187,"eng",331,"engbopomofo",12581,"enghecyrillic",1189,"enhookcyrillic",1224,"enspace",8194,"eogonek",281,"eokorean",12627,"eopen",603,"eopenclosed",666,"eopenreversed",604,"eopenreversedclosed",606,"eopenreversedhook",605,"eparen",9376,"epsilon",949,"epsilontonos",941,"equal",61,"equalmonospace",65309,"equalsmall",65126,"equalsuperior",8316,"equivalence",8801,"erbopomofo",12582,"ercyrillic",1088,"ereversed",600,"ereversedcyrillic",1101,"escyrillic",1089,"esdescendercyrillic",1195,"esh",643,"eshcurl",646,"eshortdeva",2318,"eshortvowelsigndeva",2374,"eshreversedloop",426,"eshsquatreversed",645,"esmallhiragana",12359,"esmallkatakana",12455,"esmallkatakanahalfwidth",65386,"estimated",8494,"esuperior",63212,"eta",951,"etarmenian",1384,"etatonos",942,"eth",240,"etilde",7869,"etildebelow",7707,"etnahtafoukhhebrew",1425,"etnahtafoukhlefthebrew",1425,"etnahtahebrew",1425,"etnahtalefthebrew",1425,"eturned",477,"eukorean",12641,"euro",8364,"evowelsignbengali",2503,"evowelsigndeva",2375,"evowelsigngujarati",2759,"exclam",33,"exclamarmenian",1372,"exclamdbl",8252,"exclamdown",161,"exclamdownsmall",63393,"exclammonospace",65281,"exclamsmall",63265,"existential",8707,"ezh",658,"ezhcaron",495,"ezhcurl",659,"ezhreversed",441,"ezhtail",442,"f",102,"fadeva",2398,"fagurmukhi",2654,"fahrenheit",8457,"fathaarabic",1614,"fathalowarabic",1614,"fathatanarabic",1611,"fbopomofo",12552,"fcircle",9429,"fdotaccent",7711,"feharabic",1601,"feharmenian",1414,"fehfinalarabic",65234,"fehinitialarabic",65235,"fehmedialarabic",65236,"feicoptic",997,"female",9792,"ff",64256,"f_f",64256,"ffi",64259,"ffl",64260,"fi",64257,"fifteencircle",9326,"fifteenparen",9346,"fifteenperiod",9366,"figuredash",8210,"filledbox",9632,"filledrect",9644,"finalkaf",1498,"finalkafdagesh",64314,"finalkafdageshhebrew",64314,"finalkafhebrew",1498,"finalmem",1501,"finalmemhebrew",1501,"finalnun",1503,"finalnunhebrew",1503,"finalpe",1507,"finalpehebrew",1507,"finaltsadi",1509,"finaltsadihebrew",1509,"firsttonechinese",713,"fisheye",9673,"fitacyrillic",1139,"five",53,"fivearabic",1637,"fivebengali",2539,"fivecircle",9316,"fivecircleinversesansserif",10126,"fivedeva",2411,"fiveeighths",8541,"fivegujarati",2795,"fivegurmukhi",2667,"fivehackarabic",1637,"fivehangzhou",12325,"fiveideographicparen",12836,"fiveinferior",8325,"fivemonospace",65301,"fiveoldstyle",63285,"fiveparen",9336,"fiveperiod",9356,"fivepersian",1781,"fiveroman",8564,"fivesuperior",8309,"fivethai",3669,"fl",64258,"florin",402,"fmonospace",65350,"fmsquare",13209,"fofanthai",3615,"fofathai",3613,"fongmanthai",3663,"forall",8704,"four",52,"fourarabic",1636,"fourbengali",2538,"fourcircle",9315,"fourcircleinversesansserif",10125,"fourdeva",2410,"fourgujarati",2794,"fourgurmukhi",2666,"fourhackarabic",1636,"fourhangzhou",12324,"fourideographicparen",12835,"fourinferior",8324,"fourmonospace",65300,"fournumeratorbengali",2551,"fouroldstyle",63284,"fourparen",9335,"fourperiod",9355,"fourpersian",1780,"fourroman",8563,"foursuperior",8308,"fourteencircle",9325,"fourteenparen",9345,"fourteenperiod",9365,"fourthai",3668,"fourthtonechinese",715,"fparen",9377,"fraction",8260,"franc",8355,"g",103,"gabengali",2455,"gacute",501,"gadeva",2327,"gafarabic",1711,"gaffinalarabic",64403,"gafinitialarabic",64404,"gafmedialarabic",64405,"gagujarati",2711,"gagurmukhi",2583,"gahiragana",12364,"gakatakana",12460,"gamma",947,"gammalatinsmall",611,"gammasuperior",736,"gangiacoptic",1003,"gbopomofo",12557,"gbreve",287,"gcaron",487,"gcedilla",291,"gcircle",9430,"gcircumflex",285,"gcommaaccent",291,"gdot",289,"gdotaccent",289,"gecyrillic",1075,"gehiragana",12370,"gekatakana",12466,"geometricallyequal",8785,"gereshaccenthebrew",1436,"gereshhebrew",1523,"gereshmuqdamhebrew",1437,"germandbls",223,"gershayimaccenthebrew",1438,"gershayimhebrew",1524,"getamark",12307,"ghabengali",2456,"ghadarmenian",1394,"ghadeva",2328,"ghagujarati",2712,"ghagurmukhi",2584,"ghainarabic",1594,"ghainfinalarabic",65230,"ghaininitialarabic",65231,"ghainmedialarabic",65232,"ghemiddlehookcyrillic",1173,"ghestrokecyrillic",1171,"gheupturncyrillic",1169,"ghhadeva",2394,"ghhagurmukhi",2650,"ghook",608,"ghzsquare",13203,"gihiragana",12366,"gikatakana",12462,"gimarmenian",1379,"gimel",1490,"gimeldagesh",64306,"gimeldageshhebrew",64306,"gimelhebrew",1490,"gjecyrillic",1107,"glottalinvertedstroke",446,"glottalstop",660,"glottalstopinverted",662,"glottalstopmod",704,"glottalstopreversed",661,"glottalstopreversedmod",705,"glottalstopreversedsuperior",740,"glottalstopstroke",673,"glottalstopstrokereversed",674,"gmacron",7713,"gmonospace",65351,"gohiragana",12372,"gokatakana",12468,"gparen",9378,"gpasquare",13228,"gradient",8711,"grave",96,"gravebelowcmb",790,"gravecmb",768,"gravecomb",768,"gravedeva",2387,"gravelowmod",718,"gravemonospace",65344,"gravetonecmb",832,"greater",62,"greaterequal",8805,"greaterequalorless",8923,"greatermonospace",65310,"greaterorequivalent",8819,"greaterorless",8823,"greateroverequal",8807,"greatersmall",65125,"gscript",609,"gstroke",485,"guhiragana",12368,"guillemotleft",171,"guillemotright",187,"guilsinglleft",8249,"guilsinglright",8250,"gukatakana",12464,"guramusquare",13080,"gysquare",13257,"h",104,"haabkhasiancyrillic",1193,"haaltonearabic",1729,"habengali",2489,"hadescendercyrillic",1203,"hadeva",2361,"hagujarati",2745,"hagurmukhi",2617,"haharabic",1581,"hahfinalarabic",65186,"hahinitialarabic",65187,"hahiragana",12399,"hahmedialarabic",65188,"haitusquare",13098,"hakatakana",12495,"hakatakanahalfwidth",65418,"halantgurmukhi",2637,"hamzaarabic",1569,"hamzalowarabic",1569,"hangulfiller",12644,"hardsigncyrillic",1098,"harpoonleftbarbup",8636,"harpoonrightbarbup",8640,"hasquare",13258,"hatafpatah",1458,"hatafpatah16",1458,"hatafpatah23",1458,"hatafpatah2f",1458,"hatafpatahhebrew",1458,"hatafpatahnarrowhebrew",1458,"hatafpatahquarterhebrew",1458,"hatafpatahwidehebrew",1458,"hatafqamats",1459,"hatafqamats1b",1459,"hatafqamats28",1459,"hatafqamats34",1459,"hatafqamatshebrew",1459,"hatafqamatsnarrowhebrew",1459,"hatafqamatsquarterhebrew",1459,"hatafqamatswidehebrew",1459,"hatafsegol",1457,"hatafsegol17",1457,"hatafsegol24",1457,"hatafsegol30",1457,"hatafsegolhebrew",1457,"hatafsegolnarrowhebrew",1457,"hatafsegolquarterhebrew",1457,"hatafsegolwidehebrew",1457,"hbar",295,"hbopomofo",12559,"hbrevebelow",7723,"hcedilla",7721,"hcircle",9431,"hcircumflex",293,"hdieresis",7719,"hdotaccent",7715,"hdotbelow",7717,"he",1492,"heart",9829,"heartsuitblack",9829,"heartsuitwhite",9825,"hedagesh",64308,"hedageshhebrew",64308,"hehaltonearabic",1729,"heharabic",1607,"hehebrew",1492,"hehfinalaltonearabic",64423,"hehfinalalttwoarabic",65258,"hehfinalarabic",65258,"hehhamzaabovefinalarabic",64421,"hehhamzaaboveisolatedarabic",64420,"hehinitialaltonearabic",64424,"hehinitialarabic",65259,"hehiragana",12408,"hehmedialaltonearabic",64425,"hehmedialarabic",65260,"heiseierasquare",13179,"hekatakana",12504,"hekatakanahalfwidth",65421,"hekutaarusquare",13110,"henghook",615,"herutusquare",13113,"het",1495,"hethebrew",1495,"hhook",614,"hhooksuperior",689,"hieuhacirclekorean",12923,"hieuhaparenkorean",12827,"hieuhcirclekorean",12909,"hieuhkorean",12622,"hieuhparenkorean",12813,"hihiragana",12402,"hikatakana",12498,"hikatakanahalfwidth",65419,"hiriq",1460,"hiriq14",1460,"hiriq21",1460,"hiriq2d",1460,"hiriqhebrew",1460,"hiriqnarrowhebrew",1460,"hiriqquarterhebrew",1460,"hiriqwidehebrew",1460,"hlinebelow",7830,"hmonospace",65352,"hoarmenian",1392,"hohipthai",3627,"hohiragana",12411,"hokatakana",12507,"hokatakanahalfwidth",65422,"holam",1465,"holam19",1465,"holam26",1465,"holam32",1465,"holamhebrew",1465,"holamnarrowhebrew",1465,"holamquarterhebrew",1465,"holamwidehebrew",1465,"honokhukthai",3630,"hookabovecomb",777,"hookcmb",777,"hookpalatalizedbelowcmb",801,"hookretroflexbelowcmb",802,"hoonsquare",13122,"horicoptic",1001,"horizontalbar",8213,"horncmb",795,"hotsprings",9832,"house",8962,"hparen",9379,"hsuperior",688,"hturned",613,"huhiragana",12405,"huiitosquare",13107,"hukatakana",12501,"hukatakanahalfwidth",65420,"hungarumlaut",733,"hungarumlautcmb",779,"hv",405,"hyphen",45,"hypheninferior",63205,"hyphenmonospace",65293,"hyphensmall",65123,"hyphensuperior",63206,"hyphentwo",8208,"i",105,"iacute",237,"iacyrillic",1103,"ibengali",2439,"ibopomofo",12583,"ibreve",301,"icaron",464,"icircle",9432,"icircumflex",238,"icyrillic",1110,"idblgrave",521,"ideographearthcircle",12943,"ideographfirecircle",12939,"ideographicallianceparen",12863,"ideographiccallparen",12858,"ideographiccentrecircle",12965,"ideographicclose",12294,"ideographiccomma",12289,"ideographiccommaleft",65380,"ideographiccongratulationparen",12855,"ideographiccorrectcircle",12963,"ideographicearthparen",12847,"ideographicenterpriseparen",12861,"ideographicexcellentcircle",12957,"ideographicfestivalparen",12864,"ideographicfinancialcircle",12950,"ideographicfinancialparen",12854,"ideographicfireparen",12843,"ideographichaveparen",12850,"ideographichighcircle",12964,"ideographiciterationmark",12293,"ideographiclaborcircle",12952,"ideographiclaborparen",12856,"ideographicleftcircle",12967,"ideographiclowcircle",12966,"ideographicmedicinecircle",12969,"ideographicmetalparen",12846,"ideographicmoonparen",12842,"ideographicnameparen",12852,"ideographicperiod",12290,"ideographicprintcircle",12958,"ideographicreachparen",12867,"ideographicrepresentparen",12857,"ideographicresourceparen",12862,"ideographicrightcircle",12968,"ideographicsecretcircle",12953,"ideographicselfparen",12866,"ideographicsocietyparen",12851,"ideographicspace",12288,"ideographicspecialparen",12853,"ideographicstockparen",12849,"ideographicstudyparen",12859,"ideographicsunparen",12848,"ideographicsuperviseparen",12860,"ideographicwaterparen",12844,"ideographicwoodparen",12845,"ideographiczero",12295,"ideographmetalcircle",12942,"ideographmooncircle",12938,"ideographnamecircle",12948,"ideographsuncircle",12944,"ideographwatercircle",12940,"ideographwoodcircle",12941,"ideva",2311,"idieresis",239,"idieresisacute",7727,"idieresiscyrillic",1253,"idotbelow",7883,"iebrevecyrillic",1239,"iecyrillic",1077,"ieungacirclekorean",12917,"ieungaparenkorean",12821,"ieungcirclekorean",12903,"ieungkorean",12615,"ieungparenkorean",12807,"igrave",236,"igujarati",2695,"igurmukhi",2567,"ihiragana",12356,"ihookabove",7881,"iibengali",2440,"iicyrillic",1080,"iideva",2312,"iigujarati",2696,"iigurmukhi",2568,"iimatragurmukhi",2624,"iinvertedbreve",523,"iishortcyrillic",1081,"iivowelsignbengali",2496,"iivowelsigndeva",2368,"iivowelsigngujarati",2752,"ij",307,"ikatakana",12452,"ikatakanahalfwidth",65394,"ikorean",12643,"ilde",732,"iluyhebrew",1452,"imacron",299,"imacroncyrillic",1251,"imageorapproximatelyequal",8787,"imatragurmukhi",2623,"imonospace",65353,"increment",8710,"infinity",8734,"iniarmenian",1387,"integral",8747,"integralbottom",8993,"integralbt",8993,"integralex",63733,"integraltop",8992,"integraltp",8992,"intersection",8745,"intisquare",13061,"invbullet",9688,"invcircle",9689,"invsmileface",9787,"iocyrillic",1105,"iogonek",303,"iota",953,"iotadieresis",970,"iotadieresistonos",912,"iotalatin",617,"iotatonos",943,"iparen",9380,"irigurmukhi",2674,"ismallhiragana",12355,"ismallkatakana",12451,"ismallkatakanahalfwidth",65384,"issharbengali",2554,"istroke",616,"isuperior",63213,"iterationhiragana",12445,"iterationkatakana",12541,"itilde",297,"itildebelow",7725,"iubopomofo",12585,"iucyrillic",1102,"ivowelsignbengali",2495,"ivowelsigndeva",2367,"ivowelsigngujarati",2751,"izhitsacyrillic",1141,"izhitsadblgravecyrillic",1143,"j",106,"jaarmenian",1393,"jabengali",2460,"jadeva",2332,"jagujarati",2716,"jagurmukhi",2588,"jbopomofo",12560,"jcaron",496,"jcircle",9433,"jcircumflex",309,"jcrossedtail",669,"jdotlessstroke",607,"jecyrillic",1112,"jeemarabic",1580,"jeemfinalarabic",65182,"jeeminitialarabic",65183,"jeemmedialarabic",65184,"jeharabic",1688,"jehfinalarabic",64395,"jhabengali",2461,"jhadeva",2333,"jhagujarati",2717,"jhagurmukhi",2589,"jheharmenian",1403,"jis",12292,"jmonospace",65354,"jparen",9381,"jsuperior",690,"k",107,"kabashkircyrillic",1185,"kabengali",2453,"kacute",7729,"kacyrillic",1082,"kadescendercyrillic",1179,"kadeva",2325,"kaf",1499,"kafarabic",1603,"kafdagesh",64315,"kafdageshhebrew",64315,"kaffinalarabic",65242,"kafhebrew",1499,"kafinitialarabic",65243,"kafmedialarabic",65244,"kafrafehebrew",64333,"kagujarati",2709,"kagurmukhi",2581,"kahiragana",12363,"kahookcyrillic",1220,"kakatakana",12459,"kakatakanahalfwidth",65398,"kappa",954,"kappasymbolgreek",1008,"kapyeounmieumkorean",12657,"kapyeounphieuphkorean",12676,"kapyeounpieupkorean",12664,"kapyeounssangpieupkorean",12665,"karoriisquare",13069,"kashidaautoarabic",1600,"kashidaautonosidebearingarabic",1600,"kasmallkatakana",12533,"kasquare",13188,"kasraarabic",1616,"kasratanarabic",1613,"kastrokecyrillic",1183,"katahiraprolongmarkhalfwidth",65392,"kaverticalstrokecyrillic",1181,"kbopomofo",12558,"kcalsquare",13193,"kcaron",489,"kcedilla",311,"kcircle",9434,"kcommaaccent",311,"kdotbelow",7731,"keharmenian",1412,"kehiragana",12369,"kekatakana",12465,"kekatakanahalfwidth",65401,"kenarmenian",1391,"kesmallkatakana",12534,"kgreenlandic",312,"khabengali",2454,"khacyrillic",1093,"khadeva",2326,"khagujarati",2710,"khagurmukhi",2582,"khaharabic",1582,"khahfinalarabic",65190,"khahinitialarabic",65191,"khahmedialarabic",65192,"kheicoptic",999,"khhadeva",2393,"khhagurmukhi",2649,"khieukhacirclekorean",12920,"khieukhaparenkorean",12824,"khieukhcirclekorean",12906,"khieukhkorean",12619,"khieukhparenkorean",12810,"khokhaithai",3586,"khokhonthai",3589,"khokhuatthai",3587,"khokhwaithai",3588,"khomutthai",3675,"khook",409,"khorakhangthai",3590,"khzsquare",13201,"kihiragana",12365,"kikatakana",12461,"kikatakanahalfwidth",65399,"kiroguramusquare",13077,"kiromeetorusquare",13078,"kirosquare",13076,"kiyeokacirclekorean",12910,"kiyeokaparenkorean",12814,"kiyeokcirclekorean",12896,"kiyeokkorean",12593,"kiyeokparenkorean",12800,"kiyeoksioskorean",12595,"kjecyrillic",1116,"klinebelow",7733,"klsquare",13208,"kmcubedsquare",13222,"kmonospace",65355,"kmsquaredsquare",13218,"kohiragana",12371,"kohmsquare",13248,"kokaithai",3585,"kokatakana",12467,"kokatakanahalfwidth",65402,"kooposquare",13086,"koppacyrillic",1153,"koreanstandardsymbol",12927,"koroniscmb",835,"kparen",9382,"kpasquare",13226,"ksicyrillic",1135,"ktsquare",13263,"kturned",670,"kuhiragana",12367,"kukatakana",12463,"kukatakanahalfwidth",65400,"kvsquare",13240,"kwsquare",13246,"l",108,"labengali",2482,"lacute",314,"ladeva",2354,"lagujarati",2738,"lagurmukhi",2610,"lakkhangyaothai",3653,"lamaleffinalarabic",65276,"lamalefhamzaabovefinalarabic",65272,"lamalefhamzaaboveisolatedarabic",65271,"lamalefhamzabelowfinalarabic",65274,"lamalefhamzabelowisolatedarabic",65273,"lamalefisolatedarabic",65275,"lamalefmaddaabovefinalarabic",65270,"lamalefmaddaaboveisolatedarabic",65269,"lamarabic",1604,"lambda",955,"lambdastroke",411,"lamed",1500,"lameddagesh",64316,"lameddageshhebrew",64316,"lamedhebrew",1500,"lamfinalarabic",65246,"lamhahinitialarabic",64714,"laminitialarabic",65247,"lamjeeminitialarabic",64713,"lamkhahinitialarabic",64715,"lamlamhehisolatedarabic",65010,"lammedialarabic",65248,"lammeemhahinitialarabic",64904,"lammeeminitialarabic",64716,"largecircle",9711,"lbar",410,"lbelt",620,"lbopomofo",12556,"lcaron",318,"lcedilla",316,"lcircle",9435,"lcircumflexbelow",7741,"lcommaaccent",316,"ldot",320,"ldotaccent",320,"ldotbelow",7735,"ldotbelowmacron",7737,"leftangleabovecmb",794,"lefttackbelowcmb",792,"less",60,"lessequal",8804,"lessequalorgreater",8922,"lessmonospace",65308,"lessorequivalent",8818,"lessorgreater",8822,"lessoverequal",8806,"lesssmall",65124,"lezh",622,"lfblock",9612,"lhookretroflex",621,"lira",8356,"liwnarmenian",1388,"lj",457,"ljecyrillic",1113,"ll",63168,"lladeva",2355,"llagujarati",2739,"llinebelow",7739,"llladeva",2356,"llvocalicbengali",2529,"llvocalicdeva",2401,"llvocalicvowelsignbengali",2531,"llvocalicvowelsigndeva",2403,"lmiddletilde",619,"lmonospace",65356,"lmsquare",13264,"lochulathai",3628,"logicaland",8743,"logicalnot",172,"logicalnotreversed",8976,"logicalor",8744,"lolingthai",3621,"longs",383,"lowlinecenterline",65102,"lowlinecmb",818,"lowlinedashed",65101,"lozenge",9674,"lparen",9383,"lslash",322,"lsquare",8467,"lsuperior",63214,"ltshade",9617,"luthai",3622,"lvocalicbengali",2444,"lvocalicdeva",2316,"lvocalicvowelsignbengali",2530,"lvocalicvowelsigndeva",2402,"lxsquare",13267,"m",109,"mabengali",2478,"macron",175,"macronbelowcmb",817,"macroncmb",772,"macronlowmod",717,"macronmonospace",65507,"macute",7743,"madeva",2350,"magujarati",2734,"magurmukhi",2606,"mahapakhhebrew",1444,"mahapakhlefthebrew",1444,"mahiragana",12414,"maichattawalowleftthai",63637,"maichattawalowrightthai",63636,"maichattawathai",3659,"maichattawaupperleftthai",63635,"maieklowleftthai",63628,"maieklowrightthai",63627,"maiekthai",3656,"maiekupperleftthai",63626,"maihanakatleftthai",63620,"maihanakatthai",3633,"maitaikhuleftthai",63625,"maitaikhuthai",3655,"maitholowleftthai",63631,"maitholowrightthai",63630,"maithothai",3657,"maithoupperleftthai",63629,"maitrilowleftthai",63634,"maitrilowrightthai",63633,"maitrithai",3658,"maitriupperleftthai",63632,"maiyamokthai",3654,"makatakana",12510,"makatakanahalfwidth",65423,"male",9794,"mansyonsquare",13127,"maqafhebrew",1470,"mars",9794,"masoracirclehebrew",1455,"masquare",13187,"mbopomofo",12551,"mbsquare",13268,"mcircle",9436,"mcubedsquare",13221,"mdotaccent",7745,"mdotbelow",7747,"meemarabic",1605,"meemfinalarabic",65250,"meeminitialarabic",65251,"meemmedialarabic",65252,"meemmeeminitialarabic",64721,"meemmeemisolatedarabic",64584,"meetorusquare",13133,"mehiragana",12417,"meizierasquare",13182,"mekatakana",12513,"mekatakanahalfwidth",65426,"mem",1502,"memdagesh",64318,"memdageshhebrew",64318,"memhebrew",1502,"menarmenian",1396,"merkhahebrew",1445,"merkhakefulahebrew",1446,"merkhakefulalefthebrew",1446,"merkhalefthebrew",1445,"mhook",625,"mhzsquare",13202,"middledotkatakanahalfwidth",65381,"middot",183,"mieumacirclekorean",12914,"mieumaparenkorean",12818,"mieumcirclekorean",12900,"mieumkorean",12609,"mieumpansioskorean",12656,"mieumparenkorean",12804,"mieumpieupkorean",12654,"mieumsioskorean",12655,"mihiragana",12415,"mikatakana",12511,"mikatakanahalfwidth",65424,"minus",8722,"minusbelowcmb",800,"minuscircle",8854,"minusmod",727,"minusplus",8723,"minute",8242,"miribaarusquare",13130,"mirisquare",13129,"mlonglegturned",624,"mlsquare",13206,"mmcubedsquare",13219,"mmonospace",65357,"mmsquaredsquare",13215,"mohiragana",12418,"mohmsquare",13249,"mokatakana",12514,"mokatakanahalfwidth",65427,"molsquare",13270,"momathai",3617,"moverssquare",13223,"moverssquaredsquare",13224,"mparen",9384,"mpasquare",13227,"mssquare",13235,"msuperior",63215,"mturned",623,"mu",181,"mu1",181,"muasquare",13186,"muchgreater",8811,"muchless",8810,"mufsquare",13196,"mugreek",956,"mugsquare",13197,"muhiragana",12416,"mukatakana",12512,"mukatakanahalfwidth",65425,"mulsquare",13205,"multiply",215,"mumsquare",13211,"munahhebrew",1443,"munahlefthebrew",1443,"musicalnote",9834,"musicalnotedbl",9835,"musicflatsign",9837,"musicsharpsign",9839,"mussquare",13234,"muvsquare",13238,"muwsquare",13244,"mvmegasquare",13241,"mvsquare",13239,"mwmegasquare",13247,"mwsquare",13245,"n",110,"nabengali",2472,"nabla",8711,"nacute",324,"nadeva",2344,"nagujarati",2728,"nagurmukhi",2600,"nahiragana",12394,"nakatakana",12490,"nakatakanahalfwidth",65413,"napostrophe",329,"nasquare",13185,"nbopomofo",12555,"nbspace",160,"ncaron",328,"ncedilla",326,"ncircle",9437,"ncircumflexbelow",7755,"ncommaaccent",326,"ndotaccent",7749,"ndotbelow",7751,"nehiragana",12397,"nekatakana",12493,"nekatakanahalfwidth",65416,"newsheqelsign",8362,"nfsquare",13195,"ngabengali",2457,"ngadeva",2329,"ngagujarati",2713,"ngagurmukhi",2585,"ngonguthai",3591,"nhiragana",12435,"nhookleft",626,"nhookretroflex",627,"nieunacirclekorean",12911,"nieunaparenkorean",12815,"nieuncieuckorean",12597,"nieuncirclekorean",12897,"nieunhieuhkorean",12598,"nieunkorean",12596,"nieunpansioskorean",12648,"nieunparenkorean",12801,"nieunsioskorean",12647,"nieuntikeutkorean",12646,"nihiragana",12395,"nikatakana",12491,"nikatakanahalfwidth",65414,"nikhahitleftthai",63641,"nikhahitthai",3661,"nine",57,"ninearabic",1641,"ninebengali",2543,"ninecircle",9320,"ninecircleinversesansserif",10130,"ninedeva",2415,"ninegujarati",2799,"ninegurmukhi",2671,"ninehackarabic",1641,"ninehangzhou",12329,"nineideographicparen",12840,"nineinferior",8329,"ninemonospace",65305,"nineoldstyle",63289,"nineparen",9340,"nineperiod",9360,"ninepersian",1785,"nineroman",8568,"ninesuperior",8313,"nineteencircle",9330,"nineteenparen",9350,"nineteenperiod",9370,"ninethai",3673,"nj",460,"njecyrillic",1114,"nkatakana",12531,"nkatakanahalfwidth",65437,"nlegrightlong",414,"nlinebelow",7753,"nmonospace",65358,"nmsquare",13210,"nnabengali",2467,"nnadeva",2339,"nnagujarati",2723,"nnagurmukhi",2595,"nnnadeva",2345,"nohiragana",12398,"nokatakana",12494,"nokatakanahalfwidth",65417,"nonbreakingspace",160,"nonenthai",3603,"nonuthai",3609,"noonarabic",1606,"noonfinalarabic",65254,"noonghunnaarabic",1722,"noonghunnafinalarabic",64415,"nooninitialarabic",65255,"noonjeeminitialarabic",64722,"noonjeemisolatedarabic",64587,"noonmedialarabic",65256,"noonmeeminitialarabic",64725,"noonmeemisolatedarabic",64590,"noonnoonfinalarabic",64653,"notcontains",8716,"notelement",8713,"notelementof",8713,"notequal",8800,"notgreater",8815,"notgreaternorequal",8817,"notgreaternorless",8825,"notidentical",8802,"notless",8814,"notlessnorequal",8816,"notparallel",8742,"notprecedes",8832,"notsubset",8836,"notsucceeds",8833,"notsuperset",8837,"nowarmenian",1398,"nparen",9385,"nssquare",13233,"nsuperior",8319,"ntilde",241,"nu",957,"nuhiragana",12396,"nukatakana",12492,"nukatakanahalfwidth",65415,"nuktabengali",2492,"nuktadeva",2364,"nuktagujarati",2748,"nuktagurmukhi",2620,"numbersign",35,"numbersignmonospace",65283,"numbersignsmall",65119,"numeralsigngreek",884,"numeralsignlowergreek",885,"numero",8470,"nun",1504,"nundagesh",64320,"nundageshhebrew",64320,"nunhebrew",1504,"nvsquare",13237,"nwsquare",13243,"nyabengali",2462,"nyadeva",2334,"nyagujarati",2718,"nyagurmukhi",2590,"o",111,"oacute",243,"oangthai",3629,"obarred",629,"obarredcyrillic",1257,"obarreddieresiscyrillic",1259,"obengali",2451,"obopomofo",12571,"obreve",335,"ocandradeva",2321,"ocandragujarati",2705,"ocandravowelsigndeva",2377,"ocandravowelsigngujarati",2761,"ocaron",466,"ocircle",9438,"ocircumflex",244,"ocircumflexacute",7889,"ocircumflexdotbelow",7897,"ocircumflexgrave",7891,"ocircumflexhookabove",7893,"ocircumflextilde",7895,"ocyrillic",1086,"odblacute",337,"odblgrave",525,"odeva",2323,"odieresis",246,"odieresiscyrillic",1255,"odotbelow",7885,"oe",339,"oekorean",12634,"ogonek",731,"ogonekcmb",808,"ograve",242,"ogujarati",2707,"oharmenian",1413,"ohiragana",12362,"ohookabove",7887,"ohorn",417,"ohornacute",7899,"ohorndotbelow",7907,"ohorngrave",7901,"ohornhookabove",7903,"ohorntilde",7905,"ohungarumlaut",337,"oi",419,"oinvertedbreve",527,"okatakana",12458,"okatakanahalfwidth",65397,"okorean",12631,"olehebrew",1451,"omacron",333,"omacronacute",7763,"omacrongrave",7761,"omdeva",2384,"omega",969,"omega1",982,"omegacyrillic",1121,"omegalatinclosed",631,"omegaroundcyrillic",1147,"omegatitlocyrillic",1149,"omegatonos",974,"omgujarati",2768,"omicron",959,"omicrontonos",972,"omonospace",65359,"one",49,"onearabic",1633,"onebengali",2535,"onecircle",9312,"onecircleinversesansserif",10122,"onedeva",2407,"onedotenleader",8228,"oneeighth",8539,"onefitted",63196,"onegujarati",2791,"onegurmukhi",2663,"onehackarabic",1633,"onehalf",189,"onehangzhou",12321,"oneideographicparen",12832,"oneinferior",8321,"onemonospace",65297,"onenumeratorbengali",2548,"oneoldstyle",63281,"oneparen",9332,"oneperiod",9352,"onepersian",1777,"onequarter",188,"oneroman",8560,"onesuperior",185,"onethai",3665,"onethird",8531,"oogonek",491,"oogonekmacron",493,"oogurmukhi",2579,"oomatragurmukhi",2635,"oopen",596,"oparen",9386,"openbullet",9702,"option",8997,"ordfeminine",170,"ordmasculine",186,"orthogonal",8735,"oshortdeva",2322,"oshortvowelsigndeva",2378,"oslash",248,"oslashacute",511,"osmallhiragana",12361,"osmallkatakana",12457,"osmallkatakanahalfwidth",65387,"ostrokeacute",511,"osuperior",63216,"otcyrillic",1151,"otilde",245,"otildeacute",7757,"otildedieresis",7759,"oubopomofo",12577,"overline",8254,"overlinecenterline",65098,"overlinecmb",773,"overlinedashed",65097,"overlinedblwavy",65100,"overlinewavy",65099,"overscore",175,"ovowelsignbengali",2507,"ovowelsigndeva",2379,"ovowelsigngujarati",2763,"p",112,"paampssquare",13184,"paasentosquare",13099,"pabengali",2474,"pacute",7765,"padeva",2346,"pagedown",8671,"pageup",8670,"pagujarati",2730,"pagurmukhi",2602,"pahiragana",12401,"paiyannoithai",3631,"pakatakana",12497,"palatalizationcyrilliccmb",1156,"palochkacyrillic",1216,"pansioskorean",12671,"paragraph",182,"parallel",8741,"parenleft",40,"parenleftaltonearabic",64830,"parenleftbt",63725,"parenleftex",63724,"parenleftinferior",8333,"parenleftmonospace",65288,"parenleftsmall",65113,"parenleftsuperior",8317,"parenlefttp",63723,"parenleftvertical",65077,"parenright",41,"parenrightaltonearabic",64831,"parenrightbt",63736,"parenrightex",63735,"parenrightinferior",8334,"parenrightmonospace",65289,"parenrightsmall",65114,"parenrightsuperior",8318,"parenrighttp",63734,"parenrightvertical",65078,"partialdiff",8706,"paseqhebrew",1472,"pashtahebrew",1433,"pasquare",13225,"patah",1463,"patah11",1463,"patah1d",1463,"patah2a",1463,"patahhebrew",1463,"patahnarrowhebrew",1463,"patahquarterhebrew",1463,"patahwidehebrew",1463,"pazerhebrew",1441,"pbopomofo",12550,"pcircle",9439,"pdotaccent",7767,"pe",1508,"pecyrillic",1087,"pedagesh",64324,"pedageshhebrew",64324,"peezisquare",13115,"pefinaldageshhebrew",64323,"peharabic",1662,"peharmenian",1402,"pehebrew",1508,"pehfinalarabic",64343,"pehinitialarabic",64344,"pehiragana",12410,"pehmedialarabic",64345,"pekatakana",12506,"pemiddlehookcyrillic",1191,"perafehebrew",64334,"percent",37,"percentarabic",1642,"percentmonospace",65285,"percentsmall",65130,"period",46,"periodarmenian",1417,"periodcentered",183,"periodhalfwidth",65377,"periodinferior",63207,"periodmonospace",65294,"periodsmall",65106,"periodsuperior",63208,"perispomenigreekcmb",834,"perpendicular",8869,"perthousand",8240,"peseta",8359,"pfsquare",13194,"phabengali",2475,"phadeva",2347,"phagujarati",2731,"phagurmukhi",2603,"phi",966,"phi1",981,"phieuphacirclekorean",12922,"phieuphaparenkorean",12826,"phieuphcirclekorean",12908,"phieuphkorean",12621,"phieuphparenkorean",12812,"philatin",632,"phinthuthai",3642,"phisymbolgreek",981,"phook",421,"phophanthai",3614,"phophungthai",3612,"phosamphaothai",3616,"pi",960,"pieupacirclekorean",12915,"pieupaparenkorean",12819,"pieupcieuckorean",12662,"pieupcirclekorean",12901,"pieupkiyeokkorean",12658,"pieupkorean",12610,"pieupparenkorean",12805,"pieupsioskiyeokkorean",12660,"pieupsioskorean",12612,"pieupsiostikeutkorean",12661,"pieupthieuthkorean",12663,"pieuptikeutkorean",12659,"pihiragana",12404,"pikatakana",12500,"pisymbolgreek",982,"piwrarmenian",1411,"plus",43,"plusbelowcmb",799,"pluscircle",8853,"plusminus",177,"plusmod",726,"plusmonospace",65291,"plussmall",65122,"plussuperior",8314,"pmonospace",65360,"pmsquare",13272,"pohiragana",12413,"pointingindexdownwhite",9759,"pointingindexleftwhite",9756,"pointingindexrightwhite",9758,"pointingindexupwhite",9757,"pokatakana",12509,"poplathai",3611,"postalmark",12306,"postalmarkface",12320,"pparen",9387,"precedes",8826,"prescription",8478,"primemod",697,"primereversed",8245,"product",8719,"projective",8965,"prolongedkana",12540,"propellor",8984,"propersubset",8834,"propersuperset",8835,"proportion",8759,"proportional",8733,"psi",968,"psicyrillic",1137,"psilipneumatacyrilliccmb",1158,"pssquare",13232,"puhiragana",12407,"pukatakana",12503,"pvsquare",13236,"pwsquare",13242,"q",113,"qadeva",2392,"qadmahebrew",1448,"qafarabic",1602,"qaffinalarabic",65238,"qafinitialarabic",65239,"qafmedialarabic",65240,"qamats",1464,"qamats10",1464,"qamats1a",1464,"qamats1c",1464,"qamats27",1464,"qamats29",1464,"qamats33",1464,"qamatsde",1464,"qamatshebrew",1464,"qamatsnarrowhebrew",1464,"qamatsqatanhebrew",1464,"qamatsqatannarrowhebrew",1464,"qamatsqatanquarterhebrew",1464,"qamatsqatanwidehebrew",1464,"qamatsquarterhebrew",1464,"qamatswidehebrew",1464,"qarneyparahebrew",1439,"qbopomofo",12561,"qcircle",9440,"qhook",672,"qmonospace",65361,"qof",1511,"qofdagesh",64327,"qofdageshhebrew",64327,"qofhebrew",1511,"qparen",9388,"quarternote",9833,"qubuts",1467,"qubuts18",1467,"qubuts25",1467,"qubuts31",1467,"qubutshebrew",1467,"qubutsnarrowhebrew",1467,"qubutsquarterhebrew",1467,"qubutswidehebrew",1467,"question",63,"questionarabic",1567,"questionarmenian",1374,"questiondown",191,"questiondownsmall",63423,"questiongreek",894,"questionmonospace",65311,"questionsmall",63295,"quotedbl",34,"quotedblbase",8222,"quotedblleft",8220,"quotedblmonospace",65282,"quotedblprime",12318,"quotedblprimereversed",12317,"quotedblright",8221,"quoteleft",8216,"quoteleftreversed",8219,"quotereversed",8219,"quoteright",8217,"quoterightn",329,"quotesinglbase",8218,"quotesingle",39,"quotesinglemonospace",65287,"r",114,"raarmenian",1404,"rabengali",2480,"racute",341,"radeva",2352,"radical",8730,"radicalex",63717,"radoverssquare",13230,"radoverssquaredsquare",13231,"radsquare",13229,"rafe",1471,"rafehebrew",1471,"ragujarati",2736,"ragurmukhi",2608,"rahiragana",12425,"rakatakana",12521,"rakatakanahalfwidth",65431,"ralowerdiagonalbengali",2545,"ramiddlediagonalbengali",2544,"ramshorn",612,"ratio",8758,"rbopomofo",12566,"rcaron",345,"rcedilla",343,"rcircle",9441,"rcommaaccent",343,"rdblgrave",529,"rdotaccent",7769,"rdotbelow",7771,"rdotbelowmacron",7773,"referencemark",8251,"reflexsubset",8838,"reflexsuperset",8839,"registered",174,"registersans",63720,"registerserif",63194,"reharabic",1585,"reharmenian",1408,"rehfinalarabic",65198,"rehiragana",12428,"rekatakana",12524,"rekatakanahalfwidth",65434,"resh",1512,"reshdageshhebrew",64328,"reshhebrew",1512,"reversedtilde",8765,"reviahebrew",1431,"reviamugrashhebrew",1431,"revlogicalnot",8976,"rfishhook",638,"rfishhookreversed",639,"rhabengali",2525,"rhadeva",2397,"rho",961,"rhook",637,"rhookturned",635,"rhookturnedsuperior",693,"rhosymbolgreek",1009,"rhotichookmod",734,"rieulacirclekorean",12913,"rieulaparenkorean",12817,"rieulcirclekorean",12899,"rieulhieuhkorean",12608,"rieulkiyeokkorean",12602,"rieulkiyeoksioskorean",12649,"rieulkorean",12601,"rieulmieumkorean",12603,"rieulpansioskorean",12652,"rieulparenkorean",12803,"rieulphieuphkorean",12607,"rieulpieupkorean",12604,"rieulpieupsioskorean",12651,"rieulsioskorean",12605,"rieulthieuthkorean",12606,"rieultikeutkorean",12650,"rieulyeorinhieuhkorean",12653,"rightangle",8735,"righttackbelowcmb",793,"righttriangle",8895,"rihiragana",12426,"rikatakana",12522,"rikatakanahalfwidth",65432,"ring",730,"ringbelowcmb",805,"ringcmb",778,"ringhalfleft",703,"ringhalfleftarmenian",1369,"ringhalfleftbelowcmb",796,"ringhalfleftcentered",723,"ringhalfright",702,"ringhalfrightbelowcmb",825,"ringhalfrightcentered",722,"rinvertedbreve",531,"rittorusquare",13137,"rlinebelow",7775,"rlongleg",636,"rlonglegturned",634,"rmonospace",65362,"rohiragana",12429,"rokatakana",12525,"rokatakanahalfwidth",65435,"roruathai",3619,"rparen",9389,"rrabengali",2524,"rradeva",2353,"rragurmukhi",2652,"rreharabic",1681,"rrehfinalarabic",64397,"rrvocalicbengali",2528,"rrvocalicdeva",2400,"rrvocalicgujarati",2784,"rrvocalicvowelsignbengali",2500,"rrvocalicvowelsigndeva",2372,"rrvocalicvowelsigngujarati",2756,"rsuperior",63217,"rtblock",9616,"rturned",633,"rturnedsuperior",692,"ruhiragana",12427,"rukatakana",12523,"rukatakanahalfwidth",65433,"rupeemarkbengali",2546,"rupeesignbengali",2547,"rupiah",63197,"ruthai",3620,"rvocalicbengali",2443,"rvocalicdeva",2315,"rvocalicgujarati",2699,"rvocalicvowelsignbengali",2499,"rvocalicvowelsigndeva",2371,"rvocalicvowelsigngujarati",2755,"s",115,"sabengali",2488,"sacute",347,"sacutedotaccent",7781,"sadarabic",1589,"sadeva",2360,"sadfinalarabic",65210,"sadinitialarabic",65211,"sadmedialarabic",65212,"sagujarati",2744,"sagurmukhi",2616,"sahiragana",12373,"sakatakana",12469,"sakatakanahalfwidth",65403,"sallallahoualayhewasallamarabic",65018,"samekh",1505,"samekhdagesh",64321,"samekhdageshhebrew",64321,"samekhhebrew",1505,"saraaathai",3634,"saraaethai",3649,"saraaimaimalaithai",3652,"saraaimaimuanthai",3651,"saraamthai",3635,"saraathai",3632,"saraethai",3648,"saraiileftthai",63622,"saraiithai",3637,"saraileftthai",63621,"saraithai",3636,"saraothai",3650,"saraueeleftthai",63624,"saraueethai",3639,"saraueleftthai",63623,"sarauethai",3638,"sarauthai",3640,"sarauuthai",3641,"sbopomofo",12569,"scaron",353,"scarondotaccent",7783,"scedilla",351,"schwa",601,"schwacyrillic",1241,"schwadieresiscyrillic",1243,"schwahook",602,"scircle",9442,"scircumflex",349,"scommaaccent",537,"sdotaccent",7777,"sdotbelow",7779,"sdotbelowdotaccent",7785,"seagullbelowcmb",828,"second",8243,"secondtonechinese",714,"section",167,"seenarabic",1587,"seenfinalarabic",65202,"seeninitialarabic",65203,"seenmedialarabic",65204,"segol",1462,"segol13",1462,"segol1f",1462,"segol2c",1462,"segolhebrew",1462,"segolnarrowhebrew",1462,"segolquarterhebrew",1462,"segoltahebrew",1426,"segolwidehebrew",1462,"seharmenian",1405,"sehiragana",12379,"sekatakana",12475,"sekatakanahalfwidth",65406,"semicolon",59,"semicolonarabic",1563,"semicolonmonospace",65307,"semicolonsmall",65108,"semivoicedmarkkana",12444,"semivoicedmarkkanahalfwidth",65439,"sentisquare",13090,"sentosquare",13091,"seven",55,"sevenarabic",1639,"sevenbengali",2541,"sevencircle",9318,"sevencircleinversesansserif",10128,"sevendeva",2413,"seveneighths",8542,"sevengujarati",2797,"sevengurmukhi",2669,"sevenhackarabic",1639,"sevenhangzhou",12327,"sevenideographicparen",12838,"seveninferior",8327,"sevenmonospace",65303,"sevenoldstyle",63287,"sevenparen",9338,"sevenperiod",9358,"sevenpersian",1783,"sevenroman",8566,"sevensuperior",8311,"seventeencircle",9328,"seventeenparen",9348,"seventeenperiod",9368,"seventhai",3671,"sfthyphen",173,"shaarmenian",1399,"shabengali",2486,"shacyrillic",1096,"shaddaarabic",1617,"shaddadammaarabic",64609,"shaddadammatanarabic",64606,"shaddafathaarabic",64608,"shaddakasraarabic",64610,"shaddakasratanarabic",64607,"shade",9618,"shadedark",9619,"shadelight",9617,"shademedium",9618,"shadeva",2358,"shagujarati",2742,"shagurmukhi",2614,"shalshelethebrew",1427,"shbopomofo",12565,"shchacyrillic",1097,"sheenarabic",1588,"sheenfinalarabic",65206,"sheeninitialarabic",65207,"sheenmedialarabic",65208,"sheicoptic",995,"sheqel",8362,"sheqelhebrew",8362,"sheva",1456,"sheva115",1456,"sheva15",1456,"sheva22",1456,"sheva2e",1456,"shevahebrew",1456,"shevanarrowhebrew",1456,"shevaquarterhebrew",1456,"shevawidehebrew",1456,"shhacyrillic",1211,"shimacoptic",1005,"shin",1513,"shindagesh",64329,"shindageshhebrew",64329,"shindageshshindot",64300,"shindageshshindothebrew",64300,"shindageshsindot",64301,"shindageshsindothebrew",64301,"shindothebrew",1473,"shinhebrew",1513,"shinshindot",64298,"shinshindothebrew",64298,"shinsindot",64299,"shinsindothebrew",64299,"shook",642,"sigma",963,"sigma1",962,"sigmafinal",962,"sigmalunatesymbolgreek",1010,"sihiragana",12375,"sikatakana",12471,"sikatakanahalfwidth",65404,"siluqhebrew",1469,"siluqlefthebrew",1469,"similar",8764,"sindothebrew",1474,"siosacirclekorean",12916,"siosaparenkorean",12820,"sioscieuckorean",12670,"sioscirclekorean",12902,"sioskiyeokkorean",12666,"sioskorean",12613,"siosnieunkorean",12667,"siosparenkorean",12806,"siospieupkorean",12669,"siostikeutkorean",12668,"six",54,"sixarabic",1638,"sixbengali",2540,"sixcircle",9317,"sixcircleinversesansserif",10127,"sixdeva",2412,"sixgujarati",2796,"sixgurmukhi",2668,"sixhackarabic",1638,"sixhangzhou",12326,"sixideographicparen",12837,"sixinferior",8326,"sixmonospace",65302,"sixoldstyle",63286,"sixparen",9337,"sixperiod",9357,"sixpersian",1782,"sixroman",8565,"sixsuperior",8310,"sixteencircle",9327,"sixteencurrencydenominatorbengali",2553,"sixteenparen",9347,"sixteenperiod",9367,"sixthai",3670,"slash",47,"slashmonospace",65295,"slong",383,"slongdotaccent",7835,"smileface",9786,"smonospace",65363,"sofpasuqhebrew",1475,"softhyphen",173,"softsigncyrillic",1100,"sohiragana",12381,"sokatakana",12477,"sokatakanahalfwidth",65407,"soliduslongoverlaycmb",824,"solidusshortoverlaycmb",823,"sorusithai",3625,"sosalathai",3624,"sosothai",3595,"sosuathai",3626,"space",32,"spacehackarabic",32,"spade",9824,"spadesuitblack",9824,"spadesuitwhite",9828,"sparen",9390,"squarebelowcmb",827,"squarecc",13252,"squarecm",13213,"squarediagonalcrosshatchfill",9641,"squarehorizontalfill",9636,"squarekg",13199,"squarekm",13214,"squarekmcapital",13262,"squareln",13265,"squarelog",13266,"squaremg",13198,"squaremil",13269,"squaremm",13212,"squaremsquared",13217,"squareorthogonalcrosshatchfill",9638,"squareupperlefttolowerrightfill",9639,"squareupperrighttolowerleftfill",9640,"squareverticalfill",9637,"squarewhitewithsmallblack",9635,"srsquare",13275,"ssabengali",2487,"ssadeva",2359,"ssagujarati",2743,"ssangcieuckorean",12617,"ssanghieuhkorean",12677,"ssangieungkorean",12672,"ssangkiyeokkorean",12594,"ssangnieunkorean",12645,"ssangpieupkorean",12611,"ssangsioskorean",12614,"ssangtikeutkorean",12600,"ssuperior",63218,"sterling",163,"sterlingmonospace",65505,"strokelongoverlaycmb",822,"strokeshortoverlaycmb",821,"subset",8834,"subsetnotequal",8842,"subsetorequal",8838,"succeeds",8827,"suchthat",8715,"suhiragana",12377,"sukatakana",12473,"sukatakanahalfwidth",65405,"sukunarabic",1618,"summation",8721,"sun",9788,"superset",8835,"supersetnotequal",8843,"supersetorequal",8839,"svsquare",13276,"syouwaerasquare",13180,"t",116,"tabengali",2468,"tackdown",8868,"tackleft",8867,"tadeva",2340,"tagujarati",2724,"tagurmukhi",2596,"taharabic",1591,"tahfinalarabic",65218,"tahinitialarabic",65219,"tahiragana",12383,"tahmedialarabic",65220,"taisyouerasquare",13181,"takatakana",12479,"takatakanahalfwidth",65408,"tatweelarabic",1600,"tau",964,"tav",1514,"tavdages",64330,"tavdagesh",64330,"tavdageshhebrew",64330,"tavhebrew",1514,"tbar",359,"tbopomofo",12554,"tcaron",357,"tccurl",680,"tcedilla",355,"tcheharabic",1670,"tchehfinalarabic",64379,"tchehinitialarabic",64380,"tchehmedialarabic",64381,"tcircle",9443,"tcircumflexbelow",7793,"tcommaaccent",355,"tdieresis",7831,"tdotaccent",7787,"tdotbelow",7789,"tecyrillic",1090,"tedescendercyrillic",1197,"teharabic",1578,"tehfinalarabic",65174,"tehhahinitialarabic",64674,"tehhahisolatedarabic",64524,"tehinitialarabic",65175,"tehiragana",12390,"tehjeeminitialarabic",64673,"tehjeemisolatedarabic",64523,"tehmarbutaarabic",1577,"tehmarbutafinalarabic",65172,"tehmedialarabic",65176,"tehmeeminitialarabic",64676,"tehmeemisolatedarabic",64526,"tehnoonfinalarabic",64627,"tekatakana",12486,"tekatakanahalfwidth",65411,"telephone",8481,"telephoneblack",9742,"telishagedolahebrew",1440,"telishaqetanahebrew",1449,"tencircle",9321,"tenideographicparen",12841,"tenparen",9341,"tenperiod",9361,"tenroman",8569,"tesh",679,"tet",1496,"tetdagesh",64312,"tetdageshhebrew",64312,"tethebrew",1496,"tetsecyrillic",1205,"tevirhebrew",1435,"tevirlefthebrew",1435,"thabengali",2469,"thadeva",2341,"thagujarati",2725,"thagurmukhi",2597,"thalarabic",1584,"thalfinalarabic",65196,"thanthakhatlowleftthai",63640,"thanthakhatlowrightthai",63639,"thanthakhatthai",3660,"thanthakhatupperleftthai",63638,"theharabic",1579,"thehfinalarabic",65178,"thehinitialarabic",65179,"thehmedialarabic",65180,"thereexists",8707,"therefore",8756,"theta",952,"theta1",977,"thetasymbolgreek",977,"thieuthacirclekorean",12921,"thieuthaparenkorean",12825,"thieuthcirclekorean",12907,"thieuthkorean",12620,"thieuthparenkorean",12811,"thirteencircle",9324,"thirteenparen",9344,"thirteenperiod",9364,"thonangmonthothai",3601,"thook",429,"thophuthaothai",3602,"thorn",254,"thothahanthai",3607,"thothanthai",3600,"thothongthai",3608,"thothungthai",3606,"thousandcyrillic",1154,"thousandsseparatorarabic",1644,"thousandsseparatorpersian",1644,"three",51,"threearabic",1635,"threebengali",2537,"threecircle",9314,"threecircleinversesansserif",10124,"threedeva",2409,"threeeighths",8540,"threegujarati",2793,"threegurmukhi",2665,"threehackarabic",1635,"threehangzhou",12323,"threeideographicparen",12834,"threeinferior",8323,"threemonospace",65299,"threenumeratorbengali",2550,"threeoldstyle",63283,"threeparen",9334,"threeperiod",9354,"threepersian",1779,"threequarters",190,"threequartersemdash",63198,"threeroman",8562,"threesuperior",179,"threethai",3667,"thzsquare",13204,"tihiragana",12385,"tikatakana",12481,"tikatakanahalfwidth",65409,"tikeutacirclekorean",12912,"tikeutaparenkorean",12816,"tikeutcirclekorean",12898,"tikeutkorean",12599,"tikeutparenkorean",12802,"tilde",732,"tildebelowcmb",816,"tildecmb",771,"tildecomb",771,"tildedoublecmb",864,"tildeoperator",8764,"tildeoverlaycmb",820,"tildeverticalcmb",830,"timescircle",8855,"tipehahebrew",1430,"tipehalefthebrew",1430,"tippigurmukhi",2672,"titlocyrilliccmb",1155,"tiwnarmenian",1407,"tlinebelow",7791,"tmonospace",65364,"toarmenian",1385,"tohiragana",12392,"tokatakana",12488,"tokatakanahalfwidth",65412,"tonebarextrahighmod",741,"tonebarextralowmod",745,"tonebarhighmod",742,"tonebarlowmod",744,"tonebarmidmod",743,"tonefive",445,"tonesix",389,"tonetwo",424,"tonos",900,"tonsquare",13095,"topatakthai",3599,"tortoiseshellbracketleft",12308,"tortoiseshellbracketleftsmall",65117,"tortoiseshellbracketleftvertical",65081,"tortoiseshellbracketright",12309,"tortoiseshellbracketrightsmall",65118,"tortoiseshellbracketrightvertical",65082,"totaothai",3605,"tpalatalhook",427,"tparen",9391,"trademark",8482,"trademarksans",63722,"trademarkserif",63195,"tretroflexhook",648,"triagdn",9660,"triaglf",9668,"triagrt",9658,"triagup",9650,"ts",678,"tsadi",1510,"tsadidagesh",64326,"tsadidageshhebrew",64326,"tsadihebrew",1510,"tsecyrillic",1094,"tsere",1461,"tsere12",1461,"tsere1e",1461,"tsere2b",1461,"tserehebrew",1461,"tserenarrowhebrew",1461,"tserequarterhebrew",1461,"tserewidehebrew",1461,"tshecyrillic",1115,"tsuperior",63219,"ttabengali",2463,"ttadeva",2335,"ttagujarati",2719,"ttagurmukhi",2591,"tteharabic",1657,"ttehfinalarabic",64359,"ttehinitialarabic",64360,"ttehmedialarabic",64361,"tthabengali",2464,"tthadeva",2336,"tthagujarati",2720,"tthagurmukhi",2592,"tturned",647,"tuhiragana",12388,"tukatakana",12484,"tukatakanahalfwidth",65410,"tusmallhiragana",12387,"tusmallkatakana",12483,"tusmallkatakanahalfwidth",65391,"twelvecircle",9323,"twelveparen",9343,"twelveperiod",9363,"twelveroman",8571,"twentycircle",9331,"twentyhangzhou",21316,"twentyparen",9351,"twentyperiod",9371,"two",50,"twoarabic",1634,"twobengali",2536,"twocircle",9313,"twocircleinversesansserif",10123,"twodeva",2408,"twodotenleader",8229,"twodotleader",8229,"twodotleadervertical",65072,"twogujarati",2792,"twogurmukhi",2664,"twohackarabic",1634,"twohangzhou",12322,"twoideographicparen",12833,"twoinferior",8322,"twomonospace",65298,"twonumeratorbengali",2549,"twooldstyle",63282,"twoparen",9333,"twoperiod",9353,"twopersian",1778,"tworoman",8561,"twostroke",443,"twosuperior",178,"twothai",3666,"twothirds",8532,"u",117,"uacute",250,"ubar",649,"ubengali",2441,"ubopomofo",12584,"ubreve",365,"ucaron",468,"ucircle",9444,"ucircumflex",251,"ucircumflexbelow",7799,"ucyrillic",1091,"udattadeva",2385,"udblacute",369,"udblgrave",533,"udeva",2313,"udieresis",252,"udieresisacute",472,"udieresisbelow",7795,"udieresiscaron",474,"udieresiscyrillic",1265,"udieresisgrave",476,"udieresismacron",470,"udotbelow",7909,"ugrave",249,"ugujarati",2697,"ugurmukhi",2569,"uhiragana",12358,"uhookabove",7911,"uhorn",432,"uhornacute",7913,"uhorndotbelow",7921,"uhorngrave",7915,"uhornhookabove",7917,"uhorntilde",7919,"uhungarumlaut",369,"uhungarumlautcyrillic",1267,"uinvertedbreve",535,"ukatakana",12454,"ukatakanahalfwidth",65395,"ukcyrillic",1145,"ukorean",12636,"umacron",363,"umacroncyrillic",1263,"umacrondieresis",7803,"umatragurmukhi",2625,"umonospace",65365,"underscore",95,"underscoredbl",8215,"underscoremonospace",65343,"underscorevertical",65075,"underscorewavy",65103,"union",8746,"universal",8704,"uogonek",371,"uparen",9392,"upblock",9600,"upperdothebrew",1476,"upsilon",965,"upsilondieresis",971,"upsilondieresistonos",944,"upsilonlatin",650,"upsilontonos",973,"uptackbelowcmb",797,"uptackmod",724,"uragurmukhi",2675,"uring",367,"ushortcyrillic",1118,"usmallhiragana",12357,"usmallkatakana",12453,"usmallkatakanahalfwidth",65385,"ustraightcyrillic",1199,"ustraightstrokecyrillic",1201,"utilde",361,"utildeacute",7801,"utildebelow",7797,"uubengali",2442,"uudeva",2314,"uugujarati",2698,"uugurmukhi",2570,"uumatragurmukhi",2626,"uuvowelsignbengali",2498,"uuvowelsigndeva",2370,"uuvowelsigngujarati",2754,"uvowelsignbengali",2497,"uvowelsigndeva",2369,"uvowelsigngujarati",2753,"v",118,"vadeva",2357,"vagujarati",2741,"vagurmukhi",2613,"vakatakana",12535,"vav",1493,"vavdagesh",64309,"vavdagesh65",64309,"vavdageshhebrew",64309,"vavhebrew",1493,"vavholam",64331,"vavholamhebrew",64331,"vavvavhebrew",1520,"vavyodhebrew",1521,"vcircle",9445,"vdotbelow",7807,"vecyrillic",1074,"veharabic",1700,"vehfinalarabic",64363,"vehinitialarabic",64364,"vehmedialarabic",64365,"vekatakana",12537,"venus",9792,"verticalbar",124,"verticallineabovecmb",781,"verticallinebelowcmb",809,"verticallinelowmod",716,"verticallinemod",712,"vewarmenian",1406,"vhook",651,"vikatakana",12536,"viramabengali",2509,"viramadeva",2381,"viramagujarati",2765,"visargabengali",2435,"visargadeva",2307,"visargagujarati",2691,"vmonospace",65366,"voarmenian",1400,"voicediterationhiragana",12446,"voicediterationkatakana",12542,"voicedmarkkana",12443,"voicedmarkkanahalfwidth",65438,"vokatakana",12538,"vparen",9393,"vtilde",7805,"vturned",652,"vuhiragana",12436,"vukatakana",12532,"w",119,"wacute",7811,"waekorean",12633,"wahiragana",12431,"wakatakana",12527,"wakatakanahalfwidth",65436,"wakorean",12632,"wasmallhiragana",12430,"wasmallkatakana",12526,"wattosquare",13143,"wavedash",12316,"wavyunderscorevertical",65076,"wawarabic",1608,"wawfinalarabic",65262,"wawhamzaabovearabic",1572,"wawhamzaabovefinalarabic",65158,"wbsquare",13277,"wcircle",9446,"wcircumflex",373,"wdieresis",7813,"wdotaccent",7815,"wdotbelow",7817,"wehiragana",12433,"weierstrass",8472,"wekatakana",12529,"wekorean",12638,"weokorean",12637,"wgrave",7809,"whitebullet",9702,"whitecircle",9675,"whitecircleinverse",9689,"whitecornerbracketleft",12302,"whitecornerbracketleftvertical",65091,"whitecornerbracketright",12303,"whitecornerbracketrightvertical",65092,"whitediamond",9671,"whitediamondcontainingblacksmalldiamond",9672,"whitedownpointingsmalltriangle",9663,"whitedownpointingtriangle",9661,"whiteleftpointingsmalltriangle",9667,"whiteleftpointingtriangle",9665,"whitelenticularbracketleft",12310,"whitelenticularbracketright",12311,"whiterightpointingsmalltriangle",9657,"whiterightpointingtriangle",9655,"whitesmallsquare",9643,"whitesmilingface",9786,"whitesquare",9633,"whitestar",9734,"whitetelephone",9743,"whitetortoiseshellbracketleft",12312,"whitetortoiseshellbracketright",12313,"whiteuppointingsmalltriangle",9653,"whiteuppointingtriangle",9651,"wihiragana",12432,"wikatakana",12528,"wikorean",12639,"wmonospace",65367,"wohiragana",12434,"wokatakana",12530,"wokatakanahalfwidth",65382,"won",8361,"wonmonospace",65510,"wowaenthai",3623,"wparen",9394,"wring",7832,"wsuperior",695,"wturned",653,"wynn",447,"x",120,"xabovecmb",829,"xbopomofo",12562,"xcircle",9447,"xdieresis",7821,"xdotaccent",7819,"xeharmenian",1389,"xi",958,"xmonospace",65368,"xparen",9395,"xsuperior",739,"y",121,"yaadosquare",13134,"yabengali",2479,"yacute",253,"yadeva",2351,"yaekorean",12626,"yagujarati",2735,"yagurmukhi",2607,"yahiragana",12420,"yakatakana",12516,"yakatakanahalfwidth",65428,"yakorean",12625,"yamakkanthai",3662,"yasmallhiragana",12419,"yasmallkatakana",12515,"yasmallkatakanahalfwidth",65388,"yatcyrillic",1123,"ycircle",9448,"ycircumflex",375,"ydieresis",255,"ydotaccent",7823,"ydotbelow",7925,"yeharabic",1610,"yehbarreearabic",1746,"yehbarreefinalarabic",64431,"yehfinalarabic",65266,"yehhamzaabovearabic",1574,"yehhamzaabovefinalarabic",65162,"yehhamzaaboveinitialarabic",65163,"yehhamzaabovemedialarabic",65164,"yehinitialarabic",65267,"yehmedialarabic",65268,"yehmeeminitialarabic",64733,"yehmeemisolatedarabic",64600,"yehnoonfinalarabic",64660,"yehthreedotsbelowarabic",1745,"yekorean",12630,"yen",165,"yenmonospace",65509,"yeokorean",12629,"yeorinhieuhkorean",12678,"yerahbenyomohebrew",1450,"yerahbenyomolefthebrew",1450,"yericyrillic",1099,"yerudieresiscyrillic",1273,"yesieungkorean",12673,"yesieungpansioskorean",12675,"yesieungsioskorean",12674,"yetivhebrew",1434,"ygrave",7923,"yhook",436,"yhookabove",7927,"yiarmenian",1397,"yicyrillic",1111,"yikorean",12642,"yinyang",9775,"yiwnarmenian",1410,"ymonospace",65369,"yod",1497,"yoddagesh",64313,"yoddageshhebrew",64313,"yodhebrew",1497,"yodyodhebrew",1522,"yodyodpatahhebrew",64287,"yohiragana",12424,"yoikorean",12681,"yokatakana",12520,"yokatakanahalfwidth",65430,"yokorean",12635,"yosmallhiragana",12423,"yosmallkatakana",12519,"yosmallkatakanahalfwidth",65390,"yotgreek",1011,"yoyaekorean",12680,"yoyakorean",12679,"yoyakthai",3618,"yoyingthai",3597,"yparen",9396,"ypogegrammeni",890,"ypogegrammenigreekcmb",837,"yr",422,"yring",7833,"ysuperior",696,"ytilde",7929,"yturned",654,"yuhiragana",12422,"yuikorean",12684,"yukatakana",12518,"yukatakanahalfwidth",65429,"yukorean",12640,"yusbigcyrillic",1131,"yusbigiotifiedcyrillic",1133,"yuslittlecyrillic",1127,"yuslittleiotifiedcyrillic",1129,"yusmallhiragana",12421,"yusmallkatakana",12517,"yusmallkatakanahalfwidth",65389,"yuyekorean",12683,"yuyeokorean",12682,"yyabengali",2527,"yyadeva",2399,"z",122,"zaarmenian",1382,"zacute",378,"zadeva",2395,"zagurmukhi",2651,"zaharabic",1592,"zahfinalarabic",65222,"zahinitialarabic",65223,"zahiragana",12374,"zahmedialarabic",65224,"zainarabic",1586,"zainfinalarabic",65200,"zakatakana",12470,"zaqefgadolhebrew",1429,"zaqefqatanhebrew",1428,"zarqahebrew",1432,"zayin",1494,"zayindagesh",64310,"zayindageshhebrew",64310,"zayinhebrew",1494,"zbopomofo",12567,"zcaron",382,"zcircle",9449,"zcircumflex",7825,"zcurl",657,"zdot",380,"zdotaccent",380,"zdotbelow",7827,"zecyrillic",1079,"zedescendercyrillic",1177,"zedieresiscyrillic",1247,"zehiragana",12380,"zekatakana",12476,"zero",48,"zeroarabic",1632,"zerobengali",2534,"zerodeva",2406,"zerogujarati",2790,"zerogurmukhi",2662,"zerohackarabic",1632,"zeroinferior",8320,"zeromonospace",65296,"zerooldstyle",63280,"zeropersian",1776,"zerosuperior",8304,"zerothai",3664,"zerowidthjoiner",65279,"zerowidthnonjoiner",8204,"zerowidthspace",8203,"zeta",950,"zhbopomofo",12563,"zhearmenian",1386,"zhebrevecyrillic",1218,"zhecyrillic",1078,"zhedescendercyrillic",1175,"zhedieresiscyrillic",1245,"zihiragana",12376,"zikatakana",12472,"zinorhebrew",1454,"zlinebelow",7829,"zmonospace",65370,"zohiragana",12382,"zokatakana",12478,"zparen",9397,"zretroflexhook",656,"zstroke",438,"zuhiragana",12378,"zukatakana",12474,".notdef",0,"angbracketleftbig",9001,"angbracketleftBig",9001,"angbracketleftbigg",9001,"angbracketleftBigg",9001,"angbracketrightBig",9002,"angbracketrightbig",9002,"angbracketrightBigg",9002,"angbracketrightbigg",9002,"arrowhookleft",8618,"arrowhookright",8617,"arrowlefttophalf",8636,"arrowleftbothalf",8637,"arrownortheast",8599,"arrownorthwest",8598,"arrowrighttophalf",8640,"arrowrightbothalf",8641,"arrowsoutheast",8600,"arrowsouthwest",8601,"backslashbig",8726,"backslashBig",8726,"backslashBigg",8726,"backslashbigg",8726,"bardbl",8214,"bracehtipdownleft",65079,"bracehtipdownright",65079,"bracehtipupleft",65080,"bracehtipupright",65080,"braceleftBig",123,"braceleftbig",123,"braceleftbigg",123,"braceleftBigg",123,"bracerightBig",125,"bracerightbig",125,"bracerightbigg",125,"bracerightBigg",125,"bracketleftbig",91,"bracketleftBig",91,"bracketleftbigg",91,"bracketleftBigg",91,"bracketrightBig",93,"bracketrightbig",93,"bracketrightbigg",93,"bracketrightBigg",93,"ceilingleftbig",8968,"ceilingleftBig",8968,"ceilingleftBigg",8968,"ceilingleftbigg",8968,"ceilingrightbig",8969,"ceilingrightBig",8969,"ceilingrightbigg",8969,"ceilingrightBigg",8969,"circledotdisplay",8857,"circledottext",8857,"circlemultiplydisplay",8855,"circlemultiplytext",8855,"circleplusdisplay",8853,"circleplustext",8853,"contintegraldisplay",8750,"contintegraltext",8750,"coproductdisplay",8720,"coproducttext",8720,"floorleftBig",8970,"floorleftbig",8970,"floorleftbigg",8970,"floorleftBigg",8970,"floorrightbig",8971,"floorrightBig",8971,"floorrightBigg",8971,"floorrightbigg",8971,"hatwide",770,"hatwider",770,"hatwidest",770,"intercal",7488,"integraldisplay",8747,"integraltext",8747,"intersectiondisplay",8898,"intersectiontext",8898,"logicalanddisplay",8743,"logicalandtext",8743,"logicalordisplay",8744,"logicalortext",8744,"parenleftBig",40,"parenleftbig",40,"parenleftBigg",40,"parenleftbigg",40,"parenrightBig",41,"parenrightbig",41,"parenrightBigg",41,"parenrightbigg",41,"prime",8242,"productdisplay",8719,"producttext",8719,"radicalbig",8730,"radicalBig",8730,"radicalBigg",8730,"radicalbigg",8730,"radicalbt",8730,"radicaltp",8730,"radicalvertex",8730,"slashbig",47,"slashBig",47,"slashBigg",47,"slashbigg",47,"summationdisplay",8721,"summationtext",8721,"tildewide",732,"tildewider",732,"tildewidest",732,"uniondisplay",8899,"unionmultidisplay",8846,"unionmultitext",8846,"unionsqdisplay",8852,"unionsqtext",8852,"uniontext",8899,"vextenddouble",8741,"vextendsingle",8739]}),getDingbatsGlyphsUnicode=(0,_core_utils_js__WEBPACK_IMPORTED_MODULE_0__.getArrayLookupTableFactory)(function(){return["space",32,"a1",9985,"a2",9986,"a202",9987,"a3",9988,"a4",9742,"a5",9990,"a119",9991,"a118",9992,"a117",9993,"a11",9755,"a12",9758,"a13",9996,"a14",9997,"a15",9998,"a16",9999,"a105",1e4,"a17",10001,"a18",10002,"a19",10003,"a20",10004,"a21",10005,"a22",10006,"a23",10007,"a24",10008,"a25",10009,"a26",10010,"a27",10011,"a28",10012,"a6",10013,"a7",10014,"a8",10015,"a9",10016,"a10",10017,"a29",10018,"a30",10019,"a31",10020,"a32",10021,"a33",10022,"a34",10023,"a35",9733,"a36",10025,"a37",10026,"a38",10027,"a39",10028,"a40",10029,"a41",10030,"a42",10031,"a43",10032,"a44",10033,"a45",10034,"a46",10035,"a47",10036,"a48",10037,"a49",10038,"a50",10039,"a51",10040,"a52",10041,"a53",10042,"a54",10043,"a55",10044,"a56",10045,"a57",10046,"a58",10047,"a59",10048,"a60",10049,"a61",10050,"a62",10051,"a63",10052,"a64",10053,"a65",10054,"a66",10055,"a67",10056,"a68",10057,"a69",10058,"a70",10059,"a71",9679,"a72",10061,"a73",9632,"a74",10063,"a203",10064,"a75",10065,"a204",10066,"a76",9650,"a77",9660,"a78",9670,"a79",10070,"a81",9687,"a82",10072,"a83",10073,"a84",10074,"a97",10075,"a98",10076,"a99",10077,"a100",10078,"a101",10081,"a102",10082,"a103",10083,"a104",10084,"a106",10085,"a107",10086,"a108",10087,"a112",9827,"a111",9830,"a110",9829,"a109",9824,"a120",9312,"a121",9313,"a122",9314,"a123",9315,"a124",9316,"a125",9317,"a126",9318,"a127",9319,"a128",9320,"a129",9321,"a130",10102,"a131",10103,"a132",10104,"a133",10105,"a134",10106,"a135",10107,"a136",10108,"a137",10109,"a138",10110,"a139",10111,"a140",10112,"a141",10113,"a142",10114,"a143",10115,"a144",10116,"a145",10117,"a146",10118,"a147",10119,"a148",10120,"a149",10121,"a150",10122,"a151",10123,"a152",10124,"a153",10125,"a154",10126,"a155",10127,"a156",10128,"a157",10129,"a158",10130,"a159",10131,"a160",10132,"a161",8594,"a163",8596,"a164",8597,"a196",10136,"a165",10137,"a192",10138,"a166",10139,"a167",10140,"a168",10141,"a169",10142,"a170",10143,"a171",10144,"a172",10145,"a173",10146,"a162",10147,"a174",10148,"a175",10149,"a176",10150,"a177",10151,"a178",10152,"a179",10153,"a193",10154,"a180",10155,"a199",10156,"a181",10157,"a200",10158,"a182",10159,"a201",10161,"a183",10162,"a184",10163,"a197",10164,"a185",10165,"a194",10166,"a198",10167,"a186",10168,"a195",10169,"a187",10170,"a188",10171,"a189",10172,"a190",10173,"a191",10174,"a89",10088,"a90",10089,"a93",10090,"a94",10091,"a91",10092,"a92",10093,"a205",10094,"a85",10095,"a206",10096,"a86",10097,"a87",10098,"a88",10099,"a95",10100,"a96",10101,".notdef",0]})},(__unused_webpack_module2,__webpack_exports__3,__w_pdfjs_require__3)=>{__w_pdfjs_require__3.r(__webpack_exports__3),__w_pdfjs_require__3.d(__webpack_exports__3,{clearUnicodeCaches:()=>clearUnicodeCaches,getCharUnicodeCategory:()=>getCharUnicodeCategory,getNormalizedUnicodes:()=>getNormalizedUnicodes,getUnicodeForGlyph:()=>getUnicodeForGlyph,getUnicodeRangeFor:()=>getUnicodeRangeFor,mapSpecialUnicodeValues:()=>mapSpecialUnicodeValues,reverseIfRtl:()=>reverseIfRtl});var _core_utils_js__WEBPACK_IMPORTED_MODULE_0__=__w_pdfjs_require__3(6);const getSpecialPUASymbols=(0,_core_utils_js__WEBPACK_IMPORTED_MODULE_0__.getLookupTableFactory)(function(t){t[63721]=169,t[63193]=169,t[63720]=174,t[63194]=174,t[63722]=8482,t[63195]=8482,t[63729]=9127,t[63730]=9128,t[63731]=9129,t[63740]=9131,t[63741]=9132,t[63742]=9133,t[63726]=9121,t[63727]=9122,t[63728]=9123,t[63737]=9124,t[63738]=9125,t[63739]=9126,t[63723]=9115,t[63724]=9116,t[63725]=9117,t[63734]=9118,t[63735]=9119,t[63736]=9120});function mapSpecialUnicodeValues(code){return code>=65520&&code<=65535?0:code>=62976&&code<=63743?getSpecialPUASymbols()[code]||code:code===173?45:code}__name2(mapSpecialUnicodeValues,"mapSpecialUnicodeValues"),__name(mapSpecialUnicodeValues,"mapSpecialUnicodeValues");function getUnicodeForGlyph(name,glyphsUnicodeMap){let unicode=glyphsUnicodeMap[name];if(unicode!==void 0)return unicode;if(!name)return-1;if(name[0]==="u"){const nameLen=name.length;let hexStr;if(nameLen===7&&name[1]==="n"&&name[2]==="i")hexStr=name.substring(3);else if(nameLen>=5&&nameLen<=7)hexStr=name.substring(1);else return-1;if(hexStr===hexStr.toUpperCase()&&(unicode=parseInt(hexStr,16),unicode>=0))return unicode}return-1}__name2(getUnicodeForGlyph,"getUnicodeForGlyph"),__name(getUnicodeForGlyph,"getUnicodeForGlyph");const UnicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function getUnicodeRangeFor(value){for(let i=0,ii=UnicodeRanges.length;i<ii;i++){const range=UnicodeRanges[i];if(value>=range.begin&&value<range.end)return i}return-1}__name2(getUnicodeRangeFor,"getUnicodeRangeFor"),__name(getUnicodeRangeFor,"getUnicodeRangeFor");function isRTLRangeFor(value){let range=UnicodeRanges[13];return value>=range.begin&&value<range.end||(range=UnicodeRanges[11],value>=range.begin&&value<range.end)}__name2(isRTLRangeFor,"isRTLRangeFor"),__name(isRTLRangeFor,"isRTLRangeFor");const getNormalizedUnicodes=(0,_core_utils_js__WEBPACK_IMPORTED_MODULE_0__.getArrayLookupTableFactory)(function(){return["\xA8"," \u0308","\xAF"," \u0304","\xB4"," \u0301","\xB5","\u03BC","\xB8"," \u0327","\u0132","IJ","\u0133","ij","\u013F","L\xB7","\u0140","l\xB7","\u0149","\u02BCn","\u017F","s","\u01C4","D\u017D","\u01C5","D\u017E","\u01C6","d\u017E","\u01C7","LJ","\u01C8","Lj","\u01C9","lj","\u01CA","NJ","\u01CB","Nj","\u01CC","nj","\u01F1","DZ","\u01F2","Dz","\u01F3","dz","\u02D8"," \u0306","\u02D9"," \u0307","\u02DA"," \u030A","\u02DB"," \u0328","\u02DC"," \u0303","\u02DD"," \u030B","\u037A"," \u0345","\u0384"," \u0301","\u03D0","\u03B2","\u03D1","\u03B8","\u03D2","\u03A5","\u03D5","\u03C6","\u03D6","\u03C0","\u03F0","\u03BA","\u03F1","\u03C1","\u03F2","\u03C2","\u03F4","\u0398","\u03F5","\u03B5","\u03F9","\u03A3","\u0587","\u0565\u0582","\u0675","\u0627\u0674","\u0676","\u0648\u0674","\u0677","\u06C7\u0674","\u0678","\u064A\u0674","\u0E33","\u0E4D\u0E32","\u0EB3","\u0ECD\u0EB2","\u0EDC","\u0EAB\u0E99","\u0EDD","\u0EAB\u0EA1","\u0F77","\u0FB2\u0F81","\u0F79","\u0FB3\u0F81","\u1E9A","a\u02BE","\u1FBD"," \u0313","\u1FBF"," \u0313","\u1FC0"," \u0342","\u1FFE"," \u0314","\u2002"," ","\u2003"," ","\u2004"," ","\u2005"," ","\u2006"," ","\u2008"," ","\u2009"," ","\u200A"," ","\u2017"," \u0333","\u2024",".","\u2025","..","\u2026","...","\u2033","\u2032\u2032","\u2034","\u2032\u2032\u2032","\u2036","\u2035\u2035","\u2037","\u2035\u2035\u2035","\u203C","!!","\u203E"," \u0305","\u2047","??","\u2048","?!","\u2049","!?","\u2057","\u2032\u2032\u2032\u2032","\u205F"," ","\u20A8","Rs","\u2100","a/c","\u2101","a/s","\u2103","\xB0C","\u2105","c/o","\u2106","c/u","\u2107","\u0190","\u2109","\xB0F","\u2116","No","\u2121","TEL","\u2135","\u05D0","\u2136","\u05D1","\u2137","\u05D2","\u2138","\u05D3","\u213B","FAX","\u2160","I","\u2161","II","\u2162","III","\u2163","IV","\u2164","V","\u2165","VI","\u2166","VII","\u2167","VIII","\u2168","IX","\u2169","X","\u216A","XI","\u216B","XII","\u216C","L","\u216D","C","\u216E","D","\u216F","M","\u2170","i","\u2171","ii","\u2172","iii","\u2173","iv","\u2174","v","\u2175","vi","\u2176","vii","\u2177","viii","\u2178","ix","\u2179","x","\u217A","xi","\u217B","xii","\u217C","l","\u217D","c","\u217E","d","\u217F","m","\u222C","\u222B\u222B","\u222D","\u222B\u222B\u222B","\u222F","\u222E\u222E","\u2230","\u222E\u222E\u222E","\u2474","(1)","\u2475","(2)","\u2476","(3)","\u2477","(4)","\u2478","(5)","\u2479","(6)","\u247A","(7)","\u247B","(8)","\u247C","(9)","\u247D","(10)","\u247E","(11)","\u247F","(12)","\u2480","(13)","\u2481","(14)","\u2482","(15)","\u2483","(16)","\u2484","(17)","\u2485","(18)","\u2486","(19)","\u2487","(20)","\u2488","1.","\u2489","2.","\u248A","3.","\u248B","4.","\u248C","5.","\u248D","6.","\u248E","7.","\u248F","8.","\u2490","9.","\u2491","10.","\u2492","11.","\u2493","12.","\u2494","13.","\u2495","14.","\u2496","15.","\u2497","16.","\u2498","17.","\u2499","18.","\u249A","19.","\u249B","20.","\u249C","(a)","\u249D","(b)","\u249E","(c)","\u249F","(d)","\u24A0","(e)","\u24A1","(f)","\u24A2","(g)","\u24A3","(h)","\u24A4","(i)","\u24A5","(j)","\u24A6","(k)","\u24A7","(l)","\u24A8","(m)","\u24A9","(n)","\u24AA","(o)","\u24AB","(p)","\u24AC","(q)","\u24AD","(r)","\u24AE","(s)","\u24AF","(t)","\u24B0","(u)","\u24B1","(v)","\u24B2","(w)","\u24B3","(x)","\u24B4","(y)","\u24B5","(z)","\u2A0C","\u222B\u222B\u222B\u222B","\u2A74","::=","\u2A75","==","\u2A76","===","\u2E9F","\u6BCD","\u2EF3","\u9F9F","\u2F00","\u4E00","\u2F01","\u4E28","\u2F02","\u4E36","\u2F03","\u4E3F","\u2F04","\u4E59","\u2F05","\u4E85","\u2F06","\u4E8C","\u2F07","\u4EA0","\u2F08","\u4EBA","\u2F09","\u513F","\u2F0A","\u5165","\u2F0B","\u516B","\u2F0C","\u5182","\u2F0D","\u5196","\u2F0E","\u51AB","\u2F0F","\u51E0","\u2F10","\u51F5","\u2F11","\u5200","\u2F12","\u529B","\u2F13","\u52F9","\u2F14","\u5315","\u2F15","\u531A","\u2F16","\u5338","\u2F17","\u5341","\u2F18","\u535C","\u2F19","\u5369","\u2F1A","\u5382","\u2F1B","\u53B6","\u2F1C","\u53C8","\u2F1D","\u53E3","\u2F1E","\u56D7","\u2F1F","\u571F","\u2F20","\u58EB","\u2F21","\u5902","\u2F22","\u590A","\u2F23","\u5915","\u2F24","\u5927","\u2F25","\u5973","\u2F26","\u5B50","\u2F27","\u5B80","\u2F28","\u5BF8","\u2F29","\u5C0F","\u2F2A","\u5C22","\u2F2B","\u5C38","\u2F2C","\u5C6E","\u2F2D","\u5C71","\u2F2E","\u5DDB","\u2F2F","\u5DE5","\u2F30","\u5DF1","\u2F31","\u5DFE","\u2F32","\u5E72","\u2F33","\u5E7A","\u2F34","\u5E7F","\u2F35","\u5EF4","\u2F36","\u5EFE","\u2F37","\u5F0B","\u2F38","\u5F13","\u2F39","\u5F50","\u2F3A","\u5F61","\u2F3B","\u5F73","\u2F3C","\u5FC3","\u2F3D","\u6208","\u2F3E","\u6236","\u2F3F","\u624B","\u2F40","\u652F","\u2F41","\u6534","\u2F42","\u6587","\u2F43","\u6597","\u2F44","\u65A4","\u2F45","\u65B9","\u2F46","\u65E0","\u2F47","\u65E5","\u2F48","\u66F0","\u2F49","\u6708","\u2F4A","\u6728","\u2F4B","\u6B20","\u2F4C","\u6B62","\u2F4D","\u6B79","\u2F4E","\u6BB3","\u2F4F","\u6BCB","\u2F50","\u6BD4","\u2F51","\u6BDB","\u2F52","\u6C0F","\u2F53","\u6C14","\u2F54","\u6C34","\u2F55","\u706B","\u2F56","\u722A","\u2F57","\u7236","\u2F58","\u723B","\u2F59","\u723F","\u2F5A","\u7247","\u2F5B","\u7259","\u2F5C","\u725B","\u2F5D","\u72AC","\u2F5E","\u7384","\u2F5F","\u7389","\u2F60","\u74DC","\u2F61","\u74E6","\u2F62","\u7518","\u2F63","\u751F","\u2F64","\u7528","\u2F65","\u7530","\u2F66","\u758B","\u2F67","\u7592","\u2F68","\u7676","\u2F69","\u767D","\u2F6A","\u76AE","\u2F6B","\u76BF","\u2F6C","\u76EE","\u2F6D","\u77DB","\u2F6E","\u77E2","\u2F6F","\u77F3","\u2F70","\u793A","\u2F71","\u79B8","\u2F72","\u79BE","\u2F73","\u7A74","\u2F74","\u7ACB","\u2F75","\u7AF9","\u2F76","\u7C73","\u2F77","\u7CF8","\u2F78","\u7F36","\u2F79","\u7F51","\u2F7A","\u7F8A","\u2F7B","\u7FBD","\u2F7C","\u8001","\u2F7D","\u800C","\u2F7E","\u8012","\u2F7F","\u8033","\u2F80","\u807F","\u2F81","\u8089","\u2F82","\u81E3","\u2F83","\u81EA","\u2F84","\u81F3","\u2F85","\u81FC","\u2F86","\u820C","\u2F87","\u821B","\u2F88","\u821F","\u2F89","\u826E","\u2F8A","\u8272","\u2F8B","\u8278","\u2F8C","\u864D","\u2F8D","\u866B","\u2F8E","\u8840","\u2F8F","\u884C","\u2F90","\u8863","\u2F91","\u897E","\u2F92","\u898B","\u2F93","\u89D2","\u2F94","\u8A00","\u2F95","\u8C37","\u2F96","\u8C46","\u2F97","\u8C55","\u2F98","\u8C78","\u2F99","\u8C9D","\u2F9A","\u8D64","\u2F9B","\u8D70","\u2F9C","\u8DB3","\u2F9D","\u8EAB","\u2F9E","\u8ECA","\u2F9F","\u8F9B","\u2FA0","\u8FB0","\u2FA1","\u8FB5","\u2FA2","\u9091","\u2FA3","\u9149","\u2FA4","\u91C6","\u2FA5","\u91CC","\u2FA6","\u91D1","\u2FA7","\u9577","\u2FA8","\u9580","\u2FA9","\u961C","\u2FAA","\u96B6","\u2FAB","\u96B9","\u2FAC","\u96E8","\u2FAD","\u9751","\u2FAE","\u975E","\u2FAF","\u9762","\u2FB0","\u9769","\u2FB1","\u97CB","\u2FB2","\u97ED","\u2FB3","\u97F3","\u2FB4","\u9801","\u2FB5","\u98A8","\u2FB6","\u98DB","\u2FB7","\u98DF","\u2FB8","\u9996","\u2FB9","\u9999","\u2FBA","\u99AC","\u2FBB","\u9AA8","\u2FBC","\u9AD8","\u2FBD","\u9ADF","\u2FBE","\u9B25","\u2FBF","\u9B2F","\u2FC0","\u9B32","\u2FC1","\u9B3C","\u2FC2","\u9B5A","\u2FC3","\u9CE5","\u2FC4","\u9E75","\u2FC5","\u9E7F","\u2FC6","\u9EA5","\u2FC7","\u9EBB","\u2FC8","\u9EC3","\u2FC9","\u9ECD","\u2FCA","\u9ED1","\u2FCB","\u9EF9","\u2FCC","\u9EFD","\u2FCD","\u9F0E","\u2FCE","\u9F13","\u2FCF","\u9F20","\u2FD0","\u9F3B","\u2FD1","\u9F4A","\u2FD2","\u9F52","\u2FD3","\u9F8D","\u2FD4","\u9F9C","\u2FD5","\u9FA0","\u3036","\u3012","\u3038","\u5341","\u3039","\u5344","\u303A","\u5345","\u309B"," \u3099","\u309C"," \u309A","\u3131","\u1100","\u3132","\u1101","\u3133","\u11AA","\u3134","\u1102","\u3135","\u11AC","\u3136","\u11AD","\u3137","\u1103","\u3138","\u1104","\u3139","\u1105","\u313A","\u11B0","\u313B","\u11B1","\u313C","\u11B2","\u313D","\u11B3","\u313E","\u11B4","\u313F","\u11B5","\u3140","\u111A","\u3141","\u1106","\u3142","\u1107","\u3143","\u1108","\u3144","\u1121","\u3145","\u1109","\u3146","\u110A","\u3147","\u110B","\u3148","\u110C","\u3149","\u110D","\u314A","\u110E","\u314B","\u110F","\u314C","\u1110","\u314D","\u1111","\u314E","\u1112","\u314F","\u1161","\u3150","\u1162","\u3151","\u1163","\u3152","\u1164","\u3153","\u1165","\u3154","\u1166","\u3155","\u1167","\u3156","\u1168","\u3157","\u1169","\u3158","\u116A","\u3159","\u116B","\u315A","\u116C","\u315B","\u116D","\u315C","\u116E","\u315D","\u116F","\u315E","\u1170","\u315F","\u1171","\u3160","\u1172","\u3161","\u1173","\u3162","\u1174","\u3163","\u1175","\u3164","\u1160","\u3165","\u1114","\u3166","\u1115","\u3167","\u11C7","\u3168","\u11C8","\u3169","\u11CC","\u316A","\u11CE","\u316B","\u11D3","\u316C","\u11D7","\u316D","\u11D9","\u316E","\u111C","\u316F","\u11DD","\u3170","\u11DF","\u3171","\u111D","\u3172","\u111E","\u3173","\u1120","\u3174","\u1122","\u3175","\u1123","\u3176","\u1127","\u3177","\u1129","\u3178","\u112B","\u3179","\u112C","\u317A","\u112D","\u317B","\u112E","\u317C","\u112F","\u317D","\u1132","\u317E","\u1136","\u317F","\u1140","\u3180","\u1147","\u3181","\u114C","\u3182","\u11F1","\u3183","\u11F2","\u3184","\u1157","\u3185","\u1158","\u3186","\u1159","\u3187","\u1184","\u3188","\u1185","\u3189","\u1188","\u318A","\u1191","\u318B","\u1192","\u318C","\u1194","\u318D","\u119E","\u318E","\u11A1","\u3200","(\u1100)","\u3201","(\u1102)","\u3202","(\u1103)","\u3203","(\u1105)","\u3204","(\u1106)","\u3205","(\u1107)","\u3206","(\u1109)","\u3207","(\u110B)","\u3208","(\u110C)","\u3209","(\u110E)","\u320A","(\u110F)","\u320B","(\u1110)","\u320C","(\u1111)","\u320D","(\u1112)","\u320E","(\u1100\u1161)","\u320F","(\u1102\u1161)","\u3210","(\u1103\u1161)","\u3211","(\u1105\u1161)","\u3212","(\u1106\u1161)","\u3213","(\u1107\u1161)","\u3214","(\u1109\u1161)","\u3215","(\u110B\u1161)","\u3216","(\u110C\u1161)","\u3217","(\u110E\u1161)","\u3218","(\u110F\u1161)","\u3219","(\u1110\u1161)","\u321A","(\u1111\u1161)","\u321B","(\u1112\u1161)","\u321C","(\u110C\u116E)","\u321D","(\u110B\u1169\u110C\u1165\u11AB)","\u321E","(\u110B\u1169\u1112\u116E)","\u3220","(\u4E00)","\u3221","(\u4E8C)","\u3222","(\u4E09)","\u3223","(\u56DB)","\u3224","(\u4E94)","\u3225","(\u516D)","\u3226","(\u4E03)","\u3227","(\u516B)","\u3228","(\u4E5D)","\u3229","(\u5341)","\u322A","(\u6708)","\u322B","(\u706B)","\u322C","(\u6C34)","\u322D","(\u6728)","\u322E","(\u91D1)","\u322F","(\u571F)","\u3230","(\u65E5)","\u3231","(\u682A)","\u3232","(\u6709)","\u3233","(\u793E)","\u3234","(\u540D)","\u3235","(\u7279)","\u3236","(\u8CA1)","\u3237","(\u795D)","\u3238","(\u52B4)","\u3239","(\u4EE3)","\u323A","(\u547C)","\u323B","(\u5B66)","\u323C","(\u76E3)","\u323D","(\u4F01)","\u323E","(\u8CC7)","\u323F","(\u5354)","\u3240","(\u796D)","\u3241","(\u4F11)","\u3242","(\u81EA)","\u3243","(\u81F3)","\u32C0","1\u6708","\u32C1","2\u6708","\u32C2","3\u6708","\u32C3","4\u6708","\u32C4","5\u6708","\u32C5","6\u6708","\u32C6","7\u6708","\u32C7","8\u6708","\u32C8","9\u6708","\u32C9","10\u6708","\u32CA","11\u6708","\u32CB","12\u6708","\u3358","0\u70B9","\u3359","1\u70B9","\u335A","2\u70B9","\u335B","3\u70B9","\u335C","4\u70B9","\u335D","5\u70B9","\u335E","6\u70B9","\u335F","7\u70B9","\u3360","8\u70B9","\u3361","9\u70B9","\u3362","10\u70B9","\u3363","11\u70B9","\u3364","12\u70B9","\u3365","13\u70B9","\u3366","14\u70B9","\u3367","15\u70B9","\u3368","16\u70B9","\u3369","17\u70B9","\u336A","18\u70B9","\u336B","19\u70B9","\u336C","20\u70B9","\u336D","21\u70B9","\u336E","22\u70B9","\u336F","23\u70B9","\u3370","24\u70B9","\u33E0","1\u65E5","\u33E1","2\u65E5","\u33E2","3\u65E5","\u33E3","4\u65E5","\u33E4","5\u65E5","\u33E5","6\u65E5","\u33E6","7\u65E5","\u33E7","8\u65E5","\u33E8","9\u65E5","\u33E9","10\u65E5","\u33EA","11\u65E5","\u33EB","12\u65E5","\u33EC","13\u65E5","\u33ED","14\u65E5","\u33EE","15\u65E5","\u33EF","16\u65E5","\u33F0","17\u65E5","\u33F1","18\u65E5","\u33F2","19\u65E5","\u33F3","20\u65E5","\u33F4","21\u65E5","\u33F5","22\u65E5","\u33F6","23\u65E5","\u33F7","24\u65E5","\u33F8","25\u65E5","\u33F9","26\u65E5","\u33FA","27\u65E5","\u33FB","28\u65E5","\u33FC","29\u65E5","\u33FD","30\u65E5","\u33FE","31\u65E5","\uFB00","ff","\uFB01","fi","\uFB02","fl","\uFB03","ffi","\uFB04","ffl","\uFB05","\u017Ft","\uFB06","st","\uFB13","\u0574\u0576","\uFB14","\u0574\u0565","\uFB15","\u0574\u056B","\uFB16","\u057E\u0576","\uFB17","\u0574\u056D","\uFB4F","\u05D0\u05DC","\uFB50","\u0671","\uFB51","\u0671","\uFB52","\u067B","\uFB53","\u067B","\uFB54","\u067B","\uFB55","\u067B","\uFB56","\u067E","\uFB57","\u067E","\uFB58","\u067E","\uFB59","\u067E","\uFB5A","\u0680","\uFB5B","\u0680","\uFB5C","\u0680","\uFB5D","\u0680","\uFB5E","\u067A","\uFB5F","\u067A","\uFB60","\u067A","\uFB61","\u067A","\uFB62","\u067F","\uFB63","\u067F","\uFB64","\u067F","\uFB65","\u067F","\uFB66","\u0679","\uFB67","\u0679","\uFB68","\u0679","\uFB69","\u0679","\uFB6A","\u06A4","\uFB6B","\u06A4","\uFB6C","\u06A4","\uFB6D","\u06A4","\uFB6E","\u06A6","\uFB6F","\u06A6","\uFB70","\u06A6","\uFB71","\u06A6","\uFB72","\u0684","\uFB73","\u0684","\uFB74","\u0684","\uFB75","\u0684","\uFB76","\u0683","\uFB77","\u0683","\uFB78","\u0683","\uFB79","\u0683","\uFB7A","\u0686","\uFB7B","\u0686","\uFB7C","\u0686","\uFB7D","\u0686","\uFB7E","\u0687","\uFB7F","\u0687","\uFB80","\u0687","\uFB81","\u0687","\uFB82","\u068D","\uFB83","\u068D","\uFB84","\u068C","\uFB85","\u068C","\uFB86","\u068E","\uFB87","\u068E","\uFB88","\u0688","\uFB89","\u0688","\uFB8A","\u0698","\uFB8B","\u0698","\uFB8C","\u0691","\uFB8D","\u0691","\uFB8E","\u06A9","\uFB8F","\u06A9","\uFB90","\u06A9","\uFB91","\u06A9","\uFB92","\u06AF","\uFB93","\u06AF","\uFB94","\u06AF","\uFB95","\u06AF","\uFB96","\u06B3","\uFB97","\u06B3","\uFB98","\u06B3","\uFB99","\u06B3","\uFB9A","\u06B1","\uFB9B","\u06B1","\uFB9C","\u06B1","\uFB9D","\u06B1","\uFB9E","\u06BA","\uFB9F","\u06BA","\uFBA0","\u06BB","\uFBA1","\u06BB","\uFBA2","\u06BB","\uFBA3","\u06BB","\uFBA4","\u06C0","\uFBA5","\u06C0","\uFBA6","\u06C1","\uFBA7","\u06C1","\uFBA8","\u06C1","\uFBA9","\u06C1","\uFBAA","\u06BE","\uFBAB","\u06BE","\uFBAC","\u06BE","\uFBAD","\u06BE","\uFBAE","\u06D2","\uFBAF","\u06D2","\uFBB0","\u06D3","\uFBB1","\u06D3","\uFBD3","\u06AD","\uFBD4","\u06AD","\uFBD5","\u06AD","\uFBD6","\u06AD","\uFBD7","\u06C7","\uFBD8","\u06C7","\uFBD9","\u06C6","\uFBDA","\u06C6","\uFBDB","\u06C8","\uFBDC","\u06C8","\uFBDD","\u0677","\uFBDE","\u06CB","\uFBDF","\u06CB","\uFBE0","\u06C5","\uFBE1","\u06C5","\uFBE2","\u06C9","\uFBE3","\u06C9","\uFBE4","\u06D0","\uFBE5","\u06D0","\uFBE6","\u06D0","\uFBE7","\u06D0","\uFBE8","\u0649","\uFBE9","\u0649","\uFBEA","\u0626\u0627","\uFBEB","\u0626\u0627","\uFBEC","\u0626\u06D5","\uFBED","\u0626\u06D5","\uFBEE","\u0626\u0648","\uFBEF","\u0626\u0648","\uFBF0","\u0626\u06C7","\uFBF1","\u0626\u06C7","\uFBF2","\u0626\u06C6","\uFBF3","\u0626\u06C6","\uFBF4","\u0626\u06C8","\uFBF5","\u0626\u06C8","\uFBF6","\u0626\u06D0","\uFBF7","\u0626\u06D0","\uFBF8","\u0626\u06D0","\uFBF9","\u0626\u0649","\uFBFA","\u0626\u0649","\uFBFB","\u0626\u0649","\uFBFC","\u06CC","\uFBFD","\u06CC","\uFBFE","\u06CC","\uFBFF","\u06CC","\uFC00","\u0626\u062C","\uFC01","\u0626\u062D","\uFC02","\u0626\u0645","\uFC03","\u0626\u0649","\uFC04","\u0626\u064A","\uFC05","\u0628\u062C","\uFC06","\u0628\u062D","\uFC07","\u0628\u062E","\uFC08","\u0628\u0645","\uFC09","\u0628\u0649","\uFC0A","\u0628\u064A","\uFC0B","\u062A\u062C","\uFC0C","\u062A\u062D","\uFC0D","\u062A\u062E","\uFC0E","\u062A\u0645","\uFC0F","\u062A\u0649","\uFC10","\u062A\u064A","\uFC11","\u062B\u062C","\uFC12","\u062B\u0645","\uFC13","\u062B\u0649","\uFC14","\u062B\u064A","\uFC15","\u062C\u062D","\uFC16","\u062C\u0645","\uFC17","\u062D\u062C","\uFC18","\u062D\u0645","\uFC19","\u062E\u062C","\uFC1A","\u062E\u062D","\uFC1B","\u062E\u0645","\uFC1C","\u0633\u062C","\uFC1D","\u0633\u062D","\uFC1E","\u0633\u062E","\uFC1F","\u0633\u0645","\uFC20","\u0635\u062D","\uFC21","\u0635\u0645","\uFC22","\u0636\u062C","\uFC23","\u0636\u062D","\uFC24","\u0636\u062E","\uFC25","\u0636\u0645","\uFC26","\u0637\u062D","\uFC27","\u0637\u0645","\uFC28","\u0638\u0645","\uFC29","\u0639\u062C","\uFC2A","\u0639\u0645","\uFC2B","\u063A\u062C","\uFC2C","\u063A\u0645","\uFC2D","\u0641\u062C","\uFC2E","\u0641\u062D","\uFC2F","\u0641\u062E","\uFC30","\u0641\u0645","\uFC31","\u0641\u0649","\uFC32","\u0641\u064A","\uFC33","\u0642\u062D","\uFC34","\u0642\u0645","\uFC35","\u0642\u0649","\uFC36","\u0642\u064A","\uFC37","\u0643\u0627","\uFC38","\u0643\u062C","\uFC39","\u0643\u062D","\uFC3A","\u0643\u062E","\uFC3B","\u0643\u0644","\uFC3C","\u0643\u0645","\uFC3D","\u0643\u0649","\uFC3E","\u0643\u064A","\uFC3F","\u0644\u062C","\uFC40","\u0644\u062D","\uFC41","\u0644\u062E","\uFC42","\u0644\u0645","\uFC43","\u0644\u0649","\uFC44","\u0644\u064A","\uFC45","\u0645\u062C","\uFC46","\u0645\u062D","\uFC47","\u0645\u062E","\uFC48","\u0645\u0645","\uFC49","\u0645\u0649","\uFC4A","\u0645\u064A","\uFC4B","\u0646\u062C","\uFC4C","\u0646\u062D","\uFC4D","\u0646\u062E","\uFC4E","\u0646\u0645","\uFC4F","\u0646\u0649","\uFC50","\u0646\u064A","\uFC51","\u0647\u062C","\uFC52","\u0647\u0645","\uFC53","\u0647\u0649","\uFC54","\u0647\u064A","\uFC55","\u064A\u062C","\uFC56","\u064A\u062D","\uFC57","\u064A\u062E","\uFC58","\u064A\u0645","\uFC59","\u064A\u0649","\uFC5A","\u064A\u064A","\uFC5B","\u0630\u0670","\uFC5C","\u0631\u0670","\uFC5D","\u0649\u0670","\uFC5E"," \u064C\u0651","\uFC5F"," \u064D\u0651","\uFC60"," \u064E\u0651","\uFC61"," \u064F\u0651","\uFC62"," \u0650\u0651","\uFC63"," \u0651\u0670","\uFC64","\u0626\u0631","\uFC65","\u0626\u0632","\uFC66","\u0626\u0645","\uFC67","\u0626\u0646","\uFC68","\u0626\u0649","\uFC69","\u0626\u064A","\uFC6A","\u0628\u0631","\uFC6B","\u0628\u0632","\uFC6C","\u0628\u0645","\uFC6D","\u0628\u0646","\uFC6E","\u0628\u0649","\uFC6F","\u0628\u064A","\uFC70","\u062A\u0631","\uFC71","\u062A\u0632","\uFC72","\u062A\u0645","\uFC73","\u062A\u0646","\uFC74","\u062A\u0649","\uFC75","\u062A\u064A","\uFC76","\u062B\u0631","\uFC77","\u062B\u0632","\uFC78","\u062B\u0645","\uFC79","\u062B\u0646","\uFC7A","\u062B\u0649","\uFC7B","\u062B\u064A","\uFC7C","\u0641\u0649","\uFC7D","\u0641\u064A","\uFC7E","\u0642\u0649","\uFC7F","\u0642\u064A","\uFC80","\u0643\u0627","\uFC81","\u0643\u0644","\uFC82","\u0643\u0645","\uFC83","\u0643\u0649","\uFC84","\u0643\u064A","\uFC85","\u0644\u0645","\uFC86","\u0644\u0649","\uFC87","\u0644\u064A","\uFC88","\u0645\u0627","\uFC89","\u0645\u0645","\uFC8A","\u0646\u0631","\uFC8B","\u0646\u0632","\uFC8C","\u0646\u0645","\uFC8D","\u0646\u0646","\uFC8E","\u0646\u0649","\uFC8F","\u0646\u064A","\uFC90","\u0649\u0670","\uFC91","\u064A\u0631","\uFC92","\u064A\u0632","\uFC93","\u064A\u0645","\uFC94","\u064A\u0646","\uFC95","\u064A\u0649","\uFC96","\u064A\u064A","\uFC97","\u0626\u062C","\uFC98","\u0626\u062D","\uFC99","\u0626\u062E","\uFC9A","\u0626\u0645","\uFC9B","\u0626\u0647","\uFC9C","\u0628\u062C","\uFC9D","\u0628\u062D","\uFC9E","\u0628\u062E","\uFC9F","\u0628\u0645","\uFCA0","\u0628\u0647","\uFCA1","\u062A\u062C","\uFCA2","\u062A\u062D","\uFCA3","\u062A\u062E","\uFCA4","\u062A\u0645","\uFCA5","\u062A\u0647","\uFCA6","\u062B\u0645","\uFCA7","\u062C\u062D","\uFCA8","\u062C\u0645","\uFCA9","\u062D\u062C","\uFCAA","\u062D\u0645","\uFCAB","\u062E\u062C","\uFCAC","\u062E\u0645","\uFCAD","\u0633\u062C","\uFCAE","\u0633\u062D","\uFCAF","\u0633\u062E","\uFCB0","\u0633\u0645","\uFCB1","\u0635\u062D","\uFCB2","\u0635\u062E","\uFCB3","\u0635\u0645","\uFCB4","\u0636\u062C","\uFCB5","\u0636\u062D","\uFCB6","\u0636\u062E","\uFCB7","\u0636\u0645","\uFCB8","\u0637\u062D","\uFCB9","\u0638\u0645","\uFCBA","\u0639\u062C","\uFCBB","\u0639\u0645","\uFCBC","\u063A\u062C","\uFCBD","\u063A\u0645","\uFCBE","\u0641\u062C","\uFCBF","\u0641\u062D","\uFCC0","\u0641\u062E","\uFCC1","\u0641\u0645","\uFCC2","\u0642\u062D","\uFCC3","\u0642\u0645","\uFCC4","\u0643\u062C","\uFCC5","\u0643\u062D","\uFCC6","\u0643\u062E","\uFCC7","\u0643\u0644","\uFCC8","\u0643\u0645","\uFCC9","\u0644\u062C","\uFCCA","\u0644\u062D","\uFCCB","\u0644\u062E","\uFCCC","\u0644\u0645","\uFCCD","\u0644\u0647","\uFCCE","\u0645\u062C","\uFCCF","\u0645\u062D","\uFCD0","\u0645\u062E","\uFCD1","\u0645\u0645","\uFCD2","\u0646\u062C","\uFCD3","\u0646\u062D","\uFCD4","\u0646\u062E","\uFCD5","\u0646\u0645","\uFCD6","\u0646\u0647","\uFCD7","\u0647\u062C","\uFCD8","\u0647\u0645","\uFCD9","\u0647\u0670","\uFCDA","\u064A\u062C","\uFCDB","\u064A\u062D","\uFCDC","\u064A\u062E","\uFCDD","\u064A\u0645","\uFCDE","\u064A\u0647","\uFCDF","\u0626\u0645","\uFCE0","\u0626\u0647","\uFCE1","\u0628\u0645","\uFCE2","\u0628\u0647","\uFCE3","\u062A\u0645","\uFCE4","\u062A\u0647","\uFCE5","\u062B\u0645","\uFCE6","\u062B\u0647","\uFCE7","\u0633\u0645","\uFCE8","\u0633\u0647","\uFCE9","\u0634\u0645","\uFCEA","\u0634\u0647","\uFCEB","\u0643\u0644","\uFCEC","\u0643\u0645","\uFCED","\u0644\u0645","\uFCEE","\u0646\u0645","\uFCEF","\u0646\u0647","\uFCF0","\u064A\u0645","\uFCF1","\u064A\u0647","\uFCF2","\u0640\u064E\u0651","\uFCF3","\u0640\u064F\u0651","\uFCF4","\u0640\u0650\u0651","\uFCF5","\u0637\u0649","\uFCF6","\u0637\u064A","\uFCF7","\u0639\u0649","\uFCF8","\u0639\u064A","\uFCF9","\u063A\u0649","\uFCFA","\u063A\u064A","\uFCFB","\u0633\u0649","\uFCFC","\u0633\u064A","\uFCFD","\u0634\u0649","\uFCFE","\u0634\u064A","\uFCFF","\u062D\u0649","\uFD00","\u062D\u064A","\uFD01","\u062C\u0649","\uFD02","\u062C\u064A","\uFD03","\u062E\u0649","\uFD04","\u062E\u064A","\uFD05","\u0635\u0649","\uFD06","\u0635\u064A","\uFD07","\u0636\u0649","\uFD08","\u0636\u064A","\uFD09","\u0634\u062C","\uFD0A","\u0634\u062D","\uFD0B","\u0634\u062E","\uFD0C","\u0634\u0645","\uFD0D","\u0634\u0631","\uFD0E","\u0633\u0631","\uFD0F","\u0635\u0631","\uFD10","\u0636\u0631","\uFD11","\u0637\u0649","\uFD12","\u0637\u064A","\uFD13","\u0639\u0649","\uFD14","\u0639\u064A","\uFD15","\u063A\u0649","\uFD16","\u063A\u064A","\uFD17","\u0633\u0649","\uFD18","\u0633\u064A","\uFD19","\u0634\u0649","\uFD1A","\u0634\u064A","\uFD1B","\u062D\u0649","\uFD1C","\u062D\u064A","\uFD1D","\u062C\u0649","\uFD1E","\u062C\u064A","\uFD1F","\u062E\u0649","\uFD20","\u062E\u064A","\uFD21","\u0635\u0649","\uFD22","\u0635\u064A","\uFD23","\u0636\u0649","\uFD24","\u0636\u064A","\uFD25","\u0634\u062C","\uFD26","\u0634\u062D","\uFD27","\u0634\u062E","\uFD28","\u0634\u0645","\uFD29","\u0634\u0631","\uFD2A","\u0633\u0631","\uFD2B","\u0635\u0631","\uFD2C","\u0636\u0631","\uFD2D","\u0634\u062C","\uFD2E","\u0634\u062D","\uFD2F","\u0634\u062E","\uFD30","\u0634\u0645","\uFD31","\u0633\u0647","\uFD32","\u0634\u0647","\uFD33","\u0637\u0645","\uFD34","\u0633\u062C","\uFD35","\u0633\u062D","\uFD36","\u0633\u062E","\uFD37","\u0634\u062C","\uFD38","\u0634\u062D","\uFD39","\u0634\u062E","\uFD3A","\u0637\u0645","\uFD3B","\u0638\u0645","\uFD3C","\u0627\u064B","\uFD3D","\u0627\u064B","\uFD50","\u062A\u062C\u0645","\uFD51","\u062A\u062D\u062C","\uFD52","\u062A\u062D\u062C","\uFD53","\u062A\u062D\u0645","\uFD54","\u062A\u062E\u0645","\uFD55","\u062A\u0645\u062C","\uFD56","\u062A\u0645\u062D","\uFD57","\u062A\u0645\u062E","\uFD58","\u062C\u0645\u062D","\uFD59","\u062C\u0645\u062D","\uFD5A","\u062D\u0645\u064A","\uFD5B","\u062D\u0645\u0649","\uFD5C","\u0633\u062D\u062C","\uFD5D","\u0633\u062C\u062D","\uFD5E","\u0633\u062C\u0649","\uFD5F","\u0633\u0645\u062D","\uFD60","\u0633\u0645\u062D","\uFD61","\u0633\u0645\u062C","\uFD62","\u0633\u0645\u0645","\uFD63","\u0633\u0645\u0645","\uFD64","\u0635\u062D\u062D","\uFD65","\u0635\u062D\u062D","\uFD66","\u0635\u0645\u0645","\uFD67","\u0634\u062D\u0645","\uFD68","\u0634\u062D\u0645","\uFD69","\u0634\u062C\u064A","\uFD6A","\u0634\u0645\u062E","\uFD6B","\u0634\u0645\u062E","\uFD6C","\u0634\u0645\u0645","\uFD6D","\u0634\u0645\u0645","\uFD6E","\u0636\u062D\u0649","\uFD6F","\u0636\u062E\u0645","\uFD70","\u0636\u062E\u0645","\uFD71","\u0637\u0645\u062D","\uFD72","\u0637\u0645\u062D","\uFD73","\u0637\u0645\u0645","\uFD74","\u0637\u0645\u064A","\uFD75","\u0639\u062C\u0645","\uFD76","\u0639\u0645\u0645","\uFD77","\u0639\u0645\u0645","\uFD78","\u0639\u0645\u0649","\uFD79","\u063A\u0645\u0645","\uFD7A","\u063A\u0645\u064A","\uFD7B","\u063A\u0645\u0649","\uFD7C","\u0641\u062E\u0645","\uFD7D","\u0641\u062E\u0645","\uFD7E","\u0642\u0645\u062D","\uFD7F","\u0642\u0645\u0645","\uFD80","\u0644\u062D\u0645","\uFD81","\u0644\u062D\u064A","\uFD82","\u0644\u062D\u0649","\uFD83","\u0644\u062C\u062C","\uFD84","\u0644\u062C\u062C","\uFD85","\u0644\u062E\u0645","\uFD86","\u0644\u062E\u0645","\uFD87","\u0644\u0645\u062D","\uFD88","\u0644\u0645\u062D","\uFD89","\u0645\u062D\u062C","\uFD8A","\u0645\u062D\u0645","\uFD8B","\u0645\u062D\u064A","\uFD8C","\u0645\u062C\u062D","\uFD8D","\u0645\u062C\u0645","\uFD8E","\u0645\u062E\u062C","\uFD8F","\u0645\u062E\u0645","\uFD92","\u0645\u062C\u062E","\uFD93","\u0647\u0645\u062C","\uFD94","\u0647\u0645\u0645","\uFD95","\u0646\u062D\u0645","\uFD96","\u0646\u062D\u0649","\uFD97","\u0646\u062C\u0645","\uFD98","\u0646\u062C\u0645","\uFD99","\u0646\u062C\u0649","\uFD9A","\u0646\u0645\u064A","\uFD9B","\u0646\u0645\u0649","\uFD9C","\u064A\u0645\u0645","\uFD9D","\u064A\u0645\u0645","\uFD9E","\u0628\u062E\u064A","\uFD9F","\u062A\u062C\u064A","\uFDA0","\u062A\u062C\u0649","\uFDA1","\u062A\u062E\u064A","\uFDA2","\u062A\u062E\u0649","\uFDA3","\u062A\u0645\u064A","\uFDA4","\u062A\u0645\u0649","\uFDA5","\u062C\u0645\u064A","\uFDA6","\u062C\u062D\u0649","\uFDA7","\u062C\u0645\u0649","\uFDA8","\u0633\u062E\u0649","\uFDA9","\u0635\u062D\u064A","\uFDAA","\u0634\u062D\u064A","\uFDAB","\u0636\u062D\u064A","\uFDAC","\u0644\u062C\u064A","\uFDAD","\u0644\u0645\u064A","\uFDAE","\u064A\u062D\u064A","\uFDAF","\u064A\u062C\u064A","\uFDB0","\u064A\u0645\u064A","\uFDB1","\u0645\u0645\u064A","\uFDB2","\u0642\u0645\u064A","\uFDB3","\u0646\u062D\u064A","\uFDB4","\u0642\u0645\u062D","\uFDB5","\u0644\u062D\u0645","\uFDB6","\u0639\u0645\u064A","\uFDB7","\u0643\u0645\u064A","\uFDB8","\u0646\u062C\u062D","\uFDB9","\u0645\u062E\u064A","\uFDBA","\u0644\u062C\u0645","\uFDBB","\u0643\u0645\u0645","\uFDBC","\u0644\u062C\u0645","\uFDBD","\u0646\u062C\u062D","\uFDBE","\u062C\u062D\u064A","\uFDBF","\u062D\u062C\u064A","\uFDC0","\u0645\u062C\u064A","\uFDC1","\u0641\u0645\u064A","\uFDC2","\u0628\u062D\u064A","\uFDC3","\u0643\u0645\u0645","\uFDC4","\u0639\u062C\u0645","\uFDC5","\u0635\u0645\u0645","\uFDC6","\u0633\u062E\u064A","\uFDC7","\u0646\u062C\u064A","\uFE49","\u203E","\uFE4A","\u203E","\uFE4B","\u203E","\uFE4C","\u203E","\uFE4D","_","\uFE4E","_","\uFE4F","_","\uFE80","\u0621","\uFE81","\u0622","\uFE82","\u0622","\uFE83","\u0623","\uFE84","\u0623","\uFE85","\u0624","\uFE86","\u0624","\uFE87","\u0625","\uFE88","\u0625","\uFE89","\u0626","\uFE8A","\u0626","\uFE8B","\u0626","\uFE8C","\u0626","\uFE8D","\u0627","\uFE8E","\u0627","\uFE8F","\u0628","\uFE90","\u0628","\uFE91","\u0628","\uFE92","\u0628","\uFE93","\u0629","\uFE94","\u0629","\uFE95","\u062A","\uFE96","\u062A","\uFE97","\u062A","\uFE98","\u062A","\uFE99","\u062B","\uFE9A","\u062B","\uFE9B","\u062B","\uFE9C","\u062B","\uFE9D","\u062C","\uFE9E","\u062C","\uFE9F","\u062C","\uFEA0","\u062C","\uFEA1","\u062D","\uFEA2","\u062D","\uFEA3","\u062D","\uFEA4","\u062D","\uFEA5","\u062E","\uFEA6","\u062E","\uFEA7","\u062E","\uFEA8","\u062E","\uFEA9","\u062F","\uFEAA","\u062F","\uFEAB","\u0630","\uFEAC","\u0630","\uFEAD","\u0631","\uFEAE","\u0631","\uFEAF","\u0632","\uFEB0","\u0632","\uFEB1","\u0633","\uFEB2","\u0633","\uFEB3","\u0633","\uFEB4","\u0633","\uFEB5","\u0634","\uFEB6","\u0634","\uFEB7","\u0634","\uFEB8","\u0634","\uFEB9","\u0635","\uFEBA","\u0635","\uFEBB","\u0635","\uFEBC","\u0635","\uFEBD","\u0636","\uFEBE","\u0636","\uFEBF","\u0636","\uFEC0","\u0636","\uFEC1","\u0637","\uFEC2","\u0637","\uFEC3","\u0637","\uFEC4","\u0637","\uFEC5","\u0638","\uFEC6","\u0638","\uFEC7","\u0638","\uFEC8","\u0638","\uFEC9","\u0639","\uFECA","\u0639","\uFECB","\u0639","\uFECC","\u0639","\uFECD","\u063A","\uFECE","\u063A","\uFECF","\u063A","\uFED0","\u063A","\uFED1","\u0641","\uFED2","\u0641","\uFED3","\u0641","\uFED4","\u0641","\uFED5","\u0642","\uFED6","\u0642","\uFED7","\u0642","\uFED8","\u0642","\uFED9","\u0643","\uFEDA","\u0643","\uFEDB","\u0643","\uFEDC","\u0643","\uFEDD","\u0644","\uFEDE","\u0644","\uFEDF","\u0644","\uFEE0","\u0644","\uFEE1","\u0645","\uFEE2","\u0645","\uFEE3","\u0645","\uFEE4","\u0645","\uFEE5","\u0646","\uFEE6","\u0646","\uFEE7","\u0646","\uFEE8","\u0646","\uFEE9","\u0647","\uFEEA","\u0647","\uFEEB","\u0647","\uFEEC","\u0647","\uFEED","\u0648","\uFEEE","\u0648","\uFEEF","\u0649","\uFEF0","\u0649","\uFEF1","\u064A","\uFEF2","\u064A","\uFEF3","\u064A","\uFEF4","\u064A","\uFEF5","\u0644\u0622","\uFEF6","\u0644\u0622","\uFEF7","\u0644\u0623","\uFEF8","\u0644\u0623","\uFEF9","\u0644\u0625","\uFEFA","\u0644\u0625","\uFEFB","\u0644\u0627","\uFEFC","\u0644\u0627"]});function reverseIfRtl(chars){const charsLength=chars.length;if(charsLength<=1||!isRTLRangeFor(chars.charCodeAt(0)))return chars;const buf=[];for(let ii=charsLength-1;ii>=0;ii--)buf.push(chars[ii]);return buf.join("")}__name2(reverseIfRtl,"reverseIfRtl"),__name(reverseIfRtl,"reverseIfRtl");const SpecialCharRegExp=new RegExp("^(\\s)|(\\p{Mn})|(\\p{Cf})$","u"),CategoryCache=new Map;function getCharUnicodeCategory(char){const cachedCategory=CategoryCache.get(char);if(cachedCategory)return cachedCategory;const groups=char.match(SpecialCharRegExp),category={isWhitespace:!!(groups&&groups[1]),isZeroWidthDiacritic:!!(groups&&groups[2]),isInvisibleFormatMark:!!(groups&&groups[3])};return CategoryCache.set(char,category),category}__name2(getCharUnicodeCategory,"getCharUnicodeCategory"),__name(getCharUnicodeCategory,"getCharUnicodeCategory");function clearUnicodeCaches(){CategoryCache.clear()}__name2(clearUnicodeCaches,"clearUnicodeCaches"),__name(clearUnicodeCaches,"clearUnicodeCaches")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.getSerifFonts=exports3.getNonStdFontMap=exports3.getGlyphMapForStandardFonts=exports3.getFontNameToFileMap=void 0,exports3.getStandardFontName=getStandardFontName,exports3.getSymbolsFonts=exports3.getSupplementalGlyphMapForCalibri=exports3.getSupplementalGlyphMapForArialBlack=exports3.getStdFontMap=void 0;var _core_utils=__w_pdfjs_require__3(6),_fonts_utils=__w_pdfjs_require__3(38);const getStdFontMap=(0,_core_utils.getLookupTableFactory)(function(t){t["Times-Roman"]="Times-Roman",t.Helvetica="Helvetica",t.Courier="Courier",t.Symbol="Symbol",t["Times-Bold"]="Times-Bold",t["Helvetica-Bold"]="Helvetica-Bold",t["Courier-Bold"]="Courier-Bold",t.ZapfDingbats="ZapfDingbats",t["Times-Italic"]="Times-Italic",t["Helvetica-Oblique"]="Helvetica-Oblique",t["Courier-Oblique"]="Courier-Oblique",t["Times-BoldItalic"]="Times-BoldItalic",t["Helvetica-BoldOblique"]="Helvetica-BoldOblique",t["Courier-BoldOblique"]="Courier-BoldOblique",t.ArialNarrow="Helvetica",t["ArialNarrow-Bold"]="Helvetica-Bold",t["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique",t["ArialNarrow-Italic"]="Helvetica-Oblique",t.ArialBlack="Helvetica",t["ArialBlack-Bold"]="Helvetica-Bold",t["ArialBlack-BoldItalic"]="Helvetica-BoldOblique",t["ArialBlack-Italic"]="Helvetica-Oblique",t["Arial-Black"]="Helvetica",t["Arial-Black-Bold"]="Helvetica-Bold",t["Arial-Black-BoldItalic"]="Helvetica-BoldOblique",t["Arial-Black-Italic"]="Helvetica-Oblique",t.Arial="Helvetica",t["Arial-Bold"]="Helvetica-Bold",t["Arial-BoldItalic"]="Helvetica-BoldOblique",t["Arial-Italic"]="Helvetica-Oblique",t.ArialMT="Helvetica",t["Arial-BoldItalicMT"]="Helvetica-BoldOblique",t["Arial-BoldMT"]="Helvetica-Bold",t["Arial-ItalicMT"]="Helvetica-Oblique",t.ArialUnicodeMS="Helvetica",t["ArialUnicodeMS-Bold"]="Helvetica-Bold",t["ArialUnicodeMS-BoldItalic"]="Helvetica-BoldOblique",t["ArialUnicodeMS-Italic"]="Helvetica-Oblique",t["Courier-BoldItalic"]="Courier-BoldOblique",t["Courier-Italic"]="Courier-Oblique",t.CourierNew="Courier",t["CourierNew-Bold"]="Courier-Bold",t["CourierNew-BoldItalic"]="Courier-BoldOblique",t["CourierNew-Italic"]="Courier-Oblique",t["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique",t["CourierNewPS-BoldMT"]="Courier-Bold",t["CourierNewPS-ItalicMT"]="Courier-Oblique",t.CourierNewPSMT="Courier",t["Helvetica-BoldItalic"]="Helvetica-BoldOblique",t["Helvetica-Italic"]="Helvetica-Oblique",t["Symbol-Bold"]="Symbol",t["Symbol-BoldItalic"]="Symbol",t["Symbol-Italic"]="Symbol",t.TimesNewRoman="Times-Roman",t["TimesNewRoman-Bold"]="Times-Bold",t["TimesNewRoman-BoldItalic"]="Times-BoldItalic",t["TimesNewRoman-Italic"]="Times-Italic",t.TimesNewRomanPS="Times-Roman",t["TimesNewRomanPS-Bold"]="Times-Bold",t["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic",t["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic",t["TimesNewRomanPS-BoldMT"]="Times-Bold",t["TimesNewRomanPS-Italic"]="Times-Italic",t["TimesNewRomanPS-ItalicMT"]="Times-Italic",t.TimesNewRomanPSMT="Times-Roman",t["TimesNewRomanPSMT-Bold"]="Times-Bold",t["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic",t["TimesNewRomanPSMT-Italic"]="Times-Italic"});exports3.getStdFontMap=getStdFontMap;const getFontNameToFileMap=(0,_core_utils.getLookupTableFactory)(function(t){t.Courier="FoxitFixed.pfb",t["Courier-Bold"]="FoxitFixedBold.pfb",t["Courier-BoldOblique"]="FoxitFixedBoldItalic.pfb",t["Courier-Oblique"]="FoxitFixedItalic.pfb",t.Helvetica="FoxitSans.pfb",t["Helvetica-Bold"]="FoxitSansBold.pfb",t["Helvetica-BoldOblique"]="FoxitSansBoldItalic.pfb",t["Helvetica-Oblique"]="FoxitSansItalic.pfb",t["Times-Roman"]="FoxitSerif.pfb",t["Times-Bold"]="FoxitSerifBold.pfb",t["Times-BoldItalic"]="FoxitSerifBoldItalic.pfb",t["Times-Italic"]="FoxitSerifItalic.pfb",t.Symbol="FoxitSymbol.pfb",t.ZapfDingbats="FoxitDingbats.pfb",t["LiberationSans-Regular"]="LiberationSans-Regular.ttf",t["LiberationSans-Bold"]="LiberationSans-Bold.ttf",t["LiberationSans-Italic"]="LiberationSans-Italic.ttf",t["LiberationSans-BoldItalic"]="LiberationSans-BoldItalic.ttf"});exports3.getFontNameToFileMap=getFontNameToFileMap;const getNonStdFontMap=(0,_core_utils.getLookupTableFactory)(function(t){t.Calibri="Helvetica",t["Calibri-Bold"]="Helvetica-Bold",t["Calibri-BoldItalic"]="Helvetica-BoldOblique",t["Calibri-Italic"]="Helvetica-Oblique",t.CenturyGothic="Helvetica",t["CenturyGothic-Bold"]="Helvetica-Bold",t["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique",t["CenturyGothic-Italic"]="Helvetica-Oblique",t.ComicSansMS="Comic Sans MS",t["ComicSansMS-Bold"]="Comic Sans MS-Bold",t["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic",t["ComicSansMS-Italic"]="Comic Sans MS-Italic",t["ItcSymbol-Bold"]="Helvetica-Bold",t["ItcSymbol-BoldItalic"]="Helvetica-BoldOblique",t["ItcSymbol-Book"]="Helvetica",t["ItcSymbol-BookItalic"]="Helvetica-Oblique",t["ItcSymbol-Medium"]="Helvetica",t["ItcSymbol-MediumItalic"]="Helvetica-Oblique",t.LucidaConsole="Courier",t["LucidaConsole-Bold"]="Courier-Bold",t["LucidaConsole-BoldItalic"]="Courier-BoldOblique",t["LucidaConsole-Italic"]="Courier-Oblique",t["LucidaSans-Demi"]="Helvetica-Bold",t["MS-Gothic"]="MS Gothic",t["MS-Gothic-Bold"]="MS Gothic-Bold",t["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic",t["MS-Gothic-Italic"]="MS Gothic-Italic",t["MS-Mincho"]="MS Mincho",t["MS-Mincho-Bold"]="MS Mincho-Bold",t["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic",t["MS-Mincho-Italic"]="MS Mincho-Italic",t["MS-PGothic"]="MS PGothic",t["MS-PGothic-Bold"]="MS PGothic-Bold",t["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic",t["MS-PGothic-Italic"]="MS PGothic-Italic",t["MS-PMincho"]="MS PMincho",t["MS-PMincho-Bold"]="MS PMincho-Bold",t["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic",t["MS-PMincho-Italic"]="MS PMincho-Italic",t.NuptialScript="Times-Italic",t.SegoeUISymbol="Helvetica",t.Wingdings="ZapfDingbats",t["Wingdings-Regular"]="ZapfDingbats"});exports3.getNonStdFontMap=getNonStdFontMap;const getSerifFonts=(0,_core_utils.getLookupTableFactory)(function(t){t["Adobe Jenson"]=!0,t["Adobe Text"]=!0,t.Albertus=!0,t.Aldus=!0,t.Alexandria=!0,t.Algerian=!0,t["American Typewriter"]=!0,t.Antiqua=!0,t.Apex=!0,t.Arno=!0,t.Aster=!0,t.Aurora=!0,t.Baskerville=!0,t.Bell=!0,t.Bembo=!0,t["Bembo Schoolbook"]=!0,t.Benguiat=!0,t["Berkeley Old Style"]=!0,t["Bernhard Modern"]=!0,t["Berthold City"]=!0,t.Bodoni=!0,t["Bauer Bodoni"]=!0,t["Book Antiqua"]=!0,t.Bookman=!0,t["Bordeaux Roman"]=!0,t["Californian FB"]=!0,t.Calisto=!0,t.Calvert=!0,t.Capitals=!0,t.Cambria=!0,t.Cartier=!0,t.Caslon=!0,t.Catull=!0,t.Centaur=!0,t["Century Old Style"]=!0,t["Century Schoolbook"]=!0,t.Chaparral=!0,t["Charis SIL"]=!0,t.Cheltenham=!0,t["Cholla Slab"]=!0,t.Clarendon=!0,t.Clearface=!0,t.Cochin=!0,t.Colonna=!0,t["Computer Modern"]=!0,t["Concrete Roman"]=!0,t.Constantia=!0,t["Cooper Black"]=!0,t.Corona=!0,t.Ecotype=!0,t.Egyptienne=!0,t.Elephant=!0,t.Excelsior=!0,t.Fairfield=!0,t["FF Scala"]=!0,t.Folkard=!0,t.Footlight=!0,t.FreeSerif=!0,t["Friz Quadrata"]=!0,t.Garamond=!0,t.Gentium=!0,t.Georgia=!0,t.Gloucester=!0,t["Goudy Old Style"]=!0,t["Goudy Schoolbook"]=!0,t["Goudy Pro Font"]=!0,t.Granjon=!0,t["Guardian Egyptian"]=!0,t.Heather=!0,t.Hercules=!0,t["High Tower Text"]=!0,t.Hiroshige=!0,t["Hoefler Text"]=!0,t["Humana Serif"]=!0,t.Imprint=!0,t["Ionic No. 5"]=!0,t.Janson=!0,t.Joanna=!0,t.Korinna=!0,t.Lexicon=!0,t.LiberationSerif=!0,t["Liberation Serif"]=!0,t["Linux Libertine"]=!0,t.Literaturnaya=!0,t.Lucida=!0,t["Lucida Bright"]=!0,t.Melior=!0,t.Memphis=!0,t.Miller=!0,t.Minion=!0,t.Modern=!0,t["Mona Lisa"]=!0,t["Mrs Eaves"]=!0,t["MS Serif"]=!0,t["Museo Slab"]=!0,t["New York"]=!0,t["Nimbus Roman"]=!0,t["NPS Rawlinson Roadway"]=!0,t.NuptialScript=!0,t.Palatino=!0,t.Perpetua=!0,t.Plantin=!0,t["Plantin Schoolbook"]=!0,t.Playbill=!0,t["Poor Richard"]=!0,t["Rawlinson Roadway"]=!0,t.Renault=!0,t.Requiem=!0,t.Rockwell=!0,t.Roman=!0,t["Rotis Serif"]=!0,t.Sabon=!0,t.Scala=!0,t.Seagull=!0,t.Sistina=!0,t.Souvenir=!0,t.STIX=!0,t["Stone Informal"]=!0,t["Stone Serif"]=!0,t.Sylfaen=!0,t.Times=!0,t.Trajan=!0,t.Trinit\u00E9=!0,t["Trump Mediaeval"]=!0,t.Utopia=!0,t["Vale Type"]=!0,t["Bitstream Vera"]=!0,t["Vera Serif"]=!0,t.Versailles=!0,t.Wanted=!0,t.Weiss=!0,t["Wide Latin"]=!0,t.Windsor=!0,t.XITS=!0});exports3.getSerifFonts=getSerifFonts;const getSymbolsFonts=(0,_core_utils.getLookupTableFactory)(function(t){t.Dingbats=!0,t.Symbol=!0,t.ZapfDingbats=!0});exports3.getSymbolsFonts=getSymbolsFonts;const getGlyphMapForStandardFonts=(0,_core_utils.getLookupTableFactory)(function(t){t[2]=10,t[3]=32,t[4]=33,t[5]=34,t[6]=35,t[7]=36,t[8]=37,t[9]=38,t[10]=39,t[11]=40,t[12]=41,t[13]=42,t[14]=43,t[15]=44,t[16]=45,t[17]=46,t[18]=47,t[19]=48,t[20]=49,t[21]=50,t[22]=51,t[23]=52,t[24]=53,t[25]=54,t[26]=55,t[27]=56,t[28]=57,t[29]=58,t[30]=894,t[31]=60,t[32]=61,t[33]=62,t[34]=63,t[35]=64,t[36]=65,t[37]=66,t[38]=67,t[39]=68,t[40]=69,t[41]=70,t[42]=71,t[43]=72,t[44]=73,t[45]=74,t[46]=75,t[47]=76,t[48]=77,t[49]=78,t[50]=79,t[51]=80,t[52]=81,t[53]=82,t[54]=83,t[55]=84,t[56]=85,t[57]=86,t[58]=87,t[59]=88,t[60]=89,t[61]=90,t[62]=91,t[63]=92,t[64]=93,t[65]=94,t[66]=95,t[67]=96,t[68]=97,t[69]=98,t[70]=99,t[71]=100,t[72]=101,t[73]=102,t[74]=103,t[75]=104,t[76]=105,t[77]=106,t[78]=107,t[79]=108,t[80]=109,t[81]=110,t[82]=111,t[83]=112,t[84]=113,t[85]=114,t[86]=115,t[87]=116,t[88]=117,t[89]=118,t[90]=119,t[91]=120,t[92]=121,t[93]=122,t[94]=123,t[95]=124,t[96]=125,t[97]=126,t[98]=196,t[99]=197,t[100]=199,t[101]=201,t[102]=209,t[103]=214,t[104]=220,t[105]=225,t[106]=224,t[107]=226,t[108]=228,t[109]=227,t[110]=229,t[111]=231,t[112]=233,t[113]=232,t[114]=234,t[115]=235,t[116]=237,t[117]=236,t[118]=238,t[119]=239,t[120]=241,t[121]=243,t[122]=242,t[123]=244,t[124]=246,t[125]=245,t[126]=250,t[127]=249,t[128]=251,t[129]=252,t[130]=8224,t[131]=176,t[132]=162,t[133]=163,t[134]=167,t[135]=8226,t[136]=182,t[137]=223,t[138]=174,t[139]=169,t[140]=8482,t[141]=180,t[142]=168,t[143]=8800,t[144]=198,t[145]=216,t[146]=8734,t[147]=177,t[148]=8804,t[149]=8805,t[150]=165,t[151]=181,t[152]=8706,t[153]=8721,t[154]=8719,t[156]=8747,t[157]=170,t[158]=186,t[159]=8486,t[160]=230,t[161]=248,t[162]=191,t[163]=161,t[164]=172,t[165]=8730,t[166]=402,t[167]=8776,t[168]=8710,t[169]=171,t[170]=187,t[171]=8230,t[200]=193,t[203]=205,t[210]=218,t[223]=711,t[224]=321,t[225]=322,t[226]=352,t[227]=353,t[228]=381,t[229]=382,t[233]=221,t[234]=253,t[252]=263,t[253]=268,t[254]=269,t[258]=258,t[260]=260,t[261]=261,t[265]=280,t[266]=281,t[267]=282,t[268]=283,t[269]=313,t[275]=323,t[276]=324,t[278]=328,t[283]=344,t[284]=345,t[285]=346,t[286]=347,t[292]=367,t[295]=377,t[296]=378,t[298]=380,t[305]=963,t[306]=964,t[307]=966,t[308]=8215,t[309]=8252,t[310]=8319,t[311]=8359,t[312]=8592,t[313]=8593,t[337]=9552,t[493]=1039,t[494]=1040,t[672]=1488,t[673]=1489,t[674]=1490,t[675]=1491,t[676]=1492,t[677]=1493,t[678]=1494,t[679]=1495,t[680]=1496,t[681]=1497,t[682]=1498,t[683]=1499,t[684]=1500,t[685]=1501,t[686]=1502,t[687]=1503,t[688]=1504,t[689]=1505,t[690]=1506,t[691]=1507,t[692]=1508,t[693]=1509,t[694]=1510,t[695]=1511,t[696]=1512,t[697]=1513,t[698]=1514,t[705]=1524,t[706]=8362,t[710]=64288,t[711]=64298,t[759]=1617,t[761]=1776,t[763]=1778,t[775]=1652,t[777]=1764,t[778]=1780,t[779]=1781,t[780]=1782,t[782]=771,t[783]=64726,t[786]=8363,t[788]=8532,t[790]=768,t[791]=769,t[792]=768,t[795]=803,t[797]=64336,t[798]=64337,t[799]=64342,t[800]=64343,t[801]=64344,t[802]=64345,t[803]=64362,t[804]=64363,t[805]=64364,t[2424]=7821,t[2425]=7822,t[2426]=7823,t[2427]=7824,t[2428]=7825,t[2429]=7826,t[2430]=7827,t[2433]=7682,t[2678]=8045,t[2679]=8046,t[2830]=1552,t[2838]=686,t[2840]=751,t[2842]=753,t[2843]=754,t[2844]=755,t[2846]=757,t[2856]=767,t[2857]=848,t[2858]=849,t[2862]=853,t[2863]=854,t[2864]=855,t[2865]=861,t[2866]=862,t[2906]=7460,t[2908]=7462,t[2909]=7463,t[2910]=7464,t[2912]=7466,t[2913]=7467,t[2914]=7468,t[2916]=7470,t[2917]=7471,t[2918]=7472,t[2920]=7474,t[2921]=7475,t[2922]=7476,t[2924]=7478,t[2925]=7479,t[2926]=7480,t[2928]=7482,t[2929]=7483,t[2930]=7484,t[2932]=7486,t[2933]=7487,t[2934]=7488,t[2936]=7490,t[2937]=7491,t[2938]=7492,t[2940]=7494,t[2941]=7495,t[2942]=7496,t[2944]=7498,t[2946]=7500,t[2948]=7502,t[2950]=7504,t[2951]=7505,t[2952]=7506,t[2954]=7508,t[2955]=7509,t[2956]=7510,t[2958]=7512,t[2959]=7513,t[2960]=7514,t[2962]=7516,t[2963]=7517,t[2964]=7518,t[2966]=7520,t[2967]=7521,t[2968]=7522,t[2970]=7524,t[2971]=7525,t[2972]=7526,t[2974]=7528,t[2975]=7529,t[2976]=7530,t[2978]=1537,t[2979]=1538,t[2980]=1539,t[2982]=1549,t[2983]=1551,t[2984]=1552,t[2986]=1554,t[2987]=1555,t[2988]=1556,t[2990]=1623,t[2991]=1624,t[2995]=1775,t[2999]=1791,t[3002]=64290,t[3003]=64291,t[3004]=64292,t[3006]=64294,t[3007]=64295,t[3008]=64296,t[3011]=1900,t[3014]=8223,t[3015]=8244,t[3017]=7532,t[3018]=7533,t[3019]=7534,t[3075]=7590,t[3076]=7591,t[3079]=7594,t[3080]=7595,t[3083]=7598,t[3084]=7599,t[3087]=7602,t[3088]=7603,t[3091]=7606,t[3092]=7607,t[3095]=7610,t[3096]=7611,t[3099]=7614,t[3100]=7615,t[3103]=7618,t[3104]=7619,t[3107]=8337,t[3108]=8338,t[3116]=1884,t[3119]=1885,t[3120]=1885,t[3123]=1886,t[3124]=1886,t[3127]=1887,t[3128]=1887,t[3131]=1888,t[3132]=1888,t[3135]=1889,t[3136]=1889,t[3139]=1890,t[3140]=1890,t[3143]=1891,t[3144]=1891,t[3147]=1892,t[3148]=1892,t[3153]=580,t[3154]=581,t[3157]=584,t[3158]=585,t[3161]=588,t[3162]=589,t[3165]=891,t[3166]=892,t[3169]=1274,t[3170]=1275,t[3173]=1278,t[3174]=1279,t[3181]=7622,t[3182]=7623,t[3282]=11799,t[3316]=578,t[3379]=42785,t[3393]=1159,t[3416]=8377});exports3.getGlyphMapForStandardFonts=getGlyphMapForStandardFonts;const getSupplementalGlyphMapForArialBlack=(0,_core_utils.getLookupTableFactory)(function(t){t[227]=322,t[264]=261,t[291]=346});exports3.getSupplementalGlyphMapForArialBlack=getSupplementalGlyphMapForArialBlack;const getSupplementalGlyphMapForCalibri=(0,_core_utils.getLookupTableFactory)(function(t){t[1]=32,t[4]=65,t[6]=193,t[17]=66,t[18]=67,t[21]=268,t[24]=68,t[28]=69,t[30]=201,t[32]=282,t[38]=70,t[39]=71,t[44]=72,t[47]=73,t[49]=205,t[58]=74,t[60]=75,t[62]=76,t[68]=77,t[69]=78,t[75]=79,t[87]=80,t[89]=81,t[90]=82,t[92]=344,t[94]=83,t[97]=352,t[100]=84,t[104]=85,t[115]=86,t[116]=87,t[121]=88,t[122]=89,t[124]=221,t[127]=90,t[129]=381,t[258]=97,t[260]=225,t[268]=261,t[271]=98,t[272]=99,t[273]=263,t[275]=269,t[282]=100,t[286]=101,t[288]=233,t[290]=283,t[295]=281,t[296]=102,t[336]=103,t[346]=104,t[349]=105,t[351]=237,t[361]=106,t[364]=107,t[367]=108,t[371]=322,t[373]=109,t[374]=110,t[381]=111,t[383]=243,t[393]=112,t[395]=113,t[396]=114,t[398]=345,t[400]=115,t[401]=347,t[403]=353,t[410]=116,t[437]=117,t[448]=118,t[449]=119,t[454]=120,t[455]=121,t[457]=253,t[460]=122,t[462]=382,t[463]=380,t[853]=44,t[855]=58,t[856]=46,t[876]=47,t[878]=45,t[882]=45,t[894]=40,t[895]=41,t[896]=91,t[897]=93,t[923]=64,t[1004]=48,t[1005]=49,t[1006]=50,t[1007]=51,t[1008]=52,t[1009]=53,t[1010]=54,t[1011]=55,t[1012]=56,t[1013]=57,t[1081]=37,t[1085]=43,t[1086]=45});exports3.getSupplementalGlyphMapForCalibri=getSupplementalGlyphMapForCalibri;function getStandardFontName(name){const fontName=(0,_fonts_utils.normalizeFontName)(name);return getStdFontMap()[fontName]}__name2(getStandardFontName,"getStandardFontName"),__name(getStandardFontName,"getStandardFontName")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.ToUnicodeMap=exports3.IdentityToUnicodeMap=void 0;var _util2=__w_pdfjs_require__3(2);const _ToUnicodeMap=class{static{__name2(this,"_ToUnicodeMap")}constructor(cmap=[]){this._map=cmap}get length(){return this._map.length}forEach(callback){for(const charCode in this._map)callback(charCode,this._map[charCode].charCodeAt(0))}has(i){return this._map[i]!==void 0}get(i){return this._map[i]}charCodeOf(value){const map=this._map;if(map.length<=65536)return map.indexOf(value);for(const charCode in map)if(map[charCode]===value)return charCode|0;return-1}amend(map){for(const charCode in map)this._map[charCode]=map[charCode]}};__name(_ToUnicodeMap,"ToUnicodeMap");let ToUnicodeMap=_ToUnicodeMap;exports3.ToUnicodeMap=ToUnicodeMap;const _IdentityToUnicodeMap=class{static{__name2(this,"_IdentityToUnicodeMap")}constructor(firstChar,lastChar){this.firstChar=firstChar,this.lastChar=lastChar}get length(){return this.lastChar+1-this.firstChar}forEach(callback){for(let i=this.firstChar,ii=this.lastChar;i<=ii;i++)callback(i,i)}has(i){return this.firstChar<=i&&i<=this.lastChar}get(i){if(this.firstChar<=i&&i<=this.lastChar)return String.fromCharCode(i)}charCodeOf(v){return Number.isInteger(v)&&v>=this.firstChar&&v<=this.lastChar?v:-1}amend(map){(0,_util2.unreachable)("Should not call amend()")}};__name(_IdentityToUnicodeMap,"IdentityToUnicodeMap");let IdentityToUnicodeMap=_IdentityToUnicodeMap;exports3.IdentityToUnicodeMap=IdentityToUnicodeMap},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.CFFFont=void 0;var _cff_parser=__w_pdfjs_require__3(35),_fonts_utils=__w_pdfjs_require__3(38),_util2=__w_pdfjs_require__3(2);const _CFFFont=class{static{__name2(this,"_CFFFont")}constructor(file,properties){this.properties=properties;const parser=new _cff_parser.CFFParser(file,properties,_fonts_utils.SEAC_ANALYSIS_ENABLED);this.cff=parser.parse(),this.cff.duplicateFirstGlyph();const compiler=new _cff_parser.CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=compiler.compile()}catch{(0,_util2.warn)("Failed to compile font "+properties.loadedName),this.data=file}this._createBuiltInEncoding()}get numGlyphs(){return this.cff.charStrings.count}getCharset(){return this.cff.charset.charset}getGlyphMapping(){const cff=this.cff,properties=this.properties,charsets=cff.charset.charset;let charCodeToGlyphId,glyphId;if(properties.composite){charCodeToGlyphId=Object.create(null);let charCode;if(cff.isCIDFont)for(glyphId=0;glyphId<charsets.length;glyphId++){const cid=charsets[glyphId];charCode=properties.cMap.charCodeOf(cid),charCodeToGlyphId[charCode]=glyphId}else for(glyphId=0;glyphId<cff.charStrings.count;glyphId++)charCode=properties.cMap.charCodeOf(glyphId),charCodeToGlyphId[charCode]=glyphId;return charCodeToGlyphId}let encoding=cff.encoding?cff.encoding.encoding:null;return properties.isInternalFont&&(encoding=properties.defaultEncoding),charCodeToGlyphId=(0,_fonts_utils.type1FontGlyphMapping)(properties,encoding,charsets),charCodeToGlyphId}hasGlyphId(id){return this.cff.hasGlyphId(id)}_createBuiltInEncoding(){const{charset,encoding}=this.cff;if(!charset||!encoding)return;const charsets=charset.charset,encodings=encoding.encoding,map=[];for(const charCode in encodings){const glyphId=encodings[charCode];if(glyphId>=0){const glyphName=charsets[glyphId];glyphName&&(map[charCode]=glyphName)}}map.length>0&&(this.properties.builtInEncoding=map)}};__name(_CFFFont,"CFFFont");let CFFFont=_CFFFont;exports3.CFFFont=CFFFont},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.FontRendererFactory=void 0;var _util2=__w_pdfjs_require__3(2),_cff_parser=__w_pdfjs_require__3(35),_glyphlist=__w_pdfjs_require__3(39),_encodings=__w_pdfjs_require__3(37),_stream=__w_pdfjs_require__3(10);function getUint32(data,offset){return(data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3])>>>0}__name2(getUint32,"getUint32"),__name(getUint32,"getUint32");function getUint16(data,offset){return data[offset]<<8|data[offset+1]}__name2(getUint16,"getUint16"),__name(getUint16,"getUint16");function getInt16(data,offset){return(data[offset]<<24|data[offset+1]<<16)>>16}__name2(getInt16,"getInt16"),__name(getInt16,"getInt16");function getInt8(data,offset){return data[offset]<<24>>24}__name2(getInt8,"getInt8"),__name(getInt8,"getInt8");function getFloat214(data,offset){return getInt16(data,offset)/16384}__name2(getFloat214,"getFloat214"),__name(getFloat214,"getFloat214");function getSubroutineBias(subrs){const numSubrs=subrs.length;let bias=32768;return numSubrs<1240?bias=107:numSubrs<33900&&(bias=1131),bias}__name2(getSubroutineBias,"getSubroutineBias"),__name(getSubroutineBias,"getSubroutineBias");function parseCmap(data,start,end){const offset=getUint16(data,start+2)===1?getUint32(data,start+8):getUint32(data,start+16),format=getUint16(data,start+offset);let ranges,p,i;if(format===4){getUint16(data,start+offset+2);const segCount=getUint16(data,start+offset+6)>>1;for(p=start+offset+14,ranges=[],i=0;i<segCount;i++,p+=2)ranges[i]={end:getUint16(data,p)};for(p+=2,i=0;i<segCount;i++,p+=2)ranges[i].start=getUint16(data,p);for(i=0;i<segCount;i++,p+=2)ranges[i].idDelta=getUint16(data,p);for(i=0;i<segCount;i++,p+=2){let idOffset=getUint16(data,p);if(idOffset!==0){ranges[i].ids=[];for(let j=0,jj=ranges[i].end-ranges[i].start+1;j<jj;j++)ranges[i].ids[j]=getUint16(data,p+idOffset),idOffset+=2}}return ranges}else if(format===12){const groups=getUint32(data,start+offset+12);for(p=start+offset+16,ranges=[],i=0;i<groups;i++)start=getUint32(data,p),ranges.push({start,end:getUint32(data,p+4),idDelta:getUint32(data,p+8)-start}),p+=12;return ranges}throw new _util2.FormatError(`unsupported cmap: ${format}`)}__name2(parseCmap,"parseCmap"),__name(parseCmap,"parseCmap");function parseCff(data,start,end,seacAnalysisEnabled){const properties={},cff=new _cff_parser.CFFParser(new _stream.Stream(data,start,end-start),properties,seacAnalysisEnabled).parse();return{glyphs:cff.charStrings.objects,subrs:cff.topDict.privateDict&&cff.topDict.privateDict.subrsIndex&&cff.topDict.privateDict.subrsIndex.objects,gsubrs:cff.globalSubrIndex&&cff.globalSubrIndex.objects,isCFFCIDFont:cff.isCIDFont,fdSelect:cff.fdSelect,fdArray:cff.fdArray}}__name2(parseCff,"parseCff"),__name(parseCff,"parseCff");function parseGlyfTable(glyf,loca,isGlyphLocationsLong){let itemSize,itemDecode;isGlyphLocationsLong?(itemSize=4,itemDecode=getUint32):(itemSize=2,itemDecode=__name((data,offset)=>2*getUint16(data,offset),"itemDecode"));const glyphs=[];let startOffset=itemDecode(loca,0);for(let j=itemSize;j<loca.length;j+=itemSize){const endOffset=itemDecode(loca,j);glyphs.push(glyf.subarray(startOffset,endOffset)),startOffset=endOffset}return glyphs}__name2(parseGlyfTable,"parseGlyfTable"),__name(parseGlyfTable,"parseGlyfTable");function lookupCmap(ranges,unicode){const code=unicode.codePointAt(0);let gid=0,l=0,r=ranges.length-1;for(;l<r;){const c=l+r+1>>1;code<ranges[c].start?r=c-1:l=c}return ranges[l].start<=code&&code<=ranges[l].end&&(gid=ranges[l].idDelta+(ranges[l].ids?ranges[l].ids[code-ranges[l].start]:code)&65535),{charCode:code,glyphId:gid}}__name2(lookupCmap,"lookupCmap"),__name(lookupCmap,"lookupCmap");function compileGlyf(code,cmds,font){function moveTo(x2,y2){cmds.push({cmd:"moveTo",args:[x2,y2]})}__name2(moveTo,"moveTo"),__name(moveTo,"moveTo");function lineTo(x2,y2){cmds.push({cmd:"lineTo",args:[x2,y2]})}__name2(lineTo,"lineTo"),__name(lineTo,"lineTo");function quadraticCurveTo(xa,ya,x2,y2){cmds.push({cmd:"quadraticCurveTo",args:[xa,ya,x2,y2]})}__name2(quadraticCurveTo,"quadraticCurveTo"),__name(quadraticCurveTo,"quadraticCurveTo");let i=0;const numberOfContours=getInt16(code,i);let flags,x=0,y=0;if(i+=10,numberOfContours<0)do{flags=getUint16(code,i);const glyphIndex=getUint16(code,i+2);i+=4;let arg1,arg2;flags&1?(flags&2?(arg1=getInt16(code,i),arg2=getInt16(code,i+2)):(arg1=getUint16(code,i),arg2=getUint16(code,i+2)),i+=4):flags&2?(arg1=getInt8(code,i++),arg2=getInt8(code,i++)):(arg1=code[i++],arg2=code[i++]),flags&2?(x=arg1,y=arg2):(x=0,y=0);let scaleX=1,scaleY=1,scale01=0,scale10=0;flags&8?(scaleX=scaleY=getFloat214(code,i),i+=2):flags&64?(scaleX=getFloat214(code,i),scaleY=getFloat214(code,i+2),i+=4):flags&128&&(scaleX=getFloat214(code,i),scale01=getFloat214(code,i+2),scale10=getFloat214(code,i+4),scaleY=getFloat214(code,i+6),i+=8);const subglyph=font.glyphs[glyphIndex];subglyph&&(cmds.push({cmd:"save"},{cmd:"transform",args:[scaleX,scale01,scale10,scaleY,x,y]}),compileGlyf(subglyph,cmds,font),cmds.push({cmd:"restore"}))}while(flags&32);else{const endPtsOfContours=[];let j,jj;for(j=0;j<numberOfContours;j++)endPtsOfContours.push(getUint16(code,i)),i+=2;const instructionLength=getUint16(code,i);i+=2+instructionLength;const numberOfPoints=endPtsOfContours.at(-1)+1,points=[];for(;points.length<numberOfPoints;){flags=code[i++];let repeat=1;for(flags&8&&(repeat+=code[i++]);repeat-- >0;)points.push({flags})}for(j=0;j<numberOfPoints;j++){switch(points[j].flags&18){case 0:x+=getInt16(code,i),i+=2;break;case 2:x-=code[i++];break;case 18:x+=code[i++];break}points[j].x=x}for(j=0;j<numberOfPoints;j++){switch(points[j].flags&36){case 0:y+=getInt16(code,i),i+=2;break;case 4:y-=code[i++];break;case 36:y+=code[i++];break}points[j].y=y}let startPoint=0;for(i=0;i<numberOfContours;i++){const endPoint=endPtsOfContours[i],contour=points.slice(startPoint,endPoint+1);if(contour[0].flags&1)contour.push(contour[0]);else if(contour.at(-1).flags&1)contour.unshift(contour.at(-1));else{const p={flags:1,x:(contour[0].x+contour.at(-1).x)/2,y:(contour[0].y+contour.at(-1).y)/2};contour.unshift(p),contour.push(p)}for(moveTo(contour[0].x,contour[0].y),j=1,jj=contour.length;j<jj;j++)contour[j].flags&1?lineTo(contour[j].x,contour[j].y):contour[j+1].flags&1?(quadraticCurveTo(contour[j].x,contour[j].y,contour[j+1].x,contour[j+1].y),j++):quadraticCurveTo(contour[j].x,contour[j].y,(contour[j].x+contour[j+1].x)/2,(contour[j].y+contour[j+1].y)/2);startPoint=endPoint+1}}}__name2(compileGlyf,"compileGlyf"),__name(compileGlyf,"compileGlyf");function compileCharString(charStringCode,cmds,font,glyphId){function moveTo(x2,y2){cmds.push({cmd:"moveTo",args:[x2,y2]})}__name2(moveTo,"moveTo"),__name(moveTo,"moveTo");function lineTo(x2,y2){cmds.push({cmd:"lineTo",args:[x2,y2]})}__name2(lineTo,"lineTo"),__name(lineTo,"lineTo");function bezierCurveTo(x1,y1,x2,y2,x3,y3){cmds.push({cmd:"bezierCurveTo",args:[x1,y1,x2,y2,x3,y3]})}__name2(bezierCurveTo,"bezierCurveTo"),__name(bezierCurveTo,"bezierCurveTo");const stack=[];let x=0,y=0,stems=0;function parse(code){let i=0;for(;i<code.length;){let stackClean=!1,v=code[i++],xa,xb,ya,yb,y1,y2,y3,n,subrCode;switch(v){case 1:stems+=stack.length>>1,stackClean=!0;break;case 3:stems+=stack.length>>1,stackClean=!0;break;case 4:y+=stack.pop(),moveTo(x,y),stackClean=!0;break;case 5:for(;stack.length>0;)x+=stack.shift(),y+=stack.shift(),lineTo(x,y);break;case 6:for(;stack.length>0&&(x+=stack.shift(),lineTo(x,y),stack.length!==0);)y+=stack.shift(),lineTo(x,y);break;case 7:for(;stack.length>0&&(y+=stack.shift(),lineTo(x,y),stack.length!==0);)x+=stack.shift(),lineTo(x,y);break;case 8:for(;stack.length>0;)xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y);break;case 10:if(n=stack.pop(),subrCode=null,font.isCFFCIDFont){const fdIndex=font.fdSelect.getFDIndex(glyphId);if(fdIndex>=0&&fdIndex<font.fdArray.length){const fontDict=font.fdArray[fdIndex];let subrs;fontDict.privateDict&&fontDict.privateDict.subrsIndex&&(subrs=fontDict.privateDict.subrsIndex.objects),subrs&&(n+=getSubroutineBias(subrs),subrCode=subrs[n])}else(0,_util2.warn)("Invalid fd index for glyph index.")}else subrCode=font.subrs[n+font.subrsBias];subrCode&&parse(subrCode);break;case 11:return;case 12:switch(v=code[i++],v){case 34:xa=x+stack.shift(),xb=xa+stack.shift(),y1=y+stack.shift(),x=xb+stack.shift(),bezierCurveTo(xa,y,xb,y1,x,y1),xa=x+stack.shift(),xb=xa+stack.shift(),x=xb+stack.shift(),bezierCurveTo(xa,y1,xb,y,x,y);break;case 35:xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y),xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y),stack.pop();break;case 36:xa=x+stack.shift(),y1=y+stack.shift(),xb=xa+stack.shift(),y2=y1+stack.shift(),x=xb+stack.shift(),bezierCurveTo(xa,y1,xb,y2,x,y2),xa=x+stack.shift(),xb=xa+stack.shift(),y3=y2+stack.shift(),x=xb+stack.shift(),bezierCurveTo(xa,y2,xb,y3,x,y);break;case 37:const x0=x,y0=y;xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y),xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb,y=yb,Math.abs(x-x0)>Math.abs(y-y0)?x+=stack.shift():y+=stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y);break;default:throw new _util2.FormatError(`unknown operator: 12 ${v}`)}break;case 14:if(stack.length>=4){const achar=stack.pop(),bchar=stack.pop();y=stack.pop(),x=stack.pop(),cmds.push({cmd:"save"},{cmd:"translate",args:[x,y]});let cmap=lookupCmap(font.cmap,String.fromCharCode(font.glyphNameMap[_encodings.StandardEncoding[achar]]));compileCharString(font.glyphs[cmap.glyphId],cmds,font,cmap.glyphId),cmds.push({cmd:"restore"}),cmap=lookupCmap(font.cmap,String.fromCharCode(font.glyphNameMap[_encodings.StandardEncoding[bchar]])),compileCharString(font.glyphs[cmap.glyphId],cmds,font,cmap.glyphId)}return;case 18:stems+=stack.length>>1,stackClean=!0;break;case 19:stems+=stack.length>>1,i+=stems+7>>3,stackClean=!0;break;case 20:stems+=stack.length>>1,i+=stems+7>>3,stackClean=!0;break;case 21:y+=stack.pop(),x+=stack.pop(),moveTo(x,y),stackClean=!0;break;case 22:x+=stack.pop(),moveTo(x,y),stackClean=!0;break;case 23:stems+=stack.length>>1,stackClean=!0;break;case 24:for(;stack.length>2;)xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y);x+=stack.shift(),y+=stack.shift(),lineTo(x,y);break;case 25:for(;stack.length>6;)x+=stack.shift(),y+=stack.shift(),lineTo(x,y);xa=x+stack.shift(),ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y);break;case 26:for(stack.length%2&&(x+=stack.shift());stack.length>0;)xa=x,ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb,y=yb+stack.shift(),bezierCurveTo(xa,ya,xb,yb,x,y);break;case 27:for(stack.length%2&&(y+=stack.shift());stack.length>0;)xa=x+stack.shift(),ya=y,xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb,bezierCurveTo(xa,ya,xb,yb,x,y);break;case 28:stack.push((code[i]<<24|code[i+1]<<16)>>16),i+=2;break;case 29:n=stack.pop()+font.gsubrsBias,subrCode=font.gsubrs[n],subrCode&&parse(subrCode);break;case 30:for(;stack.length>0&&(xa=x,ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+(stack.length===1?stack.shift():0),bezierCurveTo(xa,ya,xb,yb,x,y),stack.length!==0);)xa=x+stack.shift(),ya=y,xb=xa+stack.shift(),yb=ya+stack.shift(),y=yb+stack.shift(),x=xb+(stack.length===1?stack.shift():0),bezierCurveTo(xa,ya,xb,yb,x,y);break;case 31:for(;stack.length>0&&(xa=x+stack.shift(),ya=y,xb=xa+stack.shift(),yb=ya+stack.shift(),y=yb+stack.shift(),x=xb+(stack.length===1?stack.shift():0),bezierCurveTo(xa,ya,xb,yb,x,y),stack.length!==0);)xa=x,ya=y+stack.shift(),xb=xa+stack.shift(),yb=ya+stack.shift(),x=xb+stack.shift(),y=yb+(stack.length===1?stack.shift():0),bezierCurveTo(xa,ya,xb,yb,x,y);break;default:if(v<32)throw new _util2.FormatError(`unknown operator: ${v}`);v<247?stack.push(v-139):v<251?stack.push((v-247)*256+code[i++]+108):v<255?stack.push(-(v-251)*256-code[i++]-108):(stack.push((code[i]<<24|code[i+1]<<16|code[i+2]<<8|code[i+3])/65536),i+=4);break}stackClean&&(stack.length=0)}}__name2(parse,"parse"),__name(parse,"parse"),parse(charStringCode)}__name2(compileCharString,"compileCharString"),__name(compileCharString,"compileCharString");const NOOP=[],_CompiledFont=class _CompiledFont2{static{__name2(this,"_CompiledFont")}constructor(fontMatrix){this.constructor===_CompiledFont2&&(0,_util2.unreachable)("Cannot initialize CompiledFont."),this.fontMatrix=fontMatrix,this.compiledGlyphs=Object.create(null),this.compiledCharCodeToGlyphId=Object.create(null)}getPathJs(unicode){const{charCode,glyphId}=lookupCmap(this.cmap,unicode);let fn=this.compiledGlyphs[glyphId];if(!fn)try{fn=this.compileGlyph(this.glyphs[glyphId],glyphId),this.compiledGlyphs[glyphId]=fn}catch(ex){throw this.compiledGlyphs[glyphId]=NOOP,this.compiledCharCodeToGlyphId[charCode]===void 0&&(this.compiledCharCodeToGlyphId[charCode]=glyphId),ex}return this.compiledCharCodeToGlyphId[charCode]===void 0&&(this.compiledCharCodeToGlyphId[charCode]=glyphId),fn}compileGlyph(code,glyphId){if(!code||code.length===0||code[0]===14)return NOOP;let fontMatrix=this.fontMatrix;if(this.isCFFCIDFont){const fdIndex=this.fdSelect.getFDIndex(glyphId);fdIndex>=0&&fdIndex<this.fdArray.length?fontMatrix=this.fdArray[fdIndex].getByName("FontMatrix")||_util2.FONT_IDENTITY_MATRIX:(0,_util2.warn)("Invalid fd index for glyph index.")}const cmds=[{cmd:"save"},{cmd:"transform",args:fontMatrix.slice()},{cmd:"scale",args:["size","-size"]}];return this.compileGlyphImpl(code,cmds,glyphId),cmds.push({cmd:"restore"}),cmds}compileGlyphImpl(){(0,_util2.unreachable)("Children classes should implement this.")}hasBuiltPath(unicode){const{charCode,glyphId}=lookupCmap(this.cmap,unicode);return this.compiledGlyphs[glyphId]!==void 0&&this.compiledCharCodeToGlyphId[charCode]!==void 0}};__name(_CompiledFont,"CompiledFont");let CompiledFont=_CompiledFont;const _TrueTypeCompiled=class extends CompiledFont{static{__name2(this,"_TrueTypeCompiled")}constructor(glyphs,cmap,fontMatrix){super(fontMatrix||[488e-6,0,0,488e-6,0,0]),this.glyphs=glyphs,this.cmap=cmap}compileGlyphImpl(code,cmds){compileGlyf(code,cmds,this)}};__name(_TrueTypeCompiled,"TrueTypeCompiled");let TrueTypeCompiled=_TrueTypeCompiled;const _Type2Compiled=class extends CompiledFont{static{__name2(this,"_Type2Compiled")}constructor(cffInfo,cmap,fontMatrix,glyphNameMap){super(fontMatrix||[.001,0,0,.001,0,0]),this.glyphs=cffInfo.glyphs,this.gsubrs=cffInfo.gsubrs||[],this.subrs=cffInfo.subrs||[],this.cmap=cmap,this.glyphNameMap=glyphNameMap||(0,_glyphlist.getGlyphsUnicode)(),this.gsubrsBias=getSubroutineBias(this.gsubrs),this.subrsBias=getSubroutineBias(this.subrs),this.isCFFCIDFont=cffInfo.isCFFCIDFont,this.fdSelect=cffInfo.fdSelect,this.fdArray=cffInfo.fdArray}compileGlyphImpl(code,cmds,glyphId){compileCharString(code,cmds,this,glyphId)}};__name(_Type2Compiled,"Type2Compiled");let Type2Compiled=_Type2Compiled;const _FontRendererFactory=class{static{__name2(this,"_FontRendererFactory")}static create(font,seacAnalysisEnabled){const data=new Uint8Array(font.data);let cmap,glyf,loca,cff,indexToLocFormat,unitsPerEm;const numTables=getUint16(data,4);for(let i=0,p=12;i<numTables;i++,p+=16){const tag=(0,_util2.bytesToString)(data.subarray(p,p+4)),offset=getUint32(data,p+8),length=getUint32(data,p+12);switch(tag){case"cmap":cmap=parseCmap(data,offset);break;case"glyf":glyf=data.subarray(offset,offset+length);break;case"loca":loca=data.subarray(offset,offset+length);break;case"head":unitsPerEm=getUint16(data,offset+18),indexToLocFormat=getUint16(data,offset+50);break;case"CFF ":cff=parseCff(data,offset,offset+length,seacAnalysisEnabled);break}}if(glyf){const fontMatrix=unitsPerEm?[1/unitsPerEm,0,0,1/unitsPerEm,0,0]:font.fontMatrix;return new TrueTypeCompiled(parseGlyfTable(glyf,loca,indexToLocFormat),cmap,fontMatrix)}return new Type2Compiled(cff,cmap,font.fontMatrix,font.glyphNameMap)}};__name(_FontRendererFactory,"FontRendererFactory");let FontRendererFactory=_FontRendererFactory;exports3.FontRendererFactory=FontRendererFactory},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.getMetrics=exports3.getFontBasicMetrics=void 0;var _core_utils=__w_pdfjs_require__3(6);const getMetrics=(0,_core_utils.getLookupTableFactory)(function(t){t.Courier=600,t["Courier-Bold"]=600,t["Courier-BoldOblique"]=600,t["Courier-Oblique"]=600,t.Helvetica=(0,_core_utils.getLookupTableFactory)(function(t2){t2.space=278,t2.exclam=278,t2.quotedbl=355,t2.numbersign=556,t2.dollar=556,t2.percent=889,t2.ampersand=667,t2.quoteright=222,t2.parenleft=333,t2.parenright=333,t2.asterisk=389,t2.plus=584,t2.comma=278,t2.hyphen=333,t2.period=278,t2.slash=278,t2.zero=556,t2.one=556,t2.two=556,t2.three=556,t2.four=556,t2.five=556,t2.six=556,t2.seven=556,t2.eight=556,t2.nine=556,t2.colon=278,t2.semicolon=278,t2.less=584,t2.equal=584,t2.greater=584,t2.question=556,t2.at=1015,t2.A=667,t2.B=667,t2.C=722,t2.D=722,t2.E=667,t2.F=611,t2.G=778,t2.H=722,t2.I=278,t2.J=500,t2.K=667,t2.L=556,t2.M=833,t2.N=722,t2.O=778,t2.P=667,t2.Q=778,t2.R=722,t2.S=667,t2.T=611,t2.U=722,t2.V=667,t2.W=944,t2.X=667,t2.Y=667,t2.Z=611,t2.bracketleft=278,t2.backslash=278,t2.bracketright=278,t2.asciicircum=469,t2.underscore=556,t2.quoteleft=222,t2.a=556,t2.b=556,t2.c=500,t2.d=556,t2.e=556,t2.f=278,t2.g=556,t2.h=556,t2.i=222,t2.j=222,t2.k=500,t2.l=222,t2.m=833,t2.n=556,t2.o=556,t2.p=556,t2.q=556,t2.r=333,t2.s=500,t2.t=278,t2.u=556,t2.v=500,t2.w=722,t2.x=500,t2.y=500,t2.z=500,t2.braceleft=334,t2.bar=260,t2.braceright=334,t2.asciitilde=584,t2.exclamdown=333,t2.cent=556,t2.sterling=556,t2.fraction=167,t2.yen=556,t2.florin=556,t2.section=556,t2.currency=556,t2.quotesingle=191,t2.quotedblleft=333,t2.guillemotleft=556,t2.guilsinglleft=333,t2.guilsinglright=333,t2.fi=500,t2.fl=500,t2.endash=556,t2.dagger=556,t2.daggerdbl=556,t2.periodcentered=278,t2.paragraph=537,t2.bullet=350,t2.quotesinglbase=222,t2.quotedblbase=333,t2.quotedblright=333,t2.guillemotright=556,t2.ellipsis=1e3,t2.perthousand=1e3,t2.questiondown=611,t2.grave=333,t2.acute=333,t2.circumflex=333,t2.tilde=333,t2.macron=333,t2.breve=333,t2.dotaccent=333,t2.dieresis=333,t2.ring=333,t2.cedilla=333,t2.hungarumlaut=333,t2.ogonek=333,t2.caron=333,t2.emdash=1e3,t2.AE=1e3,t2.ordfeminine=370,t2.Lslash=556,t2.Oslash=778,t2.OE=1e3,t2.ordmasculine=365,t2.ae=889,t2.dotlessi=278,t2.lslash=222,t2.oslash=611,t2.oe=944,t2.germandbls=611,t2.Idieresis=278,t2.eacute=556,t2.abreve=556,t2.uhungarumlaut=556,t2.ecaron=556,t2.Ydieresis=667,t2.divide=584,t2.Yacute=667,t2.Acircumflex=667,t2.aacute=556,t2.Ucircumflex=722,t2.yacute=500,t2.scommaaccent=500,t2.ecircumflex=556,t2.Uring=722,t2.Udieresis=722,t2.aogonek=556,t2.Uacute=722,t2.uogonek=556,t2.Edieresis=667,t2.Dcroat=722,t2.commaaccent=250,t2.copyright=737,t2.Emacron=667,t2.ccaron=500,t2.aring=556,t2.Ncommaaccent=722,t2.lacute=222,t2.agrave=556,t2.Tcommaaccent=611,t2.Cacute=722,t2.atilde=556,t2.Edotaccent=667,t2.scaron=500,t2.scedilla=500,t2.iacute=278,t2.lozenge=471,t2.Rcaron=722,t2.Gcommaaccent=778,t2.ucircumflex=556,t2.acircumflex=556,t2.Amacron=667,t2.rcaron=333,t2.ccedilla=500,t2.Zdotaccent=611,t2.Thorn=667,t2.Omacron=778,t2.Racute=722,t2.Sacute=667,t2.dcaron=643,t2.Umacron=722,t2.uring=556,t2.threesuperior=333,t2.Ograve=778,t2.Agrave=667,t2.Abreve=667,t2.multiply=584,t2.uacute=556,t2.Tcaron=611,t2.partialdiff=476,t2.ydieresis=500,t2.Nacute=722,t2.icircumflex=278,t2.Ecircumflex=667,t2.adieresis=556,t2.edieresis=556,t2.cacute=500,t2.nacute=556,t2.umacron=556,t2.Ncaron=722,t2.Iacute=278,t2.plusminus=584,t2.brokenbar=260,t2.registered=737,t2.Gbreve=778,t2.Idotaccent=278,t2.summation=600,t2.Egrave=667,t2.racute=333,t2.omacron=556,t2.Zacute=611,t2.Zcaron=611,t2.greaterequal=549,t2.Eth=722,t2.Ccedilla=722,t2.lcommaaccent=222,t2.tcaron=317,t2.eogonek=556,t2.Uogonek=722,t2.Aacute=667,t2.Adieresis=667,t2.egrave=556,t2.zacute=500,t2.iogonek=222,t2.Oacute=778,t2.oacute=556,t2.amacron=556,t2.sacute=500,t2.idieresis=278,t2.Ocircumflex=778,t2.Ugrave=722,t2.Delta=612,t2.thorn=556,t2.twosuperior=333,t2.Odieresis=778,t2.mu=556,t2.igrave=278,t2.ohungarumlaut=556,t2.Eogonek=667,t2.dcroat=556,t2.threequarters=834,t2.Scedilla=667,t2.lcaron=299,t2.Kcommaaccent=667,t2.Lacute=556,t2.trademark=1e3,t2.edotaccent=556,t2.Igrave=278,t2.Imacron=278,t2.Lcaron=556,t2.onehalf=834,t2.lessequal=549,t2.ocircumflex=556,t2.ntilde=556,t2.Uhungarumlaut=722,t2.Eacute=667,t2.emacron=556,t2.gbreve=556,t2.onequarter=834,t2.Scaron=667,t2.Scommaaccent=667,t2.Ohungarumlaut=778,t2.degree=400,t2.ograve=556,t2.Ccaron=722,t2.ugrave=556,t2.radical=453,t2.Dcaron=722,t2.rcommaaccent=333,t2.Ntilde=722,t2.otilde=556,t2.Rcommaaccent=722,t2.Lcommaaccent=556,t2.Atilde=667,t2.Aogonek=667,t2.Aring=667,t2.Otilde=778,t2.zdotaccent=500,t2.Ecaron=667,t2.Iogonek=278,t2.kcommaaccent=500,t2.minus=584,t2.Icircumflex=278,t2.ncaron=556,t2.tcommaaccent=278,t2.logicalnot=584,t2.odieresis=556,t2.udieresis=556,t2.notequal=549,t2.gcommaaccent=556,t2.eth=556,t2.zcaron=500,t2.ncommaaccent=556,t2.onesuperior=333,t2.imacron=278,t2.Euro=556}),t["Helvetica-Bold"]=(0,_core_utils.getLookupTableFactory)(function(t2){t2.space=278,t2.exclam=333,t2.quotedbl=474,t2.numbersign=556,t2.dollar=556,t2.percent=889,t2.ampersand=722,t2.quoteright=278,t2.parenleft=333,t2.parenright=333,t2.asterisk=389,t2.plus=584,t2.comma=278,t2.hyphen=333,t2.period=278,t2.slash=278,t2.zero=556,t2.one=556,t2.two=556,t2.three=556,t2.four=556,t2.five=556,t2.six=556,t2.seven=556,t2.eight=556,t2.nine=556,t2.colon=333,t2.semicolon=333,t2.less=584,t2.equal=584,t2.greater=584,t2.question=611,t2.at=975,t2.A=722,t2.B=722,t2.C=722,t2.D=722,t2.E=667,t2.F=611,t2.G=778,t2.H=722,t2.I=278,t2.J=556,t2.K=722,t2.L=611,t2.M=833,t2.N=722,t2.O=778,t2.P=667,t2.Q=778,t2.R=722,t2.S=667,t2.T=611,t2.U=722,t2.V=667,t2.W=944,t2.X=667,t2.Y=667,t2.Z=611,t2.bracketleft=333,t2.backslash=278,t2.bracketright=333,t2.asciicircum=584,t2.underscore=556,t2.quoteleft=278,t2.a=556,t2.b=611,t2.c=556,t2.d=611,t2.e=556,t2.f=333,t2.g=611,t2.h=611,t2.i=278,t2.j=278,t2.k=556,t2.l=278,t2.m=889,t2.n=611,t2.o=611,t2.p=611,t2.q=611,t2.r=389,t2.s=556,t2.t=333,t2.u=611,t2.v=556,t2.w=778,t2.x=556,t2.y=556,t2.z=500,t2.braceleft=389,t2.bar=280,t2.braceright=389,t2.asciitilde=584,t2.exclamdown=333,t2.cent=556,t2.sterling=556,t2.fraction=167,t2.yen=556,t2.florin=556,t2.section=556,t2.currency=556,t2.quotesingle=238,t2.quotedblleft=500,t2.guillemotleft=556,t2.guilsinglleft=333,t2.guilsinglright=333,t2.fi=611,t2.fl=611,t2.endash=556,t2.dagger=556,t2.daggerdbl=556,t2.periodcentered=278,t2.paragraph=556,t2.bullet=350,t2.quotesinglbase=278,t2.quotedblbase=500,t2.quotedblright=500,t2.guillemotright=556,t2.ellipsis=1e3,t2.perthousand=1e3,t2.questiondown=611,t2.grave=333,t2.acute=333,t2.circumflex=333,t2.tilde=333,t2.macron=333,t2.breve=333,t2.dotaccent=333,t2.dieresis=333,t2.ring=333,t2.cedilla=333,t2.hungarumlaut=333,t2.ogonek=333,t2.caron=333,t2.emdash=1e3,t2.AE=1e3,t2.ordfeminine=370,t2.Lslash=611,t2.Oslash=778,t2.OE=1e3,t2.ordmasculine=365,t2.ae=889,t2.dotlessi=278,t2.lslash=278,t2.oslash=611,t2.oe=944,t2.germandbls=611,t2.Idieresis=278,t2.eacute=556,t2.abreve=556,t2.uhungarumlaut=611,t2.ecaron=556,t2.Ydieresis=667,t2.divide=584,t2.Yacute=667,t2.Acircumflex=722,t2.aacute=556,t2.Ucircumflex=722,t2.yacute=556,t2.scommaaccent=556,t2.ecircumflex=556,t2.Uring=722,t2.Udieresis=722,t2.aogonek=556,t2.Uacute=722,t2.uogonek=611,t2.Edieresis=667,t2.Dcroat=722,t2.commaaccent=250,t2.copyright=737,t2.Emacron=667,t2.ccaron=556,t2.aring=556,t2.Ncommaaccent=722,t2.lacute=278,t2.agrave=556,t2.Tcommaaccent=611,t2.Cacute=722,t2.atilde=556,t2.Edotaccent=667,t2.scaron=556,t2.scedilla=556,t2.iacute=278,t2.lozenge=494,t2.Rcaron=722,t2.Gcommaaccent=778,t2.ucircumflex=611,t2.acircumflex=556,t2.Amacron=722,t2.rcaron=389,t2.ccedilla=556,t2.Zdotaccent=611,t2.Thorn=667,t2.Omacron=778,t2.Racute=722,t2.Sacute=667,t2.dcaron=743,t2.Umacron=722,t2.uring=611,t2.threesuperior=333,t2.Ograve=778,t2.Agrave=722,t2.Abreve=722,t2.multiply=584,t2.uacute=611,t2.Tcaron=611,t2.partialdiff=494,t2.ydieresis=556,t2.Nacute=722,t2.icircumflex=278,t2.Ecircumflex=667,t2.adieresis=556,t2.edieresis=556,t2.cacute=556,t2.nacute=611,t2.umacron=611,t2.Ncaron=722,t2.Iacute=278,t2.plusminus=584,t2.brokenbar=280,t2.registered=737,t2.Gbreve=778,t2.Idotaccent=278,t2.summation=600,t2.Egrave=667,t2.racute=389,t2.omacron=611,t2.Zacute=611,t2.Zcaron=611,t2.greaterequal=549,t2.Eth=722,t2.Ccedilla=722,t2.lcommaaccent=278,t2.tcaron=389,t2.eogonek=556,t2.Uogonek=722,t2.Aacute=722,t2.Adieresis=722,t2.egrave=556,t2.zacute=500,t2.iogonek=278,t2.Oacute=778,t2.oacute=611,t2.amacron=556,t2.sacute=556,t2.idieresis=278,t2.Ocircumflex=778,t2.Ugrave=722,t2.Delta=612,t2.thorn=611,t2.twosuperior=333,t2.Odieresis=778,t2.mu=611,t2.igrave=278,t2.ohungarumlaut=611,t2.Eogonek=667,t2.dcroat=611,t2.threequarters=834,t2.Scedilla=667,t2.lcaron=400,t2.Kcommaaccent=722,t2.Lacute=611,t2.trademark=1e3,t2.edotaccent=556,t2.Igrave=278,t2.Imacron=278,t2.Lcaron=611,t2.onehalf=834,t2.lessequal=549,t2.ocircumflex=611,t2.ntilde=611,t2.Uhungarumlaut=722,t2.Eacute=667,t2.emacron=556,t2.gbreve=611,t2.onequarter=834,t2.Scaron=667,t2.Scommaaccent=667,t2.Ohungarumlaut=778,t2.degree=400,t2.ograve=611,t2.Ccaron=722,t2.ugrave=611,t2.radical=549,t2.Dcaron=722,t2.rcommaaccent=389,t2.Ntilde=722,t2.otilde=611,t2.Rcommaaccent=722,t2.Lcommaaccent=611,t2.Atilde=722,t2.Aogonek=722,t2.Aring=722,t2.Otilde=778,t2.zdotaccent=500,t2.Ecaron=667,t2.Iogonek=278,t2.kcommaaccent=556,t2.minus=584,t2.Icircumflex=278,t2.ncaron=611,t2.tcommaaccent=333,t2.logicalnot=584,t2.odieresis=611,t2.udieresis=611,t2.notequal=549,t2.gcommaaccent=611,t2.eth=611,t2.zcaron=500,t2.ncommaaccent=611,t2.onesuperior=333,t2.imacron=278,t2.Euro=556}),t["Helvetica-BoldOblique"]=(0,_core_utils.getLookupTableFactory)(function(t2){t2.space=278,t2.exclam=333,t2.quotedbl=474,t2.numbersign=556,t2.dollar=556,t2.percent=889,t2.ampersand=722,t2.quoteright=278,t2.parenleft=333,t2.parenright=333,t2.asterisk=389,t2.plus=584,t2.comma=278,t2.hyphen=333,t2.period=278,t2.slash=278,t2.zero=556,t2.one=556,t2.two=556,t2.three=556,t2.four=556,t2.five=556,t2.six=556,t2.seven=556,t2.eight=556,t2.nine=556,t2.colon=333,t2.semicolon=333,t2.less=584,t2.equal=584,t2.greater=584,t2.question=611,t2.at=975,t2.A=722,t2.B=722,t2.C=722,t2.D=722,t2.E=667,t2.F=611,t2.G=778,t2.H=722,t2.I=278,t2.J=556,t2.K=722,t2.L=611,t2.M=833,t2.N=722,t2.O=778,t2.P=667,t2.Q=778,t2.R=722,t2.S=667,t2.T=611,t2.U=722,t2.V=667,t2.W=944,t2.X=667,t2.Y=667,t2.Z=611,t2.bracketleft=333,t2.backslash=278,t2.bracketright=333,t2.asciicircum=584,t2.underscore=556,t2.quoteleft=278,t2.a=556,t2.b=611,t2.c=556,t2.d=611,t2.e=556,t2.f=333,t2.g=611,t2.h=611,t2.i=278,t2.j=278,t2.k=556,t2.l=278,t2.m=889,t2.n=611,t2.o=611,t2.p=611,t2.q=611,t2.r=389,t2.s=556,t2.t=333,t2.u=611,t2.v=556,t2.w=778,t2.x=556,t2.y=556,t2.z=500,t2.braceleft=389,t2.bar=280,t2.braceright=389,t2.asciitilde=584,t2.exclamdown=333,t2.cent=556,t2.sterling=556,t2.fraction=167,t2.yen=556,t2.florin=556,t2.section=556,t2.currency=556,t2.quotesingle=238,t2.quotedblleft=500,t2.guillemotleft=556,t2.guilsinglleft=333,t2.guilsinglright=333,t2.fi=611,t2.fl=611,t2.endash=556,t2.dagger=556,t2.daggerdbl=556,t2.periodcentered=278,t2.paragraph=556,t2.bullet=350,t2.quotesinglbase=278,t2.quotedblbase=500,t2.quotedblright=500,t2.guillemotright=556,t2.ellipsis=1e3,t2.perthousand=1e3,t2.questiondown=611,t2.grave=333,t2.acute=333,t2.circumflex=333,t2.tilde=333,t2.macron=333,t2.breve=333,t2.dotaccent=333,t2.dieresis=333,t2.ring=333,t2.cedilla=333,t2.hungarumlaut=333,t2.ogonek=333,t2.caron=333,t2.emdash=1e3,t2.AE=1e3,t2.ordfeminine=370,t2.Lslash=611,t2.Oslash=778,t2.OE=1e3,t2.ordmasculine=365,t2.ae=889,t2.dotlessi=278,t2.lslash=278,t2.oslash=611,t2.oe=944,t2.germandbls=611,t2.Idieresis=278,t2.eacute=556,t2.abreve=556,t2.uhungarumlaut=611,t2.ecaron=556,t2.Ydieresis=667,t2.divide=584,t2.Yacute=667,t2.Acircumflex=722,t2.aacute=556,t2.Ucircumflex=722,t2.yacute=556,t2.scommaaccent=556,t2.ecircumflex=556,t2.Uring=722,t2.Udieresis=722,t2.aogonek=556,t2.Uacute=722,t2.uogonek=611,t2.Edieresis=667,t2.Dcroat=722,t2.commaaccent=250,t2.copyright=737,t2.Emacron=667,t2.ccaron=556,t2.aring=556,t2.Ncommaaccent=722,t2.lacute=278,t2.agrave=556,t2.Tcommaaccent=611,t2.Cacute=722,t2.atilde=556,t2.Edotaccent=667,t2.scaron=556,t2.scedilla=556,t2.iacute=278,t2.lozenge=494,t2.Rcaron=722,t2.Gcommaaccent=778,t2.ucircumflex=611,t2.acircumflex=556,t2.Amacron=722,t2.rcaron=389,t2.ccedilla=556,t2.Zdotaccent=611,t2.Thorn=667,t2.Omacron=778,t2.Racute=722,t2.Sacute=667,t2.dcaron=743,t2.Umacron=722,t2.uring=611,t2.threesuperior=333,t2.Ograve=778,t2.Agrave=722,t2.Abreve=722,t2.multiply=584,t2.uacute=611,t2.Tcaron=611,t2.partialdiff=494,t2.ydieresis=556,t2.Nacute=722,t2.icircumflex=278,t2.Ecircumflex=667,t2.adieresis=556,t2.edieresis=556,t2.cacute=556,t2.nacute=611,t2.umacron=611,t2.Ncaron=722,t2.Iacute=278,t2.plusminus=584,t2.brokenbar=280,t2.registered=737,t2.Gbreve=778,t2.Idotaccent=278,t2.summation=600,t2.Egrave=667,t2.racute=389,t2.omacron=611,t2.Zacute=611,t2.Zcaron=611,t2.greaterequal=549,t2.Eth=722,t2.Ccedilla=722,t2.lcommaaccent=278,t2.tcaron=389,t2.eogonek=556,t2.Uogonek=722,t2.Aacute=722,t2.Adieresis=722,t2.egrave=556,t2.zacute=500,t2.iogonek=278,t2.Oacute=778,t2.oacute=611,t2.amacron=556,t2.sacute=556,t2.idieresis=278,t2.Ocircumflex=778,t2.Ugrave=722,t2.Delta=612,t2.thorn=611,t2.twosuperior=333,t2.Odieresis=778,t2.mu=611,t2.igrave=278,t2.ohungarumlaut=611,t2.Eogonek=667,t2.dcroat=611,t2.threequarters=834,t2.Scedilla=667,t2.lcaron=400,t2.Kcommaaccent=722,t2.Lacute=611,t2.trademark=1e3,t2.edotaccent=556,t2.Igrave=278,t2.Imacron=278,t2.Lcaron=611,t2.onehalf=834,t2.lessequal=549,t2.ocircumflex=611,t2.ntilde=611,t2.Uhungarumlaut=722,t2.Eacute=667,t2.emacron=556,t2.gbreve=611,t2.onequarter=834,t2.Scaron=667,t2.Scommaaccent=667,t2.Ohungarumlaut=778,t2.degree=400,t2.ograve=611,t2.Ccaron=722,t2.ugrave=611,t2.radical=549,t2.Dcaron=722,t2.rcommaaccent=389,t2.Ntilde=722,t2.otilde=611,t2.Rcommaaccent=722,t2.Lcommaaccent=611,t2.Atilde=722,t2.Aogonek=722,t2.Aring=722,t2.Otilde=778,t2.zdotaccent=500,t2.Ecaron=667,t2.Iogonek=278,t2.kcommaaccent=556,t2.minus=584,t2.Icircumflex=278,t2.ncaron=611,t2.tcommaaccent=333,t2.logicalnot=584,t2.odieresis=611,t2.udieresis=611,t2.notequal=549,t2.gcommaaccent=611,t2.eth=611,t2.zcaron=500,t2.ncommaaccent=611,t2.onesuperior=333,t2.imacron=278,t2.Euro=556}),t["Helvetica-Oblique"]=(0,_core_utils.getLookupTableFactory)(function(t2){t2.space=278,t2.exclam=278,t2.quotedbl=355,t2.numbersign=556,t2.dollar=556,t2.percent=889,t2.ampersand=667,t2.quoteright=222,t2.parenleft=333,t2.parenright=333,t2.asterisk=389,t2.plus=584,t2.comma=278,t2.hyphen=333,t2.period=278,t2.slash=278,t2.zero=556,t2.one=556,t2.two=556,t2.three=556,t2.four=556,t2.five=556,t2.six=556,t2.seven=556,t2.eight=556,t2.nine=556,t2.colon=278,t2.semicolon=278,t2.less=584,t2.equal=584,t2.greater=584,t2.question=556,t2.at=1015,t2.A=667,t2.B=667,t2.C=722,t2.D=722,t2.E=667,t2.F=611,t2.G=778,t2.H=722,t2.I=278,t2.J=500,t2.K=667,t2.L=556,t2.M=833,t2.N=722,t2.O=778,t2.P=667,t2.Q=778,t2.R=722,t2.S=667,t2.T=611,t2.U=722,t2.V=667,t2.W=944,t2.X=667,t2.Y=667,t2.Z=611,t2.bracketleft=278,t2.backslash=278,t2.bracketright=278,t2.asciicircum=469,t2.underscore=556,t2.quoteleft=222,t2.a=556,t2.b=556,t2.c=500,t2.d=556,t2.e=556,t2.f=278,t2.g=556,t2.h=556,t2.i=222,t2.j=222,t2.k=500,t2.l=222,t2.m=833,t2.n=556,t2.o=556,t2.p=556,t2.q=556,t2.r=333,t2.s=500,t2.t=278,t2.u=556,t2.v=500,t2.w=722,t2.x=500,t2.y=500,t2.z=500,t2.braceleft=334,t2.bar=260,t2.braceright=334,t2.asciitilde=584,t2.exclamdown=333,t2.cent=556,t2.sterling=556,t2.fraction=167,t2.yen=556,t2.florin=556,t2.section=556,t2.currency=556,t2.quotesingle=191,t2.quotedblleft=333,t2.guillemotleft=556,t2.guilsinglleft=333,t2.guilsinglright=333,t2.fi=500,t2.fl=500,t2.endash=556,t2.dagger=556,t2.daggerdbl=556,t2.periodcentered=278,t2.paragraph=537,t2.bullet=350,t2.quotesinglbase=222,t2.quotedblbase=333,t2.quotedblright=333,t2.guillemotright=556,t2.ellipsis=1e3,t2.perthousand=1e3,t2.questiondown=611,t2.grave=333,t2.acute=333,t2.circumflex=333,t2.tilde=333,t2.macron=333,t2.breve=333,t2.dotaccent=333,t2.dieresis=333,t2.ring=333,t2.cedilla=333,t2.hungarumlaut=333,t2.ogonek=333,t2.caron=333,t2.emdash=1e3,t2.AE=1e3,t2.ordfeminine=370,t2.Lslash=556,t2.Oslash=778,t2.OE=1e3,t2.ordmasculine=365,t2.ae=889,t2.dotlessi=278,t2.lslash=222,t2.oslash=611,t2.oe=944,t2.germandbls=611,t2.Idieresis=278,t2.eacute=556,t2.abreve=556,t2.uhungarumlaut=556,t2.ecaron=556,t2.Ydieresis=667,t2.divide=584,t2.Yacute=667,t2.Acircumflex=667,t2.aacute=556,t2.Ucircumflex=722,t2.yacute=500,t2.scommaaccent=500,t2.ecircumflex=556,t2.Uring=722,t2.Udieresis=722,t2.aogonek=556,t2.Uacute=722,t2.uogonek=556,t2.Edieresis=667,t2.Dcroat=722,t2.commaaccent=250,t2.copyright=737,t2.Emacron=667,t2.ccaron=500,t2.aring=556,t2.Ncommaaccent=722,t2.lacute=222,t2.agrave=556,t2.Tcommaaccent=611,t2.Cacute=722,t2.atilde=556,t2.Edotaccent=667,t2.scaron=500,t2.scedilla=500,t2.iacute=278,t2.lozenge=471,t2.Rcaron=722,t2.Gcommaaccent=778,t2.ucircumflex=556,t2.acircumflex=556,t2.Amacron=667,t2.rcaron=333,t2.ccedilla=500,t2.Zdotaccent=611,t2.Thorn=667,t2.Omacron=778,t2.Racute=722,t2.Sacute=667,t2.dcaron=643,t2.Umacron=722,t2.uring=556,t2.threesuperior=333,t2.Ograve=778,t2.Agrave=667,t2.Abreve=667,t2.multiply=584,t2.uacute=556,t2.Tcaron=611,t2.partialdiff=476,t2.ydieresis=500,t2.Nacute=722,t2.icircumflex=278,t2.Ecircumflex=667,t2.adieresis=556,t2.edieresis=556,t2.cacute=500,t2.nacute=556,t2.umacron=556,t2.Ncaron=722,t2.Iacute=278,t2.plusminus=584,t2.brokenbar=260,t2.registered=737,t2.Gbreve=778,t2.Idotaccent=278,t2.summation=600,t2.Egrave=667,t2.racute=333,t2.omacron=556,t2.Zacute=611,t2.Zcaron=611,t2.greaterequal=549,t2.Eth=722,t2.Ccedilla=722,t2.lcommaaccent=222,t2.tcaron=317,t2.eogonek=556,t2.Uogonek=722,t2.Aacute=667,t2.Adieresis=667,t2.egrave=556,t2.zacute=500,t2.iogonek=222,t2.Oacute=778,t2.oacute=556,t2.amacron=556,t2.sacute=500,t2.idieresis=278,t2.Ocircumflex=778,t2.Ugrave=722,t2.Delta=612,t2.thorn=556,t2.twosuperior=333,t2.Odieresis=778,t2.mu=556,t2.igrave=278,t2.ohungarumlaut=556,t2.Eogonek=667,t2.dcroat=556,t2.threequarters=834,t2.Scedilla=667,t2.lcaron=299,t2.Kcommaaccent=667,t2.Lacute=556,t2.trademark=1e3,t2.edotaccent=556,t2.Igrave=278,t2.Imacron=278,t2.Lcaron=556,t2.onehalf=834,t2.lessequal=549,t2.ocircumflex=556,t2.ntilde=556,t2.Uhungarumlaut=722,t2.Eacute=667,t2.emacron=556,t2.gbreve=556,t2.onequarter=834,t2.Scaron=667,t2.Scommaaccent=667,t2.Ohungarumlaut=778,t2.degree=400,t2.ograve=556,t2.Ccaron=722,t2.ugrave=556,t2.radical=453,t2.Dcaron=722,t2.rcommaaccent=333,t2.Ntilde=722,t2.otilde=556,t2.Rcommaaccent=722,t2.Lcommaaccent=556,t2.Atilde=667,t2.Aogonek=667,t2.Aring=667,t2.Otilde=778,t2.zdotaccent=500,t2.Ecaron=667,t2.Iogonek=278,t2.kcommaaccent=500,t2.minus=584,t2.Icircumflex=278,t2.ncaron=556,t2.tcommaaccent=278,t2.logicalnot=584,t2.odieresis=556,t2.udieresis=556,t2.notequal=549,t2.gcommaaccent=556,t2.eth=556,t2.zcaron=500,t2.ncommaaccent=556,t2.onesuperior=333,t2.imacron=278,t2.Euro=556}),t.Symbol=(0,_core_utils.getLookupTableFactory)(function(t2){t2.space=250,t2.exclam=333,t2.universal=713,t2.numbersign=500,t2.existential=549,t2.percent=833,t2.ampersand=778,t2.suchthat=439,t2.parenleft=333,t2.parenright=333,t2.asteriskmath=500,t2.plus=549,t2.comma=250,t2.minus=549,t2.period=250,t2.slash=278,t2.zero=500,t2.one=500,t2.two=500,t2.three=500,t2.four=500,t2.five=500,t2.six=500,t2.seven=500,t2.eight=500,t2.nine=500,t2.colon=278,t2.semicolon=278,t2.less=549,t2.equal=549,t2.greater=549,t2.question=444,t2.congruent=549,t2.Alpha=722,t2.Beta=667,t2.Chi=722,t2.Delta=612,t2.Epsilon=611,t2.Phi=763,t2.Gamma=603,t2.Eta=722,t2.Iota=333,t2.theta1=631,t2.Kappa=722,t2.Lambda=686,t2.Mu=889,t2.Nu=722,t2.Omicron=722,t2.Pi=768,t2.Theta=741,t2.Rho=556,t2.Sigma=592,t2.Tau=611,t2.Upsilon=690,t2.sigma1=439,t2.Omega=768,t2.Xi=645,t2.Psi=795,t2.Zeta=611,t2.bracketleft=333,t2.therefore=863,t2.bracketright=333,t2.perpendicular=658,t2.underscore=500,t2.radicalex=500,t2.alpha=631,t2.beta=549,t2.chi=549,t2.delta=494,t2.epsilon=439,t2.phi=521,t2.gamma=411,t2.eta=603,t2.iota=329,t2.phi1=603,t2.kappa=549,t2.lambda=549,t2.mu=576,t2.nu=521,t2.omicron=549,t2.pi=549,t2.theta=521,t2.rho=549,t2.sigma=603,t2.tau=439,t2.upsilon=576,t2.omega1=713,t2.omega=686,t2.xi=493,t2.psi=686,t2.zeta=494,t2.braceleft=480,t2.bar=200,t2.braceright=480,t2.similar=549,t2.Euro=750,t2.Upsilon1=620,t2.minute=247,t2.lessequal=549,t2.fraction=167,t2.infinity=713,t2.florin=500,t2.club=753,t2.diamond=753,t2.heart=753,t2.spade=753,t2.arrowboth=1042,t2.arrowleft=987,t2.arrowup=603,t2.arrowright=987,t2.arrowdown=603,t2.degree=400,t2.plusminus=549,t2.second=411,t2.greaterequal=549,t2.multiply=549,t2.proportional=713,t2.partialdiff=494,t2.bullet=460,t2.divide=549,t2.notequal=549,t2.equivalence=549,t2.approxequal=549,t2.ellipsis=1e3,t2.arrowvertex=603,t2.arrowhorizex=1e3,t2.carriagereturn=658,t2.aleph=823,t2.Ifraktur=686,t2.Rfraktur=795,t2.weierstrass=987,t2.circlemultiply=768,t2.circleplus=768,t2.emptyset=823,t2.intersection=768,t2.union=768,t2.propersuperset=713,t2.reflexsuperset=713,t2.notsubset=713,t2.propersubset=713,t2.reflexsubset=713,t2.element=713,t2.notelement=713,t2.angle=768,t2.gradient=713,t2.registerserif=790,t2.copyrightserif=790,t2.trademarkserif=890,t2.product=823,t2.radical=549,t2.dotmath=250,t2.logicalnot=713,t2.logicaland=603,t2.logicalor=603,t2.arrowdblboth=1042,t2.arrowdblleft=987,t2.arrowdblup=603,t2.arrowdblright=987,t2.arrowdbldown=603,t2.lozenge=494,t2.angleleft=329,t2.registersans=790,t2.copyrightsans=790,t2.trademarksans=786,t2.summation=713,t2.parenlefttp=384,t2.parenleftex=384,t2.parenleftbt=384,t2.bracketlefttp=384,t2.bracketleftex=384,t2.bracketleftbt=384,t2.bracelefttp=494,t2.braceleftmid=494,t2.braceleftbt=494,t2.braceex=494,t2.angleright=329,t2.integral=274,t2.integraltp=686,t2.integralex=686,t2.integralbt=686,t2.parenrighttp=384,t2.parenrightex=384,t2.parenrightbt=384,t2.bracketrighttp=384,t2.bracketrightex=384,t2.bracketrightbt=384,t2.bracerighttp=494,t2.bracerightmid=494,t2.bracerightbt=494,t2.apple=790}),t["Times-Roman"]=(0,_core_utils.getLookupTableFactory)(function(t2){t2.space=250,t2.exclam=333,t2.quotedbl=408,t2.numbersign=500,t2.dollar=500,t2.percent=833,t2.ampersand=778,t2.quoteright=333,t2.parenleft=333,t2.parenright=333,t2.asterisk=500,t2.plus=564,t2.comma=250,t2.hyphen=333,t2.period=250,t2.slash=278,t2.zero=500,t2.one=500,t2.two=500,t2.three=500,t2.four=500,t2.five=500,t2.six=500,t2.seven=500,t2.eight=500,t2.nine=500,t2.colon=278,t2.semicolon=278,t2.less=564,t2.equal=564,t2.greater=564,t2.question=444,t2.at=921,t2.A=722,t2.B=667,t2.C=667,t2.D=722,t2.E=611,t2.F=556,t2.G=722,t2.H=722,t2.I=333,t2.J=389,t2.K=722,t2.L=611,t2.M=889,t2.N=722,t2.O=722,t2.P=556,t2.Q=722,t2.R=667,t2.S=556,t2.T=611,t2.U=722,t2.V=722,t2.W=944,t2.X=722,t2.Y=722,t2.Z=611,t2.bracketleft=333,t2.backslash=278,t2.bracketright=333,t2.asciicircum=469,t2.underscore=500,t2.quoteleft=333,t2.a=444,t2.b=500,t2.c=444,t2.d=500,t2.e=444,t2.f=333,t2.g=500,t2.h=500,t2.i=278,t2.j=278,t2.k=500,t2.l=278,t2.m=778,t2.n=500,t2.o=500,t2.p=500,t2.q=500,t2.r=333,t2.s=389,t2.t=278,t2.u=500,t2.v=500,t2.w=722,t2.x=500,t2.y=500,t2.z=444,t2.braceleft=480,t2.bar=200,t2.braceright=480,t2.asciitilde=541,t2.exclamdown=333,t2.cent=500,t2.sterling=500,t2.fraction=167,t2.yen=500,t2.florin=500,t2.section=500,t2.currency=500,t2.quotesingle=180,t2.quotedblleft=444,t2.guillemotleft=500,t2.guilsinglleft=333,t2.guilsinglright=333,t2.fi=556,t2.fl=556,t2.endash=500,t2.dagger=500,t2.daggerdbl=500,t2.periodcentered=250,t2.paragraph=453,t2.bullet=350,t2.quotesinglbase=333,t2.quotedblbase=444,t2.quotedblright=444,t2.guillemotright=500,t2.ellipsis=1e3,t2.perthousand=1e3,t2.questiondown=444,t2.grave=333,t2.acute=333,t2.circumflex=333,t2.tilde=333,t2.macron=333,t2.breve=333,t2.dotaccent=333,t2.dieresis=333,t2.ring=333,t2.cedilla=333,t2.hungarumlaut=333,t2.ogonek=333,t2.caron=333,t2.emdash=1e3,t2.AE=889,t2.ordfeminine=276,t2.Lslash=611,t2.Oslash=722,t2.OE=889,t2.ordmasculine=310,t2.ae=667,t2.dotlessi=278,t2.lslash=278,t2.oslash=500,t2.oe=722,t2.germandbls=500,t2.Idieresis=333,t2.eacute=444,t2.abreve=444,t2.uhungarumlaut=500,t2.ecaron=444,t2.Ydieresis=722,t2.divide=564,t2.Yacute=722,t2.Acircumflex=722,t2.aacute=444,t2.Ucircumflex=722,t2.yacute=500,t2.scommaaccent=389,t2.ecircumflex=444,t2.Uring=722,t2.Udieresis=722,t2.aogonek=444,t2.Uacute=722,t2.uogonek=500,t2.Edieresis=611,t2.Dcroat=722,t2.commaaccent=250,t2.copyright=760,t2.Emacron=611,t2.ccaron=444,t2.aring=444,t2.Ncommaaccent=722,t2.lacute=278,t2.agrave=444,t2.Tcommaaccent=611,t2.Cacute=667,t2.atilde=444,t2.Edotaccent=611,t2.scaron=389,t2.scedilla=389,t2.iacute=278,t2.lozenge=471,t2.Rcaron=667,t2.Gcommaaccent=722,t2.ucircumflex=500,t2.acircumflex=444,t2.Amacron=722,t2.rcaron=333,t2.ccedilla=444,t2.Zdotaccent=611,t2.Thorn=556,t2.Omacron=722,t2.Racute=667,t2.Sacute=556,t2.dcaron=588,t2.Umacron=722,t2.uring=500,t2.threesuperior=300,t2.Ograve=722,t2.Agrave=722,t2.Abreve=722,t2.multiply=564,t2.uacute=500,t2.Tcaron=611,t2.partialdiff=476,t2.ydieresis=500,t2.Nacute=722,t2.icircumflex=278,t2.Ecircumflex=611,t2.adieresis=444,t2.edieresis=444,t2.cacute=444,t2.nacute=500,t2.umacron=500,t2.Ncaron=722,t2.Iacute=333,t2.plusminus=564,t2.brokenbar=200,t2.registered=760,t2.Gbreve=722,t2.Idotaccent=333,t2.summation=600,t2.Egrave=611,t2.racute=333,t2.omacron=500,t2.Zacute=611,t2.Zcaron=611,t2.greaterequal=549,t2.Eth=722,t2.Ccedilla=667,t2.lcommaaccent=278,t2.tcaron=326,t2.eogonek=444,t2.Uogonek=722,t2.Aacute=722,t2.Adieresis=722,t2.egrave=444,t2.zacute=444,t2.iogonek=278,t2.Oacute=722,t2.oacute=500,t2.amacron=444,t2.sacute=389,t2.idieresis=278,t2.Ocircumflex=722,t2.Ugrave=722,t2.Delta=612,t2.thorn=500,t2.twosuperior=300,t2.Odieresis=722,t2.mu=500,t2.igrave=278,t2.ohungarumlaut=500,t2.Eogonek=611,t2.dcroat=500,t2.threequarters=750,t2.Scedilla=556,t2.lcaron=344,t2.Kcommaaccent=722,t2.Lacute=611,t2.trademark=980,t2.edotaccent=444,t2.Igrave=333,t2.Imacron=333,t2.Lcaron=611,t2.onehalf=750,t2.lessequal=549,t2.ocircumflex=500,t2.ntilde=500,t2.Uhungarumlaut=722,t2.Eacute=611,t2.emacron=444,t2.gbreve=500,t2.onequarter=750,t2.Scaron=556,t2.Scommaaccent=556,t2.Ohungarumlaut=722,t2.degree=400,t2.ograve=500,t2.Ccaron=667,t2.ugrave=500,t2.radical=453,t2.Dcaron=722,t2.rcommaaccent=333,t2.Ntilde=722,t2.otilde=500,t2.Rcommaaccent=667,t2.Lcommaaccent=611,t2.Atilde=722,t2.Aogonek=722,t2.Aring=722,t2.Otilde=722,t2.zdotaccent=444,t2.Ecaron=611,t2.Iogonek=333,t2.kcommaaccent=500,t2.minus=564,t2.Icircumflex=333,t2.ncaron=500,t2.tcommaaccent=278,t2.logicalnot=564,t2.odieresis=500,t2.udieresis=500,t2.notequal=549,t2.gcommaaccent=500,t2.eth=500,t2.zcaron=444,t2.ncommaaccent=500,t2.onesuperior=300,t2.imacron=278,t2.Euro=500}),t["Times-Bold"]=(0,_core_utils.getLookupTableFactory)(function(t2){t2.space=250,t2.exclam=333,t2.quotedbl=555,t2.numbersign=500,t2.dollar=500,t2.percent=1e3,t2.ampersand=833,t2.quoteright=333,t2.parenleft=333,t2.parenright=333,t2.asterisk=500,t2.plus=570,t2.comma=250,t2.hyphen=333,t2.period=250,t2.slash=278,t2.zero=500,t2.one=500,t2.two=500,t2.three=500,t2.four=500,t2.five=500,t2.six=500,t2.seven=500,t2.eight=500,t2.nine=500,t2.colon=333,t2.semicolon=333,t2.less=570,t2.equal=570,t2.greater=570,t2.question=500,t2.at=930,t2.A=722,t2.B=667,t2.C=722,t2.D=722,t2.E=667,t2.F=611,t2.G=778,t2.H=778,t2.I=389,t2.J=500,t2.K=778,t2.L=667,t2.M=944,t2.N=722,t2.O=778,t2.P=611,t2.Q=778,t2.R=722,t2.S=556,t2.T=667,t2.U=722,t2.V=722,t2.W=1e3,t2.X=722,t2.Y=722,t2.Z=667,t2.bracketleft=333,t2.backslash=278,t2.bracketright=333,t2.asciicircum=581,t2.underscore=500,t2.quoteleft=333,t2.a=500,t2.b=556,t2.c=444,t2.d=556,t2.e=444,t2.f=333,t2.g=500,t2.h=556,t2.i=278,t2.j=333,t2.k=556,t2.l=278,t2.m=833,t2.n=556,t2.o=500,t2.p=556,t2.q=556,t2.r=444,t2.s=389,t2.t=333,t2.u=556,t2.v=500,t2.w=722,t2.x=500,t2.y=500,t2.z=444,t2.braceleft=394,t2.bar=220,t2.braceright=394,t2.asciitilde=520,t2.exclamdown=333,t2.cent=500,t2.sterling=500,t2.fraction=167,t2.yen=500,t2.florin=500,t2.section=500,t2.currency=500,t2.quotesingle=278,t2.quotedblleft=500,t2.guillemotleft=500,t2.guilsinglleft=333,t2.guilsinglright=333,t2.fi=556,t2.fl=556,t2.endash=500,t2.dagger=500,t2.daggerdbl=500,t2.periodcentered=250,t2.paragraph=540,t2.bullet=350,t2.quotesinglbase=333,t2.quotedblbase=500,t2.quotedblright=500,t2.guillemotright=500,t2.ellipsis=1e3,t2.perthousand=1e3,t2.questiondown=500,t2.grave=333,t2.acute=333,t2.circumflex=333,t2.tilde=333,t2.macron=333,t2.breve=333,t2.dotaccent=333,t2.dieresis=333,t2.ring=333,t2.cedilla=333,t2.hungarumlaut=333,t2.ogonek=333,t2.caron=333,t2.emdash=1e3,t2.AE=1e3,t2.ordfeminine=300,t2.Lslash=667,t2.Oslash=778,t2.OE=1e3,t2.ordmasculine=330,t2.ae=722,t2.dotlessi=278,t2.lslash=278,t2.oslash=500,t2.oe=722,t2.germandbls=556,t2.Idieresis=389,t2.eacute=444,t2.abreve=500,t2.uhungarumlaut=556,t2.ecaron=444,t2.Ydieresis=722,t2.divide=570,t2.Yacute=722,t2.Acircumflex=722,t2.aacute=500,t2.Ucircumflex=722,t2.yacute=500,t2.scommaaccent=389,t2.ecircumflex=444,t2.Uring=722,t2.Udieresis=722,t2.aogonek=500,t2.Uacute=722,t2.uogonek=556,t2.Edieresis=667,t2.Dcroat=722,t2.commaaccent=250,t2.copyright=747,t2.Emacron=667,t2.ccaron=444,t2.aring=500,t2.Ncommaaccent=722,t2.lacute=278,t2.agrave=500,t2.Tcommaaccent=667,t2.Cacute=722,t2.atilde=500,t2.Edotaccent=667,t2.scaron=389,t2.scedilla=389,t2.iacute=278,t2.lozenge=494,t2.Rcaron=722,t2.Gcommaaccent=778,t2.ucircumflex=556,t2.acircumflex=500,t2.Amacron=722,t2.rcaron=444,t2.ccedilla=444,t2.Zdotaccent=667,t2.Thorn=611,t2.Omacron=778,t2.Racute=722,t2.Sacute=556,t2.dcaron=672,t2.Umacron=722,t2.uring=556,t2.threesuperior=300,t2.Ograve=778,t2.Agrave=722,t2.Abreve=722,t2.multiply=570,t2.uacute=556,t2.Tcaron=667,t2.partialdiff=494,t2.ydieresis=500,t2.Nacute=722,t2.icircumflex=278,t2.Ecircumflex=667,t2.adieresis=500,t2.edieresis=444,t2.cacute=444,t2.nacute=556,t2.umacron=556,t2.Ncaron=722,t2.Iacute=389,t2.plusminus=570,t2.brokenbar=220,t2.registered=747,t2.Gbreve=778,t2.Idotaccent=389,t2.summation=600,t2.Egrave=667,t2.racute=444,t2.omacron=500,t2.Zacute=667,t2.Zcaron=667,t2.greaterequal=549,t2.Eth=722,t2.Ccedilla=722,t2.lcommaaccent=278,t2.tcaron=416,t2.eogonek=444,t2.Uogonek=722,t2.Aacute=722,t2.Adieresis=722,t2.egrave=444,t2.zacute=444,t2.iogonek=278,t2.Oacute=778,t2.oacute=500,t2.amacron=500,t2.sacute=389,t2.idieresis=278,t2.Ocircumflex=778,t2.Ugrave=722,t2.Delta=612,t2.thorn=556,t2.twosuperior=300,t2.Odieresis=778,t2.mu=556,t2.igrave=278,t2.ohungarumlaut=500,t2.Eogonek=667,t2.dcroat=556,t2.threequarters=750,t2.Scedilla=556,t2.lcaron=394,t2.Kcommaaccent=778,t2.Lacute=667,t2.trademark=1e3,t2.edotaccent=444,t2.Igrave=389,t2.Imacron=389,t2.Lcaron=667,t2.onehalf=750,t2.lessequal=549,t2.ocircumflex=500,t2.ntilde=556,t2.Uhungarumlaut=722,t2.Eacute=667,t2.emacron=444,t2.gbreve=500,t2.onequarter=750,t2.Scaron=556,t2.Scommaaccent=556,t2.Ohungarumlaut=778,t2.degree=400,t2.ograve=500,t2.Ccaron=722,t2.ugrave=556,t2.radical=549,t2.Dcaron=722,t2.rcommaaccent=444,t2.Ntilde=722,t2.otilde=500,t2.Rcommaaccent=722,t2.Lcommaaccent=667,t2.Atilde=722,t2.Aogonek=722,t2.Aring=722,t2.Otilde=778,t2.zdotaccent=444,t2.Ecaron=667,t2.Iogonek=389,t2.kcommaaccent=556,t2.minus=570,t2.Icircumflex=389,t2.ncaron=556,t2.tcommaaccent=333,t2.logicalnot=570,t2.odieresis=500,t2.udieresis=556,t2.notequal=549,t2.gcommaaccent=500,t2.eth=500,t2.zcaron=444,t2.ncommaaccent=556,t2.onesuperior=300,t2.imacron=278,t2.Euro=500}),t["Times-BoldItalic"]=(0,_core_utils.getLookupTableFactory)(function(t2){t2.space=250,t2.exclam=389,t2.quotedbl=555,t2.numbersign=500,t2.dollar=500,t2.percent=833,t2.ampersand=778,t2.quoteright=333,t2.parenleft=333,t2.parenright=333,t2.asterisk=500,t2.plus=570,t2.comma=250,t2.hyphen=333,t2.period=250,t2.slash=278,t2.zero=500,t2.one=500,t2.two=500,t2.three=500,t2.four=500,t2.five=500,t2.six=500,t2.seven=500,t2.eight=500,t2.nine=500,t2.colon=333,t2.semicolon=333,t2.less=570,t2.equal=570,t2.greater=570,t2.question=500,t2.at=832,t2.A=667,t2.B=667,t2.C=667,t2.D=722,t2.E=667,t2.F=667,t2.G=722,t2.H=778,t2.I=389,t2.J=500,t2.K=667,t2.L=611,t2.M=889,t2.N=722,t2.O=722,t2.P=611,t2.Q=722,t2.R=667,t2.S=556,t2.T=611,t2.U=722,t2.V=667,t2.W=889,t2.X=667,t2.Y=611,t2.Z=611,t2.bracketleft=333,t2.backslash=278,t2.bracketright=333,t2.asciicircum=570,t2.underscore=500,t2.quoteleft=333,t2.a=500,t2.b=500,t2.c=444,t2.d=500,t2.e=444,t2.f=333,t2.g=500,t2.h=556,t2.i=278,t2.j=278,t2.k=500,t2.l=278,t2.m=778,t2.n=556,t2.o=500,t2.p=500,t2.q=500,t2.r=389,t2.s=389,t2.t=278,t2.u=556,t2.v=444,t2.w=667,t2.x=500,t2.y=444,t2.z=389,t2.braceleft=348,t2.bar=220,t2.braceright=348,t2.asciitilde=570,t2.exclamdown=389,t2.cent=500,t2.sterling=500,t2.fraction=167,t2.yen=500,t2.florin=500,t2.section=500,t2.currency=500,t2.quotesingle=278,t2.quotedblleft=500,t2.guillemotleft=500,t2.guilsinglleft=333,t2.guilsinglright=333,t2.fi=556,t2.fl=556,t2.endash=500,t2.dagger=500,t2.daggerdbl=500,t2.periodcentered=250,t2.paragraph=500,t2.bullet=350,t2.quotesinglbase=333,t2.quotedblbase=500,t2.quotedblright=500,t2.guillemotright=500,t2.ellipsis=1e3,t2.perthousand=1e3,t2.questiondown=500,t2.grave=333,t2.acute=333,t2.circumflex=333,t2.tilde=333,t2.macron=333,t2.breve=333,t2.dotaccent=333,t2.dieresis=333,t2.ring=333,t2.cedilla=333,t2.hungarumlaut=333,t2.ogonek=333,t2.caron=333,t2.emdash=1e3,t2.AE=944,t2.ordfeminine=266,t2.Lslash=611,t2.Oslash=722,t2.OE=944,t2.ordmasculine=300,t2.ae=722,t2.dotlessi=278,t2.lslash=278,t2.oslash=500,t2.oe=722,t2.germandbls=500,t2.Idieresis=389,t2.eacute=444,t2.abreve=500,t2.uhungarumlaut=556,t2.ecaron=444,t2.Ydieresis=611,t2.divide=570,t2.Yacute=611,t2.Acircumflex=667,t2.aacute=500,t2.Ucircumflex=722,t2.yacute=444,t2.scommaaccent=389,t2.ecircumflex=444,t2.Uring=722,t2.Udieresis=722,t2.aogonek=500,t2.Uacute=722,t2.uogonek=556,t2.Edieresis=667,t2.Dcroat=722,t2.commaaccent=250,t2.copyright=747,t2.Emacron=667,t2.ccaron=444,t2.aring=500,t2.Ncommaaccent=722,t2.lacute=278,t2.agrave=500,t2.Tcommaaccent=611,t2.Cacute=667,t2.atilde=500,t2.Edotaccent=667,t2.scaron=389,t2.scedilla=389,t2.iacute=278,t2.lozenge=494,t2.Rcaron=667,t2.Gcommaaccent=722,t2.ucircumflex=556,t2.acircumflex=500,t2.Amacron=667,t2.rcaron=389,t2.ccedilla=444,t2.Zdotaccent=611,t2.Thorn=611,t2.Omacron=722,t2.Racute=667,t2.Sacute=556,t2.dcaron=608,t2.Umacron=722,t2.uring=556,t2.threesuperior=300,t2.Ograve=722,t2.Agrave=667,t2.Abreve=667,t2.multiply=570,t2.uacute=556,t2.Tcaron=611,t2.partialdiff=494,t2.ydieresis=444,t2.Nacute=722,t2.icircumflex=278,t2.Ecircumflex=667,t2.adieresis=500,t2.edieresis=444,t2.cacute=444,t2.nacute=556,t2.umacron=556,t2.Ncaron=722,t2.Iacute=389,t2.plusminus=570,t2.brokenbar=220,t2.registered=747,t2.Gbreve=722,t2.Idotaccent=389,t2.summation=600,t2.Egrave=667,t2.racute=389,t2.omacron=500,t2.Zacute=611,t2.Zcaron=611,t2.greaterequal=549,t2.Eth=722,t2.Ccedilla=667,t2.lcommaaccent=278,t2.tcaron=366,t2.eogonek=444,t2.Uogonek=722,t2.Aacute=667,t2.Adieresis=667,t2.egrave=444,t2.zacute=389,t2.iogonek=278,t2.Oacute=722,t2.oacute=500,t2.amacron=500,t2.sacute=389,t2.idieresis=278,t2.Ocircumflex=722,t2.Ugrave=722,t2.Delta=612,t2.thorn=500,t2.twosuperior=300,t2.Odieresis=722,t2.mu=576,t2.igrave=278,t2.ohungarumlaut=500,t2.Eogonek=667,t2.dcroat=500,t2.threequarters=750,t2.Scedilla=556,t2.lcaron=382,t2.Kcommaaccent=667,t2.Lacute=611,t2.trademark=1e3,t2.edotaccent=444,t2.Igrave=389,t2.Imacron=389,t2.Lcaron=611,t2.onehalf=750,t2.lessequal=549,t2.ocircumflex=500,t2.ntilde=556,t2.Uhungarumlaut=722,t2.Eacute=667,t2.emacron=444,t2.gbreve=500,t2.onequarter=750,t2.Scaron=556,t2.Scommaaccent=556,t2.Ohungarumlaut=722,t2.degree=400,t2.ograve=500,t2.Ccaron=667,t2.ugrave=556,t2.radical=549,t2.Dcaron=722,t2.rcommaaccent=389,t2.Ntilde=722,t2.otilde=500,t2.Rcommaaccent=667,t2.Lcommaaccent=611,t2.Atilde=667,t2.Aogonek=667,t2.Aring=667,t2.Otilde=722,t2.zdotaccent=389,t2.Ecaron=667,t2.Iogonek=389,t2.kcommaaccent=500,t2.minus=606,t2.Icircumflex=389,t2.ncaron=556,t2.tcommaaccent=278,t2.logicalnot=606,t2.odieresis=500,t2.udieresis=556,t2.notequal=549,t2.gcommaaccent=500,t2.eth=500,t2.zcaron=389,t2.ncommaaccent=556,t2.onesuperior=300,t2.imacron=278,t2.Euro=500}),t["Times-Italic"]=(0,_core_utils.getLookupTableFactory)(function(t2){t2.space=250,t2.exclam=333,t2.quotedbl=420,t2.numbersign=500,t2.dollar=500,t2.percent=833,t2.ampersand=778,t2.quoteright=333,t2.parenleft=333,t2.parenright=333,t2.asterisk=500,t2.plus=675,t2.comma=250,t2.hyphen=333,t2.period=250,t2.slash=278,t2.zero=500,t2.one=500,t2.two=500,t2.three=500,t2.four=500,t2.five=500,t2.six=500,t2.seven=500,t2.eight=500,t2.nine=500,t2.colon=333,t2.semicolon=333,t2.less=675,t2.equal=675,t2.greater=675,t2.question=500,t2.at=920,t2.A=611,t2.B=611,t2.C=667,t2.D=722,t2.E=611,t2.F=611,t2.G=722,t2.H=722,t2.I=333,t2.J=444,t2.K=667,t2.L=556,t2.M=833,t2.N=667,t2.O=722,t2.P=611,t2.Q=722,t2.R=611,t2.S=500,t2.T=556,t2.U=722,t2.V=611,t2.W=833,t2.X=611,t2.Y=556,t2.Z=556,t2.bracketleft=389,t2.backslash=278,t2.bracketright=389,t2.asciicircum=422,t2.underscore=500,t2.quoteleft=333,t2.a=500,t2.b=500,t2.c=444,t2.d=500,t2.e=444,t2.f=278,t2.g=500,t2.h=500,t2.i=278,t2.j=278,t2.k=444,t2.l=278,t2.m=722,t2.n=500,t2.o=500,t2.p=500,t2.q=500,t2.r=389,t2.s=389,t2.t=278,t2.u=500,t2.v=444,t2.w=667,t2.x=444,t2.y=444,t2.z=389,t2.braceleft=400,t2.bar=275,t2.braceright=400,t2.asciitilde=541,t2.exclamdown=389,t2.cent=500,t2.sterling=500,t2.fraction=167,t2.yen=500,t2.florin=500,t2.section=500,t2.currency=500,t2.quotesingle=214,t2.quotedblleft=556,t2.guillemotleft=500,t2.guilsinglleft=333,t2.guilsinglright=333,t2.fi=500,t2.fl=500,t2.endash=500,t2.dagger=500,t2.daggerdbl=500,t2.periodcentered=250,t2.paragraph=523,t2.bullet=350,t2.quotesinglbase=333,t2.quotedblbase=556,t2.quotedblright=556,t2.guillemotright=500,t2.ellipsis=889,t2.perthousand=1e3,t2.questiondown=500,t2.grave=333,t2.acute=333,t2.circumflex=333,t2.tilde=333,t2.macron=333,t2.breve=333,t2.dotaccent=333,t2.dieresis=333,t2.ring=333,t2.cedilla=333,t2.hungarumlaut=333,t2.ogonek=333,t2.caron=333,t2.emdash=889,t2.AE=889,t2.ordfeminine=276,t2.Lslash=556,t2.Oslash=722,t2.OE=944,t2.ordmasculine=310,t2.ae=667,t2.dotlessi=278,t2.lslash=278,t2.oslash=500,t2.oe=667,t2.germandbls=500,t2.Idieresis=333,t2.eacute=444,t2.abreve=500,t2.uhungarumlaut=500,t2.ecaron=444,t2.Ydieresis=556,t2.divide=675,t2.Yacute=556,t2.Acircumflex=611,t2.aacute=500,t2.Ucircumflex=722,t2.yacute=444,t2.scommaaccent=389,t2.ecircumflex=444,t2.Uring=722,t2.Udieresis=722,t2.aogonek=500,t2.Uacute=722,t2.uogonek=500,t2.Edieresis=611,t2.Dcroat=722,t2.commaaccent=250,t2.copyright=760,t2.Emacron=611,t2.ccaron=444,t2.aring=500,t2.Ncommaaccent=667,t2.lacute=278,t2.agrave=500,t2.Tcommaaccent=556,t2.Cacute=667,t2.atilde=500,t2.Edotaccent=611,t2.scaron=389,t2.scedilla=389,t2.iacute=278,t2.lozenge=471,t2.Rcaron=611,t2.Gcommaaccent=722,t2.ucircumflex=500,t2.acircumflex=500,t2.Amacron=611,t2.rcaron=389,t2.ccedilla=444,t2.Zdotaccent=556,t2.Thorn=611,t2.Omacron=722,t2.Racute=611,t2.Sacute=500,t2.dcaron=544,t2.Umacron=722,t2.uring=500,t2.threesuperior=300,t2.Ograve=722,t2.Agrave=611,t2.Abreve=611,t2.multiply=675,t2.uacute=500,t2.Tcaron=556,t2.partialdiff=476,t2.ydieresis=444,t2.Nacute=667,t2.icircumflex=278,t2.Ecircumflex=611,t2.adieresis=500,t2.edieresis=444,t2.cacute=444,t2.nacute=500,t2.umacron=500,t2.Ncaron=667,t2.Iacute=333,t2.plusminus=675,t2.brokenbar=275,t2.registered=760,t2.Gbreve=722,t2.Idotaccent=333,t2.summation=600,t2.Egrave=611,t2.racute=389,t2.omacron=500,t2.Zacute=556,t2.Zcaron=556,t2.greaterequal=549,t2.Eth=722,t2.Ccedilla=667,t2.lcommaaccent=278,t2.tcaron=300,t2.eogonek=444,t2.Uogonek=722,t2.Aacute=611,t2.Adieresis=611,t2.egrave=444,t2.zacute=389,t2.iogonek=278,t2.Oacute=722,t2.oacute=500,t2.amacron=500,t2.sacute=389,t2.idieresis=278,t2.Ocircumflex=722,t2.Ugrave=722,t2.Delta=612,t2.thorn=500,t2.twosuperior=300,t2.Odieresis=722,t2.mu=500,t2.igrave=278,t2.ohungarumlaut=500,t2.Eogonek=611,t2.dcroat=500,t2.threequarters=750,t2.Scedilla=500,t2.lcaron=300,t2.Kcommaaccent=667,t2.Lacute=556,t2.trademark=980,t2.edotaccent=444,t2.Igrave=333,t2.Imacron=333,t2.Lcaron=611,t2.onehalf=750,t2.lessequal=549,t2.ocircumflex=500,t2.ntilde=500,t2.Uhungarumlaut=722,t2.Eacute=611,t2.emacron=444,t2.gbreve=500,t2.onequarter=750,t2.Scaron=500,t2.Scommaaccent=500,t2.Ohungarumlaut=722,t2.degree=400,t2.ograve=500,t2.Ccaron=667,t2.ugrave=500,t2.radical=453,t2.Dcaron=722,t2.rcommaaccent=389,t2.Ntilde=667,t2.otilde=500,t2.Rcommaaccent=611,t2.Lcommaaccent=556,t2.Atilde=611,t2.Aogonek=611,t2.Aring=611,t2.Otilde=722,t2.zdotaccent=389,t2.Ecaron=611,t2.Iogonek=333,t2.kcommaaccent=444,t2.minus=675,t2.Icircumflex=333,t2.ncaron=500,t2.tcommaaccent=278,t2.logicalnot=675,t2.odieresis=500,t2.udieresis=500,t2.notequal=549,t2.gcommaaccent=500,t2.eth=500,t2.zcaron=389,t2.ncommaaccent=500,t2.onesuperior=300,t2.imacron=278,t2.Euro=500}),t.ZapfDingbats=(0,_core_utils.getLookupTableFactory)(function(t2){t2.space=278,t2.a1=974,t2.a2=961,t2.a202=974,t2.a3=980,t2.a4=719,t2.a5=789,t2.a119=790,t2.a118=791,t2.a117=690,t2.a11=960,t2.a12=939,t2.a13=549,t2.a14=855,t2.a15=911,t2.a16=933,t2.a105=911,t2.a17=945,t2.a18=974,t2.a19=755,t2.a20=846,t2.a21=762,t2.a22=761,t2.a23=571,t2.a24=677,t2.a25=763,t2.a26=760,t2.a27=759,t2.a28=754,t2.a6=494,t2.a7=552,t2.a8=537,t2.a9=577,t2.a10=692,t2.a29=786,t2.a30=788,t2.a31=788,t2.a32=790,t2.a33=793,t2.a34=794,t2.a35=816,t2.a36=823,t2.a37=789,t2.a38=841,t2.a39=823,t2.a40=833,t2.a41=816,t2.a42=831,t2.a43=923,t2.a44=744,t2.a45=723,t2.a46=749,t2.a47=790,t2.a48=792,t2.a49=695,t2.a50=776,t2.a51=768,t2.a52=792,t2.a53=759,t2.a54=707,t2.a55=708,t2.a56=682,t2.a57=701,t2.a58=826,t2.a59=815,t2.a60=789,t2.a61=789,t2.a62=707,t2.a63=687,t2.a64=696,t2.a65=689,t2.a66=786,t2.a67=787,t2.a68=713,t2.a69=791,t2.a70=785,t2.a71=791,t2.a72=873,t2.a73=761,t2.a74=762,t2.a203=762,t2.a75=759,t2.a204=759,t2.a76=892,t2.a77=892,t2.a78=788,t2.a79=784,t2.a81=438,t2.a82=138,t2.a83=277,t2.a84=415,t2.a97=392,t2.a98=392,t2.a99=668,t2.a100=668,t2.a89=390,t2.a90=390,t2.a93=317,t2.a94=317,t2.a91=276,t2.a92=276,t2.a205=509,t2.a85=509,t2.a206=410,t2.a86=410,t2.a87=234,t2.a88=234,t2.a95=334,t2.a96=334,t2.a101=732,t2.a102=544,t2.a103=544,t2.a104=910,t2.a106=667,t2.a107=760,t2.a108=760,t2.a112=776,t2.a111=595,t2.a110=694,t2.a109=626,t2.a120=788,t2.a121=788,t2.a122=788,t2.a123=788,t2.a124=788,t2.a125=788,t2.a126=788,t2.a127=788,t2.a128=788,t2.a129=788,t2.a130=788,t2.a131=788,t2.a132=788,t2.a133=788,t2.a134=788,t2.a135=788,t2.a136=788,t2.a137=788,t2.a138=788,t2.a139=788,t2.a140=788,t2.a141=788,t2.a142=788,t2.a143=788,t2.a144=788,t2.a145=788,t2.a146=788,t2.a147=788,t2.a148=788,t2.a149=788,t2.a150=788,t2.a151=788,t2.a152=788,t2.a153=788,t2.a154=788,t2.a155=788,t2.a156=788,t2.a157=788,t2.a158=788,t2.a159=788,t2.a160=894,t2.a161=838,t2.a163=1016,t2.a164=458,t2.a196=748,t2.a165=924,t2.a192=748,t2.a166=918,t2.a167=927,t2.a168=928,t2.a169=928,t2.a170=834,t2.a171=873,t2.a172=828,t2.a173=924,t2.a162=924,t2.a174=917,t2.a175=930,t2.a176=931,t2.a177=463,t2.a178=883,t2.a179=836,t2.a193=836,t2.a180=867,t2.a199=867,t2.a181=696,t2.a200=696,t2.a182=874,t2.a201=874,t2.a183=760,t2.a184=946,t2.a197=771,t2.a185=865,t2.a194=771,t2.a198=888,t2.a186=967,t2.a195=888,t2.a187=831,t2.a188=873,t2.a189=927,t2.a190=970,t2.a191=918})});exports3.getMetrics=getMetrics;const getFontBasicMetrics=(0,_core_utils.getLookupTableFactory)(function(t){t.Courier={ascent:629,descent:-157,capHeight:562,xHeight:-426},t["Courier-Bold"]={ascent:629,descent:-157,capHeight:562,xHeight:439},t["Courier-Oblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426},t["Courier-BoldOblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426},t.Helvetica={ascent:718,descent:-207,capHeight:718,xHeight:523},t["Helvetica-Bold"]={ascent:718,descent:-207,capHeight:718,xHeight:532},t["Helvetica-Oblique"]={ascent:718,descent:-207,capHeight:718,xHeight:523},t["Helvetica-BoldOblique"]={ascent:718,descent:-207,capHeight:718,xHeight:532},t["Times-Roman"]={ascent:683,descent:-217,capHeight:662,xHeight:450},t["Times-Bold"]={ascent:683,descent:-217,capHeight:676,xHeight:461},t["Times-Italic"]={ascent:683,descent:-217,capHeight:653,xHeight:441},t["Times-BoldItalic"]={ascent:683,descent:-217,capHeight:669,xHeight:462},t.Symbol={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN},t.ZapfDingbats={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN}});exports3.getFontBasicMetrics=getFontBasicMetrics},(__unused_webpack_module2,exports3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.GlyfTable=void 0;const ON_CURVE_POINT=1,X_SHORT_VECTOR=2,Y_SHORT_VECTOR=4,REPEAT_FLAG=8,X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR=16,Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR=32,OVERLAP_SIMPLE=64,ARG_1_AND_2_ARE_WORDS=1,ARGS_ARE_XY_VALUES=2,WE_HAVE_A_SCALE=8,MORE_COMPONENTS=32,WE_HAVE_AN_X_AND_Y_SCALE=64,WE_HAVE_A_TWO_BY_TWO=128,WE_HAVE_INSTRUCTIONS=256,_GlyfTable=class{static{__name2(this,"_GlyfTable")}constructor({glyfTable,isGlyphLocationsLong,locaTable,numGlyphs}){this.glyphs=[];const loca=new DataView(locaTable.buffer,locaTable.byteOffset,locaTable.byteLength),glyf=new DataView(glyfTable.buffer,glyfTable.byteOffset,glyfTable.byteLength),offsetSize=isGlyphLocationsLong?4:2;let prev=isGlyphLocationsLong?loca.getUint32(0):2*loca.getUint16(0),pos=0;for(let i=0;i<numGlyphs;i++){pos+=offsetSize;const next=isGlyphLocationsLong?loca.getUint32(pos):2*loca.getUint16(pos);if(next===prev){this.glyphs.push(new Glyph({}));continue}const glyph=Glyph.parse(prev,glyf);this.glyphs.push(glyph),prev=next}}getSize(){return this.glyphs.reduce((a,g)=>{const size=g.getSize();return a+(size+3&-4)},0)}write(){const totalSize=this.getSize(),glyfTable=new DataView(new ArrayBuffer(totalSize)),isLocationLong=totalSize>131070,offsetSize=isLocationLong?4:2,locaTable=new DataView(new ArrayBuffer((this.glyphs.length+1)*offsetSize));isLocationLong?locaTable.setUint32(0,0):locaTable.setUint16(0,0);let pos=0,locaIndex=0;for(const glyph of this.glyphs)pos+=glyph.write(pos,glyfTable),pos=pos+3&-4,locaIndex+=offsetSize,isLocationLong?locaTable.setUint32(locaIndex,pos):locaTable.setUint16(locaIndex,pos>>1);return{isLocationLong,loca:new Uint8Array(locaTable.buffer),glyf:new Uint8Array(glyfTable.buffer)}}scale(factors){for(let i=0,ii=this.glyphs.length;i<ii;i++)this.glyphs[i].scale(factors[i])}};__name(_GlyfTable,"GlyfTable");let GlyfTable=_GlyfTable;exports3.GlyfTable=GlyfTable;const _Glyph=class _Glyph2{static{__name2(this,"_Glyph")}constructor({header=null,simple=null,composites=null}){this.header=header,this.simple=simple,this.composites=composites}static parse(pos,glyf){const[read,header]=GlyphHeader.parse(pos,glyf);if(pos+=read,header.numberOfContours<0){const composites=[];for(;;){const[n,composite]=CompositeGlyph.parse(pos,glyf);if(pos+=n,composites.push(composite),!(composite.flags&MORE_COMPONENTS))break}return new _Glyph2({header,composites})}const simple=SimpleGlyph.parse(pos,glyf,header.numberOfContours);return new _Glyph2({header,simple})}getSize(){if(!this.header)return 0;const size=this.simple?this.simple.getSize():this.composites.reduce((a,c)=>a+c.getSize(),0);return this.header.getSize()+size}write(pos,buf){if(!this.header)return 0;const spos=pos;if(pos+=this.header.write(pos,buf),this.simple)pos+=this.simple.write(pos,buf);else for(const composite of this.composites)pos+=composite.write(pos,buf);return pos-spos}scale(factor){if(!this.header)return;const xMiddle=(this.header.xMin+this.header.xMax)/2;if(this.header.scale(xMiddle,factor),this.simple)this.simple.scale(xMiddle,factor);else for(const composite of this.composites)composite.scale(xMiddle,factor)}};__name(_Glyph,"Glyph");let Glyph=_Glyph;const _GlyphHeader=class _GlyphHeader2{static{__name2(this,"_GlyphHeader")}constructor({numberOfContours,xMin,yMin,xMax,yMax}){this.numberOfContours=numberOfContours,this.xMin=xMin,this.yMin=yMin,this.xMax=xMax,this.yMax=yMax}static parse(pos,glyf){return[10,new _GlyphHeader2({numberOfContours:glyf.getInt16(pos),xMin:glyf.getInt16(pos+2),yMin:glyf.getInt16(pos+4),xMax:glyf.getInt16(pos+6),yMax:glyf.getInt16(pos+8)})]}getSize(){return 10}write(pos,buf){return buf.setInt16(pos,this.numberOfContours),buf.setInt16(pos+2,this.xMin),buf.setInt16(pos+4,this.yMin),buf.setInt16(pos+6,this.xMax),buf.setInt16(pos+8,this.yMax),10}scale(x,factor){this.xMin=Math.round(x+(this.xMin-x)*factor),this.xMax=Math.round(x+(this.xMax-x)*factor)}};__name(_GlyphHeader,"GlyphHeader");let GlyphHeader=_GlyphHeader;const _Contour=class{static{__name2(this,"_Contour")}constructor({flags,xCoordinates,yCoordinates}){this.xCoordinates=xCoordinates,this.yCoordinates=yCoordinates,this.flags=flags}};__name(_Contour,"Contour");let Contour=_Contour;const _SimpleGlyph=class _SimpleGlyph2{static{__name2(this,"_SimpleGlyph")}constructor({contours,instructions}){this.contours=contours,this.instructions=instructions}static parse(pos,glyf,numberOfContours){const endPtsOfContours=[];for(let i=0;i<numberOfContours;i++){const endPt=glyf.getUint16(pos);pos+=2,endPtsOfContours.push(endPt)}const numberOfPt=endPtsOfContours[numberOfContours-1]+1,instructionLength=glyf.getUint16(pos);pos+=2;const instructions=new Uint8Array(glyf).slice(pos,pos+instructionLength);pos+=instructionLength;const flags=[];for(let i=0;i<numberOfPt;pos++,i++){let flag=glyf.getUint8(pos);if(flags.push(flag),flag&REPEAT_FLAG){const count=glyf.getUint8(++pos);flag^=REPEAT_FLAG;for(let m=0;m<count;m++)flags.push(flag);i+=count}}const allXCoordinates=[];let xCoordinates=[],yCoordinates=[],pointFlags=[];const contours=[];let endPtsOfContoursIndex=0,lastCoordinate=0;for(let i=0;i<numberOfPt;i++){const flag=flags[i];if(flag&X_SHORT_VECTOR){const x=glyf.getUint8(pos++);lastCoordinate+=flag&X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR?x:-x,xCoordinates.push(lastCoordinate)}else flag&X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR||(lastCoordinate+=glyf.getInt16(pos),pos+=2),xCoordinates.push(lastCoordinate);endPtsOfContours[endPtsOfContoursIndex]===i&&(endPtsOfContoursIndex++,allXCoordinates.push(xCoordinates),xCoordinates=[])}lastCoordinate=0,endPtsOfContoursIndex=0;for(let i=0;i<numberOfPt;i++){const flag=flags[i];if(flag&Y_SHORT_VECTOR){const y=glyf.getUint8(pos++);lastCoordinate+=flag&Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR?y:-y,yCoordinates.push(lastCoordinate)}else flag&Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR||(lastCoordinate+=glyf.getInt16(pos),pos+=2),yCoordinates.push(lastCoordinate);pointFlags.push(flag&ON_CURVE_POINT|flag&OVERLAP_SIMPLE),endPtsOfContours[endPtsOfContoursIndex]===i&&(xCoordinates=allXCoordinates[endPtsOfContoursIndex],endPtsOfContoursIndex++,contours.push(new Contour({flags:pointFlags,xCoordinates,yCoordinates})),yCoordinates=[],pointFlags=[])}return new _SimpleGlyph2({contours,instructions})}getSize(){let size=this.contours.length*2+2+this.instructions.length,lastX=0,lastY=0;for(const contour of this.contours){size+=contour.flags.length;for(let i=0,ii=contour.xCoordinates.length;i<ii;i++){const x=contour.xCoordinates[i],y=contour.yCoordinates[i];let abs=Math.abs(x-lastX);abs>255?size+=2:abs>0&&(size+=1),lastX=x,abs=Math.abs(y-lastY),abs>255?size+=2:abs>0&&(size+=1),lastY=y}}return size}write(pos,buf){const spos=pos,xCoordinates=[],yCoordinates=[],flags=[];let lastX=0,lastY=0;for(const contour of this.contours){for(let i=0,ii=contour.xCoordinates.length;i<ii;i++){let flag=contour.flags[i];const x=contour.xCoordinates[i];let delta=x-lastX;if(delta===0)flag|=X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR,xCoordinates.push(0);else{const abs=Math.abs(delta);abs<=255?(flag|=delta>=0?X_SHORT_VECTOR|X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR:X_SHORT_VECTOR,xCoordinates.push(abs)):xCoordinates.push(delta)}lastX=x;const y=contour.yCoordinates[i];if(delta=y-lastY,delta===0)flag|=Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR,yCoordinates.push(0);else{const abs=Math.abs(delta);abs<=255?(flag|=delta>=0?Y_SHORT_VECTOR|Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR:Y_SHORT_VECTOR,yCoordinates.push(abs)):yCoordinates.push(delta)}lastY=y,flags.push(flag)}buf.setUint16(pos,xCoordinates.length-1),pos+=2}buf.setUint16(pos,this.instructions.length),pos+=2,this.instructions.length&&(new Uint8Array(buf.buffer,0,buf.buffer.byteLength).set(this.instructions,pos),pos+=this.instructions.length);for(const flag of flags)buf.setUint8(pos++,flag);for(let i=0,ii=xCoordinates.length;i<ii;i++){const x=xCoordinates[i],flag=flags[i];flag&X_SHORT_VECTOR?buf.setUint8(pos++,x):flag&X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR||(buf.setInt16(pos,x),pos+=2)}for(let i=0,ii=yCoordinates.length;i<ii;i++){const y=yCoordinates[i],flag=flags[i];flag&Y_SHORT_VECTOR?buf.setUint8(pos++,y):flag&Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR||(buf.setInt16(pos,y),pos+=2)}return pos-spos}scale(x,factor){for(const contour of this.contours)if(contour.xCoordinates.length!==0)for(let i=0,ii=contour.xCoordinates.length;i<ii;i++)contour.xCoordinates[i]=Math.round(x+(contour.xCoordinates[i]-x)*factor)}};__name(_SimpleGlyph,"SimpleGlyph");let SimpleGlyph=_SimpleGlyph;const _CompositeGlyph=class _CompositeGlyph2{static{__name2(this,"_CompositeGlyph")}constructor({flags,glyphIndex,argument1,argument2,transf,instructions}){this.flags=flags,this.glyphIndex=glyphIndex,this.argument1=argument1,this.argument2=argument2,this.transf=transf,this.instructions=instructions}static parse(pos,glyf){const spos=pos,transf=[];let flags=glyf.getUint16(pos);const glyphIndex=glyf.getUint16(pos+2);pos+=4;let argument1,argument2;flags&ARG_1_AND_2_ARE_WORDS?(flags&ARGS_ARE_XY_VALUES?(argument1=glyf.getInt16(pos),argument2=glyf.getInt16(pos+2)):(argument1=glyf.getUint16(pos),argument2=glyf.getUint16(pos+2)),pos+=4,flags^=ARG_1_AND_2_ARE_WORDS):(flags&ARGS_ARE_XY_VALUES?(argument1=glyf.getInt8(pos),argument2=glyf.getInt8(pos+1)):(argument1=glyf.getUint8(pos),argument2=glyf.getUint8(pos+1)),pos+=2),flags&WE_HAVE_A_SCALE?(transf.push(glyf.getUint16(pos)),pos+=2):flags&WE_HAVE_AN_X_AND_Y_SCALE?(transf.push(glyf.getUint16(pos),glyf.getUint16(pos+2)),pos+=4):flags&WE_HAVE_A_TWO_BY_TWO&&(transf.push(glyf.getUint16(pos),glyf.getUint16(pos+2),glyf.getUint16(pos+4),glyf.getUint16(pos+6)),pos+=8);let instructions=null;if(flags&WE_HAVE_INSTRUCTIONS){const instructionLength=glyf.getUint16(pos);pos+=2,instructions=new Uint8Array(glyf).slice(pos,pos+instructionLength),pos+=instructionLength}return[pos-spos,new _CompositeGlyph2({flags,glyphIndex,argument1,argument2,transf,instructions})]}getSize(){let size=4+this.transf.length*2;return this.flags&WE_HAVE_INSTRUCTIONS&&(size+=2+this.instructions.length),size+=2,this.flags&2?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(size+=2):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(size+=2),size}write(pos,buf){const spos=pos;return this.flags&ARGS_ARE_XY_VALUES?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(this.flags|=ARG_1_AND_2_ARE_WORDS):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(this.flags|=ARG_1_AND_2_ARE_WORDS),buf.setUint16(pos,this.flags),buf.setUint16(pos+2,this.glyphIndex),pos+=4,this.flags&ARG_1_AND_2_ARE_WORDS?(this.flags&ARGS_ARE_XY_VALUES?(buf.setInt16(pos,this.argument1),buf.setInt16(pos+2,this.argument2)):(buf.setUint16(pos,this.argument1),buf.setUint16(pos+2,this.argument2)),pos+=4):(buf.setUint8(pos,this.argument1),buf.setUint8(pos+1,this.argument2),pos+=2),this.flags&WE_HAVE_INSTRUCTIONS&&(buf.setUint16(pos,this.instructions.length),pos+=2,this.instructions.length&&(new Uint8Array(buf.buffer,0,buf.buffer.byteLength).set(this.instructions,pos),pos+=this.instructions.length)),pos-spos}scale(x,factor){}};__name(_CompositeGlyph,"CompositeGlyph");let CompositeGlyph=_CompositeGlyph},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.OpenTypeFileBuilder=void 0;var _core_utils=__w_pdfjs_require__3(6),_util2=__w_pdfjs_require__3(2);function writeInt16(dest,offset,num){dest[offset]=num>>8&255,dest[offset+1]=num&255}__name2(writeInt16,"writeInt16"),__name(writeInt16,"writeInt16");function writeInt32(dest,offset,num){dest[offset]=num>>24&255,dest[offset+1]=num>>16&255,dest[offset+2]=num>>8&255,dest[offset+3]=num&255}__name2(writeInt32,"writeInt32"),__name(writeInt32,"writeInt32");function writeData(dest,offset,data){if(data instanceof Uint8Array)dest.set(data,offset);else if(typeof data=="string")for(let i=0,ii=data.length;i<ii;i++)dest[offset++]=data.charCodeAt(i)&255;else for(let i=0,ii=data.length;i<ii;i++)dest[offset++]=data[i]&255}__name2(writeData,"writeData"),__name(writeData,"writeData");const OTF_HEADER_SIZE=12,OTF_TABLE_ENTRY_SIZE=16,_OpenTypeFileBuilder=class _OpenTypeFileBuilder2{static{__name2(this,"_OpenTypeFileBuilder")}constructor(sfnt){this.sfnt=sfnt,this.tables=Object.create(null)}static getSearchParams(entriesCount,entrySize){let maxPower2=1,log2=0;for(;(maxPower2^entriesCount)>maxPower2;)maxPower2<<=1,log2++;const searchRange=maxPower2*entrySize;return{range:searchRange,entry:log2,rangeShift:entrySize*entriesCount-searchRange}}toArray(){let sfnt=this.sfnt;const tables=this.tables,tablesNames=Object.keys(tables);tablesNames.sort();const numTables=tablesNames.length;let i,j,jj,table,tableName,offset=OTF_HEADER_SIZE+numTables*OTF_TABLE_ENTRY_SIZE;const tableOffsets=[offset];for(i=0;i<numTables;i++){table=tables[tablesNames[i]];const paddedLength=(table.length+3&-4)>>>0;offset+=paddedLength,tableOffsets.push(offset)}const file=new Uint8Array(offset);for(i=0;i<numTables;i++)table=tables[tablesNames[i]],writeData(file,tableOffsets[i],table);sfnt==="true"&&(sfnt=(0,_util2.string32)(65536)),file[0]=sfnt.charCodeAt(0)&255,file[1]=sfnt.charCodeAt(1)&255,file[2]=sfnt.charCodeAt(2)&255,file[3]=sfnt.charCodeAt(3)&255,writeInt16(file,4,numTables);const searchParams=_OpenTypeFileBuilder2.getSearchParams(numTables,16);for(writeInt16(file,6,searchParams.range),writeInt16(file,8,searchParams.entry),writeInt16(file,10,searchParams.rangeShift),offset=OTF_HEADER_SIZE,i=0;i<numTables;i++){tableName=tablesNames[i],file[offset]=tableName.charCodeAt(0)&255,file[offset+1]=tableName.charCodeAt(1)&255,file[offset+2]=tableName.charCodeAt(2)&255,file[offset+3]=tableName.charCodeAt(3)&255;let checksum=0;for(j=tableOffsets[i],jj=tableOffsets[i+1];j<jj;j+=4){const quad=(0,_core_utils.readUint32)(file,j);checksum=checksum+quad>>>0}writeInt32(file,offset+4,checksum),writeInt32(file,offset+8,tableOffsets[i]),writeInt32(file,offset+12,tables[tableName].length),offset+=OTF_TABLE_ENTRY_SIZE}return file}addTable(tag,data){if(tag in this.tables)throw new Error("Table "+tag+" already exists");this.tables[tag]=data}};__name(_OpenTypeFileBuilder,"OpenTypeFileBuilder");let OpenTypeFileBuilder=_OpenTypeFileBuilder;exports3.OpenTypeFileBuilder=OpenTypeFileBuilder},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.Type1Font=void 0;var _cff_parser=__w_pdfjs_require__3(35),_fonts_utils=__w_pdfjs_require__3(38),_core_utils=__w_pdfjs_require__3(6),_stream=__w_pdfjs_require__3(10),_type1_parser=__w_pdfjs_require__3(49),_util2=__w_pdfjs_require__3(2);function findBlock(streamBytes,signature,startIndex){const streamBytesLength=streamBytes.length,signatureLength=signature.length,scanLength=streamBytesLength-signatureLength;let i=startIndex,found=!1;for(;i<scanLength;){let j=0;for(;j<signatureLength&&streamBytes[i+j]===signature[j];)j++;if(j>=signatureLength){for(i+=j;i<streamBytesLength&&(0,_core_utils.isWhiteSpace)(streamBytes[i]);)i++;found=!0;break}i++}return{found,length:i}}__name2(findBlock,"findBlock"),__name(findBlock,"findBlock");function getHeaderBlock(stream,suggestedLength){const EEXEC_SIGNATURE=[101,101,120,101,99],streamStartPos=stream.pos;let headerBytes,headerBytesLength,block;try{headerBytes=stream.getBytes(suggestedLength),headerBytesLength=headerBytes.length}catch{}if(headerBytesLength===suggestedLength&&(block=findBlock(headerBytes,EEXEC_SIGNATURE,suggestedLength-2*EEXEC_SIGNATURE.length),block.found&&block.length===suggestedLength))return{stream:new _stream.Stream(headerBytes),length:suggestedLength};(0,_util2.warn)('Invalid "Length1" property in Type1 font -- trying to recover.'),stream.pos=streamStartPos;const SCAN_BLOCK_LENGTH=2048;let actualLength;for(;;){const scanBytes=stream.peekBytes(SCAN_BLOCK_LENGTH);if(block=findBlock(scanBytes,EEXEC_SIGNATURE,0),block.length===0)break;if(stream.pos+=block.length,block.found){actualLength=stream.pos-streamStartPos;break}}return stream.pos=streamStartPos,actualLength?{stream:new _stream.Stream(stream.getBytes(actualLength)),length:actualLength}:((0,_util2.warn)('Unable to recover "Length1" property in Type1 font -- using as is.'),{stream:new _stream.Stream(stream.getBytes(suggestedLength)),length:suggestedLength})}__name2(getHeaderBlock,"getHeaderBlock"),__name(getHeaderBlock,"getHeaderBlock");function getEexecBlock(stream,suggestedLength){const eexecBytes=stream.getBytes();return{stream:new _stream.Stream(eexecBytes),length:eexecBytes.length}}__name2(getEexecBlock,"getEexecBlock"),__name(getEexecBlock,"getEexecBlock");const _Type1Font=class{static{__name2(this,"_Type1Font")}constructor(name,file,properties){let headerBlockLength=properties.length1;properties.length2;let pfbHeader=file.peekBytes(6);const pfbHeaderPresent=pfbHeader[0]===128&&pfbHeader[1]===1;pfbHeaderPresent&&(file.skip(6),headerBlockLength=pfbHeader[5]<<24|pfbHeader[4]<<16|pfbHeader[3]<<8|pfbHeader[2]);const headerBlock=getHeaderBlock(file,headerBlockLength);new _type1_parser.Type1Parser(headerBlock.stream,!1,_fonts_utils.SEAC_ANALYSIS_ENABLED).extractFontHeader(properties),pfbHeaderPresent&&(pfbHeader=file.getBytes(6),pfbHeader[5]<<24|pfbHeader[4]<<16|pfbHeader[3]<<8|pfbHeader[2]);const eexecBlock=getEexecBlock(file),data=new _type1_parser.Type1Parser(eexecBlock.stream,!0,_fonts_utils.SEAC_ANALYSIS_ENABLED).extractFontProgram(properties);for(const key in data.properties)properties[key]=data.properties[key];const charstrings=data.charstrings,type2Charstrings=this.getType2Charstrings(charstrings),subrs=this.getType2Subrs(data.subrs);this.charstrings=charstrings,this.data=this.wrap(name,type2Charstrings,this.charstrings,subrs,properties),this.seacs=this.getSeacs(data.charstrings)}get numGlyphs(){return this.charstrings.length+1}getCharset(){const charset=[".notdef"];for(const{glyphName}of this.charstrings)charset.push(glyphName);return charset}getGlyphMapping(properties){const charstrings=this.charstrings;if(properties.composite){const charCodeToGlyphId=Object.create(null);for(let glyphId2=0,charstringsLen=charstrings.length;glyphId2<charstringsLen;glyphId2++){const charCode=properties.cMap.charCodeOf(glyphId2);charCodeToGlyphId[charCode]=glyphId2+1}return charCodeToGlyphId}const glyphNames=[".notdef"];let builtInEncoding,glyphId;for(glyphId=0;glyphId<charstrings.length;glyphId++)glyphNames.push(charstrings[glyphId].glyphName);const encoding=properties.builtInEncoding;if(encoding){builtInEncoding=Object.create(null);for(const charCode in encoding)glyphId=glyphNames.indexOf(encoding[charCode]),glyphId>=0&&(builtInEncoding[charCode]=glyphId)}return(0,_fonts_utils.type1FontGlyphMapping)(properties,builtInEncoding,glyphNames)}hasGlyphId(id){return id<0||id>=this.numGlyphs?!1:id===0?!0:this.charstrings[id-1].charstring.length>0}getSeacs(charstrings){const seacMap=[];for(let i=0,ii=charstrings.length;i<ii;i++){const charstring=charstrings[i];charstring.seac&&(seacMap[i+1]=charstring.seac)}return seacMap}getType2Charstrings(type1Charstrings){const type2Charstrings=[];for(let i=0,ii=type1Charstrings.length;i<ii;i++)type2Charstrings.push(type1Charstrings[i].charstring);return type2Charstrings}getType2Subrs(type1Subrs){let bias=0;const count=type1Subrs.length;count<1133?bias=107:count<33769?bias=1131:bias=32768;const type2Subrs=[];let i;for(i=0;i<bias;i++)type2Subrs.push([11]);for(i=0;i<count;i++)type2Subrs.push(type1Subrs[i]);return type2Subrs}wrap(name,glyphs,charstrings,subrs,properties){const cff=new _cff_parser.CFF;cff.header=new _cff_parser.CFFHeader(1,0,4,4),cff.names=[name];const topDict=new _cff_parser.CFFTopDict;topDict.setByName("version",391),topDict.setByName("Notice",392),topDict.setByName("FullName",393),topDict.setByName("FamilyName",394),topDict.setByName("Weight",395),topDict.setByName("Encoding",null),topDict.setByName("FontMatrix",properties.fontMatrix),topDict.setByName("FontBBox",properties.bbox),topDict.setByName("charset",null),topDict.setByName("CharStrings",null),topDict.setByName("Private",null),cff.topDict=topDict;const strings=new _cff_parser.CFFStrings;strings.add("Version 0.11"),strings.add("See original notice"),strings.add(name),strings.add(name),strings.add("Medium"),cff.strings=strings,cff.globalSubrIndex=new _cff_parser.CFFIndex;const count=glyphs.length,charsetArray=[".notdef"];let i,ii;for(i=0;i<count;i++){const glyphName=charstrings[i].glyphName;_cff_parser.CFFStandardStrings.indexOf(glyphName)===-1&&strings.add(glyphName),charsetArray.push(glyphName)}cff.charset=new _cff_parser.CFFCharset(!1,0,charsetArray);const charStringsIndex=new _cff_parser.CFFIndex;for(charStringsIndex.add([139,14]),i=0;i<count;i++)charStringsIndex.add(glyphs[i]);cff.charStrings=charStringsIndex;const privateDict=new _cff_parser.CFFPrivateDict;privateDict.setByName("Subrs",null);const fields=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(i=0,ii=fields.length;i<ii;i++){const field=fields[i];if(!(field in properties.privateData))continue;const value=properties.privateData[field];if(Array.isArray(value))for(let j=value.length-1;j>0;j--)value[j]-=value[j-1];privateDict.setByName(field,value)}cff.topDict.privateDict=privateDict;const subrIndex=new _cff_parser.CFFIndex;for(i=0,ii=subrs.length;i<ii;i++)subrIndex.add(subrs[i]);return privateDict.subrsIndex=subrIndex,new _cff_parser.CFFCompiler(cff).compile()}};__name(_Type1Font,"Type1Font");let Type1Font=_Type1Font;exports3.Type1Font=Type1Font},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.Type1Parser=void 0;var _encodings=__w_pdfjs_require__3(37),_core_utils=__w_pdfjs_require__3(6),_stream=__w_pdfjs_require__3(10),_util2=__w_pdfjs_require__3(2);const HINTING_ENABLED=!1,COMMAND_MAP={hstem:[1],vstem:[3],vmoveto:[4],rlineto:[5],hlineto:[6],vlineto:[7],rrcurveto:[8],callsubr:[10],flex:[12,35],drop:[12,18],endchar:[14],rmoveto:[21],hmoveto:[22],vhcurveto:[30],hvcurveto:[31]},_Type1CharString=class{static{__name2(this,"_Type1CharString")}constructor(){this.width=0,this.lsb=0,this.flexing=!1,this.output=[],this.stack=[]}convert(encoded,subrs,seacAnalysisEnabled){const count=encoded.length;let error=!1,wx,sbx,subrNumber;for(let i=0;i<count;i++){let value=encoded[i];if(value<32){switch(value===12&&(value=(value<<8)+encoded[++i]),value){case 1:{this.stack=[];break}case 3:{this.stack=[];break}case 4:if(this.flexing){if(this.stack.length<1){error=!0;break}const dy=this.stack.pop();this.stack.push(0,dy);break}error=this.executeCommand(1,COMMAND_MAP.vmoveto);break;case 5:error=this.executeCommand(2,COMMAND_MAP.rlineto);break;case 6:error=this.executeCommand(1,COMMAND_MAP.hlineto);break;case 7:error=this.executeCommand(1,COMMAND_MAP.vlineto);break;case 8:error=this.executeCommand(6,COMMAND_MAP.rrcurveto);break;case 9:this.stack=[];break;case 10:if(this.stack.length<1){error=!0;break}if(subrNumber=this.stack.pop(),!subrs[subrNumber]){error=!0;break}error=this.convert(subrs[subrNumber],subrs,seacAnalysisEnabled);break;case 11:return error;case 13:if(this.stack.length<2){error=!0;break}wx=this.stack.pop(),sbx=this.stack.pop(),this.lsb=sbx,this.width=wx,this.stack.push(wx,sbx),error=this.executeCommand(2,COMMAND_MAP.hmoveto);break;case 14:this.output.push(COMMAND_MAP.endchar[0]);break;case 21:if(this.flexing)break;error=this.executeCommand(2,COMMAND_MAP.rmoveto);break;case 22:if(this.flexing){this.stack.push(0);break}error=this.executeCommand(1,COMMAND_MAP.hmoveto);break;case 30:error=this.executeCommand(4,COMMAND_MAP.vhcurveto);break;case 31:error=this.executeCommand(4,COMMAND_MAP.hvcurveto);break;case 3072+0:this.stack=[];break;case 3072+1:{this.stack=[];break}case 3072+2:{this.stack=[];break}case 3072+6:if(seacAnalysisEnabled){const asb=this.stack.at(-5);this.seac=this.stack.splice(-4,4),this.seac[0]+=this.lsb-asb,error=this.executeCommand(0,COMMAND_MAP.endchar)}else error=this.executeCommand(4,COMMAND_MAP.endchar);break;case 3072+7:if(this.stack.length<4){error=!0;break}this.stack.pop(),wx=this.stack.pop();const sby=this.stack.pop();sbx=this.stack.pop(),this.lsb=sbx,this.width=wx,this.stack.push(wx,sbx,sby),error=this.executeCommand(3,COMMAND_MAP.rmoveto);break;case 3072+12:if(this.stack.length<2){error=!0;break}const num2=this.stack.pop(),num1=this.stack.pop();this.stack.push(num1/num2);break;case 3072+16:if(this.stack.length<2){error=!0;break}subrNumber=this.stack.pop();const numArgs=this.stack.pop();if(subrNumber===0&&numArgs===3){const flexArgs=this.stack.splice(this.stack.length-17,17);this.stack.push(flexArgs[2]+flexArgs[0],flexArgs[3]+flexArgs[1],flexArgs[4],flexArgs[5],flexArgs[6],flexArgs[7],flexArgs[8],flexArgs[9],flexArgs[10],flexArgs[11],flexArgs[12],flexArgs[13],flexArgs[14]),error=this.executeCommand(13,COMMAND_MAP.flex,!0),this.flexing=!1,this.stack.push(flexArgs[15],flexArgs[16])}else subrNumber===1&&numArgs===0&&(this.flexing=!0);break;case 3072+17:break;case 3072+33:this.stack=[];break;default:(0,_util2.warn)('Unknown type 1 charstring command of "'+value+'"');break}if(error)break;continue}else value<=246?value-=139:value<=250?value=(value-247)*256+encoded[++i]+108:value<=254?value=-((value-251)*256)-encoded[++i]-108:value=(encoded[++i]&255)<<24|(encoded[++i]&255)<<16|(encoded[++i]&255)<<8|(encoded[++i]&255)<<0;this.stack.push(value)}return error}executeCommand(howManyArgs,command,keepStack){const stackLength=this.stack.length;if(howManyArgs>stackLength)return!0;const start=stackLength-howManyArgs;for(let i=start;i<stackLength;i++){let value=this.stack[i];Number.isInteger(value)?this.output.push(28,value>>8&255,value&255):(value=65536*value|0,this.output.push(255,value>>24&255,value>>16&255,value>>8&255,value&255))}return this.output.push(...command),keepStack?this.stack.splice(start,howManyArgs):this.stack.length=0,!1}};__name(_Type1CharString,"Type1CharString");let Type1CharString=_Type1CharString;const EEXEC_ENCRYPT_KEY=55665,CHAR_STRS_ENCRYPT_KEY=4330;function isHexDigit(code){return code>=48&&code<=57||code>=65&&code<=70||code>=97&&code<=102}__name2(isHexDigit,"isHexDigit"),__name(isHexDigit,"isHexDigit");function decrypt(data,key,discardNumber){if(discardNumber>=data.length)return new Uint8Array(0);const c1=52845,c2=22719;let r=key|0,i,j;for(i=0;i<discardNumber;i++)r=(data[i]+r)*c1+c2&65535;const count=data.length-discardNumber,decrypted=new Uint8Array(count);for(i=discardNumber,j=0;j<count;i++,j++){const value=data[i];decrypted[j]=value^r>>8,r=(value+r)*c1+c2&65535}return decrypted}__name2(decrypt,"decrypt"),__name(decrypt,"decrypt");function decryptAscii(data,key,discardNumber){let r=key|0;const count=data.length,maybeLength=count>>>1,decrypted=new Uint8Array(maybeLength);let i,j;for(i=0,j=0;i<count;i++){const digit1=data[i];if(!isHexDigit(digit1))continue;i++;let digit2;for(;i<count&&!isHexDigit(digit2=data[i]);)i++;if(i<count){const value=parseInt(String.fromCharCode(digit1,digit2),16);decrypted[j++]=value^r>>8,r=(value+r)*52845+22719&65535}}return decrypted.slice(discardNumber,j)}__name2(decryptAscii,"decryptAscii"),__name(decryptAscii,"decryptAscii");function isSpecial(c){return c===47||c===91||c===93||c===123||c===125||c===40||c===41}__name2(isSpecial,"isSpecial"),__name(isSpecial,"isSpecial");const _Type1Parser=class{static{__name2(this,"_Type1Parser")}constructor(stream,encrypted,seacAnalysisEnabled){if(encrypted){const data=stream.getBytes(),isBinary=!((isHexDigit(data[0])||(0,_core_utils.isWhiteSpace)(data[0]))&&isHexDigit(data[1])&&isHexDigit(data[2])&&isHexDigit(data[3])&&isHexDigit(data[4])&&isHexDigit(data[5])&&isHexDigit(data[6])&&isHexDigit(data[7]));stream=new _stream.Stream(isBinary?decrypt(data,EEXEC_ENCRYPT_KEY,4):decryptAscii(data,EEXEC_ENCRYPT_KEY,4))}this.seacAnalysisEnabled=!!seacAnalysisEnabled,this.stream=stream,this.nextChar()}readNumberArray(){this.getToken();const array=[];for(;;){const token=this.getToken();if(token===null||token==="]"||token==="}")break;array.push(parseFloat(token||0))}return array}readNumber(){const token=this.getToken();return parseFloat(token||0)}readInt(){const token=this.getToken();return parseInt(token||0,10)|0}readBoolean(){return this.getToken()==="true"?1:0}nextChar(){return this.currentChar=this.stream.getByte()}prevChar(){return this.stream.skip(-2),this.currentChar=this.stream.getByte()}getToken(){let comment=!1,ch=this.currentChar;for(;;){if(ch===-1)return null;if(comment)(ch===10||ch===13)&&(comment=!1);else if(ch===37)comment=!0;else if(!(0,_core_utils.isWhiteSpace)(ch))break;ch=this.nextChar()}if(isSpecial(ch))return this.nextChar(),String.fromCharCode(ch);let token="";do token+=String.fromCharCode(ch),ch=this.nextChar();while(ch>=0&&!(0,_core_utils.isWhiteSpace)(ch)&&!isSpecial(ch));return token}readCharStrings(bytes,lenIV){return lenIV===-1?bytes:decrypt(bytes,CHAR_STRS_ENCRYPT_KEY,lenIV)}extractFontProgram(properties){const stream=this.stream,subrs=[],charstrings=[],privateData=Object.create(null);privateData.lenIV=4;const program={subrs:[],charstrings:[],properties:{privateData}};let token,length,data,lenIV;for(;(token=this.getToken())!==null;)if(token==="/")switch(token=this.getToken(),token){case"CharStrings":for(this.getToken(),this.getToken(),this.getToken(),this.getToken();token=this.getToken(),!(token===null||token==="end");){if(token!=="/")continue;const glyph=this.getToken();length=this.readInt(),this.getToken(),data=length>0?stream.getBytes(length):new Uint8Array(0),lenIV=program.properties.privateData.lenIV;const encoded=this.readCharStrings(data,lenIV);this.nextChar(),token=this.getToken(),token==="noaccess"?this.getToken():token==="/"&&this.prevChar(),charstrings.push({glyph,encoded})}break;case"Subrs":for(this.readInt(),this.getToken();this.getToken()==="dup";){const index=this.readInt();length=this.readInt(),this.getToken(),data=length>0?stream.getBytes(length):new Uint8Array(0),lenIV=program.properties.privateData.lenIV;const encoded=this.readCharStrings(data,lenIV);this.nextChar(),token=this.getToken(),token==="noaccess"&&this.getToken(),subrs[index]=encoded}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":const blueArray=this.readNumberArray();blueArray.length>0&&blueArray.length%2===0&&HINTING_ENABLED&&(program.properties.privateData[token]=blueArray);break;case"StemSnapH":case"StemSnapV":program.properties.privateData[token]=this.readNumberArray();break;case"StdHW":case"StdVW":program.properties.privateData[token]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":case"ExpansionFactor":program.properties.privateData[token]=this.readNumber();break;case"ForceBold":program.properties.privateData[token]=this.readBoolean();break}for(const{encoded,glyph}of charstrings){const charString=new Type1CharString,error=charString.convert(encoded,subrs,this.seacAnalysisEnabled);let output=charString.output;error&&(output=[14]);const charStringObject={glyphName:glyph,charstring:output,width:charString.width,lsb:charString.lsb,seac:charString.seac};if(glyph===".notdef"?program.charstrings.unshift(charStringObject):program.charstrings.push(charStringObject),properties.builtInEncoding){const index=properties.builtInEncoding.indexOf(glyph);index>-1&&properties.widths[index]===void 0&&index>=properties.firstChar&&index<=properties.lastChar&&(properties.widths[index]=charString.width)}}return program}extractFontHeader(properties){let token;for(;(token=this.getToken())!==null;)if(token==="/")switch(token=this.getToken(),token){case"FontMatrix":const matrix=this.readNumberArray();properties.fontMatrix=matrix;break;case"Encoding":const encodingArg=this.getToken();let encoding;if(!/^\d+$/.test(encodingArg))encoding=(0,_encodings.getEncoding)(encodingArg);else{encoding=[];const size=parseInt(encodingArg,10)|0;this.getToken();for(let j=0;j<size;j++){for(token=this.getToken();token!=="dup"&&token!=="def";)if(token=this.getToken(),token===null)return;if(token==="def")break;const index=this.readInt();this.getToken();const glyph=this.getToken();encoding[index]=glyph,this.getToken()}}properties.builtInEncoding=encoding;break;case"FontBBox":const fontBBox=this.readNumberArray();properties.ascent=Math.max(fontBBox[3],fontBBox[1]),properties.descent=Math.min(fontBBox[1],fontBBox[3]),properties.ascentScaled=!0;break}}};__name(_Type1Parser,"Type1Parser");let Type1Parser=_Type1Parser;exports3.Type1Parser=Type1Parser},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.Pattern=void 0,exports3.getTilingPatternIR=getTilingPatternIR;var _util2=__w_pdfjs_require__3(2),_base_stream=__w_pdfjs_require__3(7),_colorspace=__w_pdfjs_require__3(14),_core_utils=__w_pdfjs_require__3(6);const ShadingType={FUNCTION_BASED:1,AXIAL:2,RADIAL:3,FREE_FORM_MESH:4,LATTICE_FORM_MESH:5,COONS_PATCH_MESH:6,TENSOR_PATCH_MESH:7},_Pattern=class{static{__name2(this,"_Pattern")}constructor(){(0,_util2.unreachable)("Cannot initialize Pattern.")}static parseShading(shading,xref,res,handler,pdfFunctionFactory,localColorSpaceCache){const dict=shading instanceof _base_stream.BaseStream?shading.dict:shading,type=dict.get("ShadingType");try{switch(type){case ShadingType.AXIAL:case ShadingType.RADIAL:return new RadialAxialShading(dict,xref,res,pdfFunctionFactory,localColorSpaceCache);case ShadingType.FREE_FORM_MESH:case ShadingType.LATTICE_FORM_MESH:case ShadingType.COONS_PATCH_MESH:case ShadingType.TENSOR_PATCH_MESH:return new MeshShading(shading,xref,res,pdfFunctionFactory,localColorSpaceCache);default:throw new _util2.FormatError("Unsupported ShadingType: "+type)}}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;return handler.send("UnsupportedFeature",{featureId:_util2.UNSUPPORTED_FEATURES.shadingPattern}),(0,_util2.warn)(ex),new DummyShading}}};__name(_Pattern,"Pattern");let Pattern=_Pattern;exports3.Pattern=Pattern;const _BaseShading=class _BaseShading2{static{__name2(this,"_BaseShading")}static get SMALL_NUMBER(){return(0,_util2.shadow)(this,"SMALL_NUMBER",1e-6)}constructor(){this.constructor===_BaseShading2&&(0,_util2.unreachable)("Cannot initialize BaseShading.")}getIR(){(0,_util2.unreachable)("Abstract method `getIR` called.")}};__name(_BaseShading,"BaseShading");let BaseShading=_BaseShading;const _RadialAxialShading=class extends BaseShading{static{__name2(this,"_RadialAxialShading")}constructor(dict,xref,resources,pdfFunctionFactory,localColorSpaceCache){super(),this.coordsArr=dict.getArray("Coords"),this.shadingType=dict.get("ShadingType");const cs=_colorspace.ColorSpace.parse({cs:dict.getRaw("CS")||dict.getRaw("ColorSpace"),xref,resources,pdfFunctionFactory,localColorSpaceCache}),bbox=dict.getArray("BBox");Array.isArray(bbox)&&bbox.length===4?this.bbox=_util2.Util.normalizeRect(bbox):this.bbox=null;let t0=0,t1=1;if(dict.has("Domain")){const domainArr=dict.getArray("Domain");t0=domainArr[0],t1=domainArr[1]}let extendStart=!1,extendEnd=!1;if(dict.has("Extend")){const extendArr=dict.getArray("Extend");extendStart=extendArr[0],extendEnd=extendArr[1]}if(this.shadingType===ShadingType.RADIAL&&(!extendStart||!extendEnd)){const[x1,y1,r1,x2,y2,r2]=this.coordsArr,distance=Math.hypot(x1-x2,y1-y2);r1<=r2+distance&&r2<=r1+distance&&(0,_util2.warn)("Unsupported radial gradient.")}this.extendStart=extendStart,this.extendEnd=extendEnd;const fnObj=dict.getRaw("Function"),fn=pdfFunctionFactory.createFromArray(fnObj),NUMBER_OF_SAMPLES=10,step=(t1-t0)/NUMBER_OF_SAMPLES,colorStops=this.colorStops=[];if(t0>=t1||step<=0){(0,_util2.info)("Bad shading domain.");return}const color=new Float32Array(cs.numComps),ratio=new Float32Array(1);let rgbColor;for(let i=0;i<=NUMBER_OF_SAMPLES;i++){ratio[0]=t0+i*step,fn(ratio,0,color,0),rgbColor=cs.getRgb(color,0);const cssColor=_util2.Util.makeHexColor(rgbColor[0],rgbColor[1],rgbColor[2]);colorStops.push([i/NUMBER_OF_SAMPLES,cssColor])}let background="transparent";dict.has("Background")&&(rgbColor=cs.getRgb(dict.get("Background"),0),background=_util2.Util.makeHexColor(rgbColor[0],rgbColor[1],rgbColor[2])),extendStart||(colorStops.unshift([0,background]),colorStops[1][0]+=BaseShading.SMALL_NUMBER),extendEnd||(colorStops.at(-1)[0]-=BaseShading.SMALL_NUMBER,colorStops.push([1,background])),this.colorStops=colorStops}getIR(){const coordsArr=this.coordsArr,shadingType=this.shadingType;let type,p0,p1,r0,r1;return shadingType===ShadingType.AXIAL?(p0=[coordsArr[0],coordsArr[1]],p1=[coordsArr[2],coordsArr[3]],r0=null,r1=null,type="axial"):shadingType===ShadingType.RADIAL?(p0=[coordsArr[0],coordsArr[1]],p1=[coordsArr[3],coordsArr[4]],r0=coordsArr[2],r1=coordsArr[5],type="radial"):(0,_util2.unreachable)(`getPattern type unknown: ${shadingType}`),["RadialAxial",type,this.bbox,this.colorStops,p0,p1,r0,r1]}};__name(_RadialAxialShading,"RadialAxialShading");let RadialAxialShading=_RadialAxialShading;const _MeshStreamReader=class{static{__name2(this,"_MeshStreamReader")}constructor(stream,context){this.stream=stream,this.context=context,this.buffer=0,this.bufferLength=0;const numComps=context.numComps;this.tmpCompsBuf=new Float32Array(numComps);const csNumComps=context.colorSpace.numComps;this.tmpCsCompsBuf=context.colorFn?new Float32Array(csNumComps):this.tmpCompsBuf}get hasData(){if(this.stream.end)return this.stream.pos<this.stream.end;if(this.bufferLength>0)return!0;const nextByte=this.stream.getByte();return nextByte<0?!1:(this.buffer=nextByte,this.bufferLength=8,!0)}readBits(n){let buffer=this.buffer,bufferLength=this.bufferLength;if(n===32){if(bufferLength===0)return(this.stream.getByte()<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte())>>>0;buffer=buffer<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte();const nextByte=this.stream.getByte();return this.buffer=nextByte&(1<<bufferLength)-1,(buffer<<8-bufferLength|(nextByte&255)>>bufferLength)>>>0}if(n===8&&bufferLength===0)return this.stream.getByte();for(;bufferLength<n;)buffer=buffer<<8|this.stream.getByte(),bufferLength+=8;return bufferLength-=n,this.bufferLength=bufferLength,this.buffer=buffer&(1<<bufferLength)-1,buffer>>bufferLength}align(){this.buffer=0,this.bufferLength=0}readFlag(){return this.readBits(this.context.bitsPerFlag)}readCoordinate(){const bitsPerCoordinate=this.context.bitsPerCoordinate,xi=this.readBits(bitsPerCoordinate),yi=this.readBits(bitsPerCoordinate),decode=this.context.decode,scale=bitsPerCoordinate<32?1/((1<<bitsPerCoordinate)-1):23283064365386963e-26;return[xi*scale*(decode[1]-decode[0])+decode[0],yi*scale*(decode[3]-decode[2])+decode[2]]}readComponents(){const numComps=this.context.numComps,bitsPerComponent=this.context.bitsPerComponent,scale=bitsPerComponent<32?1/((1<<bitsPerComponent)-1):23283064365386963e-26,decode=this.context.decode,components=this.tmpCompsBuf;for(let i=0,j=4;i<numComps;i++,j+=2){const ci=this.readBits(bitsPerComponent);components[i]=ci*scale*(decode[j+1]-decode[j])+decode[j]}const color=this.tmpCsCompsBuf;return this.context.colorFn&&this.context.colorFn(components,0,color,0),this.context.colorSpace.getRgb(color,0)}};__name(_MeshStreamReader,"MeshStreamReader");let MeshStreamReader=_MeshStreamReader;const getB=__name(__name2(function(){function buildB(count){const lut=[];for(let i=0;i<=count;i++){const t=i/count,t_=1-t;lut.push(new Float32Array([t_*t_*t_,3*t*t_*t_,3*t*t*t_,t*t*t]))}return lut}__name2(buildB,"buildB"),__name(buildB,"buildB");const cache=[];return function(count){return cache[count]||(cache[count]=buildB(count)),cache[count]}},"getBClosure"),"getBClosure")(),_MeshShading=class _MeshShading2 extends BaseShading{static{__name2(this,"_MeshShading")}static get MIN_SPLIT_PATCH_CHUNKS_AMOUNT(){return(0,_util2.shadow)(this,"MIN_SPLIT_PATCH_CHUNKS_AMOUNT",3)}static get MAX_SPLIT_PATCH_CHUNKS_AMOUNT(){return(0,_util2.shadow)(this,"MAX_SPLIT_PATCH_CHUNKS_AMOUNT",20)}static get TRIANGLE_DENSITY(){return(0,_util2.shadow)(this,"TRIANGLE_DENSITY",20)}constructor(stream,xref,resources,pdfFunctionFactory,localColorSpaceCache){if(super(),!(stream instanceof _base_stream.BaseStream))throw new _util2.FormatError("Mesh data is not a stream");const dict=stream.dict;this.shadingType=dict.get("ShadingType");const bbox=dict.getArray("BBox");Array.isArray(bbox)&&bbox.length===4?this.bbox=_util2.Util.normalizeRect(bbox):this.bbox=null;const cs=_colorspace.ColorSpace.parse({cs:dict.getRaw("CS")||dict.getRaw("ColorSpace"),xref,resources,pdfFunctionFactory,localColorSpaceCache});this.background=dict.has("Background")?cs.getRgb(dict.get("Background"),0):null;const fnObj=dict.getRaw("Function"),fn=fnObj?pdfFunctionFactory.createFromArray(fnObj):null;this.coords=[],this.colors=[],this.figures=[];const decodeContext={bitsPerCoordinate:dict.get("BitsPerCoordinate"),bitsPerComponent:dict.get("BitsPerComponent"),bitsPerFlag:dict.get("BitsPerFlag"),decode:dict.getArray("Decode"),colorFn:fn,colorSpace:cs,numComps:fn?1:cs.numComps},reader=new MeshStreamReader(stream,decodeContext);let patchMesh=!1;switch(this.shadingType){case ShadingType.FREE_FORM_MESH:this._decodeType4Shading(reader);break;case ShadingType.LATTICE_FORM_MESH:const verticesPerRow=dict.get("VerticesPerRow")|0;if(verticesPerRow<2)throw new _util2.FormatError("Invalid VerticesPerRow");this._decodeType5Shading(reader,verticesPerRow);break;case ShadingType.COONS_PATCH_MESH:this._decodeType6Shading(reader),patchMesh=!0;break;case ShadingType.TENSOR_PATCH_MESH:this._decodeType7Shading(reader),patchMesh=!0;break;default:(0,_util2.unreachable)("Unsupported mesh type.");break}if(patchMesh){this._updateBounds();for(let i=0,ii=this.figures.length;i<ii;i++)this._buildFigureFromPatch(i)}this._updateBounds(),this._packData()}_decodeType4Shading(reader){const coords=this.coords,colors=this.colors,ps=[];let verticesLeft=0;for(;reader.hasData;){const f=reader.readFlag(),coord=reader.readCoordinate(),color=reader.readComponents();if(verticesLeft===0){if(!(0<=f&&f<=2))throw new _util2.FormatError("Unknown type4 flag");switch(f){case 0:verticesLeft=3;break;case 1:ps.push(ps.at(-2),ps.at(-1)),verticesLeft=1;break;case 2:ps.push(ps.at(-3),ps.at(-1)),verticesLeft=1;break}}ps.push(coords.length),coords.push(coord),colors.push(color),verticesLeft--,reader.align()}this.figures.push({type:"triangles",coords:new Int32Array(ps),colors:new Int32Array(ps)})}_decodeType5Shading(reader,verticesPerRow){const coords=this.coords,colors=this.colors,ps=[];for(;reader.hasData;){const coord=reader.readCoordinate(),color=reader.readComponents();ps.push(coords.length),coords.push(coord),colors.push(color)}this.figures.push({type:"lattice",coords:new Int32Array(ps),colors:new Int32Array(ps),verticesPerRow})}_decodeType6Shading(reader){const coords=this.coords,colors=this.colors,ps=new Int32Array(16),cs=new Int32Array(4);for(;reader.hasData;){const f=reader.readFlag();if(!(0<=f&&f<=3))throw new _util2.FormatError("Unknown type6 flag");const pi=coords.length;for(let i=0,ii=f!==0?8:12;i<ii;i++)coords.push(reader.readCoordinate());const ci=colors.length;for(let i=0,ii=f!==0?2:4;i<ii;i++)colors.push(reader.readComponents());let tmp1,tmp2,tmp3,tmp4;switch(f){case 0:ps[12]=pi+3,ps[13]=pi+4,ps[14]=pi+5,ps[15]=pi+6,ps[8]=pi+2,ps[11]=pi+7,ps[4]=pi+1,ps[7]=pi+8,ps[0]=pi,ps[1]=pi+11,ps[2]=pi+10,ps[3]=pi+9,cs[2]=ci+1,cs[3]=ci+2,cs[0]=ci,cs[1]=ci+3;break;case 1:tmp1=ps[12],tmp2=ps[13],tmp3=ps[14],tmp4=ps[15],ps[12]=tmp4,ps[13]=pi+0,ps[14]=pi+1,ps[15]=pi+2,ps[8]=tmp3,ps[11]=pi+3,ps[4]=tmp2,ps[7]=pi+4,ps[0]=tmp1,ps[1]=pi+7,ps[2]=pi+6,ps[3]=pi+5,tmp1=cs[2],tmp2=cs[3],cs[2]=tmp2,cs[3]=ci,cs[0]=tmp1,cs[1]=ci+1;break;case 2:tmp1=ps[15],tmp2=ps[11],ps[12]=ps[3],ps[13]=pi+0,ps[14]=pi+1,ps[15]=pi+2,ps[8]=ps[7],ps[11]=pi+3,ps[4]=tmp2,ps[7]=pi+4,ps[0]=tmp1,ps[1]=pi+7,ps[2]=pi+6,ps[3]=pi+5,tmp1=cs[3],cs[2]=cs[1],cs[3]=ci,cs[0]=tmp1,cs[1]=ci+1;break;case 3:ps[12]=ps[0],ps[13]=pi+0,ps[14]=pi+1,ps[15]=pi+2,ps[8]=ps[1],ps[11]=pi+3,ps[4]=ps[2],ps[7]=pi+4,ps[0]=ps[3],ps[1]=pi+7,ps[2]=pi+6,ps[3]=pi+5,cs[2]=cs[0],cs[3]=ci,cs[0]=cs[1],cs[1]=ci+1;break}ps[5]=coords.length,coords.push([(-4*coords[ps[0]][0]-coords[ps[15]][0]+6*(coords[ps[4]][0]+coords[ps[1]][0])-2*(coords[ps[12]][0]+coords[ps[3]][0])+3*(coords[ps[13]][0]+coords[ps[7]][0]))/9,(-4*coords[ps[0]][1]-coords[ps[15]][1]+6*(coords[ps[4]][1]+coords[ps[1]][1])-2*(coords[ps[12]][1]+coords[ps[3]][1])+3*(coords[ps[13]][1]+coords[ps[7]][1]))/9]),ps[6]=coords.length,coords.push([(-4*coords[ps[3]][0]-coords[ps[12]][0]+6*(coords[ps[2]][0]+coords[ps[7]][0])-2*(coords[ps[0]][0]+coords[ps[15]][0])+3*(coords[ps[4]][0]+coords[ps[14]][0]))/9,(-4*coords[ps[3]][1]-coords[ps[12]][1]+6*(coords[ps[2]][1]+coords[ps[7]][1])-2*(coords[ps[0]][1]+coords[ps[15]][1])+3*(coords[ps[4]][1]+coords[ps[14]][1]))/9]),ps[9]=coords.length,coords.push([(-4*coords[ps[12]][0]-coords[ps[3]][0]+6*(coords[ps[8]][0]+coords[ps[13]][0])-2*(coords[ps[0]][0]+coords[ps[15]][0])+3*(coords[ps[11]][0]+coords[ps[1]][0]))/9,(-4*coords[ps[12]][1]-coords[ps[3]][1]+6*(coords[ps[8]][1]+coords[ps[13]][1])-2*(coords[ps[0]][1]+coords[ps[15]][1])+3*(coords[ps[11]][1]+coords[ps[1]][1]))/9]),ps[10]=coords.length,coords.push([(-4*coords[ps[15]][0]-coords[ps[0]][0]+6*(coords[ps[11]][0]+coords[ps[14]][0])-2*(coords[ps[12]][0]+coords[ps[3]][0])+3*(coords[ps[2]][0]+coords[ps[8]][0]))/9,(-4*coords[ps[15]][1]-coords[ps[0]][1]+6*(coords[ps[11]][1]+coords[ps[14]][1])-2*(coords[ps[12]][1]+coords[ps[3]][1])+3*(coords[ps[2]][1]+coords[ps[8]][1]))/9]),this.figures.push({type:"patch",coords:new Int32Array(ps),colors:new Int32Array(cs)})}}_decodeType7Shading(reader){const coords=this.coords,colors=this.colors,ps=new Int32Array(16),cs=new Int32Array(4);for(;reader.hasData;){const f=reader.readFlag();if(!(0<=f&&f<=3))throw new _util2.FormatError("Unknown type7 flag");const pi=coords.length;for(let i=0,ii=f!==0?12:16;i<ii;i++)coords.push(reader.readCoordinate());const ci=colors.length;for(let i=0,ii=f!==0?2:4;i<ii;i++)colors.push(reader.readComponents());let tmp1,tmp2,tmp3,tmp4;switch(f){case 0:ps[12]=pi+3,ps[13]=pi+4,ps[14]=pi+5,ps[15]=pi+6,ps[8]=pi+2,ps[9]=pi+13,ps[10]=pi+14,ps[11]=pi+7,ps[4]=pi+1,ps[5]=pi+12,ps[6]=pi+15,ps[7]=pi+8,ps[0]=pi,ps[1]=pi+11,ps[2]=pi+10,ps[3]=pi+9,cs[2]=ci+1,cs[3]=ci+2,cs[0]=ci,cs[1]=ci+3;break;case 1:tmp1=ps[12],tmp2=ps[13],tmp3=ps[14],tmp4=ps[15],ps[12]=tmp4,ps[13]=pi+0,ps[14]=pi+1,ps[15]=pi+2,ps[8]=tmp3,ps[9]=pi+9,ps[10]=pi+10,ps[11]=pi+3,ps[4]=tmp2,ps[5]=pi+8,ps[6]=pi+11,ps[7]=pi+4,ps[0]=tmp1,ps[1]=pi+7,ps[2]=pi+6,ps[3]=pi+5,tmp1=cs[2],tmp2=cs[3],cs[2]=tmp2,cs[3]=ci,cs[0]=tmp1,cs[1]=ci+1;break;case 2:tmp1=ps[15],tmp2=ps[11],ps[12]=ps[3],ps[13]=pi+0,ps[14]=pi+1,ps[15]=pi+2,ps[8]=ps[7],ps[9]=pi+9,ps[10]=pi+10,ps[11]=pi+3,ps[4]=tmp2,ps[5]=pi+8,ps[6]=pi+11,ps[7]=pi+4,ps[0]=tmp1,ps[1]=pi+7,ps[2]=pi+6,ps[3]=pi+5,tmp1=cs[3],cs[2]=cs[1],cs[3]=ci,cs[0]=tmp1,cs[1]=ci+1;break;case 3:ps[12]=ps[0],ps[13]=pi+0,ps[14]=pi+1,ps[15]=pi+2,ps[8]=ps[1],ps[9]=pi+9,ps[10]=pi+10,ps[11]=pi+3,ps[4]=ps[2],ps[5]=pi+8,ps[6]=pi+11,ps[7]=pi+4,ps[0]=ps[3],ps[1]=pi+7,ps[2]=pi+6,ps[3]=pi+5,cs[2]=cs[0],cs[3]=ci,cs[0]=cs[1],cs[1]=ci+1;break}this.figures.push({type:"patch",coords:new Int32Array(ps),colors:new Int32Array(cs)})}}_buildFigureFromPatch(index){const figure=this.figures[index];(0,_util2.assert)(figure.type==="patch","Unexpected patch mesh figure");const coords=this.coords,colors=this.colors,pi=figure.coords,ci=figure.colors,figureMinX=Math.min(coords[pi[0]][0],coords[pi[3]][0],coords[pi[12]][0],coords[pi[15]][0]),figureMinY=Math.min(coords[pi[0]][1],coords[pi[3]][1],coords[pi[12]][1],coords[pi[15]][1]),figureMaxX=Math.max(coords[pi[0]][0],coords[pi[3]][0],coords[pi[12]][0],coords[pi[15]][0]),figureMaxY=Math.max(coords[pi[0]][1],coords[pi[3]][1],coords[pi[12]][1],coords[pi[15]][1]);let splitXBy=Math.ceil((figureMaxX-figureMinX)*_MeshShading2.TRIANGLE_DENSITY/(this.bounds[2]-this.bounds[0]));splitXBy=Math.max(_MeshShading2.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(_MeshShading2.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,splitXBy));let splitYBy=Math.ceil((figureMaxY-figureMinY)*_MeshShading2.TRIANGLE_DENSITY/(this.bounds[3]-this.bounds[1]));splitYBy=Math.max(_MeshShading2.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(_MeshShading2.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,splitYBy));const verticesPerRow=splitXBy+1,figureCoords=new Int32Array((splitYBy+1)*verticesPerRow),figureColors=new Int32Array((splitYBy+1)*verticesPerRow);let k=0;const cl=new Uint8Array(3),cr=new Uint8Array(3),c0=colors[ci[0]],c1=colors[ci[1]],c2=colors[ci[2]],c3=colors[ci[3]],bRow=getB(splitYBy),bCol=getB(splitXBy);for(let row=0;row<=splitYBy;row++){cl[0]=(c0[0]*(splitYBy-row)+c2[0]*row)/splitYBy|0,cl[1]=(c0[1]*(splitYBy-row)+c2[1]*row)/splitYBy|0,cl[2]=(c0[2]*(splitYBy-row)+c2[2]*row)/splitYBy|0,cr[0]=(c1[0]*(splitYBy-row)+c3[0]*row)/splitYBy|0,cr[1]=(c1[1]*(splitYBy-row)+c3[1]*row)/splitYBy|0,cr[2]=(c1[2]*(splitYBy-row)+c3[2]*row)/splitYBy|0;for(let col=0;col<=splitXBy;col++,k++){if((row===0||row===splitYBy)&&(col===0||col===splitXBy))continue;let x=0,y=0,q=0;for(let i=0;i<=3;i++)for(let j=0;j<=3;j++,q++){const m=bRow[row][i]*bCol[col][j];x+=coords[pi[q]][0]*m,y+=coords[pi[q]][1]*m}figureCoords[k]=coords.length,coords.push([x,y]),figureColors[k]=colors.length;const newColor=new Uint8Array(3);newColor[0]=(cl[0]*(splitXBy-col)+cr[0]*col)/splitXBy|0,newColor[1]=(cl[1]*(splitXBy-col)+cr[1]*col)/splitXBy|0,newColor[2]=(cl[2]*(splitXBy-col)+cr[2]*col)/splitXBy|0,colors.push(newColor)}}figureCoords[0]=pi[0],figureColors[0]=ci[0],figureCoords[splitXBy]=pi[3],figureColors[splitXBy]=ci[1],figureCoords[verticesPerRow*splitYBy]=pi[12],figureColors[verticesPerRow*splitYBy]=ci[2],figureCoords[verticesPerRow*splitYBy+splitXBy]=pi[15],figureColors[verticesPerRow*splitYBy+splitXBy]=ci[3],this.figures[index]={type:"lattice",coords:figureCoords,colors:figureColors,verticesPerRow}}_updateBounds(){let minX=this.coords[0][0],minY=this.coords[0][1],maxX=minX,maxY=minY;for(let i=1,ii=this.coords.length;i<ii;i++){const x=this.coords[i][0],y=this.coords[i][1];minX=minX>x?x:minX,minY=minY>y?y:minY,maxX=maxX<x?x:maxX,maxY=maxY<y?y:maxY}this.bounds=[minX,minY,maxX,maxY]}_packData(){let i,ii,j,jj;const coords=this.coords,coordsPacked=new Float32Array(coords.length*2);for(i=0,j=0,ii=coords.length;i<ii;i++){const xy=coords[i];coordsPacked[j++]=xy[0],coordsPacked[j++]=xy[1]}this.coords=coordsPacked;const colors=this.colors,colorsPacked=new Uint8Array(colors.length*3);for(i=0,j=0,ii=colors.length;i<ii;i++){const c=colors[i];colorsPacked[j++]=c[0],colorsPacked[j++]=c[1],colorsPacked[j++]=c[2]}this.colors=colorsPacked;const figures=this.figures;for(i=0,ii=figures.length;i<ii;i++){const figure=figures[i],ps=figure.coords,cs=figure.colors;for(j=0,jj=ps.length;j<jj;j++)ps[j]*=2,cs[j]*=3}}getIR(){return["Mesh",this.shadingType,this.coords,this.colors,this.figures,this.bounds,this.bbox,this.background]}};__name(_MeshShading,"MeshShading");let MeshShading=_MeshShading;const _DummyShading=class extends BaseShading{static{__name2(this,"_DummyShading")}getIR(){return["Dummy"]}};__name(_DummyShading,"DummyShading");let DummyShading=_DummyShading;function getTilingPatternIR(operatorList,dict,color){const matrix=dict.getArray("Matrix"),bbox=_util2.Util.normalizeRect(dict.getArray("BBox")),xstep=dict.get("XStep"),ystep=dict.get("YStep"),paintType=dict.get("PaintType"),tilingType=dict.get("TilingType");if(bbox[2]-bbox[0]===0||bbox[3]-bbox[1]===0)throw new _util2.FormatError(`Invalid getTilingPatternIR /BBox array: [${bbox}].`);return["TilingPattern",color,operatorList,matrix,bbox,xstep,ystep,paintType,tilingType]}__name2(getTilingPatternIR,"getTilingPatternIR"),__name(getTilingPatternIR,"getTilingPatternIR")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.getXfaFontDict=getXfaFontDict,exports3.getXfaFontName=getXfaFontName;var _calibri_factors=__w_pdfjs_require__3(52),_primitives=__w_pdfjs_require__3(5),_helvetica_factors=__w_pdfjs_require__3(53),_liberationsans_widths=__w_pdfjs_require__3(54),_myriadpro_factors=__w_pdfjs_require__3(55),_segoeui_factors=__w_pdfjs_require__3(56),_core_utils=__w_pdfjs_require__3(6),_fonts_utils=__w_pdfjs_require__3(38);const getXFAFontMap=(0,_core_utils.getLookupTableFactory)(function(t){t["MyriadPro-Regular"]=t["PdfJS-Fallback-Regular"]={name:"LiberationSans-Regular",factors:_myriadpro_factors.MyriadProRegularFactors,baseWidths:_liberationsans_widths.LiberationSansRegularWidths,baseMapping:_liberationsans_widths.LiberationSansRegularMapping,metrics:_myriadpro_factors.MyriadProRegularMetrics},t["MyriadPro-Bold"]=t["PdfJS-Fallback-Bold"]={name:"LiberationSans-Bold",factors:_myriadpro_factors.MyriadProBoldFactors,baseWidths:_liberationsans_widths.LiberationSansBoldWidths,baseMapping:_liberationsans_widths.LiberationSansBoldMapping,metrics:_myriadpro_factors.MyriadProBoldMetrics},t["MyriadPro-It"]=t["MyriadPro-Italic"]=t["PdfJS-Fallback-Italic"]={name:"LiberationSans-Italic",factors:_myriadpro_factors.MyriadProItalicFactors,baseWidths:_liberationsans_widths.LiberationSansItalicWidths,baseMapping:_liberationsans_widths.LiberationSansItalicMapping,metrics:_myriadpro_factors.MyriadProItalicMetrics},t["MyriadPro-BoldIt"]=t["MyriadPro-BoldItalic"]=t["PdfJS-Fallback-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:_myriadpro_factors.MyriadProBoldItalicFactors,baseWidths:_liberationsans_widths.LiberationSansBoldItalicWidths,baseMapping:_liberationsans_widths.LiberationSansBoldItalicMapping,metrics:_myriadpro_factors.MyriadProBoldItalicMetrics},t.ArialMT=t.Arial=t["Arial-Regular"]={name:"LiberationSans-Regular",baseWidths:_liberationsans_widths.LiberationSansRegularWidths,baseMapping:_liberationsans_widths.LiberationSansRegularMapping},t["Arial-BoldMT"]=t["Arial-Bold"]={name:"LiberationSans-Bold",baseWidths:_liberationsans_widths.LiberationSansBoldWidths,baseMapping:_liberationsans_widths.LiberationSansBoldMapping},t["Arial-ItalicMT"]=t["Arial-Italic"]={name:"LiberationSans-Italic",baseWidths:_liberationsans_widths.LiberationSansItalicWidths,baseMapping:_liberationsans_widths.LiberationSansItalicMapping},t["Arial-BoldItalicMT"]=t["Arial-BoldItalic"]={name:"LiberationSans-BoldItalic",baseWidths:_liberationsans_widths.LiberationSansBoldItalicWidths,baseMapping:_liberationsans_widths.LiberationSansBoldItalicMapping},t["Calibri-Regular"]={name:"LiberationSans-Regular",factors:_calibri_factors.CalibriRegularFactors,baseWidths:_liberationsans_widths.LiberationSansRegularWidths,baseMapping:_liberationsans_widths.LiberationSansRegularMapping,metrics:_calibri_factors.CalibriRegularMetrics},t["Calibri-Bold"]={name:"LiberationSans-Bold",factors:_calibri_factors.CalibriBoldFactors,baseWidths:_liberationsans_widths.LiberationSansBoldWidths,baseMapping:_liberationsans_widths.LiberationSansBoldMapping,metrics:_calibri_factors.CalibriBoldMetrics},t["Calibri-Italic"]={name:"LiberationSans-Italic",factors:_calibri_factors.CalibriItalicFactors,baseWidths:_liberationsans_widths.LiberationSansItalicWidths,baseMapping:_liberationsans_widths.LiberationSansItalicMapping,metrics:_calibri_factors.CalibriItalicMetrics},t["Calibri-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:_calibri_factors.CalibriBoldItalicFactors,baseWidths:_liberationsans_widths.LiberationSansBoldItalicWidths,baseMapping:_liberationsans_widths.LiberationSansBoldItalicMapping,metrics:_calibri_factors.CalibriBoldItalicMetrics},t["Segoeui-Regular"]={name:"LiberationSans-Regular",factors:_segoeui_factors.SegoeuiRegularFactors,baseWidths:_liberationsans_widths.LiberationSansRegularWidths,baseMapping:_liberationsans_widths.LiberationSansRegularMapping,metrics:_segoeui_factors.SegoeuiRegularMetrics},t["Segoeui-Bold"]={name:"LiberationSans-Bold",factors:_segoeui_factors.SegoeuiBoldFactors,baseWidths:_liberationsans_widths.LiberationSansBoldWidths,baseMapping:_liberationsans_widths.LiberationSansBoldMapping,metrics:_segoeui_factors.SegoeuiBoldMetrics},t["Segoeui-Italic"]={name:"LiberationSans-Italic",factors:_segoeui_factors.SegoeuiItalicFactors,baseWidths:_liberationsans_widths.LiberationSansItalicWidths,baseMapping:_liberationsans_widths.LiberationSansItalicMapping,metrics:_segoeui_factors.SegoeuiItalicMetrics},t["Segoeui-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:_segoeui_factors.SegoeuiBoldItalicFactors,baseWidths:_liberationsans_widths.LiberationSansBoldItalicWidths,baseMapping:_liberationsans_widths.LiberationSansBoldItalicMapping,metrics:_segoeui_factors.SegoeuiBoldItalicMetrics},t["Helvetica-Regular"]=t.Helvetica={name:"LiberationSans-Regular",factors:_helvetica_factors.HelveticaRegularFactors,baseWidths:_liberationsans_widths.LiberationSansRegularWidths,baseMapping:_liberationsans_widths.LiberationSansRegularMapping,metrics:_helvetica_factors.HelveticaRegularMetrics},t["Helvetica-Bold"]={name:"LiberationSans-Bold",factors:_helvetica_factors.HelveticaBoldFactors,baseWidths:_liberationsans_widths.LiberationSansBoldWidths,baseMapping:_liberationsans_widths.LiberationSansBoldMapping,metrics:_helvetica_factors.HelveticaBoldMetrics},t["Helvetica-Italic"]={name:"LiberationSans-Italic",factors:_helvetica_factors.HelveticaItalicFactors,baseWidths:_liberationsans_widths.LiberationSansItalicWidths,baseMapping:_liberationsans_widths.LiberationSansItalicMapping,metrics:_helvetica_factors.HelveticaItalicMetrics},t["Helvetica-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:_helvetica_factors.HelveticaBoldItalicFactors,baseWidths:_liberationsans_widths.LiberationSansBoldItalicWidths,baseMapping:_liberationsans_widths.LiberationSansBoldItalicMapping,metrics:_helvetica_factors.HelveticaBoldItalicMetrics}});function getXfaFontName(name){const fontName=(0,_fonts_utils.normalizeFontName)(name);return getXFAFontMap()[fontName]}__name2(getXfaFontName,"getXfaFontName"),__name(getXfaFontName,"getXfaFontName");function getXfaFontWidths(name){const info=getXfaFontName(name);if(!info)return null;const{baseWidths,baseMapping,factors}=info;let rescaledBaseWidths;factors?rescaledBaseWidths=baseWidths.map((w,i)=>w*factors[i]):rescaledBaseWidths=baseWidths;let currentCode=-2,currentArray;const newWidths=[];for(const[unicode,glyphIndex]of baseMapping.map((charUnicode,index)=>[charUnicode,index]).sort(([unicode1],[unicode2])=>unicode1-unicode2))unicode!==-1&&(unicode===currentCode+1?(currentArray.push(rescaledBaseWidths[glyphIndex]),currentCode+=1):(currentCode=unicode,currentArray=[rescaledBaseWidths[glyphIndex]],newWidths.push(unicode,currentArray)));return newWidths}__name2(getXfaFontWidths,"getXfaFontWidths"),__name(getXfaFontWidths,"getXfaFontWidths");function getXfaFontDict(name){const widths=getXfaFontWidths(name),dict=new _primitives.Dict(null);dict.set("BaseFont",_primitives.Name.get(name)),dict.set("Type",_primitives.Name.get("Font")),dict.set("Subtype",_primitives.Name.get("CIDFontType2")),dict.set("Encoding",_primitives.Name.get("Identity-H")),dict.set("CIDToGIDMap",_primitives.Name.get("Identity")),dict.set("W",widths),dict.set("FirstChar",widths[0]),dict.set("LastChar",widths.at(-2)+widths.at(-1).length-1);const descriptor=new _primitives.Dict(null);dict.set("FontDescriptor",descriptor);const systemInfo=new _primitives.Dict(null);return systemInfo.set("Ordering","Identity"),systemInfo.set("Registry","Adobe"),systemInfo.set("Supplement",0),dict.set("CIDSystemInfo",systemInfo),dict}__name2(getXfaFontDict,"getXfaFontDict"),__name(getXfaFontDict,"getXfaFontDict")},(__unused_webpack_module2,exports3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.CalibriRegularMetrics=exports3.CalibriRegularFactors=exports3.CalibriItalicMetrics=exports3.CalibriItalicFactors=exports3.CalibriBoldMetrics=exports3.CalibriBoldItalicMetrics=exports3.CalibriBoldItalicFactors=exports3.CalibriBoldFactors=void 0;const CalibriBoldFactors=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.54657,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.73293,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.9121,.86943,.79795,.88198,.77958,.70864,.81055,.90399,.88653,.96017,.82577,.77892,.78257,.97507,1.54657,.97507,.85284,.89552,.90176,.88762,.8785,.75241,.8785,.90518,.95015,.77618,.8785,.88401,.91916,.86304,.88401,.91488,.8785,.8801,.8785,.8785,.91343,.7173,1.04106,.8785,.85075,.95794,.82616,.85162,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.12401,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.73293,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.9121,.86943,.86943,.86943,.86943,.86943,.85284,.87508,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.88762,.88762,.88762,.88762,.88762,.88762,.8715,.75241,.90518,.90518,.90518,.90518,.88401,.88401,.88401,.88401,.8785,.8785,.8801,.8801,.8801,.8801,.8801,.90747,.89049,.8785,.8785,.8785,.8785,.85162,.8785,.85162,.83908,.88762,.83908,.88762,.83908,.88762,.73293,.75241,.73293,.75241,.73293,.75241,.73293,.75241,.87289,.83016,.88506,.93125,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.81921,.77618,.81921,.77618,.81921,.77618,1,1,.87356,.8785,.91075,.89608,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76229,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.79468,.91926,.88175,.70823,.94903,.9121,.8785,1,1,.9121,.8785,.87802,.88656,.8785,.86943,.8801,.86943,.8801,.86943,.8801,.87402,.89291,.77958,.91343,1,1,.77958,.91343,.70864,.7173,.70864,.7173,.70864,.7173,.70864,.7173,1,1,.81055,.75841,.81055,1.06452,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.96017,.95794,.77892,.85162,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.88762,.77539,.8715,.87508,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70674,.98387,.94721,1.33431,1.45894,.95161,1.06303,.83908,.80352,.57184,.6965,.56289,.82001,.56029,.81235,1.02988,.83908,.7762,.68156,.80367,.73133,.78257,.87356,.86943,.95958,.75727,.89019,1.04924,.9121,.7648,.86943,.87356,.79795,.78275,.81055,.77892,.9762,.82577,.99819,.84896,.95958,.77892,.96108,1.01407,.89049,1.02988,.94211,.96108,.8936,.84021,.87842,.96399,.79109,.89049,1.00813,1.02988,.86077,.87445,.92099,.84723,.86513,.8801,.75638,.85714,.78216,.79586,.87965,.94211,.97747,.78287,.97926,.84971,1.02988,.94211,.8801,.94211,.84971,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90264,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.90518,1,1,1,1,1,1,1,1,1,1,1,1,.90548,1,1,1,1,1,1,.96017,.95794,.96017,.95794,.96017,.95794,.77892,.85162,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.92794,.87012,.87012,.87012,.89552,.89552,1.42259,.71143,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.93835,.83406,.91133,.84107,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90527,1.81055,.90527,1.81055,1.31006,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];exports3.CalibriBoldFactors=CalibriBoldFactors;const CalibriBoldMetrics={lineHeight:1.2207,lineGap:.2207};exports3.CalibriBoldMetrics=CalibriBoldMetrics;const CalibriBoldItalicFactors=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.56239,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.71805,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.90872,.85938,.79795,.87068,.77958,.69766,.81055,.90399,.88653,.96068,.82577,.77892,.78257,.97507,1.529,.97507,.85284,.89552,.90176,.94908,.86411,.74012,.86411,.88323,.95015,.86411,.86331,.88401,.91916,.86304,.88401,.9039,.86331,.86331,.86411,.86411,.90464,.70852,1.04106,.86331,.84372,.95794,.82616,.84548,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.19129,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.71805,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.90872,.85938,.85938,.85938,.85938,.85938,.85284,.87068,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.94908,.94908,.94908,.94908,.94908,.94908,.85887,.74012,.88323,.88323,.88323,.88323,.88401,.88401,.88401,.88401,.8785,.86331,.86331,.86331,.86331,.86331,.86331,.90747,.89049,.86331,.86331,.86331,.86331,.84548,.86411,.84548,.83908,.94908,.83908,.94908,.83908,.94908,.71805,.74012,.71805,.74012,.71805,.74012,.71805,.74012,.87289,.79538,.88506,.92726,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.81921,.86411,.81921,.86411,.81921,.86411,1,1,.87356,.86331,.91075,.8777,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76467,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.77312,.91926,.88175,.70823,.94903,.90872,.86331,1,1,.90872,.86331,.86906,.88116,.86331,.85938,.86331,.85938,.86331,.85938,.86331,.87402,.86549,.77958,.90464,1,1,.77958,.90464,.69766,.70852,.69766,.70852,.69766,.70852,.69766,.70852,1,1,.81055,.75841,.81055,1.06452,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.96068,.95794,.77892,.84548,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.94908,.77539,.85887,.87068,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70088,.98387,.94721,1.33431,1.45894,.95161,1.48387,.83908,.80352,.57118,.6965,.56347,.79179,.55853,.80346,1.02988,.83908,.7762,.67174,.86036,.73133,.78257,.87356,.86441,.95958,.75727,.89019,1.04924,.90872,.74889,.85938,.87891,.79795,.7957,.81055,.77892,.97447,.82577,.97466,.87179,.95958,.77892,.94252,.95612,.8753,1.02988,.92733,.94252,.87411,.84021,.8728,.95612,.74081,.8753,1.02189,1.02988,.84814,.87445,.91822,.84723,.85668,.86331,.81344,.87581,.76422,.82046,.96057,.92733,.99375,.78022,.95452,.86015,1.02988,.92733,.86331,.92733,.86015,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90631,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.88323,1,1,1,1,1,1,1,1,1,1,1,1,.85174,1,1,1,1,1,1,.96068,.95794,.96068,.95794,.96068,.95794,.77892,.84548,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.89807,.87012,.87012,.87012,.89552,.89552,1.42259,.71094,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.92972,.83406,.91133,.83326,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90616,1.81055,.90527,1.81055,1.3107,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];exports3.CalibriBoldItalicFactors=CalibriBoldItalicFactors;const CalibriBoldItalicMetrics={lineHeight:1.2207,lineGap:.2207};exports3.CalibriBoldItalicMetrics=CalibriBoldItalicMetrics;const CalibriItalicFactors=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39543,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.72346,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89249,.84118,.77452,.85374,.75186,.67789,.79776,.88844,.85066,.94309,.77818,.7306,.76659,1.10369,1.38313,1.10369,1.06139,.89552,.8739,.9245,.9245,.83203,.9245,.85865,1.09842,.9245,.9245,1.03297,1.07692,.90918,1.03297,.94959,.9245,.92274,.9245,.9245,1.02933,.77832,1.20562,.9245,.8916,.98986,.86621,.89453,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.16359,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.72346,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89249,.84118,.84118,.84118,.84118,.84118,.85284,.84557,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.9245,.9245,.9245,.9245,.9245,.9245,.84843,.83203,.85865,.85865,.85865,.85865,.82601,.82601,.82601,.82601,.94469,.9245,.92274,.92274,.92274,.92274,.92274,.90747,.86651,.9245,.9245,.9245,.9245,.89453,.9245,.89453,.8675,.9245,.8675,.9245,.8675,.9245,.72346,.83203,.72346,.83203,.72346,.83203,.72346,.83203,.85193,.8875,.86477,.99034,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.81105,.9245,.81105,.9245,.81105,.9245,1,1,.86275,.9245,.90872,.93591,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77896,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.9375,.98156,.93407,.77261,1.11429,.89249,.9245,1,1,.89249,.9245,.92534,.86698,.9245,.84118,.92274,.84118,.92274,.84118,.92274,.8667,.86291,.75186,1.02933,1,1,.75186,1.02933,.67789,.77832,.67789,.77832,.67789,.77832,.67789,.77832,1,1,.79776,.97655,.79776,1.23023,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.94309,.98986,.7306,.89453,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.9245,.76318,.84843,.84557,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67009,.96334,.93695,1.35191,1.40909,.95161,1.48387,.8675,.90861,.6192,.7363,.64824,.82411,.56321,.85696,1.23516,.8675,.81552,.7286,.84134,.73206,.76659,.86275,.84369,.90685,.77892,.85871,1.02638,.89249,.75828,.84118,.85984,.77452,.76466,.79776,.7306,.90782,.77818,.903,.87291,.90685,.7306,.99058,1.03667,.94635,1.23516,.9849,.99058,.92393,.8916,.942,1.03667,.75026,.94635,1.0297,1.23516,.90918,.94048,.98217,.89746,.84153,.92274,.82507,.88832,.84438,.88178,1.03525,.9849,1.00225,.78086,.97248,.89404,1.23516,.9849,.92274,.9849,.89404,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.89693,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.85865,1,1,1,1,1,1,1,1,1,1,1,1,.90933,1,1,1,1,1,1,.94309,.98986,.94309,.98986,.94309,.98986,.7306,.89453,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.68994,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.97858,.82616,.91133,.83437,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90572,1.81055,.90749,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85284,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];exports3.CalibriItalicFactors=CalibriItalicFactors;const CalibriItalicMetrics={lineHeight:1.2207,lineGap:.2207};exports3.CalibriItalicMetrics=CalibriItalicMetrics;const CalibriRegularFactors=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39016,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.73834,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89385,.85122,.77452,.86503,.75186,.68887,.79776,.88844,.85066,.94258,.77818,.7306,.76659,1.10369,1.39016,1.10369,1.06139,.89552,.8739,.86128,.94469,.8457,.94469,.89464,1.09842,.84636,.94469,1.03297,1.07692,.90918,1.03297,.95897,.94469,.9482,.94469,.94469,1.04692,.78223,1.20562,.94469,.90332,.98986,.86621,.90527,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.08707,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.73834,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89385,.85122,.85122,.85122,.85122,.85122,.85284,.85311,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.86128,.86128,.86128,.86128,.86128,.86128,.8693,.8457,.89464,.89464,.89464,.89464,.82601,.82601,.82601,.82601,.94469,.94469,.9482,.9482,.9482,.9482,.9482,.90747,.86651,.94469,.94469,.94469,.94469,.90527,.94469,.90527,.8675,.86128,.8675,.86128,.8675,.86128,.73834,.8457,.73834,.8457,.73834,.8457,.73834,.8457,.85193,.92454,.86477,.9921,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.81105,.84636,.81105,.84636,.81105,.84636,1,1,.86275,.94469,.90872,.95786,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77741,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.90452,.98156,1.11842,.77261,1.11429,.89385,.94469,1,1,.89385,.94469,.95877,.86901,.94469,.85122,.9482,.85122,.9482,.85122,.9482,.8667,.90016,.75186,1.04692,1,1,.75186,1.04692,.68887,.78223,.68887,.78223,.68887,.78223,.68887,.78223,1,1,.79776,.92188,.79776,1.23023,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.94258,.98986,.7306,.90527,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.86128,.76318,.8693,.85311,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67742,.96334,.93695,1.35191,1.40909,.95161,1.48387,.86686,.90861,.62267,.74359,.65649,.85498,.56963,.88254,1.23516,.8675,.81552,.75443,.84503,.73206,.76659,.86275,.85122,.90685,.77892,.85746,1.02638,.89385,.75657,.85122,.86275,.77452,.74171,.79776,.7306,.95165,.77818,.89772,.88831,.90685,.7306,.98142,1.02191,.96576,1.23516,.99018,.98142,.9236,.89258,.94035,1.02191,.78848,.96576,.9561,1.23516,.90918,.92578,.95424,.89746,.83969,.9482,.80113,.89442,.85208,.86155,.98022,.99018,1.00452,.81209,.99247,.89181,1.23516,.99018,.9482,.99018,.89181,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.88844,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89464,1,1,1,1,1,1,1,1,1,1,1,1,.96766,1,1,1,1,1,1,.94258,.98986,.94258,.98986,.94258,.98986,.7306,.90527,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.69043,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.99331,.82616,.91133,.84286,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90527,1.81055,.90527,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1.07185,.99413,.96334,1.08065,1,1,1,1,1,1,1,1,1,1,1];exports3.CalibriRegularFactors=CalibriRegularFactors;const CalibriRegularMetrics={lineHeight:1.2207,lineGap:.2207};exports3.CalibriRegularMetrics=CalibriRegularMetrics},(__unused_webpack_module2,exports3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.HelveticaRegularMetrics=exports3.HelveticaRegularFactors=exports3.HelveticaItalicMetrics=exports3.HelveticaItalicFactors=exports3.HelveticaBoldMetrics=exports3.HelveticaBoldItalicMetrics=exports3.HelveticaBoldItalicFactors=exports3.HelveticaBoldFactors=void 0;const HelveticaBoldFactors=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.03374,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.00042,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.03828,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00034,.99977,1,.99997,1.00026,1.00078,1.00036,.99973,1.00013,1.0006,.99977,.99977,.99988,.85148,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,1.00069,1.00022,.99977,1.00001,.99984,1.00026,1.00001,1.00024,1.00001,.9999,1,1.0006,1.00001,1.00041,.99962,1.00026,1.0006,.99995,1.00041,.99942,.99973,.99927,1.00082,.99902,1.00026,1.00087,1.0006,1.00069,.99973,.99867,.99973,.9993,1.00026,1.00049,1.00056,1,.99988,.99935,.99995,.99954,1.00055,.99945,1.00032,1.0006,.99995,1.00026,.99995,1.00032,1.00001,1.00008,.99971,1.00019,.9994,1.00001,1.0006,1.00044,.99973,1.00023,1.00047,1,.99942,.99561,.99989,1.00035,.99977,1.00035,.99977,1.00019,.99944,1.00001,1.00021,.99926,1.00035,1.00035,.99942,1.00048,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.99989,1.00057,1.00001,.99936,1.00052,1.00012,.99996,1.00043,1,1.00035,.9994,.99976,1.00035,.99973,1.00052,1.00041,1.00119,1.00037,.99973,1.00002,.99986,1.00041,1.00041,.99902,.9996,1.00034,.99999,1.00026,.99999,1.00026,.99973,1.00052,.99973,1,.99973,1.00041,1.00075,.9994,1.0003,.99999,1,1.00041,.99955,1,.99915,.99973,.99973,1.00026,1.00119,.99955,.99973,1.0006,.99911,1.0006,1.00026,.99972,1.00026,.99902,1.00041,.99973,.99999,1,1,1.00038,1.0005,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,1.00047,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1];exports3.HelveticaBoldFactors=HelveticaBoldFactors;const HelveticaBoldMetrics={lineHeight:1.2,lineGap:.2};exports3.HelveticaBoldMetrics=HelveticaBoldMetrics;const HelveticaBoldItalicFactors=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.0044,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99971,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.01011,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99977,1,1,1.00026,.99969,.99972,.99981,.9998,1.0006,.99977,.99977,1.00022,.91155,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,.99966,1.00022,1.00032,1.00001,.99944,1.00026,1.00001,.99968,1.00001,1.00047,1,1.0006,1.00001,.99981,1.00101,1.00026,1.0006,.99948,.99981,1.00064,.99973,.99942,1.00101,1.00061,1.00026,1.00069,1.0006,1.00014,.99973,1.01322,.99973,1.00065,1.00026,1.00012,.99923,1,1.00064,1.00076,.99948,1.00055,1.00063,1.00007,.99943,1.0006,.99948,1.00026,.99948,.99943,1.00001,1.00001,1.00029,1.00038,1.00035,1.00001,1.0006,1.0006,.99973,.99978,1.00001,1.00057,.99989,.99967,.99964,.99967,.99977,.99999,.99977,1.00038,.99977,1.00001,.99973,1.00066,.99967,.99967,1.00041,.99998,.99999,.99977,1.00022,.99967,1.00001,.99977,1.00026,.99964,1.00031,1.00001,.99999,.99999,1,1.00023,1,1,.99999,1.00035,1.00001,.99999,.99973,.99977,.99999,1.00058,.99973,.99973,.99955,.9995,1.00026,1.00026,1.00032,.99989,1.00034,.99999,1.00026,1.00026,1.00026,.99973,.45998,.99973,1.00026,.99973,1.00001,.99999,.99982,.99994,.99996,1,1.00042,1.00044,1.00029,1.00023,.99973,.99973,1.00026,.99949,1.00002,.99973,1.0006,1.0006,1.0006,.99975,1.00026,1.00026,1.00032,.98685,.99973,1.00026,1,1,.99966,1.00044,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1,.99973,.99971,.99978,1,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00098,1,1,1,1.00049,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1];exports3.HelveticaBoldItalicFactors=HelveticaBoldItalicFactors;const HelveticaBoldItalicMetrics={lineHeight:1.35,lineGap:.2};exports3.HelveticaBoldItalicMetrics=HelveticaBoldItalicMetrics;const HelveticaItalicFactors=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.0288,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,.99946,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.06311,.99973,1.00024,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,1.00041,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.89547,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00001,1,1.00054,.99977,1.00084,1.00007,.99973,1.00013,.99924,1.00001,1.00001,.99945,.91221,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00001,.99999,.99977,.99933,1.00022,1.00054,1.00001,1.00065,1.00026,1.00001,1.0001,1.00001,1.00052,1,1.0006,1.00001,.99945,.99897,.99968,.99924,1.00036,.99945,.99949,1,1.0006,.99897,.99918,.99968,.99911,.99924,1,.99962,1.01487,1,1.0005,.99973,1.00012,1.00043,1,.99995,.99994,1.00036,.99947,1.00019,1.00063,1.00025,.99924,1.00036,.99973,1.00036,1.00025,1.00001,1.00001,1.00027,1.0001,1.00068,1.00001,1.0006,1.0006,1,1.00008,.99957,.99972,.9994,.99954,.99975,1.00051,1.00001,1.00019,1.00001,1.0001,.99986,1.00001,1.00001,1.00038,.99954,.99954,.9994,1.00066,.99999,.99977,1.00022,1.00054,1.00001,.99977,1.00026,.99975,1.0001,1.00001,.99993,.9995,.99955,1.00016,.99978,.99974,1.00019,1.00022,.99955,1.00053,.99973,1.00089,1.00005,.99967,1.00048,.99973,1.00002,1.00034,.99973,.99973,.99964,1.00006,1.00066,.99947,.99973,.98894,.99973,1,.44898,1,.99946,1,1.00039,1.00082,.99991,.99991,.99985,1.00022,1.00023,1.00061,1.00006,.99966,.99973,.99973,.99973,1.00019,1.0008,1,.99924,.99924,.99924,.99983,1.00044,.99973,.99964,.98332,1,.99973,1,1,.99962,.99895,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,1.00423,.99925,.99999,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00049,1,1.00245,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,1.00003,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1];exports3.HelveticaItalicFactors=HelveticaItalicFactors;const HelveticaItalicMetrics={lineHeight:1.35,lineGap:.2};exports3.HelveticaItalicMetrics=HelveticaItalicMetrics;const HelveticaRegularFactors=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.04596,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,1.00019,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.02572,.99973,1.00005,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,.99999,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.84533,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99928,1,.99977,1.00013,1.00055,.99947,.99945,.99941,.99924,1.00001,1.00001,1.0004,.91621,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00005,.99999,.99977,1.00015,1.00022,.99977,1.00001,.99973,1.00026,1.00001,1.00019,1.00001,.99946,1,1.0006,1.00001,.99978,1.00045,.99973,.99924,1.00023,.99978,.99966,1,1.00065,1.00045,1.00019,.99973,.99973,.99924,1,1,.96499,1,1.00055,.99973,1.00008,1.00027,1,.9997,.99995,1.00023,.99933,1.00019,1.00015,1.00031,.99924,1.00023,.99973,1.00023,1.00031,1.00001,.99928,1.00029,1.00092,1.00035,1.00001,1.0006,1.0006,1,.99988,.99975,1,1.00082,.99561,.9996,1.00035,1.00001,.99962,1.00001,1.00092,.99964,1.00001,.99963,.99999,1.00035,1.00035,1.00082,.99962,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.9996,.99967,1.00001,1.00034,1.00074,1.00054,1.00053,1.00063,.99971,.99962,1.00035,.99975,.99977,.99973,1.00043,.99953,1.0007,.99915,.99973,1.00008,.99892,1.00073,1.00073,1.00114,.99915,1.00073,.99955,.99973,1.00092,.99973,1,.99998,1,1.0003,1,1.00043,1.00001,.99969,1.0003,1,1.00035,1.00001,.9995,1,1.00092,.99973,.99973,.99973,1.0007,.9995,1,.99924,1.0006,.99924,.99972,1.00062,.99973,1.00114,1.00073,1,.99955,1,1,1.00047,.99968,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,.99925,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];exports3.HelveticaRegularFactors=HelveticaRegularFactors;const HelveticaRegularMetrics={lineHeight:1.2,lineGap:.2};exports3.HelveticaRegularMetrics=HelveticaRegularMetrics},(__unused_webpack_module2,exports3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.LiberationSansRegularWidths=exports3.LiberationSansRegularMapping=exports3.LiberationSansItalicWidths=exports3.LiberationSansItalicMapping=exports3.LiberationSansBoldWidths=exports3.LiberationSansBoldMapping=exports3.LiberationSansBoldItalicWidths=exports3.LiberationSansBoldItalicMapping=void 0;const LiberationSansBoldWidths=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,719,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,785,556,556,278,722,556,556,611,278,611,278,611,385,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,465,722,333,853,906,474,825,927,838,278,722,722,601,719,667,611,722,778,278,722,667,833,722,644,778,722,667,600,611,667,821,667,809,802,278,667,615,451,611,278,582,615,610,556,606,475,460,611,541,278,558,556,612,556,445,611,766,619,520,684,446,582,715,576,753,845,278,582,611,582,845,667,669,885,567,711,667,278,276,556,1094,1062,875,610,722,622,719,722,719,722,567,712,667,904,626,719,719,610,702,833,722,778,719,667,722,611,622,854,667,730,703,1005,1019,870,979,719,711,1031,719,556,618,615,417,635,556,709,497,615,615,500,635,740,604,611,604,611,556,490,556,875,556,615,581,833,844,729,854,615,552,854,583,556,556,611,417,552,556,278,281,278,969,906,611,500,615,556,604,778,611,487,447,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1094,556,885,489,1115,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333];exports3.LiberationSansBoldWidths=LiberationSansBoldWidths;const LiberationSansBoldMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];exports3.LiberationSansBoldMapping=LiberationSansBoldMapping;const LiberationSansBoldItalicWidths=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,740,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,782,556,556,278,722,556,556,611,278,611,278,611,396,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,333,722,333,854,906,473,844,930,847,278,722,722,610,671,667,611,722,778,278,722,667,833,722,657,778,718,667,590,611,667,822,667,829,781,278,667,620,479,611,278,591,620,621,556,610,479,492,611,558,278,566,556,603,556,450,611,712,605,532,664,409,591,704,578,773,834,278,591,611,591,834,667,667,886,614,719,667,278,278,556,1094,1042,854,622,719,677,719,722,708,722,614,722,667,927,643,719,719,615,687,833,722,778,719,667,722,611,677,781,667,729,708,979,989,854,1e3,708,719,1042,729,556,619,604,534,618,556,736,510,611,611,507,622,740,604,611,611,611,556,889,556,885,556,646,583,889,935,707,854,594,552,865,589,556,556,611,469,563,556,278,278,278,969,906,611,507,619,556,611,778,611,575,467,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1104,556,885,516,1146,1e3,768,600,834,834,834,834,999,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333];exports3.LiberationSansBoldItalicWidths=LiberationSansBoldItalicWidths;const LiberationSansBoldItalicMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];exports3.LiberationSansBoldItalicMapping=LiberationSansBoldItalicMapping;const LiberationSansItalicWidths=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,625,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,733,444,500,222,667,500,500,556,222,556,222,556,281,556,400,556,222,722,556,722,556,722,556,615,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,354,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,789,846,389,794,865,775,222,667,667,570,671,667,611,722,778,278,667,667,833,722,648,778,725,667,600,611,667,837,667,831,761,278,667,570,439,555,222,550,570,571,500,556,439,463,555,542,222,500,492,548,500,447,556,670,573,486,603,374,550,652,546,728,779,222,550,556,550,779,667,667,843,544,708,667,278,278,500,1066,982,844,589,715,639,724,667,651,667,544,704,667,917,614,715,715,589,686,833,722,778,725,667,722,611,639,795,667,727,673,920,923,805,886,651,694,1022,682,556,562,522,493,553,556,688,465,556,556,472,564,686,550,556,556,556,500,833,500,835,500,572,518,830,851,621,736,526,492,752,534,556,556,556,378,496,500,222,222,222,910,828,556,472,565,500,556,778,556,492,339,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1083,1e3,768,600,834,834,834,834,1e3,500,998,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,584,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285];exports3.LiberationSansItalicWidths=LiberationSansItalicWidths;const LiberationSansItalicMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];exports3.LiberationSansItalicMapping=LiberationSansItalicMapping;const LiberationSansRegularWidths=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,615,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,735,444,500,222,667,500,500,556,222,556,222,556,292,556,334,556,222,722,556,722,556,722,556,604,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,375,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,784,838,384,774,855,752,222,667,667,551,668,667,611,722,778,278,667,668,833,722,650,778,722,667,618,611,667,798,667,835,748,278,667,578,446,556,222,547,578,575,500,557,446,441,556,556,222,500,500,576,500,448,556,690,569,482,617,395,547,648,525,713,781,222,547,556,547,781,667,667,865,542,719,667,278,278,500,1057,1010,854,583,722,635,719,667,656,667,542,677,667,923,604,719,719,583,656,833,722,778,719,667,722,611,635,760,667,740,667,917,938,792,885,656,719,1010,722,556,573,531,365,583,556,669,458,559,559,438,583,688,552,556,542,556,500,458,500,823,500,573,521,802,823,625,719,521,510,750,542,556,556,556,365,510,500,222,278,222,906,812,556,438,559,500,552,778,556,489,411,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1073,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285];exports3.LiberationSansRegularWidths=LiberationSansRegularWidths;const LiberationSansRegularMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];exports3.LiberationSansRegularMapping=LiberationSansRegularMapping},(__unused_webpack_module2,exports3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.MyriadProRegularMetrics=exports3.MyriadProRegularFactors=exports3.MyriadProItalicMetrics=exports3.MyriadProItalicFactors=exports3.MyriadProBoldMetrics=exports3.MyriadProBoldItalicMetrics=exports3.MyriadProBoldItalicFactors=exports3.MyriadProBoldFactors=void 0;const MyriadProBoldFactors=[1.36898,1,1,.72706,.80479,.83734,.98894,.99793,.9897,.93884,.86209,.94292,.94292,1.16661,1.02058,.93582,.96694,.93582,1.19137,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.78076,.78076,1.02058,1.02058,1.02058,.72851,.78966,.90838,.83637,.82391,.96376,.80061,.86275,.8768,.95407,1.0258,.73901,.85022,.83655,1.0156,.95546,.92179,.87107,.92179,.82114,.8096,.89713,.94438,.95353,.94083,.91905,.90406,.9446,.94292,1.18777,.94292,1.02058,.89903,.90088,.94938,.97898,.81093,.97571,.94938,1.024,.9577,.95933,.98621,1.0474,.97455,.98981,.9672,.95933,.9446,.97898,.97407,.97646,.78036,1.10208,.95442,.95298,.97579,.9332,.94039,.938,.80687,1.01149,.80687,1.02058,.80479,.99793,.99793,.99793,.99793,1.01149,1.00872,.90088,.91882,1.0213,.8361,1.02058,.62295,.54324,.89022,1.08595,1,1,.90088,1,.97455,.93582,.90088,1,1.05686,.8361,.99642,.99642,.99642,.72851,.90838,.90838,.90838,.90838,.90838,.90838,.868,.82391,.80061,.80061,.80061,.80061,1.0258,1.0258,1.0258,1.0258,.97484,.95546,.92179,.92179,.92179,.92179,.92179,1.02058,.92179,.94438,.94438,.94438,.94438,.90406,.86958,.98225,.94938,.94938,.94938,.94938,.94938,.94938,.9031,.81093,.94938,.94938,.94938,.94938,.98621,.98621,.98621,.98621,.93969,.95933,.9446,.9446,.9446,.9446,.9446,1.08595,.9446,.95442,.95442,.95442,.95442,.94039,.97898,.94039,.90838,.94938,.90838,.94938,.90838,.94938,.82391,.81093,.82391,.81093,.82391,.81093,.82391,.81093,.96376,.84313,.97484,.97571,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.8768,.9577,.8768,.9577,.8768,.9577,1,1,.95407,.95933,.97069,.95933,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,.887,1.01591,.73901,1.0474,1,1,.97455,.83655,.98981,1,1,.83655,.73977,.83655,.73903,.84638,1.033,.95546,.95933,1,1,.95546,.95933,.8271,.95417,.95933,.92179,.9446,.92179,.9446,.92179,.9446,.936,.91964,.82114,.97646,1,1,.82114,.97646,.8096,.78036,.8096,.78036,1,1,.8096,.78036,1,1,.89713,.77452,.89713,1.10208,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94083,.97579,.90406,.94039,.90406,.9446,.938,.9446,.938,.9446,.938,1,.99793,.90838,.94938,.868,.9031,.92179,.9446,1,1,.89713,1.10208,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90989,.9358,.91945,.83181,.75261,.87992,.82976,.96034,.83689,.97268,1.0078,.90838,.83637,.8019,.90157,.80061,.9446,.95407,.92436,1.0258,.85022,.97153,1.0156,.95546,.89192,.92179,.92361,.87107,.96318,.89713,.93704,.95638,.91905,.91709,.92796,1.0258,.93704,.94836,1.0373,.95933,1.0078,.95871,.94836,.96174,.92601,.9498,.98607,.95776,.95933,1.05453,1.0078,.98275,.9314,.95617,.91701,1.05993,.9446,.78367,.9553,1,.86832,1.0128,.95871,.99394,.87548,.96361,.86774,1.0078,.95871,.9446,.95871,.86774,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.94083,.97579,.94083,.97579,.94083,.97579,.90406,.94039,.96694,1,.89903,1,1,1,.93582,.93582,.93582,1,.908,.908,.918,.94219,.94219,.96544,1,1.285,1,1,.81079,.81079,1,1,.74854,1,1,1,1,.99793,1,1,1,.65,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.17173,1,.80535,.76169,1.02058,1.0732,1.05486,1,1,1.30692,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.16161,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];exports3.MyriadProBoldFactors=MyriadProBoldFactors;const MyriadProBoldMetrics={lineHeight:1.2,lineGap:.2};exports3.MyriadProBoldMetrics=MyriadProBoldMetrics;const MyriadProBoldItalicFactors=[1.36898,1,1,.66227,.80779,.81625,.97276,.97276,.97733,.92222,.83266,.94292,.94292,1.16148,1.02058,.93582,.96694,.93582,1.17337,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.78076,.78076,1.02058,1.02058,1.02058,.71541,.76813,.85576,.80591,.80729,.94299,.77512,.83655,.86523,.92222,.98621,.71743,.81698,.79726,.98558,.92222,.90637,.83809,.90637,.80729,.76463,.86275,.90699,.91605,.9154,.85308,.85458,.90531,.94292,1.21296,.94292,1.02058,.89903,1.18616,.99613,.91677,.78216,.91677,.90083,.98796,.9135,.92168,.95381,.98981,.95298,.95381,.93459,.92168,.91513,.92004,.91677,.95077,.748,1.04502,.91677,.92061,.94236,.89544,.89364,.9,.80687,.8578,.80687,1.02058,.80779,.97276,.97276,.97276,.97276,.8578,.99973,1.18616,.91339,1.08074,.82891,1.02058,.55509,.71526,.89022,1.08595,1,1,1.18616,1,.96736,.93582,1.18616,1,1.04864,.82711,.99043,.99043,.99043,.71541,.85576,.85576,.85576,.85576,.85576,.85576,.845,.80729,.77512,.77512,.77512,.77512,.98621,.98621,.98621,.98621,.95961,.92222,.90637,.90637,.90637,.90637,.90637,1.02058,.90251,.90699,.90699,.90699,.90699,.85458,.83659,.94951,.99613,.99613,.99613,.99613,.99613,.99613,.85811,.78216,.90083,.90083,.90083,.90083,.95381,.95381,.95381,.95381,.9135,.92168,.91513,.91513,.91513,.91513,.91513,1.08595,.91677,.91677,.91677,.91677,.91677,.89364,.92332,.89364,.85576,.99613,.85576,.99613,.85576,.99613,.80729,.78216,.80729,.78216,.80729,.78216,.80729,.78216,.94299,.76783,.95961,.91677,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.86523,.9135,.86523,.9135,.86523,.9135,1,1,.92222,.92168,.92222,.92168,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.86036,.97096,.71743,.98981,1,1,.95298,.79726,.95381,1,1,.79726,.6894,.79726,.74321,.81691,1.0006,.92222,.92168,1,1,.92222,.92168,.79464,.92098,.92168,.90637,.91513,.90637,.91513,.90637,.91513,.909,.87514,.80729,.95077,1,1,.80729,.95077,.76463,.748,.76463,.748,1,1,.76463,.748,1,1,.86275,.72651,.86275,1.04502,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.9154,.94236,.85458,.89364,.85458,.90531,.9,.90531,.9,.90531,.9,1,.97276,.85576,.99613,.845,.85811,.90251,.91677,1,1,.86275,1.04502,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.00899,1.30628,.85576,.80178,.66862,.7927,.69323,.88127,.72459,.89711,.95381,.85576,.80591,.7805,.94729,.77512,.90531,.92222,.90637,.98621,.81698,.92655,.98558,.92222,.85359,.90637,.90976,.83809,.94523,.86275,.83509,.93157,.85308,.83392,.92346,.98621,.83509,.92886,.91324,.92168,.95381,.90646,.92886,.90557,.86847,.90276,.91324,.86842,.92168,.99531,.95381,.9224,.85408,.92699,.86847,1.0051,.91513,.80487,.93481,1,.88159,1.05214,.90646,.97355,.81539,.89398,.85923,.95381,.90646,.91513,.90646,.85923,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9154,.94236,.9154,.94236,.9154,.94236,.85458,.89364,.96694,1,.89903,1,1,1,.91782,.91782,.91782,1,.896,.896,.896,.9332,.9332,.95973,1,1.26,1,1,.80479,.80178,1,1,.85633,1,1,1,1,.97276,1,1,1,.698,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.14542,1,.79199,.78694,1.02058,1.03493,1.05486,1,1,1.23026,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.20006,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];exports3.MyriadProBoldItalicFactors=MyriadProBoldItalicFactors;const MyriadProBoldItalicMetrics={lineHeight:1.2,lineGap:.2};exports3.MyriadProBoldItalicMetrics=MyriadProBoldItalicMetrics;const MyriadProItalicFactors=[1.36898,1,1,.65507,.84943,.85639,.88465,.88465,.86936,.88307,.86948,.85283,.85283,1.06383,1.02058,.75945,.9219,.75945,1.17337,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.75945,.75945,1.02058,1.02058,1.02058,.69046,.70926,.85158,.77812,.76852,.89591,.70466,.76125,.80094,.86822,.83864,.728,.77212,.79475,.93637,.87514,.8588,.76013,.8588,.72421,.69866,.77598,.85991,.80811,.87832,.78112,.77512,.8562,1.0222,1.18417,1.0222,1.27014,.89903,1.15012,.93859,.94399,.846,.94399,.81453,1.0186,.94219,.96017,1.03075,1.02175,.912,1.03075,.96998,.96017,.93859,.94399,.94399,.95493,.746,1.12658,.94578,.91,.979,.882,.882,.83,.85034,.83537,.85034,1.02058,.70869,.88465,.88465,.88465,.88465,.83537,.90083,1.15012,.9161,.94565,.73541,1.02058,.53609,.69353,.79519,1.08595,1,1,1.15012,1,.91974,.75945,1.15012,1,.9446,.73361,.9005,.9005,.9005,.62864,.85158,.85158,.85158,.85158,.85158,.85158,.773,.76852,.70466,.70466,.70466,.70466,.83864,.83864,.83864,.83864,.90561,.87514,.8588,.8588,.8588,.8588,.8588,1.02058,.85751,.85991,.85991,.85991,.85991,.77512,.76013,.88075,.93859,.93859,.93859,.93859,.93859,.93859,.8075,.846,.81453,.81453,.81453,.81453,.82424,.82424,.82424,.82424,.9278,.96017,.93859,.93859,.93859,.93859,.93859,1.08595,.8562,.94578,.94578,.94578,.94578,.882,.94578,.882,.85158,.93859,.85158,.93859,.85158,.93859,.76852,.846,.76852,.846,.76852,.846,.76852,.846,.89591,.8544,.90561,.94399,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.80094,.94219,.80094,.94219,.80094,.94219,1,1,.86822,.96017,.86822,.96017,.83864,.82424,.83864,.82424,.83864,.82424,.83864,1.03075,.83864,.82424,.81402,1.02738,.728,1.02175,1,1,.912,.79475,1.03075,1,1,.79475,.83911,.79475,.66266,.80553,1.06676,.87514,.96017,1,1,.87514,.96017,.86865,.87396,.96017,.8588,.93859,.8588,.93859,.8588,.93859,.867,.84759,.72421,.95493,1,1,.72421,.95493,.69866,.746,.69866,.746,1,1,.69866,.746,1,1,.77598,.88417,.77598,1.12658,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.87832,.979,.77512,.882,.77512,.8562,.83,.8562,.83,.8562,.83,1,.88465,.85158,.93859,.773,.8075,.85751,.8562,1,1,.77598,1.12658,1.15012,1.15012,1.15012,1.15012,1.15012,1.15313,1.15012,1.15012,1.15012,1.08106,1.03901,.85158,.77025,.62264,.7646,.65351,.86026,.69461,.89947,1.03075,.85158,.77812,.76449,.88836,.70466,.8562,.86822,.8588,.83864,.77212,.85308,.93637,.87514,.82352,.8588,.85701,.76013,.89058,.77598,.8156,.82565,.78112,.77899,.89386,.83864,.8156,.9486,.92388,.96186,1.03075,.91123,.9486,.93298,.878,.93942,.92388,.84596,.96186,.95119,1.03075,.922,.88787,.95829,.88,.93559,.93859,.78815,.93758,1,.89217,1.03737,.91123,.93969,.77487,.85769,.86799,1.03075,.91123,.93859,.91123,.86799,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87832,.979,.87832,.979,.87832,.979,.77512,.882,.9219,1,.89903,1,1,1,.87321,.87321,.87321,1,1.027,1.027,1.027,.86847,.86847,.79121,1,1.124,1,1,.73572,.73572,1,1,.85034,1,1,1,1,.88465,1,1,1,.669,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.04828,1,.74948,.75187,1.02058,.98391,1.02119,1,1,1.06233,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05233,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];exports3.MyriadProItalicFactors=MyriadProItalicFactors;const MyriadProItalicMetrics={lineHeight:1.2,lineGap:.2};exports3.MyriadProItalicMetrics=MyriadProItalicMetrics;const MyriadProRegularFactors=[1.36898,1,1,.76305,.82784,.94935,.89364,.92241,.89073,.90706,.98472,.85283,.85283,1.0664,1.02058,.74505,.9219,.74505,1.23456,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.74505,.74505,1.02058,1.02058,1.02058,.73002,.72601,.91755,.8126,.80314,.92222,.73764,.79726,.83051,.90284,.86023,.74,.8126,.84869,.96518,.91115,.8858,.79761,.8858,.74498,.73914,.81363,.89591,.83659,.89633,.85608,.8111,.90531,1.0222,1.22736,1.0222,1.27014,.89903,.90088,.86667,1.0231,.896,1.01411,.90083,1.05099,1.00512,.99793,1.05326,1.09377,.938,1.06226,1.00119,.99793,.98714,1.0231,1.01231,.98196,.792,1.19137,.99074,.962,1.01915,.926,.942,.856,.85034,.92006,.85034,1.02058,.69067,.92241,.92241,.92241,.92241,.92006,.9332,.90088,.91882,.93484,.75339,1.02058,.56866,.54324,.79519,1.08595,1,1,.90088,1,.95325,.74505,.90088,1,.97198,.75339,.91009,.91009,.91009,.66466,.91755,.91755,.91755,.91755,.91755,.91755,.788,.80314,.73764,.73764,.73764,.73764,.86023,.86023,.86023,.86023,.92915,.91115,.8858,.8858,.8858,.8858,.8858,1.02058,.8858,.89591,.89591,.89591,.89591,.8111,.79611,.89713,.86667,.86667,.86667,.86667,.86667,.86667,.86936,.896,.90083,.90083,.90083,.90083,.84224,.84224,.84224,.84224,.97276,.99793,.98714,.98714,.98714,.98714,.98714,1.08595,.89876,.99074,.99074,.99074,.99074,.942,1.0231,.942,.91755,.86667,.91755,.86667,.91755,.86667,.80314,.896,.80314,.896,.80314,.896,.80314,.896,.92222,.93372,.92915,1.01411,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.83051,1.00512,.83051,1.00512,.83051,1.00512,1,1,.90284,.99793,.90976,.99793,.86023,.84224,.86023,.84224,.86023,.84224,.86023,1.05326,.86023,.84224,.82873,1.07469,.74,1.09377,1,1,.938,.84869,1.06226,1,1,.84869,.83704,.84869,.81441,.85588,1.08927,.91115,.99793,1,1,.91115,.99793,.91887,.90991,.99793,.8858,.98714,.8858,.98714,.8858,.98714,.894,.91434,.74498,.98196,1,1,.74498,.98196,.73914,.792,.73914,.792,1,1,.73914,.792,1,1,.81363,.904,.81363,1.19137,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89633,1.01915,.8111,.942,.8111,.90531,.856,.90531,.856,.90531,.856,1,.92241,.91755,.86667,.788,.86936,.8858,.89876,1,1,.81363,1.19137,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90388,1.03901,.92138,.78105,.7154,.86169,.80513,.94007,.82528,.98612,1.06226,.91755,.8126,.81884,.92819,.73764,.90531,.90284,.8858,.86023,.8126,.91172,.96518,.91115,.83089,.8858,.87791,.79761,.89297,.81363,.88157,.89992,.85608,.81992,.94307,.86023,.88157,.95308,.98699,.99793,1.06226,.95817,.95308,.97358,.928,.98088,.98699,.92761,.99793,.96017,1.06226,.986,.944,.95978,.938,.96705,.98714,.80442,.98972,1,.89762,1.04552,.95817,.99007,.87064,.91879,.88888,1.06226,.95817,.98714,.95817,.88888,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89633,1.01915,.89633,1.01915,.89633,1.01915,.8111,.942,.9219,1,.89903,1,1,1,.93173,.93173,.93173,1,1.06304,1.06304,1.06904,.89903,.89903,.80549,1,1.156,1,1,.76575,.76575,1,1,.72458,1,1,1,1,.92241,1,1,1,.619,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.07257,1,.74705,.71119,1.02058,1.024,1.02119,1,1,1.1536,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05638,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];exports3.MyriadProRegularFactors=MyriadProRegularFactors;const MyriadProRegularMetrics={lineHeight:1.2,lineGap:.2};exports3.MyriadProRegularMetrics=MyriadProRegularMetrics},(__unused_webpack_module2,exports3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.SegoeuiRegularMetrics=exports3.SegoeuiRegularFactors=exports3.SegoeuiItalicMetrics=exports3.SegoeuiItalicFactors=exports3.SegoeuiBoldMetrics=exports3.SegoeuiBoldItalicMetrics=exports3.SegoeuiBoldItalicFactors=exports3.SegoeuiBoldFactors=void 0;const SegoeuiBoldFactors=[1.76738,1,1,.99297,.9824,1.04016,1.06497,1.03424,.97529,1.17647,1.23203,1.1085,1.1085,1.16939,1.2107,.9754,1.21408,.9754,1.59578,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,.81378,.81378,1.2107,1.2107,1.2107,.71703,.97847,.97363,.88776,.8641,1.02096,.79795,.85132,.914,1.06085,1.1406,.8007,.89858,.83693,1.14889,1.09398,.97489,.92094,.97489,.90399,.84041,.95923,1.00135,1,1.06467,.98243,.90996,.99361,1.1085,1.56942,1.1085,1.2107,.74627,.94282,.96752,1.01519,.86304,1.01359,.97278,1.15103,1.01359,.98561,1.02285,1.02285,1.00527,1.02285,1.0302,.99041,1.0008,1.01519,1.01359,1.02258,.79104,1.16862,.99041,.97454,1.02511,.99298,.96752,.95801,.94856,1.16579,.94856,1.2107,.9824,1.03424,1.03424,1,1.03424,1.16579,.8727,1.3871,1.18622,1.10818,1.04478,1.2107,1.18622,.75155,.94994,1.28826,1.21408,1.21408,.91056,1,.91572,.9754,.64663,1.18328,1.24866,1.04478,1.14169,1.15749,1.17389,.71703,.97363,.97363,.97363,.97363,.97363,.97363,.93506,.8641,.79795,.79795,.79795,.79795,1.1406,1.1406,1.1406,1.1406,1.02096,1.09398,.97426,.97426,.97426,.97426,.97426,1.2107,.97489,1.00135,1.00135,1.00135,1.00135,.90996,.92094,1.02798,.96752,.96752,.96752,.96752,.96752,.96752,.93136,.86304,.97278,.97278,.97278,.97278,1.02285,1.02285,1.02285,1.02285,.97122,.99041,1,1,1,1,1,1.28826,1.0008,.99041,.99041,.99041,.99041,.96752,1.01519,.96752,.97363,.96752,.97363,.96752,.97363,.96752,.8641,.86304,.8641,.86304,.8641,.86304,.8641,.86304,1.02096,1.03057,1.02096,1.03517,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.914,1.01359,.914,1.01359,.914,1.01359,1,1,1.06085,.98561,1.06085,1.00879,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,.97138,1.08692,.8007,1.02285,1,1,1.00527,.83693,1.02285,1,1,.83693,.9455,.83693,.90418,.83693,1.13005,1.09398,.99041,1,1,1.09398,.99041,.96692,1.09251,.99041,.97489,1.0008,.97489,1.0008,.97489,1.0008,.93994,.97931,.90399,1.02258,1,1,.90399,1.02258,.84041,.79104,.84041,.79104,.84041,.79104,.84041,.79104,1,1,.95923,1.07034,.95923,1.16862,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.06467,1.02511,.90996,.96752,.90996,.99361,.95801,.99361,.95801,.99361,.95801,1.07733,1.03424,.97363,.96752,.93506,.93136,.97489,1.0008,1,1,.95923,1.16862,1.15103,1.15103,1.01173,1.03959,.75953,.81378,.79912,1.15103,1.21994,.95161,.87815,1.01149,.81525,.7676,.98167,1.01134,1.02546,.84097,1.03089,1.18102,.97363,.88776,.85134,.97826,.79795,.99361,1.06085,.97489,1.1406,.89858,1.0388,1.14889,1.09398,.86039,.97489,1.0595,.92094,.94793,.95923,.90996,.99346,.98243,1.02112,.95493,1.1406,.90996,1.03574,1.02597,1.0008,1.18102,1.06628,1.03574,1.0192,1.01932,1.00886,.97531,1.0106,1.0008,1.13189,1.18102,1.02277,.98683,1.0016,.99561,1.07237,1.0008,.90434,.99921,.93803,.8965,1.23085,1.06628,1.04983,.96268,1.0499,.98439,1.18102,1.06628,1.0008,1.06628,.98439,.79795,1,1,1,1,1,1,1,1,1,1,1,1,1.09466,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.97278,1,1,1,1,1,1,1,1,1,1,1,1,1.02065,1,1,1,1,1,1,1.06467,1.02511,1.06467,1.02511,1.06467,1.02511,.90996,.96752,1,1.21408,.89903,1,1,.75155,1.04394,1.04394,1.04394,1.04394,.98633,.98633,.98633,.73047,.73047,1.20642,.91211,1.25635,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.12454,.93503,1.03424,1.19687,1.03424,1,1,1,.771,1,1,1.15749,1.15749,1.15749,1.10948,.86279,.94434,.86279,.94434,.86182,1,1,1.16897,1,.96085,.90137,1.2107,1.18416,1.13973,.69825,.9716,2.10339,1.29004,1.29004,1.21172,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18874,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.09193,1.09193,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];exports3.SegoeuiBoldFactors=SegoeuiBoldFactors;const SegoeuiBoldMetrics={lineHeight:1.33008,lineGap:0};exports3.SegoeuiBoldMetrics=SegoeuiBoldMetrics;const SegoeuiBoldItalicFactors=[1.76738,1,1,.98946,1.03959,1.04016,1.02809,1.036,.97639,1.10953,1.23203,1.11144,1.11144,1.16939,1.21237,.9754,1.21261,.9754,1.59754,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,.81378,.81378,1.21237,1.21237,1.21237,.73541,.97847,.97363,.89723,.87897,1.0426,.79429,.85292,.91149,1.05815,1.1406,.79631,.90128,.83853,1.04396,1.10615,.97552,.94436,.97552,.88641,.80527,.96083,1.00135,1,1.06777,.9817,.91142,.99361,1.11144,1.57293,1.11144,1.21237,.74627,1.31818,1.06585,.97042,.83055,.97042,.93503,1.1261,.97042,.97922,1.14236,.94552,1.01054,1.14236,1.02471,.97922,.94165,.97042,.97042,1.0276,.78929,1.1261,.97922,.95874,1.02197,.98507,.96752,.97168,.95107,1.16579,.95107,1.21237,1.03959,1.036,1.036,1,1.036,1.16579,.87357,1.31818,1.18754,1.26781,1.05356,1.21237,1.18622,.79487,.94994,1.29004,1.24047,1.24047,1.31818,1,.91484,.9754,1.31818,1.1349,1.24866,1.05356,1.13934,1.15574,1.17389,.73541,.97363,.97363,.97363,.97363,.97363,.97363,.94385,.87897,.79429,.79429,.79429,.79429,1.1406,1.1406,1.1406,1.1406,1.0426,1.10615,.97552,.97552,.97552,.97552,.97552,1.21237,.97552,1.00135,1.00135,1.00135,1.00135,.91142,.94436,.98721,1.06585,1.06585,1.06585,1.06585,1.06585,1.06585,.96705,.83055,.93503,.93503,.93503,.93503,1.14236,1.14236,1.14236,1.14236,.93125,.97922,.94165,.94165,.94165,.94165,.94165,1.29004,.94165,.97922,.97922,.97922,.97922,.96752,.97042,.96752,.97363,1.06585,.97363,1.06585,.97363,1.06585,.87897,.83055,.87897,.83055,.87897,.83055,.87897,.83055,1.0426,1.0033,1.0426,.97042,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.91149,.97042,.91149,.97042,.91149,.97042,1,1,1.05815,.97922,1.05815,.97922,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,.97441,1.04302,.79631,1.01582,1,1,1.01054,.83853,1.14236,1,1,.83853,1.09125,.83853,.90418,.83853,1.19508,1.10615,.97922,1,1,1.10615,.97922,1.01034,1.10466,.97922,.97552,.94165,.97552,.94165,.97552,.94165,.91602,.91981,.88641,1.0276,1,1,.88641,1.0276,.80527,.78929,.80527,.78929,.80527,.78929,.80527,.78929,1,1,.96083,1.05403,.95923,1.16862,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.06777,1.02197,.91142,.96752,.91142,.99361,.97168,.99361,.97168,.99361,.97168,1.23199,1.036,.97363,1.06585,.94385,.96705,.97552,.94165,1,1,.96083,1.1261,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,.95161,1.27126,1.00811,.83284,.77702,.99137,.95253,1.0347,.86142,1.07205,1.14236,.97363,.89723,.86869,1.09818,.79429,.99361,1.05815,.97552,1.1406,.90128,1.06662,1.04396,1.10615,.84918,.97552,1.04694,.94436,.98015,.96083,.91142,1.00356,.9817,1.01945,.98999,1.1406,.91142,1.04961,.9898,1.00639,1.14236,1.07514,1.04961,.99607,1.02897,1.008,.9898,.95134,1.00639,1.11121,1.14236,1.00518,.97981,1.02186,1,1.08578,.94165,.99314,.98387,.93028,.93377,1.35125,1.07514,1.10687,.93491,1.04232,1.00351,1.14236,1.07514,.94165,1.07514,1.00351,.79429,1,1,1,1,1,1,1,1,1,1,1,1,1.09097,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.93503,1,1,1,1,1,1,1,1,1,1,1,1,.96609,1,1,1,1,1,1,1.06777,1.02197,1.06777,1.02197,1.06777,1.02197,.91142,.96752,1,1.21261,.89903,1,1,.75155,1.04745,1.04745,1.04745,1.04394,.98633,.98633,.98633,.72959,.72959,1.20502,.91406,1.26514,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.09125,.93327,1.03336,1.16541,1.036,1,1,1,.771,1,1,1.15574,1.15574,1.15574,1.15574,.86364,.94434,.86279,.94434,.86224,1,1,1.16798,1,.96085,.90068,1.21237,1.18416,1.13904,.69825,.9716,2.10339,1.29004,1.29004,1.21339,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18775,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.13269,1.13269,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];exports3.SegoeuiBoldItalicFactors=SegoeuiBoldItalicFactors;const SegoeuiBoldItalicMetrics={lineHeight:1.33008,lineGap:0};exports3.SegoeuiBoldItalicMetrics=SegoeuiBoldItalicMetrics;const SegoeuiItalicFactors=[1.76738,1,1,.98946,1.14763,1.05365,1.06234,.96927,.92586,1.15373,1.18414,.91349,.91349,1.07403,1.17308,.78383,1.20088,.78383,1.42531,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78383,.78383,1.17308,1.17308,1.17308,.77349,.94565,.94729,.85944,.88506,.9858,.74817,.80016,.88449,.98039,.95782,.69238,.89898,.83231,.98183,1.03989,.96924,.86237,.96924,.80595,.74524,.86091,.95402,.94143,.98448,.8858,.83089,.93285,1.0949,1.39016,1.0949,1.45994,.74627,1.04839,.97454,.97454,.87207,.97454,.87533,1.06151,.97454,1.00176,1.16484,1.08132,.98047,1.16484,1.02989,1.01054,.96225,.97454,.97454,1.06598,.79004,1.16344,1.00351,.94629,.9973,.91016,.96777,.9043,.91082,.92481,.91082,1.17308,.95748,.96927,.96927,1,.96927,.92481,.80597,1.04839,1.23393,1.1781,.9245,1.17308,1.20808,.63218,.94261,1.24822,1.09971,1.09971,1.04839,1,.85273,.78032,1.04839,1.09971,1.22326,.9245,1.09836,1.13525,1.15222,.70424,.94729,.94729,.94729,.94729,.94729,.94729,.85498,.88506,.74817,.74817,.74817,.74817,.95782,.95782,.95782,.95782,.9858,1.03989,.96924,.96924,.96924,.96924,.96924,1.17308,.96924,.95402,.95402,.95402,.95402,.83089,.86237,.88409,.97454,.97454,.97454,.97454,.97454,.97454,.92916,.87207,.87533,.87533,.87533,.87533,.93146,.93146,.93146,.93146,.93854,1.01054,.96225,.96225,.96225,.96225,.96225,1.24822,.8761,1.00351,1.00351,1.00351,1.00351,.96777,.97454,.96777,.94729,.97454,.94729,.97454,.94729,.97454,.88506,.87207,.88506,.87207,.88506,.87207,.88506,.87207,.9858,.95391,.9858,.97454,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.88449,.97454,.88449,.97454,.88449,.97454,1,1,.98039,1.00176,.98039,1.00176,.95782,.93146,.95782,.93146,.95782,.93146,.95782,1.16484,.95782,.93146,.84421,1.12761,.69238,1.08132,1,1,.98047,.83231,1.16484,1,1,.84723,1.04861,.84723,.78755,.83231,1.23736,1.03989,1.01054,1,1,1.03989,1.01054,.9857,1.03849,1.01054,.96924,.96225,.96924,.96225,.96924,.96225,.92383,.90171,.80595,1.06598,1,1,.80595,1.06598,.74524,.79004,.74524,.79004,.74524,.79004,.74524,.79004,1,1,.86091,1.02759,.85771,1.16344,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.98448,.9973,.83089,.96777,.83089,.93285,.9043,.93285,.9043,.93285,.9043,1.31868,.96927,.94729,.97454,.85498,.92916,.96924,.8761,1,1,.86091,1.16344,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,.81965,.81965,.94729,.78032,.71022,.90883,.84171,.99877,.77596,1.05734,1.2,.94729,.85944,.82791,.9607,.74817,.93285,.98039,.96924,.95782,.89898,.98316,.98183,1.03989,.78614,.96924,.97642,.86237,.86075,.86091,.83089,.90082,.8858,.97296,1.01284,.95782,.83089,1.0976,1.04,1.03342,1.2,1.0675,1.0976,.98205,1.03809,1.05097,1.04,.95364,1.03342,1.05401,1.2,1.02148,1.0119,1.04724,1.0127,1.02732,.96225,.8965,.97783,.93574,.94818,1.30679,1.0675,1.11826,.99821,1.0557,1.0326,1.2,1.0675,.96225,1.0675,1.0326,.74817,1,1,1,1,1,1,1,1,1,1,1,1,1.03754,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87533,1,1,1,1,1,1,1,1,1,1,1,1,.98705,1,1,1,1,1,1,.98448,.9973,.98448,.9973,.98448,.9973,.83089,.96777,1,1.20088,.89903,1,1,.75155,.94945,.94945,.94945,.94945,1.12317,1.12317,1.12317,.67603,.67603,1.15621,.73584,1.21191,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87709,.96927,1.01473,.96927,1,1,1,.77295,1,1,1.09836,1.09836,1.09836,1.01522,.86321,.94434,.8649,.94434,.86182,1,1,1.083,1,.91578,.86438,1.17308,1.18416,1.14589,.69825,.97622,1.96791,1.24822,1.24822,1.17308,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.17984,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10742,1.10742,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];exports3.SegoeuiItalicFactors=SegoeuiItalicFactors;const SegoeuiItalicMetrics={lineHeight:1.33008,lineGap:0};exports3.SegoeuiItalicMetrics=SegoeuiItalicMetrics;const SegoeuiRegularFactors=[1.76738,1,1,.98594,1.02285,1.10454,1.06234,.96927,.92037,1.19985,1.2046,.90616,.90616,1.07152,1.1714,.78032,1.20088,.78032,1.40246,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78032,.78032,1.1714,1.1714,1.1714,.80597,.94084,.96706,.85944,.85734,.97093,.75842,.79936,.88198,.9831,.95782,.71387,.86969,.84636,1.07796,1.03584,.96924,.83968,.96924,.82826,.79649,.85771,.95132,.93119,.98965,.88433,.8287,.93365,1.08612,1.3638,1.08612,1.45786,.74627,.80499,.91484,1.05707,.92383,1.05882,.9403,1.12654,1.05882,1.01756,1.09011,1.09011,.99414,1.09011,1.034,1.01756,1.05356,1.05707,1.05882,1.04399,.84863,1.21968,1.01756,.95801,1.00068,.91797,.96777,.9043,.90351,.92105,.90351,1.1714,.85337,.96927,.96927,.99912,.96927,.92105,.80597,1.2434,1.20808,1.05937,.90957,1.1714,1.20808,.75155,.94261,1.24644,1.09971,1.09971,.84751,1,.85273,.78032,.61584,1.05425,1.17914,.90957,1.08665,1.11593,1.14169,.73381,.96706,.96706,.96706,.96706,.96706,.96706,.86035,.85734,.75842,.75842,.75842,.75842,.95782,.95782,.95782,.95782,.97093,1.03584,.96924,.96924,.96924,.96924,.96924,1.1714,.96924,.95132,.95132,.95132,.95132,.8287,.83968,.89049,.91484,.91484,.91484,.91484,.91484,.91484,.93575,.92383,.9403,.9403,.9403,.9403,.8717,.8717,.8717,.8717,1.00527,1.01756,1.05356,1.05356,1.05356,1.05356,1.05356,1.24644,.95923,1.01756,1.01756,1.01756,1.01756,.96777,1.05707,.96777,.96706,.91484,.96706,.91484,.96706,.91484,.85734,.92383,.85734,.92383,.85734,.92383,.85734,.92383,.97093,1.0969,.97093,1.05882,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.88198,1.05882,.88198,1.05882,.88198,1.05882,1,1,.9831,1.01756,.9831,1.01756,.95782,.8717,.95782,.8717,.95782,.8717,.95782,1.09011,.95782,.8717,.84784,1.11551,.71387,1.09011,1,1,.99414,.84636,1.09011,1,1,.84636,1.0536,.84636,.94298,.84636,1.23297,1.03584,1.01756,1,1,1.03584,1.01756,1.00323,1.03444,1.01756,.96924,1.05356,.96924,1.05356,.96924,1.05356,.93066,.98293,.82826,1.04399,1,1,.82826,1.04399,.79649,.84863,.79649,.84863,.79649,.84863,.79649,.84863,1,1,.85771,1.17318,.85771,1.21968,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.98965,1.00068,.8287,.96777,.8287,.93365,.9043,.93365,.9043,.93365,.9043,1.08571,.96927,.96706,.91484,.86035,.93575,.96924,.95923,1,1,.85771,1.21968,1.11437,1.11437,.93109,.91202,.60411,.84164,.55572,1.01173,.97361,.81818,.81818,.96635,.78032,.72727,.92366,.98601,1.03405,.77968,1.09799,1.2,.96706,.85944,.85638,.96491,.75842,.93365,.9831,.96924,.95782,.86969,.94152,1.07796,1.03584,.78437,.96924,.98715,.83968,.83491,.85771,.8287,.94492,.88433,.9287,1.0098,.95782,.8287,1.0625,.98248,1.03424,1.2,1.01071,1.0625,.95246,1.03809,1.04912,.98248,1.00221,1.03424,1.05443,1.2,1.04785,.99609,1.00169,1.05176,.99346,1.05356,.9087,1.03004,.95542,.93117,1.23362,1.01071,1.07831,1.02512,1.05205,1.03502,1.2,1.01071,1.05356,1.01071,1.03502,.75842,1,1,1,1,1,1,1,1,1,1,1,1,1.03719,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9403,1,1,1,1,1,1,1,1,1,1,1,1,1.04021,1,1,1,1,1,1,.98965,1.00068,.98965,1.00068,.98965,1.00068,.8287,.96777,1,1.20088,.89903,1,1,.75155,1.03077,1.03077,1.03077,1.03077,1.13196,1.13196,1.13196,.67428,.67428,1.16039,.73291,1.20996,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87796,.96927,1.01518,.96927,1,1,1,.77295,1,1,1.10539,1.10539,1.11358,1.06967,.86279,.94434,.86279,.94434,.86182,1,1,1.083,1,.91578,.86507,1.1714,1.18416,1.14589,.69825,.97622,1.9697,1.24822,1.24822,1.17238,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18083,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10938,1.10938,1,1,1,1.05425,1.09971,1.09971,1.09971,1,1,1,1,1,1,1,1,1,1,1];exports3.SegoeuiRegularFactors=SegoeuiRegularFactors;const SegoeuiRegularMetrics={lineHeight:1.33008,lineGap:0};exports3.SegoeuiRegularMetrics=SegoeuiRegularMetrics},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.PostScriptEvaluator=exports3.PostScriptCompiler=exports3.PDFFunctionFactory=void 0,exports3.isPDFFunction=isPDFFunction;var _primitives=__w_pdfjs_require__3(5),_util2=__w_pdfjs_require__3(2),_ps_parser=__w_pdfjs_require__3(58),_base_stream=__w_pdfjs_require__3(7),_image_utils=__w_pdfjs_require__3(59);const _PDFFunctionFactory=class{static{__name2(this,"_PDFFunctionFactory")}constructor({xref,isEvalSupported=!0}){this.xref=xref,this.isEvalSupported=isEvalSupported!==!1}create(fn){const cachedFunction=this.getCached(fn);if(cachedFunction)return cachedFunction;const parsedFunction=PDFFunction.parse({xref:this.xref,isEvalSupported:this.isEvalSupported,fn:fn instanceof _primitives.Ref?this.xref.fetch(fn):fn});return this._cache(fn,parsedFunction),parsedFunction}createFromArray(fnObj){const cachedFunction=this.getCached(fnObj);if(cachedFunction)return cachedFunction;const parsedFunction=PDFFunction.parseArray({xref:this.xref,isEvalSupported:this.isEvalSupported,fnObj:fnObj instanceof _primitives.Ref?this.xref.fetch(fnObj):fnObj});return this._cache(fnObj,parsedFunction),parsedFunction}getCached(cacheKey){let fnRef;if(cacheKey instanceof _primitives.Ref?fnRef=cacheKey:cacheKey instanceof _primitives.Dict?fnRef=cacheKey.objId:cacheKey instanceof _base_stream.BaseStream&&(fnRef=cacheKey.dict&&cacheKey.dict.objId),fnRef){const localFunction=this._localFunctionCache.getByRef(fnRef);if(localFunction)return localFunction}return null}_cache(cacheKey,parsedFunction){if(!parsedFunction)throw new Error('PDFFunctionFactory._cache - expected "parsedFunction" argument.');let fnRef;cacheKey instanceof _primitives.Ref?fnRef=cacheKey:cacheKey instanceof _primitives.Dict?fnRef=cacheKey.objId:cacheKey instanceof _base_stream.BaseStream&&(fnRef=cacheKey.dict&&cacheKey.dict.objId),fnRef&&this._localFunctionCache.set(null,fnRef,parsedFunction)}get _localFunctionCache(){return(0,_util2.shadow)(this,"_localFunctionCache",new _image_utils.LocalFunctionCache)}};__name(_PDFFunctionFactory,"PDFFunctionFactory");let PDFFunctionFactory=_PDFFunctionFactory;exports3.PDFFunctionFactory=PDFFunctionFactory;function toNumberArray(arr){if(!Array.isArray(arr))return null;const length=arr.length;for(let i=0;i<length;i++)if(typeof arr[i]!="number"){const result=new Array(length);for(let j=0;j<length;j++)result[j]=+arr[j];return result}return arr}__name2(toNumberArray,"toNumberArray"),__name(toNumberArray,"toNumberArray");const _PDFFunction=class{static{__name2(this,"_PDFFunction")}static getSampleArray(size,outputSize,bps,stream){let i,ii,length=1;for(i=0,ii=size.length;i<ii;i++)length*=size[i];length*=outputSize;const array=new Array(length);let codeSize=0,codeBuf=0;const sampleMul=1/(2**bps-1),strBytes=stream.getBytes((length*bps+7)/8);let strIdx=0;for(i=0;i<length;i++){for(;codeSize<bps;)codeBuf<<=8,codeBuf|=strBytes[strIdx++],codeSize+=8;codeSize-=bps,array[i]=(codeBuf>>codeSize)*sampleMul,codeBuf&=(1<<codeSize)-1}return array}static parse({xref,isEvalSupported,fn}){const dict=fn.dict||fn;switch(dict.get("FunctionType")){case 0:return this.constructSampled({xref,isEvalSupported,fn,dict});case 1:break;case 2:return this.constructInterpolated({xref,isEvalSupported,dict});case 3:return this.constructStiched({xref,isEvalSupported,dict});case 4:return this.constructPostScript({xref,isEvalSupported,fn,dict})}throw new _util2.FormatError("Unknown type of function")}static parseArray({xref,isEvalSupported,fnObj}){if(!Array.isArray(fnObj))return this.parse({xref,isEvalSupported,fn:fnObj});const fnArray=[];for(let j=0,jj=fnObj.length;j<jj;j++)fnArray.push(this.parse({xref,isEvalSupported,fn:xref.fetchIfRef(fnObj[j])}));return function(src,srcOffset,dest,destOffset){for(let i=0,ii=fnArray.length;i<ii;i++)fnArray[i](src,srcOffset,dest,destOffset+i)}}static constructSampled({xref,isEvalSupported,fn,dict}){function toMultiArray(arr){const inputLength=arr.length,out=[];let index=0;for(let i=0;i<inputLength;i+=2)out[index++]=[arr[i],arr[i+1]];return out}__name2(toMultiArray,"toMultiArray"),__name(toMultiArray,"toMultiArray");function interpolate(x,xmin,xmax,ymin,ymax){return ymin+(x-xmin)*((ymax-ymin)/(xmax-xmin))}__name2(interpolate,"interpolate"),__name(interpolate,"interpolate");let domain=toNumberArray(dict.getArray("Domain")),range=toNumberArray(dict.getArray("Range"));if(!domain||!range)throw new _util2.FormatError("No domain or range");const inputSize=domain.length/2,outputSize=range.length/2;domain=toMultiArray(domain),range=toMultiArray(range);const size=toNumberArray(dict.getArray("Size")),bps=dict.get("BitsPerSample"),order=dict.get("Order")||1;order!==1&&(0,_util2.info)("No support for cubic spline interpolation: "+order);let encode=toNumberArray(dict.getArray("Encode"));if(encode)encode=toMultiArray(encode);else{encode=[];for(let i=0;i<inputSize;++i)encode.push([0,size[i]-1])}let decode=toNumberArray(dict.getArray("Decode"));decode?decode=toMultiArray(decode):decode=range;const samples=this.getSampleArray(size,outputSize,bps,fn);return __name(__name2(function(src,srcOffset,dest,destOffset){const cubeVertices=1<<inputSize,cubeN=new Float64Array(cubeVertices),cubeVertex=new Uint32Array(cubeVertices);let i,j;for(j=0;j<cubeVertices;j++)cubeN[j]=1;let k=outputSize,pos=1;for(i=0;i<inputSize;++i){const domain_2i=domain[i][0],domain_2i_1=domain[i][1],xi=Math.min(Math.max(src[srcOffset+i],domain_2i),domain_2i_1);let e=interpolate(xi,domain_2i,domain_2i_1,encode[i][0],encode[i][1]);const size_i=size[i];e=Math.min(Math.max(e,0),size_i-1);const e0=e<size_i-1?Math.floor(e):e-1,n0=e0+1-e,n1=e-e0,offset0=e0*k,offset1=offset0+k;for(j=0;j<cubeVertices;j++)j&pos?(cubeN[j]*=n1,cubeVertex[j]+=offset1):(cubeN[j]*=n0,cubeVertex[j]+=offset0);k*=size_i,pos<<=1}for(j=0;j<outputSize;++j){let rj=0;for(i=0;i<cubeVertices;i++)rj+=samples[cubeVertex[i]+j]*cubeN[i];rj=interpolate(rj,0,1,decode[j][0],decode[j][1]),dest[destOffset+j]=Math.min(Math.max(rj,range[j][0]),range[j][1])}},"constructSampledFn"),"constructSampledFn")}static constructInterpolated({xref,isEvalSupported,dict}){const c0=toNumberArray(dict.getArray("C0"))||[0],c1=toNumberArray(dict.getArray("C1"))||[1],n=dict.get("N"),diff=[];for(let i=0,ii=c0.length;i<ii;++i)diff.push(c1[i]-c0[i]);const length=diff.length;return __name(__name2(function(src,srcOffset,dest,destOffset){const x=n===1?src[srcOffset]:src[srcOffset]**n;for(let j=0;j<length;++j)dest[destOffset+j]=c0[j]+x*diff[j]},"constructInterpolatedFn"),"constructInterpolatedFn")}static constructStiched({xref,isEvalSupported,dict}){const domain=toNumberArray(dict.getArray("Domain"));if(!domain)throw new _util2.FormatError("No domain");if(domain.length/2!==1)throw new _util2.FormatError("Bad domain for stiched function");const fnRefs=dict.get("Functions"),fns=[];for(let i=0,ii=fnRefs.length;i<ii;++i)fns.push(this.parse({xref,isEvalSupported,fn:xref.fetchIfRef(fnRefs[i])}));const bounds=toNumberArray(dict.getArray("Bounds")),encode=toNumberArray(dict.getArray("Encode")),tmpBuf=new Float32Array(1);return __name(__name2(function(src,srcOffset,dest,destOffset){const v=__name(__name2(function(v2,min,max){return v2>max?v2=max:v2<min&&(v2=min),v2},"constructStichedFromIRClip"),"constructStichedFromIRClip")(src[srcOffset],domain[0],domain[1]),length=bounds.length;let i;for(i=0;i<length&&!(v<bounds[i]);++i);let dmin=domain[0];i>0&&(dmin=bounds[i-1]);let dmax=domain[1];i<bounds.length&&(dmax=bounds[i]);const rmin=encode[2*i],rmax=encode[2*i+1];tmpBuf[0]=dmin===dmax?rmin:rmin+(v-dmin)*(rmax-rmin)/(dmax-dmin),fns[i](tmpBuf,0,dest,destOffset)},"constructStichedFn"),"constructStichedFn")}static constructPostScript({xref,isEvalSupported,fn,dict}){const domain=toNumberArray(dict.getArray("Domain")),range=toNumberArray(dict.getArray("Range"));if(!domain)throw new _util2.FormatError("No domain.");if(!range)throw new _util2.FormatError("No range.");const lexer=new _ps_parser.PostScriptLexer(fn),code=new _ps_parser.PostScriptParser(lexer).parse();if(isEvalSupported&&_util2.FeatureTest.isEvalSupported){const compiled=new PostScriptCompiler().compile(code,domain,range);if(compiled)return new Function("src","srcOffset","dest","destOffset",compiled)}(0,_util2.info)("Unable to compile PS function");const numOutputs=range.length>>1,numInputs=domain.length>>1,evaluator=new PostScriptEvaluator(code),cache=Object.create(null);let cache_available=2048*4;const tmpBuf=new Float32Array(numInputs);return __name(__name2(function(src,srcOffset,dest,destOffset){let i,value,key="";const input=tmpBuf;for(i=0;i<numInputs;i++)value=src[srcOffset+i],input[i]=value,key+=value+"_";const cachedValue=cache[key];if(cachedValue!==void 0){dest.set(cachedValue,destOffset);return}const output=new Float32Array(numOutputs),stack=evaluator.execute(input),stackIndex=stack.length-numOutputs;for(i=0;i<numOutputs;i++){value=stack[stackIndex+i];let bound=range[i*2];value<bound?value=bound:(bound=range[i*2+1],value>bound&&(value=bound)),output[i]=value}cache_available>0&&(cache_available--,cache[key]=output),dest.set(output,destOffset)},"constructPostScriptFn"),"constructPostScriptFn")}};__name(_PDFFunction,"PDFFunction");let PDFFunction=_PDFFunction;function isPDFFunction(v){let fnDict;if(typeof v!="object")return!1;if(v instanceof _primitives.Dict)fnDict=v;else if(v instanceof _base_stream.BaseStream)fnDict=v.dict;else return!1;return fnDict.has("FunctionType")}__name2(isPDFFunction,"isPDFFunction"),__name(isPDFFunction,"isPDFFunction");const _PostScriptStack=class _PostScriptStack2{static{__name2(this,"_PostScriptStack")}static get MAX_STACK_SIZE(){return(0,_util2.shadow)(this,"MAX_STACK_SIZE",100)}constructor(initialStack){this.stack=initialStack?Array.prototype.slice.call(initialStack,0):[]}push(value){if(this.stack.length>=_PostScriptStack2.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");this.stack.push(value)}pop(){if(this.stack.length<=0)throw new Error("PostScript function stack underflow.");return this.stack.pop()}copy(n){if(this.stack.length+n>=_PostScriptStack2.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");const stack=this.stack;for(let i=stack.length-n,j=n-1;j>=0;j--,i++)stack.push(stack[i])}index(n){this.push(this.stack[this.stack.length-n-1])}roll(n,p){const stack=this.stack,l=stack.length-n,r=stack.length-1,c=l+(p-Math.floor(p/n)*n);for(let i=l,j=r;i<j;i++,j--){const t=stack[i];stack[i]=stack[j],stack[j]=t}for(let i=l,j=c-1;i<j;i++,j--){const t=stack[i];stack[i]=stack[j],stack[j]=t}for(let i=c,j=r;i<j;i++,j--){const t=stack[i];stack[i]=stack[j],stack[j]=t}}};__name(_PostScriptStack,"PostScriptStack");let PostScriptStack=_PostScriptStack;const _PostScriptEvaluator=class{static{__name2(this,"_PostScriptEvaluator")}constructor(operators){this.operators=operators}execute(initialStack){const stack=new PostScriptStack(initialStack);let counter=0;const operators=this.operators,length=operators.length;let operator,a,b;for(;counter<length;){if(operator=operators[counter++],typeof operator=="number"){stack.push(operator);continue}switch(operator){case"jz":b=stack.pop(),a=stack.pop(),a||(counter=b);break;case"j":a=stack.pop(),counter=a;break;case"abs":a=stack.pop(),stack.push(Math.abs(a));break;case"add":b=stack.pop(),a=stack.pop(),stack.push(a+b);break;case"and":b=stack.pop(),a=stack.pop(),typeof a=="boolean"&&typeof b=="boolean"?stack.push(a&&b):stack.push(a&b);break;case"atan":a=stack.pop(),stack.push(Math.atan(a));break;case"bitshift":b=stack.pop(),a=stack.pop(),a>0?stack.push(a<<b):stack.push(a>>b);break;case"ceiling":a=stack.pop(),stack.push(Math.ceil(a));break;case"copy":a=stack.pop(),stack.copy(a);break;case"cos":a=stack.pop(),stack.push(Math.cos(a));break;case"cvi":a=stack.pop()|0,stack.push(a);break;case"cvr":break;case"div":b=stack.pop(),a=stack.pop(),stack.push(a/b);break;case"dup":stack.copy(1);break;case"eq":b=stack.pop(),a=stack.pop(),stack.push(a===b);break;case"exch":stack.roll(2,1);break;case"exp":b=stack.pop(),a=stack.pop(),stack.push(a**b);break;case"false":stack.push(!1);break;case"floor":a=stack.pop(),stack.push(Math.floor(a));break;case"ge":b=stack.pop(),a=stack.pop(),stack.push(a>=b);break;case"gt":b=stack.pop(),a=stack.pop(),stack.push(a>b);break;case"idiv":b=stack.pop(),a=stack.pop(),stack.push(a/b|0);break;case"index":a=stack.pop(),stack.index(a);break;case"le":b=stack.pop(),a=stack.pop(),stack.push(a<=b);break;case"ln":a=stack.pop(),stack.push(Math.log(a));break;case"log":a=stack.pop(),stack.push(Math.log(a)/Math.LN10);break;case"lt":b=stack.pop(),a=stack.pop(),stack.push(a<b);break;case"mod":b=stack.pop(),a=stack.pop(),stack.push(a%b);break;case"mul":b=stack.pop(),a=stack.pop(),stack.push(a*b);break;case"ne":b=stack.pop(),a=stack.pop(),stack.push(a!==b);break;case"neg":a=stack.pop(),stack.push(-a);break;case"not":a=stack.pop(),typeof a=="boolean"?stack.push(!a):stack.push(~a);break;case"or":b=stack.pop(),a=stack.pop(),typeof a=="boolean"&&typeof b=="boolean"?stack.push(a||b):stack.push(a|b);break;case"pop":stack.pop();break;case"roll":b=stack.pop(),a=stack.pop(),stack.roll(a,b);break;case"round":a=stack.pop(),stack.push(Math.round(a));break;case"sin":a=stack.pop(),stack.push(Math.sin(a));break;case"sqrt":a=stack.pop(),stack.push(Math.sqrt(a));break;case"sub":b=stack.pop(),a=stack.pop(),stack.push(a-b);break;case"true":stack.push(!0);break;case"truncate":a=stack.pop(),a=a<0?Math.ceil(a):Math.floor(a),stack.push(a);break;case"xor":b=stack.pop(),a=stack.pop(),typeof a=="boolean"&&typeof b=="boolean"?stack.push(a!==b):stack.push(a^b);break;default:throw new _util2.FormatError(`Unknown operator ${operator}`)}}return stack.stack}};__name(_PostScriptEvaluator,"PostScriptEvaluator");let PostScriptEvaluator=_PostScriptEvaluator;exports3.PostScriptEvaluator=PostScriptEvaluator;const _AstNode=class{static{__name2(this,"_AstNode")}constructor(type){this.type=type}visit(visitor){(0,_util2.unreachable)("abstract method")}};__name(_AstNode,"AstNode");let AstNode=_AstNode;const _AstArgument=class extends AstNode{static{__name2(this,"_AstArgument")}constructor(index,min,max){super("args"),this.index=index,this.min=min,this.max=max}visit(visitor){visitor.visitArgument(this)}};__name(_AstArgument,"AstArgument");let AstArgument=_AstArgument;const _AstLiteral=class extends AstNode{static{__name2(this,"_AstLiteral")}constructor(number){super("literal"),this.number=number,this.min=number,this.max=number}visit(visitor){visitor.visitLiteral(this)}};__name(_AstLiteral,"AstLiteral");let AstLiteral=_AstLiteral;const _AstBinaryOperation=class extends AstNode{static{__name2(this,"_AstBinaryOperation")}constructor(op,arg1,arg2,min,max){super("binary"),this.op=op,this.arg1=arg1,this.arg2=arg2,this.min=min,this.max=max}visit(visitor){visitor.visitBinaryOperation(this)}};__name(_AstBinaryOperation,"AstBinaryOperation");let AstBinaryOperation=_AstBinaryOperation;const _AstMin=class extends AstNode{static{__name2(this,"_AstMin")}constructor(arg,max){super("max"),this.arg=arg,this.min=arg.min,this.max=max}visit(visitor){visitor.visitMin(this)}};__name(_AstMin,"AstMin");let AstMin=_AstMin;const _AstVariable=class extends AstNode{static{__name2(this,"_AstVariable")}constructor(index,min,max){super("var"),this.index=index,this.min=min,this.max=max}visit(visitor){visitor.visitVariable(this)}};__name(_AstVariable,"AstVariable");let AstVariable=_AstVariable;const _AstVariableDefinition=class extends AstNode{static{__name2(this,"_AstVariableDefinition")}constructor(variable,arg){super("definition"),this.variable=variable,this.arg=arg}visit(visitor){visitor.visitVariableDefinition(this)}};__name(_AstVariableDefinition,"AstVariableDefinition");let AstVariableDefinition=_AstVariableDefinition;const _ExpressionBuilderVisitor=class{static{__name2(this,"_ExpressionBuilderVisitor")}constructor(){this.parts=[]}visitArgument(arg){this.parts.push("Math.max(",arg.min,", Math.min(",arg.max,", src[srcOffset + ",arg.index,"]))")}visitVariable(variable){this.parts.push("v",variable.index)}visitLiteral(literal){this.parts.push(literal.number)}visitBinaryOperation(operation){this.parts.push("("),operation.arg1.visit(this),this.parts.push(" ",operation.op," "),operation.arg2.visit(this),this.parts.push(")")}visitVariableDefinition(definition){this.parts.push("var "),definition.variable.visit(this),this.parts.push(" = "),definition.arg.visit(this),this.parts.push(";")}visitMin(max){this.parts.push("Math.min("),max.arg.visit(this),this.parts.push(", ",max.max,")")}toString(){return this.parts.join("")}};__name(_ExpressionBuilderVisitor,"ExpressionBuilderVisitor");let ExpressionBuilderVisitor=_ExpressionBuilderVisitor;function buildAddOperation(num1,num2){return num2.type==="literal"&&num2.number===0?num1:num1.type==="literal"&&num1.number===0?num2:num2.type==="literal"&&num1.type==="literal"?new AstLiteral(num1.number+num2.number):new AstBinaryOperation("+",num1,num2,num1.min+num2.min,num1.max+num2.max)}__name2(buildAddOperation,"buildAddOperation"),__name(buildAddOperation,"buildAddOperation");function buildMulOperation(num1,num2){if(num2.type==="literal"){if(num2.number===0)return new AstLiteral(0);if(num2.number===1)return num1;if(num1.type==="literal")return new AstLiteral(num1.number*num2.number)}if(num1.type==="literal"){if(num1.number===0)return new AstLiteral(0);if(num1.number===1)return num2}const min=Math.min(num1.min*num2.min,num1.min*num2.max,num1.max*num2.min,num1.max*num2.max),max=Math.max(num1.min*num2.min,num1.min*num2.max,num1.max*num2.min,num1.max*num2.max);return new AstBinaryOperation("*",num1,num2,min,max)}__name2(buildMulOperation,"buildMulOperation"),__name(buildMulOperation,"buildMulOperation");function buildSubOperation(num1,num2){if(num2.type==="literal"){if(num2.number===0)return num1;if(num1.type==="literal")return new AstLiteral(num1.number-num2.number)}return num2.type==="binary"&&num2.op==="-"&&num1.type==="literal"&&num1.number===1&&num2.arg1.type==="literal"&&num2.arg1.number===1?num2.arg2:new AstBinaryOperation("-",num1,num2,num1.min-num2.max,num1.max-num2.min)}__name2(buildSubOperation,"buildSubOperation"),__name(buildSubOperation,"buildSubOperation");function buildMinOperation(num1,max){return num1.min>=max?new AstLiteral(max):num1.max<=max?num1:new AstMin(num1,max)}__name2(buildMinOperation,"buildMinOperation"),__name(buildMinOperation,"buildMinOperation");const _PostScriptCompiler=class{static{__name2(this,"_PostScriptCompiler")}compile(code,domain,range){const stack=[],instructions=[],inputSize=domain.length>>1,outputSize=range.length>>1;let lastRegister=0,n,j,num1,num2,ast1,ast2,tmpVar,item;for(let i=0;i<inputSize;i++)stack.push(new AstArgument(i,domain[i*2],domain[i*2+1]));for(let i=0,ii=code.length;i<ii;i++){if(item=code[i],typeof item=="number"){stack.push(new AstLiteral(item));continue}switch(item){case"add":if(stack.length<2)return null;num2=stack.pop(),num1=stack.pop(),stack.push(buildAddOperation(num1,num2));break;case"cvr":if(stack.length<1)return null;break;case"mul":if(stack.length<2)return null;num2=stack.pop(),num1=stack.pop(),stack.push(buildMulOperation(num1,num2));break;case"sub":if(stack.length<2)return null;num2=stack.pop(),num1=stack.pop(),stack.push(buildSubOperation(num1,num2));break;case"exch":if(stack.length<2)return null;ast1=stack.pop(),ast2=stack.pop(),stack.push(ast1,ast2);break;case"pop":if(stack.length<1)return null;stack.pop();break;case"index":if(stack.length<1||(num1=stack.pop(),num1.type!=="literal")||(n=num1.number,n<0||!Number.isInteger(n)||stack.length<n))return null;if(ast1=stack[stack.length-n-1],ast1.type==="literal"||ast1.type==="var"){stack.push(ast1);break}tmpVar=new AstVariable(lastRegister++,ast1.min,ast1.max),stack[stack.length-n-1]=tmpVar,stack.push(tmpVar),instructions.push(new AstVariableDefinition(tmpVar,ast1));break;case"dup":if(stack.length<1)return null;if(typeof code[i+1]=="number"&&code[i+2]==="gt"&&code[i+3]===i+7&&code[i+4]==="jz"&&code[i+5]==="pop"&&code[i+6]===code[i+1]){num1=stack.pop(),stack.push(buildMinOperation(num1,code[i+1])),i+=6;break}if(ast1=stack.at(-1),ast1.type==="literal"||ast1.type==="var"){stack.push(ast1);break}tmpVar=new AstVariable(lastRegister++,ast1.min,ast1.max),stack[stack.length-1]=tmpVar,stack.push(tmpVar),instructions.push(new AstVariableDefinition(tmpVar,ast1));break;case"roll":if(stack.length<2||(num2=stack.pop(),num1=stack.pop(),num2.type!=="literal"||num1.type!=="literal")||(j=num2.number,n=num1.number,n<=0||!Number.isInteger(n)||!Number.isInteger(j)||stack.length<n))return null;if(j=(j%n+n)%n,j===0)break;Array.prototype.push.apply(stack,stack.splice(stack.length-n,n-j));break;default:return null}}if(stack.length!==outputSize)return null;const result=[];for(const instruction of instructions){const statementBuilder=new ExpressionBuilderVisitor;instruction.visit(statementBuilder),result.push(statementBuilder.toString())}for(let i=0,ii=stack.length;i<ii;i++){const expr=stack[i],statementBuilder=new ExpressionBuilderVisitor;expr.visit(statementBuilder);const min=range[i*2],max=range[i*2+1],out=[statementBuilder.toString()];min>expr.min&&(out.unshift("Math.max(",min,", "),out.push(")")),max<expr.max&&(out.unshift("Math.min(",max,", "),out.push(")")),out.unshift("dest[destOffset + ",i,"] = "),out.push(";"),result.push(out.join(""))}return result.join(`
`)}};__name(_PostScriptCompiler,"PostScriptCompiler");let PostScriptCompiler=_PostScriptCompiler;exports3.PostScriptCompiler=PostScriptCompiler},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.PostScriptParser=exports3.PostScriptLexer=void 0;var _util2=__w_pdfjs_require__3(2),_primitives=__w_pdfjs_require__3(5),_core_utils=__w_pdfjs_require__3(6);const _PostScriptParser=class{static{__name2(this,"_PostScriptParser")}constructor(lexer){this.lexer=lexer,this.operators=[],this.token=null,this.prev=null}nextToken(){this.prev=this.token,this.token=this.lexer.getToken()}accept(type){return this.token.type===type?(this.nextToken(),!0):!1}expect(type){if(this.accept(type))return!0;throw new _util2.FormatError(`Unexpected symbol: found ${this.token.type} expected ${type}.`)}parse(){return this.nextToken(),this.expect(PostScriptTokenTypes.LBRACE),this.parseBlock(),this.expect(PostScriptTokenTypes.RBRACE),this.operators}parseBlock(){for(;;)if(this.accept(PostScriptTokenTypes.NUMBER))this.operators.push(this.prev.value);else if(this.accept(PostScriptTokenTypes.OPERATOR))this.operators.push(this.prev.value);else if(this.accept(PostScriptTokenTypes.LBRACE))this.parseCondition();else return}parseCondition(){const conditionLocation=this.operators.length;if(this.operators.push(null,null),this.parseBlock(),this.expect(PostScriptTokenTypes.RBRACE),this.accept(PostScriptTokenTypes.IF))this.operators[conditionLocation]=this.operators.length,this.operators[conditionLocation+1]="jz";else if(this.accept(PostScriptTokenTypes.LBRACE)){const jumpLocation=this.operators.length;this.operators.push(null,null);const endOfTrue=this.operators.length;this.parseBlock(),this.expect(PostScriptTokenTypes.RBRACE),this.expect(PostScriptTokenTypes.IFELSE),this.operators[jumpLocation]=this.operators.length,this.operators[jumpLocation+1]="j",this.operators[conditionLocation]=endOfTrue,this.operators[conditionLocation+1]="jz"}else throw new _util2.FormatError("PS Function: error parsing conditional.")}};__name(_PostScriptParser,"PostScriptParser");let PostScriptParser=_PostScriptParser;exports3.PostScriptParser=PostScriptParser;const PostScriptTokenTypes={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5},_PostScriptToken=class _PostScriptToken2{static{__name2(this,"_PostScriptToken")}static get opCache(){return(0,_util2.shadow)(this,"opCache",Object.create(null))}constructor(type,value){this.type=type,this.value=value}static getOperator(op){const opValue=_PostScriptToken2.opCache[op];return opValue||(_PostScriptToken2.opCache[op]=new _PostScriptToken2(PostScriptTokenTypes.OPERATOR,op))}static get LBRACE(){return(0,_util2.shadow)(this,"LBRACE",new _PostScriptToken2(PostScriptTokenTypes.LBRACE,"{"))}static get RBRACE(){return(0,_util2.shadow)(this,"RBRACE",new _PostScriptToken2(PostScriptTokenTypes.RBRACE,"}"))}static get IF(){return(0,_util2.shadow)(this,"IF",new _PostScriptToken2(PostScriptTokenTypes.IF,"IF"))}static get IFELSE(){return(0,_util2.shadow)(this,"IFELSE",new _PostScriptToken2(PostScriptTokenTypes.IFELSE,"IFELSE"))}};__name(_PostScriptToken,"PostScriptToken");let PostScriptToken=_PostScriptToken;const _PostScriptLexer=class{static{__name2(this,"_PostScriptLexer")}constructor(stream){this.stream=stream,this.nextChar(),this.strBuf=[]}nextChar(){return this.currentChar=this.stream.getByte()}getToken(){let comment=!1,ch=this.currentChar;for(;;){if(ch<0)return _primitives.EOF;if(comment)(ch===10||ch===13)&&(comment=!1);else if(ch===37)comment=!0;else if(!(0,_core_utils.isWhiteSpace)(ch))break;ch=this.nextChar()}switch(ch|0){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return new PostScriptToken(PostScriptTokenTypes.NUMBER,this.getNumber());case 123:return this.nextChar(),PostScriptToken.LBRACE;case 125:return this.nextChar(),PostScriptToken.RBRACE}const strBuf=this.strBuf;for(strBuf.length=0,strBuf[0]=String.fromCharCode(ch);(ch=this.nextChar())>=0&&(ch>=65&&ch<=90||ch>=97&&ch<=122);)strBuf.push(String.fromCharCode(ch));const str=strBuf.join("");switch(str.toLowerCase()){case"if":return PostScriptToken.IF;case"ifelse":return PostScriptToken.IFELSE;default:return PostScriptToken.getOperator(str)}}getNumber(){let ch=this.currentChar;const strBuf=this.strBuf;for(strBuf.length=0,strBuf[0]=String.fromCharCode(ch);(ch=this.nextChar())>=0&&(ch>=48&&ch<=57||ch===45||ch===46);)strBuf.push(String.fromCharCode(ch));const value=parseFloat(strBuf.join(""));if(isNaN(value))throw new _util2.FormatError(`Invalid floating point number: ${value}`);return value}};__name(_PostScriptLexer,"PostScriptLexer");let PostScriptLexer=_PostScriptLexer;exports3.PostScriptLexer=PostScriptLexer},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.LocalTilingPatternCache=exports3.LocalImageCache=exports3.LocalGStateCache=exports3.LocalFunctionCache=exports3.LocalColorSpaceCache=exports3.GlobalImageCache=void 0;var _util2=__w_pdfjs_require__3(2),_primitives=__w_pdfjs_require__3(5);const _BaseLocalCache=class _BaseLocalCache2{static{__name2(this,"_BaseLocalCache")}constructor(options){this.constructor===_BaseLocalCache2&&(0,_util2.unreachable)("Cannot initialize BaseLocalCache."),this._onlyRefs=(options&&options.onlyRefs)===!0,this._onlyRefs||(this._nameRefMap=new Map,this._imageMap=new Map),this._imageCache=new _primitives.RefSetCache}getByName(name){this._onlyRefs&&(0,_util2.unreachable)("Should not call `getByName` method.");const ref=this._nameRefMap.get(name);return ref?this.getByRef(ref):this._imageMap.get(name)||null}getByRef(ref){return this._imageCache.get(ref)||null}set(name,ref,data){(0,_util2.unreachable)("Abstract method `set` called.")}};__name(_BaseLocalCache,"BaseLocalCache");let BaseLocalCache=_BaseLocalCache;const _LocalImageCache=class extends BaseLocalCache{static{__name2(this,"_LocalImageCache")}set(name,ref=null,data){if(typeof name!="string")throw new Error('LocalImageCache.set - expected "name" argument.');if(ref){if(this._imageCache.has(ref))return;this._nameRefMap.set(name,ref),this._imageCache.put(ref,data);return}this._imageMap.has(name)||this._imageMap.set(name,data)}};__name(_LocalImageCache,"LocalImageCache");let LocalImageCache=_LocalImageCache;exports3.LocalImageCache=LocalImageCache;const _LocalColorSpaceCache=class extends BaseLocalCache{static{__name2(this,"_LocalColorSpaceCache")}set(name=null,ref=null,data){if(typeof name!="string"&&!ref)throw new Error('LocalColorSpaceCache.set - expected "name" and/or "ref" argument.');if(ref){if(this._imageCache.has(ref))return;name!==null&&this._nameRefMap.set(name,ref),this._imageCache.put(ref,data);return}this._imageMap.has(name)||this._imageMap.set(name,data)}};__name(_LocalColorSpaceCache,"LocalColorSpaceCache");let LocalColorSpaceCache=_LocalColorSpaceCache;exports3.LocalColorSpaceCache=LocalColorSpaceCache;const _LocalFunctionCache=class extends BaseLocalCache{static{__name2(this,"_LocalFunctionCache")}constructor(options){super({onlyRefs:!0})}set(name=null,ref,data){if(!ref)throw new Error('LocalFunctionCache.set - expected "ref" argument.');this._imageCache.has(ref)||this._imageCache.put(ref,data)}};__name(_LocalFunctionCache,"LocalFunctionCache");let LocalFunctionCache=_LocalFunctionCache;exports3.LocalFunctionCache=LocalFunctionCache;const _LocalGStateCache=class extends BaseLocalCache{static{__name2(this,"_LocalGStateCache")}set(name,ref=null,data){if(typeof name!="string")throw new Error('LocalGStateCache.set - expected "name" argument.');if(ref){if(this._imageCache.has(ref))return;this._nameRefMap.set(name,ref),this._imageCache.put(ref,data);return}this._imageMap.has(name)||this._imageMap.set(name,data)}};__name(_LocalGStateCache,"LocalGStateCache");let LocalGStateCache=_LocalGStateCache;exports3.LocalGStateCache=LocalGStateCache;const _LocalTilingPatternCache=class extends BaseLocalCache{static{__name2(this,"_LocalTilingPatternCache")}constructor(options){super({onlyRefs:!0})}set(name=null,ref,data){if(!ref)throw new Error('LocalTilingPatternCache.set - expected "ref" argument.');this._imageCache.has(ref)||this._imageCache.put(ref,data)}};__name(_LocalTilingPatternCache,"LocalTilingPatternCache");let LocalTilingPatternCache=_LocalTilingPatternCache;exports3.LocalTilingPatternCache=LocalTilingPatternCache;const _GlobalImageCache=class _GlobalImageCache2{static{__name2(this,"_GlobalImageCache")}static get NUM_PAGES_THRESHOLD(){return(0,_util2.shadow)(this,"NUM_PAGES_THRESHOLD",2)}static get MIN_IMAGES_TO_CACHE(){return(0,_util2.shadow)(this,"MIN_IMAGES_TO_CACHE",10)}static get MAX_BYTE_SIZE(){return(0,_util2.shadow)(this,"MAX_BYTE_SIZE",4e7)}constructor(){this._refCache=new _primitives.RefSetCache,this._imageCache=new _primitives.RefSetCache}get _byteSize(){let byteSize=0;for(const imageData of this._imageCache)byteSize+=imageData.byteSize;return byteSize}get _cacheLimitReached(){return!(this._imageCache.size<_GlobalImageCache2.MIN_IMAGES_TO_CACHE||this._byteSize<_GlobalImageCache2.MAX_BYTE_SIZE)}shouldCache(ref,pageIndex){const pageIndexSet=this._refCache.get(ref);return!((pageIndexSet?pageIndexSet.size+(pageIndexSet.has(pageIndex)?0:1):1)<_GlobalImageCache2.NUM_PAGES_THRESHOLD||!this._imageCache.has(ref)&&this._cacheLimitReached)}addPageIndex(ref,pageIndex){let pageIndexSet=this._refCache.get(ref);pageIndexSet||(pageIndexSet=new Set,this._refCache.put(ref,pageIndexSet)),pageIndexSet.add(pageIndex)}addByteSize(ref,byteSize){const imageData=this._imageCache.get(ref);imageData&&(imageData.byteSize||(imageData.byteSize=byteSize))}getData(ref,pageIndex){const pageIndexSet=this._refCache.get(ref);if(!pageIndexSet||pageIndexSet.size<_GlobalImageCache2.NUM_PAGES_THRESHOLD)return null;const imageData=this._imageCache.get(ref);return imageData?(pageIndexSet.add(pageIndex),imageData):null}setData(ref,data){if(!this._refCache.has(ref))throw new Error('GlobalImageCache.setData - expected "addPageIndex" to have been called.');if(!this._imageCache.has(ref)){if(this._cacheLimitReached){(0,_util2.warn)("GlobalImageCache.setData - cache limit reached.");return}this._imageCache.put(ref,data)}}clear(onlyData=!1){onlyData||this._refCache.clear(),this._imageCache.clear()}};__name(_GlobalImageCache,"GlobalImageCache");let GlobalImageCache=_GlobalImageCache;exports3.GlobalImageCache=GlobalImageCache},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.bidi=bidi;var _util2=__w_pdfjs_require__3(2);const baseTypes=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],arabicTypes=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function isOdd(i){return(i&1)!==0}__name2(isOdd,"isOdd"),__name(isOdd,"isOdd");function isEven(i){return(i&1)===0}__name2(isEven,"isEven"),__name(isEven,"isEven");function findUnequal(arr,start,value){let j,jj;for(j=start,jj=arr.length;j<jj;++j)if(arr[j]!==value)return j;return j}__name2(findUnequal,"findUnequal"),__name(findUnequal,"findUnequal");function setValues(arr,start,end,value){for(let j=start;j<end;++j)arr[j]=value}__name2(setValues,"setValues"),__name(setValues,"setValues");function reverseValues(arr,start,end){for(let i=start,j=end-1;i<j;++i,--j){const temp=arr[i];arr[i]=arr[j],arr[j]=temp}}__name2(reverseValues,"reverseValues"),__name(reverseValues,"reverseValues");function createBidiText(str,isLTR,vertical=!1){let dir="ltr";return vertical?dir="ttb":isLTR||(dir="rtl"),{str,dir}}__name2(createBidiText,"createBidiText"),__name(createBidiText,"createBidiText");const chars=[],types=[];function bidi(str,startLevel=-1,vertical=!1){let isLTR=!0;const strLength=str.length;if(strLength===0||vertical)return createBidiText(str,isLTR,vertical);chars.length=strLength,types.length=strLength;let numBidi=0,i,ii;for(i=0;i<strLength;++i){chars[i]=str.charAt(i);const charCode=str.charCodeAt(i);let charType="L";charCode<=255?charType=baseTypes[charCode]:1424<=charCode&&charCode<=1524?charType="R":1536<=charCode&&charCode<=1791?(charType=arabicTypes[charCode&255],charType||(0,_util2.warn)("Bidi: invalid Unicode character "+charCode.toString(16))):1792<=charCode&&charCode<=2220&&(charType="AL"),(charType==="R"||charType==="AL"||charType==="AN")&&numBidi++,types[i]=charType}if(numBidi===0)return isLTR=!0,createBidiText(str,isLTR);startLevel===-1&&(numBidi/strLength<.3&&strLength>4?(isLTR=!0,startLevel=0):(isLTR=!1,startLevel=1));const levels=[];for(i=0;i<strLength;++i)levels[i]=startLevel;const e=isOdd(startLevel)?"R":"L",sor=e,eor=sor;let lastType=sor;for(i=0;i<strLength;++i)types[i]==="NSM"?types[i]=lastType:lastType=types[i];lastType=sor;let t;for(i=0;i<strLength;++i)t=types[i],t==="EN"?types[i]=lastType==="AL"?"AN":"EN":(t==="R"||t==="L"||t==="AL")&&(lastType=t);for(i=0;i<strLength;++i)t=types[i],t==="AL"&&(types[i]="R");for(i=1;i<strLength-1;++i)types[i]==="ES"&&types[i-1]==="EN"&&types[i+1]==="EN"&&(types[i]="EN"),types[i]==="CS"&&(types[i-1]==="EN"||types[i-1]==="AN")&&types[i+1]===types[i-1]&&(types[i]=types[i-1]);for(i=0;i<strLength;++i)if(types[i]==="EN"){for(let j=i-1;j>=0&&types[j]==="ET";--j)types[j]="EN";for(let j=i+1;j<strLength&&types[j]==="ET";++j)types[j]="EN"}for(i=0;i<strLength;++i)t=types[i],(t==="WS"||t==="ES"||t==="ET"||t==="CS")&&(types[i]="ON");for(lastType=sor,i=0;i<strLength;++i)t=types[i],t==="EN"?types[i]=lastType==="L"?"L":"EN":(t==="R"||t==="L")&&(lastType=t);for(i=0;i<strLength;++i)if(types[i]==="ON"){const end=findUnequal(types,i+1,"ON");let before=sor;i>0&&(before=types[i-1]);let after=eor;end+1<strLength&&(after=types[end+1]),before!=="L"&&(before="R"),after!=="L"&&(after="R"),before===after&&setValues(types,i,end,before),i=end-1}for(i=0;i<strLength;++i)types[i]==="ON"&&(types[i]=e);for(i=0;i<strLength;++i)t=types[i],isEven(levels[i])?t==="R"?levels[i]+=1:(t==="AN"||t==="EN")&&(levels[i]+=2):(t==="L"||t==="AN"||t==="EN")&&(levels[i]+=1);let highestLevel=-1,lowestOddLevel=99,level;for(i=0,ii=levels.length;i<ii;++i)level=levels[i],highestLevel<level&&(highestLevel=level),lowestOddLevel>level&&isOdd(level)&&(lowestOddLevel=level);for(level=highestLevel;level>=lowestOddLevel;--level){let start=-1;for(i=0,ii=levels.length;i<ii;++i)levels[i]<level?start>=0&&(reverseValues(chars,start,i),start=-1):start<0&&(start=i);start>=0&&reverseValues(chars,start,levels.length)}for(i=0,ii=chars.length;i<ii;++i){const ch=chars[i];(ch==="<"||ch===">")&&(chars[i]="")}return createBidiText(chars.join(""),isLTR)}__name2(bidi,"bidi"),__name(bidi,"bidi")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.MurmurHash3_64=void 0;var _util2=__w_pdfjs_require__3(2);const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535,_MurmurHash3_64=class{static{__name2(this,"_MurmurHash3_64")}constructor(seed){this.h1=seed?seed&4294967295:SEED,this.h2=seed?seed&4294967295:SEED}update(input){let data,length;if(typeof input=="string"){data=new Uint8Array(input.length*2),length=0;for(let i=0,ii=input.length;i<ii;i++){const code=input.charCodeAt(i);code<=255?data[length++]=code:(data[length++]=code>>>8,data[length++]=code&255)}}else if((0,_util2.isArrayBuffer)(input))data=input.slice(),length=data.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const blockCounts=length>>2,tailLength=length-blockCounts*4,dataUint32=new Uint32Array(data.buffer,0,blockCounts);let k1=0,k2=0,h1=this.h1,h2=this.h2;const C1=3432918353,C2=461845907,C1_LOW=C1&MASK_LOW,C2_LOW=C2&MASK_LOW;for(let i=0;i<blockCounts;i++)i&1?(k1=dataUint32[i],k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW,k1=k1<<15|k1>>>17,k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW,h1^=k1,h1=h1<<13|h1>>>19,h1=h1*5+3864292196):(k2=dataUint32[i],k2=k2*C1&MASK_HIGH|k2*C1_LOW&MASK_LOW,k2=k2<<15|k2>>>17,k2=k2*C2&MASK_HIGH|k2*C2_LOW&MASK_LOW,h2^=k2,h2=h2<<13|h2>>>19,h2=h2*5+3864292196);switch(k1=0,tailLength){case 3:k1^=data[blockCounts*4+2]<<16;case 2:k1^=data[blockCounts*4+1]<<8;case 1:k1^=data[blockCounts*4],k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW,k1=k1<<15|k1>>>17,k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW,blockCounts&1?h1^=k1:h2^=k1}this.h1=h1,this.h2=h2}hexdigest(){let h1=this.h1,h2=this.h2;h1^=h2>>>1,h1=h1*3981806797&MASK_HIGH|h1*36045&MASK_LOW,h2=h2*4283543511&MASK_HIGH|((h2<<16|h1>>>16)*2950163797&MASK_HIGH)>>>16,h1^=h2>>>1,h1=h1*444984403&MASK_HIGH|h1*60499&MASK_LOW,h2=h2*3301882366&MASK_HIGH|((h2<<16|h1>>>16)*3120437893&MASK_HIGH)>>>16,h1^=h2>>>1;const hex1=(h1>>>0).toString(16),hex2=(h2>>>0).toString(16);return hex1.padStart(8,"0")+hex2.padStart(8,"0")}};__name(_MurmurHash3_64,"MurmurHash3_64");let MurmurHash3_64=_MurmurHash3_64;exports3.MurmurHash3_64=MurmurHash3_64},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.OperatorList=void 0;var _util2=__w_pdfjs_require__3(2);function addState(parentState,pattern,checkFn,iterateFn,processFn){let state=parentState;for(let i=0,ii=pattern.length-1;i<ii;i++){const item=pattern[i];state=state[item]||(state[item]=[])}state[pattern.at(-1)]={checkFn,iterateFn,processFn}}__name2(addState,"addState"),__name(addState,"addState");const InitialState=[];addState(InitialState,[_util2.OPS.save,_util2.OPS.transform,_util2.OPS.paintInlineImageXObject,_util2.OPS.restore],null,__name(__name2(function(context,i){const fnArray=context.fnArray,iFirstSave=context.iCurr-3,pos=(i-iFirstSave)%4;switch(pos){case 0:return fnArray[i]===_util2.OPS.save;case 1:return fnArray[i]===_util2.OPS.transform;case 2:return fnArray[i]===_util2.OPS.paintInlineImageXObject;case 3:return fnArray[i]===_util2.OPS.restore}throw new Error(`iterateInlineImageGroup - invalid pos: ${pos}`)},"iterateInlineImageGroup"),"iterateInlineImageGroup"),__name(__name2(function(context,i){const fnArray=context.fnArray,argsArray=context.argsArray,curr=context.iCurr,iFirstSave=curr-3,iFirstTransform=curr-2,iFirstPIIXO=curr-1,count=Math.min(Math.floor((i-iFirstSave)/4),200);if(count<10)return i-(i-iFirstSave)%4;let maxX=0;const map=[];let maxLineHeight=0,currentX=1,currentY=1;for(let q=0;q<count;q++){const transform=argsArray[iFirstTransform+(q<<2)],img=argsArray[iFirstPIIXO+(q<<2)][0];currentX+img.width>1e3&&(maxX=Math.max(maxX,currentX),currentY+=maxLineHeight+2,currentX=0,maxLineHeight=0),map.push({transform,x:currentX,y:currentY,w:img.width,h:img.height}),currentX+=img.width+2,maxLineHeight=Math.max(maxLineHeight,img.height)}const imgWidth=Math.max(maxX,currentX)+1,imgHeight=currentY+maxLineHeight+1,imgData=new Uint8Array(imgWidth*imgHeight*4),imgRowSize=imgWidth<<2;for(let q=0;q<count;q++){const data=argsArray[iFirstPIIXO+(q<<2)][0].data,rowSize=map[q].w<<2;let dataOffset=0,offset=map[q].x+map[q].y*imgWidth<<2;imgData.set(data.subarray(0,rowSize),offset-imgRowSize);for(let k=0,kk=map[q].h;k<kk;k++)imgData.set(data.subarray(dataOffset,dataOffset+rowSize),offset),dataOffset+=rowSize,offset+=imgRowSize;for(imgData.set(data.subarray(dataOffset-rowSize,dataOffset),offset);offset>=0;)data[offset-4]=data[offset],data[offset-3]=data[offset+1],data[offset-2]=data[offset+2],data[offset-1]=data[offset+3],data[offset+rowSize]=data[offset+rowSize-4],data[offset+rowSize+1]=data[offset+rowSize-3],data[offset+rowSize+2]=data[offset+rowSize-2],data[offset+rowSize+3]=data[offset+rowSize-1],offset-=imgRowSize}return fnArray.splice(iFirstSave,count*4,_util2.OPS.paintInlineImageXObjectGroup),argsArray.splice(iFirstSave,count*4,[{width:imgWidth,height:imgHeight,kind:_util2.ImageKind.RGBA_32BPP,data:imgData},map]),iFirstSave+1},"foundInlineImageGroup"),"foundInlineImageGroup")),addState(InitialState,[_util2.OPS.save,_util2.OPS.transform,_util2.OPS.paintImageMaskXObject,_util2.OPS.restore],null,__name(__name2(function(context,i){const fnArray=context.fnArray,iFirstSave=context.iCurr-3,pos=(i-iFirstSave)%4;switch(pos){case 0:return fnArray[i]===_util2.OPS.save;case 1:return fnArray[i]===_util2.OPS.transform;case 2:return fnArray[i]===_util2.OPS.paintImageMaskXObject;case 3:return fnArray[i]===_util2.OPS.restore}throw new Error(`iterateImageMaskGroup - invalid pos: ${pos}`)},"iterateImageMaskGroup"),"iterateImageMaskGroup"),__name(__name2(function(context,i){const fnArray=context.fnArray,argsArray=context.argsArray,curr=context.iCurr,iFirstSave=curr-3,iFirstTransform=curr-2,iFirstPIMXO=curr-1;let count=Math.floor((i-iFirstSave)/4);if(count<10)return i-(i-iFirstSave)%4;let isSameImage=!1,iTransform,transformArgs;const firstPIMXOArg0=argsArray[iFirstPIMXO][0],firstTransformArg0=argsArray[iFirstTransform][0],firstTransformArg1=argsArray[iFirstTransform][1],firstTransformArg2=argsArray[iFirstTransform][2],firstTransformArg3=argsArray[iFirstTransform][3];if(firstTransformArg1===firstTransformArg2){isSameImage=!0,iTransform=iFirstTransform+4;let iPIMXO=iFirstPIMXO+4;for(let q=1;q<count;q++,iTransform+=4,iPIMXO+=4)if(transformArgs=argsArray[iTransform],argsArray[iPIMXO][0]!==firstPIMXOArg0||transformArgs[0]!==firstTransformArg0||transformArgs[1]!==firstTransformArg1||transformArgs[2]!==firstTransformArg2||transformArgs[3]!==firstTransformArg3){q<10?isSameImage=!1:count=q;break}}if(isSameImage){count=Math.min(count,1e3);const positions=new Float32Array(count*2);iTransform=iFirstTransform;for(let q=0;q<count;q++,iTransform+=4)transformArgs=argsArray[iTransform],positions[q<<1]=transformArgs[4],positions[(q<<1)+1]=transformArgs[5];fnArray.splice(iFirstSave,count*4,_util2.OPS.paintImageMaskXObjectRepeat),argsArray.splice(iFirstSave,count*4,[firstPIMXOArg0,firstTransformArg0,firstTransformArg1,firstTransformArg2,firstTransformArg3,positions])}else{count=Math.min(count,100);const images=[];for(let q=0;q<count;q++){transformArgs=argsArray[iFirstTransform+(q<<2)];const maskParams=argsArray[iFirstPIMXO+(q<<2)][0];images.push({data:maskParams.data,width:maskParams.width,height:maskParams.height,interpolate:maskParams.interpolate,count:maskParams.count,transform:transformArgs})}fnArray.splice(iFirstSave,count*4,_util2.OPS.paintImageMaskXObjectGroup),argsArray.splice(iFirstSave,count*4,[images])}return iFirstSave+1},"foundImageMaskGroup"),"foundImageMaskGroup")),addState(InitialState,[_util2.OPS.save,_util2.OPS.transform,_util2.OPS.paintImageXObject,_util2.OPS.restore],function(context){const argsArray=context.argsArray,iFirstTransform=context.iCurr-2;return argsArray[iFirstTransform][1]===0&&argsArray[iFirstTransform][2]===0},__name(__name2(function(context,i){const fnArray=context.fnArray,argsArray=context.argsArray,iFirstSave=context.iCurr-3,pos=(i-iFirstSave)%4;switch(pos){case 0:return fnArray[i]===_util2.OPS.save;case 1:if(fnArray[i]!==_util2.OPS.transform)return!1;const iFirstTransform=context.iCurr-2,firstTransformArg0=argsArray[iFirstTransform][0],firstTransformArg3=argsArray[iFirstTransform][3];return!(argsArray[i][0]!==firstTransformArg0||argsArray[i][1]!==0||argsArray[i][2]!==0||argsArray[i][3]!==firstTransformArg3);case 2:if(fnArray[i]!==_util2.OPS.paintImageXObject)return!1;const iFirstPIXO=context.iCurr-1,firstPIXOArg0=argsArray[iFirstPIXO][0];return argsArray[i][0]===firstPIXOArg0;case 3:return fnArray[i]===_util2.OPS.restore}throw new Error(`iterateImageGroup - invalid pos: ${pos}`)},"iterateImageGroup"),"iterateImageGroup"),function(context,i){const fnArray=context.fnArray,argsArray=context.argsArray,curr=context.iCurr,iFirstSave=curr-3,iFirstTransform=curr-2,iFirstPIXO=curr-1,firstPIXOArg0=argsArray[iFirstPIXO][0],firstTransformArg0=argsArray[iFirstTransform][0],firstTransformArg3=argsArray[iFirstTransform][3],count=Math.min(Math.floor((i-iFirstSave)/4),1e3);if(count<3)return i-(i-iFirstSave)%4;const positions=new Float32Array(count*2);let iTransform=iFirstTransform;for(let q=0;q<count;q++,iTransform+=4){const transformArgs=argsArray[iTransform];positions[q<<1]=transformArgs[4],positions[(q<<1)+1]=transformArgs[5]}const args=[firstPIXOArg0,firstTransformArg0,firstTransformArg3,positions];return fnArray.splice(iFirstSave,count*4,_util2.OPS.paintImageXObjectRepeat),argsArray.splice(iFirstSave,count*4,args),iFirstSave+1}),addState(InitialState,[_util2.OPS.beginText,_util2.OPS.setFont,_util2.OPS.setTextMatrix,_util2.OPS.showText,_util2.OPS.endText],null,__name(__name2(function(context,i){const fnArray=context.fnArray,argsArray=context.argsArray,iFirstSave=context.iCurr-4,pos=(i-iFirstSave)%5;switch(pos){case 0:return fnArray[i]===_util2.OPS.beginText;case 1:return fnArray[i]===_util2.OPS.setFont;case 2:return fnArray[i]===_util2.OPS.setTextMatrix;case 3:if(fnArray[i]!==_util2.OPS.showText)return!1;const iFirstSetFont=context.iCurr-3,firstSetFontArg0=argsArray[iFirstSetFont][0],firstSetFontArg1=argsArray[iFirstSetFont][1];return!(argsArray[i][0]!==firstSetFontArg0||argsArray[i][1]!==firstSetFontArg1);case 4:return fnArray[i]===_util2.OPS.endText}throw new Error(`iterateShowTextGroup - invalid pos: ${pos}`)},"iterateShowTextGroup"),"iterateShowTextGroup"),function(context,i){const fnArray=context.fnArray,argsArray=context.argsArray,curr=context.iCurr,iFirstBeginText=curr-4,iFirstSetFont=curr-3,iFirstSetTextMatrix=curr-2,iFirstShowText=curr-1,iFirstEndText=curr,firstSetFontArg0=argsArray[iFirstSetFont][0],firstSetFontArg1=argsArray[iFirstSetFont][1];let count=Math.min(Math.floor((i-iFirstBeginText)/5),1e3);if(count<3)return i-(i-iFirstBeginText)%5;let iFirst=iFirstBeginText;iFirstBeginText>=4&&fnArray[iFirstBeginText-4]===fnArray[iFirstSetFont]&&fnArray[iFirstBeginText-3]===fnArray[iFirstSetTextMatrix]&&fnArray[iFirstBeginText-2]===fnArray[iFirstShowText]&&fnArray[iFirstBeginText-1]===fnArray[iFirstEndText]&&argsArray[iFirstBeginText-4][0]===firstSetFontArg0&&argsArray[iFirstBeginText-4][1]===firstSetFontArg1&&(count++,iFirst-=5);let iEndText=iFirst+4;for(let q=1;q<count;q++)fnArray.splice(iEndText,3),argsArray.splice(iEndText,3),iEndText+=2;return iEndText+1});const _NullOptimizer=class{static{__name2(this,"_NullOptimizer")}constructor(queue){this.queue=queue}_optimize(){}push(fn,args){this.queue.fnArray.push(fn),this.queue.argsArray.push(args),this._optimize()}flush(){}reset(){}};__name(_NullOptimizer,"NullOptimizer");let NullOptimizer=_NullOptimizer;const _QueueOptimizer=class extends NullOptimizer{static{__name2(this,"_QueueOptimizer")}constructor(queue){super(queue),this.state=null,this.context={iCurr:0,fnArray:queue.fnArray,argsArray:queue.argsArray},this.match=null,this.lastProcessed=0}_optimize(){const fnArray=this.queue.fnArray;let i=this.lastProcessed,ii=fnArray.length,state=this.state,match=this.match;if(!state&&!match&&i+1===ii&&!InitialState[fnArray[i]]){this.lastProcessed=ii;return}const context=this.context;for(;i<ii;){if(match){if((0,match.iterateFn)(context,i)){i++;continue}if(i=(0,match.processFn)(context,i+1),ii=fnArray.length,match=null,state=null,i>=ii)break}if(state=(state||InitialState)[fnArray[i]],!state||Array.isArray(state)){i++;continue}if(context.iCurr=i,i++,state.checkFn&&!(0,state.checkFn)(context)){state=null;continue}match=state,state=null}this.state=state,this.match=match,this.lastProcessed=i}flush(){for(;this.match;){const length=this.queue.fnArray.length;this.lastProcessed=(0,this.match.processFn)(this.context,length),this.match=null,this.state=null,this._optimize()}}reset(){this.state=null,this.match=null,this.lastProcessed=0}};__name(_QueueOptimizer,"QueueOptimizer");let QueueOptimizer=_QueueOptimizer;const _OperatorList=class _OperatorList2{static{__name2(this,"_OperatorList")}static get CHUNK_SIZE(){return(0,_util2.shadow)(this,"CHUNK_SIZE",1e3)}static get CHUNK_SIZE_ABOUT(){return(0,_util2.shadow)(this,"CHUNK_SIZE_ABOUT",this.CHUNK_SIZE-5)}constructor(intent=0,streamSink){this._streamSink=streamSink,this.fnArray=[],this.argsArray=[],streamSink&&!(intent&_util2.RenderingIntentFlag.OPLIST)?this.optimizer=new QueueOptimizer(this):this.optimizer=new NullOptimizer(this),this.dependencies=new Set,this._totalLength=0,this.weight=0,this._resolved=streamSink?null:Promise.resolve()}get length(){return this.argsArray.length}get ready(){return this._resolved||this._streamSink.ready}get totalLength(){return this._totalLength+this.length}addOp(fn,args){this.optimizer.push(fn,args),this.weight++,this._streamSink&&(this.weight>=_OperatorList2.CHUNK_SIZE?this.flush():this.weight>=_OperatorList2.CHUNK_SIZE_ABOUT&&(fn===_util2.OPS.restore||fn===_util2.OPS.endText)&&this.flush())}addImageOps(fn,args,optionalContent){optionalContent!==void 0&&this.addOp(_util2.OPS.beginMarkedContentProps,["OC",optionalContent]),this.addOp(fn,args),optionalContent!==void 0&&this.addOp(_util2.OPS.endMarkedContent,[])}addDependency(dependency){this.dependencies.has(dependency)||(this.dependencies.add(dependency),this.addOp(_util2.OPS.dependency,[dependency]))}addDependencies(dependencies){for(const dependency of dependencies)this.addDependency(dependency)}addOpList(opList){if(!(opList instanceof _OperatorList2)){(0,_util2.warn)('addOpList - ignoring invalid "opList" parameter.');return}for(const dependency of opList.dependencies)this.dependencies.add(dependency);for(let i=0,ii=opList.length;i<ii;i++)this.addOp(opList.fnArray[i],opList.argsArray[i])}getIR(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length}}get _transfers(){const transfers=[],{fnArray,argsArray,length}=this;for(let i=0;i<length;i++)switch(fnArray[i]){case _util2.OPS.paintInlineImageXObject:case _util2.OPS.paintInlineImageXObjectGroup:case _util2.OPS.paintImageMaskXObject:const arg=argsArray[i][0];!arg.cached&&arg.data&&arg.data.buffer instanceof ArrayBuffer&&transfers.push(arg.data.buffer);break}return transfers}flush(lastChunk=!1,separateAnnots=null){this.optimizer.flush();const length=this.length;this._totalLength+=length,this._streamSink.enqueue({fnArray:this.fnArray,argsArray:this.argsArray,lastChunk,separateAnnots,length},1,this._transfers),this.dependencies.clear(),this.fnArray.length=0,this.argsArray.length=0,this.weight=0,this.optimizer.reset()}};__name(_OperatorList,"OperatorList");let OperatorList=_OperatorList;exports3.OperatorList=OperatorList},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.PDFImage=void 0;var _util2=__w_pdfjs_require__3(2),_image_utils=__w_pdfjs_require__3(64),_base_stream=__w_pdfjs_require__3(7),_colorspace=__w_pdfjs_require__3(14),_decode_stream=__w_pdfjs_require__3(19),_jpeg_stream=__w_pdfjs_require__3(27),_jpx=__w_pdfjs_require__3(30),_primitives=__w_pdfjs_require__3(5);function decodeAndClamp(value,addend,coefficient,max){return value=addend+value*coefficient,value<0?value=0:value>max&&(value=max),value}__name2(decodeAndClamp,"decodeAndClamp"),__name(decodeAndClamp,"decodeAndClamp");function resizeImageMask(src,bpc,w1,h1,w2,h2){const length=w2*h2;let dest;bpc<=8?dest=new Uint8Array(length):bpc<=16?dest=new Uint16Array(length):dest=new Uint32Array(length);const xRatio=w1/w2,yRatio=h1/h2;let i,j,py,newIndex=0,oldIndex;const xScaled=new Uint16Array(w2),w1Scanline=w1;for(i=0;i<w2;i++)xScaled[i]=Math.floor(i*xRatio);for(i=0;i<h2;i++)for(py=Math.floor(i*yRatio)*w1Scanline,j=0;j<w2;j++)oldIndex=py+xScaled[j],dest[newIndex++]=src[oldIndex];return dest}__name2(resizeImageMask,"resizeImageMask"),__name(resizeImageMask,"resizeImageMask");const _PDFImage=class _PDFImage2{static{__name2(this,"_PDFImage")}constructor({xref,res,image,isInline=!1,smask=null,mask=null,isMask=!1,pdfFunctionFactory,localColorSpaceCache}){this.image=image;const dict=image.dict,filter2=dict.get("F","Filter");let filterName;if(filter2 instanceof _primitives.Name)filterName=filter2.name;else if(Array.isArray(filter2)){const filterZero=xref.fetchIfRef(filter2[0]);filterZero instanceof _primitives.Name&&(filterName=filterZero.name)}switch(filterName){case"JPXDecode":const jpxImage=new _jpx.JpxImage;jpxImage.parseImageProperties(image.stream),image.stream.reset(),image.width=jpxImage.width,image.height=jpxImage.height,image.bitsPerComponent=jpxImage.bitsPerComponent,image.numComps=jpxImage.componentsCount;break;case"JBIG2Decode":image.bitsPerComponent=1,image.numComps=1;break}let width=dict.get("W","Width"),height=dict.get("H","Height");if(Number.isInteger(image.width)&&image.width>0&&Number.isInteger(image.height)&&image.height>0&&(image.width!==width||image.height!==height)&&((0,_util2.warn)("PDFImage - using the Width/Height of the image data, rather than the image dictionary."),width=image.width,height=image.height),width<1||height<1)throw new _util2.FormatError(`Invalid image width: ${width} or height: ${height}`);this.width=width,this.height=height,this.interpolate=dict.get("I","Interpolate"),this.imageMask=dict.get("IM","ImageMask")||!1,this.matte=dict.get("Matte")||!1;let bitsPerComponent=image.bitsPerComponent;if(!bitsPerComponent&&(bitsPerComponent=dict.get("BPC","BitsPerComponent"),!bitsPerComponent))if(this.imageMask)bitsPerComponent=1;else throw new _util2.FormatError(`Bits per component missing in image: ${this.imageMask}`);if(this.bpc=bitsPerComponent,!this.imageMask){let colorSpace=dict.getRaw("CS")||dict.getRaw("ColorSpace");if(!colorSpace)switch((0,_util2.info)("JPX images (which do not require color spaces)"),image.numComps){case 1:colorSpace=_primitives.Name.get("DeviceGray");break;case 3:colorSpace=_primitives.Name.get("DeviceRGB");break;case 4:colorSpace=_primitives.Name.get("DeviceCMYK");break;default:throw new Error(`JPX images with ${image.numComps} color components not supported.`)}this.colorSpace=_colorspace.ColorSpace.parse({cs:colorSpace,xref,resources:isInline?res:null,pdfFunctionFactory,localColorSpaceCache}),this.numComps=this.colorSpace.numComps}if(this.decode=dict.getArray("D","Decode"),this.needsDecode=!1,this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode,bitsPerComponent)||isMask&&!_colorspace.ColorSpace.isDefaultDecode(this.decode,1))){this.needsDecode=!0;const max=(1<<bitsPerComponent)-1;this.decodeCoefficients=[],this.decodeAddends=[];const isIndexed=this.colorSpace&&this.colorSpace.name==="Indexed";for(let i=0,j=0;i<this.decode.length;i+=2,++j){const dmin=this.decode[i],dmax=this.decode[i+1];this.decodeCoefficients[j]=isIndexed?(dmax-dmin)/max:dmax-dmin,this.decodeAddends[j]=isIndexed?dmin:max*dmin}}smask?this.smask=new _PDFImage2({xref,res,image:smask,isInline,pdfFunctionFactory,localColorSpaceCache}):mask&&(mask instanceof _base_stream.BaseStream?mask.dict.get("IM","ImageMask")?this.mask=new _PDFImage2({xref,res,image:mask,isInline,isMask:!0,pdfFunctionFactory,localColorSpaceCache}):(0,_util2.warn)("Ignoring /Mask in image without /ImageMask."):this.mask=mask)}static async buildImage({xref,res,image,isInline=!1,pdfFunctionFactory,localColorSpaceCache}){const imageData=image;let smaskData=null,maskData=null;const smask=image.dict.get("SMask"),mask=image.dict.get("Mask");return smask?smask instanceof _base_stream.BaseStream?smaskData=smask:(0,_util2.warn)("Unsupported /SMask format."):mask&&(mask instanceof _base_stream.BaseStream||Array.isArray(mask)?maskData=mask:(0,_util2.warn)("Unsupported /Mask format.")),new _PDFImage2({xref,res,image:imageData,isInline,smask:smaskData,mask:maskData,pdfFunctionFactory,localColorSpaceCache})}static createRawMask({imgArray,width,height,imageIsFromDecodeStream,inverseDecode,interpolate}){const computedLength=(width+7>>3)*height,actualLength=imgArray.byteLength,haveFullData=computedLength===actualLength;let data,i;if(imageIsFromDecodeStream&&(!inverseDecode||haveFullData)?data=imgArray:inverseDecode?(data=new Uint8Array(computedLength),data.set(imgArray),data.fill(255,actualLength)):data=new Uint8Array(imgArray),inverseDecode)for(i=0;i<actualLength;i++)data[i]^=255;return{data,width,height,interpolate}}static createMask({imgArray,width,height,imageIsFromDecodeStream,inverseDecode,interpolate}){const isSingleOpaquePixel=width===1&&height===1&&inverseDecode===(imgArray.length===0||!!(imgArray[0]&128));if(isSingleOpaquePixel)return{isSingleOpaquePixel};if(_util2.FeatureTest.isOffscreenCanvasSupported){const canvas=new OffscreenCanvas(width,height),ctx=canvas.getContext("2d"),imgData=ctx.createImageData(width,height);(0,_image_utils.applyMaskImageData)({src:imgArray,dest:imgData.data,width,height,inverseDecode}),ctx.putImageData(imgData,0,0);const bitmap=canvas.transferToImageBitmap();return{data:null,width,height,interpolate,bitmap}}return this.createRawMask({imgArray,width,height,inverseDecode,imageIsFromDecodeStream,interpolate})}get drawWidth(){return Math.max(this.width,this.smask&&this.smask.width||0,this.mask&&this.mask.width||0)}get drawHeight(){return Math.max(this.height,this.smask&&this.smask.height||0,this.mask&&this.mask.height||0)}decodeBuffer(buffer){const bpc=this.bpc,numComps=this.numComps,decodeAddends=this.decodeAddends,decodeCoefficients=this.decodeCoefficients,max=(1<<bpc)-1;let i,ii;if(bpc===1){for(i=0,ii=buffer.length;i<ii;i++)buffer[i]=+!buffer[i];return}let index=0;for(i=0,ii=this.width*this.height;i<ii;i++)for(let j=0;j<numComps;j++)buffer[index]=decodeAndClamp(buffer[index],decodeAddends[j],decodeCoefficients[j],max),index++}getComponents(buffer){const bpc=this.bpc;if(bpc===8)return buffer;const width=this.width,height=this.height,numComps=this.numComps,length=width*height*numComps;let bufferPos=0,output;bpc<=8?output=new Uint8Array(length):bpc<=16?output=new Uint16Array(length):output=new Uint32Array(length);const rowComps=width*numComps,max=(1<<bpc)-1;let i=0,ii,buf;if(bpc===1){let mask,loop1End,loop2End;for(let j=0;j<height;j++){for(loop1End=i+(rowComps&-8),loop2End=i+rowComps;i<loop1End;)buf=buffer[bufferPos++],output[i]=buf>>7&1,output[i+1]=buf>>6&1,output[i+2]=buf>>5&1,output[i+3]=buf>>4&1,output[i+4]=buf>>3&1,output[i+5]=buf>>2&1,output[i+6]=buf>>1&1,output[i+7]=buf&1,i+=8;if(i<loop2End)for(buf=buffer[bufferPos++],mask=128;i<loop2End;)output[i++]=+!!(buf&mask),mask>>=1}}else{let bits=0;for(buf=0,i=0,ii=length;i<ii;++i){for(i%rowComps===0&&(buf=0,bits=0);bits<bpc;)buf=buf<<8|buffer[bufferPos++],bits+=8;const remainingBits=bits-bpc;let value=buf>>remainingBits;value<0?value=0:value>max&&(value=max),output[i]=value,buf&=(1<<remainingBits)-1,bits=remainingBits}}return output}fillOpacity(rgbaBuf,width,height,actualHeight,image){const smask=this.smask,mask=this.mask;let alphaBuf,sw,sh,i,ii,j;if(smask)sw=smask.width,sh=smask.height,alphaBuf=new Uint8ClampedArray(sw*sh),smask.fillGrayBuffer(alphaBuf),(sw!==width||sh!==height)&&(alphaBuf=resizeImageMask(alphaBuf,smask.bpc,sw,sh,width,height));else if(mask)if(mask instanceof _PDFImage2){for(sw=mask.width,sh=mask.height,alphaBuf=new Uint8ClampedArray(sw*sh),mask.numComps=1,mask.fillGrayBuffer(alphaBuf),i=0,ii=sw*sh;i<ii;++i)alphaBuf[i]=255-alphaBuf[i];(sw!==width||sh!==height)&&(alphaBuf=resizeImageMask(alphaBuf,mask.bpc,sw,sh,width,height))}else if(Array.isArray(mask)){alphaBuf=new Uint8ClampedArray(width*height);const numComps=this.numComps;for(i=0,ii=width*height;i<ii;++i){let opacity=0;const imageOffset=i*numComps;for(j=0;j<numComps;++j){const color=image[imageOffset+j],maskOffset=j*2;if(color<mask[maskOffset]||color>mask[maskOffset+1]){opacity=255;break}}alphaBuf[i]=opacity}}else throw new _util2.FormatError("Unknown mask format.");if(alphaBuf)for(i=0,j=3,ii=width*actualHeight;i<ii;++i,j+=4)rgbaBuf[j]=alphaBuf[i];else for(i=0,j=3,ii=width*actualHeight;i<ii;++i,j+=4)rgbaBuf[j]=255}undoPreblend(buffer,width,height){const matte=this.smask&&this.smask.matte;if(!matte)return;const matteRgb=this.colorSpace.getRgb(matte,0),matteR=matteRgb[0],matteG=matteRgb[1],matteB=matteRgb[2],length=width*height*4;for(let i=0;i<length;i+=4){const alpha=buffer[i+3];if(alpha===0){buffer[i]=255,buffer[i+1]=255,buffer[i+2]=255;continue}const k=255/alpha;buffer[i]=(buffer[i]-matteR)*k+matteR,buffer[i+1]=(buffer[i+1]-matteG)*k+matteG,buffer[i+2]=(buffer[i+2]-matteB)*k+matteB}}createImageData(forceRGBA=!1){const drawWidth=this.drawWidth,drawHeight=this.drawHeight,imgData={width:drawWidth,height:drawHeight,interpolate:this.interpolate,kind:0,data:null},numComps=this.numComps,originalWidth=this.width,originalHeight=this.height,bpc=this.bpc,rowBytes=originalWidth*numComps*bpc+7>>3;if(!forceRGBA){let kind;if(this.colorSpace.name==="DeviceGray"&&bpc===1?kind=_util2.ImageKind.GRAYSCALE_1BPP:this.colorSpace.name==="DeviceRGB"&&bpc===8&&!this.needsDecode&&(kind=_util2.ImageKind.RGB_24BPP),kind&&!this.smask&&!this.mask&&drawWidth===originalWidth&&drawHeight===originalHeight){if(imgData.kind=kind,imgData.data=this.getImageBytes(originalHeight*rowBytes,{}),this.needsDecode){(0,_util2.assert)(kind===_util2.ImageKind.GRAYSCALE_1BPP,"PDFImage.createImageData: The image must be grayscale.");const buffer=imgData.data;for(let i=0,ii=buffer.length;i<ii;i++)buffer[i]^=255}return imgData}if(this.image instanceof _jpeg_stream.JpegStream&&!this.smask&&!this.mask){let imageLength=originalHeight*rowBytes;switch(this.colorSpace.name){case"DeviceGray":imageLength*=3;case"DeviceRGB":case"DeviceCMYK":return imgData.kind=_util2.ImageKind.RGB_24BPP,imgData.data=this.getImageBytes(imageLength,{drawWidth,drawHeight,forceRGB:!0}),imgData}}}const imgArray=this.getImageBytes(originalHeight*rowBytes,{internal:!0}),actualHeight=0|imgArray.length/rowBytes*drawHeight/originalHeight,comps=this.getComponents(imgArray);let alpha01,maybeUndoPreblend;return!forceRGBA&&!this.smask&&!this.mask?(imgData.kind=_util2.ImageKind.RGB_24BPP,imgData.data=new Uint8ClampedArray(drawWidth*drawHeight*3),alpha01=0,maybeUndoPreblend=!1):(imgData.kind=_util2.ImageKind.RGBA_32BPP,imgData.data=new Uint8ClampedArray(drawWidth*drawHeight*4),alpha01=1,maybeUndoPreblend=!0,this.fillOpacity(imgData.data,drawWidth,drawHeight,actualHeight,comps)),this.needsDecode&&this.decodeBuffer(comps),this.colorSpace.fillRgb(imgData.data,originalWidth,originalHeight,drawWidth,drawHeight,actualHeight,bpc,comps,alpha01),maybeUndoPreblend&&this.undoPreblend(imgData.data,drawWidth,actualHeight),imgData}fillGrayBuffer(buffer){const numComps=this.numComps;if(numComps!==1)throw new _util2.FormatError(`Reading gray scale from a color image: ${numComps}`);const width=this.width,height=this.height,bpc=this.bpc,rowBytes=width*numComps*bpc+7>>3,imgArray=this.getImageBytes(height*rowBytes,{internal:!0}),comps=this.getComponents(imgArray);let i,length;if(bpc===1){if(length=width*height,this.needsDecode)for(i=0;i<length;++i)buffer[i]=comps[i]-1&255;else for(i=0;i<length;++i)buffer[i]=-comps[i]&255;return}this.needsDecode&&this.decodeBuffer(comps),length=width*height;const scale=255/((1<<bpc)-1);for(i=0;i<length;++i)buffer[i]=scale*comps[i]}getImageBytes(length,{drawWidth,drawHeight,forceRGB=!1,internal=!1}){this.image.reset(),this.image.drawWidth=drawWidth||this.width,this.image.drawHeight=drawHeight||this.height,this.image.forceRGB=!!forceRGB;const imageBytes=this.image.getBytes(length);return internal||this.image instanceof _decode_stream.DecodeStream?imageBytes:((0,_util2.assert)(imageBytes instanceof Uint8Array,'PDFImage.getImageBytes: Unsupported "imageBytes" type.'),new Uint8Array(imageBytes))}};__name(_PDFImage,"PDFImage");let PDFImage=_PDFImage;exports3.PDFImage=PDFImage},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.applyMaskImageData=applyMaskImageData;var _util2=__w_pdfjs_require__3(2);function applyMaskImageData({src,srcPos=0,dest,destPos=0,width,height,inverseDecode=!1}){const opaque=_util2.FeatureTest.isLittleEndian?4278190080:255,[zeroMapping,oneMapping]=inverseDecode?[0,opaque]:[opaque,0],widthInSource=width>>3,widthRemainder=width&7,srcLength=src.length;dest=new Uint32Array(dest.buffer);for(let i=0;i<height;i++){for(const max=srcPos+widthInSource;srcPos<max;srcPos++){const elem2=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=elem2&128?oneMapping:zeroMapping,dest[destPos++]=elem2&64?oneMapping:zeroMapping,dest[destPos++]=elem2&32?oneMapping:zeroMapping,dest[destPos++]=elem2&16?oneMapping:zeroMapping,dest[destPos++]=elem2&8?oneMapping:zeroMapping,dest[destPos++]=elem2&4?oneMapping:zeroMapping,dest[destPos++]=elem2&2?oneMapping:zeroMapping,dest[destPos++]=elem2&1?oneMapping:zeroMapping}if(widthRemainder===0)continue;const elem=srcPos<srcLength?src[srcPos++]:255;for(let j=0;j<widthRemainder;j++)dest[destPos++]=elem&1<<7-j?oneMapping:zeroMapping}return{srcPos,destPos}}__name2(applyMaskImageData,"applyMaskImageData"),__name(applyMaskImageData,"applyMaskImageData")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.incrementalUpdate=incrementalUpdate,exports3.writeDict=writeDict,exports3.writeObject=writeObject;var _util2=__w_pdfjs_require__3(2),_primitives=__w_pdfjs_require__3(5),_core_utils=__w_pdfjs_require__3(6),_xml_parser=__w_pdfjs_require__3(66),_base_stream=__w_pdfjs_require__3(7),_crypto=__w_pdfjs_require__3(67);function writeObject(ref,obj,buffer,transform){buffer.push(`${ref.num} ${ref.gen} obj
`),obj instanceof _primitives.Dict?writeDict(obj,buffer,transform):obj instanceof _base_stream.BaseStream&&writeStream(obj,buffer,transform),buffer.push(`
endobj
`)}__name2(writeObject,"writeObject"),__name(writeObject,"writeObject");function writeDict(dict,buffer,transform){buffer.push("<<");for(const key of dict.getKeys())buffer.push(` /${(0,_core_utils.escapePDFName)(key)} `),writeValue(dict.getRaw(key),buffer,transform);buffer.push(">>")}__name2(writeDict,"writeDict"),__name(writeDict,"writeDict");function writeStream(stream,buffer,transform){writeDict(stream.dict,buffer,transform),buffer.push(` stream
`);let string=stream.getString();transform!==null&&(string=transform.encryptString(string)),buffer.push(string,`
endstream
`)}__name2(writeStream,"writeStream"),__name(writeStream,"writeStream");function writeArray(array,buffer,transform){buffer.push("[");let first=!0;for(const val of array)first?first=!1:buffer.push(" "),writeValue(val,buffer,transform);buffer.push("]")}__name2(writeArray,"writeArray"),__name(writeArray,"writeArray");function writeValue(value,buffer,transform){value instanceof _primitives.Name?buffer.push(`/${(0,_core_utils.escapePDFName)(value.name)}`):value instanceof _primitives.Ref?buffer.push(`${value.num} ${value.gen} R`):Array.isArray(value)?writeArray(value,buffer,transform):typeof value=="string"?(transform!==null&&(value=transform.encryptString(value)),buffer.push(`(${(0,_util2.escapeString)(value)})`)):typeof value=="number"?buffer.push((0,_core_utils.numberToString)(value)):typeof value=="boolean"?buffer.push(value.toString()):value instanceof _primitives.Dict?writeDict(value,buffer,transform):value instanceof _base_stream.BaseStream?writeStream(value,buffer,transform):value===null?buffer.push("null"):(0,_util2.warn)(`Unhandled value in writer: ${typeof value}, please file a bug.`)}__name2(writeValue,"writeValue"),__name(writeValue,"writeValue");function writeInt(number,size,offset,buffer){for(let i=size+offset-1;i>offset-1;i--)buffer[i]=number&255,number>>=8;return offset+size}__name2(writeInt,"writeInt"),__name(writeInt,"writeInt");function writeString(string,offset,buffer){for(let i=0,len=string.length;i<len;i++)buffer[offset+i]=string.charCodeAt(i)&255}__name2(writeString,"writeString"),__name(writeString,"writeString");function computeMD5(filesize,xrefInfo){const time=Math.floor(Date.now()/1e3),filename=xrefInfo.filename||"",md5Buffer=[time.toString(),filename,filesize.toString()];let md5BufferLen=md5Buffer.reduce((a,str)=>a+str.length,0);for(const value of Object.values(xrefInfo.info))md5Buffer.push(value),md5BufferLen+=value.length;const array=new Uint8Array(md5BufferLen);let offset=0;for(const str of md5Buffer)writeString(str,offset,array),offset+=str.length;return(0,_util2.bytesToString)((0,_crypto.calculateMD5)(array))}__name2(computeMD5,"computeMD5"),__name(computeMD5,"computeMD5");function writeXFADataForAcroform(str,newRefs){const xml=new _xml_parser.SimpleXMLParser({hasAttributes:!0}).parseFromString(str);for(const{xfa}of newRefs){if(!xfa)continue;const{path,value}=xfa;if(!path)continue;const node=xml.documentElement.searchNode((0,_core_utils.parseXFAPath)(path),0);node?Array.isArray(value)?node.childNodes=value.map(val=>new _xml_parser.SimpleDOMNode("value",val)):node.childNodes=[new _xml_parser.SimpleDOMNode("#text",value)]:(0,_util2.warn)(`Node not found for path: ${path}`)}const buffer=[];return xml.documentElement.dump(buffer),buffer.join("")}__name2(writeXFADataForAcroform,"writeXFADataForAcroform"),__name(writeXFADataForAcroform,"writeXFADataForAcroform");function updateXFA({xfaData,xfaDatasetsRef,hasXfaDatasetsEntry,acroFormRef,acroForm,newRefs,xref,xrefInfo}){if(xref===null)return;if(!hasXfaDatasetsEntry){if(!acroFormRef){(0,_util2.warn)("XFA - Cannot save it");return}const oldXfa=acroForm.get("XFA"),newXfa=oldXfa.slice();newXfa.splice(2,0,"datasets"),newXfa.splice(3,0,xfaDatasetsRef),acroForm.set("XFA",newXfa);const encrypt2=xref.encrypt;let transform=null;encrypt2&&(transform=encrypt2.createCipherTransform(acroFormRef.num,acroFormRef.gen));const buffer=[`${acroFormRef.num} ${acroFormRef.gen} obj
`];writeDict(acroForm,buffer,transform),buffer.push(`
`),acroForm.set("XFA",oldXfa),newRefs.push({ref:acroFormRef,data:buffer.join("")})}if(xfaData===null){const datasets=xref.fetchIfRef(xfaDatasetsRef);xfaData=writeXFADataForAcroform(datasets.getString(),newRefs)}const encrypt=xref.encrypt;encrypt&&(xfaData=encrypt.createCipherTransform(xfaDatasetsRef.num,xfaDatasetsRef.gen).encryptString(xfaData));const data=`${xfaDatasetsRef.num} ${xfaDatasetsRef.gen} obj
<< /Type /EmbeddedFile /Length ${xfaData.length}>>
stream
`+xfaData+`
endstream
endobj
`;newRefs.push({ref:xfaDatasetsRef,data})}__name2(updateXFA,"updateXFA"),__name(updateXFA,"updateXFA");function incrementalUpdate({originalData,xrefInfo,newRefs,xref=null,hasXfa=!1,xfaDatasetsRef=null,hasXfaDatasetsEntry=!1,acroFormRef=null,acroForm=null,xfaData=null}){hasXfa&&updateXFA({xfaData,xfaDatasetsRef,hasXfaDatasetsEntry,acroFormRef,acroForm,newRefs,xref,xrefInfo});const newXref=new _primitives.Dict(null),refForXrefTable=xrefInfo.newRef;let buffer,baseOffset;const lastByte=originalData.at(-1);lastByte===10||lastByte===13?(buffer=[],baseOffset=originalData.length):(buffer=[`
`],baseOffset=originalData.length+1),newXref.set("Size",refForXrefTable.num+1),newXref.set("Prev",xrefInfo.startXRef),newXref.set("Type",_primitives.Name.get("XRef")),xrefInfo.rootRef!==null&&newXref.set("Root",xrefInfo.rootRef),xrefInfo.infoRef!==null&&newXref.set("Info",xrefInfo.infoRef),xrefInfo.encryptRef!==null&&newXref.set("Encrypt",xrefInfo.encryptRef),newRefs.push({ref:refForXrefTable,data:""}),newRefs=newRefs.sort((a,b)=>a.ref.num-b.ref.num);const xrefTableData=[[0,1,65535]],indexes=[0,1];let maxOffset=0;for(const{ref,data}of newRefs)maxOffset=Math.max(maxOffset,baseOffset),xrefTableData.push([1,baseOffset,Math.min(ref.gen,65535)]),baseOffset+=data.length,indexes.push(ref.num,1),buffer.push(data);if(newXref.set("Index",indexes),Array.isArray(xrefInfo.fileIds)&&xrefInfo.fileIds.length>0){const md5=computeMD5(baseOffset,xrefInfo);newXref.set("ID",[xrefInfo.fileIds[0],md5])}const sizes=[1,Math.ceil(Math.log2(maxOffset)/8),2],tableLength=(sizes[0]+sizes[1]+sizes[2])*xrefTableData.length;newXref.set("W",sizes),newXref.set("Length",tableLength),buffer.push(`${refForXrefTable.num} ${refForXrefTable.gen} obj
`),writeDict(newXref,buffer,null),buffer.push(` stream
`);const bufferLen=buffer.reduce((a,str)=>a+str.length,0),footer=`
endstream
endobj
startxref
${baseOffset}
%%EOF
`,array=new Uint8Array(originalData.length+bufferLen+tableLength+footer.length);array.set(originalData);let offset=originalData.length;for(const str of buffer)writeString(str,offset,array),offset+=str.length;for(const[type,objOffset,gen]of xrefTableData)offset=writeInt(type,sizes[0],offset,array),offset=writeInt(objOffset,sizes[1],offset,array),offset=writeInt(gen,sizes[2],offset,array);return writeString(footer,offset,array),array}__name2(incrementalUpdate,"incrementalUpdate"),__name(incrementalUpdate,"incrementalUpdate")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.XMLParserErrorCode=exports3.XMLParserBase=exports3.SimpleXMLParser=exports3.SimpleDOMNode=void 0;var _core_utils=__w_pdfjs_require__3(6);const XMLParserErrorCode={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};exports3.XMLParserErrorCode=XMLParserErrorCode;function isWhitespace(s,index){const ch=s[index];return ch===" "||ch===`
`||ch==="\r"||ch==="	"}__name2(isWhitespace,"isWhitespace"),__name(isWhitespace,"isWhitespace");function isWhitespaceString(s){for(let i=0,ii=s.length;i<ii;i++)if(!isWhitespace(s,i))return!1;return!0}__name2(isWhitespaceString,"isWhitespaceString"),__name(isWhitespaceString,"isWhitespaceString");const _XMLParserBase=class{static{__name2(this,"_XMLParserBase")}_resolveEntities(s){return s.replace(/&([^;]+);/g,(all,entity)=>{if(entity.substring(0,2)==="#x")return String.fromCodePoint(parseInt(entity.substring(2),16));if(entity.substring(0,1)==="#")return String.fromCodePoint(parseInt(entity.substring(1),10));switch(entity){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"';case"apos":return"'"}return this.onResolveEntity(entity)})}_parseContent(s,start){const attributes=[];let pos=start;function skipWs(){for(;pos<s.length&&isWhitespace(s,pos);)++pos}for(__name2(skipWs,"skipWs"),__name(skipWs,"skipWs");pos<s.length&&!isWhitespace(s,pos)&&s[pos]!==">"&&s[pos]!=="/";)++pos;const name=s.substring(start,pos);for(skipWs();pos<s.length&&s[pos]!==">"&&s[pos]!=="/"&&s[pos]!=="?";){skipWs();let attrName="",attrValue="";for(;pos<s.length&&!isWhitespace(s,pos)&&s[pos]!=="=";)attrName+=s[pos],++pos;if(skipWs(),s[pos]!=="=")return null;++pos,skipWs();const attrEndChar=s[pos];if(attrEndChar!=='"'&&attrEndChar!=="'")return null;const attrEndIndex=s.indexOf(attrEndChar,++pos);if(attrEndIndex<0)return null;attrValue=s.substring(pos,attrEndIndex),attributes.push({name:attrName,value:this._resolveEntities(attrValue)}),pos=attrEndIndex+1,skipWs()}return{name,attributes,parsed:pos-start}}_parseProcessingInstruction(s,start){let pos=start;function skipWs(){for(;pos<s.length&&isWhitespace(s,pos);)++pos}for(__name2(skipWs,"skipWs"),__name(skipWs,"skipWs");pos<s.length&&!isWhitespace(s,pos)&&s[pos]!==">"&&s[pos]!=="?"&&s[pos]!=="/";)++pos;const name=s.substring(start,pos);skipWs();const attrStart=pos;for(;pos<s.length&&(s[pos]!=="?"||s[pos+1]!==">");)++pos;const value=s.substring(attrStart,pos);return{name,value,parsed:pos-start}}parseXml(s){let i=0;for(;i<s.length;){const ch=s[i];let j=i;if(ch==="<"){++j;const ch2=s[j];let q;switch(ch2){case"/":if(++j,q=s.indexOf(">",j),q<0){this.onError(XMLParserErrorCode.UnterminatedElement);return}this.onEndElement(s.substring(j,q)),j=q+1;break;case"?":++j;const pi=this._parseProcessingInstruction(s,j);if(s.substring(j+pi.parsed,j+pi.parsed+2)!=="?>"){this.onError(XMLParserErrorCode.UnterminatedXmlDeclaration);return}this.onPi(pi.name,pi.value),j+=pi.parsed+2;break;case"!":if(s.substring(j+1,j+3)==="--"){if(q=s.indexOf("-->",j+3),q<0){this.onError(XMLParserErrorCode.UnterminatedComment);return}this.onComment(s.substring(j+3,q)),j=q+3}else if(s.substring(j+1,j+8)==="[CDATA["){if(q=s.indexOf("]]>",j+8),q<0){this.onError(XMLParserErrorCode.UnterminatedCdat);return}this.onCdata(s.substring(j+8,q)),j=q+3}else if(s.substring(j+1,j+8)==="DOCTYPE"){const q2=s.indexOf("[",j+8);let complexDoctype=!1;if(q=s.indexOf(">",j+8),q<0){this.onError(XMLParserErrorCode.UnterminatedDoctypeDeclaration);return}if(q2>0&&q>q2){if(q=s.indexOf("]>",j+8),q<0){this.onError(XMLParserErrorCode.UnterminatedDoctypeDeclaration);return}complexDoctype=!0}const doctypeContent=s.substring(j+8,q+(complexDoctype?1:0));this.onDoctype(doctypeContent),j=q+(complexDoctype?2:1)}else{this.onError(XMLParserErrorCode.MalformedElement);return}break;default:const content=this._parseContent(s,j);if(content===null){this.onError(XMLParserErrorCode.MalformedElement);return}let isClosed=!1;if(s.substring(j+content.parsed,j+content.parsed+2)==="/>")isClosed=!0;else if(s.substring(j+content.parsed,j+content.parsed+1)!==">"){this.onError(XMLParserErrorCode.UnterminatedElement);return}this.onBeginElement(content.name,content.attributes,isClosed),j+=content.parsed+(isClosed?2:1);break}}else{for(;j<s.length&&s[j]!=="<";)j++;const text=s.substring(i,j);this.onText(this._resolveEntities(text))}i=j}}onResolveEntity(name){return`&${name};`}onPi(name,value){}onComment(text){}onCdata(text){}onDoctype(doctypeContent){}onText(text){}onBeginElement(name,attributes,isEmpty){}onEndElement(name){}onError(code){}};__name(_XMLParserBase,"XMLParserBase");let XMLParserBase=_XMLParserBase;exports3.XMLParserBase=XMLParserBase;const _SimpleDOMNode=class{static{__name2(this,"_SimpleDOMNode")}constructor(nodeName,nodeValue){this.nodeName=nodeName,this.nodeValue=nodeValue,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const childNodes=this.parentNode.childNodes;if(!childNodes)return;const index=childNodes.indexOf(this);if(index!==-1)return childNodes[index+1]}get textContent(){return this.childNodes?this.childNodes.map(function(child){return child.textContent}).join(""):this.nodeValue||""}get children(){return this.childNodes||[]}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}searchNode(paths,pos){if(pos>=paths.length)return this;const component=paths[pos],stack=[];let node=this;for(;;){if(component.name===node.nodeName)if(component.pos===0){const res=node.searchNode(paths,pos+1);if(res!==null)return res}else{if(stack.length===0)return null;{const[parent]=stack.pop();let siblingPos=0;for(const child of parent.childNodes)if(component.name===child.nodeName){if(siblingPos===component.pos)return child.searchNode(paths,pos+1);siblingPos++}return node.searchNode(paths,pos+1)}}if(node.childNodes&&node.childNodes.length!==0)stack.push([node,0]),node=node.childNodes[0];else{if(stack.length===0)return null;for(;stack.length!==0;){const[parent,currentPos]=stack.pop(),newPos=currentPos+1;if(newPos<parent.childNodes.length){stack.push([parent,newPos]),node=parent.childNodes[newPos];break}}if(stack.length===0)return null}}}dump(buffer){if(this.nodeName==="#text"){buffer.push((0,_core_utils.encodeToXmlString)(this.nodeValue));return}if(buffer.push(`<${this.nodeName}`),this.attributes)for(const attribute of this.attributes)buffer.push(` ${attribute.name}="${(0,_core_utils.encodeToXmlString)(attribute.value)}"`);if(this.hasChildNodes()){buffer.push(">");for(const child of this.childNodes)child.dump(buffer);buffer.push(`</${this.nodeName}>`)}else this.nodeValue?buffer.push(`>${(0,_core_utils.encodeToXmlString)(this.nodeValue)}</${this.nodeName}>`):buffer.push("/>")}};__name(_SimpleDOMNode,"SimpleDOMNode");let SimpleDOMNode=_SimpleDOMNode;exports3.SimpleDOMNode=SimpleDOMNode;const _SimpleXMLParser=class extends XMLParserBase{static{__name2(this,"_SimpleXMLParser")}constructor({hasAttributes=!1,lowerCaseName=!1}){super(),this._currentFragment=null,this._stack=null,this._errorCode=XMLParserErrorCode.NoError,this._hasAttributes=hasAttributes,this._lowerCaseName=lowerCaseName}parseFromString(data){if(this._currentFragment=[],this._stack=[],this._errorCode=XMLParserErrorCode.NoError,this.parseXml(data),this._errorCode!==XMLParserErrorCode.NoError)return;const[documentElement]=this._currentFragment;if(documentElement)return{documentElement}}onText(text){if(isWhitespaceString(text))return;const node=new SimpleDOMNode("#text",text);this._currentFragment.push(node)}onCdata(text){const node=new SimpleDOMNode("#text",text);this._currentFragment.push(node)}onBeginElement(name,attributes,isEmpty){this._lowerCaseName&&(name=name.toLowerCase());const node=new SimpleDOMNode(name);node.childNodes=[],this._hasAttributes&&(node.attributes=attributes),this._currentFragment.push(node),!isEmpty&&(this._stack.push(this._currentFragment),this._currentFragment=node.childNodes)}onEndElement(name){this._currentFragment=this._stack.pop()||[];const lastElement=this._currentFragment.at(-1);if(!lastElement)return null;for(let i=0,ii=lastElement.childNodes.length;i<ii;i++)lastElement.childNodes[i].parentNode=lastElement;return lastElement}onError(code){this._errorCode=code}};__name(_SimpleXMLParser,"SimpleXMLParser");let SimpleXMLParser=_SimpleXMLParser;exports3.SimpleXMLParser=SimpleXMLParser},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.calculateSHA256=exports3.calculateMD5=exports3.PDF20=exports3.PDF17=exports3.CipherTransformFactory=exports3.ARCFourCipher=exports3.AES256Cipher=exports3.AES128Cipher=void 0,exports3.calculateSHA384=calculateSHA384,exports3.calculateSHA512=void 0;var _util2=__w_pdfjs_require__3(2),_primitives=__w_pdfjs_require__3(5),_decrypt_stream=__w_pdfjs_require__3(68);const _ARCFourCipher=class{static{__name2(this,"_ARCFourCipher")}constructor(key){this.a=0,this.b=0;const s=new Uint8Array(256),keyLength=key.length;for(let i=0;i<256;++i)s[i]=i;for(let i=0,j=0;i<256;++i){const tmp=s[i];j=j+tmp+key[i%keyLength]&255,s[i]=s[j],s[j]=tmp}this.s=s}encryptBlock(data){let a=this.a,b=this.b;const s=this.s,n=data.length,output=new Uint8Array(n);for(let i=0;i<n;++i){a=a+1&255;const tmp=s[a];b=b+tmp&255;const tmp2=s[b];s[a]=tmp2,s[b]=tmp,output[i]=data[i]^s[tmp+tmp2&255]}return this.a=a,this.b=b,output}decryptBlock(data){return this.encryptBlock(data)}encrypt(data){return this.encryptBlock(data)}};__name(_ARCFourCipher,"ARCFourCipher");let ARCFourCipher=_ARCFourCipher;exports3.ARCFourCipher=ARCFourCipher;const calculateMD5=__name(__name2(function(){const r=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),k=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);function hash(data,offset,length){let h0=1732584193,h1=-271733879,h2=-1732584194,h3=271733878;const paddedLength=length+72&-64,padded=new Uint8Array(paddedLength);let i,j;for(i=0;i<length;++i)padded[i]=data[offset++];padded[i++]=128;const n=paddedLength-8;for(;i<n;)padded[i++]=0;padded[i++]=length<<3&255,padded[i++]=length>>5&255,padded[i++]=length>>13&255,padded[i++]=length>>21&255,padded[i++]=length>>>29&255,padded[i++]=0,padded[i++]=0,padded[i++]=0;const w=new Int32Array(16);for(i=0;i<paddedLength;){for(j=0;j<16;++j,i+=4)w[j]=padded[i]|padded[i+1]<<8|padded[i+2]<<16|padded[i+3]<<24;let a=h0,b=h1,c=h2,d=h3,f,g;for(j=0;j<64;++j){j<16?(f=b&c|~b&d,g=j):j<32?(f=d&b|~d&c,g=5*j+1&15):j<48?(f=b^c^d,g=3*j+5&15):(f=c^(b|~d),g=7*j&15);const tmp=d,rotateArg=a+f+k[j]+w[g]|0,rotate=r[j];d=c,c=b,b=b+(rotateArg<<rotate|rotateArg>>>32-rotate)|0,a=tmp}h0=h0+a|0,h1=h1+b|0,h2=h2+c|0,h3=h3+d|0}return new Uint8Array([h0&255,h0>>8&255,h0>>16&255,h0>>>24&255,h1&255,h1>>8&255,h1>>16&255,h1>>>24&255,h2&255,h2>>8&255,h2>>16&255,h2>>>24&255,h3&255,h3>>8&255,h3>>16&255,h3>>>24&255])}return __name2(hash,"hash"),__name(hash,"hash"),hash},"calculateMD5Closure"),"calculateMD5Closure")();exports3.calculateMD5=calculateMD5;const _Word64=class{static{__name2(this,"_Word64")}constructor(highInteger,lowInteger){this.high=highInteger|0,this.low=lowInteger|0}and(word){this.high&=word.high,this.low&=word.low}xor(word){this.high^=word.high,this.low^=word.low}or(word){this.high|=word.high,this.low|=word.low}shiftRight(places){places>=32?(this.low=this.high>>>places-32|0,this.high=0):(this.low=this.low>>>places|this.high<<32-places,this.high=this.high>>>places|0)}shiftLeft(places){places>=32?(this.high=this.low<<places-32,this.low=0):(this.high=this.high<<places|this.low>>>32-places,this.low<<=places)}rotateRight(places){let low,high;places&32?(high=this.low,low=this.high):(low=this.low,high=this.high),places&=31,this.low=low>>>places|high<<32-places,this.high=high>>>places|low<<32-places}not(){this.high=~this.high,this.low=~this.low}add(word){const lowAdd=(this.low>>>0)+(word.low>>>0);let highAdd=(this.high>>>0)+(word.high>>>0);lowAdd>4294967295&&(highAdd+=1),this.low=lowAdd|0,this.high=highAdd|0}copyTo(bytes,offset){bytes[offset]=this.high>>>24&255,bytes[offset+1]=this.high>>16&255,bytes[offset+2]=this.high>>8&255,bytes[offset+3]=this.high&255,bytes[offset+4]=this.low>>>24&255,bytes[offset+5]=this.low>>16&255,bytes[offset+6]=this.low>>8&255,bytes[offset+7]=this.low&255}assign(word){this.high=word.high,this.low=word.low}};__name(_Word64,"Word64");let Word64=_Word64;const calculateSHA256=__name(__name2(function(){function rotr(x,n){return x>>>n|x<<32-n}__name2(rotr,"rotr"),__name(rotr,"rotr");function ch(x,y,z){return x&y^~x&z}__name2(ch,"ch"),__name(ch,"ch");function maj(x,y,z){return x&y^x&z^y&z}__name2(maj,"maj"),__name(maj,"maj");function sigma(x){return rotr(x,2)^rotr(x,13)^rotr(x,22)}__name2(sigma,"sigma"),__name(sigma,"sigma");function sigmaPrime(x){return rotr(x,6)^rotr(x,11)^rotr(x,25)}__name2(sigmaPrime,"sigmaPrime"),__name(sigmaPrime,"sigmaPrime");function littleSigma(x){return rotr(x,7)^rotr(x,18)^x>>>3}__name2(littleSigma,"littleSigma"),__name(littleSigma,"littleSigma");function littleSigmaPrime(x){return rotr(x,17)^rotr(x,19)^x>>>10}__name2(littleSigmaPrime,"littleSigmaPrime"),__name(littleSigmaPrime,"littleSigmaPrime");const k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function hash(data,offset,length){let h0=1779033703,h1=3144134277,h2=1013904242,h3=2773480762,h4=1359893119,h5=2600822924,h6=528734635,h7=1541459225;const paddedLength=Math.ceil((length+9)/64)*64,padded=new Uint8Array(paddedLength);let i,j;for(i=0;i<length;++i)padded[i]=data[offset++];padded[i++]=128;const n=paddedLength-8;for(;i<n;)padded[i++]=0;padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=length>>>29&255,padded[i++]=length>>21&255,padded[i++]=length>>13&255,padded[i++]=length>>5&255,padded[i++]=length<<3&255;const w=new Uint32Array(64);for(i=0;i<paddedLength;){for(j=0;j<16;++j)w[j]=padded[i]<<24|padded[i+1]<<16|padded[i+2]<<8|padded[i+3],i+=4;for(j=16;j<64;++j)w[j]=littleSigmaPrime(w[j-2])+w[j-7]+littleSigma(w[j-15])+w[j-16]|0;let a=h0,b=h1,c=h2,d=h3,e=h4,f=h5,g=h6,h=h7,t1,t2;for(j=0;j<64;++j)t1=h+sigmaPrime(e)+ch(e,f,g)+k[j]+w[j],t2=sigma(a)+maj(a,b,c),h=g,g=f,f=e,e=d+t1|0,d=c,c=b,b=a,a=t1+t2|0;h0=h0+a|0,h1=h1+b|0,h2=h2+c|0,h3=h3+d|0,h4=h4+e|0,h5=h5+f|0,h6=h6+g|0,h7=h7+h|0}return new Uint8Array([h0>>24&255,h0>>16&255,h0>>8&255,h0&255,h1>>24&255,h1>>16&255,h1>>8&255,h1&255,h2>>24&255,h2>>16&255,h2>>8&255,h2&255,h3>>24&255,h3>>16&255,h3>>8&255,h3&255,h4>>24&255,h4>>16&255,h4>>8&255,h4&255,h5>>24&255,h5>>16&255,h5>>8&255,h5&255,h6>>24&255,h6>>16&255,h6>>8&255,h6&255,h7>>24&255,h7>>16&255,h7>>8&255,h7&255])}return __name2(hash,"hash"),__name(hash,"hash"),hash},"calculateSHA256Closure"),"calculateSHA256Closure")();exports3.calculateSHA256=calculateSHA256;const calculateSHA512=__name(__name2(function(){function ch(result,x,y,z,tmp){result.assign(x),result.and(y),tmp.assign(x),tmp.not(),tmp.and(z),result.xor(tmp)}__name2(ch,"ch"),__name(ch,"ch");function maj(result,x,y,z,tmp){result.assign(x),result.and(y),tmp.assign(x),tmp.and(z),result.xor(tmp),tmp.assign(y),tmp.and(z),result.xor(tmp)}__name2(maj,"maj"),__name(maj,"maj");function sigma(result,x,tmp){result.assign(x),result.rotateRight(28),tmp.assign(x),tmp.rotateRight(34),result.xor(tmp),tmp.assign(x),tmp.rotateRight(39),result.xor(tmp)}__name2(sigma,"sigma"),__name(sigma,"sigma");function sigmaPrime(result,x,tmp){result.assign(x),result.rotateRight(14),tmp.assign(x),tmp.rotateRight(18),result.xor(tmp),tmp.assign(x),tmp.rotateRight(41),result.xor(tmp)}__name2(sigmaPrime,"sigmaPrime"),__name(sigmaPrime,"sigmaPrime");function littleSigma(result,x,tmp){result.assign(x),result.rotateRight(1),tmp.assign(x),tmp.rotateRight(8),result.xor(tmp),tmp.assign(x),tmp.shiftRight(7),result.xor(tmp)}__name2(littleSigma,"littleSigma"),__name(littleSigma,"littleSigma");function littleSigmaPrime(result,x,tmp){result.assign(x),result.rotateRight(19),tmp.assign(x),tmp.rotateRight(61),result.xor(tmp),tmp.assign(x),tmp.shiftRight(6),result.xor(tmp)}__name2(littleSigmaPrime,"littleSigmaPrime"),__name(littleSigmaPrime,"littleSigmaPrime");const k=[new Word64(1116352408,3609767458),new Word64(1899447441,602891725),new Word64(3049323471,3964484399),new Word64(3921009573,2173295548),new Word64(961987163,4081628472),new Word64(1508970993,3053834265),new Word64(2453635748,2937671579),new Word64(2870763221,3664609560),new Word64(3624381080,2734883394),new Word64(310598401,1164996542),new Word64(607225278,1323610764),new Word64(1426881987,3590304994),new Word64(1925078388,4068182383),new Word64(2162078206,991336113),new Word64(2614888103,633803317),new Word64(3248222580,3479774868),new Word64(3835390401,2666613458),new Word64(4022224774,944711139),new Word64(264347078,2341262773),new Word64(604807628,2007800933),new Word64(770255983,1495990901),new Word64(1249150122,1856431235),new Word64(1555081692,3175218132),new Word64(1996064986,2198950837),new Word64(2554220882,3999719339),new Word64(2821834349,766784016),new Word64(2952996808,2566594879),new Word64(3210313671,3203337956),new Word64(3336571891,1034457026),new Word64(3584528711,2466948901),new Word64(113926993,3758326383),new Word64(338241895,168717936),new Word64(666307205,1188179964),new Word64(773529912,1546045734),new Word64(1294757372,1522805485),new Word64(1396182291,2643833823),new Word64(1695183700,2343527390),new Word64(1986661051,1014477480),new Word64(2177026350,1206759142),new Word64(2456956037,344077627),new Word64(2730485921,1290863460),new Word64(2820302411,3158454273),new Word64(3259730800,3505952657),new Word64(3345764771,106217008),new Word64(3516065817,3606008344),new Word64(3600352804,1432725776),new Word64(4094571909,1467031594),new Word64(275423344,851169720),new Word64(430227734,3100823752),new Word64(506948616,1363258195),new Word64(659060556,3750685593),new Word64(883997877,3785050280),new Word64(958139571,3318307427),new Word64(1322822218,3812723403),new Word64(1537002063,2003034995),new Word64(1747873779,3602036899),new Word64(1955562222,1575990012),new Word64(2024104815,1125592928),new Word64(2227730452,2716904306),new Word64(2361852424,442776044),new Word64(2428436474,593698344),new Word64(2756734187,3733110249),new Word64(3204031479,2999351573),new Word64(3329325298,3815920427),new Word64(3391569614,3928383900),new Word64(3515267271,566280711),new Word64(3940187606,3454069534),new Word64(4118630271,4000239992),new Word64(116418474,1914138554),new Word64(174292421,2731055270),new Word64(289380356,3203993006),new Word64(460393269,320620315),new Word64(685471733,587496836),new Word64(852142971,1086792851),new Word64(1017036298,365543100),new Word64(1126000580,2618297676),new Word64(1288033470,3409855158),new Word64(1501505948,4234509866),new Word64(1607167915,987167468),new Word64(1816402316,1246189591)];function hash(data,offset,length,mode384=!1){let h0,h1,h2,h3,h4,h5,h6,h7;mode384?(h0=new Word64(3418070365,3238371032),h1=new Word64(1654270250,914150663),h2=new Word64(2438529370,812702999),h3=new Word64(355462360,4144912697),h4=new Word64(1731405415,4290775857),h5=new Word64(2394180231,1750603025),h6=new Word64(3675008525,1694076839),h7=new Word64(1203062813,3204075428)):(h0=new Word64(1779033703,4089235720),h1=new Word64(3144134277,2227873595),h2=new Word64(1013904242,4271175723),h3=new Word64(2773480762,1595750129),h4=new Word64(1359893119,2917565137),h5=new Word64(2600822924,725511199),h6=new Word64(528734635,4215389547),h7=new Word64(1541459225,327033209));const paddedLength=Math.ceil((length+17)/128)*128,padded=new Uint8Array(paddedLength);let i,j;for(i=0;i<length;++i)padded[i]=data[offset++];padded[i++]=128;const n=paddedLength-16;for(;i<n;)padded[i++]=0;padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=0,padded[i++]=length>>>29&255,padded[i++]=length>>21&255,padded[i++]=length>>13&255,padded[i++]=length>>5&255,padded[i++]=length<<3&255;const w=new Array(80);for(i=0;i<80;i++)w[i]=new Word64(0,0);let a=new Word64(0,0),b=new Word64(0,0),c=new Word64(0,0),d=new Word64(0,0),e=new Word64(0,0),f=new Word64(0,0),g=new Word64(0,0),h=new Word64(0,0);const t1=new Word64(0,0),t2=new Word64(0,0),tmp1=new Word64(0,0),tmp2=new Word64(0,0);let tmp3;for(i=0;i<paddedLength;){for(j=0;j<16;++j)w[j].high=padded[i]<<24|padded[i+1]<<16|padded[i+2]<<8|padded[i+3],w[j].low=padded[i+4]<<24|padded[i+5]<<16|padded[i+6]<<8|padded[i+7],i+=8;for(j=16;j<80;++j)tmp3=w[j],littleSigmaPrime(tmp3,w[j-2],tmp2),tmp3.add(w[j-7]),littleSigma(tmp1,w[j-15],tmp2),tmp3.add(tmp1),tmp3.add(w[j-16]);for(a.assign(h0),b.assign(h1),c.assign(h2),d.assign(h3),e.assign(h4),f.assign(h5),g.assign(h6),h.assign(h7),j=0;j<80;++j)t1.assign(h),sigmaPrime(tmp1,e,tmp2),t1.add(tmp1),ch(tmp1,e,f,g,tmp2),t1.add(tmp1),t1.add(k[j]),t1.add(w[j]),sigma(t2,a,tmp2),maj(tmp1,a,b,c,tmp2),t2.add(tmp1),tmp3=h,h=g,g=f,f=e,d.add(t1),e=d,d=c,c=b,b=a,tmp3.assign(t1),tmp3.add(t2),a=tmp3;h0.add(a),h1.add(b),h2.add(c),h3.add(d),h4.add(e),h5.add(f),h6.add(g),h7.add(h)}let result;return mode384?(result=new Uint8Array(48),h0.copyTo(result,0),h1.copyTo(result,8),h2.copyTo(result,16),h3.copyTo(result,24),h4.copyTo(result,32),h5.copyTo(result,40)):(result=new Uint8Array(64),h0.copyTo(result,0),h1.copyTo(result,8),h2.copyTo(result,16),h3.copyTo(result,24),h4.copyTo(result,32),h5.copyTo(result,40),h6.copyTo(result,48),h7.copyTo(result,56)),result}return __name2(hash,"hash"),__name(hash,"hash"),hash},"calculateSHA512Closure"),"calculateSHA512Closure")();exports3.calculateSHA512=calculateSHA512;function calculateSHA384(data,offset,length){return calculateSHA512(data,offset,length,!0)}__name2(calculateSHA384,"calculateSHA384"),__name(calculateSHA384,"calculateSHA384");const _NullCipher=class{static{__name2(this,"_NullCipher")}decryptBlock(data){return data}encrypt(data){return data}};__name(_NullCipher,"NullCipher");let NullCipher=_NullCipher;const _AESBaseCipher=class _AESBaseCipher2{static{__name2(this,"_AESBaseCipher")}constructor(){this.constructor===_AESBaseCipher2&&(0,_util2.unreachable)("Cannot initialize AESBaseCipher."),this._s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),this._inv_s=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),this._mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]),this._mixCol=new Uint8Array(256);for(let i=0;i<256;i++)i<128?this._mixCol[i]=i<<1:this._mixCol[i]=i<<1^27;this.buffer=new Uint8Array(16),this.bufferPosition=0}_expandKey(cipherKey){(0,_util2.unreachable)("Cannot call `_expandKey` on the base class")}_decrypt(input,key){let t,u,v;const state=new Uint8Array(16);state.set(input);for(let j=0,k=this._keySize;j<16;++j,++k)state[j]^=key[k];for(let i=this._cyclesOfRepetition-1;i>=1;--i){t=state[13],state[13]=state[9],state[9]=state[5],state[5]=state[1],state[1]=t,t=state[14],u=state[10],state[14]=state[6],state[10]=state[2],state[6]=t,state[2]=u,t=state[15],u=state[11],v=state[7],state[15]=state[3],state[11]=t,state[7]=u,state[3]=v;for(let j=0;j<16;++j)state[j]=this._inv_s[state[j]];for(let j=0,k=i*16;j<16;++j,++k)state[j]^=key[k];for(let j=0;j<16;j+=4){const s0=this._mix[state[j]],s1=this._mix[state[j+1]],s2=this._mix[state[j+2]],s3=this._mix[state[j+3]];t=s0^s1>>>8^s1<<24^s2>>>16^s2<<16^s3>>>24^s3<<8,state[j]=t>>>24&255,state[j+1]=t>>16&255,state[j+2]=t>>8&255,state[j+3]=t&255}}t=state[13],state[13]=state[9],state[9]=state[5],state[5]=state[1],state[1]=t,t=state[14],u=state[10],state[14]=state[6],state[10]=state[2],state[6]=t,state[2]=u,t=state[15],u=state[11],v=state[7],state[15]=state[3],state[11]=t,state[7]=u,state[3]=v;for(let j=0;j<16;++j)state[j]=this._inv_s[state[j]],state[j]^=key[j];return state}_encrypt(input,key){const s=this._s;let t,u,v;const state=new Uint8Array(16);state.set(input);for(let j=0;j<16;++j)state[j]^=key[j];for(let i=1;i<this._cyclesOfRepetition;i++){for(let j=0;j<16;++j)state[j]=s[state[j]];v=state[1],state[1]=state[5],state[5]=state[9],state[9]=state[13],state[13]=v,v=state[2],u=state[6],state[2]=state[10],state[6]=state[14],state[10]=v,state[14]=u,v=state[3],u=state[7],t=state[11],state[3]=state[15],state[7]=v,state[11]=u,state[15]=t;for(let j=0;j<16;j+=4){const s0=state[j+0],s1=state[j+1],s2=state[j+2],s3=state[j+3];t=s0^s1^s2^s3,state[j+0]^=t^this._mixCol[s0^s1],state[j+1]^=t^this._mixCol[s1^s2],state[j+2]^=t^this._mixCol[s2^s3],state[j+3]^=t^this._mixCol[s3^s0]}for(let j=0,k=i*16;j<16;++j,++k)state[j]^=key[k]}for(let j=0;j<16;++j)state[j]=s[state[j]];v=state[1],state[1]=state[5],state[5]=state[9],state[9]=state[13],state[13]=v,v=state[2],u=state[6],state[2]=state[10],state[6]=state[14],state[10]=v,state[14]=u,v=state[3],u=state[7],t=state[11],state[3]=state[15],state[7]=v,state[11]=u,state[15]=t;for(let j=0,k=this._keySize;j<16;++j,++k)state[j]^=key[k];return state}_decryptBlock2(data,finalize){const sourceLength=data.length;let buffer=this.buffer,bufferLength=this.bufferPosition;const result=[];let iv=this.iv;for(let i=0;i<sourceLength;++i){if(buffer[bufferLength]=data[i],++bufferLength,bufferLength<16)continue;const plain=this._decrypt(buffer,this._key);for(let j=0;j<16;++j)plain[j]^=iv[j];iv=buffer,result.push(plain),buffer=new Uint8Array(16),bufferLength=0}if(this.buffer=buffer,this.bufferLength=bufferLength,this.iv=iv,result.length===0)return new Uint8Array(0);let outputLength=16*result.length;if(finalize){const lastBlock=result.at(-1);let psLen=lastBlock[15];if(psLen<=16){for(let i=15,ii=16-psLen;i>=ii;--i)if(lastBlock[i]!==psLen){psLen=0;break}outputLength-=psLen,result[result.length-1]=lastBlock.subarray(0,16-psLen)}}const output=new Uint8Array(outputLength);for(let i=0,j=0,ii=result.length;i<ii;++i,j+=16)output.set(result[i],j);return output}decryptBlock(data,finalize,iv=null){const sourceLength=data.length,buffer=this.buffer;let bufferLength=this.bufferPosition;if(iv)this.iv=iv;else{for(let i=0;bufferLength<16&&i<sourceLength;++i,++bufferLength)buffer[bufferLength]=data[i];if(bufferLength<16)return this.bufferLength=bufferLength,new Uint8Array(0);this.iv=buffer,data=data.subarray(16)}return this.buffer=new Uint8Array(16),this.bufferLength=0,this.decryptBlock=this._decryptBlock2,this.decryptBlock(data,finalize)}encrypt(data,iv){const sourceLength=data.length;let buffer=this.buffer,bufferLength=this.bufferPosition;const result=[];iv||(iv=new Uint8Array(16));for(let i=0;i<sourceLength;++i){if(buffer[bufferLength]=data[i],++bufferLength,bufferLength<16)continue;for(let j=0;j<16;++j)buffer[j]^=iv[j];const cipher=this._encrypt(buffer,this._key);iv=cipher,result.push(cipher),buffer=new Uint8Array(16),bufferLength=0}if(this.buffer=buffer,this.bufferLength=bufferLength,this.iv=iv,result.length===0)return new Uint8Array(0);const outputLength=16*result.length,output=new Uint8Array(outputLength);for(let i=0,j=0,ii=result.length;i<ii;++i,j+=16)output.set(result[i],j);return output}};__name(_AESBaseCipher,"AESBaseCipher");let AESBaseCipher=_AESBaseCipher;const _AES128Cipher=class extends AESBaseCipher{static{__name2(this,"_AES128Cipher")}constructor(key){super(),this._cyclesOfRepetition=10,this._keySize=160,this._rcon=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),this._key=this._expandKey(key)}_expandKey(cipherKey){const s=this._s,rcon=this._rcon,result=new Uint8Array(176);result.set(cipherKey);for(let j=16,i=1;j<176;++i){let t1=result[j-3],t2=result[j-2],t3=result[j-1],t4=result[j-4];t1=s[t1],t2=s[t2],t3=s[t3],t4=s[t4],t1^=rcon[i];for(let n=0;n<4;++n)result[j]=t1^=result[j-16],j++,result[j]=t2^=result[j-16],j++,result[j]=t3^=result[j-16],j++,result[j]=t4^=result[j-16],j++}return result}};__name(_AES128Cipher,"AES128Cipher");let AES128Cipher=_AES128Cipher;exports3.AES128Cipher=AES128Cipher;const _AES256Cipher=class extends AESBaseCipher{static{__name2(this,"_AES256Cipher")}constructor(key){super(),this._cyclesOfRepetition=14,this._keySize=224,this._key=this._expandKey(key)}_expandKey(cipherKey){const s=this._s,result=new Uint8Array(240);result.set(cipherKey);let r=1,t1,t2,t3,t4;for(let j=32,i=1;j<240;++i){j%32===16?(t1=s[t1],t2=s[t2],t3=s[t3],t4=s[t4]):j%32===0&&(t1=result[j-3],t2=result[j-2],t3=result[j-1],t4=result[j-4],t1=s[t1],t2=s[t2],t3=s[t3],t4=s[t4],t1^=r,(r<<=1)>=256&&(r=(r^27)&255));for(let n=0;n<4;++n)result[j]=t1^=result[j-32],j++,result[j]=t2^=result[j-32],j++,result[j]=t3^=result[j-32],j++,result[j]=t4^=result[j-32],j++}return result}};__name(_AES256Cipher,"AES256Cipher");let AES256Cipher=_AES256Cipher;exports3.AES256Cipher=AES256Cipher;const _PDF17=class{static{__name2(this,"_PDF17")}checkOwnerPassword(password,ownerValidationSalt,userBytes,ownerPassword){const hashData=new Uint8Array(password.length+56);hashData.set(password,0),hashData.set(ownerValidationSalt,password.length),hashData.set(userBytes,password.length+ownerValidationSalt.length);const result=calculateSHA256(hashData,0,hashData.length);return(0,_util2.isArrayEqual)(result,ownerPassword)}checkUserPassword(password,userValidationSalt,userPassword){const hashData=new Uint8Array(password.length+8);hashData.set(password,0),hashData.set(userValidationSalt,password.length);const result=calculateSHA256(hashData,0,hashData.length);return(0,_util2.isArrayEqual)(result,userPassword)}getOwnerKey(password,ownerKeySalt,userBytes,ownerEncryption){const hashData=new Uint8Array(password.length+56);hashData.set(password,0),hashData.set(ownerKeySalt,password.length),hashData.set(userBytes,password.length+ownerKeySalt.length);const key=calculateSHA256(hashData,0,hashData.length);return new AES256Cipher(key).decryptBlock(ownerEncryption,!1,new Uint8Array(16))}getUserKey(password,userKeySalt,userEncryption){const hashData=new Uint8Array(password.length+8);hashData.set(password,0),hashData.set(userKeySalt,password.length);const key=calculateSHA256(hashData,0,hashData.length);return new AES256Cipher(key).decryptBlock(userEncryption,!1,new Uint8Array(16))}};__name(_PDF17,"PDF17");let PDF17=_PDF17;exports3.PDF17=PDF17;const PDF20=__name(__name2(function(){function calculatePDF20Hash(password,input,userBytes){let k=calculateSHA256(input,0,input.length).subarray(0,32),e=[0],i=0;for(;i<64||e.at(-1)>i-32;){const combinedLength=password.length+k.length+userBytes.length,combinedArray=new Uint8Array(combinedLength);let writeOffset=0;combinedArray.set(password,writeOffset),writeOffset+=password.length,combinedArray.set(k,writeOffset),writeOffset+=k.length,combinedArray.set(userBytes,writeOffset);const k1=new Uint8Array(combinedLength*64);for(let j=0,pos=0;j<64;j++,pos+=combinedLength)k1.set(combinedArray,pos);e=new AES128Cipher(k.subarray(0,16)).encrypt(k1,k.subarray(16,32));let remainder=0;for(let z=0;z<16;z++)remainder*=256%3,remainder%=3,remainder+=(e[z]>>>0)%3,remainder%=3;remainder===0?k=calculateSHA256(e,0,e.length):remainder===1?k=calculateSHA384(e,0,e.length):remainder===2&&(k=calculateSHA512(e,0,e.length)),i++}return k.subarray(0,32)}__name2(calculatePDF20Hash,"calculatePDF20Hash"),__name(calculatePDF20Hash,"calculatePDF20Hash");const _PDF20=class{static{__name2(this,"_PDF20")}hash(password,concatBytes,userBytes){return calculatePDF20Hash(password,concatBytes,userBytes)}checkOwnerPassword(password,ownerValidationSalt,userBytes,ownerPassword){const hashData=new Uint8Array(password.length+56);hashData.set(password,0),hashData.set(ownerValidationSalt,password.length),hashData.set(userBytes,password.length+ownerValidationSalt.length);const result=calculatePDF20Hash(password,hashData,userBytes);return(0,_util2.isArrayEqual)(result,ownerPassword)}checkUserPassword(password,userValidationSalt,userPassword){const hashData=new Uint8Array(password.length+8);hashData.set(password,0),hashData.set(userValidationSalt,password.length);const result=calculatePDF20Hash(password,hashData,[]);return(0,_util2.isArrayEqual)(result,userPassword)}getOwnerKey(password,ownerKeySalt,userBytes,ownerEncryption){const hashData=new Uint8Array(password.length+56);hashData.set(password,0),hashData.set(ownerKeySalt,password.length),hashData.set(userBytes,password.length+ownerKeySalt.length);const key=calculatePDF20Hash(password,hashData,userBytes);return new AES256Cipher(key).decryptBlock(ownerEncryption,!1,new Uint8Array(16))}getUserKey(password,userKeySalt,userEncryption){const hashData=new Uint8Array(password.length+8);hashData.set(password,0),hashData.set(userKeySalt,password.length);const key=calculatePDF20Hash(password,hashData,[]);return new AES256Cipher(key).decryptBlock(userEncryption,!1,new Uint8Array(16))}};return __name(_PDF20,"PDF20"),_PDF20},"PDF20Closure"),"PDF20Closure")();exports3.PDF20=PDF20;const _CipherTransform=class{static{__name2(this,"_CipherTransform")}constructor(stringCipherConstructor,streamCipherConstructor){this.StringCipherConstructor=stringCipherConstructor,this.StreamCipherConstructor=streamCipherConstructor}createStream(stream,length){const cipher=new this.StreamCipherConstructor;return new _decrypt_stream.DecryptStream(stream,length,__name(__name2(function(data,finalize){return cipher.decryptBlock(data,finalize)},"cipherTransformDecryptStream"),"cipherTransformDecryptStream"))}decryptString(s){const cipher=new this.StringCipherConstructor;let data=(0,_util2.stringToBytes)(s);return data=cipher.decryptBlock(data,!0),(0,_util2.bytesToString)(data)}encryptString(s){const cipher=new this.StringCipherConstructor;if(cipher instanceof AESBaseCipher){const pad=16-s.length%16;s+=String.fromCharCode(pad).repeat(pad);const iv=new Uint8Array(16);if(typeof crypto<"u")crypto.getRandomValues(iv);else for(let i=0;i<16;i++)iv[i]=Math.floor(256*Math.random());let data2=(0,_util2.stringToBytes)(s);data2=cipher.encrypt(data2,iv);const buf=new Uint8Array(16+data2.length);return buf.set(iv),buf.set(data2,16),(0,_util2.bytesToString)(buf)}let data=(0,_util2.stringToBytes)(s);return data=cipher.encrypt(data),(0,_util2.bytesToString)(data)}};__name(_CipherTransform,"CipherTransform");let CipherTransform=_CipherTransform;const CipherTransformFactory=__name(__name2(function(){const defaultPasswordBytes=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);function createEncryptionKey20(revision,password,ownerPassword,ownerValidationSalt,ownerKeySalt,uBytes,userPassword,userValidationSalt,userKeySalt,ownerEncryption,userEncryption,perms){if(password){const passwordLength=Math.min(127,password.length);password=password.subarray(0,passwordLength)}else password=[];let pdfAlgorithm;return revision===6?pdfAlgorithm=new PDF20:pdfAlgorithm=new PDF17,pdfAlgorithm.checkUserPassword(password,userValidationSalt,userPassword)?pdfAlgorithm.getUserKey(password,userKeySalt,userEncryption):password.length&&pdfAlgorithm.checkOwnerPassword(password,ownerValidationSalt,uBytes,ownerPassword)?pdfAlgorithm.getOwnerKey(password,ownerKeySalt,uBytes,ownerEncryption):null}__name2(createEncryptionKey20,"createEncryptionKey20"),__name(createEncryptionKey20,"createEncryptionKey20");function prepareKeyData(fileId,password,ownerPassword,userPassword,flags,revision,keyLength,encryptMetadata){const hashDataSize=40+ownerPassword.length+fileId.length,hashData=new Uint8Array(hashDataSize);let i=0,j,n;if(password)for(n=Math.min(32,password.length);i<n;++i)hashData[i]=password[i];for(j=0;i<32;)hashData[i++]=defaultPasswordBytes[j++];for(j=0,n=ownerPassword.length;j<n;++j)hashData[i++]=ownerPassword[j];for(hashData[i++]=flags&255,hashData[i++]=flags>>8&255,hashData[i++]=flags>>16&255,hashData[i++]=flags>>>24&255,j=0,n=fileId.length;j<n;++j)hashData[i++]=fileId[j];revision>=4&&!encryptMetadata&&(hashData[i++]=255,hashData[i++]=255,hashData[i++]=255,hashData[i++]=255);let hash=calculateMD5(hashData,0,i);const keyLengthInBytes=keyLength>>3;if(revision>=3)for(j=0;j<50;++j)hash=calculateMD5(hash,0,keyLengthInBytes);const encryptionKey=hash.subarray(0,keyLengthInBytes);let cipher,checkData;if(revision>=3){for(i=0;i<32;++i)hashData[i]=defaultPasswordBytes[i];for(j=0,n=fileId.length;j<n;++j)hashData[i++]=fileId[j];cipher=new ARCFourCipher(encryptionKey),checkData=cipher.encryptBlock(calculateMD5(hashData,0,i)),n=encryptionKey.length;const derivedKey=new Uint8Array(n);for(j=1;j<=19;++j){for(let k=0;k<n;++k)derivedKey[k]=encryptionKey[k]^j;cipher=new ARCFourCipher(derivedKey),checkData=cipher.encryptBlock(checkData)}for(j=0,n=checkData.length;j<n;++j)if(userPassword[j]!==checkData[j])return null}else for(cipher=new ARCFourCipher(encryptionKey),checkData=cipher.encryptBlock(defaultPasswordBytes),j=0,n=checkData.length;j<n;++j)if(userPassword[j]!==checkData[j])return null;return encryptionKey}__name2(prepareKeyData,"prepareKeyData"),__name(prepareKeyData,"prepareKeyData");function decodeUserPassword(password,ownerPassword,revision,keyLength){const hashData=new Uint8Array(32);let i=0;const n=Math.min(32,password.length);for(;i<n;++i)hashData[i]=password[i];let j=0;for(;i<32;)hashData[i++]=defaultPasswordBytes[j++];let hash=calculateMD5(hashData,0,i);const keyLengthInBytes=keyLength>>3;if(revision>=3)for(j=0;j<50;++j)hash=calculateMD5(hash,0,hash.length);let cipher,userPassword;if(revision>=3){userPassword=ownerPassword;const derivedKey=new Uint8Array(keyLengthInBytes);for(j=19;j>=0;j--){for(let k=0;k<keyLengthInBytes;++k)derivedKey[k]=hash[k]^j;cipher=new ARCFourCipher(derivedKey),userPassword=cipher.encryptBlock(userPassword)}}else cipher=new ARCFourCipher(hash.subarray(0,keyLengthInBytes)),userPassword=cipher.encryptBlock(ownerPassword);return userPassword}__name2(decodeUserPassword,"decodeUserPassword"),__name(decodeUserPassword,"decodeUserPassword");const identityName=_primitives.Name.get("Identity");function buildObjectKey(num,gen,encryptionKey,isAes=!1){const key=new Uint8Array(encryptionKey.length+9),n=encryptionKey.length;let i;for(i=0;i<n;++i)key[i]=encryptionKey[i];return key[i++]=num&255,key[i++]=num>>8&255,key[i++]=num>>16&255,key[i++]=gen&255,key[i++]=gen>>8&255,isAes&&(key[i++]=115,key[i++]=65,key[i++]=108,key[i++]=84),calculateMD5(key,0,i).subarray(0,Math.min(encryptionKey.length+5,16))}__name2(buildObjectKey,"buildObjectKey"),__name(buildObjectKey,"buildObjectKey");function buildCipherConstructor(cf,name,num,gen,key){if(!(name instanceof _primitives.Name))throw new _util2.FormatError("Invalid crypt filter name.");const cryptFilter=cf.get(name.name);let cfm;if(cryptFilter!=null&&(cfm=cryptFilter.get("CFM")),!cfm||cfm.name==="None")return __name(__name2(function(){return new NullCipher},"cipherTransformFactoryBuildCipherConstructorNone"),"cipherTransformFactoryBuildCipherConstructorNone");if(cfm.name==="V2")return __name(__name2(function(){return new ARCFourCipher(buildObjectKey(num,gen,key,!1))},"cipherTransformFactoryBuildCipherConstructorV2"),"cipherTransformFactoryBuildCipherConstructorV2");if(cfm.name==="AESV2")return __name(__name2(function(){return new AES128Cipher(buildObjectKey(num,gen,key,!0))},"cipherTransformFactoryBuildCipherConstructorAESV2"),"cipherTransformFactoryBuildCipherConstructorAESV2");if(cfm.name==="AESV3")return __name(__name2(function(){return new AES256Cipher(key)},"cipherTransformFactoryBuildCipherConstructorAESV3"),"cipherTransformFactoryBuildCipherConstructorAESV3");throw new _util2.FormatError("Unknown crypto method")}__name2(buildCipherConstructor,"buildCipherConstructor"),__name(buildCipherConstructor,"buildCipherConstructor");const _CipherTransformFactory=class{static{__name2(this,"_CipherTransformFactory")}constructor(dict,fileId,password){const filter2=dict.get("Filter");if(!(0,_primitives.isName)(filter2,"Standard"))throw new _util2.FormatError("unknown encryption method");this.filterName=filter2.name,this.dict=dict;const algorithm=dict.get("V");if(!Number.isInteger(algorithm)||algorithm!==1&&algorithm!==2&&algorithm!==4&&algorithm!==5)throw new _util2.FormatError("unsupported encryption algorithm");this.algorithm=algorithm;let keyLength=dict.get("Length");if(!keyLength)if(algorithm<=3)keyLength=40;else{const cfDict=dict.get("CF"),streamCryptoName=dict.get("StmF");if(cfDict instanceof _primitives.Dict&&streamCryptoName instanceof _primitives.Name){cfDict.suppressEncryption=!0;const handlerDict=cfDict.get(streamCryptoName.name);keyLength=handlerDict&&handlerDict.get("Length")||128,keyLength<40&&(keyLength<<=3)}}if(!Number.isInteger(keyLength)||keyLength<40||keyLength%8!==0)throw new _util2.FormatError("invalid key length");const ownerPassword=(0,_util2.stringToBytes)(dict.get("O")).subarray(0,32),userPassword=(0,_util2.stringToBytes)(dict.get("U")).subarray(0,32),flags=dict.get("P"),revision=dict.get("R"),encryptMetadata=(algorithm===4||algorithm===5)&&dict.get("EncryptMetadata")!==!1;this.encryptMetadata=encryptMetadata;const fileIdBytes=(0,_util2.stringToBytes)(fileId);let passwordBytes;if(password){if(revision===6)try{password=(0,_util2.utf8StringToString)(password)}catch{(0,_util2.warn)("CipherTransformFactory: Unable to convert UTF8 encoded password.")}passwordBytes=(0,_util2.stringToBytes)(password)}let encryptionKey;if(algorithm!==5)encryptionKey=prepareKeyData(fileIdBytes,passwordBytes,ownerPassword,userPassword,flags,revision,keyLength,encryptMetadata);else{const ownerValidationSalt=(0,_util2.stringToBytes)(dict.get("O")).subarray(32,40),ownerKeySalt=(0,_util2.stringToBytes)(dict.get("O")).subarray(40,48),uBytes=(0,_util2.stringToBytes)(dict.get("U")).subarray(0,48),userValidationSalt=(0,_util2.stringToBytes)(dict.get("U")).subarray(32,40),userKeySalt=(0,_util2.stringToBytes)(dict.get("U")).subarray(40,48),ownerEncryption=(0,_util2.stringToBytes)(dict.get("OE")),userEncryption=(0,_util2.stringToBytes)(dict.get("UE"));(0,_util2.stringToBytes)(dict.get("Perms")),encryptionKey=createEncryptionKey20(revision,passwordBytes,ownerPassword,ownerValidationSalt,ownerKeySalt,uBytes,userPassword,userValidationSalt,userKeySalt,ownerEncryption,userEncryption)}if(!encryptionKey&&!password)throw new _util2.PasswordException("No password given",_util2.PasswordResponses.NEED_PASSWORD);if(!encryptionKey&&password){const decodedPassword=decodeUserPassword(passwordBytes,ownerPassword,revision,keyLength);encryptionKey=prepareKeyData(fileIdBytes,decodedPassword,ownerPassword,userPassword,flags,revision,keyLength,encryptMetadata)}if(!encryptionKey)throw new _util2.PasswordException("Incorrect Password",_util2.PasswordResponses.INCORRECT_PASSWORD);if(this.encryptionKey=encryptionKey,algorithm>=4){const cf=dict.get("CF");cf instanceof _primitives.Dict&&(cf.suppressEncryption=!0),this.cf=cf,this.stmf=dict.get("StmF")||identityName,this.strf=dict.get("StrF")||identityName,this.eff=dict.get("EFF")||this.stmf}}createCipherTransform(num,gen){if(this.algorithm===4||this.algorithm===5)return new CipherTransform(buildCipherConstructor(this.cf,this.strf,num,gen,this.encryptionKey),buildCipherConstructor(this.cf,this.stmf,num,gen,this.encryptionKey));const key=buildObjectKey(num,gen,this.encryptionKey,!1),cipherConstructor=__name(__name2(function(){return new ARCFourCipher(key)},"buildCipherCipherConstructor"),"buildCipherCipherConstructor");return new CipherTransform(cipherConstructor,cipherConstructor)}};return __name(_CipherTransformFactory,"CipherTransformFactory"),_CipherTransformFactory},"CipherTransformFactoryClosure"),"CipherTransformFactoryClosure")();exports3.CipherTransformFactory=CipherTransformFactory},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.DecryptStream=void 0;var _decode_stream=__w_pdfjs_require__3(19);const chunkSize=512,_DecryptStream=class extends _decode_stream.DecodeStream{static{__name2(this,"_DecryptStream")}constructor(str,maybeLength,decrypt){super(maybeLength),this.str=str,this.dict=str.dict,this.decrypt=decrypt,this.nextChunk=null,this.initialized=!1}readBlock(){let chunk;if(this.initialized?chunk=this.nextChunk:(chunk=this.str.getBytes(chunkSize),this.initialized=!0),!chunk||chunk.length===0){this.eof=!0;return}this.nextChunk=this.str.getBytes(chunkSize);const hasMoreData=this.nextChunk&&this.nextChunk.length>0,decrypt=this.decrypt;chunk=decrypt(chunk,!hasMoreData);let bufferLength=this.bufferLength;const n=chunk.length,buffer=this.ensureBuffer(bufferLength+n);for(let i=0;i<n;i++)buffer[bufferLength++]=chunk[i];this.bufferLength=bufferLength}};__name(_DecryptStream,"DecryptStream");let DecryptStream=_DecryptStream;exports3.DecryptStream=DecryptStream},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.Catalog=void 0;var _core_utils=__w_pdfjs_require__3(6),_util2=__w_pdfjs_require__3(2),_primitives=__w_pdfjs_require__3(5),_name_number_tree=__w_pdfjs_require__3(70),_base_stream=__w_pdfjs_require__3(7),_cleanup_helper=__w_pdfjs_require__3(71),_colorspace=__w_pdfjs_require__3(14),_file_spec=__w_pdfjs_require__3(72),_image_utils=__w_pdfjs_require__3(59),_metadata_parser=__w_pdfjs_require__3(73),_struct_tree=__w_pdfjs_require__3(74);function fetchDestination(dest){return dest instanceof _primitives.Dict&&(dest=dest.get("D")),Array.isArray(dest)?dest:null}__name2(fetchDestination,"fetchDestination"),__name(fetchDestination,"fetchDestination");const _Catalog=class _Catalog2{static{__name2(this,"_Catalog")}constructor(pdfManager,xref){if(this.pdfManager=pdfManager,this.xref=xref,this._catDict=xref.getCatalogObj(),!(this._catDict instanceof _primitives.Dict))throw new _util2.FormatError("Catalog object is not a dictionary.");this.toplevelPagesDict,this._actualNumPages=null,this.fontCache=new _primitives.RefSetCache,this.builtInCMapCache=new Map,this.standardFontDataCache=new Map,this.globalImageCache=new _image_utils.GlobalImageCache,this.pageKidsCountCache=new _primitives.RefSetCache,this.pageIndexCache=new _primitives.RefSetCache,this.nonBlendModesSet=new _primitives.RefSet}get version(){const version2=this._catDict.get("Version");return(0,_util2.shadow)(this,"version",version2 instanceof _primitives.Name?version2.name:null)}get lang(){const lang=this._catDict.get("Lang");return(0,_util2.shadow)(this,"lang",typeof lang=="string"?(0,_util2.stringToPDFString)(lang):null)}get needsRendering(){const needsRendering=this._catDict.get("NeedsRendering");return(0,_util2.shadow)(this,"needsRendering",typeof needsRendering=="boolean"?needsRendering:!1)}get collection(){let collection=null;try{const obj=this._catDict.get("Collection");obj instanceof _primitives.Dict&&obj.size>0&&(collection=obj)}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.info)("Cannot fetch Collection entry; assuming no collection is present.")}return(0,_util2.shadow)(this,"collection",collection)}get acroForm(){let acroForm=null;try{const obj=this._catDict.get("AcroForm");obj instanceof _primitives.Dict&&obj.size>0&&(acroForm=obj)}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.info)("Cannot fetch AcroForm entry; assuming no forms are present.")}return(0,_util2.shadow)(this,"acroForm",acroForm)}get acroFormRef(){const value=this._catDict.getRaw("AcroForm");return(0,_util2.shadow)(this,"acroFormRef",value instanceof _primitives.Ref?value:null)}get metadata(){const streamRef=this._catDict.getRaw("Metadata");if(!(streamRef instanceof _primitives.Ref))return(0,_util2.shadow)(this,"metadata",null);let metadata=null;try{const suppressEncryption=!(this.xref.encrypt&&this.xref.encrypt.encryptMetadata),stream=this.xref.fetch(streamRef,suppressEncryption);if(stream instanceof _base_stream.BaseStream&&stream.dict instanceof _primitives.Dict){const type=stream.dict.get("Type"),subtype=stream.dict.get("Subtype");if((0,_primitives.isName)(type,"Metadata")&&(0,_primitives.isName)(subtype,"XML")){const data=(0,_util2.stringToUTF8String)(stream.getString());data&&(metadata=new _metadata_parser.MetadataParser(data).serializable)}}}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.info)(`Skipping invalid Metadata: "${ex}".`)}return(0,_util2.shadow)(this,"metadata",metadata)}get markInfo(){let markInfo=null;try{markInfo=this._readMarkInfo()}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.warn)("Unable to read mark info.")}return(0,_util2.shadow)(this,"markInfo",markInfo)}_readMarkInfo(){const obj=this._catDict.get("MarkInfo");if(!(obj instanceof _primitives.Dict))return null;const markInfo={Marked:!1,UserProperties:!1,Suspects:!1};for(const key in markInfo){const value=obj.get(key);typeof value=="boolean"&&(markInfo[key]=value)}return markInfo}get structTreeRoot(){let structTree=null;try{structTree=this._readStructTreeRoot()}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.warn)("Unable read to structTreeRoot info.")}return(0,_util2.shadow)(this,"structTreeRoot",structTree)}_readStructTreeRoot(){const obj=this._catDict.get("StructTreeRoot");if(!(obj instanceof _primitives.Dict))return null;const root=new _struct_tree.StructTreeRoot(obj);return root.init(),root}get toplevelPagesDict(){const pagesObj=this._catDict.get("Pages");if(!(pagesObj instanceof _primitives.Dict))throw new _util2.FormatError("Invalid top-level pages dictionary.");return(0,_util2.shadow)(this,"toplevelPagesDict",pagesObj)}get documentOutline(){let obj=null;try{obj=this._readDocumentOutline()}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.warn)("Unable to read document outline.")}return(0,_util2.shadow)(this,"documentOutline",obj)}_readDocumentOutline(){let obj=this._catDict.get("Outlines");if(!(obj instanceof _primitives.Dict)||(obj=obj.getRaw("First"),!(obj instanceof _primitives.Ref)))return null;const root={items:[]},queue=[{obj,parent:root}],processed=new _primitives.RefSet;processed.put(obj);const xref=this.xref,blackColor=new Uint8ClampedArray(3);for(;queue.length>0;){const i=queue.shift(),outlineDict=xref.fetchIfRef(i.obj);if(outlineDict===null)continue;if(!outlineDict.has("Title"))throw new _util2.FormatError("Invalid outline item encountered.");const data={url:null,dest:null};_Catalog2.parseDestDictionary({destDict:outlineDict,resultObj:data,docBaseUrl:this.pdfManager.docBaseUrl});const title=outlineDict.get("Title"),flags=outlineDict.get("F")||0,color=outlineDict.getArray("C"),count=outlineDict.get("Count");let rgbColor=blackColor;Array.isArray(color)&&color.length===3&&(color[0]!==0||color[1]!==0||color[2]!==0)&&(rgbColor=_colorspace.ColorSpace.singletons.rgb.getRgb(color,0));const outlineItem={dest:data.dest,url:data.url,unsafeUrl:data.unsafeUrl,newWindow:data.newWindow,title:(0,_util2.stringToPDFString)(title),color:rgbColor,count:Number.isInteger(count)?count:void 0,bold:!!(flags&2),italic:!!(flags&1),items:[]};i.parent.items.push(outlineItem),obj=outlineDict.getRaw("First"),obj instanceof _primitives.Ref&&!processed.has(obj)&&(queue.push({obj,parent:outlineItem}),processed.put(obj)),obj=outlineDict.getRaw("Next"),obj instanceof _primitives.Ref&&!processed.has(obj)&&(queue.push({obj,parent:i.parent}),processed.put(obj))}return root.items.length>0?root.items:null}get permissions(){let permissions=null;try{permissions=this._readPermissions()}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.warn)("Unable to read permissions.")}return(0,_util2.shadow)(this,"permissions",permissions)}_readPermissions(){const encrypt=this.xref.trailer.get("Encrypt");if(!(encrypt instanceof _primitives.Dict))return null;let flags=encrypt.get("P");if(typeof flags!="number")return null;flags+=2**32;const permissions=[];for(const key in _util2.PermissionFlag){const value=_util2.PermissionFlag[key];flags&value&&permissions.push(value)}return permissions}get optionalContentConfig(){let config=null;try{const properties=this._catDict.get("OCProperties");if(!properties)return(0,_util2.shadow)(this,"optionalContentConfig",null);const defaultConfig=properties.get("D");if(!defaultConfig)return(0,_util2.shadow)(this,"optionalContentConfig",null);const groupsData=properties.get("OCGs");if(!Array.isArray(groupsData))return(0,_util2.shadow)(this,"optionalContentConfig",null);const groups=[],groupRefs=[];for(const groupRef of groupsData){if(!(groupRef instanceof _primitives.Ref))continue;groupRefs.push(groupRef);const group=this.xref.fetchIfRef(groupRef);groups.push({id:groupRef.toString(),name:typeof group.get("Name")=="string"?(0,_util2.stringToPDFString)(group.get("Name")):null,intent:typeof group.get("Intent")=="string"?(0,_util2.stringToPDFString)(group.get("Intent")):null})}config=this._readOptionalContentConfig(defaultConfig,groupRefs),config.groups=groups}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.warn)(`Unable to read optional content config: ${ex}`)}return(0,_util2.shadow)(this,"optionalContentConfig",config)}_readOptionalContentConfig(config,contentGroupRefs){function parseOnOff(refs){const onParsed=[];if(Array.isArray(refs))for(const value of refs)value instanceof _primitives.Ref&&contentGroupRefs.includes(value)&&onParsed.push(value.toString());return onParsed}__name2(parseOnOff,"parseOnOff"),__name(parseOnOff,"parseOnOff");function parseOrder(refs,nestedLevels=0){if(!Array.isArray(refs))return null;const order=[];for(const value of refs){if(value instanceof _primitives.Ref&&contentGroupRefs.includes(value)){parsedOrderRefs.put(value),order.push(value.toString());continue}const nestedOrder=parseNestedOrder(value,nestedLevels);nestedOrder&&order.push(nestedOrder)}if(nestedLevels>0)return order;const hiddenGroups=[];for(const groupRef of contentGroupRefs)parsedOrderRefs.has(groupRef)||hiddenGroups.push(groupRef.toString());return hiddenGroups.length&&order.push({name:null,order:hiddenGroups}),order}__name2(parseOrder,"parseOrder"),__name(parseOrder,"parseOrder");function parseNestedOrder(ref,nestedLevels){if(++nestedLevels>MAX_NESTED_LEVELS)return(0,_util2.warn)("parseNestedOrder - reached MAX_NESTED_LEVELS."),null;const value=xref.fetchIfRef(ref);if(!Array.isArray(value))return null;const nestedName=xref.fetchIfRef(value[0]);if(typeof nestedName!="string")return null;const nestedOrder=parseOrder(value.slice(1),nestedLevels);return!nestedOrder||!nestedOrder.length?null:{name:(0,_util2.stringToPDFString)(nestedName),order:nestedOrder}}__name2(parseNestedOrder,"parseNestedOrder"),__name(parseNestedOrder,"parseNestedOrder");const xref=this.xref,parsedOrderRefs=new _primitives.RefSet,MAX_NESTED_LEVELS=10;return{name:typeof config.get("Name")=="string"?(0,_util2.stringToPDFString)(config.get("Name")):null,creator:typeof config.get("Creator")=="string"?(0,_util2.stringToPDFString)(config.get("Creator")):null,baseState:config.get("BaseState")instanceof _primitives.Name?config.get("BaseState").name:null,on:parseOnOff(config.get("ON")),off:parseOnOff(config.get("OFF")),order:parseOrder(config.get("Order")),groups:null}}setActualNumPages(num=null){this._actualNumPages=num}get hasActualNumPages(){return this._actualNumPages!==null}get _pagesCount(){const obj=this.toplevelPagesDict.get("Count");if(!Number.isInteger(obj))throw new _util2.FormatError("Page count in top-level pages dictionary is not an integer.");return(0,_util2.shadow)(this,"_pagesCount",obj)}get numPages(){return this.hasActualNumPages?this._actualNumPages:this._pagesCount}get destinations(){const obj=this._readDests(),dests=Object.create(null);if(obj instanceof _name_number_tree.NameTree)for(const[key,value]of obj.getAll()){const dest=fetchDestination(value);dest&&(dests[(0,_util2.stringToPDFString)(key)]=dest)}else obj instanceof _primitives.Dict&&obj.forEach(function(key,value){const dest=fetchDestination(value);dest&&(dests[key]=dest)});return(0,_util2.shadow)(this,"destinations",dests)}getDestination(id){const obj=this._readDests();if(obj instanceof _name_number_tree.NameTree){const dest=fetchDestination(obj.get(id));if(dest)return dest;const allDest=this.destinations[id];if(allDest)return(0,_util2.warn)(`Found "${id}" at an incorrect position in the NameTree.`),allDest}else if(obj instanceof _primitives.Dict){const dest=fetchDestination(obj.get(id));if(dest)return dest}return null}_readDests(){const obj=this._catDict.get("Names");if(obj&&obj.has("Dests"))return new _name_number_tree.NameTree(obj.getRaw("Dests"),this.xref);if(this._catDict.has("Dests"))return this._catDict.get("Dests")}get pageLabels(){let obj=null;try{obj=this._readPageLabels()}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.warn)("Unable to read page labels.")}return(0,_util2.shadow)(this,"pageLabels",obj)}_readPageLabels(){const obj=this._catDict.getRaw("PageLabels");if(!obj)return null;const pageLabels=new Array(this.numPages);let style=null,prefix="";const nums=new _name_number_tree.NumberTree(obj,this.xref).getAll();let currentLabel="",currentIndex=1;for(let i=0,ii=this.numPages;i<ii;i++){const labelDict=nums.get(i);if(labelDict!==void 0){if(!(labelDict instanceof _primitives.Dict))throw new _util2.FormatError("PageLabel is not a dictionary.");if(labelDict.has("Type")&&!(0,_primitives.isName)(labelDict.get("Type"),"PageLabel"))throw new _util2.FormatError("Invalid type in PageLabel dictionary.");if(labelDict.has("S")){const s=labelDict.get("S");if(!(s instanceof _primitives.Name))throw new _util2.FormatError("Invalid style in PageLabel dictionary.");style=s.name}else style=null;if(labelDict.has("P")){const p=labelDict.get("P");if(typeof p!="string")throw new _util2.FormatError("Invalid prefix in PageLabel dictionary.");prefix=(0,_util2.stringToPDFString)(p)}else prefix="";if(labelDict.has("St")){const st=labelDict.get("St");if(!(Number.isInteger(st)&&st>=1))throw new _util2.FormatError("Invalid start in PageLabel dictionary.");currentIndex=st}else currentIndex=1}switch(style){case"D":currentLabel=currentIndex;break;case"R":case"r":currentLabel=(0,_core_utils.toRomanNumerals)(currentIndex,style==="r");break;case"A":case"a":const LIMIT=26,baseCharCode=style==="a"?97:65,letterIndex=currentIndex-1;currentLabel=String.fromCharCode(baseCharCode+letterIndex%LIMIT).repeat(Math.floor(letterIndex/LIMIT)+1);break;default:if(style)throw new _util2.FormatError(`Invalid style "${style}" in PageLabel dictionary.`);currentLabel=""}pageLabels[i]=prefix+currentLabel,currentIndex++}return pageLabels}get pageLayout(){const obj=this._catDict.get("PageLayout");let pageLayout="";if(obj instanceof _primitives.Name)switch(obj.name){case"SinglePage":case"OneColumn":case"TwoColumnLeft":case"TwoColumnRight":case"TwoPageLeft":case"TwoPageRight":pageLayout=obj.name}return(0,_util2.shadow)(this,"pageLayout",pageLayout)}get pageMode(){const obj=this._catDict.get("PageMode");let pageMode="UseNone";if(obj instanceof _primitives.Name)switch(obj.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":pageMode=obj.name}return(0,_util2.shadow)(this,"pageMode",pageMode)}get viewerPreferences(){const obj=this._catDict.get("ViewerPreferences");if(!(obj instanceof _primitives.Dict))return(0,_util2.shadow)(this,"viewerPreferences",null);let prefs=null;for(const key of obj.getKeys()){const value=obj.get(key);let prefValue;switch(key){case"HideToolbar":case"HideMenubar":case"HideWindowUI":case"FitWindow":case"CenterWindow":case"DisplayDocTitle":case"PickTrayByPDFSize":typeof value=="boolean"&&(prefValue=value);break;case"NonFullScreenPageMode":if(value instanceof _primitives.Name)switch(value.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"UseOC":prefValue=value.name;break;default:prefValue="UseNone"}break;case"Direction":if(value instanceof _primitives.Name)switch(value.name){case"L2R":case"R2L":prefValue=value.name;break;default:prefValue="L2R"}break;case"ViewArea":case"ViewClip":case"PrintArea":case"PrintClip":if(value instanceof _primitives.Name)switch(value.name){case"MediaBox":case"CropBox":case"BleedBox":case"TrimBox":case"ArtBox":prefValue=value.name;break;default:prefValue="CropBox"}break;case"PrintScaling":if(value instanceof _primitives.Name)switch(value.name){case"None":case"AppDefault":prefValue=value.name;break;default:prefValue="AppDefault"}break;case"Duplex":if(value instanceof _primitives.Name)switch(value.name){case"Simplex":case"DuplexFlipShortEdge":case"DuplexFlipLongEdge":prefValue=value.name;break;default:prefValue="None"}break;case"PrintPageRange":Array.isArray(value)&&value.length%2===0&&value.every((page,i,arr)=>Number.isInteger(page)&&page>0&&(i===0||page>=arr[i-1])&&page<=this.numPages)&&(prefValue=value);break;case"NumCopies":Number.isInteger(value)&&value>0&&(prefValue=value);break;default:(0,_util2.warn)(`Ignoring non-standard key in ViewerPreferences: ${key}.`);continue}if(prefValue===void 0){(0,_util2.warn)(`Bad value, for key "${key}", in ViewerPreferences: ${value}.`);continue}prefs||(prefs=Object.create(null)),prefs[key]=prefValue}return(0,_util2.shadow)(this,"viewerPreferences",prefs)}get openAction(){const obj=this._catDict.get("OpenAction"),openAction=Object.create(null);if(obj instanceof _primitives.Dict){const destDict=new _primitives.Dict(this.xref);destDict.set("A",obj);const resultObj={url:null,dest:null,action:null};_Catalog2.parseDestDictionary({destDict,resultObj}),Array.isArray(resultObj.dest)?openAction.dest=resultObj.dest:resultObj.action&&(openAction.action=resultObj.action)}else Array.isArray(obj)&&(openAction.dest=obj);return(0,_util2.shadow)(this,"openAction",(0,_util2.objectSize)(openAction)>0?openAction:null)}get attachments(){const obj=this._catDict.get("Names");let attachments=null;if(obj instanceof _primitives.Dict&&obj.has("EmbeddedFiles")){const nameTree=new _name_number_tree.NameTree(obj.getRaw("EmbeddedFiles"),this.xref);for(const[key,value]of nameTree.getAll()){const fs=new _file_spec.FileSpec(value,this.xref);attachments||(attachments=Object.create(null)),attachments[(0,_util2.stringToPDFString)(key)]=fs.serializable}}return(0,_util2.shadow)(this,"attachments",attachments)}get xfaImages(){const obj=this._catDict.get("Names");let xfaImages=null;if(obj instanceof _primitives.Dict&&obj.has("XFAImages")){const nameTree=new _name_number_tree.NameTree(obj.getRaw("XFAImages"),this.xref);for(const[key,value]of nameTree.getAll())xfaImages||(xfaImages=new _primitives.Dict(this.xref)),xfaImages.set((0,_util2.stringToPDFString)(key),value)}return(0,_util2.shadow)(this,"xfaImages",xfaImages)}_collectJavaScript(){const obj=this._catDict.get("Names");let javaScript=null;function appendIfJavaScriptDict(name,jsDict){if(!(jsDict instanceof _primitives.Dict)||!(0,_primitives.isName)(jsDict.get("S"),"JavaScript"))return;let js=jsDict.get("JS");if(js instanceof _base_stream.BaseStream)js=js.getString();else if(typeof js!="string")return;javaScript===null&&(javaScript=new Map),js=(0,_util2.stringToPDFString)(js).replace(/\u0000/g,""),javaScript.set(name,js)}if(__name2(appendIfJavaScriptDict,"appendIfJavaScriptDict"),__name(appendIfJavaScriptDict,"appendIfJavaScriptDict"),obj instanceof _primitives.Dict&&obj.has("JavaScript")){const nameTree=new _name_number_tree.NameTree(obj.getRaw("JavaScript"),this.xref);for(const[key,value]of nameTree.getAll())appendIfJavaScriptDict((0,_util2.stringToPDFString)(key),value)}const openAction=this._catDict.get("OpenAction");return openAction&&appendIfJavaScriptDict("OpenAction",openAction),javaScript}get javaScript(){const javaScript=this._collectJavaScript();return(0,_util2.shadow)(this,"javaScript",javaScript?[...javaScript.values()]:null)}get jsActions(){const javaScript=this._collectJavaScript();let actions=(0,_core_utils.collectActions)(this.xref,this._catDict,_util2.DocumentActionEventType);if(javaScript){actions||(actions=Object.create(null));for(const[key,val]of javaScript)key in actions?actions[key].push(val):actions[key]=[val]}return(0,_util2.shadow)(this,"jsActions",actions)}async fontFallback(id,handler){const translatedFonts=await Promise.all(this.fontCache);for(const translatedFont of translatedFonts)if(translatedFont.loadedName===id){translatedFont.fallback(handler);return}}async cleanup(manuallyTriggered=!1){(0,_cleanup_helper.clearGlobalCaches)(),this.globalImageCache.clear(manuallyTriggered),this.pageKidsCountCache.clear(),this.pageIndexCache.clear(),this.nonBlendModesSet.clear();const translatedFonts=await Promise.all(this.fontCache);for(const{dict}of translatedFonts)delete dict.cacheKey;this.fontCache.clear(),this.builtInCMapCache.clear(),this.standardFontDataCache.clear()}async getPageDict(pageIndex){const nodesToVisit=[this.toplevelPagesDict],visitedNodes=new _primitives.RefSet,pagesRef=this._catDict.getRaw("Pages");pagesRef instanceof _primitives.Ref&&visitedNodes.put(pagesRef);const xref=this.xref,pageKidsCountCache=this.pageKidsCountCache,pageIndexCache=this.pageIndexCache;let currentPageIndex=0;for(;nodesToVisit.length;){const currentNode=nodesToVisit.pop();if(currentNode instanceof _primitives.Ref){const count2=pageKidsCountCache.get(currentNode);if(count2>=0&&currentPageIndex+count2<=pageIndex){currentPageIndex+=count2;continue}if(visitedNodes.has(currentNode))throw new _util2.FormatError("Pages tree contains circular reference.");visitedNodes.put(currentNode);const obj=await xref.fetchAsync(currentNode);if(obj instanceof _primitives.Dict){let type=obj.getRaw("Type");if(type instanceof _primitives.Ref&&(type=await xref.fetchAsync(type)),(0,_primitives.isName)(type,"Page")||!obj.has("Kids")){if(pageKidsCountCache.has(currentNode)||pageKidsCountCache.put(currentNode,1),pageIndexCache.has(currentNode)||pageIndexCache.put(currentNode,currentPageIndex),currentPageIndex===pageIndex)return[obj,currentNode];currentPageIndex++;continue}}nodesToVisit.push(obj);continue}if(!(currentNode instanceof _primitives.Dict))throw new _util2.FormatError("Page dictionary kid reference points to wrong type of object.");const{objId}=currentNode;let count=currentNode.getRaw("Count");if(count instanceof _primitives.Ref&&(count=await xref.fetchAsync(count)),Number.isInteger(count)&&count>=0&&(objId&&!pageKidsCountCache.has(objId)&&pageKidsCountCache.put(objId,count),currentPageIndex+count<=pageIndex)){currentPageIndex+=count;continue}let kids=currentNode.getRaw("Kids");if(kids instanceof _primitives.Ref&&(kids=await xref.fetchAsync(kids)),!Array.isArray(kids)){let type=currentNode.getRaw("Type");if(type instanceof _primitives.Ref&&(type=await xref.fetchAsync(type)),(0,_primitives.isName)(type,"Page")||!currentNode.has("Kids")){if(currentPageIndex===pageIndex)return[currentNode,null];currentPageIndex++;continue}throw new _util2.FormatError("Page dictionary kids object is not an array.")}for(let last=kids.length-1;last>=0;last--)nodesToVisit.push(kids[last])}throw new Error(`Page index ${pageIndex} not found.`)}async getAllPageDicts(recoveryMode=!1){const queue=[{currentNode:this.toplevelPagesDict,posInKids:0}],visitedNodes=new _primitives.RefSet,pagesRef=this._catDict.getRaw("Pages");pagesRef instanceof _primitives.Ref&&visitedNodes.put(pagesRef);const map=new Map,xref=this.xref,pageIndexCache=this.pageIndexCache;let pageIndex=0;function addPageDict(pageDict,pageRef){pageRef&&!pageIndexCache.has(pageRef)&&pageIndexCache.put(pageRef,pageIndex),map.set(pageIndex++,[pageDict,pageRef])}__name2(addPageDict,"addPageDict"),__name(addPageDict,"addPageDict");function addPageError(error){if(error instanceof _core_utils.XRefEntryException&&!recoveryMode)throw error;map.set(pageIndex++,[error,null])}for(__name2(addPageError,"addPageError"),__name(addPageError,"addPageError");queue.length>0;){const queueItem=queue.at(-1),{currentNode,posInKids}=queueItem;let kids=currentNode.getRaw("Kids");if(kids instanceof _primitives.Ref)try{kids=await xref.fetchAsync(kids)}catch(ex){addPageError(ex);break}if(!Array.isArray(kids)){addPageError(new _util2.FormatError("Page dictionary kids object is not an array."));break}if(posInKids>=kids.length){queue.pop();continue}const kidObj=kids[posInKids];let obj;if(kidObj instanceof _primitives.Ref){if(visitedNodes.has(kidObj)){addPageError(new _util2.FormatError("Pages tree contains circular reference."));break}visitedNodes.put(kidObj);try{obj=await xref.fetchAsync(kidObj)}catch(ex){addPageError(ex);break}}else obj=kidObj;if(!(obj instanceof _primitives.Dict)){addPageError(new _util2.FormatError("Page dictionary kid reference points to wrong type of object."));break}let type=obj.getRaw("Type");if(type instanceof _primitives.Ref)try{type=await xref.fetchAsync(type)}catch(ex){addPageError(ex);break}(0,_primitives.isName)(type,"Page")||!obj.has("Kids")?addPageDict(obj,kidObj instanceof _primitives.Ref?kidObj:null):queue.push({currentNode:obj,posInKids:0}),queueItem.posInKids++}return map}getPageIndex(pageRef){const cachedPageIndex=this.pageIndexCache.get(pageRef);if(cachedPageIndex!==void 0)return Promise.resolve(cachedPageIndex);const xref=this.xref;function pagesBeforeRef(kidRef){let total2=0,parentRef;return xref.fetchAsync(kidRef).then(function(node){if((0,_primitives.isRefsEqual)(kidRef,pageRef)&&!(0,_primitives.isDict)(node,"Page")&&!(node instanceof _primitives.Dict&&!node.has("Type")&&node.has("Contents")))throw new _util2.FormatError("The reference does not point to a /Page dictionary.");if(!node)return null;if(!(node instanceof _primitives.Dict))throw new _util2.FormatError("Node must be a dictionary.");return parentRef=node.getRaw("Parent"),node.getAsync("Parent")}).then(function(parent){if(!parent)return null;if(!(parent instanceof _primitives.Dict))throw new _util2.FormatError("Parent must be a dictionary.");return parent.getAsync("Kids")}).then(function(kids){if(!kids)return null;const kidPromises=[];let found=!1;for(let i=0,ii=kids.length;i<ii;i++){const kid=kids[i];if(!(kid instanceof _primitives.Ref))throw new _util2.FormatError("Kid must be a reference.");if((0,_primitives.isRefsEqual)(kid,kidRef)){found=!0;break}kidPromises.push(xref.fetchAsync(kid).then(function(obj){if(!(obj instanceof _primitives.Dict))throw new _util2.FormatError("Kid node must be a dictionary.");obj.has("Count")?total2+=obj.get("Count"):total2++}))}if(!found)throw new _util2.FormatError("Kid reference not found in parent's kids.");return Promise.all(kidPromises).then(function(){return[total2,parentRef]})})}__name2(pagesBeforeRef,"pagesBeforeRef"),__name(pagesBeforeRef,"pagesBeforeRef");let total=0;const next=__name(ref=>pagesBeforeRef(ref).then(args=>{if(!args)return this.pageIndexCache.put(pageRef,total),total;const[count,parentRef]=args;return total+=count,next(parentRef)}),"next");return next(pageRef)}get baseUrl(){const uri=this._catDict.get("URI");if(uri instanceof _primitives.Dict){const base=uri.get("Base");if(typeof base=="string"){const absoluteUrl=(0,_util2.createValidAbsoluteUrl)(base,null,{tryConvertEncoding:!0});if(absoluteUrl)return(0,_util2.shadow)(this,"baseUrl",absoluteUrl.href)}}return(0,_util2.shadow)(this,"baseUrl",null)}static parseDestDictionary(params){const destDict=params.destDict;if(!(destDict instanceof _primitives.Dict)){(0,_util2.warn)("parseDestDictionary: `destDict` must be a dictionary.");return}const resultObj=params.resultObj;if(typeof resultObj!="object"){(0,_util2.warn)("parseDestDictionary: `resultObj` must be an object.");return}const docBaseUrl=params.docBaseUrl||null;let action=destDict.get("A"),url,dest;if(action instanceof _primitives.Dict||(destDict.has("Dest")?action=destDict.get("Dest"):(action=destDict.get("AA"),action instanceof _primitives.Dict&&(action.has("D")?action=action.get("D"):action.has("U")&&(action=action.get("U"))))),action instanceof _primitives.Dict){const actionType=action.get("S");if(!(actionType instanceof _primitives.Name)){(0,_util2.warn)("parseDestDictionary: Invalid type in Action dictionary.");return}const actionName=actionType.name;switch(actionName){case"ResetForm":const flags=action.get("Flags"),include=((typeof flags=="number"?flags:0)&1)===0,fields=[],refs=[];for(const obj of action.get("Fields")||[])obj instanceof _primitives.Ref?refs.push(obj.toString()):typeof obj=="string"&&fields.push((0,_util2.stringToPDFString)(obj));resultObj.resetForm={fields,refs,include};break;case"URI":url=action.get("URI"),url instanceof _primitives.Name&&(url="/"+url.name);break;case"GoTo":dest=action.get("D");break;case"Launch":case"GoToR":const urlDict=action.get("F");urlDict instanceof _primitives.Dict?url=urlDict.get("F")||null:typeof urlDict=="string"&&(url=urlDict);let remoteDest=action.get("D");if(remoteDest&&(remoteDest instanceof _primitives.Name&&(remoteDest=remoteDest.name),typeof url=="string")){const baseUrl=url.split("#")[0];typeof remoteDest=="string"?url=baseUrl+"#"+remoteDest:Array.isArray(remoteDest)&&(url=baseUrl+"#"+JSON.stringify(remoteDest))}const newWindow=action.get("NewWindow");typeof newWindow=="boolean"&&(resultObj.newWindow=newWindow);break;case"Named":const namedAction=action.get("N");namedAction instanceof _primitives.Name&&(resultObj.action=namedAction.name);break;case"JavaScript":const jsAction=action.get("JS");let js;jsAction instanceof _base_stream.BaseStream?js=jsAction.getString():typeof jsAction=="string"&&(js=jsAction);const jsURL=js&&(0,_core_utils.recoverJsURL)((0,_util2.stringToPDFString)(js));if(jsURL){url=jsURL.url,resultObj.newWindow=jsURL.newWindow;break}default:if(actionName==="JavaScript"||actionName==="SubmitForm")break;(0,_util2.warn)(`parseDestDictionary - unsupported action: "${actionName}".`);break}}else destDict.has("Dest")&&(dest=destDict.get("Dest"));if(typeof url=="string"){const absoluteUrl=(0,_util2.createValidAbsoluteUrl)(url,docBaseUrl,{addDefaultProtocol:!0,tryConvertEncoding:!0});absoluteUrl&&(resultObj.url=absoluteUrl.href),resultObj.unsafeUrl=url}dest&&(dest instanceof _primitives.Name&&(dest=dest.name),typeof dest=="string"?resultObj.dest=(0,_util2.stringToPDFString)(dest):Array.isArray(dest)&&(resultObj.dest=dest))}};__name(_Catalog,"Catalog");let Catalog=_Catalog;exports3.Catalog=Catalog},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.NumberTree=exports3.NameTree=void 0;var _primitives=__w_pdfjs_require__3(5),_util2=__w_pdfjs_require__3(2);const _NameOrNumberTree=class _NameOrNumberTree2{static{__name2(this,"_NameOrNumberTree")}constructor(root,xref,type){this.constructor===_NameOrNumberTree2&&(0,_util2.unreachable)("Cannot initialize NameOrNumberTree."),this.root=root,this.xref=xref,this._type=type}getAll(){const map=new Map;if(!this.root)return map;const xref=this.xref,processed=new _primitives.RefSet;processed.put(this.root);const queue=[this.root];for(;queue.length>0;){const obj=xref.fetchIfRef(queue.shift());if(!(obj instanceof _primitives.Dict))continue;if(obj.has("Kids")){const kids=obj.get("Kids");if(!Array.isArray(kids))continue;for(const kid of kids){if(processed.has(kid))throw new _util2.FormatError(`Duplicate entry in "${this._type}" tree.`);queue.push(kid),processed.put(kid)}continue}const entries=obj.get(this._type);if(Array.isArray(entries))for(let i=0,ii=entries.length;i<ii;i+=2)map.set(xref.fetchIfRef(entries[i]),xref.fetchIfRef(entries[i+1]))}return map}get(key){if(!this.root)return null;const xref=this.xref;let kidsOrEntries=xref.fetchIfRef(this.root),loopCount=0;const MAX_LEVELS=10;for(;kidsOrEntries.has("Kids");){if(++loopCount>MAX_LEVELS)return(0,_util2.warn)(`Search depth limit reached for "${this._type}" tree.`),null;const kids=kidsOrEntries.get("Kids");if(!Array.isArray(kids))return null;let l=0,r=kids.length-1;for(;l<=r;){const m=l+r>>1,kid=xref.fetchIfRef(kids[m]),limits=kid.get("Limits");if(key<xref.fetchIfRef(limits[0]))r=m-1;else if(key>xref.fetchIfRef(limits[1]))l=m+1;else{kidsOrEntries=kid;break}}if(l>r)return null}const entries=kidsOrEntries.get(this._type);if(Array.isArray(entries)){let l=0,r=entries.length-2;for(;l<=r;){const tmp=l+r>>1,m=tmp+(tmp&1),currentKey=xref.fetchIfRef(entries[m]);if(key<currentKey)r=m-2;else if(key>currentKey)l=m+2;else return xref.fetchIfRef(entries[m+1])}}return null}};__name(_NameOrNumberTree,"NameOrNumberTree");let NameOrNumberTree=_NameOrNumberTree;const _NameTree=class extends NameOrNumberTree{static{__name2(this,"_NameTree")}constructor(root,xref){super(root,xref,"Names")}};__name(_NameTree,"NameTree");let NameTree=_NameTree;exports3.NameTree=NameTree;const _NumberTree=class extends NameOrNumberTree{static{__name2(this,"_NumberTree")}constructor(root,xref){super(root,xref,"Nums")}};__name(_NumberTree,"NumberTree");let NumberTree=_NumberTree;exports3.NumberTree=NumberTree},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.clearGlobalCaches=clearGlobalCaches;var _primitives=__w_pdfjs_require__3(5),_unicode=__w_pdfjs_require__3(40);function clearGlobalCaches(){(0,_primitives.clearPrimitiveCaches)(),(0,_unicode.clearUnicodeCaches)()}__name2(clearGlobalCaches,"clearGlobalCaches"),__name(clearGlobalCaches,"clearGlobalCaches")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.FileSpec=void 0;var _util2=__w_pdfjs_require__3(2),_base_stream=__w_pdfjs_require__3(7),_primitives=__w_pdfjs_require__3(5);function pickPlatformItem(dict){return dict.has("UF")?dict.get("UF"):dict.has("F")?dict.get("F"):dict.has("Unix")?dict.get("Unix"):dict.has("Mac")?dict.get("Mac"):dict.has("DOS")?dict.get("DOS"):null}__name2(pickPlatformItem,"pickPlatformItem"),__name(pickPlatformItem,"pickPlatformItem");const _FileSpec=class{static{__name2(this,"_FileSpec")}constructor(root,xref){root instanceof _primitives.Dict&&(this.xref=xref,this.root=root,root.has("FS")&&(this.fs=root.get("FS")),this.description=root.has("Desc")?(0,_util2.stringToPDFString)(root.get("Desc")):"",root.has("RF")&&(0,_util2.warn)("Related file specifications are not supported"),this.contentAvailable=!0,root.has("EF")||(this.contentAvailable=!1,(0,_util2.warn)("Non-embedded file specifications are not supported")))}get filename(){if(!this._filename&&this.root){const filename=pickPlatformItem(this.root)||"unnamed";this._filename=(0,_util2.stringToPDFString)(filename).replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\/g,"/")}return this._filename}get content(){if(!this.contentAvailable)return null;!this.contentRef&&this.root&&(this.contentRef=pickPlatformItem(this.root.get("EF")));let content=null;if(this.contentRef){const fileObj=this.xref.fetchIfRef(this.contentRef);fileObj instanceof _base_stream.BaseStream?content=fileObj.getBytes():(0,_util2.warn)("Embedded file specification points to non-existing/invalid content")}else(0,_util2.warn)("Embedded file specification does not have a content");return content}get serializable(){return{filename:this.filename,content:this.content}}};__name(_FileSpec,"FileSpec");let FileSpec=_FileSpec;exports3.FileSpec=FileSpec},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.MetadataParser=void 0;var _xml_parser=__w_pdfjs_require__3(66);const _MetadataParser=class{static{__name2(this,"_MetadataParser")}constructor(data){data=this._repair(data);const xmlDocument=new _xml_parser.SimpleXMLParser({lowerCaseName:!0}).parseFromString(data);this._metadataMap=new Map,this._data=data,xmlDocument&&this._parse(xmlDocument)}_repair(data){return data.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,function(all,codes){const bytes=codes.replace(/\\([0-3])([0-7])([0-7])/g,function(code,d1,d2,d3){return String.fromCharCode(d1*64+d2*8+d3*1)}).replace(/&(amp|apos|gt|lt|quot);/g,function(str,name){switch(name){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${name} isn't defined.`)}),charBuf=[];for(let i=0,ii=bytes.length;i<ii;i+=2){const code=bytes.charCodeAt(i)*256+bytes.charCodeAt(i+1);code>=32&&code<127&&code!==60&&code!==62&&code!==38?charBuf.push(String.fromCharCode(code)):charBuf.push("&#x"+(65536+code).toString(16).substring(1)+";")}return">"+charBuf.join("")})}_getSequence(entry){const name=entry.nodeName;return name!=="rdf:bag"&&name!=="rdf:seq"&&name!=="rdf:alt"?null:entry.childNodes.filter(node=>node.nodeName==="rdf:li")}_parseArray(entry){if(!entry.hasChildNodes())return;const[seqNode]=entry.childNodes,sequence=this._getSequence(seqNode)||[];this._metadataMap.set(entry.nodeName,sequence.map(node=>node.textContent.trim()))}_parse(xmlDocument){let rdf=xmlDocument.documentElement;if(rdf.nodeName!=="rdf:rdf")for(rdf=rdf.firstChild;rdf&&rdf.nodeName!=="rdf:rdf";)rdf=rdf.nextSibling;if(!(!rdf||rdf.nodeName!=="rdf:rdf"||!rdf.hasChildNodes())){for(const desc of rdf.childNodes)if(desc.nodeName==="rdf:description")for(const entry of desc.childNodes){const name=entry.nodeName;switch(name){case"#text":continue;case"dc:creator":case"dc:subject":this._parseArray(entry);continue}this._metadataMap.set(name,entry.textContent.trim())}}}get serializable(){return{parsedData:this._metadataMap,rawData:this._data}}};__name(_MetadataParser,"MetadataParser");let MetadataParser=_MetadataParser;exports3.MetadataParser=MetadataParser},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.StructTreeRoot=exports3.StructTreePage=void 0;var _primitives=__w_pdfjs_require__3(5),_util2=__w_pdfjs_require__3(2),_name_number_tree=__w_pdfjs_require__3(70);const MAX_DEPTH=40,StructElementType={PAGE_CONTENT:"PAGE_CONTENT",STREAM_CONTENT:"STREAM_CONTENT",OBJECT:"OBJECT",ELEMENT:"ELEMENT"},_StructTreeRoot=class{static{__name2(this,"_StructTreeRoot")}constructor(rootDict){this.dict=rootDict,this.roleMap=new Map}init(){this.readRoleMap()}readRoleMap(){const roleMapDict=this.dict.get("RoleMap");roleMapDict instanceof _primitives.Dict&&roleMapDict.forEach((key,value)=>{value instanceof _primitives.Name&&this.roleMap.set(key,value.name)})}};__name(_StructTreeRoot,"StructTreeRoot");let StructTreeRoot=_StructTreeRoot;exports3.StructTreeRoot=StructTreeRoot;const _StructElementNode=class{static{__name2(this,"_StructElementNode")}constructor(tree,dict){this.tree=tree,this.dict=dict,this.kids=[],this.parseKids()}get role(){const nameObj=this.dict.get("S"),name=nameObj instanceof _primitives.Name?nameObj.name:"",{root}=this.tree;return root.roleMap.has(name)?root.roleMap.get(name):name}parseKids(){let pageObjId=null;const objRef=this.dict.getRaw("Pg");objRef instanceof _primitives.Ref&&(pageObjId=objRef.toString());const kids=this.dict.get("K");if(Array.isArray(kids))for(const kid of kids){const element=this.parseKid(pageObjId,kid);element&&this.kids.push(element)}else{const element=this.parseKid(pageObjId,kids);element&&this.kids.push(element)}}parseKid(pageObjId,kid){if(Number.isInteger(kid))return this.tree.pageDict.objId!==pageObjId?null:new StructElement({type:StructElementType.PAGE_CONTENT,mcid:kid,pageObjId});let kidDict=null;if(kid instanceof _primitives.Ref?kidDict=this.dict.xref.fetch(kid):kid instanceof _primitives.Dict&&(kidDict=kid),!kidDict)return null;const pageRef=kidDict.getRaw("Pg");pageRef instanceof _primitives.Ref&&(pageObjId=pageRef.toString());const type=kidDict.get("Type")instanceof _primitives.Name?kidDict.get("Type").name:null;return type==="MCR"?this.tree.pageDict.objId!==pageObjId?null:new StructElement({type:StructElementType.STREAM_CONTENT,refObjId:kidDict.getRaw("Stm")instanceof _primitives.Ref?kidDict.getRaw("Stm").toString():null,pageObjId,mcid:kidDict.get("MCID")}):type==="OBJR"?this.tree.pageDict.objId!==pageObjId?null:new StructElement({type:StructElementType.OBJECT,refObjId:kidDict.getRaw("Obj")instanceof _primitives.Ref?kidDict.getRaw("Obj").toString():null,pageObjId}):new StructElement({type:StructElementType.ELEMENT,dict:kidDict})}};__name(_StructElementNode,"StructElementNode");let StructElementNode=_StructElementNode;const _StructElement=class{static{__name2(this,"_StructElement")}constructor({type,dict=null,mcid=null,pageObjId=null,refObjId=null}){this.type=type,this.dict=dict,this.mcid=mcid,this.pageObjId=pageObjId,this.refObjId=refObjId,this.parentNode=null}};__name(_StructElement,"StructElement");let StructElement=_StructElement;const _StructTreePage=class{static{__name2(this,"_StructTreePage")}constructor(structTreeRoot,pageDict){this.root=structTreeRoot,this.rootDict=structTreeRoot?structTreeRoot.dict:null,this.pageDict=pageDict,this.nodes=[]}parse(){if(!this.root||!this.rootDict)return;const parentTree=this.rootDict.get("ParentTree");if(!parentTree)return;const id=this.pageDict.get("StructParents");if(!Number.isInteger(id))return;const parentArray=new _name_number_tree.NumberTree(parentTree,this.rootDict.xref).get(id);if(!Array.isArray(parentArray))return;const map=new Map;for(const ref of parentArray)ref instanceof _primitives.Ref&&this.addNode(this.rootDict.xref.fetch(ref),map)}addNode(dict,map,level=0){if(level>MAX_DEPTH)return(0,_util2.warn)("StructTree MAX_DEPTH reached."),null;if(map.has(dict))return map.get(dict);const element=new StructElementNode(this,dict);map.set(dict,element);const parent=dict.get("P");if(!parent||(0,_primitives.isName)(parent.get("Type"),"StructTreeRoot"))return this.addTopLevelNode(dict,element)||map.delete(dict),element;const parentNode=this.addNode(parent,map,level+1);if(!parentNode)return element;let save=!1;for(const kid of parentNode.kids)kid.type===StructElementType.ELEMENT&&kid.dict===dict&&(kid.parentNode=element,save=!0);return save||map.delete(dict),element}addTopLevelNode(dict,element){const obj=this.rootDict.get("K");if(!obj)return!1;if(obj instanceof _primitives.Dict)return obj.objId!==dict.objId?!1:(this.nodes[0]=element,!0);if(!Array.isArray(obj))return!0;let save=!1;for(let i=0;i<obj.length;i++){const kidRef=obj[i];kidRef&&kidRef.toString()===dict.objId&&(this.nodes[i]=element,save=!0)}return save}get serializable(){function nodeToSerializable(node,parent,level=0){if(level>MAX_DEPTH){(0,_util2.warn)("StructTree too deep to be fully serialized.");return}const obj=Object.create(null);obj.role=node.role,obj.children=[],parent.children.push(obj);const alt=node.dict.get("Alt");typeof alt=="string"&&(obj.alt=(0,_util2.stringToPDFString)(alt));const lang=node.dict.get("Lang");typeof lang=="string"&&(obj.lang=(0,_util2.stringToPDFString)(lang));for(const kid of node.kids){const kidElement=kid.type===StructElementType.ELEMENT?kid.parentNode:null;if(kidElement){nodeToSerializable(kidElement,obj,level+1);continue}else kid.type===StructElementType.PAGE_CONTENT||kid.type===StructElementType.STREAM_CONTENT?obj.children.push({type:"content",id:`page${kid.pageObjId}_mcid${kid.mcid}`}):kid.type===StructElementType.OBJECT&&obj.children.push({type:"object",id:kid.refObjId})}}__name2(nodeToSerializable,"nodeToSerializable"),__name(nodeToSerializable,"nodeToSerializable");const root=Object.create(null);root.children=[],root.role="Root";for(const child of this.nodes)child&&nodeToSerializable(child,root);return root}};__name(_StructTreePage,"StructTreePage");let StructTreePage=_StructTreePage;exports3.StructTreePage=StructTreePage},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.ObjectLoader=void 0;var _primitives=__w_pdfjs_require__3(5),_base_stream=__w_pdfjs_require__3(7),_core_utils=__w_pdfjs_require__3(6),_util2=__w_pdfjs_require__3(2);function mayHaveChildren(value){return value instanceof _primitives.Ref||value instanceof _primitives.Dict||value instanceof _base_stream.BaseStream||Array.isArray(value)}__name2(mayHaveChildren,"mayHaveChildren"),__name(mayHaveChildren,"mayHaveChildren");function addChildren(node,nodesToVisit){if(node instanceof _primitives.Dict)node=node.getRawValues();else if(node instanceof _base_stream.BaseStream)node=node.dict.getRawValues();else if(!Array.isArray(node))return;for(const rawValue of node)mayHaveChildren(rawValue)&&nodesToVisit.push(rawValue)}__name2(addChildren,"addChildren"),__name(addChildren,"addChildren");const _ObjectLoader=class{static{__name2(this,"_ObjectLoader")}constructor(dict,keys,xref){this.dict=dict,this.keys=keys,this.xref=xref,this.refSet=null}async load(){if(this.xref.stream.isDataLoaded)return;const{keys,dict}=this;this.refSet=new _primitives.RefSet;const nodesToVisit=[];for(let i=0,ii=keys.length;i<ii;i++){const rawValue=dict.getRaw(keys[i]);rawValue!==void 0&&nodesToVisit.push(rawValue)}return this._walk(nodesToVisit)}async _walk(nodesToVisit){const nodesToRevisit=[],pendingRequests=[];for(;nodesToVisit.length;){let currentNode=nodesToVisit.pop();if(currentNode instanceof _primitives.Ref){if(this.refSet.has(currentNode))continue;try{this.refSet.put(currentNode),currentNode=this.xref.fetch(currentNode)}catch(ex){if(!(ex instanceof _core_utils.MissingDataException)){(0,_util2.warn)(`ObjectLoader._walk - requesting all data: "${ex}".`),this.refSet=null;const{manager}=this.xref.stream;return manager.requestAllChunks()}nodesToRevisit.push(currentNode),pendingRequests.push({begin:ex.begin,end:ex.end})}}if(currentNode instanceof _base_stream.BaseStream){const baseStreams=currentNode.getBaseStreams();if(baseStreams){let foundMissingData=!1;for(const stream of baseStreams)stream.isDataLoaded||(foundMissingData=!0,pendingRequests.push({begin:stream.start,end:stream.end}));foundMissingData&&nodesToRevisit.push(currentNode)}}addChildren(currentNode,nodesToVisit)}if(pendingRequests.length){await this.xref.stream.manager.requestRanges(pendingRequests);for(const node of nodesToRevisit)node instanceof _primitives.Ref&&this.refSet.remove(node);return this._walk(nodesToRevisit)}this.refSet=null}};__name(_ObjectLoader,"ObjectLoader");let ObjectLoader=_ObjectLoader;exports3.ObjectLoader=ObjectLoader},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.XFAFactory=void 0;var _xfa_object=__w_pdfjs_require__3(77),_bind=__w_pdfjs_require__3(81),_data=__w_pdfjs_require__3(87),_fonts=__w_pdfjs_require__3(85),_utils=__w_pdfjs_require__3(78),_util2=__w_pdfjs_require__3(2),_parser=__w_pdfjs_require__3(88),_xhtml=__w_pdfjs_require__3(98);const _XFAFactory=class _XFAFactory2{static{__name2(this,"_XFAFactory")}constructor(data){try{this.root=new _parser.XFAParser().parse(_XFAFactory2._createDocument(data));const binder=new _bind.Binder(this.root);this.form=binder.bind(),this.dataHandler=new _data.DataHandler(this.root,binder.getData()),this.form[_xfa_object.$globalData].template=this.form}catch(e){(0,_util2.warn)(`XFA - an error occurred during parsing and binding: ${e}`)}}isValid(){return this.root&&this.form}_createPagesHelper(){const iterator=this.form[_xfa_object.$toPages]();return new Promise((resolve,reject)=>{const nextIteration=__name(()=>{try{const value=iterator.next();value.done?resolve(value.value):setTimeout(nextIteration,0)}catch(e){reject(e)}},"nextIteration");setTimeout(nextIteration,0)})}async _createPages(){try{this.pages=await this._createPagesHelper(),this.dims=this.pages.children.map(c=>{const{width,height}=c.attributes.style;return[0,0,parseInt(width),parseInt(height)]})}catch(e){(0,_util2.warn)(`XFA - an error occurred during layout: ${e}`)}}getBoundingBox(pageIndex){return this.dims[pageIndex]}async getNumPages(){return this.pages||await this._createPages(),this.dims.length}setImages(images){this.form[_xfa_object.$globalData].images=images}setFonts(fonts){this.form[_xfa_object.$globalData].fontFinder=new _fonts.FontFinder(fonts);const missingFonts=[];for(let typeface of this.form[_xfa_object.$globalData].usedTypefaces)typeface=(0,_utils.stripQuotes)(typeface),this.form[_xfa_object.$globalData].fontFinder.find(typeface)||missingFonts.push(typeface);return missingFonts.length>0?missingFonts:null}appendFonts(fonts,reallyMissingFonts){this.form[_xfa_object.$globalData].fontFinder.add(fonts,reallyMissingFonts)}async getPages(){this.pages||await this._createPages();const pages=this.pages;return this.pages=null,pages}serializeData(storage){return this.dataHandler.serialize(storage)}static _createDocument(data){return data["/xdp:xdp"]?Object.values(data).join(""):data["xdp:xdp"]}static getRichTextAsHtml(rc){if(!rc||typeof rc!="string")return null;try{let root=new _parser.XFAParser(_xhtml.XhtmlNamespace,!0).parse(rc);if(!["body","xhtml"].includes(root[_xfa_object.$nodeName])){const newRoot=_xhtml.XhtmlNamespace.body({});newRoot[_xfa_object.$appendChild](root),root=newRoot}const result=root[_xfa_object.$toHTML]();if(!result.success)return null;const{html}=result,{attributes}=html;return attributes&&(attributes.class&&(attributes.class=attributes.class.filter(attr=>!attr.startsWith("xfa"))),attributes.dir="auto"),{html,str:root[_xfa_object.$text]()}}catch(e){(0,_util2.warn)(`XFA - an error occurred during parsing of rich text: ${e}`)}return null}};__name(_XFAFactory,"XFAFactory");let XFAFactory=_XFAFactory;exports3.XFAFactory=XFAFactory},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.XmlObject=exports3.XFAObjectArray=exports3.XFAObject=exports3.XFAAttribute=exports3.StringObject=exports3.OptionObject=exports3.Option10=exports3.Option01=exports3.IntegerObject=exports3.ContentObject=exports3.$uid=exports3.$toStyle=exports3.$toString=exports3.$toPages=exports3.$toHTML=exports3.$text=exports3.$tabIndex=exports3.$setValue=exports3.$setSetAttributes=exports3.$setId=exports3.$searchNode=exports3.$root=exports3.$resolvePrototypes=exports3.$removeChild=exports3.$pushPara=exports3.$pushGlyphs=exports3.$popPara=exports3.$onText=exports3.$onChildCheck=exports3.$onChild=exports3.$nsAttributes=exports3.$nodeName=exports3.$namespaceId=exports3.$isUsable=exports3.$isTransparent=exports3.$isThereMoreWidth=exports3.$isSplittable=exports3.$isNsAgnostic=exports3.$isDescendent=exports3.$isDataValue=exports3.$isCDATAXml=exports3.$isBindable=exports3.$insertAt=exports3.$indexOf=exports3.$ids=exports3.$hasSettableValue=exports3.$globalData=exports3.$getTemplateRoot=exports3.$getSubformParent=exports3.$getRealChildrenByNameIt=exports3.$getParent=exports3.$getNextPage=exports3.$getExtra=exports3.$getDataValue=exports3.$getContainedChildren=exports3.$getChildrenByNameIt=exports3.$getChildrenByName=exports3.$getChildrenByClass=exports3.$getChildren=exports3.$getAvailableSpace=exports3.$getAttributes=exports3.$getAttributeIt=exports3.$flushHTML=exports3.$finalize=exports3.$extra=exports3.$dump=exports3.$data=exports3.$content=exports3.$consumed=exports3.$clone=exports3.$cleanup=exports3.$cleanPage=exports3.$clean=exports3.$childrenToHTML=exports3.$appendChild=exports3.$addHTML=exports3.$acceptWhitespace=void 0;var _utils=__w_pdfjs_require__3(78),_util2=__w_pdfjs_require__3(2),_core_utils=__w_pdfjs_require__3(6),_namespaces=__w_pdfjs_require__3(79),_som=__w_pdfjs_require__3(80);const $acceptWhitespace=Symbol();exports3.$acceptWhitespace=$acceptWhitespace;const $addHTML=Symbol();exports3.$addHTML=$addHTML;const $appendChild=Symbol();exports3.$appendChild=$appendChild;const $childrenToHTML=Symbol();exports3.$childrenToHTML=$childrenToHTML;const $clean=Symbol();exports3.$clean=$clean;const $cleanPage=Symbol();exports3.$cleanPage=$cleanPage;const $cleanup=Symbol();exports3.$cleanup=$cleanup;const $clone=Symbol();exports3.$clone=$clone;const $consumed=Symbol();exports3.$consumed=$consumed;const $content=Symbol("content");exports3.$content=$content;const $data=Symbol("data");exports3.$data=$data;const $dump=Symbol();exports3.$dump=$dump;const $extra=Symbol("extra");exports3.$extra=$extra;const $finalize=Symbol();exports3.$finalize=$finalize;const $flushHTML=Symbol();exports3.$flushHTML=$flushHTML;const $getAttributeIt=Symbol();exports3.$getAttributeIt=$getAttributeIt;const $getAttributes=Symbol();exports3.$getAttributes=$getAttributes;const $getAvailableSpace=Symbol();exports3.$getAvailableSpace=$getAvailableSpace;const $getChildrenByClass=Symbol();exports3.$getChildrenByClass=$getChildrenByClass;const $getChildrenByName=Symbol();exports3.$getChildrenByName=$getChildrenByName;const $getChildrenByNameIt=Symbol();exports3.$getChildrenByNameIt=$getChildrenByNameIt;const $getDataValue=Symbol();exports3.$getDataValue=$getDataValue;const $getExtra=Symbol();exports3.$getExtra=$getExtra;const $getRealChildrenByNameIt=Symbol();exports3.$getRealChildrenByNameIt=$getRealChildrenByNameIt;const $getChildren=Symbol();exports3.$getChildren=$getChildren;const $getContainedChildren=Symbol();exports3.$getContainedChildren=$getContainedChildren;const $getNextPage=Symbol();exports3.$getNextPage=$getNextPage;const $getSubformParent=Symbol();exports3.$getSubformParent=$getSubformParent;const $getParent=Symbol();exports3.$getParent=$getParent;const $getTemplateRoot=Symbol();exports3.$getTemplateRoot=$getTemplateRoot;const $globalData=Symbol();exports3.$globalData=$globalData;const $hasSettableValue=Symbol();exports3.$hasSettableValue=$hasSettableValue;const $ids=Symbol();exports3.$ids=$ids;const $indexOf=Symbol();exports3.$indexOf=$indexOf;const $insertAt=Symbol();exports3.$insertAt=$insertAt;const $isCDATAXml=Symbol();exports3.$isCDATAXml=$isCDATAXml;const $isBindable=Symbol();exports3.$isBindable=$isBindable;const $isDataValue=Symbol();exports3.$isDataValue=$isDataValue;const $isDescendent=Symbol();exports3.$isDescendent=$isDescendent;const $isNsAgnostic=Symbol();exports3.$isNsAgnostic=$isNsAgnostic;const $isSplittable=Symbol();exports3.$isSplittable=$isSplittable;const $isThereMoreWidth=Symbol();exports3.$isThereMoreWidth=$isThereMoreWidth;const $isTransparent=Symbol();exports3.$isTransparent=$isTransparent;const $isUsable=Symbol();exports3.$isUsable=$isUsable;const $lastAttribute=Symbol(),$namespaceId=Symbol("namespaceId");exports3.$namespaceId=$namespaceId;const $nodeName=Symbol("nodeName");exports3.$nodeName=$nodeName;const $nsAttributes=Symbol();exports3.$nsAttributes=$nsAttributes;const $onChild=Symbol();exports3.$onChild=$onChild;const $onChildCheck=Symbol();exports3.$onChildCheck=$onChildCheck;const $onText=Symbol();exports3.$onText=$onText;const $pushGlyphs=Symbol();exports3.$pushGlyphs=$pushGlyphs;const $popPara=Symbol();exports3.$popPara=$popPara;const $pushPara=Symbol();exports3.$pushPara=$pushPara;const $removeChild=Symbol();exports3.$removeChild=$removeChild;const $root=Symbol("root");exports3.$root=$root;const $resolvePrototypes=Symbol();exports3.$resolvePrototypes=$resolvePrototypes;const $searchNode=Symbol();exports3.$searchNode=$searchNode;const $setId=Symbol();exports3.$setId=$setId;const $setSetAttributes=Symbol();exports3.$setSetAttributes=$setSetAttributes;const $setValue=Symbol();exports3.$setValue=$setValue;const $tabIndex=Symbol();exports3.$tabIndex=$tabIndex;const $text=Symbol();exports3.$text=$text;const $toPages=Symbol();exports3.$toPages=$toPages;const $toHTML=Symbol();exports3.$toHTML=$toHTML;const $toString=Symbol();exports3.$toString=$toString;const $toStyle=Symbol();exports3.$toStyle=$toStyle;const $uid=Symbol("uid");exports3.$uid=$uid;const _applyPrototype=Symbol(),_attributes=Symbol(),_attributeNames=Symbol(),_children=Symbol("_children"),_cloneAttribute=Symbol(),_dataValue=Symbol(),_defaultValue=Symbol(),_filteredChildrenGenerator=Symbol(),_getPrototype=Symbol(),_getUnsetAttributes=Symbol(),_hasChildren=Symbol(),_max=Symbol(),_options=Symbol(),_parent=Symbol("parent"),_resolvePrototypesHelper=Symbol(),_setAttributes=Symbol(),_validator=Symbol();let uid=0;const NS_DATASETS=_namespaces.NamespaceIds.datasets.id,_XFAObject=class _XFAObject2{static{__name2(this,"_XFAObject")}constructor(nsId,name,hasChildren=!1){this[$namespaceId]=nsId,this[$nodeName]=name,this[_hasChildren]=hasChildren,this[_parent]=null,this[_children]=[],this[$uid]=`${name}${uid++}`,this[$globalData]=null}[$onChild](child){if(!this[_hasChildren]||!this[$onChildCheck](child))return!1;const name=child[$nodeName],node=this[name];if(node instanceof XFAObjectArray){if(node.push(child))return this[$appendChild](child),!0}else return node!==null&&this[$removeChild](node),this[name]=child,this[$appendChild](child),!0;let id="";return this.id?id=` (id: ${this.id})`:this.name&&(id=` (name: ${this.name} ${this.h.value})`),(0,_util2.warn)(`XFA - node "${this[$nodeName]}"${id} has already enough "${name}"!`),!1}[$onChildCheck](child){return this.hasOwnProperty(child[$nodeName])&&child[$namespaceId]===this[$namespaceId]}[$isNsAgnostic](){return!1}[$acceptWhitespace](){return!1}[$isCDATAXml](){return!1}[$isBindable](){return!1}[$popPara](){this.para&&this[$getTemplateRoot]()[$extra].paraStack.pop()}[$pushPara](){this[$getTemplateRoot]()[$extra].paraStack.push(this.para)}[$setId](ids){this.id&&this[$namespaceId]===_namespaces.NamespaceIds.template.id&&ids.set(this.id,this)}[$getTemplateRoot](){return this[$globalData].template}[$isSplittable](){return!1}[$isThereMoreWidth](){return!1}[$appendChild](child){child[_parent]=this,this[_children].push(child),!child[$globalData]&&this[$globalData]&&(child[$globalData]=this[$globalData])}[$removeChild](child){const i=this[_children].indexOf(child);this[_children].splice(i,1)}[$hasSettableValue](){return this.hasOwnProperty("value")}[$setValue](_){}[$onText](_){}[$finalize](){}[$clean](builder){delete this[_hasChildren],this[$cleanup]&&(builder.clean(this[$cleanup]),delete this[$cleanup])}[$indexOf](child){return this[_children].indexOf(child)}[$insertAt](i,child){child[_parent]=this,this[_children].splice(i,0,child),!child[$globalData]&&this[$globalData]&&(child[$globalData]=this[$globalData])}[$isTransparent](){return!this.name}[$lastAttribute](){return""}[$text](){return this[_children].length===0?this[$content]:this[_children].map(c=>c[$text]()).join("")}get[_attributeNames](){const proto=Object.getPrototypeOf(this);if(!proto._attributes){const attributes=proto._attributes=new Set;for(const name of Object.getOwnPropertyNames(this)){if(this[name]===null||this[name]instanceof _XFAObject2||this[name]instanceof XFAObjectArray)break;attributes.add(name)}}return(0,_util2.shadow)(this,_attributeNames,proto._attributes)}[$isDescendent](parent){let node=this;for(;node;){if(node===parent)return!0;node=node[$getParent]()}return!1}[$getParent](){return this[_parent]}[$getSubformParent](){return this[$getParent]()}[$getChildren](name=null){return name?this[name]:this[_children]}[$dump](){const dumped=Object.create(null);this[$content]&&(dumped.$content=this[$content]);for(const name of Object.getOwnPropertyNames(this)){const value=this[name];value!==null&&(value instanceof _XFAObject2?dumped[name]=value[$dump]():value instanceof XFAObjectArray?value.isEmpty()||(dumped[name]=value.dump()):dumped[name]=value)}return dumped}[$toStyle](){return null}[$toHTML](){return _utils.HTMLResult.EMPTY}*[$getContainedChildren](){for(const node of this[$getChildren]())yield node}*[_filteredChildrenGenerator](filter2,include){for(const node of this[$getContainedChildren]())if(!filter2||include===filter2.has(node[$nodeName])){const availableSpace=this[$getAvailableSpace](),res=node[$toHTML](availableSpace);res.success||(this[$extra].failingNode=node),yield res}}[$flushHTML](){return null}[$addHTML](html,bbox){this[$extra].children.push(html)}[$getAvailableSpace](){}[$childrenToHTML]({filter:filter2=null,include=!0}){if(!this[$extra].generator)this[$extra].generator=this[_filteredChildrenGenerator](filter2,include);else{const availableSpace=this[$getAvailableSpace](),res=this[$extra].failingNode[$toHTML](availableSpace);if(!res.success)return res;res.html&&this[$addHTML](res.html,res.bbox),delete this[$extra].failingNode}for(;;){const gen=this[$extra].generator.next();if(gen.done)break;const res=gen.value;if(!res.success)return res;res.html&&this[$addHTML](res.html,res.bbox)}return this[$extra].generator=null,_utils.HTMLResult.EMPTY}[$setSetAttributes](attributes){this[_setAttributes]=new Set(Object.keys(attributes))}[_getUnsetAttributes](protoAttributes){const allAttr=this[_attributeNames],setAttr=this[_setAttributes];return[...protoAttributes].filter(x=>allAttr.has(x)&&!setAttr.has(x))}[$resolvePrototypes](ids,ancestors=new Set){for(const child of this[_children])child[_resolvePrototypesHelper](ids,ancestors)}[_resolvePrototypesHelper](ids,ancestors){const proto=this[_getPrototype](ids,ancestors);proto?this[_applyPrototype](proto,ids,ancestors):this[$resolvePrototypes](ids,ancestors)}[_getPrototype](ids,ancestors){const{use,usehref}=this;if(!use&&!usehref)return null;let proto=null,somExpression=null,id=null,ref=use;if(usehref?(ref=usehref,usehref.startsWith("#som(")&&usehref.endsWith(")")?somExpression=usehref.slice(5,usehref.length-1):usehref.startsWith(".#som(")&&usehref.endsWith(")")?somExpression=usehref.slice(6,usehref.length-1):usehref.startsWith("#")?id=usehref.slice(1):usehref.startsWith(".#")&&(id=usehref.slice(2))):use.startsWith("#")?id=use.slice(1):somExpression=use,this.use=this.usehref="",id?proto=ids.get(id):(proto=(0,_som.searchNode)(ids.get($root),this,somExpression,!0,!1),proto&&(proto=proto[0])),!proto)return(0,_util2.warn)(`XFA - Invalid prototype reference: ${ref}.`),null;if(proto[$nodeName]!==this[$nodeName])return(0,_util2.warn)(`XFA - Incompatible prototype: ${proto[$nodeName]} !== ${this[$nodeName]}.`),null;if(ancestors.has(proto))return(0,_util2.warn)("XFA - Cycle detected in prototypes use."),null;ancestors.add(proto);const protoProto=proto[_getPrototype](ids,ancestors);return protoProto&&proto[_applyPrototype](protoProto,ids,ancestors),proto[$resolvePrototypes](ids,ancestors),ancestors.delete(proto),proto}[_applyPrototype](proto,ids,ancestors){if(ancestors.has(proto)){(0,_util2.warn)("XFA - Cycle detected in prototypes use.");return}!this[$content]&&proto[$content]&&(this[$content]=proto[$content]),new Set(ancestors).add(proto);for(const unsetAttrName of this[_getUnsetAttributes](proto[_setAttributes]))this[unsetAttrName]=proto[unsetAttrName],this[_setAttributes]&&this[_setAttributes].add(unsetAttrName);for(const name of Object.getOwnPropertyNames(this)){if(this[_attributeNames].has(name))continue;const value=this[name],protoValue=proto[name];if(value instanceof XFAObjectArray){for(const child of value[_children])child[_resolvePrototypesHelper](ids,ancestors);for(let i=value[_children].length,ii=protoValue[_children].length;i<ii;i++){const child=proto[_children][i][$clone]();if(value.push(child))child[_parent]=this,this[_children].push(child),child[_resolvePrototypesHelper](ids,ancestors);else break}continue}if(value!==null){value[$resolvePrototypes](ids,ancestors),protoValue&&value[_applyPrototype](protoValue,ids,ancestors);continue}if(protoValue!==null){const child=protoValue[$clone]();child[_parent]=this,this[name]=child,this[_children].push(child),child[_resolvePrototypesHelper](ids,ancestors)}}}static[_cloneAttribute](obj){return Array.isArray(obj)?obj.map(x=>_XFAObject2[_cloneAttribute](x)):typeof obj=="object"&&obj!==null?Object.assign({},obj):obj}[$clone](){const clone=Object.create(Object.getPrototypeOf(this));for(const $symbol of Object.getOwnPropertySymbols(this))try{clone[$symbol]=this[$symbol]}catch{(0,_util2.shadow)(clone,$symbol,this[$symbol])}clone[$uid]=`${clone[$nodeName]}${uid++}`,clone[_children]=[];for(const name of Object.getOwnPropertyNames(this)){if(this[_attributeNames].has(name)){clone[name]=_XFAObject2[_cloneAttribute](this[name]);continue}const value=this[name];value instanceof XFAObjectArray?clone[name]=new XFAObjectArray(value[_max]):clone[name]=null}for(const child of this[_children]){const name=child[$nodeName],clonedChild=child[$clone]();clone[_children].push(clonedChild),clonedChild[_parent]=clone,clone[name]===null?clone[name]=clonedChild:clone[name][_children].push(clonedChild)}return clone}[$getChildren](name=null){return name?this[_children].filter(c=>c[$nodeName]===name):this[_children]}[$getChildrenByClass](name){return this[name]}[$getChildrenByName](name,allTransparent,first=!0){return Array.from(this[$getChildrenByNameIt](name,allTransparent,first))}*[$getChildrenByNameIt](name,allTransparent,first=!0){if(name==="parent"){yield this[_parent];return}for(const child of this[_children])child[$nodeName]===name&&(yield child),child.name===name&&(yield child),(allTransparent||child[$isTransparent]())&&(yield*child[$getChildrenByNameIt](name,allTransparent,!1));first&&this[_attributeNames].has(name)&&(yield new XFAAttribute(this,name,this[name]))}};__name(_XFAObject,"XFAObject");let XFAObject=_XFAObject;exports3.XFAObject=XFAObject;const _XFAObjectArray=class _XFAObjectArray2{static{__name2(this,"_XFAObjectArray")}constructor(max=1/0){this[_max]=max,this[_children]=[]}push(child){return this[_children].length<=this[_max]?(this[_children].push(child),!0):((0,_util2.warn)(`XFA - node "${child[$nodeName]}" accepts no more than ${this[_max]} children`),!1)}isEmpty(){return this[_children].length===0}dump(){return this[_children].length===1?this[_children][0][$dump]():this[_children].map(x=>x[$dump]())}[$clone](){const clone=new _XFAObjectArray2(this[_max]);return clone[_children]=this[_children].map(c=>c[$clone]()),clone}get children(){return this[_children]}clear(){this[_children].length=0}};__name(_XFAObjectArray,"XFAObjectArray");let XFAObjectArray=_XFAObjectArray;exports3.XFAObjectArray=XFAObjectArray;const _XFAAttribute=class{static{__name2(this,"_XFAAttribute")}constructor(node,name,value){this[_parent]=node,this[$nodeName]=name,this[$content]=value,this[$consumed]=!1,this[$uid]=`attribute${uid++}`}[$getParent](){return this[_parent]}[$isDataValue](){return!0}[$getDataValue](){return this[$content].trim()}[$setValue](value){value=value.value||"",this[$content]=value.toString()}[$text](){return this[$content]}[$isDescendent](parent){return this[_parent]===parent||this[_parent][$isDescendent](parent)}};__name(_XFAAttribute,"XFAAttribute");let XFAAttribute=_XFAAttribute;exports3.XFAAttribute=XFAAttribute;const _XmlObject=class _XmlObject2 extends XFAObject{static{__name2(this,"_XmlObject")}constructor(nsId,name,attributes={}){if(super(nsId,name),this[$content]="",this[_dataValue]=null,name!=="#text"){const map=new Map;this[_attributes]=map;for(const[attrName,value]of Object.entries(attributes))map.set(attrName,new XFAAttribute(this,attrName,value));if(attributes.hasOwnProperty($nsAttributes)){const dataNode=attributes[$nsAttributes].xfa.dataNode;dataNode!==void 0&&(dataNode==="dataGroup"?this[_dataValue]=!1:dataNode==="dataValue"&&(this[_dataValue]=!0))}}this[$consumed]=!1}[$toString](buf){const tagName=this[$nodeName];if(tagName==="#text"){buf.push((0,_core_utils.encodeToXmlString)(this[$content]));return}const utf8TagName=(0,_util2.utf8StringToString)(tagName),prefix=this[$namespaceId]===NS_DATASETS?"xfa:":"";buf.push(`<${prefix}${utf8TagName}`);for(const[name,value]of this[_attributes].entries()){const utf8Name=(0,_util2.utf8StringToString)(name);buf.push(` ${utf8Name}="${(0,_core_utils.encodeToXmlString)(value[$content])}"`)}if(this[_dataValue]!==null&&(this[_dataValue]?buf.push(' xfa:dataNode="dataValue"'):buf.push(' xfa:dataNode="dataGroup"')),!this[$content]&&this[_children].length===0){buf.push("/>");return}if(buf.push(">"),this[$content])typeof this[$content]=="string"?buf.push((0,_core_utils.encodeToXmlString)(this[$content])):this[$content][$toString](buf);else for(const child of this[_children])child[$toString](buf);buf.push(`</${prefix}${utf8TagName}>`)}[$onChild](child){if(this[$content]){const node=new _XmlObject2(this[$namespaceId],"#text");this[$appendChild](node),node[$content]=this[$content],this[$content]=""}return this[$appendChild](child),!0}[$onText](str){this[$content]+=str}[$finalize](){if(this[$content]&&this[_children].length>0){const node=new _XmlObject2(this[$namespaceId],"#text");this[$appendChild](node),node[$content]=this[$content],delete this[$content]}}[$toHTML](){return this[$nodeName]==="#text"?_utils.HTMLResult.success({name:"#text",value:this[$content]}):_utils.HTMLResult.EMPTY}[$getChildren](name=null){return name?this[_children].filter(c=>c[$nodeName]===name):this[_children]}[$getAttributes](){return this[_attributes]}[$getChildrenByClass](name){const value=this[_attributes].get(name);return value!==void 0?value:this[$getChildren](name)}*[$getChildrenByNameIt](name,allTransparent){const value=this[_attributes].get(name);value&&(yield value);for(const child of this[_children])child[$nodeName]===name&&(yield child),allTransparent&&(yield*child[$getChildrenByNameIt](name,allTransparent))}*[$getAttributeIt](name,skipConsumed){const value=this[_attributes].get(name);value&&(!skipConsumed||!value[$consumed])&&(yield value);for(const child of this[_children])yield*child[$getAttributeIt](name,skipConsumed)}*[$getRealChildrenByNameIt](name,allTransparent,skipConsumed){for(const child of this[_children])child[$nodeName]===name&&(!skipConsumed||!child[$consumed])&&(yield child),allTransparent&&(yield*child[$getRealChildrenByNameIt](name,allTransparent,skipConsumed))}[$isDataValue](){return this[_dataValue]===null?this[_children].length===0||this[_children][0][$namespaceId]===_namespaces.NamespaceIds.xhtml.id:this[_dataValue]}[$getDataValue](){return this[_dataValue]===null?this[_children].length===0?this[$content].trim():this[_children][0][$namespaceId]===_namespaces.NamespaceIds.xhtml.id?this[_children][0][$text]().trim():null:this[$content].trim()}[$setValue](value){value=value.value||"",this[$content]=value.toString()}[$dump](hasNS=!1){const dumped=Object.create(null);hasNS&&(dumped.$ns=this[$namespaceId]),this[$content]&&(dumped.$content=this[$content]),dumped.$name=this[$nodeName],dumped.children=[];for(const child of this[_children])dumped.children.push(child[$dump](hasNS));dumped.attributes=Object.create(null);for(const[name,value]of this[_attributes])dumped.attributes[name]=value[$content];return dumped}};__name(_XmlObject,"XmlObject");let XmlObject=_XmlObject;exports3.XmlObject=XmlObject;const _ContentObject=class extends XFAObject{static{__name2(this,"_ContentObject")}constructor(nsId,name){super(nsId,name),this[$content]=""}[$onText](text){this[$content]+=text}[$finalize](){}};__name(_ContentObject,"ContentObject");let ContentObject=_ContentObject;exports3.ContentObject=ContentObject;const _OptionObject=class extends ContentObject{static{__name2(this,"_OptionObject")}constructor(nsId,name,options){super(nsId,name),this[_options]=options}[$finalize](){this[$content]=(0,_utils.getKeyword)({data:this[$content],defaultValue:this[_options][0],validate:k=>this[_options].includes(k)})}[$clean](builder){super[$clean](builder),delete this[_options]}};__name(_OptionObject,"OptionObject");let OptionObject=_OptionObject;exports3.OptionObject=OptionObject;const _StringObject=class extends ContentObject{static{__name2(this,"_StringObject")}[$finalize](){this[$content]=this[$content].trim()}};__name(_StringObject,"StringObject");let StringObject=_StringObject;exports3.StringObject=StringObject;const _IntegerObject=class extends ContentObject{static{__name2(this,"_IntegerObject")}constructor(nsId,name,defaultValue,validator){super(nsId,name),this[_defaultValue]=defaultValue,this[_validator]=validator}[$finalize](){this[$content]=(0,_utils.getInteger)({data:this[$content],defaultValue:this[_defaultValue],validate:this[_validator]})}[$clean](builder){super[$clean](builder),delete this[_defaultValue],delete this[_validator]}};__name(_IntegerObject,"IntegerObject");let IntegerObject=_IntegerObject;exports3.IntegerObject=IntegerObject;const _Option01=class extends IntegerObject{static{__name2(this,"_Option01")}constructor(nsId,name){super(nsId,name,0,n=>n===1)}};__name(_Option01,"Option01");let Option01=_Option01;exports3.Option01=Option01;const _Option10=class extends IntegerObject{static{__name2(this,"_Option10")}constructor(nsId,name){super(nsId,name,1,n=>n===0)}};__name(_Option10,"Option10");let Option10=_Option10;exports3.Option10=Option10},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.HTMLResult=void 0,exports3.getBBox=getBBox,exports3.getColor=getColor,exports3.getFloat=getFloat,exports3.getInteger=getInteger,exports3.getKeyword=getKeyword,exports3.getMeasurement=getMeasurement,exports3.getRatio=getRatio,exports3.getRelevant=getRelevant,exports3.getStringOption=getStringOption,exports3.stripQuotes=stripQuotes;var _util2=__w_pdfjs_require__3(2);const dimConverters={pt:x=>x,cm:x=>x/2.54*72,mm:x=>x/(10*2.54)*72,in:x=>x*72,px:x=>x},measurementPattern=/([+-]?\d+\.?\d*)(.*)/;function stripQuotes(str){return str.startsWith("'")||str.startsWith('"')?str.slice(1,str.length-1):str}__name2(stripQuotes,"stripQuotes"),__name(stripQuotes,"stripQuotes");function getInteger({data,defaultValue,validate}){if(!data)return defaultValue;data=data.trim();const n=parseInt(data,10);return!isNaN(n)&&validate(n)?n:defaultValue}__name2(getInteger,"getInteger"),__name(getInteger,"getInteger");function getFloat({data,defaultValue,validate}){if(!data)return defaultValue;data=data.trim();const n=parseFloat(data);return!isNaN(n)&&validate(n)?n:defaultValue}__name2(getFloat,"getFloat"),__name(getFloat,"getFloat");function getKeyword({data,defaultValue,validate}){return data?(data=data.trim(),validate(data)?data:defaultValue):defaultValue}__name2(getKeyword,"getKeyword"),__name(getKeyword,"getKeyword");function getStringOption(data,options){return getKeyword({data,defaultValue:options[0],validate:k=>options.includes(k)})}__name2(getStringOption,"getStringOption"),__name(getStringOption,"getStringOption");function getMeasurement(str,def="0"){if(def=def||"0",!str)return getMeasurement(def);const match=str.trim().match(measurementPattern);if(!match)return getMeasurement(def);const[,valueStr,unit]=match,value=parseFloat(valueStr);if(isNaN(value))return getMeasurement(def);if(value===0)return 0;const conv=dimConverters[unit];return conv?conv(value):value}__name2(getMeasurement,"getMeasurement"),__name(getMeasurement,"getMeasurement");function getRatio(data){if(!data)return{num:1,den:1};const ratio=data.trim().split(/\s*:\s*/).map(x=>parseFloat(x)).filter(x=>!isNaN(x));if(ratio.length===1&&ratio.push(1),ratio.length===0)return{num:1,den:1};const[num,den]=ratio;return{num,den}}__name2(getRatio,"getRatio"),__name(getRatio,"getRatio");function getRelevant(data){return data?data.trim().split(/\s+/).map(e=>({excluded:e[0]==="-",viewname:e.substring(1)})):[]}__name2(getRelevant,"getRelevant"),__name(getRelevant,"getRelevant");function getColor(data,def=[0,0,0]){let[r,g,b]=def;if(!data)return{r,g,b};const color=data.trim().split(/\s*,\s*/).map(c=>Math.min(Math.max(0,parseInt(c.trim(),10)),255)).map(c=>isNaN(c)?0:c);return color.length<3?{r,g,b}:([r,g,b]=color,{r,g,b})}__name2(getColor,"getColor"),__name(getColor,"getColor");function getBBox(data){if(!data)return{x:-1,y:-1,width:-1,height:-1};const bbox=data.trim().split(/\s*,\s*/).map(m=>getMeasurement(m,"-1"));if(bbox.length<4||bbox[2]<0||bbox[3]<0)return{x:-1,y:-1,width:-1,height:-1};const[x,y,width,height]=bbox;return{x,y,width,height}}__name2(getBBox,"getBBox"),__name(getBBox,"getBBox");const _HTMLResult=class _HTMLResult2{static{__name2(this,"_HTMLResult")}static get FAILURE(){return(0,_util2.shadow)(this,"FAILURE",new _HTMLResult2(!1,null,null,null))}static get EMPTY(){return(0,_util2.shadow)(this,"EMPTY",new _HTMLResult2(!0,null,null,null))}constructor(success,html,bbox,breakNode){this.success=success,this.html=html,this.bbox=bbox,this.breakNode=breakNode}isBreak(){return!!this.breakNode}static breakNode(node){return new _HTMLResult2(!1,null,null,node)}static success(html,bbox=null){return new _HTMLResult2(!0,html,bbox,null)}};__name(_HTMLResult,"HTMLResult");let HTMLResult=_HTMLResult;exports3.HTMLResult=HTMLResult},(__unused_webpack_module2,exports3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.NamespaceIds=exports3.$buildXFAObject=void 0;const $buildXFAObject=Symbol();exports3.$buildXFAObject=$buildXFAObject;const NamespaceIds={config:{id:0,check:ns=>ns.startsWith("http://www.xfa.org/schema/xci/")},connectionSet:{id:1,check:ns=>ns.startsWith("http://www.xfa.org/schema/xfa-connection-set/")},datasets:{id:2,check:ns=>ns.startsWith("http://www.xfa.org/schema/xfa-data/")},form:{id:3,check:ns=>ns.startsWith("http://www.xfa.org/schema/xfa-form/")},localeSet:{id:4,check:ns=>ns.startsWith("http://www.xfa.org/schema/xfa-locale-set/")},pdf:{id:5,check:ns=>ns==="http://ns.adobe.com/xdp/pdf/"},signature:{id:6,check:ns=>ns==="http://www.w3.org/2000/09/xmldsig#"},sourceSet:{id:7,check:ns=>ns.startsWith("http://www.xfa.org/schema/xfa-source-set/")},stylesheet:{id:8,check:ns=>ns==="http://www.w3.org/1999/XSL/Transform"},template:{id:9,check:ns=>ns.startsWith("http://www.xfa.org/schema/xfa-template/")},xdc:{id:10,check:ns=>ns.startsWith("http://www.xfa.org/schema/xdc/")},xdp:{id:11,check:ns=>ns==="http://ns.adobe.com/xdp/"},xfdf:{id:12,check:ns=>ns==="http://ns.adobe.com/xfdf/"},xhtml:{id:13,check:ns=>ns==="http://www.w3.org/1999/xhtml"},xmpmeta:{id:14,check:ns=>ns==="http://ns.adobe.com/xmpmeta/"}};exports3.NamespaceIds=NamespaceIds},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.createDataNode=createDataNode,exports3.searchNode=searchNode;var _xfa_object=__w_pdfjs_require__3(77),_namespaces=__w_pdfjs_require__3(79),_util2=__w_pdfjs_require__3(2);const namePattern=/^[^.[]+/,indexPattern=/^[^\]]+/,operators={dot:0,dotDot:1,dotHash:2,dotBracket:3,dotParen:4},shortcuts=new Map([["$data",(root,current)=>root.datasets?root.datasets.data:root],["$record",(root,current)=>(root.datasets?root.datasets.data:root)[_xfa_object.$getChildren]()[0]],["$template",(root,current)=>root.template],["$connectionSet",(root,current)=>root.connectionSet],["$form",(root,current)=>root.form],["$layout",(root,current)=>root.layout],["$host",(root,current)=>root.host],["$dataWindow",(root,current)=>root.dataWindow],["$event",(root,current)=>root.event],["!",(root,current)=>root.datasets],["$xfa",(root,current)=>root],["xfa",(root,current)=>root],["$",(root,current)=>current]]),somCache=new WeakMap,NS_DATASETS=_namespaces.NamespaceIds.datasets.id;function parseIndex(index){return index=index.trim(),index==="*"?1/0:parseInt(index,10)||0}__name2(parseIndex,"parseIndex"),__name(parseIndex,"parseIndex");function parseExpression(expr,dotDotAllowed,noExpr=!0){let match=expr.match(namePattern);if(!match)return null;let[name]=match;const parsed=[{name,cacheName:"."+name,index:0,js:null,formCalc:null,operator:operators.dot}];let pos=name.length;for(;pos<expr.length;){const spos=pos;if(expr.charAt(pos++)==="["){if(match=expr.slice(pos).match(indexPattern),!match)return(0,_util2.warn)("XFA - Invalid index in SOM expression"),null;parsed.at(-1).index=parseIndex(match[0]),pos+=match[0].length+1;continue}let operator;switch(expr.charAt(pos)){case".":if(!dotDotAllowed)return null;pos++,operator=operators.dotDot;break;case"#":pos++,operator=operators.dotHash;break;case"[":if(noExpr)return(0,_util2.warn)("XFA - SOM expression contains a FormCalc subexpression which is not supported for now."),null;operator=operators.dotBracket;break;case"(":if(noExpr)return(0,_util2.warn)("XFA - SOM expression contains a JavaScript subexpression which is not supported for now."),null;operator=operators.dotParen;break;default:operator=operators.dot;break}if(match=expr.slice(pos).match(namePattern),!match)break;[name]=match,pos+=name.length,parsed.push({name,cacheName:expr.slice(spos,pos),operator,index:0,js:null,formCalc:null})}return parsed}__name2(parseExpression,"parseExpression"),__name(parseExpression,"parseExpression");function searchNode(root,container,expr,dotDotAllowed=!0,useCache=!0){const parsed=parseExpression(expr,dotDotAllowed);if(!parsed)return null;const fn=shortcuts.get(parsed[0].name);let i=0,isQualified;fn?(isQualified=!0,root=[fn(root,container)],i=1):(isQualified=container===null,root=[container||root]);for(let ii=parsed.length;i<ii;i++){const{name,cacheName,operator,index}=parsed[i],nodes=[];for(const node of root){if(!(node instanceof _xfa_object.XFAObject))continue;let children,cached;if(useCache&&(cached=somCache.get(node),cached||(cached=new Map,somCache.set(node,cached)),children=cached.get(cacheName)),!children){switch(operator){case operators.dot:children=node[_xfa_object.$getChildrenByName](name,!1);break;case operators.dotDot:children=node[_xfa_object.$getChildrenByName](name,!0);break;case operators.dotHash:children=node[_xfa_object.$getChildrenByClass](name),children instanceof _xfa_object.XFAObjectArray?children=children.children:children=[children];break}useCache&&cached.set(cacheName,children)}children.length>0&&nodes.push(children)}if(nodes.length===0&&!isQualified&&i===0){if(container=container[_xfa_object.$getParent](),!container)return null;i=-1,root=[container];continue}isFinite(index)?root=nodes.filter(node=>index<node.length).map(node=>node[index]):root=nodes.flat()}return root.length===0?null:root}__name2(searchNode,"searchNode"),__name(searchNode,"searchNode");function createNodes(root,path){let node=null;for(const{name,index}of path){for(let i=0,ii=isFinite(index)?index:0;i<=ii;i++){const nsId=root[_xfa_object.$namespaceId]===NS_DATASETS?-1:root[_xfa_object.$namespaceId];node=new _xfa_object.XmlObject(nsId,name),root[_xfa_object.$appendChild](node)}root=node}return node}__name2(createNodes,"createNodes"),__name(createNodes,"createNodes");function createDataNode(root,container,expr){const parsed=parseExpression(expr);if(!parsed||parsed.some(x=>x.operator===operators.dotDot))return null;const fn=shortcuts.get(parsed[0].name);let i=0;fn?(root=fn(root,container),i=1):root=container||root;for(let ii=parsed.length;i<ii;i++){const{name,operator,index}=parsed[i];if(!isFinite(index))return parsed[i].index=0,createNodes(root,parsed.slice(i));let children;switch(operator){case operators.dot:children=root[_xfa_object.$getChildrenByName](name,!1);break;case operators.dotDot:children=root[_xfa_object.$getChildrenByName](name,!0);break;case operators.dotHash:children=root[_xfa_object.$getChildrenByClass](name),children instanceof _xfa_object.XFAObjectArray?children=children.children:children=[children];break}if(children.length===0)return createNodes(root,parsed.slice(i));if(index<children.length){const child=children[index];if(!(child instanceof _xfa_object.XFAObject))return(0,_util2.warn)("XFA - Cannot create a node."),null;root=child}else return parsed[i].index=index-children.length,createNodes(root,parsed.slice(i))}return null}__name2(createDataNode,"createDataNode"),__name(createDataNode,"createDataNode")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.Binder=void 0;var _xfa_object=__w_pdfjs_require__3(77),_template=__w_pdfjs_require__3(82),_som=__w_pdfjs_require__3(80),_namespaces=__w_pdfjs_require__3(79),_util2=__w_pdfjs_require__3(2);const NS_DATASETS=_namespaces.NamespaceIds.datasets.id;function createText(content){const node=new _template.Text({});return node[_xfa_object.$content]=content,node}__name2(createText,"createText"),__name(createText,"createText");const _Binder=class{static{__name2(this,"_Binder")}constructor(root){this.root=root,this.datasets=root.datasets,root.datasets&&root.datasets.data?this.data=root.datasets.data:this.data=new _xfa_object.XmlObject(_namespaces.NamespaceIds.datasets.id,"data"),this.emptyMerge=this.data[_xfa_object.$getChildren]().length===0,this.root.form=this.form=root.template[_xfa_object.$clone]()}_isConsumeData(){return!this.emptyMerge&&this._mergeMode}_isMatchTemplate(){return!this._isConsumeData()}bind(){return this._bindElement(this.form,this.data),this.form}getData(){return this.data}_bindValue(formNode,data,picture){if(formNode[_xfa_object.$data]=data,formNode[_xfa_object.$hasSettableValue]())if(data[_xfa_object.$isDataValue]()){const value=data[_xfa_object.$getDataValue]();formNode[_xfa_object.$setValue](createText(value))}else if(formNode instanceof _template.Field&&formNode.ui&&formNode.ui.choiceList&&formNode.ui.choiceList.open==="multiSelect"){const value=data[_xfa_object.$getChildren]().map(child=>child[_xfa_object.$content].trim()).join(`
`);formNode[_xfa_object.$setValue](createText(value))}else this._isConsumeData()&&(0,_util2.warn)("XFA - Nodes haven't the same type.");else!data[_xfa_object.$isDataValue]()||this._isMatchTemplate()?this._bindElement(formNode,data):(0,_util2.warn)("XFA - Nodes haven't the same type.")}_findDataByNameToConsume(name,isValue,dataNode,global2){if(!name)return null;let generator,match;for(let i=0;i<3;i++){for(generator=dataNode[_xfa_object.$getRealChildrenByNameIt](name,!1,!0);match=generator.next().value,!!match;)if(isValue===match[_xfa_object.$isDataValue]())return match;if(dataNode[_xfa_object.$namespaceId]===_namespaces.NamespaceIds.datasets.id&&dataNode[_xfa_object.$nodeName]==="data")break;dataNode=dataNode[_xfa_object.$getParent]()}return global2?(generator=this.data[_xfa_object.$getRealChildrenByNameIt](name,!0,!1),match=generator.next().value,match||(generator=this.data[_xfa_object.$getAttributeIt](name,!0),match=generator.next().value,match&&match[_xfa_object.$isDataValue]())?match:null):null}_setProperties(formNode,dataNode){if(formNode.hasOwnProperty("setProperty"))for(const{ref,target,connection}of formNode.setProperty.children){if(connection||!ref)continue;const nodes=(0,_som.searchNode)(this.root,dataNode,ref,!1,!1);if(!nodes){(0,_util2.warn)(`XFA - Invalid reference: ${ref}.`);continue}const[node]=nodes;if(!node[_xfa_object.$isDescendent](this.data)){(0,_util2.warn)("XFA - Invalid node: must be a data node.");continue}const targetNodes=(0,_som.searchNode)(this.root,formNode,target,!1,!1);if(!targetNodes){(0,_util2.warn)(`XFA - Invalid target: ${target}.`);continue}const[targetNode]=targetNodes;if(!targetNode[_xfa_object.$isDescendent](formNode)){(0,_util2.warn)("XFA - Invalid target: must be a property or subproperty.");continue}const targetParent=targetNode[_xfa_object.$getParent]();if(targetNode instanceof _template.SetProperty||targetParent instanceof _template.SetProperty){(0,_util2.warn)("XFA - Invalid target: cannot be a setProperty or one of its properties.");continue}if(targetNode instanceof _template.BindItems||targetParent instanceof _template.BindItems){(0,_util2.warn)("XFA - Invalid target: cannot be a bindItems or one of its properties.");continue}const content=node[_xfa_object.$text](),name=targetNode[_xfa_object.$nodeName];if(targetNode instanceof _xfa_object.XFAAttribute){const attrs=Object.create(null);attrs[name]=content;const obj=Reflect.construct(Object.getPrototypeOf(targetParent).constructor,[attrs]);targetParent[name]=obj[name];continue}if(!targetNode.hasOwnProperty(_xfa_object.$content)){(0,_util2.warn)("XFA - Invalid node to use in setProperty");continue}targetNode[_xfa_object.$data]=node,targetNode[_xfa_object.$content]=content,targetNode[_xfa_object.$finalize]()}}_bindItems(formNode,dataNode){if(!formNode.hasOwnProperty("items")||!formNode.hasOwnProperty("bindItems")||formNode.bindItems.isEmpty())return;for(const item of formNode.items.children)formNode[_xfa_object.$removeChild](item);formNode.items.clear();const labels=new _template.Items({}),values=new _template.Items({});formNode[_xfa_object.$appendChild](labels),formNode.items.push(labels),formNode[_xfa_object.$appendChild](values),formNode.items.push(values);for(const{ref,labelRef,valueRef,connection}of formNode.bindItems.children){if(connection||!ref)continue;const nodes=(0,_som.searchNode)(this.root,dataNode,ref,!1,!1);if(!nodes){(0,_util2.warn)(`XFA - Invalid reference: ${ref}.`);continue}for(const node of nodes){if(!node[_xfa_object.$isDescendent](this.datasets)){(0,_util2.warn)(`XFA - Invalid ref (${ref}): must be a datasets child.`);continue}const labelNodes=(0,_som.searchNode)(this.root,node,labelRef,!0,!1);if(!labelNodes){(0,_util2.warn)(`XFA - Invalid label: ${labelRef}.`);continue}const[labelNode]=labelNodes;if(!labelNode[_xfa_object.$isDescendent](this.datasets)){(0,_util2.warn)("XFA - Invalid label: must be a datasets child.");continue}const valueNodes=(0,_som.searchNode)(this.root,node,valueRef,!0,!1);if(!valueNodes){(0,_util2.warn)(`XFA - Invalid value: ${valueRef}.`);continue}const[valueNode]=valueNodes;if(!valueNode[_xfa_object.$isDescendent](this.datasets)){(0,_util2.warn)("XFA - Invalid value: must be a datasets child.");continue}const label=createText(labelNode[_xfa_object.$text]()),value=createText(valueNode[_xfa_object.$text]());labels[_xfa_object.$appendChild](label),labels.text.push(label),values[_xfa_object.$appendChild](value),values.text.push(value)}}}_bindOccurrences(formNode,matches,picture){let baseClone;if(matches.length>1&&(baseClone=formNode[_xfa_object.$clone](),baseClone[_xfa_object.$removeChild](baseClone.occur),baseClone.occur=null),this._bindValue(formNode,matches[0],picture),this._setProperties(formNode,matches[0]),this._bindItems(formNode,matches[0]),matches.length===1)return;const parent=formNode[_xfa_object.$getParent](),name=formNode[_xfa_object.$nodeName],pos=parent[_xfa_object.$indexOf](formNode);for(let i=1,ii=matches.length;i<ii;i++){const match=matches[i],clone=baseClone[_xfa_object.$clone]();parent[name].push(clone),parent[_xfa_object.$insertAt](pos+i,clone),this._bindValue(clone,match,picture),this._setProperties(clone,match),this._bindItems(clone,match)}}_createOccurrences(formNode){if(!this.emptyMerge)return;const{occur}=formNode;if(!occur||occur.initial<=1)return;const parent=formNode[_xfa_object.$getParent](),name=formNode[_xfa_object.$nodeName];if(!(parent[name]instanceof _xfa_object.XFAObjectArray))return;let currentNumber;formNode.name?currentNumber=parent[name].children.filter(e=>e.name===formNode.name).length:currentNumber=parent[name].children.length;const pos=parent[_xfa_object.$indexOf](formNode)+1,ii=occur.initial-currentNumber;if(ii){const nodeClone=formNode[_xfa_object.$clone]();nodeClone[_xfa_object.$removeChild](nodeClone.occur),nodeClone.occur=null,parent[name].push(nodeClone),parent[_xfa_object.$insertAt](pos,nodeClone);for(let i=1;i<ii;i++){const clone=nodeClone[_xfa_object.$clone]();parent[name].push(clone),parent[_xfa_object.$insertAt](pos+i,clone)}}}_getOccurInfo(formNode){const{name,occur}=formNode;if(!occur||!name)return[1,1];const max=occur.max===-1?1/0:occur.max;return[occur.min,max]}_setAndBind(formNode,dataNode){this._setProperties(formNode,dataNode),this._bindItems(formNode,dataNode),this._bindElement(formNode,dataNode)}_bindElement(formNode,dataNode){const uselessNodes=[];this._createOccurrences(formNode);for(const child of formNode[_xfa_object.$getChildren]()){if(child[_xfa_object.$data])continue;if(this._mergeMode===void 0&&child[_xfa_object.$nodeName]==="subform"){this._mergeMode=child.mergeMode==="consumeData";const dataChildren=dataNode[_xfa_object.$getChildren]();if(dataChildren.length>0)this._bindOccurrences(child,[dataChildren[0]],null);else if(this.emptyMerge){const nsId=dataNode[_xfa_object.$namespaceId]===NS_DATASETS?-1:dataNode[_xfa_object.$namespaceId],dataChild=child[_xfa_object.$data]=new _xfa_object.XmlObject(nsId,child.name||"root");dataNode[_xfa_object.$appendChild](dataChild),this._bindElement(child,dataChild)}continue}if(!child[_xfa_object.$isBindable]())continue;let global2=!1,picture=null,ref=null,match=null;if(child.bind){switch(child.bind.match){case"none":this._setAndBind(child,dataNode);continue;case"global":global2=!0;break;case"dataRef":if(!child.bind.ref){(0,_util2.warn)(`XFA - ref is empty in node ${child[_xfa_object.$nodeName]}.`),this._setAndBind(child,dataNode);continue}ref=child.bind.ref;break}child.bind.picture&&(picture=child.bind.picture[_xfa_object.$content])}const[min,max]=this._getOccurInfo(child);if(ref)if(match=(0,_som.searchNode)(this.root,dataNode,ref,!0,!1),match===null){if(match=(0,_som.createDataNode)(this.data,dataNode,ref),!match)continue;this._isConsumeData()&&(match[_xfa_object.$consumed]=!0),this._setAndBind(child,match);continue}else this._isConsumeData()&&(match=match.filter(node=>!node[_xfa_object.$consumed])),match.length>max?match=match.slice(0,max):match.length===0&&(match=null),match&&this._isConsumeData()&&match.forEach(node=>{node[_xfa_object.$consumed]=!0});else{if(!child.name){this._setAndBind(child,dataNode);continue}if(this._isConsumeData()){const matches=[];for(;matches.length<max;){const found=this._findDataByNameToConsume(child.name,child[_xfa_object.$hasSettableValue](),dataNode,global2);if(!found)break;found[_xfa_object.$consumed]=!0,matches.push(found)}match=matches.length>0?matches:null}else{if(match=dataNode[_xfa_object.$getRealChildrenByNameIt](child.name,!1,this.emptyMerge).next().value,!match){if(min===0){uselessNodes.push(child);continue}const nsId=dataNode[_xfa_object.$namespaceId]===NS_DATASETS?-1:dataNode[_xfa_object.$namespaceId];match=child[_xfa_object.$data]=new _xfa_object.XmlObject(nsId,child.name),this.emptyMerge&&(match[_xfa_object.$consumed]=!0),dataNode[_xfa_object.$appendChild](match),this._setAndBind(child,match);continue}this.emptyMerge&&(match[_xfa_object.$consumed]=!0),match=[match]}}match?this._bindOccurrences(child,match,picture):min>0?this._setAndBind(child,dataNode):uselessNodes.push(child)}uselessNodes.forEach(node=>node[_xfa_object.$getParent]()[_xfa_object.$removeChild](node))}};__name(_Binder,"Binder");let Binder=_Binder;exports3.Binder=Binder},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.Value=exports3.Text=exports3.TemplateNamespace=exports3.Template=exports3.SetProperty=exports3.Items=exports3.Field=exports3.BindItems=void 0;var _xfa_object=__w_pdfjs_require__3(77),_namespaces=__w_pdfjs_require__3(79),_layout=__w_pdfjs_require__3(83),_html_utils=__w_pdfjs_require__3(84),_utils=__w_pdfjs_require__3(78),_util2=__w_pdfjs_require__3(2),_fonts=__w_pdfjs_require__3(85),_core_utils=__w_pdfjs_require__3(6),_som=__w_pdfjs_require__3(80);const TEMPLATE_NS_ID=_namespaces.NamespaceIds.template.id,SVG_NS="http://www.w3.org/2000/svg",MAX_ATTEMPTS_FOR_LRTB_LAYOUT=2,MAX_EMPTY_PAGES=3,DEFAULT_TAB_INDEX=5e3,HEADING_PATTERN=/^H(\d+)$/,MIMES=new Set(["image/gif","image/jpeg","image/jpg","image/pjpeg","image/png","image/apng","image/x-png","image/bmp","image/x-ms-bmp","image/tiff","image/tif","application/octet-stream"]),IMAGES_HEADERS=[[[66,77],"image/bmp"],[[255,216,255],"image/jpeg"],[[73,73,42,0],"image/tiff"],[[77,77,0,42],"image/tiff"],[[71,73,70,56,57,97],"image/gif"],[[137,80,78,71,13,10,26,10],"image/png"]];function getBorderDims(node){if(!node||!node.border)return{w:0,h:0};const borderExtra=node.border[_xfa_object.$getExtra]();return borderExtra?{w:borderExtra.widths[0]+borderExtra.widths[2]+borderExtra.insets[0]+borderExtra.insets[2],h:borderExtra.widths[1]+borderExtra.widths[3]+borderExtra.insets[1]+borderExtra.insets[3]}:{w:0,h:0}}__name2(getBorderDims,"getBorderDims"),__name(getBorderDims,"getBorderDims");function hasMargin(node){return node.margin&&(node.margin.topInset||node.margin.rightInset||node.margin.bottomInset||node.margin.leftInset)}__name2(hasMargin,"hasMargin"),__name(hasMargin,"hasMargin");function _setValue(templateNode,value){if(!templateNode.value){const nodeValue=new Value({});templateNode[_xfa_object.$appendChild](nodeValue),templateNode.value=nodeValue}templateNode.value[_xfa_object.$setValue](value)}__name2(_setValue,"_setValue"),__name(_setValue,"_setValue");function*getContainedChildren(node){for(const child of node[_xfa_object.$getChildren]()){if(child instanceof SubformSet){yield*child[_xfa_object.$getContainedChildren]();continue}yield child}}__name2(getContainedChildren,"getContainedChildren"),__name(getContainedChildren,"getContainedChildren");function isRequired(node){return node.validate&&node.validate.nullTest==="error"}__name2(isRequired,"isRequired"),__name(isRequired,"isRequired");function setTabIndex(node){for(;node;){if(!node.traversal){node[_xfa_object.$tabIndex]=node[_xfa_object.$getParent]()[_xfa_object.$tabIndex];return}if(node[_xfa_object.$tabIndex])return;let next=null;for(const child of node.traversal[_xfa_object.$getChildren]())if(child.operation==="next"){next=child;break}if(!next||!next.ref){node[_xfa_object.$tabIndex]=node[_xfa_object.$getParent]()[_xfa_object.$tabIndex];return}const root=node[_xfa_object.$getTemplateRoot]();node[_xfa_object.$tabIndex]=++root[_xfa_object.$tabIndex];const ref=root[_xfa_object.$searchNode](next.ref,node);if(!ref)return;node=ref[0]}}__name2(setTabIndex,"setTabIndex"),__name(setTabIndex,"setTabIndex");function applyAssist(obj,attributes){const assist=obj.assist;if(assist){const assistTitle=assist[_xfa_object.$toHTML]();assistTitle&&(attributes.title=assistTitle);const match=assist.role.match(HEADING_PATTERN);if(match){const ariaRole="heading",ariaLevel=match[1];attributes.role=ariaRole,attributes["aria-level"]=ariaLevel}}if(obj.layout==="table")attributes.role="table";else if(obj.layout==="row")attributes.role="row";else{const parent=obj[_xfa_object.$getParent]();parent.layout==="row"&&(parent.assist&&parent.assist.role==="TH"?attributes.role="columnheader":attributes.role="cell")}}__name2(applyAssist,"applyAssist"),__name(applyAssist,"applyAssist");function ariaLabel(obj){if(!obj.assist)return null;const assist=obj.assist;return assist.speak&&assist.speak[_xfa_object.$content]!==""?assist.speak[_xfa_object.$content]:assist.toolTip?assist.toolTip[_xfa_object.$content]:null}__name2(ariaLabel,"ariaLabel"),__name(ariaLabel,"ariaLabel");function valueToHtml(value){return _utils.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:Object.create(null)},children:[{name:"span",attributes:{style:Object.create(null)},value}]})}__name2(valueToHtml,"valueToHtml"),__name(valueToHtml,"valueToHtml");function setFirstUnsplittable(node){const root=node[_xfa_object.$getTemplateRoot]();root[_xfa_object.$extra].firstUnsplittable===null&&(root[_xfa_object.$extra].firstUnsplittable=node,root[_xfa_object.$extra].noLayoutFailure=!0)}__name2(setFirstUnsplittable,"setFirstUnsplittable"),__name(setFirstUnsplittable,"setFirstUnsplittable");function unsetFirstUnsplittable(node){const root=node[_xfa_object.$getTemplateRoot]();root[_xfa_object.$extra].firstUnsplittable===node&&(root[_xfa_object.$extra].noLayoutFailure=!1)}__name2(unsetFirstUnsplittable,"unsetFirstUnsplittable"),__name(unsetFirstUnsplittable,"unsetFirstUnsplittable");function handleBreak(node){if(node[_xfa_object.$extra]||(node[_xfa_object.$extra]=Object.create(null),node.targetType==="auto"))return!1;const root=node[_xfa_object.$getTemplateRoot]();let target=null;if(node.target){if(target=root[_xfa_object.$searchNode](node.target,node[_xfa_object.$getParent]()),!target)return!1;target=target[0]}const{currentPageArea,currentContentArea}=root[_xfa_object.$extra];if(node.targetType==="pageArea")return target instanceof PageArea||(target=null),node.startNew?(node[_xfa_object.$extra].target=target||currentPageArea,!0):target&&target!==currentPageArea?(node[_xfa_object.$extra].target=target,!0):!1;target instanceof ContentArea||(target=null);const pageArea=target&&target[_xfa_object.$getParent]();let index,nextPageArea=pageArea;if(node.startNew)if(target){const contentAreas=pageArea.contentArea.children,indexForCurrent=contentAreas.indexOf(currentContentArea),indexForTarget=contentAreas.indexOf(target);indexForCurrent!==-1&&indexForCurrent<indexForTarget&&(nextPageArea=null),index=indexForTarget-1}else index=currentPageArea.contentArea.children.indexOf(currentContentArea);else if(target&&target!==currentContentArea)index=pageArea.contentArea.children.indexOf(target)-1,nextPageArea=pageArea===currentPageArea?null:pageArea;else return!1;return node[_xfa_object.$extra].target=nextPageArea,node[_xfa_object.$extra].index=index,!0}__name2(handleBreak,"handleBreak"),__name(handleBreak,"handleBreak");function handleOverflow(node,extraNode,space){const root=node[_xfa_object.$getTemplateRoot](),saved=root[_xfa_object.$extra].noLayoutFailure,savedMethod=extraNode[_xfa_object.$getSubformParent];extraNode[_xfa_object.$getSubformParent]=()=>node,root[_xfa_object.$extra].noLayoutFailure=!0;const res=extraNode[_xfa_object.$toHTML](space);node[_xfa_object.$addHTML](res.html,res.bbox),root[_xfa_object.$extra].noLayoutFailure=saved,extraNode[_xfa_object.$getSubformParent]=savedMethod}__name2(handleOverflow,"handleOverflow"),__name(handleOverflow,"handleOverflow");const _AppearanceFilter=class extends _xfa_object.StringObject{static{__name2(this,"_AppearanceFilter")}constructor(attributes){super(TEMPLATE_NS_ID,"appearanceFilter"),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_AppearanceFilter,"AppearanceFilter");let AppearanceFilter=_AppearanceFilter;const _Arc=class extends _xfa_object.XFAObject{static{__name2(this,"_Arc")}constructor(attributes){super(TEMPLATE_NS_ID,"arc",!0),this.circular=(0,_utils.getInteger)({data:attributes.circular,defaultValue:0,validate:x=>x===1}),this.hand=(0,_utils.getStringOption)(attributes.hand,["even","left","right"]),this.id=attributes.id||"",this.startAngle=(0,_utils.getFloat)({data:attributes.startAngle,defaultValue:0,validate:x=>!0}),this.sweepAngle=(0,_utils.getFloat)({data:attributes.sweepAngle,defaultValue:360,validate:x=>!0}),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.edge=null,this.fill=null}[_xfa_object.$toHTML](){const edge=this.edge||new Edge({}),edgeStyle=edge[_xfa_object.$toStyle](),style=Object.create(null);this.fill&&this.fill.presence==="visible"?Object.assign(style,this.fill[_xfa_object.$toStyle]()):style.fill="transparent",style.strokeWidth=(0,_html_utils.measureToString)(edge.presence==="visible"?edge.thickness:0),style.stroke=edgeStyle.color;let arc;const attributes={xmlns:SVG_NS,style:{width:"100%",height:"100%",overflow:"visible"}};if(this.sweepAngle===360)arc={name:"ellipse",attributes:{xmlns:SVG_NS,cx:"50%",cy:"50%",rx:"50%",ry:"50%",style}};else{const startAngle=this.startAngle*Math.PI/180,sweepAngle=this.sweepAngle*Math.PI/180,largeArc=this.sweepAngle>180?1:0,[x1,y1,x2,y2]=[50*(1+Math.cos(startAngle)),50*(1-Math.sin(startAngle)),50*(1+Math.cos(startAngle+sweepAngle)),50*(1-Math.sin(startAngle+sweepAngle))];arc={name:"path",attributes:{xmlns:SVG_NS,d:`M ${x1} ${y1} A 50 50 0 ${largeArc} 0 ${x2} ${y2}`,vectorEffect:"non-scaling-stroke",style}},Object.assign(attributes,{viewBox:"0 0 100 100",preserveAspectRatio:"none"})}const svg={name:"svg",children:[arc],attributes},parent=this[_xfa_object.$getParent]()[_xfa_object.$getParent]();return hasMargin(parent)?_utils.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[svg]}):(svg.attributes.style.position="absolute",_utils.HTMLResult.success(svg))}};__name(_Arc,"Arc");let Arc=_Arc;const _Area=class extends _xfa_object.XFAObject{static{__name2(this,"_Area")}constructor(attributes){super(TEMPLATE_NS_ID,"area",!0),this.colSpan=(0,_utils.getInteger)({data:attributes.colSpan,defaultValue:1,validate:n=>n>=1||n===-1}),this.id=attributes.id||"",this.name=attributes.name||"",this.relevant=(0,_utils.getRelevant)(attributes.relevant),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.x=(0,_utils.getMeasurement)(attributes.x,"0pt"),this.y=(0,_utils.getMeasurement)(attributes.y,"0pt"),this.desc=null,this.extras=null,this.area=new _xfa_object.XFAObjectArray,this.draw=new _xfa_object.XFAObjectArray,this.exObject=new _xfa_object.XFAObjectArray,this.exclGroup=new _xfa_object.XFAObjectArray,this.field=new _xfa_object.XFAObjectArray,this.subform=new _xfa_object.XFAObjectArray,this.subformSet=new _xfa_object.XFAObjectArray}*[_xfa_object.$getContainedChildren](){yield*getContainedChildren(this)}[_xfa_object.$isTransparent](){return!0}[_xfa_object.$isBindable](){return!0}[_xfa_object.$addHTML](html,bbox){const[x,y,w,h]=bbox;this[_xfa_object.$extra].width=Math.max(this[_xfa_object.$extra].width,x+w),this[_xfa_object.$extra].height=Math.max(this[_xfa_object.$extra].height,y+h),this[_xfa_object.$extra].children.push(html)}[_xfa_object.$getAvailableSpace](){return this[_xfa_object.$extra].availableSpace}[_xfa_object.$toHTML](availableSpace){const style=(0,_html_utils.toStyle)(this,"position"),attributes={style,id:this[_xfa_object.$uid],class:["xfaArea"]};(0,_html_utils.isPrintOnly)(this)&&attributes.class.push("xfaPrintOnly"),this.name&&(attributes.xfaName=this.name);const children=[];this[_xfa_object.$extra]={children,width:0,height:0,availableSpace};const result=this[_xfa_object.$childrenToHTML]({filter:new Set(["area","draw","field","exclGroup","subform","subformSet"]),include:!0});if(!result.success)return result.isBreak()?result:(delete this[_xfa_object.$extra],_utils.HTMLResult.FAILURE);style.width=(0,_html_utils.measureToString)(this[_xfa_object.$extra].width),style.height=(0,_html_utils.measureToString)(this[_xfa_object.$extra].height);const html={name:"div",attributes,children},bbox=[this.x,this.y,this[_xfa_object.$extra].width,this[_xfa_object.$extra].height];return delete this[_xfa_object.$extra],_utils.HTMLResult.success(html,bbox)}};__name(_Area,"Area");let Area=_Area;const _Assist=class extends _xfa_object.XFAObject{static{__name2(this,"_Assist")}constructor(attributes){super(TEMPLATE_NS_ID,"assist",!0),this.id=attributes.id||"",this.role=attributes.role||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.speak=null,this.toolTip=null}[_xfa_object.$toHTML](){return this.toolTip&&this.toolTip[_xfa_object.$content]?this.toolTip[_xfa_object.$content]:null}};__name(_Assist,"Assist");let Assist=_Assist;const _Barcode=class extends _xfa_object.XFAObject{static{__name2(this,"_Barcode")}constructor(attributes){super(TEMPLATE_NS_ID,"barcode",!0),this.charEncoding=(0,_utils.getKeyword)({data:attributes.charEncoding?attributes.charEncoding.toLowerCase():"",defaultValue:"",validate:k=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(k)||k.match(/iso-8859-\d{2}/)}),this.checksum=(0,_utils.getStringOption)(attributes.checksum,["none","1mod10","1mod10_1mod11","2mod10","auto"]),this.dataColumnCount=(0,_utils.getInteger)({data:attributes.dataColumnCount,defaultValue:-1,validate:x=>x>=0}),this.dataLength=(0,_utils.getInteger)({data:attributes.dataLength,defaultValue:-1,validate:x=>x>=0}),this.dataPrep=(0,_utils.getStringOption)(attributes.dataPrep,["none","flateCompress"]),this.dataRowCount=(0,_utils.getInteger)({data:attributes.dataRowCount,defaultValue:-1,validate:x=>x>=0}),this.endChar=attributes.endChar||"",this.errorCorrectionLevel=(0,_utils.getInteger)({data:attributes.errorCorrectionLevel,defaultValue:-1,validate:x=>x>=0&&x<=8}),this.id=attributes.id||"",this.moduleHeight=(0,_utils.getMeasurement)(attributes.moduleHeight,"5mm"),this.moduleWidth=(0,_utils.getMeasurement)(attributes.moduleWidth,"0.25mm"),this.printCheckDigit=(0,_utils.getInteger)({data:attributes.printCheckDigit,defaultValue:0,validate:x=>x===1}),this.rowColumnRatio=(0,_utils.getRatio)(attributes.rowColumnRatio),this.startChar=attributes.startChar||"",this.textLocation=(0,_utils.getStringOption)(attributes.textLocation,["below","above","aboveEmbedded","belowEmbedded","none"]),this.truncate=(0,_utils.getInteger)({data:attributes.truncate,defaultValue:0,validate:x=>x===1}),this.type=(0,_utils.getStringOption)(attributes.type?attributes.type.toLowerCase():"",["aztec","codabar","code2of5industrial","code2of5interleaved","code2of5matrix","code2of5standard","code3of9","code3of9extended","code11","code49","code93","code128","code128a","code128b","code128c","code128sscc","datamatrix","ean8","ean8add2","ean8add5","ean13","ean13add2","ean13add5","ean13pwcd","fim","logmars","maxicode","msi","pdf417","pdf417macro","plessey","postauscust2","postauscust3","postausreplypaid","postausstandard","postukrm4scc","postusdpbc","postusimb","postusstandard","postus5zip","qrcode","rfid","rss14","rss14expanded","rss14limited","rss14stacked","rss14stackedomni","rss14truncated","telepen","ucc128","ucc128random","ucc128sscc","upca","upcaadd2","upcaadd5","upcapwcd","upce","upceadd2","upceadd5","upcean2","upcean5","upsmaxicode"]),this.upsMode=(0,_utils.getStringOption)(attributes.upsMode,["usCarrier","internationalCarrier","secureSymbol","standardSymbol"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.wideNarrowRatio=(0,_utils.getRatio)(attributes.wideNarrowRatio),this.encrypt=null,this.extras=null}};__name(_Barcode,"Barcode");let Barcode=_Barcode;const _Bind=class extends _xfa_object.XFAObject{static{__name2(this,"_Bind")}constructor(attributes){super(TEMPLATE_NS_ID,"bind",!0),this.match=(0,_utils.getStringOption)(attributes.match,["once","dataRef","global","none"]),this.ref=attributes.ref||"",this.picture=null}};__name(_Bind,"Bind");let Bind=_Bind;const _BindItems=class extends _xfa_object.XFAObject{static{__name2(this,"_BindItems")}constructor(attributes){super(TEMPLATE_NS_ID,"bindItems"),this.connection=attributes.connection||"",this.labelRef=attributes.labelRef||"",this.ref=attributes.ref||"",this.valueRef=attributes.valueRef||""}};__name(_BindItems,"BindItems");let BindItems=_BindItems;exports3.BindItems=BindItems;const _Bookend=class extends _xfa_object.XFAObject{static{__name2(this,"_Bookend")}constructor(attributes){super(TEMPLATE_NS_ID,"bookend"),this.id=attributes.id||"",this.leader=attributes.leader||"",this.trailer=attributes.trailer||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Bookend,"Bookend");let Bookend=_Bookend;const _BooleanElement=class extends _xfa_object.Option01{static{__name2(this,"_BooleanElement")}constructor(attributes){super(TEMPLATE_NS_ID,"boolean"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}[_xfa_object.$toHTML](availableSpace){return valueToHtml(this[_xfa_object.$content]===1?"1":"0")}};__name(_BooleanElement,"BooleanElement");let BooleanElement=_BooleanElement;const _Border=class extends _xfa_object.XFAObject{static{__name2(this,"_Border")}constructor(attributes){super(TEMPLATE_NS_ID,"border",!0),this.break=(0,_utils.getStringOption)(attributes.break,["close","open"]),this.hand=(0,_utils.getStringOption)(attributes.hand,["even","left","right"]),this.id=attributes.id||"",this.presence=(0,_utils.getStringOption)(attributes.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,_utils.getRelevant)(attributes.relevant),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.corner=new _xfa_object.XFAObjectArray(4),this.edge=new _xfa_object.XFAObjectArray(4),this.extras=null,this.fill=null,this.margin=null}[_xfa_object.$getExtra](){if(!this[_xfa_object.$extra]){const edges=this.edge.children.slice();if(edges.length<4){const defaultEdge=edges.at(-1)||new Edge({});for(let i=edges.length;i<4;i++)edges.push(defaultEdge)}const widths=edges.map(edge=>edge.thickness),insets=[0,0,0,0];this.margin&&(insets[0]=this.margin.topInset,insets[1]=this.margin.rightInset,insets[2]=this.margin.bottomInset,insets[3]=this.margin.leftInset),this[_xfa_object.$extra]={widths,insets,edges}}return this[_xfa_object.$extra]}[_xfa_object.$toStyle](){const{edges}=this[_xfa_object.$getExtra](),edgeStyles=edges.map(node=>{const style2=node[_xfa_object.$toStyle]();return style2.color=style2.color||"#000000",style2}),style=Object.create(null);if(this.margin&&Object.assign(style,this.margin[_xfa_object.$toStyle]()),this.fill&&this.fill.presence==="visible"&&Object.assign(style,this.fill[_xfa_object.$toStyle]()),this.corner.children.some(node=>node.radius!==0)){const cornerStyles=this.corner.children.map(node=>node[_xfa_object.$toStyle]());if(cornerStyles.length===2||cornerStyles.length===3){const last=cornerStyles.at(-1);for(let i=cornerStyles.length;i<4;i++)cornerStyles.push(last)}style.borderRadius=cornerStyles.map(s=>s.radius).join(" ")}switch(this.presence){case"invisible":case"hidden":style.borderStyle="";break;case"inactive":style.borderStyle="none";break;default:style.borderStyle=edgeStyles.map(s=>s.style).join(" ");break}return style.borderWidth=edgeStyles.map(s=>s.width).join(" "),style.borderColor=edgeStyles.map(s=>s.color).join(" "),style}};__name(_Border,"Border");let Border=_Border;const _Break=class extends _xfa_object.XFAObject{static{__name2(this,"_Break")}constructor(attributes){super(TEMPLATE_NS_ID,"break",!0),this.after=(0,_utils.getStringOption)(attributes.after,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.afterTarget=attributes.afterTarget||"",this.before=(0,_utils.getStringOption)(attributes.before,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.beforeTarget=attributes.beforeTarget||"",this.bookendLeader=attributes.bookendLeader||"",this.bookendTrailer=attributes.bookendTrailer||"",this.id=attributes.id||"",this.overflowLeader=attributes.overflowLeader||"",this.overflowTarget=attributes.overflowTarget||"",this.overflowTrailer=attributes.overflowTrailer||"",this.startNew=(0,_utils.getInteger)({data:attributes.startNew,defaultValue:0,validate:x=>x===1}),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null}};__name(_Break,"Break");let Break=_Break;const _BreakAfter=class extends _xfa_object.XFAObject{static{__name2(this,"_BreakAfter")}constructor(attributes){super(TEMPLATE_NS_ID,"breakAfter",!0),this.id=attributes.id||"",this.leader=attributes.leader||"",this.startNew=(0,_utils.getInteger)({data:attributes.startNew,defaultValue:0,validate:x=>x===1}),this.target=attributes.target||"",this.targetType=(0,_utils.getStringOption)(attributes.targetType,["auto","contentArea","pageArea"]),this.trailer=attributes.trailer||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.script=null}};__name(_BreakAfter,"BreakAfter");let BreakAfter=_BreakAfter;const _BreakBefore=class extends _xfa_object.XFAObject{static{__name2(this,"_BreakBefore")}constructor(attributes){super(TEMPLATE_NS_ID,"breakBefore",!0),this.id=attributes.id||"",this.leader=attributes.leader||"",this.startNew=(0,_utils.getInteger)({data:attributes.startNew,defaultValue:0,validate:x=>x===1}),this.target=attributes.target||"",this.targetType=(0,_utils.getStringOption)(attributes.targetType,["auto","contentArea","pageArea"]),this.trailer=attributes.trailer||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.script=null}[_xfa_object.$toHTML](availableSpace){return this[_xfa_object.$extra]={},_utils.HTMLResult.FAILURE}};__name(_BreakBefore,"BreakBefore");let BreakBefore=_BreakBefore;const _Button=class extends _xfa_object.XFAObject{static{__name2(this,"_Button")}constructor(attributes){super(TEMPLATE_NS_ID,"button",!0),this.highlight=(0,_utils.getStringOption)(attributes.highlight,["inverted","none","outline","push"]),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null}[_xfa_object.$toHTML](availableSpace){const grandpa=this[_xfa_object.$getParent]()[_xfa_object.$getParent](),htmlButton={name:"button",attributes:{id:this[_xfa_object.$uid],class:["xfaButton"],style:{}},children:[]};for(const event of grandpa.event.children){if(event.activity!=="click"||!event.script)continue;const jsURL=(0,_core_utils.recoverJsURL)(event.script[_xfa_object.$content]);if(!jsURL)continue;const href=(0,_html_utils.fixURL)(jsURL.url);href&&htmlButton.children.push({name:"a",attributes:{id:"link"+this[_xfa_object.$uid],href,newWindow:jsURL.newWindow,class:["xfaLink"],style:{}},children:[]})}return _utils.HTMLResult.success(htmlButton)}};__name(_Button,"Button");let Button=_Button;const _Calculate=class extends _xfa_object.XFAObject{static{__name2(this,"_Calculate")}constructor(attributes){super(TEMPLATE_NS_ID,"calculate",!0),this.id=attributes.id||"",this.override=(0,_utils.getStringOption)(attributes.override,["disabled","error","ignore","warning"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null,this.message=null,this.script=null}};__name(_Calculate,"Calculate");let Calculate=_Calculate;const _Caption=class extends _xfa_object.XFAObject{static{__name2(this,"_Caption")}constructor(attributes){super(TEMPLATE_NS_ID,"caption",!0),this.id=attributes.id||"",this.placement=(0,_utils.getStringOption)(attributes.placement,["left","bottom","inline","right","top"]),this.presence=(0,_utils.getStringOption)(attributes.presence,["visible","hidden","inactive","invisible"]),this.reserve=Math.ceil((0,_utils.getMeasurement)(attributes.reserve)),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null,this.font=null,this.margin=null,this.para=null,this.value=null}[_xfa_object.$setValue](value){_setValue(this,value)}[_xfa_object.$getExtra](availableSpace){if(!this[_xfa_object.$extra]){let{width,height}=availableSpace;switch(this.placement){case"left":case"right":case"inline":width=this.reserve<=0?width:this.reserve;break;case"top":case"bottom":height=this.reserve<=0?height:this.reserve;break}this[_xfa_object.$extra]=(0,_html_utils.layoutNode)(this,{width,height})}return this[_xfa_object.$extra]}[_xfa_object.$toHTML](availableSpace){if(!this.value)return _utils.HTMLResult.EMPTY;this[_xfa_object.$pushPara]();const value=this.value[_xfa_object.$toHTML](availableSpace).html;if(!value)return this[_xfa_object.$popPara](),_utils.HTMLResult.EMPTY;const savedReserve=this.reserve;if(this.reserve<=0){const{w,h}=this[_xfa_object.$getExtra](availableSpace);switch(this.placement){case"left":case"right":case"inline":this.reserve=w;break;case"top":case"bottom":this.reserve=h;break}}const children=[];typeof value=="string"?children.push({name:"#text",value}):children.push(value);const style=(0,_html_utils.toStyle)(this,"font","margin","visibility");switch(this.placement){case"left":case"right":this.reserve>0&&(style.width=(0,_html_utils.measureToString)(this.reserve));break;case"top":case"bottom":this.reserve>0&&(style.height=(0,_html_utils.measureToString)(this.reserve));break}return(0,_html_utils.setPara)(this,null,value),this[_xfa_object.$popPara](),this.reserve=savedReserve,_utils.HTMLResult.success({name:"div",attributes:{style,class:["xfaCaption"]},children})}};__name(_Caption,"Caption");let Caption=_Caption;const _Certificate=class extends _xfa_object.StringObject{static{__name2(this,"_Certificate")}constructor(attributes){super(TEMPLATE_NS_ID,"certificate"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Certificate,"Certificate");let Certificate=_Certificate;const _Certificates=class extends _xfa_object.XFAObject{static{__name2(this,"_Certificates")}constructor(attributes){super(TEMPLATE_NS_ID,"certificates",!0),this.credentialServerPolicy=(0,_utils.getStringOption)(attributes.credentialServerPolicy,["optional","required"]),this.id=attributes.id||"",this.url=attributes.url||"",this.urlPolicy=attributes.urlPolicy||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.encryption=null,this.issuers=null,this.keyUsage=null,this.oids=null,this.signing=null,this.subjectDNs=null}};__name(_Certificates,"Certificates");let Certificates=_Certificates;const _CheckButton=class extends _xfa_object.XFAObject{static{__name2(this,"_CheckButton")}constructor(attributes){super(TEMPLATE_NS_ID,"checkButton",!0),this.id=attributes.id||"",this.mark=(0,_utils.getStringOption)(attributes.mark,["default","check","circle","cross","diamond","square","star"]),this.shape=(0,_utils.getStringOption)(attributes.shape,["square","round"]),this.size=(0,_utils.getMeasurement)(attributes.size,"10pt"),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.border=null,this.extras=null,this.margin=null}[_xfa_object.$toHTML](availableSpace){const style=(0,_html_utils.toStyle)("margin"),size=(0,_html_utils.measureToString)(this.size);style.width=style.height=size;let type,className,groupId;const field=this[_xfa_object.$getParent]()[_xfa_object.$getParent](),items=field.items.children.length&&field.items.children[0][_xfa_object.$toHTML]().html||[],exportedValue={on:(items[0]!==void 0?items[0]:"on").toString(),off:(items[1]!==void 0?items[1]:"off").toString()},checked=(field.value&&field.value[_xfa_object.$text]()||"off")===exportedValue.on||void 0,container=field[_xfa_object.$getSubformParent](),fieldId=field[_xfa_object.$uid];let dataId;container instanceof ExclGroup?(groupId=container[_xfa_object.$uid],type="radio",className="xfaRadio",dataId=container[_xfa_object.$data]&&container[_xfa_object.$data][_xfa_object.$uid]||container[_xfa_object.$uid]):(type="checkbox",className="xfaCheckbox",dataId=field[_xfa_object.$data]&&field[_xfa_object.$data][_xfa_object.$uid]||field[_xfa_object.$uid]);const input={name:"input",attributes:{class:[className],style,fieldId,dataId,type,checked,xfaOn:exportedValue.on,xfaOff:exportedValue.off,"aria-label":ariaLabel(field),"aria-required":!1}};return groupId&&(input.attributes.name=groupId),isRequired(field)&&(input.attributes["aria-required"]=!0,input.attributes.required=!0),_utils.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[input]})}};__name(_CheckButton,"CheckButton");let CheckButton=_CheckButton;const _ChoiceList=class extends _xfa_object.XFAObject{static{__name2(this,"_ChoiceList")}constructor(attributes){super(TEMPLATE_NS_ID,"choiceList",!0),this.commitOn=(0,_utils.getStringOption)(attributes.commitOn,["select","exit"]),this.id=attributes.id||"",this.open=(0,_utils.getStringOption)(attributes.open,["userControl","always","multiSelect","onEntry"]),this.textEntry=(0,_utils.getInteger)({data:attributes.textEntry,defaultValue:0,validate:x=>x===1}),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.border=null,this.extras=null,this.margin=null}[_xfa_object.$toHTML](availableSpace){const style=(0,_html_utils.toStyle)(this,"border","margin"),field=this[_xfa_object.$getParent]()[_xfa_object.$getParent](),optionStyle={fontSize:`calc(${field.font&&field.font.size||10}px * var(--scale-factor))`},children=[];if(field.items.children.length>0){const items=field.items;let displayedIndex=0,saveIndex=0;items.children.length===2&&(displayedIndex=items.children[0].save,saveIndex=1-displayedIndex);const displayed=items.children[displayedIndex][_xfa_object.$toHTML]().html,values=items.children[saveIndex][_xfa_object.$toHTML]().html;let selected=!1;const value=field.value&&field.value[_xfa_object.$text]()||"";for(let i=0,ii=displayed.length;i<ii;i++){const option={name:"option",attributes:{value:values[i]||displayed[i],style:optionStyle},value:displayed[i]};values[i]===value&&(option.attributes.selected=selected=!0),children.push(option)}selected||children.splice(0,0,{name:"option",attributes:{hidden:!0,selected:!0},value:" "})}const selectAttributes={class:["xfaSelect"],fieldId:field[_xfa_object.$uid],dataId:field[_xfa_object.$data]&&field[_xfa_object.$data][_xfa_object.$uid]||field[_xfa_object.$uid],style,"aria-label":ariaLabel(field),"aria-required":!1};return isRequired(field)&&(selectAttributes["aria-required"]=!0,selectAttributes.required=!0),this.open==="multiSelect"&&(selectAttributes.multiple=!0),_utils.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[{name:"select",children,attributes:selectAttributes}]})}};__name(_ChoiceList,"ChoiceList");let ChoiceList=_ChoiceList;const _Color=class extends _xfa_object.XFAObject{static{__name2(this,"_Color")}constructor(attributes){super(TEMPLATE_NS_ID,"color",!0),this.cSpace=(0,_utils.getStringOption)(attributes.cSpace,["SRGB"]),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.value=attributes.value?(0,_utils.getColor)(attributes.value):"",this.extras=null}[_xfa_object.$hasSettableValue](){return!1}[_xfa_object.$toStyle](){return this.value?_util2.Util.makeHexColor(this.value.r,this.value.g,this.value.b):null}};__name(_Color,"Color");let Color=_Color;const _Comb=class extends _xfa_object.XFAObject{static{__name2(this,"_Comb")}constructor(attributes){super(TEMPLATE_NS_ID,"comb"),this.id=attributes.id||"",this.numberOfCells=(0,_utils.getInteger)({data:attributes.numberOfCells,defaultValue:0,validate:x=>x>=0}),this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Comb,"Comb");let Comb=_Comb;const _Connect=class extends _xfa_object.XFAObject{static{__name2(this,"_Connect")}constructor(attributes){super(TEMPLATE_NS_ID,"connect",!0),this.connection=attributes.connection||"",this.id=attributes.id||"",this.ref=attributes.ref||"",this.usage=(0,_utils.getStringOption)(attributes.usage,["exportAndImport","exportOnly","importOnly"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.picture=null}};__name(_Connect,"Connect");let Connect=_Connect;const _ContentArea=class extends _xfa_object.XFAObject{static{__name2(this,"_ContentArea")}constructor(attributes){super(TEMPLATE_NS_ID,"contentArea",!0),this.h=(0,_utils.getMeasurement)(attributes.h),this.id=attributes.id||"",this.name=attributes.name||"",this.relevant=(0,_utils.getRelevant)(attributes.relevant),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.w=(0,_utils.getMeasurement)(attributes.w),this.x=(0,_utils.getMeasurement)(attributes.x,"0pt"),this.y=(0,_utils.getMeasurement)(attributes.y,"0pt"),this.desc=null,this.extras=null}[_xfa_object.$toHTML](availableSpace){const left=(0,_html_utils.measureToString)(this.x),top=(0,_html_utils.measureToString)(this.y),style={left,top,width:(0,_html_utils.measureToString)(this.w),height:(0,_html_utils.measureToString)(this.h)},classNames=["xfaContentarea"];return(0,_html_utils.isPrintOnly)(this)&&classNames.push("xfaPrintOnly"),_utils.HTMLResult.success({name:"div",children:[],attributes:{style,class:classNames,id:this[_xfa_object.$uid]}})}};__name(_ContentArea,"ContentArea");let ContentArea=_ContentArea;const _Corner=class extends _xfa_object.XFAObject{static{__name2(this,"_Corner")}constructor(attributes){super(TEMPLATE_NS_ID,"corner",!0),this.id=attributes.id||"",this.inverted=(0,_utils.getInteger)({data:attributes.inverted,defaultValue:0,validate:x=>x===1}),this.join=(0,_utils.getStringOption)(attributes.join,["square","round"]),this.presence=(0,_utils.getStringOption)(attributes.presence,["visible","hidden","inactive","invisible"]),this.radius=(0,_utils.getMeasurement)(attributes.radius),this.stroke=(0,_utils.getStringOption)(attributes.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,_utils.getMeasurement)(attributes.thickness,"0.5pt"),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.color=null,this.extras=null}[_xfa_object.$toStyle](){const style=(0,_html_utils.toStyle)(this,"visibility");return style.radius=(0,_html_utils.measureToString)(this.join==="square"?0:this.radius),style}};__name(_Corner,"Corner");let Corner=_Corner;const _DateElement=class extends _xfa_object.ContentObject{static{__name2(this,"_DateElement")}constructor(attributes){super(TEMPLATE_NS_ID,"date"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}[_xfa_object.$finalize](){const date=this[_xfa_object.$content].trim();this[_xfa_object.$content]=date?new Date(date):null}[_xfa_object.$toHTML](availableSpace){return valueToHtml(this[_xfa_object.$content]?this[_xfa_object.$content].toString():"")}};__name(_DateElement,"DateElement");let DateElement=_DateElement;const _DateTime=class extends _xfa_object.ContentObject{static{__name2(this,"_DateTime")}constructor(attributes){super(TEMPLATE_NS_ID,"dateTime"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}[_xfa_object.$finalize](){const date=this[_xfa_object.$content].trim();this[_xfa_object.$content]=date?new Date(date):null}[_xfa_object.$toHTML](availableSpace){return valueToHtml(this[_xfa_object.$content]?this[_xfa_object.$content].toString():"")}};__name(_DateTime,"DateTime");let DateTime=_DateTime;const _DateTimeEdit=class extends _xfa_object.XFAObject{static{__name2(this,"_DateTimeEdit")}constructor(attributes){super(TEMPLATE_NS_ID,"dateTimeEdit",!0),this.hScrollPolicy=(0,_utils.getStringOption)(attributes.hScrollPolicy,["auto","off","on"]),this.id=attributes.id||"",this.picker=(0,_utils.getStringOption)(attributes.picker,["host","none"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[_xfa_object.$toHTML](availableSpace){const style=(0,_html_utils.toStyle)(this,"border","font","margin"),field=this[_xfa_object.$getParent]()[_xfa_object.$getParent](),html={name:"input",attributes:{type:"text",fieldId:field[_xfa_object.$uid],dataId:field[_xfa_object.$data]&&field[_xfa_object.$data][_xfa_object.$uid]||field[_xfa_object.$uid],class:["xfaTextfield"],style,"aria-label":ariaLabel(field),"aria-required":!1}};return isRequired(field)&&(html.attributes["aria-required"]=!0,html.attributes.required=!0),_utils.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[html]})}};__name(_DateTimeEdit,"DateTimeEdit");let DateTimeEdit=_DateTimeEdit;const _Decimal=class extends _xfa_object.ContentObject{static{__name2(this,"_Decimal")}constructor(attributes){super(TEMPLATE_NS_ID,"decimal"),this.fracDigits=(0,_utils.getInteger)({data:attributes.fracDigits,defaultValue:2,validate:x=>!0}),this.id=attributes.id||"",this.leadDigits=(0,_utils.getInteger)({data:attributes.leadDigits,defaultValue:-1,validate:x=>!0}),this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}[_xfa_object.$finalize](){const number=parseFloat(this[_xfa_object.$content].trim());this[_xfa_object.$content]=isNaN(number)?null:number}[_xfa_object.$toHTML](availableSpace){return valueToHtml(this[_xfa_object.$content]!==null?this[_xfa_object.$content].toString():"")}};__name(_Decimal,"Decimal");let Decimal=_Decimal;const _DefaultUi=class extends _xfa_object.XFAObject{static{__name2(this,"_DefaultUi")}constructor(attributes){super(TEMPLATE_NS_ID,"defaultUi",!0),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null}};__name(_DefaultUi,"DefaultUi");let DefaultUi=_DefaultUi;const _Desc=class extends _xfa_object.XFAObject{static{__name2(this,"_Desc")}constructor(attributes){super(TEMPLATE_NS_ID,"desc",!0),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.boolean=new _xfa_object.XFAObjectArray,this.date=new _xfa_object.XFAObjectArray,this.dateTime=new _xfa_object.XFAObjectArray,this.decimal=new _xfa_object.XFAObjectArray,this.exData=new _xfa_object.XFAObjectArray,this.float=new _xfa_object.XFAObjectArray,this.image=new _xfa_object.XFAObjectArray,this.integer=new _xfa_object.XFAObjectArray,this.text=new _xfa_object.XFAObjectArray,this.time=new _xfa_object.XFAObjectArray}};__name(_Desc,"Desc");let Desc=_Desc;const _DigestMethod=class extends _xfa_object.OptionObject{static{__name2(this,"_DigestMethod")}constructor(attributes){super(TEMPLATE_NS_ID,"digestMethod",["","SHA1","SHA256","SHA512","RIPEMD160"]),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_DigestMethod,"DigestMethod");let DigestMethod=_DigestMethod;const _DigestMethods=class extends _xfa_object.XFAObject{static{__name2(this,"_DigestMethods")}constructor(attributes){super(TEMPLATE_NS_ID,"digestMethods",!0),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.digestMethod=new _xfa_object.XFAObjectArray}};__name(_DigestMethods,"DigestMethods");let DigestMethods=_DigestMethods;const _Draw=class extends _xfa_object.XFAObject{static{__name2(this,"_Draw")}constructor(attributes){super(TEMPLATE_NS_ID,"draw",!0),this.anchorType=(0,_utils.getStringOption)(attributes.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,_utils.getInteger)({data:attributes.colSpan,defaultValue:1,validate:n=>n>=1||n===-1}),this.h=attributes.h?(0,_utils.getMeasurement)(attributes.h):"",this.hAlign=(0,_utils.getStringOption)(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=attributes.id||"",this.locale=attributes.locale||"",this.maxH=(0,_utils.getMeasurement)(attributes.maxH,"0pt"),this.maxW=(0,_utils.getMeasurement)(attributes.maxW,"0pt"),this.minH=(0,_utils.getMeasurement)(attributes.minH,"0pt"),this.minW=(0,_utils.getMeasurement)(attributes.minW,"0pt"),this.name=attributes.name||"",this.presence=(0,_utils.getStringOption)(attributes.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,_utils.getRelevant)(attributes.relevant),this.rotate=(0,_utils.getInteger)({data:attributes.rotate,defaultValue:0,validate:x=>x%90===0}),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.w=attributes.w?(0,_utils.getMeasurement)(attributes.w):"",this.x=(0,_utils.getMeasurement)(attributes.x,"0pt"),this.y=(0,_utils.getMeasurement)(attributes.y,"0pt"),this.assist=null,this.border=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.value=null,this.setProperty=new _xfa_object.XFAObjectArray}[_xfa_object.$setValue](value){_setValue(this,value)}[_xfa_object.$toHTML](availableSpace){if(setTabIndex(this),this.presence==="hidden"||this.presence==="inactive")return _utils.HTMLResult.EMPTY;(0,_html_utils.fixDimensions)(this),this[_xfa_object.$pushPara]();const savedW=this.w,savedH=this.h,{w,h,isBroken}=(0,_html_utils.layoutNode)(this,availableSpace);if(w&&this.w===""){if(isBroken&&this[_xfa_object.$getSubformParent]()[_xfa_object.$isThereMoreWidth]())return this[_xfa_object.$popPara](),_utils.HTMLResult.FAILURE;this.w=w}if(h&&this.h===""&&(this.h=h),setFirstUnsplittable(this),!(0,_layout.checkDimensions)(this,availableSpace))return this.w=savedW,this.h=savedH,this[_xfa_object.$popPara](),_utils.HTMLResult.FAILURE;unsetFirstUnsplittable(this);const style=(0,_html_utils.toStyle)(this,"font","hAlign","dimensions","position","presence","rotate","anchorType","border","margin");(0,_html_utils.setMinMaxDimensions)(this,style),style.margin&&(style.padding=style.margin,delete style.margin);const classNames=["xfaDraw"];this.font&&classNames.push("xfaFont"),(0,_html_utils.isPrintOnly)(this)&&classNames.push("xfaPrintOnly");const attributes={style,id:this[_xfa_object.$uid],class:classNames};this.name&&(attributes.xfaName=this.name);const html={name:"div",attributes,children:[]};applyAssist(this,attributes);const bbox=(0,_html_utils.computeBbox)(this,html,availableSpace),value=this.value?this.value[_xfa_object.$toHTML](availableSpace).html:null;return value===null?(this.w=savedW,this.h=savedH,this[_xfa_object.$popPara](),_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,html),bbox)):(html.children.push(value),(0,_html_utils.setPara)(this,style,value),this.w=savedW,this.h=savedH,this[_xfa_object.$popPara](),_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,html),bbox))}};__name(_Draw,"Draw");let Draw=_Draw;const _Edge=class extends _xfa_object.XFAObject{static{__name2(this,"_Edge")}constructor(attributes){super(TEMPLATE_NS_ID,"edge",!0),this.cap=(0,_utils.getStringOption)(attributes.cap,["square","butt","round"]),this.id=attributes.id||"",this.presence=(0,_utils.getStringOption)(attributes.presence,["visible","hidden","inactive","invisible"]),this.stroke=(0,_utils.getStringOption)(attributes.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,_utils.getMeasurement)(attributes.thickness,"0.5pt"),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.color=null,this.extras=null}[_xfa_object.$toStyle](){const style=(0,_html_utils.toStyle)(this,"visibility");if(Object.assign(style,{linecap:this.cap,width:(0,_html_utils.measureToString)(this.thickness),color:this.color?this.color[_xfa_object.$toStyle]():"#000000",style:""}),this.presence!=="visible")style.style="none";else switch(this.stroke){case"solid":style.style="solid";break;case"dashDot":style.style="dashed";break;case"dashDotDot":style.style="dashed";break;case"dashed":style.style="dashed";break;case"dotted":style.style="dotted";break;case"embossed":style.style="ridge";break;case"etched":style.style="groove";break;case"lowered":style.style="inset";break;case"raised":style.style="outset";break}return style}};__name(_Edge,"Edge");let Edge=_Edge;const _Encoding=class extends _xfa_object.OptionObject{static{__name2(this,"_Encoding")}constructor(attributes){super(TEMPLATE_NS_ID,"encoding",["adbe.x509.rsa_sha1","adbe.pkcs7.detached","adbe.pkcs7.sha1"]),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Encoding,"Encoding");let Encoding=_Encoding;const _Encodings=class extends _xfa_object.XFAObject{static{__name2(this,"_Encodings")}constructor(attributes){super(TEMPLATE_NS_ID,"encodings",!0),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.encoding=new _xfa_object.XFAObjectArray}};__name(_Encodings,"Encodings");let Encodings=_Encodings;const _Encrypt=class extends _xfa_object.XFAObject{static{__name2(this,"_Encrypt")}constructor(attributes){super(TEMPLATE_NS_ID,"encrypt",!0),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.certificate=null}};__name(_Encrypt,"Encrypt");let Encrypt=_Encrypt;const _EncryptData=class extends _xfa_object.XFAObject{static{__name2(this,"_EncryptData")}constructor(attributes){super(TEMPLATE_NS_ID,"encryptData",!0),this.id=attributes.id||"",this.operation=(0,_utils.getStringOption)(attributes.operation,["encrypt","decrypt"]),this.target=attributes.target||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.filter=null,this.manifest=null}};__name(_EncryptData,"EncryptData");let EncryptData=_EncryptData;const _Encryption=class extends _xfa_object.XFAObject{static{__name2(this,"_Encryption")}constructor(attributes){super(TEMPLATE_NS_ID,"encryption",!0),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.certificate=new _xfa_object.XFAObjectArray}};__name(_Encryption,"Encryption");let Encryption=_Encryption;const _EncryptionMethod=class extends _xfa_object.OptionObject{static{__name2(this,"_EncryptionMethod")}constructor(attributes){super(TEMPLATE_NS_ID,"encryptionMethod",["","AES256-CBC","TRIPLEDES-CBC","AES128-CBC","AES192-CBC"]),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_EncryptionMethod,"EncryptionMethod");let EncryptionMethod=_EncryptionMethod;const _EncryptionMethods=class extends _xfa_object.XFAObject{static{__name2(this,"_EncryptionMethods")}constructor(attributes){super(TEMPLATE_NS_ID,"encryptionMethods",!0),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.encryptionMethod=new _xfa_object.XFAObjectArray}};__name(_EncryptionMethods,"EncryptionMethods");let EncryptionMethods=_EncryptionMethods;const _Event=class extends _xfa_object.XFAObject{static{__name2(this,"_Event")}constructor(attributes){super(TEMPLATE_NS_ID,"event",!0),this.activity=(0,_utils.getStringOption)(attributes.activity,["click","change","docClose","docReady","enter","exit","full","indexChange","initialize","mouseDown","mouseEnter","mouseExit","mouseUp","postExecute","postOpen","postPrint","postSave","postSign","postSubmit","preExecute","preOpen","prePrint","preSave","preSign","preSubmit","ready","validationState"]),this.id=attributes.id||"",this.listen=(0,_utils.getStringOption)(attributes.listen,["refOnly","refAndDescendents"]),this.name=attributes.name||"",this.ref=attributes.ref||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null,this.encryptData=null,this.execute=null,this.script=null,this.signData=null,this.submit=null}};__name(_Event,"Event");let Event2=_Event;const _ExData=class extends _xfa_object.ContentObject{static{__name2(this,"_ExData")}constructor(attributes){super(TEMPLATE_NS_ID,"exData"),this.contentType=attributes.contentType||"",this.href=attributes.href||"",this.id=attributes.id||"",this.maxLength=(0,_utils.getInteger)({data:attributes.maxLength,defaultValue:-1,validate:x=>x>=-1}),this.name=attributes.name||"",this.rid=attributes.rid||"",this.transferEncoding=(0,_utils.getStringOption)(attributes.transferEncoding,["none","base64","package"]),this.use=attributes.use||"",this.usehref=attributes.usehref||""}[_xfa_object.$isCDATAXml](){return this.contentType==="text/html"}[_xfa_object.$onChild](child){return this.contentType==="text/html"&&child[_xfa_object.$namespaceId]===_namespaces.NamespaceIds.xhtml.id?(this[_xfa_object.$content]=child,!0):this.contentType==="text/xml"?(this[_xfa_object.$content]=child,!0):!1}[_xfa_object.$toHTML](availableSpace){return this.contentType!=="text/html"||!this[_xfa_object.$content]?_utils.HTMLResult.EMPTY:this[_xfa_object.$content][_xfa_object.$toHTML](availableSpace)}};__name(_ExData,"ExData");let ExData=_ExData;const _ExObject=class extends _xfa_object.XFAObject{static{__name2(this,"_ExObject")}constructor(attributes){super(TEMPLATE_NS_ID,"exObject",!0),this.archive=attributes.archive||"",this.classId=attributes.classId||"",this.codeBase=attributes.codeBase||"",this.codeType=attributes.codeType||"",this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null,this.boolean=new _xfa_object.XFAObjectArray,this.date=new _xfa_object.XFAObjectArray,this.dateTime=new _xfa_object.XFAObjectArray,this.decimal=new _xfa_object.XFAObjectArray,this.exData=new _xfa_object.XFAObjectArray,this.exObject=new _xfa_object.XFAObjectArray,this.float=new _xfa_object.XFAObjectArray,this.image=new _xfa_object.XFAObjectArray,this.integer=new _xfa_object.XFAObjectArray,this.text=new _xfa_object.XFAObjectArray,this.time=new _xfa_object.XFAObjectArray}};__name(_ExObject,"ExObject");let ExObject=_ExObject;const _ExclGroup=class extends _xfa_object.XFAObject{static{__name2(this,"_ExclGroup")}constructor(attributes){super(TEMPLATE_NS_ID,"exclGroup",!0),this.access=(0,_utils.getStringOption)(attributes.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=attributes.accessKey||"",this.anchorType=(0,_utils.getStringOption)(attributes.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,_utils.getInteger)({data:attributes.colSpan,defaultValue:1,validate:n=>n>=1||n===-1}),this.h=attributes.h?(0,_utils.getMeasurement)(attributes.h):"",this.hAlign=(0,_utils.getStringOption)(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=attributes.id||"",this.layout=(0,_utils.getStringOption)(attributes.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.maxH=(0,_utils.getMeasurement)(attributes.maxH,"0pt"),this.maxW=(0,_utils.getMeasurement)(attributes.maxW,"0pt"),this.minH=(0,_utils.getMeasurement)(attributes.minH,"0pt"),this.minW=(0,_utils.getMeasurement)(attributes.minW,"0pt"),this.name=attributes.name||"",this.presence=(0,_utils.getStringOption)(attributes.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,_utils.getRelevant)(attributes.relevant),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.w=attributes.w?(0,_utils.getMeasurement)(attributes.w):"",this.x=(0,_utils.getMeasurement)(attributes.x,"0pt"),this.y=(0,_utils.getMeasurement)(attributes.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.margin=null,this.para=null,this.traversal=null,this.validate=null,this.connect=new _xfa_object.XFAObjectArray,this.event=new _xfa_object.XFAObjectArray,this.field=new _xfa_object.XFAObjectArray,this.setProperty=new _xfa_object.XFAObjectArray}[_xfa_object.$isBindable](){return!0}[_xfa_object.$hasSettableValue](){return!0}[_xfa_object.$setValue](value){for(const field of this.field.children){if(!field.value){const nodeValue=new Value({});field[_xfa_object.$appendChild](nodeValue),field.value=nodeValue}field.value[_xfa_object.$setValue](value)}}[_xfa_object.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&this[_xfa_object.$extra].attempt===0&&this[_xfa_object.$extra].numberInLine>0||this[_xfa_object.$getParent]()[_xfa_object.$isThereMoreWidth]()}[_xfa_object.$isSplittable](){const parent=this[_xfa_object.$getSubformParent]();return parent[_xfa_object.$isSplittable]()?this[_xfa_object.$extra]._isSplittable!==void 0?this[_xfa_object.$extra]._isSplittable:this.layout==="position"||this.layout.includes("row")?(this[_xfa_object.$extra]._isSplittable=!1,!1):parent.layout&&parent.layout.endsWith("-tb")&&parent[_xfa_object.$extra].numberInLine!==0?!1:(this[_xfa_object.$extra]._isSplittable=!0,!0):!1}[_xfa_object.$flushHTML](){return(0,_layout.flushHTML)(this)}[_xfa_object.$addHTML](html,bbox){(0,_layout.addHTML)(this,html,bbox)}[_xfa_object.$getAvailableSpace](){return(0,_layout.getAvailableSpace)(this)}[_xfa_object.$toHTML](availableSpace){if(setTabIndex(this),this.presence==="hidden"||this.presence==="inactive"||this.h===0||this.w===0)return _utils.HTMLResult.EMPTY;(0,_html_utils.fixDimensions)(this);const children=[],attributes={id:this[_xfa_object.$uid],class:[]};(0,_html_utils.setAccess)(this,attributes.class),this[_xfa_object.$extra]||(this[_xfa_object.$extra]=Object.create(null)),Object.assign(this[_xfa_object.$extra],{children,attributes,attempt:0,line:null,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,availableSpace.width),height:Math.min(this.h||1/0,availableSpace.height)},width:0,height:0,prevHeight:0,currentWidth:0});const isSplittable=this[_xfa_object.$isSplittable]();if(isSplittable||setFirstUnsplittable(this),!(0,_layout.checkDimensions)(this,availableSpace))return _utils.HTMLResult.FAILURE;const filter2=new Set(["field"]);if(this.layout.includes("row")){const columnWidths=this[_xfa_object.$getSubformParent]().columnWidths;Array.isArray(columnWidths)&&columnWidths.length>0&&(this[_xfa_object.$extra].columnWidths=columnWidths,this[_xfa_object.$extra].currentColumn=0)}const style=(0,_html_utils.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),classNames=["xfaExclgroup"],cl=(0,_html_utils.layoutClass)(this);cl&&classNames.push(cl),(0,_html_utils.isPrintOnly)(this)&&classNames.push("xfaPrintOnly"),attributes.style=style,attributes.class=classNames,this.name&&(attributes.xfaName=this.name),this[_xfa_object.$pushPara]();const isLrTb=this.layout==="lr-tb"||this.layout==="rl-tb",maxRun=isLrTb?MAX_ATTEMPTS_FOR_LRTB_LAYOUT:1;for(;this[_xfa_object.$extra].attempt<maxRun;this[_xfa_object.$extra].attempt++){isLrTb&&this[_xfa_object.$extra].attempt===MAX_ATTEMPTS_FOR_LRTB_LAYOUT-1&&(this[_xfa_object.$extra].numberInLine=0);const result=this[_xfa_object.$childrenToHTML]({filter:filter2,include:!0});if(result.success)break;if(result.isBreak())return this[_xfa_object.$popPara](),result;if(isLrTb&&this[_xfa_object.$extra].attempt===0&&this[_xfa_object.$extra].numberInLine===0&&!this[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].noLayoutFailure){this[_xfa_object.$extra].attempt=maxRun;break}}if(this[_xfa_object.$popPara](),isSplittable||unsetFirstUnsplittable(this),this[_xfa_object.$extra].attempt===maxRun)return isSplittable||delete this[_xfa_object.$extra],_utils.HTMLResult.FAILURE;let marginH=0,marginV=0;this.margin&&(marginH=this.margin.leftInset+this.margin.rightInset,marginV=this.margin.topInset+this.margin.bottomInset);const width=Math.max(this[_xfa_object.$extra].width+marginH,this.w||0),height=Math.max(this[_xfa_object.$extra].height+marginV,this.h||0),bbox=[this.x,this.y,width,height];this.w===""&&(style.width=(0,_html_utils.measureToString)(width)),this.h===""&&(style.height=(0,_html_utils.measureToString)(height));const html={name:"div",attributes,children};return applyAssist(this,attributes),delete this[_xfa_object.$extra],_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,html),bbox)}};__name(_ExclGroup,"ExclGroup");let ExclGroup=_ExclGroup;const _Execute=class extends _xfa_object.XFAObject{static{__name2(this,"_Execute")}constructor(attributes){super(TEMPLATE_NS_ID,"execute"),this.connection=attributes.connection||"",this.executeType=(0,_utils.getStringOption)(attributes.executeType,["import","remerge"]),this.id=attributes.id||"",this.runAt=(0,_utils.getStringOption)(attributes.runAt,["client","both","server"]),this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Execute,"Execute");let Execute=_Execute;const _Extras=class extends _xfa_object.XFAObject{static{__name2(this,"_Extras")}constructor(attributes){super(TEMPLATE_NS_ID,"extras",!0),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.boolean=new _xfa_object.XFAObjectArray,this.date=new _xfa_object.XFAObjectArray,this.dateTime=new _xfa_object.XFAObjectArray,this.decimal=new _xfa_object.XFAObjectArray,this.exData=new _xfa_object.XFAObjectArray,this.extras=new _xfa_object.XFAObjectArray,this.float=new _xfa_object.XFAObjectArray,this.image=new _xfa_object.XFAObjectArray,this.integer=new _xfa_object.XFAObjectArray,this.text=new _xfa_object.XFAObjectArray,this.time=new _xfa_object.XFAObjectArray}};__name(_Extras,"Extras");let Extras=_Extras;const _Field=class extends _xfa_object.XFAObject{static{__name2(this,"_Field")}constructor(attributes){super(TEMPLATE_NS_ID,"field",!0),this.access=(0,_utils.getStringOption)(attributes.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=attributes.accessKey||"",this.anchorType=(0,_utils.getStringOption)(attributes.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,_utils.getInteger)({data:attributes.colSpan,defaultValue:1,validate:n=>n>=1||n===-1}),this.h=attributes.h?(0,_utils.getMeasurement)(attributes.h):"",this.hAlign=(0,_utils.getStringOption)(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=attributes.id||"",this.locale=attributes.locale||"",this.maxH=(0,_utils.getMeasurement)(attributes.maxH,"0pt"),this.maxW=(0,_utils.getMeasurement)(attributes.maxW,"0pt"),this.minH=(0,_utils.getMeasurement)(attributes.minH,"0pt"),this.minW=(0,_utils.getMeasurement)(attributes.minW,"0pt"),this.name=attributes.name||"",this.presence=(0,_utils.getStringOption)(attributes.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,_utils.getRelevant)(attributes.relevant),this.rotate=(0,_utils.getInteger)({data:attributes.rotate,defaultValue:0,validate:x=>x%90===0}),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.w=attributes.w?(0,_utils.getMeasurement)(attributes.w):"",this.x=(0,_utils.getMeasurement)(attributes.x,"0pt"),this.y=(0,_utils.getMeasurement)(attributes.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.format=null,this.items=new _xfa_object.XFAObjectArray(2),this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.validate=null,this.value=null,this.bindItems=new _xfa_object.XFAObjectArray,this.connect=new _xfa_object.XFAObjectArray,this.event=new _xfa_object.XFAObjectArray,this.setProperty=new _xfa_object.XFAObjectArray}[_xfa_object.$isBindable](){return!0}[_xfa_object.$setValue](value){_setValue(this,value)}[_xfa_object.$toHTML](availableSpace){if(setTabIndex(this),!this.ui){this.ui=new Ui({}),this.ui[_xfa_object.$globalData]=this[_xfa_object.$globalData],this[_xfa_object.$appendChild](this.ui);let node;switch(this.items.children.length){case 0:node=new TextEdit({}),this.ui.textEdit=node;break;case 1:node=new CheckButton({}),this.ui.checkButton=node;break;case 2:node=new ChoiceList({}),this.ui.choiceList=node;break}this.ui[_xfa_object.$appendChild](node)}if(!this.ui||this.presence==="hidden"||this.presence==="inactive"||this.h===0||this.w===0)return _utils.HTMLResult.EMPTY;this.caption&&delete this.caption[_xfa_object.$extra],this[_xfa_object.$pushPara]();const caption=this.caption?this.caption[_xfa_object.$toHTML](availableSpace).html:null,savedW=this.w,savedH=this.h;let marginH=0,marginV=0;this.margin&&(marginH=this.margin.leftInset+this.margin.rightInset,marginV=this.margin.topInset+this.margin.bottomInset);let borderDims=null;if(this.w===""||this.h===""){let width=null,height=null,uiW=0,uiH=0;if(this.ui.checkButton)uiW=uiH=this.ui.checkButton.size;else{const{w,h}=(0,_html_utils.layoutNode)(this,availableSpace);w!==null?(uiW=w,uiH=h):uiH=(0,_fonts.getMetrics)(this.font,!0).lineNoGap}if(borderDims=getBorderDims(this.ui[_xfa_object.$getExtra]()),uiW+=borderDims.w,uiH+=borderDims.h,this.caption){const{w,h,isBroken}=this.caption[_xfa_object.$getExtra](availableSpace);if(isBroken&&this[_xfa_object.$getSubformParent]()[_xfa_object.$isThereMoreWidth]())return this[_xfa_object.$popPara](),_utils.HTMLResult.FAILURE;switch(width=w,height=h,this.caption.placement){case"left":case"right":case"inline":width+=uiW;break;case"top":case"bottom":height+=uiH;break}}else width=uiW,height=uiH;width&&this.w===""&&(width+=marginH,this.w=Math.min(this.maxW<=0?1/0:this.maxW,this.minW+1<width?width:this.minW)),height&&this.h===""&&(height+=marginV,this.h=Math.min(this.maxH<=0?1/0:this.maxH,this.minH+1<height?height:this.minH))}if(this[_xfa_object.$popPara](),(0,_html_utils.fixDimensions)(this),setFirstUnsplittable(this),!(0,_layout.checkDimensions)(this,availableSpace))return this.w=savedW,this.h=savedH,this[_xfa_object.$popPara](),_utils.HTMLResult.FAILURE;unsetFirstUnsplittable(this);const style=(0,_html_utils.toStyle)(this,"font","dimensions","position","rotate","anchorType","presence","margin","hAlign");(0,_html_utils.setMinMaxDimensions)(this,style);const classNames=["xfaField"];this.font&&classNames.push("xfaFont"),(0,_html_utils.isPrintOnly)(this)&&classNames.push("xfaPrintOnly");const attributes={style,id:this[_xfa_object.$uid],class:classNames};style.margin&&(style.padding=style.margin,delete style.margin),(0,_html_utils.setAccess)(this,classNames),this.name&&(attributes.xfaName=this.name);const children=[],html={name:"div",attributes,children};applyAssist(this,attributes);const borderStyle=this.border?this.border[_xfa_object.$toStyle]():null,bbox=(0,_html_utils.computeBbox)(this,html,availableSpace),ui=this.ui[_xfa_object.$toHTML]().html;if(!ui)return Object.assign(style,borderStyle),_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,html),bbox);this[_xfa_object.$tabIndex]&&(ui.children&&ui.children[0]?ui.children[0].attributes.tabindex=this[_xfa_object.$tabIndex]:ui.attributes.tabindex=this[_xfa_object.$tabIndex]),ui.attributes.style||(ui.attributes.style=Object.create(null));let aElement=null;if(this.ui.button?(ui.children.length===1&&([aElement]=ui.children.splice(0,1)),Object.assign(ui.attributes.style,borderStyle)):Object.assign(style,borderStyle),children.push(ui),this.value){if(this.ui.imageEdit)ui.children.push(this.value[_xfa_object.$toHTML]().html);else if(!this.ui.button){let value="";if(this.value.exData)value=this.value.exData[_xfa_object.$text]();else if(this.value.text)value=this.value.text[_xfa_object.$getExtra]();else{const htmlValue=this.value[_xfa_object.$toHTML]().html;htmlValue!==null&&(value=htmlValue.children[0].value)}this.ui.textEdit&&this.value.text&&this.value.text.maxChars&&(ui.children[0].attributes.maxLength=this.value.text.maxChars),value&&(this.ui.numericEdit&&(value=parseFloat(value),value=isNaN(value)?"":value.toString()),ui.children[0].name==="textarea"?ui.children[0].attributes.textContent=value:ui.children[0].attributes.value=value)}}if(!this.ui.imageEdit&&ui.children&&ui.children[0]&&this.h){borderDims=borderDims||getBorderDims(this.ui[_xfa_object.$getExtra]());let captionHeight=0;if(this.caption&&["top","bottom"].includes(this.caption.placement)){captionHeight=this.caption.reserve,captionHeight<=0&&(captionHeight=this.caption[_xfa_object.$getExtra](availableSpace).h);const inputHeight=this.h-captionHeight-marginV-borderDims.h;ui.children[0].attributes.style.height=(0,_html_utils.measureToString)(inputHeight)}else ui.children[0].attributes.style.height="100%"}if(aElement&&ui.children.push(aElement),!caption)return ui.attributes.class&&ui.attributes.class.push("xfaLeft"),this.w=savedW,this.h=savedH,_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,html),bbox);if(this.ui.button)return style.padding&&delete style.padding,caption.name==="div"&&(caption.name="span"),ui.children.push(caption),_utils.HTMLResult.success(html,bbox);switch(this.ui.checkButton&&(caption.attributes.class[0]="xfaCaptionForCheckButton"),ui.attributes.class||(ui.attributes.class=[]),ui.children.splice(0,0,caption),this.caption.placement){case"left":ui.attributes.class.push("xfaLeft");break;case"right":ui.attributes.class.push("xfaRight");break;case"top":ui.attributes.class.push("xfaTop");break;case"bottom":ui.attributes.class.push("xfaBottom");break;case"inline":ui.attributes.class.push("xfaLeft");break}return this.w=savedW,this.h=savedH,_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,html),bbox)}};__name(_Field,"Field");let Field=_Field;exports3.Field=Field;const _Fill=class extends _xfa_object.XFAObject{static{__name2(this,"_Fill")}constructor(attributes){super(TEMPLATE_NS_ID,"fill",!0),this.id=attributes.id||"",this.presence=(0,_utils.getStringOption)(attributes.presence,["visible","hidden","inactive","invisible"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.color=null,this.extras=null,this.linear=null,this.pattern=null,this.radial=null,this.solid=null,this.stipple=null}[_xfa_object.$toStyle](){const parent=this[_xfa_object.$getParent](),ggrandpa=parent[_xfa_object.$getParent]()[_xfa_object.$getParent](),style=Object.create(null);let propName="color",altPropName=propName;parent instanceof Border&&(propName="background-color",altPropName="background",ggrandpa instanceof Ui&&(style.backgroundColor="white")),(parent instanceof Rectangle||parent instanceof Arc)&&(propName=altPropName="fill",style.fill="white");for(const name of Object.getOwnPropertyNames(this)){if(name==="extras"||name==="color")continue;const obj=this[name];if(!(obj instanceof _xfa_object.XFAObject))continue;const color=obj[_xfa_object.$toStyle](this.color);return color&&(style[color.startsWith("#")?propName:altPropName]=color),style}if(this.color&&this.color.value){const color=this.color[_xfa_object.$toStyle]();style[color.startsWith("#")?propName:altPropName]=color}return style}};__name(_Fill,"Fill");let Fill=_Fill;const _Filter=class extends _xfa_object.XFAObject{static{__name2(this,"_Filter")}constructor(attributes){super(TEMPLATE_NS_ID,"filter",!0),this.addRevocationInfo=(0,_utils.getStringOption)(attributes.addRevocationInfo,["","required","optional","none"]),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.version=(0,_utils.getInteger)({data:this.version,defaultValue:5,validate:x=>x>=1&&x<=5}),this.appearanceFilter=null,this.certificates=null,this.digestMethods=null,this.encodings=null,this.encryptionMethods=null,this.handler=null,this.lockDocument=null,this.mdp=null,this.reasons=null,this.timeStamp=null}};__name(_Filter,"Filter");let Filter=_Filter;const _Float=class extends _xfa_object.ContentObject{static{__name2(this,"_Float")}constructor(attributes){super(TEMPLATE_NS_ID,"float"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}[_xfa_object.$finalize](){const number=parseFloat(this[_xfa_object.$content].trim());this[_xfa_object.$content]=isNaN(number)?null:number}[_xfa_object.$toHTML](availableSpace){return valueToHtml(this[_xfa_object.$content]!==null?this[_xfa_object.$content].toString():"")}};__name(_Float,"Float");let Float=_Float;const _Font=class extends _xfa_object.XFAObject{static{__name2(this,"_Font")}constructor(attributes){super(TEMPLATE_NS_ID,"font",!0),this.baselineShift=(0,_utils.getMeasurement)(attributes.baselineShift),this.fontHorizontalScale=(0,_utils.getFloat)({data:attributes.fontHorizontalScale,defaultValue:100,validate:x=>x>=0}),this.fontVerticalScale=(0,_utils.getFloat)({data:attributes.fontVerticalScale,defaultValue:100,validate:x=>x>=0}),this.id=attributes.id||"",this.kerningMode=(0,_utils.getStringOption)(attributes.kerningMode,["none","pair"]),this.letterSpacing=(0,_utils.getMeasurement)(attributes.letterSpacing,"0"),this.lineThrough=(0,_utils.getInteger)({data:attributes.lineThrough,defaultValue:0,validate:x=>x===1||x===2}),this.lineThroughPeriod=(0,_utils.getStringOption)(attributes.lineThroughPeriod,["all","word"]),this.overline=(0,_utils.getInteger)({data:attributes.overline,defaultValue:0,validate:x=>x===1||x===2}),this.overlinePeriod=(0,_utils.getStringOption)(attributes.overlinePeriod,["all","word"]),this.posture=(0,_utils.getStringOption)(attributes.posture,["normal","italic"]),this.size=(0,_utils.getMeasurement)(attributes.size,"10pt"),this.typeface=attributes.typeface||"Courier",this.underline=(0,_utils.getInteger)({data:attributes.underline,defaultValue:0,validate:x=>x===1||x===2}),this.underlinePeriod=(0,_utils.getStringOption)(attributes.underlinePeriod,["all","word"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.weight=(0,_utils.getStringOption)(attributes.weight,["normal","bold"]),this.extras=null,this.fill=null}[_xfa_object.$clean](builder){super[_xfa_object.$clean](builder),this[_xfa_object.$globalData].usedTypefaces.add(this.typeface)}[_xfa_object.$toStyle](){const style=(0,_html_utils.toStyle)(this,"fill"),color=style.color;return color&&(color==="#000000"?delete style.color:color.startsWith("#")||(style.background=color,style.backgroundClip="text",style.color="transparent")),this.baselineShift&&(style.verticalAlign=(0,_html_utils.measureToString)(this.baselineShift)),style.fontKerning=this.kerningMode==="none"?"none":"normal",style.letterSpacing=(0,_html_utils.measureToString)(this.letterSpacing),this.lineThrough!==0&&(style.textDecoration="line-through",this.lineThrough===2&&(style.textDecorationStyle="double")),this.overline!==0&&(style.textDecoration="overline",this.overline===2&&(style.textDecorationStyle="double")),style.fontStyle=this.posture,style.fontSize=(0,_html_utils.measureToString)(.99*this.size),(0,_html_utils.setFontFamily)(this,this,this[_xfa_object.$globalData].fontFinder,style),this.underline!==0&&(style.textDecoration="underline",this.underline===2&&(style.textDecorationStyle="double")),style.fontWeight=this.weight,style}};__name(_Font,"Font");let Font=_Font;const _Format=class extends _xfa_object.XFAObject{static{__name2(this,"_Format")}constructor(attributes){super(TEMPLATE_NS_ID,"format",!0),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null,this.picture=null}};__name(_Format,"Format");let Format=_Format;const _Handler=class extends _xfa_object.StringObject{static{__name2(this,"_Handler")}constructor(attributes){super(TEMPLATE_NS_ID,"handler"),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Handler,"Handler");let Handler=_Handler;const _Hyphenation=class extends _xfa_object.XFAObject{static{__name2(this,"_Hyphenation")}constructor(attributes){super(TEMPLATE_NS_ID,"hyphenation"),this.excludeAllCaps=(0,_utils.getInteger)({data:attributes.excludeAllCaps,defaultValue:0,validate:x=>x===1}),this.excludeInitialCap=(0,_utils.getInteger)({data:attributes.excludeInitialCap,defaultValue:0,validate:x=>x===1}),this.hyphenate=(0,_utils.getInteger)({data:attributes.hyphenate,defaultValue:0,validate:x=>x===1}),this.id=attributes.id||"",this.pushCharacterCount=(0,_utils.getInteger)({data:attributes.pushCharacterCount,defaultValue:3,validate:x=>x>=0}),this.remainCharacterCount=(0,_utils.getInteger)({data:attributes.remainCharacterCount,defaultValue:3,validate:x=>x>=0}),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.wordCharacterCount=(0,_utils.getInteger)({data:attributes.wordCharacterCount,defaultValue:7,validate:x=>x>=0})}};__name(_Hyphenation,"Hyphenation");let Hyphenation=_Hyphenation;const _Image=class extends _xfa_object.StringObject{static{__name2(this,"_Image")}constructor(attributes){super(TEMPLATE_NS_ID,"image"),this.aspect=(0,_utils.getStringOption)(attributes.aspect,["fit","actual","height","none","width"]),this.contentType=attributes.contentType||"",this.href=attributes.href||"",this.id=attributes.id||"",this.name=attributes.name||"",this.transferEncoding=(0,_utils.getStringOption)(attributes.transferEncoding,["base64","none","package"]),this.use=attributes.use||"",this.usehref=attributes.usehref||""}[_xfa_object.$toHTML](){if(this.contentType&&!MIMES.has(this.contentType.toLowerCase()))return _utils.HTMLResult.EMPTY;let buffer=this[_xfa_object.$globalData].images&&this[_xfa_object.$globalData].images.get(this.href);if(!buffer&&(this.href||!this[_xfa_object.$content])||(!buffer&&this.transferEncoding==="base64"&&(buffer=(0,_util2.stringToBytes)(atob(this[_xfa_object.$content]))),!buffer))return _utils.HTMLResult.EMPTY;if(!this.contentType){for(const[header,type]of IMAGES_HEADERS)if(buffer.length>header.length&&header.every((x,i)=>x===buffer[i])){this.contentType=type;break}if(!this.contentType)return _utils.HTMLResult.EMPTY}const blob=new Blob([buffer],{type:this.contentType});let style;switch(this.aspect){case"fit":case"actual":break;case"height":style={height:"100%",objectFit:"fill"};break;case"none":style={width:"100%",height:"100%",objectFit:"fill"};break;case"width":style={width:"100%",objectFit:"fill"};break}const parent=this[_xfa_object.$getParent]();return _utils.HTMLResult.success({name:"img",attributes:{class:["xfaImage"],style,src:URL.createObjectURL(blob),alt:parent?ariaLabel(parent[_xfa_object.$getParent]()):null}})}};__name(_Image,"Image");let Image=_Image;const _ImageEdit=class extends _xfa_object.XFAObject{static{__name2(this,"_ImageEdit")}constructor(attributes){super(TEMPLATE_NS_ID,"imageEdit",!0),this.data=(0,_utils.getStringOption)(attributes.data,["link","embed"]),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.border=null,this.extras=null,this.margin=null}[_xfa_object.$toHTML](availableSpace){return this.data==="embed"?_utils.HTMLResult.success({name:"div",children:[],attributes:{}}):_utils.HTMLResult.EMPTY}};__name(_ImageEdit,"ImageEdit");let ImageEdit=_ImageEdit;const _Integer=class extends _xfa_object.ContentObject{static{__name2(this,"_Integer")}constructor(attributes){super(TEMPLATE_NS_ID,"integer"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}[_xfa_object.$finalize](){const number=parseInt(this[_xfa_object.$content].trim(),10);this[_xfa_object.$content]=isNaN(number)?null:number}[_xfa_object.$toHTML](availableSpace){return valueToHtml(this[_xfa_object.$content]!==null?this[_xfa_object.$content].toString():"")}};__name(_Integer,"Integer");let Integer=_Integer;const _Issuers=class extends _xfa_object.XFAObject{static{__name2(this,"_Issuers")}constructor(attributes){super(TEMPLATE_NS_ID,"issuers",!0),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.certificate=new _xfa_object.XFAObjectArray}};__name(_Issuers,"Issuers");let Issuers=_Issuers;const _Items=class extends _xfa_object.XFAObject{static{__name2(this,"_Items")}constructor(attributes){super(TEMPLATE_NS_ID,"items",!0),this.id=attributes.id||"",this.name=attributes.name||"",this.presence=(0,_utils.getStringOption)(attributes.presence,["visible","hidden","inactive","invisible"]),this.ref=attributes.ref||"",this.save=(0,_utils.getInteger)({data:attributes.save,defaultValue:0,validate:x=>x===1}),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.boolean=new _xfa_object.XFAObjectArray,this.date=new _xfa_object.XFAObjectArray,this.dateTime=new _xfa_object.XFAObjectArray,this.decimal=new _xfa_object.XFAObjectArray,this.exData=new _xfa_object.XFAObjectArray,this.float=new _xfa_object.XFAObjectArray,this.image=new _xfa_object.XFAObjectArray,this.integer=new _xfa_object.XFAObjectArray,this.text=new _xfa_object.XFAObjectArray,this.time=new _xfa_object.XFAObjectArray}[_xfa_object.$toHTML](){const output=[];for(const child of this[_xfa_object.$getChildren]())output.push(child[_xfa_object.$text]());return _utils.HTMLResult.success(output)}};__name(_Items,"Items");let Items=_Items;exports3.Items=Items;const _Keep=class extends _xfa_object.XFAObject{static{__name2(this,"_Keep")}constructor(attributes){super(TEMPLATE_NS_ID,"keep",!0),this.id=attributes.id||"";const options=["none","contentArea","pageArea"];this.intact=(0,_utils.getStringOption)(attributes.intact,options),this.next=(0,_utils.getStringOption)(attributes.next,options),this.previous=(0,_utils.getStringOption)(attributes.previous,options),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null}};__name(_Keep,"Keep");let Keep=_Keep;const _KeyUsage=class extends _xfa_object.XFAObject{static{__name2(this,"_KeyUsage")}constructor(attributes){super(TEMPLATE_NS_ID,"keyUsage");const options=["","yes","no"];this.crlSign=(0,_utils.getStringOption)(attributes.crlSign,options),this.dataEncipherment=(0,_utils.getStringOption)(attributes.dataEncipherment,options),this.decipherOnly=(0,_utils.getStringOption)(attributes.decipherOnly,options),this.digitalSignature=(0,_utils.getStringOption)(attributes.digitalSignature,options),this.encipherOnly=(0,_utils.getStringOption)(attributes.encipherOnly,options),this.id=attributes.id||"",this.keyAgreement=(0,_utils.getStringOption)(attributes.keyAgreement,options),this.keyCertSign=(0,_utils.getStringOption)(attributes.keyCertSign,options),this.keyEncipherment=(0,_utils.getStringOption)(attributes.keyEncipherment,options),this.nonRepudiation=(0,_utils.getStringOption)(attributes.nonRepudiation,options),this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_KeyUsage,"KeyUsage");let KeyUsage=_KeyUsage;const _Line=class extends _xfa_object.XFAObject{static{__name2(this,"_Line")}constructor(attributes){super(TEMPLATE_NS_ID,"line",!0),this.hand=(0,_utils.getStringOption)(attributes.hand,["even","left","right"]),this.id=attributes.id||"",this.slope=(0,_utils.getStringOption)(attributes.slope,["\\","/"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.edge=null}[_xfa_object.$toHTML](){const parent=this[_xfa_object.$getParent]()[_xfa_object.$getParent](),edge=this.edge||new Edge({}),edgeStyle=edge[_xfa_object.$toStyle](),style=Object.create(null),thickness=edge.presence==="visible"?edge.thickness:0;style.strokeWidth=(0,_html_utils.measureToString)(thickness),style.stroke=edgeStyle.color;let x1,y1,x2,y2,width="100%",height="100%";parent.w<=thickness?([x1,y1,x2,y2]=["50%",0,"50%","100%"],width=style.strokeWidth):parent.h<=thickness?([x1,y1,x2,y2]=[0,"50%","100%","50%"],height=style.strokeWidth):this.slope==="\\"?[x1,y1,x2,y2]=[0,0,"100%","100%"]:[x1,y1,x2,y2]=[0,"100%","100%",0];const svg={name:"svg",children:[{name:"line",attributes:{xmlns:SVG_NS,x1,y1,x2,y2,style}}],attributes:{xmlns:SVG_NS,width,height,style:{overflow:"visible"}}};return hasMargin(parent)?_utils.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[svg]}):(svg.attributes.style.position="absolute",_utils.HTMLResult.success(svg))}};__name(_Line,"Line");let Line=_Line;const _Linear=class extends _xfa_object.XFAObject{static{__name2(this,"_Linear")}constructor(attributes){super(TEMPLATE_NS_ID,"linear",!0),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["toRight","toBottom","toLeft","toTop"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.color=null,this.extras=null}[_xfa_object.$toStyle](startColor){startColor=startColor?startColor[_xfa_object.$toStyle]():"#FFFFFF";const transf=this.type.replace(/([RBLT])/," $1").toLowerCase(),endColor=this.color?this.color[_xfa_object.$toStyle]():"#000000";return`linear-gradient(${transf}, ${startColor}, ${endColor})`}};__name(_Linear,"Linear");let Linear=_Linear;const _LockDocument=class extends _xfa_object.ContentObject{static{__name2(this,"_LockDocument")}constructor(attributes){super(TEMPLATE_NS_ID,"lockDocument"),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||""}[_xfa_object.$finalize](){this[_xfa_object.$content]=(0,_utils.getStringOption)(this[_xfa_object.$content],["auto","0","1"])}};__name(_LockDocument,"LockDocument");let LockDocument=_LockDocument;const _Manifest=class extends _xfa_object.XFAObject{static{__name2(this,"_Manifest")}constructor(attributes){super(TEMPLATE_NS_ID,"manifest",!0),this.action=(0,_utils.getStringOption)(attributes.action,["include","all","exclude"]),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null,this.ref=new _xfa_object.XFAObjectArray}};__name(_Manifest,"Manifest");let Manifest=_Manifest;const _Margin=class extends _xfa_object.XFAObject{static{__name2(this,"_Margin")}constructor(attributes){super(TEMPLATE_NS_ID,"margin",!0),this.bottomInset=(0,_utils.getMeasurement)(attributes.bottomInset,"0"),this.id=attributes.id||"",this.leftInset=(0,_utils.getMeasurement)(attributes.leftInset,"0"),this.rightInset=(0,_utils.getMeasurement)(attributes.rightInset,"0"),this.topInset=(0,_utils.getMeasurement)(attributes.topInset,"0"),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null}[_xfa_object.$toStyle](){return{margin:(0,_html_utils.measureToString)(this.topInset)+" "+(0,_html_utils.measureToString)(this.rightInset)+" "+(0,_html_utils.measureToString)(this.bottomInset)+" "+(0,_html_utils.measureToString)(this.leftInset)}}};__name(_Margin,"Margin");let Margin=_Margin;const _Mdp=class extends _xfa_object.XFAObject{static{__name2(this,"_Mdp")}constructor(attributes){super(TEMPLATE_NS_ID,"mdp"),this.id=attributes.id||"",this.permissions=(0,_utils.getInteger)({data:attributes.permissions,defaultValue:2,validate:x=>x===1||x===3}),this.signatureType=(0,_utils.getStringOption)(attributes.signatureType,["filler","author"]),this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Mdp,"Mdp");let Mdp=_Mdp;const _Medium=class extends _xfa_object.XFAObject{static{__name2(this,"_Medium")}constructor(attributes){super(TEMPLATE_NS_ID,"medium"),this.id=attributes.id||"",this.imagingBBox=(0,_utils.getBBox)(attributes.imagingBBox),this.long=(0,_utils.getMeasurement)(attributes.long),this.orientation=(0,_utils.getStringOption)(attributes.orientation,["portrait","landscape"]),this.short=(0,_utils.getMeasurement)(attributes.short),this.stock=attributes.stock||"",this.trayIn=(0,_utils.getStringOption)(attributes.trayIn,["auto","delegate","pageFront"]),this.trayOut=(0,_utils.getStringOption)(attributes.trayOut,["auto","delegate"]),this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Medium,"Medium");let Medium=_Medium;const _Message=class extends _xfa_object.XFAObject{static{__name2(this,"_Message")}constructor(attributes){super(TEMPLATE_NS_ID,"message",!0),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.text=new _xfa_object.XFAObjectArray}};__name(_Message,"Message");let Message=_Message;const _NumericEdit=class extends _xfa_object.XFAObject{static{__name2(this,"_NumericEdit")}constructor(attributes){super(TEMPLATE_NS_ID,"numericEdit",!0),this.hScrollPolicy=(0,_utils.getStringOption)(attributes.hScrollPolicy,["auto","off","on"]),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[_xfa_object.$toHTML](availableSpace){const style=(0,_html_utils.toStyle)(this,"border","font","margin"),field=this[_xfa_object.$getParent]()[_xfa_object.$getParent](),html={name:"input",attributes:{type:"text",fieldId:field[_xfa_object.$uid],dataId:field[_xfa_object.$data]&&field[_xfa_object.$data][_xfa_object.$uid]||field[_xfa_object.$uid],class:["xfaTextfield"],style,"aria-label":ariaLabel(field),"aria-required":!1}};return isRequired(field)&&(html.attributes["aria-required"]=!0,html.attributes.required=!0),_utils.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[html]})}};__name(_NumericEdit,"NumericEdit");let NumericEdit=_NumericEdit;const _Occur=class extends _xfa_object.XFAObject{static{__name2(this,"_Occur")}constructor(attributes){super(TEMPLATE_NS_ID,"occur",!0),this.id=attributes.id||"",this.initial=attributes.initial!==""?(0,_utils.getInteger)({data:attributes.initial,defaultValue:"",validate:x=>!0}):"",this.max=attributes.max!==""?(0,_utils.getInteger)({data:attributes.max,defaultValue:1,validate:x=>!0}):"",this.min=attributes.min!==""?(0,_utils.getInteger)({data:attributes.min,defaultValue:1,validate:x=>!0}):"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null}[_xfa_object.$clean](){const parent=this[_xfa_object.$getParent](),originalMin=this.min;this.min===""&&(this.min=parent instanceof PageArea||parent instanceof PageSet?0:1),this.max===""&&(originalMin===""?this.max=parent instanceof PageArea||parent instanceof PageSet?-1:1:this.max=this.min),this.max!==-1&&this.max<this.min&&(this.max=this.min),this.initial===""&&(this.initial=parent instanceof Template?1:this.min)}};__name(_Occur,"Occur");let Occur=_Occur;const _Oid=class extends _xfa_object.StringObject{static{__name2(this,"_Oid")}constructor(attributes){super(TEMPLATE_NS_ID,"oid"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Oid,"Oid");let Oid=_Oid;const _Oids=class extends _xfa_object.XFAObject{static{__name2(this,"_Oids")}constructor(attributes){super(TEMPLATE_NS_ID,"oids",!0),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.oid=new _xfa_object.XFAObjectArray}};__name(_Oids,"Oids");let Oids=_Oids;const _Overflow=class extends _xfa_object.XFAObject{static{__name2(this,"_Overflow")}constructor(attributes){super(TEMPLATE_NS_ID,"overflow"),this.id=attributes.id||"",this.leader=attributes.leader||"",this.target=attributes.target||"",this.trailer=attributes.trailer||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}[_xfa_object.$getExtra](){if(!this[_xfa_object.$extra]){const parent=this[_xfa_object.$getParent](),root=this[_xfa_object.$getTemplateRoot](),target=root[_xfa_object.$searchNode](this.target,parent),leader=root[_xfa_object.$searchNode](this.leader,parent),trailer=root[_xfa_object.$searchNode](this.trailer,parent);this[_xfa_object.$extra]={target:target&&target[0]||null,leader:leader&&leader[0]||null,trailer:trailer&&trailer[0]||null,addLeader:!1,addTrailer:!1}}return this[_xfa_object.$extra]}};__name(_Overflow,"Overflow");let Overflow=_Overflow;const _PageArea=class extends _xfa_object.XFAObject{static{__name2(this,"_PageArea")}constructor(attributes){super(TEMPLATE_NS_ID,"pageArea",!0),this.blankOrNotBlank=(0,_utils.getStringOption)(attributes.blankOrNotBlank,["any","blank","notBlank"]),this.id=attributes.id||"",this.initialNumber=(0,_utils.getInteger)({data:attributes.initialNumber,defaultValue:1,validate:x=>!0}),this.name=attributes.name||"",this.numbered=(0,_utils.getInteger)({data:attributes.numbered,defaultValue:1,validate:x=>!0}),this.oddOrEven=(0,_utils.getStringOption)(attributes.oddOrEven,["any","even","odd"]),this.pagePosition=(0,_utils.getStringOption)(attributes.pagePosition,["any","first","last","only","rest"]),this.relevant=(0,_utils.getRelevant)(attributes.relevant),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.desc=null,this.extras=null,this.medium=null,this.occur=null,this.area=new _xfa_object.XFAObjectArray,this.contentArea=new _xfa_object.XFAObjectArray,this.draw=new _xfa_object.XFAObjectArray,this.exclGroup=new _xfa_object.XFAObjectArray,this.field=new _xfa_object.XFAObjectArray,this.subform=new _xfa_object.XFAObjectArray}[_xfa_object.$isUsable](){return this[_xfa_object.$extra]?!this.occur||this.occur.max===-1||this[_xfa_object.$extra].numberOfUse<this.occur.max:(this[_xfa_object.$extra]={numberOfUse:0},!0)}[_xfa_object.$cleanPage](){delete this[_xfa_object.$extra]}[_xfa_object.$getNextPage](){this[_xfa_object.$extra]||(this[_xfa_object.$extra]={numberOfUse:0});const parent=this[_xfa_object.$getParent]();return parent.relation==="orderedOccurrence"&&this[_xfa_object.$isUsable]()?(this[_xfa_object.$extra].numberOfUse+=1,this):parent[_xfa_object.$getNextPage]()}[_xfa_object.$getAvailableSpace](){return this[_xfa_object.$extra].space||{width:0,height:0}}[_xfa_object.$toHTML](){this[_xfa_object.$extra]||(this[_xfa_object.$extra]={numberOfUse:1});const children=[];this[_xfa_object.$extra].children=children;const style=Object.create(null);if(this.medium&&this.medium.short&&this.medium.long){if(style.width=(0,_html_utils.measureToString)(this.medium.short),style.height=(0,_html_utils.measureToString)(this.medium.long),this[_xfa_object.$extra].space={width:this.medium.short,height:this.medium.long},this.medium.orientation==="landscape"){const x=style.width;style.width=style.height,style.height=x,this[_xfa_object.$extra].space={width:this.medium.long,height:this.medium.short}}}else(0,_util2.warn)("XFA - No medium specified in pageArea: please file a bug.");return this[_xfa_object.$childrenToHTML]({filter:new Set(["area","draw","field","subform"]),include:!0}),this[_xfa_object.$childrenToHTML]({filter:new Set(["contentArea"]),include:!0}),_utils.HTMLResult.success({name:"div",children,attributes:{class:["xfaPage"],id:this[_xfa_object.$uid],style,xfaName:this.name}})}};__name(_PageArea,"PageArea");let PageArea=_PageArea;const _PageSet=class _PageSet2 extends _xfa_object.XFAObject{static{__name2(this,"_PageSet")}constructor(attributes){super(TEMPLATE_NS_ID,"pageSet",!0),this.duplexImposition=(0,_utils.getStringOption)(attributes.duplexImposition,["longEdge","shortEdge"]),this.id=attributes.id||"",this.name=attributes.name||"",this.relation=(0,_utils.getStringOption)(attributes.relation,["orderedOccurrence","duplexPaginated","simplexPaginated"]),this.relevant=(0,_utils.getRelevant)(attributes.relevant),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null,this.occur=null,this.pageArea=new _xfa_object.XFAObjectArray,this.pageSet=new _xfa_object.XFAObjectArray}[_xfa_object.$cleanPage](){for(const page of this.pageArea.children)page[_xfa_object.$cleanPage]();for(const page of this.pageSet.children)page[_xfa_object.$cleanPage]()}[_xfa_object.$isUsable](){return!this.occur||this.occur.max===-1||this[_xfa_object.$extra].numberOfUse<this.occur.max}[_xfa_object.$getNextPage](){if(this[_xfa_object.$extra]||(this[_xfa_object.$extra]={numberOfUse:1,pageIndex:-1,pageSetIndex:-1}),this.relation==="orderedOccurrence"){if(this[_xfa_object.$extra].pageIndex+1<this.pageArea.children.length)return this[_xfa_object.$extra].pageIndex+=1,this.pageArea.children[this[_xfa_object.$extra].pageIndex][_xfa_object.$getNextPage]();if(this[_xfa_object.$extra].pageSetIndex+1<this.pageSet.children.length)return this[_xfa_object.$extra].pageSetIndex+=1,this.pageSet.children[this[_xfa_object.$extra].pageSetIndex][_xfa_object.$getNextPage]();if(this[_xfa_object.$isUsable]())return this[_xfa_object.$extra].numberOfUse+=1,this[_xfa_object.$extra].pageIndex=-1,this[_xfa_object.$extra].pageSetIndex=-1,this[_xfa_object.$getNextPage]();const parent=this[_xfa_object.$getParent]();return parent instanceof _PageSet2?parent[_xfa_object.$getNextPage]():(this[_xfa_object.$cleanPage](),this[_xfa_object.$getNextPage]())}const pageNumber=this[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].pageNumber,parity=pageNumber%2===0?"even":"odd",position=pageNumber===0?"first":"rest";let page=this.pageArea.children.find(p=>p.oddOrEven===parity&&p.pagePosition===position);return page||(page=this.pageArea.children.find(p=>p.oddOrEven==="any"&&p.pagePosition===position),page)||(page=this.pageArea.children.find(p=>p.oddOrEven==="any"&&p.pagePosition==="any"),page)?page:this.pageArea.children[0]}};__name(_PageSet,"PageSet");let PageSet=_PageSet;const _Para=class extends _xfa_object.XFAObject{static{__name2(this,"_Para")}constructor(attributes){super(TEMPLATE_NS_ID,"para",!0),this.hAlign=(0,_utils.getStringOption)(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=attributes.id||"",this.lineHeight=attributes.lineHeight?(0,_utils.getMeasurement)(attributes.lineHeight,"0pt"):"",this.marginLeft=attributes.marginLeft?(0,_utils.getMeasurement)(attributes.marginLeft,"0pt"):"",this.marginRight=attributes.marginRight?(0,_utils.getMeasurement)(attributes.marginRight,"0pt"):"",this.orphans=(0,_utils.getInteger)({data:attributes.orphans,defaultValue:0,validate:x=>x>=0}),this.preserve=attributes.preserve||"",this.radixOffset=attributes.radixOffset?(0,_utils.getMeasurement)(attributes.radixOffset,"0pt"):"",this.spaceAbove=attributes.spaceAbove?(0,_utils.getMeasurement)(attributes.spaceAbove,"0pt"):"",this.spaceBelow=attributes.spaceBelow?(0,_utils.getMeasurement)(attributes.spaceBelow,"0pt"):"",this.tabDefault=attributes.tabDefault?(0,_utils.getMeasurement)(this.tabDefault):"",this.tabStops=(attributes.tabStops||"").trim().split(/\s+/).map((x,i)=>i%2===1?(0,_utils.getMeasurement)(x):x),this.textIndent=attributes.textIndent?(0,_utils.getMeasurement)(attributes.textIndent,"0pt"):"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.vAlign=(0,_utils.getStringOption)(attributes.vAlign,["top","bottom","middle"]),this.widows=(0,_utils.getInteger)({data:attributes.widows,defaultValue:0,validate:x=>x>=0}),this.hyphenation=null}[_xfa_object.$toStyle](){const style=(0,_html_utils.toStyle)(this,"hAlign");return this.marginLeft!==""&&(style.paddingLeft=(0,_html_utils.measureToString)(this.marginLeft)),this.marginRight!==""&&(style.paddingight=(0,_html_utils.measureToString)(this.marginRight)),this.spaceAbove!==""&&(style.paddingTop=(0,_html_utils.measureToString)(this.spaceAbove)),this.spaceBelow!==""&&(style.paddingBottom=(0,_html_utils.measureToString)(this.spaceBelow)),this.textIndent!==""&&(style.textIndent=(0,_html_utils.measureToString)(this.textIndent),(0,_html_utils.fixTextIndent)(style)),this.lineHeight>0&&(style.lineHeight=(0,_html_utils.measureToString)(this.lineHeight)),this.tabDefault!==""&&(style.tabSize=(0,_html_utils.measureToString)(this.tabDefault)),this.tabStops.length>0,this.hyphenatation&&Object.assign(style,this.hyphenatation[_xfa_object.$toStyle]()),style}};__name(_Para,"Para");let Para=_Para;const _PasswordEdit=class extends _xfa_object.XFAObject{static{__name2(this,"_PasswordEdit")}constructor(attributes){super(TEMPLATE_NS_ID,"passwordEdit",!0),this.hScrollPolicy=(0,_utils.getStringOption)(attributes.hScrollPolicy,["auto","off","on"]),this.id=attributes.id||"",this.passwordChar=attributes.passwordChar||"*",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.border=null,this.extras=null,this.margin=null}};__name(_PasswordEdit,"PasswordEdit");let PasswordEdit=_PasswordEdit;const _Pattern=class extends _xfa_object.XFAObject{static{__name2(this,"_Pattern")}constructor(attributes){super(TEMPLATE_NS_ID,"pattern",!0),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["crossHatch","crossDiagonal","diagonalLeft","diagonalRight","horizontal","vertical"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.color=null,this.extras=null}[_xfa_object.$toStyle](startColor){startColor=startColor?startColor[_xfa_object.$toStyle]():"#FFFFFF";const endColor=this.color?this.color[_xfa_object.$toStyle]():"#000000",width=5,cmd="repeating-linear-gradient",colors=`${startColor},${startColor} ${width}px,${endColor} ${width}px,${endColor} ${2*width}px`;switch(this.type){case"crossHatch":return`${cmd}(to top,${colors}) ${cmd}(to right,${colors})`;case"crossDiagonal":return`${cmd}(45deg,${colors}) ${cmd}(-45deg,${colors})`;case"diagonalLeft":return`${cmd}(45deg,${colors})`;case"diagonalRight":return`${cmd}(-45deg,${colors})`;case"horizontal":return`${cmd}(to top,${colors})`;case"vertical":return`${cmd}(to right,${colors})`}return""}};__name(_Pattern,"Pattern");let Pattern=_Pattern;const _Picture=class extends _xfa_object.StringObject{static{__name2(this,"_Picture")}constructor(attributes){super(TEMPLATE_NS_ID,"picture"),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Picture,"Picture");let Picture=_Picture;const _Proto=class extends _xfa_object.XFAObject{static{__name2(this,"_Proto")}constructor(attributes){super(TEMPLATE_NS_ID,"proto",!0),this.appearanceFilter=new _xfa_object.XFAObjectArray,this.arc=new _xfa_object.XFAObjectArray,this.area=new _xfa_object.XFAObjectArray,this.assist=new _xfa_object.XFAObjectArray,this.barcode=new _xfa_object.XFAObjectArray,this.bindItems=new _xfa_object.XFAObjectArray,this.bookend=new _xfa_object.XFAObjectArray,this.boolean=new _xfa_object.XFAObjectArray,this.border=new _xfa_object.XFAObjectArray,this.break=new _xfa_object.XFAObjectArray,this.breakAfter=new _xfa_object.XFAObjectArray,this.breakBefore=new _xfa_object.XFAObjectArray,this.button=new _xfa_object.XFAObjectArray,this.calculate=new _xfa_object.XFAObjectArray,this.caption=new _xfa_object.XFAObjectArray,this.certificate=new _xfa_object.XFAObjectArray,this.certificates=new _xfa_object.XFAObjectArray,this.checkButton=new _xfa_object.XFAObjectArray,this.choiceList=new _xfa_object.XFAObjectArray,this.color=new _xfa_object.XFAObjectArray,this.comb=new _xfa_object.XFAObjectArray,this.connect=new _xfa_object.XFAObjectArray,this.contentArea=new _xfa_object.XFAObjectArray,this.corner=new _xfa_object.XFAObjectArray,this.date=new _xfa_object.XFAObjectArray,this.dateTime=new _xfa_object.XFAObjectArray,this.dateTimeEdit=new _xfa_object.XFAObjectArray,this.decimal=new _xfa_object.XFAObjectArray,this.defaultUi=new _xfa_object.XFAObjectArray,this.desc=new _xfa_object.XFAObjectArray,this.digestMethod=new _xfa_object.XFAObjectArray,this.digestMethods=new _xfa_object.XFAObjectArray,this.draw=new _xfa_object.XFAObjectArray,this.edge=new _xfa_object.XFAObjectArray,this.encoding=new _xfa_object.XFAObjectArray,this.encodings=new _xfa_object.XFAObjectArray,this.encrypt=new _xfa_object.XFAObjectArray,this.encryptData=new _xfa_object.XFAObjectArray,this.encryption=new _xfa_object.XFAObjectArray,this.encryptionMethod=new _xfa_object.XFAObjectArray,this.encryptionMethods=new _xfa_object.XFAObjectArray,this.event=new _xfa_object.XFAObjectArray,this.exData=new _xfa_object.XFAObjectArray,this.exObject=new _xfa_object.XFAObjectArray,this.exclGroup=new _xfa_object.XFAObjectArray,this.execute=new _xfa_object.XFAObjectArray,this.extras=new _xfa_object.XFAObjectArray,this.field=new _xfa_object.XFAObjectArray,this.fill=new _xfa_object.XFAObjectArray,this.filter=new _xfa_object.XFAObjectArray,this.float=new _xfa_object.XFAObjectArray,this.font=new _xfa_object.XFAObjectArray,this.format=new _xfa_object.XFAObjectArray,this.handler=new _xfa_object.XFAObjectArray,this.hyphenation=new _xfa_object.XFAObjectArray,this.image=new _xfa_object.XFAObjectArray,this.imageEdit=new _xfa_object.XFAObjectArray,this.integer=new _xfa_object.XFAObjectArray,this.issuers=new _xfa_object.XFAObjectArray,this.items=new _xfa_object.XFAObjectArray,this.keep=new _xfa_object.XFAObjectArray,this.keyUsage=new _xfa_object.XFAObjectArray,this.line=new _xfa_object.XFAObjectArray,this.linear=new _xfa_object.XFAObjectArray,this.lockDocument=new _xfa_object.XFAObjectArray,this.manifest=new _xfa_object.XFAObjectArray,this.margin=new _xfa_object.XFAObjectArray,this.mdp=new _xfa_object.XFAObjectArray,this.medium=new _xfa_object.XFAObjectArray,this.message=new _xfa_object.XFAObjectArray,this.numericEdit=new _xfa_object.XFAObjectArray,this.occur=new _xfa_object.XFAObjectArray,this.oid=new _xfa_object.XFAObjectArray,this.oids=new _xfa_object.XFAObjectArray,this.overflow=new _xfa_object.XFAObjectArray,this.pageArea=new _xfa_object.XFAObjectArray,this.pageSet=new _xfa_object.XFAObjectArray,this.para=new _xfa_object.XFAObjectArray,this.passwordEdit=new _xfa_object.XFAObjectArray,this.pattern=new _xfa_object.XFAObjectArray,this.picture=new _xfa_object.XFAObjectArray,this.radial=new _xfa_object.XFAObjectArray,this.reason=new _xfa_object.XFAObjectArray,this.reasons=new _xfa_object.XFAObjectArray,this.rectangle=new _xfa_object.XFAObjectArray,this.ref=new _xfa_object.XFAObjectArray,this.script=new _xfa_object.XFAObjectArray,this.setProperty=new _xfa_object.XFAObjectArray,this.signData=new _xfa_object.XFAObjectArray,this.signature=new _xfa_object.XFAObjectArray,this.signing=new _xfa_object.XFAObjectArray,this.solid=new _xfa_object.XFAObjectArray,this.speak=new _xfa_object.XFAObjectArray,this.stipple=new _xfa_object.XFAObjectArray,this.subform=new _xfa_object.XFAObjectArray,this.subformSet=new _xfa_object.XFAObjectArray,this.subjectDN=new _xfa_object.XFAObjectArray,this.subjectDNs=new _xfa_object.XFAObjectArray,this.submit=new _xfa_object.XFAObjectArray,this.text=new _xfa_object.XFAObjectArray,this.textEdit=new _xfa_object.XFAObjectArray,this.time=new _xfa_object.XFAObjectArray,this.timeStamp=new _xfa_object.XFAObjectArray,this.toolTip=new _xfa_object.XFAObjectArray,this.traversal=new _xfa_object.XFAObjectArray,this.traverse=new _xfa_object.XFAObjectArray,this.ui=new _xfa_object.XFAObjectArray,this.validate=new _xfa_object.XFAObjectArray,this.value=new _xfa_object.XFAObjectArray,this.variables=new _xfa_object.XFAObjectArray}};__name(_Proto,"Proto");let Proto=_Proto;const _Radial=class extends _xfa_object.XFAObject{static{__name2(this,"_Radial")}constructor(attributes){super(TEMPLATE_NS_ID,"radial",!0),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["toEdge","toCenter"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.color=null,this.extras=null}[_xfa_object.$toStyle](startColor){startColor=startColor?startColor[_xfa_object.$toStyle]():"#FFFFFF";const endColor=this.color?this.color[_xfa_object.$toStyle]():"#000000";return`radial-gradient(circle at center, ${this.type==="toEdge"?`${startColor},${endColor}`:`${endColor},${startColor}`})`}};__name(_Radial,"Radial");let Radial=_Radial;const _Reason=class extends _xfa_object.StringObject{static{__name2(this,"_Reason")}constructor(attributes){super(TEMPLATE_NS_ID,"reason"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Reason,"Reason");let Reason=_Reason;const _Reasons=class extends _xfa_object.XFAObject{static{__name2(this,"_Reasons")}constructor(attributes){super(TEMPLATE_NS_ID,"reasons",!0),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.reason=new _xfa_object.XFAObjectArray}};__name(_Reasons,"Reasons");let Reasons=_Reasons;const _Rectangle=class extends _xfa_object.XFAObject{static{__name2(this,"_Rectangle")}constructor(attributes){super(TEMPLATE_NS_ID,"rectangle",!0),this.hand=(0,_utils.getStringOption)(attributes.hand,["even","left","right"]),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.corner=new _xfa_object.XFAObjectArray(4),this.edge=new _xfa_object.XFAObjectArray(4),this.fill=null}[_xfa_object.$toHTML](){const edge=this.edge.children.length?this.edge.children[0]:new Edge({}),edgeStyle=edge[_xfa_object.$toStyle](),style=Object.create(null);this.fill&&this.fill.presence==="visible"?Object.assign(style,this.fill[_xfa_object.$toStyle]()):style.fill="transparent",style.strokeWidth=(0,_html_utils.measureToString)(edge.presence==="visible"?edge.thickness:0),style.stroke=edgeStyle.color;const cornerStyle=(this.corner.children.length?this.corner.children[0]:new Corner({}))[_xfa_object.$toStyle](),svg={name:"svg",children:[{name:"rect",attributes:{xmlns:SVG_NS,width:"100%",height:"100%",x:0,y:0,rx:cornerStyle.radius,ry:cornerStyle.radius,style}}],attributes:{xmlns:SVG_NS,style:{overflow:"visible"},width:"100%",height:"100%"}},parent=this[_xfa_object.$getParent]()[_xfa_object.$getParent]();return hasMargin(parent)?_utils.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[svg]}):(svg.attributes.style.position="absolute",_utils.HTMLResult.success(svg))}};__name(_Rectangle,"Rectangle");let Rectangle=_Rectangle;const _RefElement=class extends _xfa_object.StringObject{static{__name2(this,"_RefElement")}constructor(attributes){super(TEMPLATE_NS_ID,"ref"),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_RefElement,"RefElement");let RefElement=_RefElement;const _Script=class extends _xfa_object.StringObject{static{__name2(this,"_Script")}constructor(attributes){super(TEMPLATE_NS_ID,"script"),this.binding=attributes.binding||"",this.contentType=attributes.contentType||"",this.id=attributes.id||"",this.name=attributes.name||"",this.runAt=(0,_utils.getStringOption)(attributes.runAt,["client","both","server"]),this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Script,"Script");let Script=_Script;const _SetProperty=class extends _xfa_object.XFAObject{static{__name2(this,"_SetProperty")}constructor(attributes){super(TEMPLATE_NS_ID,"setProperty"),this.connection=attributes.connection||"",this.ref=attributes.ref||"",this.target=attributes.target||""}};__name(_SetProperty,"SetProperty");let SetProperty=_SetProperty;exports3.SetProperty=SetProperty;const _SignData=class extends _xfa_object.XFAObject{static{__name2(this,"_SignData")}constructor(attributes){super(TEMPLATE_NS_ID,"signData",!0),this.id=attributes.id||"",this.operation=(0,_utils.getStringOption)(attributes.operation,["sign","clear","verify"]),this.ref=attributes.ref||"",this.target=attributes.target||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.filter=null,this.manifest=null}};__name(_SignData,"SignData");let SignData=_SignData;const _Signature=class extends _xfa_object.XFAObject{static{__name2(this,"_Signature")}constructor(attributes){super(TEMPLATE_NS_ID,"signature",!0),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["PDF1.3","PDF1.6"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.border=null,this.extras=null,this.filter=null,this.manifest=null,this.margin=null}};__name(_Signature,"Signature");let Signature=_Signature;const _Signing=class extends _xfa_object.XFAObject{static{__name2(this,"_Signing")}constructor(attributes){super(TEMPLATE_NS_ID,"signing",!0),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.certificate=new _xfa_object.XFAObjectArray}};__name(_Signing,"Signing");let Signing=_Signing;const _Solid=class extends _xfa_object.XFAObject{static{__name2(this,"_Solid")}constructor(attributes){super(TEMPLATE_NS_ID,"solid",!0),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null}[_xfa_object.$toStyle](startColor){return startColor?startColor[_xfa_object.$toStyle]():"#FFFFFF"}};__name(_Solid,"Solid");let Solid=_Solid;const _Speak=class extends _xfa_object.StringObject{static{__name2(this,"_Speak")}constructor(attributes){super(TEMPLATE_NS_ID,"speak"),this.disable=(0,_utils.getInteger)({data:attributes.disable,defaultValue:0,validate:x=>x===1}),this.id=attributes.id||"",this.priority=(0,_utils.getStringOption)(attributes.priority,["custom","caption","name","toolTip"]),this.rid=attributes.rid||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Speak,"Speak");let Speak=_Speak;const _Stipple=class extends _xfa_object.XFAObject{static{__name2(this,"_Stipple")}constructor(attributes){super(TEMPLATE_NS_ID,"stipple",!0),this.id=attributes.id||"",this.rate=(0,_utils.getInteger)({data:attributes.rate,defaultValue:50,validate:x=>x>=0&&x<=100}),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.color=null,this.extras=null}[_xfa_object.$toStyle](bgColor){const alpha=this.rate/100;return _util2.Util.makeHexColor(Math.round(bgColor.value.r*(1-alpha)+this.value.r*alpha),Math.round(bgColor.value.g*(1-alpha)+this.value.g*alpha),Math.round(bgColor.value.b*(1-alpha)+this.value.b*alpha))}};__name(_Stipple,"Stipple");let Stipple=_Stipple;const _Subform=class extends _xfa_object.XFAObject{static{__name2(this,"_Subform")}constructor(attributes){super(TEMPLATE_NS_ID,"subform",!0),this.access=(0,_utils.getStringOption)(attributes.access,["open","nonInteractive","protected","readOnly"]),this.allowMacro=(0,_utils.getInteger)({data:attributes.allowMacro,defaultValue:0,validate:x=>x===1}),this.anchorType=(0,_utils.getStringOption)(attributes.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,_utils.getInteger)({data:attributes.colSpan,defaultValue:1,validate:n=>n>=1||n===-1}),this.columnWidths=(attributes.columnWidths||"").trim().split(/\s+/).map(x=>x==="-1"?-1:(0,_utils.getMeasurement)(x)),this.h=attributes.h?(0,_utils.getMeasurement)(attributes.h):"",this.hAlign=(0,_utils.getStringOption)(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=attributes.id||"",this.layout=(0,_utils.getStringOption)(attributes.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.locale=attributes.locale||"",this.maxH=(0,_utils.getMeasurement)(attributes.maxH,"0pt"),this.maxW=(0,_utils.getMeasurement)(attributes.maxW,"0pt"),this.mergeMode=(0,_utils.getStringOption)(attributes.mergeMode,["consumeData","matchTemplate"]),this.minH=(0,_utils.getMeasurement)(attributes.minH,"0pt"),this.minW=(0,_utils.getMeasurement)(attributes.minW,"0pt"),this.name=attributes.name||"",this.presence=(0,_utils.getStringOption)(attributes.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,_utils.getRelevant)(attributes.relevant),this.restoreState=(0,_utils.getStringOption)(attributes.restoreState,["manual","auto"]),this.scope=(0,_utils.getStringOption)(attributes.scope,["name","none"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.w=attributes.w?(0,_utils.getMeasurement)(attributes.w):"",this.x=(0,_utils.getMeasurement)(attributes.x,"0pt"),this.y=(0,_utils.getMeasurement)(attributes.y,"0pt"),this.assist=null,this.bind=null,this.bookend=null,this.border=null,this.break=null,this.calculate=null,this.desc=null,this.extras=null,this.keep=null,this.margin=null,this.occur=null,this.overflow=null,this.pageSet=null,this.para=null,this.traversal=null,this.validate=null,this.variables=null,this.area=new _xfa_object.XFAObjectArray,this.breakAfter=new _xfa_object.XFAObjectArray,this.breakBefore=new _xfa_object.XFAObjectArray,this.connect=new _xfa_object.XFAObjectArray,this.draw=new _xfa_object.XFAObjectArray,this.event=new _xfa_object.XFAObjectArray,this.exObject=new _xfa_object.XFAObjectArray,this.exclGroup=new _xfa_object.XFAObjectArray,this.field=new _xfa_object.XFAObjectArray,this.proto=new _xfa_object.XFAObjectArray,this.setProperty=new _xfa_object.XFAObjectArray,this.subform=new _xfa_object.XFAObjectArray,this.subformSet=new _xfa_object.XFAObjectArray}[_xfa_object.$getSubformParent](){const parent=this[_xfa_object.$getParent]();return parent instanceof SubformSet?parent[_xfa_object.$getSubformParent]():parent}[_xfa_object.$isBindable](){return!0}[_xfa_object.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&this[_xfa_object.$extra].attempt===0&&this[_xfa_object.$extra].numberInLine>0||this[_xfa_object.$getParent]()[_xfa_object.$isThereMoreWidth]()}*[_xfa_object.$getContainedChildren](){yield*getContainedChildren(this)}[_xfa_object.$flushHTML](){return(0,_layout.flushHTML)(this)}[_xfa_object.$addHTML](html,bbox){(0,_layout.addHTML)(this,html,bbox)}[_xfa_object.$getAvailableSpace](){return(0,_layout.getAvailableSpace)(this)}[_xfa_object.$isSplittable](){const parent=this[_xfa_object.$getSubformParent]();return parent[_xfa_object.$isSplittable]()?this[_xfa_object.$extra]._isSplittable!==void 0?this[_xfa_object.$extra]._isSplittable:this.layout==="position"||this.layout.includes("row")?(this[_xfa_object.$extra]._isSplittable=!1,!1):this.keep&&this.keep.intact!=="none"?(this[_xfa_object.$extra]._isSplittable=!1,!1):parent.layout&&parent.layout.endsWith("-tb")&&parent[_xfa_object.$extra].numberInLine!==0?!1:(this[_xfa_object.$extra]._isSplittable=!0,!0):!1}[_xfa_object.$toHTML](availableSpace){if(setTabIndex(this),this.break){if(this.break.after!=="auto"||this.break.afterTarget!==""){const node=new BreakAfter({targetType:this.break.after,target:this.break.afterTarget,startNew:this.break.startNew.toString()});node[_xfa_object.$globalData]=this[_xfa_object.$globalData],this[_xfa_object.$appendChild](node),this.breakAfter.push(node)}if(this.break.before!=="auto"||this.break.beforeTarget!==""){const node=new BreakBefore({targetType:this.break.before,target:this.break.beforeTarget,startNew:this.break.startNew.toString()});node[_xfa_object.$globalData]=this[_xfa_object.$globalData],this[_xfa_object.$appendChild](node),this.breakBefore.push(node)}if(this.break.overflowTarget!==""){const node=new Overflow({target:this.break.overflowTarget,leader:this.break.overflowLeader,trailer:this.break.overflowTrailer});node[_xfa_object.$globalData]=this[_xfa_object.$globalData],this[_xfa_object.$appendChild](node),this.overflow.push(node)}this[_xfa_object.$removeChild](this.break),this.break=null}if(this.presence==="hidden"||this.presence==="inactive")return _utils.HTMLResult.EMPTY;if((this.breakBefore.children.length>1||this.breakAfter.children.length>1)&&(0,_util2.warn)("XFA - Several breakBefore or breakAfter in subforms: please file a bug."),this.breakBefore.children.length>=1){const breakBefore=this.breakBefore.children[0];if(handleBreak(breakBefore))return _utils.HTMLResult.breakNode(breakBefore)}if(this[_xfa_object.$extra]&&this[_xfa_object.$extra].afterBreakAfter)return _utils.HTMLResult.EMPTY;(0,_html_utils.fixDimensions)(this);const children=[],attributes={id:this[_xfa_object.$uid],class:[]};(0,_html_utils.setAccess)(this,attributes.class),this[_xfa_object.$extra]||(this[_xfa_object.$extra]=Object.create(null)),Object.assign(this[_xfa_object.$extra],{children,line:null,attributes,attempt:0,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,availableSpace.width),height:Math.min(this.h||1/0,availableSpace.height)},width:0,height:0,prevHeight:0,currentWidth:0});const root=this[_xfa_object.$getTemplateRoot](),savedNoLayoutFailure=root[_xfa_object.$extra].noLayoutFailure,isSplittable=this[_xfa_object.$isSplittable]();if(isSplittable||setFirstUnsplittable(this),!(0,_layout.checkDimensions)(this,availableSpace))return _utils.HTMLResult.FAILURE;const filter2=new Set(["area","draw","exclGroup","field","subform","subformSet"]);if(this.layout.includes("row")){const columnWidths=this[_xfa_object.$getSubformParent]().columnWidths;Array.isArray(columnWidths)&&columnWidths.length>0&&(this[_xfa_object.$extra].columnWidths=columnWidths,this[_xfa_object.$extra].currentColumn=0)}const style=(0,_html_utils.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),classNames=["xfaSubform"],cl=(0,_html_utils.layoutClass)(this);if(cl&&classNames.push(cl),attributes.style=style,attributes.class=classNames,this.name&&(attributes.xfaName=this.name),this.overflow){const overflowExtra=this.overflow[_xfa_object.$getExtra]();overflowExtra.addLeader&&(overflowExtra.addLeader=!1,handleOverflow(this,overflowExtra.leader,availableSpace))}this[_xfa_object.$pushPara]();const isLrTb=this.layout==="lr-tb"||this.layout==="rl-tb",maxRun=isLrTb?MAX_ATTEMPTS_FOR_LRTB_LAYOUT:1;for(;this[_xfa_object.$extra].attempt<maxRun;this[_xfa_object.$extra].attempt++){isLrTb&&this[_xfa_object.$extra].attempt===MAX_ATTEMPTS_FOR_LRTB_LAYOUT-1&&(this[_xfa_object.$extra].numberInLine=0);const result2=this[_xfa_object.$childrenToHTML]({filter:filter2,include:!0});if(result2.success)break;if(result2.isBreak())return this[_xfa_object.$popPara](),result2;if(isLrTb&&this[_xfa_object.$extra].attempt===0&&this[_xfa_object.$extra].numberInLine===0&&!root[_xfa_object.$extra].noLayoutFailure){this[_xfa_object.$extra].attempt=maxRun;break}}if(this[_xfa_object.$popPara](),isSplittable||unsetFirstUnsplittable(this),root[_xfa_object.$extra].noLayoutFailure=savedNoLayoutFailure,this[_xfa_object.$extra].attempt===maxRun)return this.overflow&&(this[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].overflowNode=this.overflow),isSplittable||delete this[_xfa_object.$extra],_utils.HTMLResult.FAILURE;if(this.overflow){const overflowExtra=this.overflow[_xfa_object.$getExtra]();overflowExtra.addTrailer&&(overflowExtra.addTrailer=!1,handleOverflow(this,overflowExtra.trailer,availableSpace))}let marginH=0,marginV=0;this.margin&&(marginH=this.margin.leftInset+this.margin.rightInset,marginV=this.margin.topInset+this.margin.bottomInset);const width=Math.max(this[_xfa_object.$extra].width+marginH,this.w||0),height=Math.max(this[_xfa_object.$extra].height+marginV,this.h||0),bbox=[this.x,this.y,width,height];if(this.w===""&&(style.width=(0,_html_utils.measureToString)(width)),this.h===""&&(style.height=(0,_html_utils.measureToString)(height)),(style.width==="0px"||style.height==="0px")&&children.length===0)return _utils.HTMLResult.EMPTY;const html={name:"div",attributes,children};applyAssist(this,attributes);const result=_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,html),bbox);if(this.breakAfter.children.length>=1){const breakAfter=this.breakAfter.children[0];if(handleBreak(breakAfter))return this[_xfa_object.$extra].afterBreakAfter=result,_utils.HTMLResult.breakNode(breakAfter)}return delete this[_xfa_object.$extra],result}};__name(_Subform,"Subform");let Subform=_Subform;const _SubformSet=class extends _xfa_object.XFAObject{static{__name2(this,"_SubformSet")}constructor(attributes){super(TEMPLATE_NS_ID,"subformSet",!0),this.id=attributes.id||"",this.name=attributes.name||"",this.relation=(0,_utils.getStringOption)(attributes.relation,["ordered","choice","unordered"]),this.relevant=(0,_utils.getRelevant)(attributes.relevant),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.bookend=null,this.break=null,this.desc=null,this.extras=null,this.occur=null,this.overflow=null,this.breakAfter=new _xfa_object.XFAObjectArray,this.breakBefore=new _xfa_object.XFAObjectArray,this.subform=new _xfa_object.XFAObjectArray,this.subformSet=new _xfa_object.XFAObjectArray}*[_xfa_object.$getContainedChildren](){yield*getContainedChildren(this)}[_xfa_object.$getSubformParent](){let parent=this[_xfa_object.$getParent]();for(;!(parent instanceof Subform);)parent=parent[_xfa_object.$getParent]();return parent}[_xfa_object.$isBindable](){return!0}};__name(_SubformSet,"SubformSet");let SubformSet=_SubformSet;const _SubjectDN=class extends _xfa_object.ContentObject{static{__name2(this,"_SubjectDN")}constructor(attributes){super(TEMPLATE_NS_ID,"subjectDN"),this.delimiter=attributes.delimiter||",",this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}[_xfa_object.$finalize](){this[_xfa_object.$content]=new Map(this[_xfa_object.$content].split(this.delimiter).map(kv=>(kv=kv.split("=",2),kv[0]=kv[0].trim(),kv)))}};__name(_SubjectDN,"SubjectDN");let SubjectDN=_SubjectDN;const _SubjectDNs=class extends _xfa_object.XFAObject{static{__name2(this,"_SubjectDNs")}constructor(attributes){super(TEMPLATE_NS_ID,"subjectDNs",!0),this.id=attributes.id||"",this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.subjectDN=new _xfa_object.XFAObjectArray}};__name(_SubjectDNs,"SubjectDNs");let SubjectDNs=_SubjectDNs;const _Submit=class extends _xfa_object.XFAObject{static{__name2(this,"_Submit")}constructor(attributes){super(TEMPLATE_NS_ID,"submit",!0),this.embedPDF=(0,_utils.getInteger)({data:attributes.embedPDF,defaultValue:0,validate:x=>x===1}),this.format=(0,_utils.getStringOption)(attributes.format,["xdp","formdata","pdf","urlencoded","xfd","xml"]),this.id=attributes.id||"",this.target=attributes.target||"",this.textEncoding=(0,_utils.getKeyword)({data:attributes.textEncoding?attributes.textEncoding.toLowerCase():"",defaultValue:"",validate:k=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(k)||k.match(/iso-8859-\d{2}/)}),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.xdpContent=attributes.xdpContent||"",this.encrypt=null,this.encryptData=new _xfa_object.XFAObjectArray,this.signData=new _xfa_object.XFAObjectArray}};__name(_Submit,"Submit");let Submit=_Submit;const _Template=class extends _xfa_object.XFAObject{static{__name2(this,"_Template")}constructor(attributes){super(TEMPLATE_NS_ID,"template",!0),this.baseProfile=(0,_utils.getStringOption)(attributes.baseProfile,["full","interactiveForms"]),this.extras=null,this.subform=new _xfa_object.XFAObjectArray}[_xfa_object.$finalize](){this.subform.children.length===0&&(0,_util2.warn)("XFA - No subforms in template node."),this.subform.children.length>=2&&(0,_util2.warn)("XFA - Several subforms in template node: please file a bug."),this[_xfa_object.$tabIndex]=DEFAULT_TAB_INDEX}[_xfa_object.$isSplittable](){return!0}[_xfa_object.$searchNode](expr,container){return expr.startsWith("#")?[this[_xfa_object.$ids].get(expr.slice(1))]:(0,_som.searchNode)(this,container,expr,!0,!0)}*[_xfa_object.$toPages](){if(!this.subform.children.length)return _utils.HTMLResult.success({name:"div",children:[]});this[_xfa_object.$extra]={overflowNode:null,firstUnsplittable:null,currentContentArea:null,currentPageArea:null,noLayoutFailure:!1,pageNumber:1,pagePosition:"first",oddOrEven:"odd",blankOrNotBlank:"nonBlank",paraStack:[]};const root=this.subform.children[0];root.pageSet[_xfa_object.$cleanPage]();const pageAreas=root.pageSet.pageArea.children,mainHtml={name:"div",children:[]};let pageArea=null,breakBefore=null,breakBeforeTarget=null;if(root.breakBefore.children.length>=1?(breakBefore=root.breakBefore.children[0],breakBeforeTarget=breakBefore.target):root.subform.children.length>=1&&root.subform.children[0].breakBefore.children.length>=1?(breakBefore=root.subform.children[0].breakBefore.children[0],breakBeforeTarget=breakBefore.target):root.break&&root.break.beforeTarget?(breakBefore=root.break,breakBeforeTarget=breakBefore.beforeTarget):root.subform.children.length>=1&&root.subform.children[0].break&&root.subform.children[0].break.beforeTarget&&(breakBefore=root.subform.children[0].break,breakBeforeTarget=breakBefore.beforeTarget),breakBefore){const target=this[_xfa_object.$searchNode](breakBeforeTarget,breakBefore[_xfa_object.$getParent]());target instanceof PageArea&&(pageArea=target,breakBefore[_xfa_object.$extra]={})}pageArea||(pageArea=pageAreas[0]),pageArea[_xfa_object.$extra]={numberOfUse:1};const pageAreaParent=pageArea[_xfa_object.$getParent]();pageAreaParent[_xfa_object.$extra]={numberOfUse:1,pageIndex:pageAreaParent.pageArea.children.indexOf(pageArea),pageSetIndex:0};let targetPageArea,leader=null,trailer=null,hasSomething=!0,hasSomethingCounter=0,startIndex=0;for(;;){if(hasSomething)hasSomethingCounter=0;else if(mainHtml.children.pop(),++hasSomethingCounter===MAX_EMPTY_PAGES)return(0,_util2.warn)("XFA - Something goes wrong: please file a bug."),mainHtml;targetPageArea=null,this[_xfa_object.$extra].currentPageArea=pageArea;const page=pageArea[_xfa_object.$toHTML]().html;mainHtml.children.push(page),leader&&(this[_xfa_object.$extra].noLayoutFailure=!0,page.children.push(leader[_xfa_object.$toHTML](pageArea[_xfa_object.$extra].space).html),leader=null),trailer&&(this[_xfa_object.$extra].noLayoutFailure=!0,page.children.push(trailer[_xfa_object.$toHTML](pageArea[_xfa_object.$extra].space).html),trailer=null);const contentAreas=pageArea.contentArea.children,htmlContentAreas=page.children.filter(node=>node.attributes.class.includes("xfaContentarea"));hasSomething=!1,this[_xfa_object.$extra].firstUnsplittable=null,this[_xfa_object.$extra].noLayoutFailure=!1;const flush=__name(index=>{const html=root[_xfa_object.$flushHTML]();html&&(hasSomething=hasSomething||html.children&&html.children.length!==0,htmlContentAreas[index].children.push(html))},"flush");for(let i=startIndex,ii=contentAreas.length;i<ii;i++){const contentArea=this[_xfa_object.$extra].currentContentArea=contentAreas[i],space={width:contentArea.w,height:contentArea.h};startIndex=0,leader&&(htmlContentAreas[i].children.push(leader[_xfa_object.$toHTML](space).html),leader=null),trailer&&(htmlContentAreas[i].children.push(trailer[_xfa_object.$toHTML](space).html),trailer=null);const html=root[_xfa_object.$toHTML](space);if(html.success)return html.html?(hasSomething=hasSomething||html.html.children&&html.html.children.length!==0,htmlContentAreas[i].children.push(html.html)):!hasSomething&&mainHtml.children.length>1&&mainHtml.children.pop(),mainHtml;if(html.isBreak()){const node=html.breakNode;if(flush(i),node.targetType==="auto")continue;node.leader&&(leader=this[_xfa_object.$searchNode](node.leader,node[_xfa_object.$getParent]()),leader=leader?leader[0]:null),node.trailer&&(trailer=this[_xfa_object.$searchNode](node.trailer,node[_xfa_object.$getParent]()),trailer=trailer?trailer[0]:null),node.targetType==="pageArea"?(targetPageArea=node[_xfa_object.$extra].target,i=1/0):node[_xfa_object.$extra].target?(targetPageArea=node[_xfa_object.$extra].target,startIndex=node[_xfa_object.$extra].index+1,i=1/0):i=node[_xfa_object.$extra].index;continue}if(this[_xfa_object.$extra].overflowNode){const node=this[_xfa_object.$extra].overflowNode;this[_xfa_object.$extra].overflowNode=null;const overflowExtra=node[_xfa_object.$getExtra](),target=overflowExtra.target;overflowExtra.addLeader=overflowExtra.leader!==null,overflowExtra.addTrailer=overflowExtra.trailer!==null,flush(i);const currentIndex=i;if(i=1/0,target instanceof PageArea)targetPageArea=target;else if(target instanceof ContentArea){const index=contentAreas.indexOf(target);index!==-1?index>currentIndex?i=index-1:startIndex=index:(targetPageArea=target[_xfa_object.$getParent](),startIndex=targetPageArea.contentArea.children.indexOf(target))}continue}flush(i)}this[_xfa_object.$extra].pageNumber+=1,targetPageArea&&(targetPageArea[_xfa_object.$isUsable]()?targetPageArea[_xfa_object.$extra].numberOfUse+=1:targetPageArea=null),pageArea=targetPageArea||pageArea[_xfa_object.$getNextPage](),yield null}}};__name(_Template,"Template");let Template=_Template;exports3.Template=Template;const _Text=class extends _xfa_object.ContentObject{static{__name2(this,"_Text")}constructor(attributes){super(TEMPLATE_NS_ID,"text"),this.id=attributes.id||"",this.maxChars=(0,_utils.getInteger)({data:attributes.maxChars,defaultValue:0,validate:x=>x>=0}),this.name=attributes.name||"",this.rid=attributes.rid||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}[_xfa_object.$acceptWhitespace](){return!0}[_xfa_object.$onChild](child){return child[_xfa_object.$namespaceId]===_namespaces.NamespaceIds.xhtml.id?(this[_xfa_object.$content]=child,!0):((0,_util2.warn)(`XFA - Invalid content in Text: ${child[_xfa_object.$nodeName]}.`),!1)}[_xfa_object.$onText](str){this[_xfa_object.$content]instanceof _xfa_object.XFAObject||super[_xfa_object.$onText](str)}[_xfa_object.$finalize](){typeof this[_xfa_object.$content]=="string"&&(this[_xfa_object.$content]=this[_xfa_object.$content].replace(/\r\n/g,`
`))}[_xfa_object.$getExtra](){return typeof this[_xfa_object.$content]=="string"?this[_xfa_object.$content].split(/[\u2029\u2028\n]/).reduce((acc,line)=>(line&&acc.push(line),acc),[]).join(`
`):this[_xfa_object.$content][_xfa_object.$text]()}[_xfa_object.$toHTML](availableSpace){if(typeof this[_xfa_object.$content]=="string"){const html=valueToHtml(this[_xfa_object.$content]).html;return this[_xfa_object.$content].includes("\u2029")?(html.name="div",html.children=[],this[_xfa_object.$content].split("\u2029").map(para=>para.split(/[\u2028\n]/).reduce((acc,line)=>(acc.push({name:"span",value:line},{name:"br"}),acc),[])).forEach(lines=>{html.children.push({name:"p",children:lines})})):/[\u2028\n]/.test(this[_xfa_object.$content])&&(html.name="div",html.children=[],this[_xfa_object.$content].split(/[\u2028\n]/).forEach(line=>{html.children.push({name:"span",value:line},{name:"br"})})),_utils.HTMLResult.success(html)}return this[_xfa_object.$content][_xfa_object.$toHTML](availableSpace)}};__name(_Text,"Text");let Text=_Text;exports3.Text=Text;const _TextEdit=class extends _xfa_object.XFAObject{static{__name2(this,"_TextEdit")}constructor(attributes){super(TEMPLATE_NS_ID,"textEdit",!0),this.allowRichText=(0,_utils.getInteger)({data:attributes.allowRichText,defaultValue:0,validate:x=>x===1}),this.hScrollPolicy=(0,_utils.getStringOption)(attributes.hScrollPolicy,["auto","off","on"]),this.id=attributes.id||"",this.multiLine=(0,_utils.getInteger)({data:attributes.multiLine,defaultValue:"",validate:x=>x===0||x===1}),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.vScrollPolicy=(0,_utils.getStringOption)(attributes.vScrollPolicy,["auto","off","on"]),this.border=null,this.comb=null,this.extras=null,this.margin=null}[_xfa_object.$toHTML](availableSpace){const style=(0,_html_utils.toStyle)(this,"border","font","margin");let html;const field=this[_xfa_object.$getParent]()[_xfa_object.$getParent]();return this.multiLine===""&&(this.multiLine=field instanceof Draw?1:0),this.multiLine===1?html={name:"textarea",attributes:{dataId:field[_xfa_object.$data]&&field[_xfa_object.$data][_xfa_object.$uid]||field[_xfa_object.$uid],fieldId:field[_xfa_object.$uid],class:["xfaTextfield"],style,"aria-label":ariaLabel(field),"aria-required":!1}}:html={name:"input",attributes:{type:"text",dataId:field[_xfa_object.$data]&&field[_xfa_object.$data][_xfa_object.$uid]||field[_xfa_object.$uid],fieldId:field[_xfa_object.$uid],class:["xfaTextfield"],style,"aria-label":ariaLabel(field),"aria-required":!1}},isRequired(field)&&(html.attributes["aria-required"]=!0,html.attributes.required=!0),_utils.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[html]})}};__name(_TextEdit,"TextEdit");let TextEdit=_TextEdit;const _Time=class extends _xfa_object.StringObject{static{__name2(this,"_Time")}constructor(attributes){super(TEMPLATE_NS_ID,"time"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}[_xfa_object.$finalize](){const date=this[_xfa_object.$content].trim();this[_xfa_object.$content]=date?new Date(date):null}[_xfa_object.$toHTML](availableSpace){return valueToHtml(this[_xfa_object.$content]?this[_xfa_object.$content].toString():"")}};__name(_Time,"Time");let Time=_Time;const _TimeStamp=class extends _xfa_object.XFAObject{static{__name2(this,"_TimeStamp")}constructor(attributes){super(TEMPLATE_NS_ID,"timeStamp"),this.id=attributes.id||"",this.server=attributes.server||"",this.type=(0,_utils.getStringOption)(attributes.type,["optional","required"]),this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_TimeStamp,"TimeStamp");let TimeStamp=_TimeStamp;const _ToolTip=class extends _xfa_object.StringObject{static{__name2(this,"_ToolTip")}constructor(attributes){super(TEMPLATE_NS_ID,"toolTip"),this.id=attributes.id||"",this.rid=attributes.rid||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_ToolTip,"ToolTip");let ToolTip=_ToolTip;const _Traversal=class extends _xfa_object.XFAObject{static{__name2(this,"_Traversal")}constructor(attributes){super(TEMPLATE_NS_ID,"traversal",!0),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null,this.traverse=new _xfa_object.XFAObjectArray}};__name(_Traversal,"Traversal");let Traversal=_Traversal;const _Traverse=class extends _xfa_object.XFAObject{static{__name2(this,"_Traverse")}constructor(attributes){super(TEMPLATE_NS_ID,"traverse",!0),this.id=attributes.id||"",this.operation=(0,_utils.getStringOption)(attributes.operation,["next","back","down","first","left","right","up"]),this.ref=attributes.ref||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null,this.script=null}get name(){return this.operation}[_xfa_object.$isTransparent](){return!1}};__name(_Traverse,"Traverse");let Traverse=_Traverse;const _Ui=class extends _xfa_object.XFAObject{static{__name2(this,"_Ui")}constructor(attributes){super(TEMPLATE_NS_ID,"ui",!0),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null,this.picture=null,this.barcode=null,this.button=null,this.checkButton=null,this.choiceList=null,this.dateTimeEdit=null,this.defaultUi=null,this.imageEdit=null,this.numericEdit=null,this.passwordEdit=null,this.signature=null,this.textEdit=null}[_xfa_object.$getExtra](){if(this[_xfa_object.$extra]===void 0){for(const name of Object.getOwnPropertyNames(this)){if(name==="extras"||name==="picture")continue;const obj=this[name];if(obj instanceof _xfa_object.XFAObject)return this[_xfa_object.$extra]=obj,obj}this[_xfa_object.$extra]=null}return this[_xfa_object.$extra]}[_xfa_object.$toHTML](availableSpace){const obj=this[_xfa_object.$getExtra]();return obj?obj[_xfa_object.$toHTML](availableSpace):_utils.HTMLResult.EMPTY}};__name(_Ui,"Ui");let Ui=_Ui;const _Validate=class extends _xfa_object.XFAObject{static{__name2(this,"_Validate")}constructor(attributes){super(TEMPLATE_NS_ID,"validate",!0),this.formatTest=(0,_utils.getStringOption)(attributes.formatTest,["warning","disabled","error"]),this.id=attributes.id||"",this.nullTest=(0,_utils.getStringOption)(attributes.nullTest,["disabled","error","warning"]),this.scriptTest=(0,_utils.getStringOption)(attributes.scriptTest,["error","disabled","warning"]),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.extras=null,this.message=null,this.picture=null,this.script=null}};__name(_Validate,"Validate");let Validate=_Validate;const _Value=class extends _xfa_object.XFAObject{static{__name2(this,"_Value")}constructor(attributes){super(TEMPLATE_NS_ID,"value",!0),this.id=attributes.id||"",this.override=(0,_utils.getInteger)({data:attributes.override,defaultValue:0,validate:x=>x===1}),this.relevant=(0,_utils.getRelevant)(attributes.relevant),this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.arc=null,this.boolean=null,this.date=null,this.dateTime=null,this.decimal=null,this.exData=null,this.float=null,this.image=null,this.integer=null,this.line=null,this.rectangle=null,this.text=null,this.time=null}[_xfa_object.$setValue](value){const parent=this[_xfa_object.$getParent]();if(parent instanceof Field&&parent.ui&&parent.ui.imageEdit){this.image||(this.image=new Image({}),this[_xfa_object.$appendChild](this.image)),this.image[_xfa_object.$content]=value[_xfa_object.$content];return}const valueName=value[_xfa_object.$nodeName];if(this[valueName]!==null){this[valueName][_xfa_object.$content]=value[_xfa_object.$content];return}for(const name of Object.getOwnPropertyNames(this)){const obj=this[name];obj instanceof _xfa_object.XFAObject&&(this[name]=null,this[_xfa_object.$removeChild](obj))}this[value[_xfa_object.$nodeName]]=value,this[_xfa_object.$appendChild](value)}[_xfa_object.$text](){if(this.exData)return typeof this.exData[_xfa_object.$content]=="string"?this.exData[_xfa_object.$content].trim():this.exData[_xfa_object.$content][_xfa_object.$text]().trim();for(const name of Object.getOwnPropertyNames(this)){if(name==="image")continue;const obj=this[name];if(obj instanceof _xfa_object.XFAObject)return(obj[_xfa_object.$content]||"").toString().trim()}return null}[_xfa_object.$toHTML](availableSpace){for(const name of Object.getOwnPropertyNames(this)){const obj=this[name];if(obj instanceof _xfa_object.XFAObject)return obj[_xfa_object.$toHTML](availableSpace)}return _utils.HTMLResult.EMPTY}};__name(_Value,"Value");let Value=_Value;exports3.Value=Value;const _Variables=class extends _xfa_object.XFAObject{static{__name2(this,"_Variables")}constructor(attributes){super(TEMPLATE_NS_ID,"variables",!0),this.id=attributes.id||"",this.use=attributes.use||"",this.usehref=attributes.usehref||"",this.boolean=new _xfa_object.XFAObjectArray,this.date=new _xfa_object.XFAObjectArray,this.dateTime=new _xfa_object.XFAObjectArray,this.decimal=new _xfa_object.XFAObjectArray,this.exData=new _xfa_object.XFAObjectArray,this.float=new _xfa_object.XFAObjectArray,this.image=new _xfa_object.XFAObjectArray,this.integer=new _xfa_object.XFAObjectArray,this.manifest=new _xfa_object.XFAObjectArray,this.script=new _xfa_object.XFAObjectArray,this.text=new _xfa_object.XFAObjectArray,this.time=new _xfa_object.XFAObjectArray}[_xfa_object.$isTransparent](){return!0}};__name(_Variables,"Variables");let Variables=_Variables;const _TemplateNamespace=class _TemplateNamespace2{static{__name2(this,"_TemplateNamespace")}static[_namespaces.$buildXFAObject](name,attributes){if(_TemplateNamespace2.hasOwnProperty(name)){const node=_TemplateNamespace2[name](attributes);return node[_xfa_object.$setSetAttributes](attributes),node}}static appearanceFilter(attrs){return new AppearanceFilter(attrs)}static arc(attrs){return new Arc(attrs)}static area(attrs){return new Area(attrs)}static assist(attrs){return new Assist(attrs)}static barcode(attrs){return new Barcode(attrs)}static bind(attrs){return new Bind(attrs)}static bindItems(attrs){return new BindItems(attrs)}static bookend(attrs){return new Bookend(attrs)}static boolean(attrs){return new BooleanElement(attrs)}static border(attrs){return new Border(attrs)}static break(attrs){return new Break(attrs)}static breakAfter(attrs){return new BreakAfter(attrs)}static breakBefore(attrs){return new BreakBefore(attrs)}static button(attrs){return new Button(attrs)}static calculate(attrs){return new Calculate(attrs)}static caption(attrs){return new Caption(attrs)}static certificate(attrs){return new Certificate(attrs)}static certificates(attrs){return new Certificates(attrs)}static checkButton(attrs){return new CheckButton(attrs)}static choiceList(attrs){return new ChoiceList(attrs)}static color(attrs){return new Color(attrs)}static comb(attrs){return new Comb(attrs)}static connect(attrs){return new Connect(attrs)}static contentArea(attrs){return new ContentArea(attrs)}static corner(attrs){return new Corner(attrs)}static date(attrs){return new DateElement(attrs)}static dateTime(attrs){return new DateTime(attrs)}static dateTimeEdit(attrs){return new DateTimeEdit(attrs)}static decimal(attrs){return new Decimal(attrs)}static defaultUi(attrs){return new DefaultUi(attrs)}static desc(attrs){return new Desc(attrs)}static digestMethod(attrs){return new DigestMethod(attrs)}static digestMethods(attrs){return new DigestMethods(attrs)}static draw(attrs){return new Draw(attrs)}static edge(attrs){return new Edge(attrs)}static encoding(attrs){return new Encoding(attrs)}static encodings(attrs){return new Encodings(attrs)}static encrypt(attrs){return new Encrypt(attrs)}static encryptData(attrs){return new EncryptData(attrs)}static encryption(attrs){return new Encryption(attrs)}static encryptionMethod(attrs){return new EncryptionMethod(attrs)}static encryptionMethods(attrs){return new EncryptionMethods(attrs)}static event(attrs){return new Event2(attrs)}static exData(attrs){return new ExData(attrs)}static exObject(attrs){return new ExObject(attrs)}static exclGroup(attrs){return new ExclGroup(attrs)}static execute(attrs){return new Execute(attrs)}static extras(attrs){return new Extras(attrs)}static field(attrs){return new Field(attrs)}static fill(attrs){return new Fill(attrs)}static filter(attrs){return new Filter(attrs)}static float(attrs){return new Float(attrs)}static font(attrs){return new Font(attrs)}static format(attrs){return new Format(attrs)}static handler(attrs){return new Handler(attrs)}static hyphenation(attrs){return new Hyphenation(attrs)}static image(attrs){return new Image(attrs)}static imageEdit(attrs){return new ImageEdit(attrs)}static integer(attrs){return new Integer(attrs)}static issuers(attrs){return new Issuers(attrs)}static items(attrs){return new Items(attrs)}static keep(attrs){return new Keep(attrs)}static keyUsage(attrs){return new KeyUsage(attrs)}static line(attrs){return new Line(attrs)}static linear(attrs){return new Linear(attrs)}static lockDocument(attrs){return new LockDocument(attrs)}static manifest(attrs){return new Manifest(attrs)}static margin(attrs){return new Margin(attrs)}static mdp(attrs){return new Mdp(attrs)}static medium(attrs){return new Medium(attrs)}static message(attrs){return new Message(attrs)}static numericEdit(attrs){return new NumericEdit(attrs)}static occur(attrs){return new Occur(attrs)}static oid(attrs){return new Oid(attrs)}static oids(attrs){return new Oids(attrs)}static overflow(attrs){return new Overflow(attrs)}static pageArea(attrs){return new PageArea(attrs)}static pageSet(attrs){return new PageSet(attrs)}static para(attrs){return new Para(attrs)}static passwordEdit(attrs){return new PasswordEdit(attrs)}static pattern(attrs){return new Pattern(attrs)}static picture(attrs){return new Picture(attrs)}static proto(attrs){return new Proto(attrs)}static radial(attrs){return new Radial(attrs)}static reason(attrs){return new Reason(attrs)}static reasons(attrs){return new Reasons(attrs)}static rectangle(attrs){return new Rectangle(attrs)}static ref(attrs){return new RefElement(attrs)}static script(attrs){return new Script(attrs)}static setProperty(attrs){return new SetProperty(attrs)}static signData(attrs){return new SignData(attrs)}static signature(attrs){return new Signature(attrs)}static signing(attrs){return new Signing(attrs)}static solid(attrs){return new Solid(attrs)}static speak(attrs){return new Speak(attrs)}static stipple(attrs){return new Stipple(attrs)}static subform(attrs){return new Subform(attrs)}static subformSet(attrs){return new SubformSet(attrs)}static subjectDN(attrs){return new SubjectDN(attrs)}static subjectDNs(attrs){return new SubjectDNs(attrs)}static submit(attrs){return new Submit(attrs)}static template(attrs){return new Template(attrs)}static text(attrs){return new Text(attrs)}static textEdit(attrs){return new TextEdit(attrs)}static time(attrs){return new Time(attrs)}static timeStamp(attrs){return new TimeStamp(attrs)}static toolTip(attrs){return new ToolTip(attrs)}static traversal(attrs){return new Traversal(attrs)}static traverse(attrs){return new Traverse(attrs)}static ui(attrs){return new Ui(attrs)}static validate(attrs){return new Validate(attrs)}static value(attrs){return new Value(attrs)}static variables(attrs){return new Variables(attrs)}};__name(_TemplateNamespace,"TemplateNamespace");let TemplateNamespace=_TemplateNamespace;exports3.TemplateNamespace=TemplateNamespace},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.addHTML=addHTML,exports3.checkDimensions=checkDimensions,exports3.flushHTML=flushHTML,exports3.getAvailableSpace=getAvailableSpace;var _xfa_object=__w_pdfjs_require__3(77),_html_utils=__w_pdfjs_require__3(84);function createLine(node,children){return{name:"div",attributes:{class:[node.layout==="lr-tb"?"xfaLr":"xfaRl"]},children}}__name2(createLine,"createLine"),__name(createLine,"createLine");function flushHTML(node){if(!node[_xfa_object.$extra])return null;const html={name:"div",attributes:node[_xfa_object.$extra].attributes,children:node[_xfa_object.$extra].children};if(node[_xfa_object.$extra].failingNode){const htmlFromFailing=node[_xfa_object.$extra].failingNode[_xfa_object.$flushHTML]();htmlFromFailing&&(node.layout.endsWith("-tb")?html.children.push(createLine(node,[htmlFromFailing])):html.children.push(htmlFromFailing))}return html.children.length===0?null:html}__name2(flushHTML,"flushHTML"),__name(flushHTML,"flushHTML");function addHTML(node,html,bbox){const extra=node[_xfa_object.$extra],availableSpace=extra.availableSpace,[x,y,w,h]=bbox;switch(node.layout){case"position":{extra.width=Math.max(extra.width,x+w),extra.height=Math.max(extra.height,y+h),extra.children.push(html);break}case"lr-tb":case"rl-tb":(!extra.line||extra.attempt===1)&&(extra.line=createLine(node,[]),extra.children.push(extra.line),extra.numberInLine=0),extra.numberInLine+=1,extra.line.children.push(html),extra.attempt===0?(extra.currentWidth+=w,extra.height=Math.max(extra.height,extra.prevHeight+h)):(extra.currentWidth=w,extra.prevHeight=extra.height,extra.height+=h,extra.attempt=0),extra.width=Math.max(extra.width,extra.currentWidth);break;case"rl-row":case"row":{extra.children.push(html),extra.width+=w,extra.height=Math.max(extra.height,h);const height=(0,_html_utils.measureToString)(extra.height);for(const child of extra.children)child.attributes.style.height=height;break}case"table":{extra.width=Math.min(availableSpace.width,Math.max(extra.width,w)),extra.height+=h,extra.children.push(html);break}case"tb":{extra.width=Math.min(availableSpace.width,Math.max(extra.width,w)),extra.height+=h,extra.children.push(html);break}}}__name2(addHTML,"addHTML"),__name(addHTML,"addHTML");function getAvailableSpace(node){const availableSpace=node[_xfa_object.$extra].availableSpace,marginV=node.margin?node.margin.topInset+node.margin.bottomInset:0,marginH=node.margin?node.margin.leftInset+node.margin.rightInset:0;switch(node.layout){case"lr-tb":case"rl-tb":return node[_xfa_object.$extra].attempt===0?{width:availableSpace.width-marginH-node[_xfa_object.$extra].currentWidth,height:availableSpace.height-marginV-node[_xfa_object.$extra].prevHeight}:{width:availableSpace.width-marginH,height:availableSpace.height-marginV-node[_xfa_object.$extra].height};case"rl-row":case"row":return{width:node[_xfa_object.$extra].columnWidths.slice(node[_xfa_object.$extra].currentColumn).reduce((a,x)=>a+x),height:availableSpace.height-marginH};case"table":case"tb":return{width:availableSpace.width-marginH,height:availableSpace.height-marginV-node[_xfa_object.$extra].height};case"position":default:return availableSpace}}__name2(getAvailableSpace,"getAvailableSpace"),__name(getAvailableSpace,"getAvailableSpace");function getTransformedBBox(node){let w=node.w===""?NaN:node.w,h=node.h===""?NaN:node.h,[centerX,centerY]=[0,0];switch(node.anchorType||""){case"bottomCenter":[centerX,centerY]=[w/2,h];break;case"bottomLeft":[centerX,centerY]=[0,h];break;case"bottomRight":[centerX,centerY]=[w,h];break;case"middleCenter":[centerX,centerY]=[w/2,h/2];break;case"middleLeft":[centerX,centerY]=[0,h/2];break;case"middleRight":[centerX,centerY]=[w,h/2];break;case"topCenter":[centerX,centerY]=[w/2,0];break;case"topRight":[centerX,centerY]=[w,0];break}let x,y;switch(node.rotate||0){case 0:[x,y]=[-centerX,-centerY];break;case 90:[x,y]=[-centerY,centerX],[w,h]=[h,-w];break;case 180:[x,y]=[centerX,centerY],[w,h]=[-w,-h];break;case 270:[x,y]=[centerY,-centerX],[w,h]=[-h,w];break}return[node.x+x+Math.min(0,w),node.y+y+Math.min(0,h),Math.abs(w),Math.abs(h)]}__name2(getTransformedBBox,"getTransformedBBox"),__name(getTransformedBBox,"getTransformedBBox");function checkDimensions(node,space){if(node[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].firstUnsplittable===null||node.w===0||node.h===0)return!0;const ERROR=2,parent=node[_xfa_object.$getSubformParent](),attempt=parent[_xfa_object.$extra]&&parent[_xfa_object.$extra].attempt||0,[,y,w,h]=getTransformedBBox(node);switch(parent.layout){case"lr-tb":case"rl-tb":return attempt===0?node[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].noLayoutFailure?node.w!==""?Math.round(w-space.width)<=ERROR:space.width>ERROR:node.h!==""&&Math.round(h-space.height)>ERROR?!1:node.w!==""?Math.round(w-space.width)<=ERROR?!0:parent[_xfa_object.$extra].numberInLine===0?space.height>ERROR:!1:space.width>ERROR:node[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].noLayoutFailure?!0:node.h!==""&&Math.round(h-space.height)>ERROR?!1:node.w===""||Math.round(w-space.width)<=ERROR?space.height>ERROR:parent[_xfa_object.$isThereMoreWidth]()?!1:space.height>ERROR;case"table":case"tb":return node[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].noLayoutFailure?!0:node.h!==""&&!node[_xfa_object.$isSplittable]()?Math.round(h-space.height)<=ERROR:node.w===""||Math.round(w-space.width)<=ERROR?space.height>ERROR:parent[_xfa_object.$isThereMoreWidth]()?!1:space.height>ERROR;case"position":if(node[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].noLayoutFailure||node.h===""||Math.round(h+y-space.height)<=ERROR)return!0;const area=node[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].currentContentArea;return h+y>area.h;case"rl-row":case"row":return node[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].noLayoutFailure?!0:node.h!==""?Math.round(h-space.height)<=ERROR:!0;default:return!0}}__name2(checkDimensions,"checkDimensions"),__name(checkDimensions,"checkDimensions")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.computeBbox=computeBbox,exports3.createWrapper=createWrapper,exports3.fixDimensions=fixDimensions,exports3.fixTextIndent=fixTextIndent,exports3.fixURL=fixURL,exports3.isPrintOnly=isPrintOnly,exports3.layoutClass=layoutClass,exports3.layoutNode=layoutNode,exports3.measureToString=measureToString,exports3.setAccess=setAccess,exports3.setFontFamily=setFontFamily,exports3.setMinMaxDimensions=setMinMaxDimensions,exports3.setPara=setPara,exports3.toStyle=toStyle;var _xfa_object=__w_pdfjs_require__3(77),_util2=__w_pdfjs_require__3(2),_utils=__w_pdfjs_require__3(78),_fonts=__w_pdfjs_require__3(85),_text=__w_pdfjs_require__3(86);function measureToString(m){return typeof m=="string"?"0px":Number.isInteger(m)?`${m}px`:`${m.toFixed(2)}px`}__name2(measureToString,"measureToString"),__name(measureToString,"measureToString");const converters={anchorType(node,style){const parent=node[_xfa_object.$getSubformParent]();if(!(!parent||parent.layout&&parent.layout!=="position"))switch("transform"in style||(style.transform=""),node.anchorType){case"bottomCenter":style.transform+="translate(-50%, -100%)";break;case"bottomLeft":style.transform+="translate(0,-100%)";break;case"bottomRight":style.transform+="translate(-100%,-100%)";break;case"middleCenter":style.transform+="translate(-50%,-50%)";break;case"middleLeft":style.transform+="translate(0,-50%)";break;case"middleRight":style.transform+="translate(-100%,-50%)";break;case"topCenter":style.transform+="translate(-50%,0)";break;case"topRight":style.transform+="translate(-100%,0)";break}},dimensions(node,style){const parent=node[_xfa_object.$getSubformParent]();let width=node.w;const height=node.h;if(parent.layout&&parent.layout.includes("row")){const extra=parent[_xfa_object.$extra],colSpan=node.colSpan;let w;colSpan===-1?(w=extra.columnWidths.slice(extra.currentColumn).reduce((a,x)=>a+x,0),extra.currentColumn=0):(w=extra.columnWidths.slice(extra.currentColumn,extra.currentColumn+colSpan).reduce((a,x)=>a+x,0),extra.currentColumn=(extra.currentColumn+node.colSpan)%extra.columnWidths.length),isNaN(w)||(width=node.w=w)}width!==""?style.width=measureToString(width):style.width="auto",height!==""?style.height=measureToString(height):style.height="auto"},position(node,style){const parent=node[_xfa_object.$getSubformParent]();parent&&parent.layout&&parent.layout!=="position"||(style.position="absolute",style.left=measureToString(node.x),style.top=measureToString(node.y))},rotate(node,style){node.rotate&&("transform"in style||(style.transform=""),style.transform+=`rotate(-${node.rotate}deg)`,style.transformOrigin="top left")},presence(node,style){switch(node.presence){case"invisible":style.visibility="hidden";break;case"hidden":case"inactive":style.display="none";break}},hAlign(node,style){if(node[_xfa_object.$nodeName]==="para")switch(node.hAlign){case"justifyAll":style.textAlign="justify-all";break;case"radix":style.textAlign="left";break;default:style.textAlign=node.hAlign}else switch(node.hAlign){case"left":style.alignSelf="start";break;case"center":style.alignSelf="center";break;case"right":style.alignSelf="end";break}},margin(node,style){node.margin&&(style.margin=node.margin[_xfa_object.$toStyle]().margin)}};function setMinMaxDimensions(node,style){node[_xfa_object.$getSubformParent]().layout==="position"&&(node.minW>0&&(style.minWidth=measureToString(node.minW)),node.maxW>0&&(style.maxWidth=measureToString(node.maxW)),node.minH>0&&(style.minHeight=measureToString(node.minH)),node.maxH>0&&(style.maxHeight=measureToString(node.maxH)))}__name2(setMinMaxDimensions,"setMinMaxDimensions"),__name(setMinMaxDimensions,"setMinMaxDimensions");function layoutText(text,xfaFont,margin,lineHeight,fontFinder,width){const measure=new _text.TextMeasure(xfaFont,margin,lineHeight,fontFinder);return typeof text=="string"?measure.addString(text):text[_xfa_object.$pushGlyphs](measure),measure.compute(width)}__name2(layoutText,"layoutText"),__name(layoutText,"layoutText");function layoutNode(node,availableSpace){let height=null,width=null,isBroken=!1;if((!node.w||!node.h)&&node.value){let marginH=0,marginV=0;node.margin&&(marginH=node.margin.leftInset+node.margin.rightInset,marginV=node.margin.topInset+node.margin.bottomInset);let lineHeight=null,margin=null;node.para&&(margin=Object.create(null),lineHeight=node.para.lineHeight===""?null:node.para.lineHeight,margin.top=node.para.spaceAbove===""?0:node.para.spaceAbove,margin.bottom=node.para.spaceBelow===""?0:node.para.spaceBelow,margin.left=node.para.marginLeft===""?0:node.para.marginLeft,margin.right=node.para.marginRight===""?0:node.para.marginRight);let font=node.font;if(!font){const root=node[_xfa_object.$getTemplateRoot]();let parent=node[_xfa_object.$getParent]();for(;parent&&parent!==root;){if(parent.font){font=parent.font;break}parent=parent[_xfa_object.$getParent]()}}const maxWidth=(node.w||availableSpace.width)-marginH,fontFinder=node[_xfa_object.$globalData].fontFinder;if(node.value.exData&&node.value.exData[_xfa_object.$content]&&node.value.exData.contentType==="text/html"){const res=layoutText(node.value.exData[_xfa_object.$content],font,margin,lineHeight,fontFinder,maxWidth);width=res.width,height=res.height,isBroken=res.isBroken}else{const text=node.value[_xfa_object.$text]();if(text){const res=layoutText(text,font,margin,lineHeight,fontFinder,maxWidth);width=res.width,height=res.height,isBroken=res.isBroken}}width!==null&&!node.w&&(width+=marginH),height!==null&&!node.h&&(height+=marginV)}return{w:width,h:height,isBroken}}__name2(layoutNode,"layoutNode"),__name(layoutNode,"layoutNode");function computeBbox(node,html,availableSpace){let bbox;if(node.w!==""&&node.h!=="")bbox=[node.x,node.y,node.w,node.h];else{if(!availableSpace)return null;let width=node.w;if(width===""){if(node.maxW===0){const parent=node[_xfa_object.$getSubformParent]();parent.layout==="position"&&parent.w!==""?width=0:width=node.minW}else width=Math.min(node.maxW,availableSpace.width);html.attributes.style.width=measureToString(width)}let height=node.h;if(height===""){if(node.maxH===0){const parent=node[_xfa_object.$getSubformParent]();parent.layout==="position"&&parent.h!==""?height=0:height=node.minH}else height=Math.min(node.maxH,availableSpace.height);html.attributes.style.height=measureToString(height)}bbox=[node.x,node.y,width,height]}return bbox}__name2(computeBbox,"computeBbox"),__name(computeBbox,"computeBbox");function fixDimensions(node){const parent=node[_xfa_object.$getSubformParent]();if(parent.layout&&parent.layout.includes("row")){const extra=parent[_xfa_object.$extra],colSpan=node.colSpan;let width;colSpan===-1?width=extra.columnWidths.slice(extra.currentColumn).reduce((a,w)=>a+w,0):width=extra.columnWidths.slice(extra.currentColumn,extra.currentColumn+colSpan).reduce((a,w)=>a+w,0),isNaN(width)||(node.w=width)}parent.layout&&parent.layout!=="position"&&(node.x=node.y=0),node.layout==="table"&&node.w===""&&Array.isArray(node.columnWidths)&&(node.w=node.columnWidths.reduce((a,x)=>a+x,0))}__name2(fixDimensions,"fixDimensions"),__name(fixDimensions,"fixDimensions");function layoutClass(node){switch(node.layout){case"position":return"xfaPosition";case"lr-tb":return"xfaLrTb";case"rl-row":return"xfaRlRow";case"rl-tb":return"xfaRlTb";case"row":return"xfaRow";case"table":return"xfaTable";case"tb":return"xfaTb";default:return"xfaPosition"}}__name2(layoutClass,"layoutClass"),__name(layoutClass,"layoutClass");function toStyle(node,...names){const style=Object.create(null);for(const name of names){const value=node[name];if(value!==null){if(converters.hasOwnProperty(name)){converters[name](node,style);continue}if(value instanceof _xfa_object.XFAObject){const newStyle=value[_xfa_object.$toStyle]();newStyle?Object.assign(style,newStyle):(0,_util2.warn)(`(DEBUG) - XFA - style for ${name} not implemented yet`)}}}return style}__name2(toStyle,"toStyle"),__name(toStyle,"toStyle");function createWrapper(node,html){const{attributes}=html,{style}=attributes,wrapper={name:"div",attributes:{class:["xfaWrapper"],style:Object.create(null)},children:[]};if(attributes.class.push("xfaWrapped"),node.border){const{widths,insets}=node.border[_xfa_object.$extra];let width,height,top=insets[0],left=insets[3];const insetsH=insets[0]+insets[2],insetsW=insets[1]+insets[3];switch(node.border.hand){case"even":top-=widths[0]/2,left-=widths[3]/2,width=`calc(100% + ${(widths[1]+widths[3])/2-insetsW}px)`,height=`calc(100% + ${(widths[0]+widths[2])/2-insetsH}px)`;break;case"left":top-=widths[0],left-=widths[3],width=`calc(100% + ${widths[1]+widths[3]-insetsW}px)`,height=`calc(100% + ${widths[0]+widths[2]-insetsH}px)`;break;case"right":width=insetsW?`calc(100% - ${insetsW}px)`:"100%",height=insetsH?`calc(100% - ${insetsH}px)`:"100%";break}const classNames=["xfaBorder"];isPrintOnly(node.border)&&classNames.push("xfaPrintOnly");const border={name:"div",attributes:{class:classNames,style:{top:`${top}px`,left:`${left}px`,width,height}},children:[]};for(const key of["border","borderWidth","borderColor","borderRadius","borderStyle"])style[key]!==void 0&&(border.attributes.style[key]=style[key],delete style[key]);wrapper.children.push(border,html)}else wrapper.children.push(html);for(const key of["background","backgroundClip","top","left","width","height","minWidth","minHeight","maxWidth","maxHeight","transform","transformOrigin","visibility"])style[key]!==void 0&&(wrapper.attributes.style[key]=style[key],delete style[key]);return style.position==="absolute"?wrapper.attributes.style.position="absolute":wrapper.attributes.style.position="relative",delete style.position,style.alignSelf&&(wrapper.attributes.style.alignSelf=style.alignSelf,delete style.alignSelf),wrapper}__name2(createWrapper,"createWrapper"),__name(createWrapper,"createWrapper");function fixTextIndent(styles){const indent=(0,_utils.getMeasurement)(styles.textIndent,"0px");if(indent>=0)return;const name="padding"+((styles.textAlign==="right"?"right":"left")==="left"?"Left":"Right"),padding=(0,_utils.getMeasurement)(styles[name],"0px");styles[name]=`${padding-indent}px`}__name2(fixTextIndent,"fixTextIndent"),__name(fixTextIndent,"fixTextIndent");function setAccess(node,classNames){switch(node.access){case"nonInteractive":classNames.push("xfaNonInteractive");break;case"readOnly":classNames.push("xfaReadOnly");break;case"protected":classNames.push("xfaDisabled");break}}__name2(setAccess,"setAccess"),__name(setAccess,"setAccess");function isPrintOnly(node){return node.relevant.length>0&&!node.relevant[0].excluded&&node.relevant[0].viewname==="print"}__name2(isPrintOnly,"isPrintOnly"),__name(isPrintOnly,"isPrintOnly");function getCurrentPara(node){const stack=node[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].paraStack;return stack.length?stack.at(-1):null}__name2(getCurrentPara,"getCurrentPara"),__name(getCurrentPara,"getCurrentPara");function setPara(node,nodeStyle,value){if(value.attributes.class&&value.attributes.class.includes("xfaRich")){nodeStyle&&(node.h===""&&(nodeStyle.height="auto"),node.w===""&&(nodeStyle.width="auto"));const para=getCurrentPara(node);if(para){const valueStyle=value.attributes.style;switch(valueStyle.display="flex",valueStyle.flexDirection="column",para.vAlign){case"top":valueStyle.justifyContent="start";break;case"bottom":valueStyle.justifyContent="end";break;case"middle":valueStyle.justifyContent="center";break}const paraStyle=para[_xfa_object.$toStyle]();for(const[key,val]of Object.entries(paraStyle))key in valueStyle||(valueStyle[key]=val)}}}__name2(setPara,"setPara"),__name(setPara,"setPara");function setFontFamily(xfaFont,node,fontFinder,style){if(!fontFinder){delete style.fontFamily;return}const name=(0,_utils.stripQuotes)(xfaFont.typeface);style.fontFamily=`"${name}"`;const typeface=fontFinder.find(name);if(typeface){const{fontFamily}=typeface.regular.cssFontInfo;fontFamily!==name&&(style.fontFamily=`"${fontFamily}"`);const para=getCurrentPara(node);if(para&&para.lineHeight!==""||style.lineHeight)return;const pdfFont=(0,_fonts.selectFont)(xfaFont,typeface);pdfFont&&(style.lineHeight=Math.max(1.2,pdfFont.lineHeight))}}__name2(setFontFamily,"setFontFamily"),__name(setFontFamily,"setFontFamily");function fixURL(str){const absoluteUrl=(0,_util2.createValidAbsoluteUrl)(str,null,{addDefaultProtocol:!0,tryConvertEncoding:!0});return absoluteUrl?absoluteUrl.href:null}__name2(fixURL,"fixURL"),__name(fixURL,"fixURL")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.FontFinder=void 0,exports3.getMetrics=getMetrics,exports3.selectFont=selectFont;var _xfa_object=__w_pdfjs_require__3(77),_utils=__w_pdfjs_require__3(78),_util2=__w_pdfjs_require__3(2);const _FontFinder=class{static{__name2(this,"_FontFinder")}constructor(pdfFonts){this.fonts=new Map,this.cache=new Map,this.warned=new Set,this.defaultFont=null,this.add(pdfFonts)}add(pdfFonts,reallyMissingFonts=null){for(const pdfFont of pdfFonts)this.addPdfFont(pdfFont);for(const pdfFont of this.fonts.values())pdfFont.regular||(pdfFont.regular=pdfFont.italic||pdfFont.bold||pdfFont.bolditalic);if(!reallyMissingFonts||reallyMissingFonts.size===0)return;const myriad=this.fonts.get("PdfJS-Fallback-PdfJS-XFA");for(const missing of reallyMissingFonts)this.fonts.set(missing,myriad)}addPdfFont(pdfFont){const cssFontInfo=pdfFont.cssFontInfo,name=cssFontInfo.fontFamily;let font=this.fonts.get(name);font||(font=Object.create(null),this.fonts.set(name,font),this.defaultFont||(this.defaultFont=font));let property="";const fontWeight=parseFloat(cssFontInfo.fontWeight);parseFloat(cssFontInfo.italicAngle)!==0?property=fontWeight>=700?"bolditalic":"italic":fontWeight>=700&&(property="bold"),property||((pdfFont.name.includes("Bold")||pdfFont.psName&&pdfFont.psName.includes("Bold"))&&(property="bold"),(pdfFont.name.includes("Italic")||pdfFont.name.endsWith("It")||pdfFont.psName&&(pdfFont.psName.includes("Italic")||pdfFont.psName.endsWith("It")))&&(property+="italic")),property||(property="regular"),font[property]=pdfFont}getDefault(){return this.defaultFont}find(fontName,mustWarn=!0){let font=this.fonts.get(fontName)||this.cache.get(fontName);if(font)return font;const pattern=/,|-|_| |bolditalic|bold|italic|regular|it/gi;let name=fontName.replace(pattern,"");if(font=this.fonts.get(name),font)return this.cache.set(fontName,font),font;name=name.toLowerCase();const maybe=[];for(const[family,pdfFont]of this.fonts.entries())family.replace(pattern,"").toLowerCase().startsWith(name)&&maybe.push(pdfFont);if(maybe.length===0)for(const[,pdfFont]of this.fonts.entries())pdfFont.regular.name&&pdfFont.regular.name.replace(pattern,"").toLowerCase().startsWith(name)&&maybe.push(pdfFont);if(maybe.length===0){name=name.replace(/psmt|mt/gi,"");for(const[family,pdfFont]of this.fonts.entries())family.replace(pattern,"").toLowerCase().startsWith(name)&&maybe.push(pdfFont)}if(maybe.length===0)for(const pdfFont of this.fonts.values())pdfFont.regular.name&&pdfFont.regular.name.replace(pattern,"").toLowerCase().startsWith(name)&&maybe.push(pdfFont);return maybe.length>=1?(maybe.length!==1&&mustWarn&&(0,_util2.warn)(`XFA - Too many choices to guess the correct font: ${fontName}`),this.cache.set(fontName,maybe[0]),maybe[0]):(mustWarn&&!this.warned.has(fontName)&&(this.warned.add(fontName),(0,_util2.warn)(`XFA - Cannot find the font: ${fontName}`)),null)}};__name(_FontFinder,"FontFinder");let FontFinder=_FontFinder;exports3.FontFinder=FontFinder;function selectFont(xfaFont,typeface){return xfaFont.posture==="italic"?xfaFont.weight==="bold"?typeface.bolditalic:typeface.italic:xfaFont.weight==="bold"?typeface.bold:typeface.regular}__name2(selectFont,"selectFont"),__name(selectFont,"selectFont");function getMetrics(xfaFont,real=!1){let pdfFont=null;if(xfaFont){const name=(0,_utils.stripQuotes)(xfaFont.typeface),typeface=xfaFont[_xfa_object.$globalData].fontFinder.find(name);pdfFont=selectFont(xfaFont,typeface)}if(!pdfFont)return{lineHeight:12,lineGap:2,lineNoGap:10};const size=xfaFont.size||10,lineHeight=pdfFont.lineHeight?Math.max(real?0:1.2,pdfFont.lineHeight):1.2,lineGap=pdfFont.lineGap===void 0?.2:pdfFont.lineGap;return{lineHeight:lineHeight*size,lineGap:lineGap*size,lineNoGap:Math.max(1,lineHeight-lineGap)*size}}__name2(getMetrics,"getMetrics"),__name(getMetrics,"getMetrics")},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.TextMeasure=void 0;var _fonts=__w_pdfjs_require__3(85);const WIDTH_FACTOR=1.02,_FontInfo=class{static{__name2(this,"_FontInfo")}constructor(xfaFont,margin,lineHeight,fontFinder){if(this.lineHeight=lineHeight,this.paraMargin=margin||{top:0,bottom:0,left:0,right:0},!xfaFont){[this.pdfFont,this.xfaFont]=this.defaultFont(fontFinder);return}this.xfaFont={typeface:xfaFont.typeface,posture:xfaFont.posture,weight:xfaFont.weight,size:xfaFont.size,letterSpacing:xfaFont.letterSpacing};const typeface=fontFinder.find(xfaFont.typeface);if(!typeface){[this.pdfFont,this.xfaFont]=this.defaultFont(fontFinder);return}this.pdfFont=(0,_fonts.selectFont)(xfaFont,typeface),this.pdfFont||([this.pdfFont,this.xfaFont]=this.defaultFont(fontFinder))}defaultFont(fontFinder){const font=fontFinder.find("Helvetica",!1)||fontFinder.find("Myriad Pro",!1)||fontFinder.find("Arial",!1)||fontFinder.getDefault();if(font&&font.regular){const pdfFont=font.regular,xfaFont2={typeface:pdfFont.cssFontInfo.fontFamily,posture:"normal",weight:"normal",size:10,letterSpacing:0};return[pdfFont,xfaFont2]}return[null,{typeface:"Courier",posture:"normal",weight:"normal",size:10,letterSpacing:0}]}};__name(_FontInfo,"FontInfo");let FontInfo=_FontInfo;const _FontSelector=class{static{__name2(this,"_FontSelector")}constructor(defaultXfaFont,defaultParaMargin,defaultLineHeight,fontFinder){this.fontFinder=fontFinder,this.stack=[new FontInfo(defaultXfaFont,defaultParaMargin,defaultLineHeight,fontFinder)]}pushData(xfaFont,margin,lineHeight){const lastFont=this.stack.at(-1);for(const name of["typeface","posture","weight","size","letterSpacing"])xfaFont[name]||(xfaFont[name]=lastFont.xfaFont[name]);for(const name of["top","bottom","left","right"])isNaN(margin[name])&&(margin[name]=lastFont.paraMargin[name]);const fontInfo=new FontInfo(xfaFont,margin,lineHeight||lastFont.lineHeight,this.fontFinder);fontInfo.pdfFont||(fontInfo.pdfFont=lastFont.pdfFont),this.stack.push(fontInfo)}popFont(){this.stack.pop()}topFont(){return this.stack.at(-1)}};__name(_FontSelector,"FontSelector");let FontSelector=_FontSelector;const _TextMeasure=class{static{__name2(this,"_TextMeasure")}constructor(defaultXfaFont,defaultParaMargin,defaultLineHeight,fonts){this.glyphs=[],this.fontSelector=new FontSelector(defaultXfaFont,defaultParaMargin,defaultLineHeight,fonts),this.extraHeight=0}pushData(xfaFont,margin,lineHeight){this.fontSelector.pushData(xfaFont,margin,lineHeight)}popFont(xfaFont){return this.fontSelector.popFont()}addPara(){const lastFont=this.fontSelector.topFont();this.extraHeight+=lastFont.paraMargin.top+lastFont.paraMargin.bottom}addString(str){if(!str)return;const lastFont=this.fontSelector.topFont(),fontSize=lastFont.xfaFont.size;if(lastFont.pdfFont){const letterSpacing=lastFont.xfaFont.letterSpacing,pdfFont=lastFont.pdfFont,fontLineHeight=pdfFont.lineHeight||1.2,lineHeight=lastFont.lineHeight||Math.max(1.2,fontLineHeight)*fontSize,lineGap=pdfFont.lineGap===void 0?.2:pdfFont.lineGap,noGap=fontLineHeight-lineGap,firstLineHeight=Math.max(1,noGap)*fontSize,scale=fontSize/1e3,fallbackWidth=pdfFont.defaultWidth||pdfFont.charsToGlyphs(" ")[0].width;for(const line of str.split(/[\u2029\n]/)){const encodedLine=pdfFont.encodeString(line).join(""),glyphs=pdfFont.charsToGlyphs(encodedLine);for(const glyph of glyphs){const width=glyph.width||fallbackWidth;this.glyphs.push([width*scale+letterSpacing,lineHeight,firstLineHeight,glyph.unicode,!1])}this.glyphs.push([0,0,0,`
`,!0])}this.glyphs.pop();return}for(const line of str.split(/[\u2029\n]/)){for(const char of line.split(""))this.glyphs.push([fontSize,1.2*fontSize,fontSize,char,!1]);this.glyphs.push([0,0,0,`
`,!0])}this.glyphs.pop()}compute(maxWidth){let lastSpacePos=-1,lastSpaceWidth=0,width=0,height=0,currentLineWidth=0,currentLineHeight=0,isBroken=!1,isFirstLine=!0;for(let i=0,ii=this.glyphs.length;i<ii;i++){const[glyphWidth,lineHeight,firstLineHeight,char,isEOL]=this.glyphs[i],isSpace=char===" ",glyphHeight=isFirstLine?firstLineHeight:lineHeight;if(isEOL){width=Math.max(width,currentLineWidth),currentLineWidth=0,height+=currentLineHeight,currentLineHeight=glyphHeight,lastSpacePos=-1,lastSpaceWidth=0,isFirstLine=!1;continue}if(isSpace){currentLineWidth+glyphWidth>maxWidth?(width=Math.max(width,currentLineWidth),currentLineWidth=0,height+=currentLineHeight,currentLineHeight=glyphHeight,lastSpacePos=-1,lastSpaceWidth=0,isBroken=!0,isFirstLine=!1):(currentLineHeight=Math.max(glyphHeight,currentLineHeight),lastSpaceWidth=currentLineWidth,currentLineWidth+=glyphWidth,lastSpacePos=i);continue}if(currentLineWidth+glyphWidth>maxWidth){height+=currentLineHeight,currentLineHeight=glyphHeight,lastSpacePos!==-1?(i=lastSpacePos,width=Math.max(width,lastSpaceWidth),currentLineWidth=0,lastSpacePos=-1,lastSpaceWidth=0):(width=Math.max(width,currentLineWidth),currentLineWidth=glyphWidth),isBroken=!0,isFirstLine=!1;continue}currentLineWidth+=glyphWidth,currentLineHeight=Math.max(glyphHeight,currentLineHeight)}return width=Math.max(width,currentLineWidth),height+=currentLineHeight+this.extraHeight,{width:WIDTH_FACTOR*width,height,isBroken}}};__name(_TextMeasure,"TextMeasure");let TextMeasure=_TextMeasure;exports3.TextMeasure=TextMeasure},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.DataHandler=void 0;var _xfa_object=__w_pdfjs_require__3(77);const _DataHandler=class{static{__name2(this,"_DataHandler")}constructor(root,data){this.data=data,this.dataset=root.datasets||null}serialize(storage){const stack=[[-1,this.data[_xfa_object.$getChildren]()]];for(;stack.length>0;){const last=stack.at(-1),[i,children]=last;if(i+1===children.length){stack.pop();continue}const child=children[++last[0]],storageEntry=storage.get(child[_xfa_object.$uid]);if(storageEntry)child[_xfa_object.$setValue](storageEntry);else{const attributes=child[_xfa_object.$getAttributes]();for(const value of attributes.values()){const entry=storage.get(value[_xfa_object.$uid]);if(entry){value[_xfa_object.$setValue](entry);break}}}const nodes=child[_xfa_object.$getChildren]();nodes.length>0&&stack.push([-1,nodes])}const buf=['<xfa:datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">'];if(this.dataset)for(const child of this.dataset[_xfa_object.$getChildren]())child[_xfa_object.$nodeName]!=="data"&&child[_xfa_object.$toString](buf);return this.data[_xfa_object.$toString](buf),buf.push("</xfa:datasets>"),buf.join("")}};__name(_DataHandler,"DataHandler");let DataHandler=_DataHandler;exports3.DataHandler=DataHandler},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.XFAParser=void 0;var _xfa_object=__w_pdfjs_require__3(77),_xml_parser=__w_pdfjs_require__3(66),_builder=__w_pdfjs_require__3(89),_util2=__w_pdfjs_require__3(2);const _XFAParser=class _XFAParser2 extends _xml_parser.XMLParserBase{static{__name2(this,"_XFAParser")}constructor(rootNameSpace=null,richText=!1){super(),this._builder=new _builder.Builder(rootNameSpace),this._stack=[],this._globalData={usedTypefaces:new Set},this._ids=new Map,this._current=this._builder.buildRoot(this._ids),this._errorCode=_xml_parser.XMLParserErrorCode.NoError,this._whiteRegex=/^\s+$/,this._nbsps=/\xa0+/g,this._richText=richText}parse(data){if(this.parseXml(data),this._errorCode===_xml_parser.XMLParserErrorCode.NoError)return this._current[_xfa_object.$finalize](),this._current.element}onText(text){if(text=text.replace(this._nbsps,match=>match.slice(1)+" "),this._richText||this._current[_xfa_object.$acceptWhitespace]()){this._current[_xfa_object.$onText](text,this._richText);return}this._whiteRegex.test(text)||this._current[_xfa_object.$onText](text.trim())}onCdata(text){this._current[_xfa_object.$onText](text)}_mkAttributes(attributes,tagName){let namespace=null,prefixes=null;const attributeObj=Object.create({});for(const{name,value}of attributes)if(name==="xmlns")namespace?(0,_util2.warn)(`XFA - multiple namespace definition in <${tagName}>`):namespace=value;else if(name.startsWith("xmlns:")){const prefix=name.substring(6);prefixes||(prefixes=[]),prefixes.push({prefix,value})}else{const i=name.indexOf(":");if(i===-1)attributeObj[name]=value;else{let nsAttrs=attributeObj[_xfa_object.$nsAttributes];nsAttrs||(nsAttrs=attributeObj[_xfa_object.$nsAttributes]=Object.create(null));const[ns,attrName]=[name.slice(0,i),name.slice(i+1)];let attrs=nsAttrs[ns];attrs||(attrs=nsAttrs[ns]=Object.create(null)),attrs[attrName]=value}}return[namespace,prefixes,attributeObj]}_getNameAndPrefix(name,nsAgnostic){const i=name.indexOf(":");return i===-1?[name,null]:[name.substring(i+1),nsAgnostic?"":name.substring(0,i)]}onBeginElement(tagName,attributes,isEmpty){const[namespace,prefixes,attributesObj]=this._mkAttributes(attributes,tagName),[name,nsPrefix]=this._getNameAndPrefix(tagName,this._builder.isNsAgnostic()),node=this._builder.build({nsPrefix,name,attributes:attributesObj,namespace,prefixes});if(node[_xfa_object.$globalData]=this._globalData,isEmpty){node[_xfa_object.$finalize](),this._current[_xfa_object.$onChild](node)&&node[_xfa_object.$setId](this._ids),node[_xfa_object.$clean](this._builder);return}this._stack.push(this._current),this._current=node}onEndElement(name){const node=this._current;if(node[_xfa_object.$isCDATAXml]()&&typeof node[_xfa_object.$content]=="string"){const parser=new _XFAParser2;parser._globalData=this._globalData;const root=parser.parse(node[_xfa_object.$content]);node[_xfa_object.$content]=null,node[_xfa_object.$onChild](root)}node[_xfa_object.$finalize](),this._current=this._stack.pop(),this._current[_xfa_object.$onChild](node)&&node[_xfa_object.$setId](this._ids),node[_xfa_object.$clean](this._builder)}onError(code){this._errorCode=code}};__name(_XFAParser,"XFAParser");let XFAParser=_XFAParser;exports3.XFAParser=XFAParser},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.Builder=void 0;var _namespaces=__w_pdfjs_require__3(79),_xfa_object=__w_pdfjs_require__3(77),_setup=__w_pdfjs_require__3(90),_template=__w_pdfjs_require__3(82),_unknown=__w_pdfjs_require__3(99),_util2=__w_pdfjs_require__3(2);const _Root=class extends _xfa_object.XFAObject{static{__name2(this,"_Root")}constructor(ids){super(-1,"root",Object.create(null)),this.element=null,this[_xfa_object.$ids]=ids}[_xfa_object.$onChild](child){return this.element=child,!0}[_xfa_object.$finalize](){super[_xfa_object.$finalize](),this.element.template instanceof _template.Template&&(this[_xfa_object.$ids].set(_xfa_object.$root,this.element),this.element.template[_xfa_object.$resolvePrototypes](this[_xfa_object.$ids]),this.element.template[_xfa_object.$ids]=this[_xfa_object.$ids])}};__name(_Root,"Root");let Root=_Root;const _Empty=class extends _xfa_object.XFAObject{static{__name2(this,"_Empty")}constructor(){super(-1,"",Object.create(null))}[_xfa_object.$onChild](_){return!1}};__name(_Empty,"Empty");let Empty=_Empty;const _Builder=class{static{__name2(this,"_Builder")}constructor(rootNameSpace=null){this._namespaceStack=[],this._nsAgnosticLevel=0,this._namespacePrefixes=new Map,this._namespaces=new Map,this._nextNsId=Math.max(...Object.values(_namespaces.NamespaceIds).map(({id})=>id)),this._currentNamespace=rootNameSpace||new _unknown.UnknownNamespace(++this._nextNsId)}buildRoot(ids){return new Root(ids)}build({nsPrefix,name,attributes,namespace,prefixes}){const hasNamespaceDef=namespace!==null;if(hasNamespaceDef&&(this._namespaceStack.push(this._currentNamespace),this._currentNamespace=this._searchNamespace(namespace)),prefixes&&this._addNamespacePrefix(prefixes),attributes.hasOwnProperty(_xfa_object.$nsAttributes)){const dataTemplate=_setup.NamespaceSetUp.datasets,nsAttrs=attributes[_xfa_object.$nsAttributes];let xfaAttrs=null;for(const[ns,attrs]of Object.entries(nsAttrs))if(this._getNamespaceToUse(ns)===dataTemplate){xfaAttrs={xfa:attrs};break}xfaAttrs?attributes[_xfa_object.$nsAttributes]=xfaAttrs:delete attributes[_xfa_object.$nsAttributes]}const namespaceToUse=this._getNamespaceToUse(nsPrefix),node=namespaceToUse&&namespaceToUse[_namespaces.$buildXFAObject](name,attributes)||new Empty;return node[_xfa_object.$isNsAgnostic]()&&this._nsAgnosticLevel++,(hasNamespaceDef||prefixes||node[_xfa_object.$isNsAgnostic]())&&(node[_xfa_object.$cleanup]={hasNamespace:hasNamespaceDef,prefixes,nsAgnostic:node[_xfa_object.$isNsAgnostic]()}),node}isNsAgnostic(){return this._nsAgnosticLevel>0}_searchNamespace(nsName){let ns=this._namespaces.get(nsName);if(ns)return ns;for(const[name,{check}]of Object.entries(_namespaces.NamespaceIds))if(check(nsName)){if(ns=_setup.NamespaceSetUp[name],ns)return this._namespaces.set(nsName,ns),ns;break}return ns=new _unknown.UnknownNamespace(++this._nextNsId),this._namespaces.set(nsName,ns),ns}_addNamespacePrefix(prefixes){for(const{prefix,value}of prefixes){const namespace=this._searchNamespace(value);let prefixStack=this._namespacePrefixes.get(prefix);prefixStack||(prefixStack=[],this._namespacePrefixes.set(prefix,prefixStack)),prefixStack.push(namespace)}}_getNamespaceToUse(prefix){if(!prefix)return this._currentNamespace;const prefixStack=this._namespacePrefixes.get(prefix);return prefixStack&&prefixStack.length>0?prefixStack.at(-1):((0,_util2.warn)(`Unknown namespace prefix: ${prefix}.`),null)}clean(data){const{hasNamespace,prefixes,nsAgnostic}=data;hasNamespace&&(this._currentNamespace=this._namespaceStack.pop()),prefixes&&prefixes.forEach(({prefix})=>{this._namespacePrefixes.get(prefix).pop()}),nsAgnostic&&this._nsAgnosticLevel--}};__name(_Builder,"Builder");let Builder=_Builder;exports3.Builder=Builder},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.NamespaceSetUp=void 0;var _config=__w_pdfjs_require__3(91),_connection_set=__w_pdfjs_require__3(92),_datasets=__w_pdfjs_require__3(93),_locale_set=__w_pdfjs_require__3(94),_signature=__w_pdfjs_require__3(95),_stylesheet=__w_pdfjs_require__3(96),_template=__w_pdfjs_require__3(82),_xdp=__w_pdfjs_require__3(97),_xhtml=__w_pdfjs_require__3(98);const NamespaceSetUp={config:_config.ConfigNamespace,connection:_connection_set.ConnectionSetNamespace,datasets:_datasets.DatasetsNamespace,localeSet:_locale_set.LocaleSetNamespace,signature:_signature.SignatureNamespace,stylesheet:_stylesheet.StylesheetNamespace,template:_template.TemplateNamespace,xdp:_xdp.XdpNamespace,xhtml:_xhtml.XhtmlNamespace};exports3.NamespaceSetUp=NamespaceSetUp},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.ConfigNamespace=void 0;var _namespaces=__w_pdfjs_require__3(79),_xfa_object=__w_pdfjs_require__3(77),_utils=__w_pdfjs_require__3(78),_util2=__w_pdfjs_require__3(2);const CONFIG_NS_ID=_namespaces.NamespaceIds.config.id,_Acrobat=class extends _xfa_object.XFAObject{static{__name2(this,"_Acrobat")}constructor(attributes){super(CONFIG_NS_ID,"acrobat",!0),this.acrobat7=null,this.autoSave=null,this.common=null,this.validate=null,this.validateApprovalSignatures=null,this.submitUrl=new _xfa_object.XFAObjectArray}};__name(_Acrobat,"Acrobat");let Acrobat=_Acrobat;const _Acrobat7=class extends _xfa_object.XFAObject{static{__name2(this,"_Acrobat7")}constructor(attributes){super(CONFIG_NS_ID,"acrobat7",!0),this.dynamicRender=null}};__name(_Acrobat7,"Acrobat7");let Acrobat7=_Acrobat7;const _ADBE_JSConsole=class extends _xfa_object.OptionObject{static{__name2(this,"_ADBE_JSConsole")}constructor(attributes){super(CONFIG_NS_ID,"ADBE_JSConsole",["delegate","Enable","Disable"])}};__name(_ADBE_JSConsole,"ADBE_JSConsole");let ADBE_JSConsole=_ADBE_JSConsole;const _ADBE_JSDebugger=class extends _xfa_object.OptionObject{static{__name2(this,"_ADBE_JSDebugger")}constructor(attributes){super(CONFIG_NS_ID,"ADBE_JSDebugger",["delegate","Enable","Disable"])}};__name(_ADBE_JSDebugger,"ADBE_JSDebugger");let ADBE_JSDebugger=_ADBE_JSDebugger;const _AddSilentPrint=class extends _xfa_object.Option01{static{__name2(this,"_AddSilentPrint")}constructor(attributes){super(CONFIG_NS_ID,"addSilentPrint")}};__name(_AddSilentPrint,"AddSilentPrint");let AddSilentPrint=_AddSilentPrint;const _AddViewerPreferences=class extends _xfa_object.Option01{static{__name2(this,"_AddViewerPreferences")}constructor(attributes){super(CONFIG_NS_ID,"addViewerPreferences")}};__name(_AddViewerPreferences,"AddViewerPreferences");let AddViewerPreferences=_AddViewerPreferences;const _AdjustData=class extends _xfa_object.Option10{static{__name2(this,"_AdjustData")}constructor(attributes){super(CONFIG_NS_ID,"adjustData")}};__name(_AdjustData,"AdjustData");let AdjustData=_AdjustData;const _AdobeExtensionLevel=class extends _xfa_object.IntegerObject{static{__name2(this,"_AdobeExtensionLevel")}constructor(attributes){super(CONFIG_NS_ID,"adobeExtensionLevel",0,n=>n>=1&&n<=8)}};__name(_AdobeExtensionLevel,"AdobeExtensionLevel");let AdobeExtensionLevel=_AdobeExtensionLevel;const _Agent=class extends _xfa_object.XFAObject{static{__name2(this,"_Agent")}constructor(attributes){super(CONFIG_NS_ID,"agent",!0),this.name=attributes.name?attributes.name.trim():"",this.common=new _xfa_object.XFAObjectArray}};__name(_Agent,"Agent");let Agent=_Agent;const _AlwaysEmbed=class extends _xfa_object.ContentObject{static{__name2(this,"_AlwaysEmbed")}constructor(attributes){super(CONFIG_NS_ID,"alwaysEmbed")}};__name(_AlwaysEmbed,"AlwaysEmbed");let AlwaysEmbed=_AlwaysEmbed;const _Amd=class extends _xfa_object.StringObject{static{__name2(this,"_Amd")}constructor(attributes){super(CONFIG_NS_ID,"amd")}};__name(_Amd,"Amd");let Amd=_Amd;const _Area=class extends _xfa_object.XFAObject{static{__name2(this,"_Area")}constructor(attributes){super(CONFIG_NS_ID,"area"),this.level=(0,_utils.getInteger)({data:attributes.level,defaultValue:0,validate:n=>n>=1&&n<=3}),this.name=(0,_utils.getStringOption)(attributes.name,["","barcode","coreinit","deviceDriver","font","general","layout","merge","script","signature","sourceSet","templateCache"])}};__name(_Area,"Area");let Area=_Area;const _Attributes=class extends _xfa_object.OptionObject{static{__name2(this,"_Attributes")}constructor(attributes){super(CONFIG_NS_ID,"attributes",["preserve","delegate","ignore"])}};__name(_Attributes,"Attributes");let Attributes=_Attributes;const _AutoSave=class extends _xfa_object.OptionObject{static{__name2(this,"_AutoSave")}constructor(attributes){super(CONFIG_NS_ID,"autoSave",["disabled","enabled"])}};__name(_AutoSave,"AutoSave");let AutoSave=_AutoSave;const _Base=class extends _xfa_object.StringObject{static{__name2(this,"_Base")}constructor(attributes){super(CONFIG_NS_ID,"base")}};__name(_Base,"Base");let Base=_Base;const _BatchOutput=class extends _xfa_object.XFAObject{static{__name2(this,"_BatchOutput")}constructor(attributes){super(CONFIG_NS_ID,"batchOutput"),this.format=(0,_utils.getStringOption)(attributes.format,["none","concat","zip","zipCompress"])}};__name(_BatchOutput,"BatchOutput");let BatchOutput=_BatchOutput;const _BehaviorOverride=class extends _xfa_object.ContentObject{static{__name2(this,"_BehaviorOverride")}constructor(attributes){super(CONFIG_NS_ID,"behaviorOverride")}[_xfa_object.$finalize](){this[_xfa_object.$content]=new Map(this[_xfa_object.$content].trim().split(/\s+/).filter(x=>x.includes(":")).map(x=>x.split(":",2)))}};__name(_BehaviorOverride,"BehaviorOverride");let BehaviorOverride=_BehaviorOverride;const _Cache=class extends _xfa_object.XFAObject{static{__name2(this,"_Cache")}constructor(attributes){super(CONFIG_NS_ID,"cache",!0),this.templateCache=null}};__name(_Cache,"Cache");let Cache=_Cache;const _Change=class extends _xfa_object.Option01{static{__name2(this,"_Change")}constructor(attributes){super(CONFIG_NS_ID,"change")}};__name(_Change,"Change");let Change=_Change;const _Common=class extends _xfa_object.XFAObject{static{__name2(this,"_Common")}constructor(attributes){super(CONFIG_NS_ID,"common",!0),this.data=null,this.locale=null,this.localeSet=null,this.messaging=null,this.suppressBanner=null,this.template=null,this.validationMessaging=null,this.versionControl=null,this.log=new _xfa_object.XFAObjectArray}};__name(_Common,"Common");let Common=_Common;const _Compress=class extends _xfa_object.XFAObject{static{__name2(this,"_Compress")}constructor(attributes){super(CONFIG_NS_ID,"compress"),this.scope=(0,_utils.getStringOption)(attributes.scope,["imageOnly","document"])}};__name(_Compress,"Compress");let Compress=_Compress;const _CompressLogicalStructure=class extends _xfa_object.Option01{static{__name2(this,"_CompressLogicalStructure")}constructor(attributes){super(CONFIG_NS_ID,"compressLogicalStructure")}};__name(_CompressLogicalStructure,"CompressLogicalStructure");let CompressLogicalStructure=_CompressLogicalStructure;const _CompressObjectStream=class extends _xfa_object.Option10{static{__name2(this,"_CompressObjectStream")}constructor(attributes){super(CONFIG_NS_ID,"compressObjectStream")}};__name(_CompressObjectStream,"CompressObjectStream");let CompressObjectStream=_CompressObjectStream;const _Compression=class extends _xfa_object.XFAObject{static{__name2(this,"_Compression")}constructor(attributes){super(CONFIG_NS_ID,"compression",!0),this.compressLogicalStructure=null,this.compressObjectStream=null,this.level=null,this.type=null}};__name(_Compression,"Compression");let Compression=_Compression;const _Config=class extends _xfa_object.XFAObject{static{__name2(this,"_Config")}constructor(attributes){super(CONFIG_NS_ID,"config",!0),this.acrobat=null,this.present=null,this.trace=null,this.agent=new _xfa_object.XFAObjectArray}};__name(_Config,"Config");let Config=_Config;const _Conformance=class extends _xfa_object.OptionObject{static{__name2(this,"_Conformance")}constructor(attributes){super(CONFIG_NS_ID,"conformance",["A","B"])}};__name(_Conformance,"Conformance");let Conformance=_Conformance;const _ContentCopy=class extends _xfa_object.Option01{static{__name2(this,"_ContentCopy")}constructor(attributes){super(CONFIG_NS_ID,"contentCopy")}};__name(_ContentCopy,"ContentCopy");let ContentCopy=_ContentCopy;const _Copies=class extends _xfa_object.IntegerObject{static{__name2(this,"_Copies")}constructor(attributes){super(CONFIG_NS_ID,"copies",1,n=>n>=1)}};__name(_Copies,"Copies");let Copies=_Copies;const _Creator=class extends _xfa_object.StringObject{static{__name2(this,"_Creator")}constructor(attributes){super(CONFIG_NS_ID,"creator")}};__name(_Creator,"Creator");let Creator=_Creator;const _CurrentPage=class extends _xfa_object.IntegerObject{static{__name2(this,"_CurrentPage")}constructor(attributes){super(CONFIG_NS_ID,"currentPage",0,n=>n>=0)}};__name(_CurrentPage,"CurrentPage");let CurrentPage=_CurrentPage;const _Data=class extends _xfa_object.XFAObject{static{__name2(this,"_Data")}constructor(attributes){super(CONFIG_NS_ID,"data",!0),this.adjustData=null,this.attributes=null,this.incrementalLoad=null,this.outputXSL=null,this.range=null,this.record=null,this.startNode=null,this.uri=null,this.window=null,this.xsl=null,this.excludeNS=new _xfa_object.XFAObjectArray,this.transform=new _xfa_object.XFAObjectArray}};__name(_Data,"Data");let Data=_Data;const _Debug=class extends _xfa_object.XFAObject{static{__name2(this,"_Debug")}constructor(attributes){super(CONFIG_NS_ID,"debug",!0),this.uri=null}};__name(_Debug,"Debug");let Debug=_Debug;const _DefaultTypeface=class extends _xfa_object.ContentObject{static{__name2(this,"_DefaultTypeface")}constructor(attributes){super(CONFIG_NS_ID,"defaultTypeface"),this.writingScript=(0,_utils.getStringOption)(attributes.writingScript,["*","Arabic","Cyrillic","EastEuropeanRoman","Greek","Hebrew","Japanese","Korean","Roman","SimplifiedChinese","Thai","TraditionalChinese","Vietnamese"])}};__name(_DefaultTypeface,"DefaultTypeface");let DefaultTypeface=_DefaultTypeface;const _Destination=class extends _xfa_object.OptionObject{static{__name2(this,"_Destination")}constructor(attributes){super(CONFIG_NS_ID,"destination",["pdf","pcl","ps","webClient","zpl"])}};__name(_Destination,"Destination");let Destination=_Destination;const _DocumentAssembly=class extends _xfa_object.Option01{static{__name2(this,"_DocumentAssembly")}constructor(attributes){super(CONFIG_NS_ID,"documentAssembly")}};__name(_DocumentAssembly,"DocumentAssembly");let DocumentAssembly=_DocumentAssembly;const _Driver=class extends _xfa_object.XFAObject{static{__name2(this,"_Driver")}constructor(attributes){super(CONFIG_NS_ID,"driver",!0),this.name=attributes.name?attributes.name.trim():"",this.fontInfo=null,this.xdc=null}};__name(_Driver,"Driver");let Driver=_Driver;const _DuplexOption=class extends _xfa_object.OptionObject{static{__name2(this,"_DuplexOption")}constructor(attributes){super(CONFIG_NS_ID,"duplexOption",["simplex","duplexFlipLongEdge","duplexFlipShortEdge"])}};__name(_DuplexOption,"DuplexOption");let DuplexOption=_DuplexOption;const _DynamicRender=class extends _xfa_object.OptionObject{static{__name2(this,"_DynamicRender")}constructor(attributes){super(CONFIG_NS_ID,"dynamicRender",["forbidden","required"])}};__name(_DynamicRender,"DynamicRender");let DynamicRender=_DynamicRender;const _Embed=class extends _xfa_object.Option01{static{__name2(this,"_Embed")}constructor(attributes){super(CONFIG_NS_ID,"embed")}};__name(_Embed,"Embed");let Embed=_Embed;const _Encrypt=class extends _xfa_object.Option01{static{__name2(this,"_Encrypt")}constructor(attributes){super(CONFIG_NS_ID,"encrypt")}};__name(_Encrypt,"Encrypt");let Encrypt=_Encrypt;const _Encryption=class extends _xfa_object.XFAObject{static{__name2(this,"_Encryption")}constructor(attributes){super(CONFIG_NS_ID,"encryption",!0),this.encrypt=null,this.encryptionLevel=null,this.permissions=null}};__name(_Encryption,"Encryption");let Encryption=_Encryption;const _EncryptionLevel=class extends _xfa_object.OptionObject{static{__name2(this,"_EncryptionLevel")}constructor(attributes){super(CONFIG_NS_ID,"encryptionLevel",["40bit","128bit"])}};__name(_EncryptionLevel,"EncryptionLevel");let EncryptionLevel=_EncryptionLevel;const _Enforce=class extends _xfa_object.StringObject{static{__name2(this,"_Enforce")}constructor(attributes){super(CONFIG_NS_ID,"enforce")}};__name(_Enforce,"Enforce");let Enforce=_Enforce;const _Equate=class extends _xfa_object.XFAObject{static{__name2(this,"_Equate")}constructor(attributes){super(CONFIG_NS_ID,"equate"),this.force=(0,_utils.getInteger)({data:attributes.force,defaultValue:1,validate:n=>n===0}),this.from=attributes.from||"",this.to=attributes.to||""}};__name(_Equate,"Equate");let Equate=_Equate;const _EquateRange=class extends _xfa_object.XFAObject{static{__name2(this,"_EquateRange")}constructor(attributes){super(CONFIG_NS_ID,"equateRange"),this.from=attributes.from||"",this.to=attributes.to||"",this._unicodeRange=attributes.unicodeRange||""}get unicodeRange(){const ranges=[],unicodeRegex=/U\+([0-9a-fA-F]+)/,unicodeRange=this._unicodeRange;for(let range of unicodeRange.split(",").map(x=>x.trim()).filter(x=>!!x))range=range.split("-",2).map(x=>{const found=x.match(unicodeRegex);return found?parseInt(found[1],16):0}),range.length===1&&range.push(range[0]),ranges.push(range);return(0,_util2.shadow)(this,"unicodeRange",ranges)}};__name(_EquateRange,"EquateRange");let EquateRange=_EquateRange;const _Exclude=class extends _xfa_object.ContentObject{static{__name2(this,"_Exclude")}constructor(attributes){super(CONFIG_NS_ID,"exclude")}[_xfa_object.$finalize](){this[_xfa_object.$content]=this[_xfa_object.$content].trim().split(/\s+/).filter(x=>x&&["calculate","close","enter","exit","initialize","ready","validate"].includes(x))}};__name(_Exclude,"Exclude");let Exclude=_Exclude;const _ExcludeNS=class extends _xfa_object.StringObject{static{__name2(this,"_ExcludeNS")}constructor(attributes){super(CONFIG_NS_ID,"excludeNS")}};__name(_ExcludeNS,"ExcludeNS");let ExcludeNS=_ExcludeNS;const _FlipLabel=class extends _xfa_object.OptionObject{static{__name2(this,"_FlipLabel")}constructor(attributes){super(CONFIG_NS_ID,"flipLabel",["usePrinterSetting","on","off"])}};__name(_FlipLabel,"FlipLabel");let FlipLabel=_FlipLabel;const _FontInfo=class extends _xfa_object.XFAObject{static{__name2(this,"_FontInfo")}constructor(attributes){super(CONFIG_NS_ID,"fontInfo",!0),this.embed=null,this.map=null,this.subsetBelow=null,this.alwaysEmbed=new _xfa_object.XFAObjectArray,this.defaultTypeface=new _xfa_object.XFAObjectArray,this.neverEmbed=new _xfa_object.XFAObjectArray}};__name(_FontInfo,"FontInfo");let FontInfo=_FontInfo;const _FormFieldFilling=class extends _xfa_object.Option01{static{__name2(this,"_FormFieldFilling")}constructor(attributes){super(CONFIG_NS_ID,"formFieldFilling")}};__name(_FormFieldFilling,"FormFieldFilling");let FormFieldFilling=_FormFieldFilling;const _GroupParent=class extends _xfa_object.StringObject{static{__name2(this,"_GroupParent")}constructor(attributes){super(CONFIG_NS_ID,"groupParent")}};__name(_GroupParent,"GroupParent");let GroupParent=_GroupParent;const _IfEmpty=class extends _xfa_object.OptionObject{static{__name2(this,"_IfEmpty")}constructor(attributes){super(CONFIG_NS_ID,"ifEmpty",["dataValue","dataGroup","ignore","remove"])}};__name(_IfEmpty,"IfEmpty");let IfEmpty=_IfEmpty;const _IncludeXDPContent=class extends _xfa_object.StringObject{static{__name2(this,"_IncludeXDPContent")}constructor(attributes){super(CONFIG_NS_ID,"includeXDPContent")}};__name(_IncludeXDPContent,"IncludeXDPContent");let IncludeXDPContent=_IncludeXDPContent;const _IncrementalLoad=class extends _xfa_object.OptionObject{static{__name2(this,"_IncrementalLoad")}constructor(attributes){super(CONFIG_NS_ID,"incrementalLoad",["none","forwardOnly"])}};__name(_IncrementalLoad,"IncrementalLoad");let IncrementalLoad=_IncrementalLoad;const _IncrementalMerge=class extends _xfa_object.Option01{static{__name2(this,"_IncrementalMerge")}constructor(attributes){super(CONFIG_NS_ID,"incrementalMerge")}};__name(_IncrementalMerge,"IncrementalMerge");let IncrementalMerge=_IncrementalMerge;const _Interactive=class extends _xfa_object.Option01{static{__name2(this,"_Interactive")}constructor(attributes){super(CONFIG_NS_ID,"interactive")}};__name(_Interactive,"Interactive");let Interactive=_Interactive;const _Jog=class extends _xfa_object.OptionObject{static{__name2(this,"_Jog")}constructor(attributes){super(CONFIG_NS_ID,"jog",["usePrinterSetting","none","pageSet"])}};__name(_Jog,"Jog");let Jog=_Jog;const _LabelPrinter=class extends _xfa_object.XFAObject{static{__name2(this,"_LabelPrinter")}constructor(attributes){super(CONFIG_NS_ID,"labelPrinter",!0),this.name=(0,_utils.getStringOption)(attributes.name,["zpl","dpl","ipl","tcpl"]),this.batchOutput=null,this.flipLabel=null,this.fontInfo=null,this.xdc=null}};__name(_LabelPrinter,"LabelPrinter");let LabelPrinter=_LabelPrinter;const _Layout=class extends _xfa_object.OptionObject{static{__name2(this,"_Layout")}constructor(attributes){super(CONFIG_NS_ID,"layout",["paginate","panel"])}};__name(_Layout,"Layout");let Layout=_Layout;const _Level=class extends _xfa_object.IntegerObject{static{__name2(this,"_Level")}constructor(attributes){super(CONFIG_NS_ID,"level",0,n=>n>0)}};__name(_Level,"Level");let Level=_Level;const _Linearized=class extends _xfa_object.Option01{static{__name2(this,"_Linearized")}constructor(attributes){super(CONFIG_NS_ID,"linearized")}};__name(_Linearized,"Linearized");let Linearized=_Linearized;const _Locale=class extends _xfa_object.StringObject{static{__name2(this,"_Locale")}constructor(attributes){super(CONFIG_NS_ID,"locale")}};__name(_Locale,"Locale");let Locale=_Locale;const _LocaleSet=class extends _xfa_object.StringObject{static{__name2(this,"_LocaleSet")}constructor(attributes){super(CONFIG_NS_ID,"localeSet")}};__name(_LocaleSet,"LocaleSet");let LocaleSet=_LocaleSet;const _Log=class extends _xfa_object.XFAObject{static{__name2(this,"_Log")}constructor(attributes){super(CONFIG_NS_ID,"log",!0),this.mode=null,this.threshold=null,this.to=null,this.uri=null}};__name(_Log,"Log");let Log=_Log;const _MapElement=class extends _xfa_object.XFAObject{static{__name2(this,"_MapElement")}constructor(attributes){super(CONFIG_NS_ID,"map",!0),this.equate=new _xfa_object.XFAObjectArray,this.equateRange=new _xfa_object.XFAObjectArray}};__name(_MapElement,"MapElement");let MapElement=_MapElement;const _MediumInfo=class extends _xfa_object.XFAObject{static{__name2(this,"_MediumInfo")}constructor(attributes){super(CONFIG_NS_ID,"mediumInfo",!0),this.map=null}};__name(_MediumInfo,"MediumInfo");let MediumInfo=_MediumInfo;const _Message=class extends _xfa_object.XFAObject{static{__name2(this,"_Message")}constructor(attributes){super(CONFIG_NS_ID,"message",!0),this.msgId=null,this.severity=null}};__name(_Message,"Message");let Message=_Message;const _Messaging=class extends _xfa_object.XFAObject{static{__name2(this,"_Messaging")}constructor(attributes){super(CONFIG_NS_ID,"messaging",!0),this.message=new _xfa_object.XFAObjectArray}};__name(_Messaging,"Messaging");let Messaging=_Messaging;const _Mode=class extends _xfa_object.OptionObject{static{__name2(this,"_Mode")}constructor(attributes){super(CONFIG_NS_ID,"mode",["append","overwrite"])}};__name(_Mode,"Mode");let Mode=_Mode;const _ModifyAnnots=class extends _xfa_object.Option01{static{__name2(this,"_ModifyAnnots")}constructor(attributes){super(CONFIG_NS_ID,"modifyAnnots")}};__name(_ModifyAnnots,"ModifyAnnots");let ModifyAnnots=_ModifyAnnots;const _MsgId=class extends _xfa_object.IntegerObject{static{__name2(this,"_MsgId")}constructor(attributes){super(CONFIG_NS_ID,"msgId",1,n=>n>=1)}};__name(_MsgId,"MsgId");let MsgId=_MsgId;const _NameAttr=class extends _xfa_object.StringObject{static{__name2(this,"_NameAttr")}constructor(attributes){super(CONFIG_NS_ID,"nameAttr")}};__name(_NameAttr,"NameAttr");let NameAttr=_NameAttr;const _NeverEmbed=class extends _xfa_object.ContentObject{static{__name2(this,"_NeverEmbed")}constructor(attributes){super(CONFIG_NS_ID,"neverEmbed")}};__name(_NeverEmbed,"NeverEmbed");let NeverEmbed=_NeverEmbed;const _NumberOfCopies=class extends _xfa_object.IntegerObject{static{__name2(this,"_NumberOfCopies")}constructor(attributes){super(CONFIG_NS_ID,"numberOfCopies",null,n=>n>=2&&n<=5)}};__name(_NumberOfCopies,"NumberOfCopies");let NumberOfCopies=_NumberOfCopies;const _OpenAction=class extends _xfa_object.XFAObject{static{__name2(this,"_OpenAction")}constructor(attributes){super(CONFIG_NS_ID,"openAction",!0),this.destination=null}};__name(_OpenAction,"OpenAction");let OpenAction=_OpenAction;const _Output=class extends _xfa_object.XFAObject{static{__name2(this,"_Output")}constructor(attributes){super(CONFIG_NS_ID,"output",!0),this.to=null,this.type=null,this.uri=null}};__name(_Output,"Output");let Output=_Output;const _OutputBin=class extends _xfa_object.StringObject{static{__name2(this,"_OutputBin")}constructor(attributes){super(CONFIG_NS_ID,"outputBin")}};__name(_OutputBin,"OutputBin");let OutputBin=_OutputBin;const _OutputXSL=class extends _xfa_object.XFAObject{static{__name2(this,"_OutputXSL")}constructor(attributes){super(CONFIG_NS_ID,"outputXSL",!0),this.uri=null}};__name(_OutputXSL,"OutputXSL");let OutputXSL=_OutputXSL;const _Overprint=class extends _xfa_object.OptionObject{static{__name2(this,"_Overprint")}constructor(attributes){super(CONFIG_NS_ID,"overprint",["none","both","draw","field"])}};__name(_Overprint,"Overprint");let Overprint=_Overprint;const _Packets=class extends _xfa_object.StringObject{static{__name2(this,"_Packets")}constructor(attributes){super(CONFIG_NS_ID,"packets")}[_xfa_object.$finalize](){this[_xfa_object.$content]!=="*"&&(this[_xfa_object.$content]=this[_xfa_object.$content].trim().split(/\s+/).filter(x=>["config","datasets","template","xfdf","xslt"].includes(x)))}};__name(_Packets,"Packets");let Packets=_Packets;const _PageOffset=class extends _xfa_object.XFAObject{static{__name2(this,"_PageOffset")}constructor(attributes){super(CONFIG_NS_ID,"pageOffset"),this.x=(0,_utils.getInteger)({data:attributes.x,defaultValue:"useXDCSetting",validate:n=>!0}),this.y=(0,_utils.getInteger)({data:attributes.y,defaultValue:"useXDCSetting",validate:n=>!0})}};__name(_PageOffset,"PageOffset");let PageOffset=_PageOffset;const _PageRange=class extends _xfa_object.StringObject{static{__name2(this,"_PageRange")}constructor(attributes){super(CONFIG_NS_ID,"pageRange")}[_xfa_object.$finalize](){const numbers=this[_xfa_object.$content].trim().split(/\s+/).map(x=>parseInt(x,10)),ranges=[];for(let i=0,ii=numbers.length;i<ii;i+=2)ranges.push(numbers.slice(i,i+2));this[_xfa_object.$content]=ranges}};__name(_PageRange,"PageRange");let PageRange=_PageRange;const _Pagination=class extends _xfa_object.OptionObject{static{__name2(this,"_Pagination")}constructor(attributes){super(CONFIG_NS_ID,"pagination",["simplex","duplexShortEdge","duplexLongEdge"])}};__name(_Pagination,"Pagination");let Pagination=_Pagination;const _PaginationOverride=class extends _xfa_object.OptionObject{static{__name2(this,"_PaginationOverride")}constructor(attributes){super(CONFIG_NS_ID,"paginationOverride",["none","forceDuplex","forceDuplexLongEdge","forceDuplexShortEdge","forceSimplex"])}};__name(_PaginationOverride,"PaginationOverride");let PaginationOverride=_PaginationOverride;const _Part=class extends _xfa_object.IntegerObject{static{__name2(this,"_Part")}constructor(attributes){super(CONFIG_NS_ID,"part",1,n=>!1)}};__name(_Part,"Part");let Part=_Part;const _Pcl=class extends _xfa_object.XFAObject{static{__name2(this,"_Pcl")}constructor(attributes){super(CONFIG_NS_ID,"pcl",!0),this.name=attributes.name||"",this.batchOutput=null,this.fontInfo=null,this.jog=null,this.mediumInfo=null,this.outputBin=null,this.pageOffset=null,this.staple=null,this.xdc=null}};__name(_Pcl,"Pcl");let Pcl=_Pcl;const _Pdf=class extends _xfa_object.XFAObject{static{__name2(this,"_Pdf")}constructor(attributes){super(CONFIG_NS_ID,"pdf",!0),this.name=attributes.name||"",this.adobeExtensionLevel=null,this.batchOutput=null,this.compression=null,this.creator=null,this.encryption=null,this.fontInfo=null,this.interactive=null,this.linearized=null,this.openAction=null,this.pdfa=null,this.producer=null,this.renderPolicy=null,this.scriptModel=null,this.silentPrint=null,this.submitFormat=null,this.tagged=null,this.version=null,this.viewerPreferences=null,this.xdc=null}};__name(_Pdf,"Pdf");let Pdf=_Pdf;const _Pdfa=class extends _xfa_object.XFAObject{static{__name2(this,"_Pdfa")}constructor(attributes){super(CONFIG_NS_ID,"pdfa",!0),this.amd=null,this.conformance=null,this.includeXDPContent=null,this.part=null}};__name(_Pdfa,"Pdfa");let Pdfa=_Pdfa;const _Permissions=class extends _xfa_object.XFAObject{static{__name2(this,"_Permissions")}constructor(attributes){super(CONFIG_NS_ID,"permissions",!0),this.accessibleContent=null,this.change=null,this.contentCopy=null,this.documentAssembly=null,this.formFieldFilling=null,this.modifyAnnots=null,this.plaintextMetadata=null,this.print=null,this.printHighQuality=null}};__name(_Permissions,"Permissions");let Permissions=_Permissions;const _PickTrayByPDFSize=class extends _xfa_object.Option01{static{__name2(this,"_PickTrayByPDFSize")}constructor(attributes){super(CONFIG_NS_ID,"pickTrayByPDFSize")}};__name(_PickTrayByPDFSize,"PickTrayByPDFSize");let PickTrayByPDFSize=_PickTrayByPDFSize;const _Picture=class extends _xfa_object.StringObject{static{__name2(this,"_Picture")}constructor(attributes){super(CONFIG_NS_ID,"picture")}};__name(_Picture,"Picture");let Picture=_Picture;const _PlaintextMetadata=class extends _xfa_object.Option01{static{__name2(this,"_PlaintextMetadata")}constructor(attributes){super(CONFIG_NS_ID,"plaintextMetadata")}};__name(_PlaintextMetadata,"PlaintextMetadata");let PlaintextMetadata=_PlaintextMetadata;const _Presence=class extends _xfa_object.OptionObject{static{__name2(this,"_Presence")}constructor(attributes){super(CONFIG_NS_ID,"presence",["preserve","dissolve","dissolveStructure","ignore","remove"])}};__name(_Presence,"Presence");let Presence=_Presence;const _Present=class extends _xfa_object.XFAObject{static{__name2(this,"_Present")}constructor(attributes){super(CONFIG_NS_ID,"present",!0),this.behaviorOverride=null,this.cache=null,this.common=null,this.copies=null,this.destination=null,this.incrementalMerge=null,this.layout=null,this.output=null,this.overprint=null,this.pagination=null,this.paginationOverride=null,this.script=null,this.validate=null,this.xdp=null,this.driver=new _xfa_object.XFAObjectArray,this.labelPrinter=new _xfa_object.XFAObjectArray,this.pcl=new _xfa_object.XFAObjectArray,this.pdf=new _xfa_object.XFAObjectArray,this.ps=new _xfa_object.XFAObjectArray,this.submitUrl=new _xfa_object.XFAObjectArray,this.webClient=new _xfa_object.XFAObjectArray,this.zpl=new _xfa_object.XFAObjectArray}};__name(_Present,"Present");let Present=_Present;const _Print=class extends _xfa_object.Option01{static{__name2(this,"_Print")}constructor(attributes){super(CONFIG_NS_ID,"print")}};__name(_Print,"Print");let Print=_Print;const _PrintHighQuality=class extends _xfa_object.Option01{static{__name2(this,"_PrintHighQuality")}constructor(attributes){super(CONFIG_NS_ID,"printHighQuality")}};__name(_PrintHighQuality,"PrintHighQuality");let PrintHighQuality=_PrintHighQuality;const _PrintScaling=class extends _xfa_object.OptionObject{static{__name2(this,"_PrintScaling")}constructor(attributes){super(CONFIG_NS_ID,"printScaling",["appdefault","noScaling"])}};__name(_PrintScaling,"PrintScaling");let PrintScaling=_PrintScaling;const _PrinterName=class extends _xfa_object.StringObject{static{__name2(this,"_PrinterName")}constructor(attributes){super(CONFIG_NS_ID,"printerName")}};__name(_PrinterName,"PrinterName");let PrinterName=_PrinterName;const _Producer=class extends _xfa_object.StringObject{static{__name2(this,"_Producer")}constructor(attributes){super(CONFIG_NS_ID,"producer")}};__name(_Producer,"Producer");let Producer=_Producer;const _Ps=class extends _xfa_object.XFAObject{static{__name2(this,"_Ps")}constructor(attributes){super(CONFIG_NS_ID,"ps",!0),this.name=attributes.name||"",this.batchOutput=null,this.fontInfo=null,this.jog=null,this.mediumInfo=null,this.outputBin=null,this.staple=null,this.xdc=null}};__name(_Ps,"Ps");let Ps=_Ps;const _Range=class extends _xfa_object.ContentObject{static{__name2(this,"_Range")}constructor(attributes){super(CONFIG_NS_ID,"range")}[_xfa_object.$finalize](){this[_xfa_object.$content]=this[_xfa_object.$content].trim().split(/\s*,\s*/,2).map(range=>range.split("-").map(x=>parseInt(x.trim(),10))).filter(range=>range.every(x=>!isNaN(x))).map(range=>(range.length===1&&range.push(range[0]),range))}};__name(_Range,"Range");let Range=_Range;const _Record=class extends _xfa_object.ContentObject{static{__name2(this,"_Record")}constructor(attributes){super(CONFIG_NS_ID,"record")}[_xfa_object.$finalize](){this[_xfa_object.$content]=this[_xfa_object.$content].trim();const n=parseInt(this[_xfa_object.$content],10);!isNaN(n)&&n>=0&&(this[_xfa_object.$content]=n)}};__name(_Record,"Record");let Record=_Record;const _Relevant=class extends _xfa_object.ContentObject{static{__name2(this,"_Relevant")}constructor(attributes){super(CONFIG_NS_ID,"relevant")}[_xfa_object.$finalize](){this[_xfa_object.$content]=this[_xfa_object.$content].trim().split(/\s+/)}};__name(_Relevant,"Relevant");let Relevant=_Relevant;const _Rename=class extends _xfa_object.ContentObject{static{__name2(this,"_Rename")}constructor(attributes){super(CONFIG_NS_ID,"rename")}[_xfa_object.$finalize](){this[_xfa_object.$content]=this[_xfa_object.$content].trim(),(this[_xfa_object.$content].toLowerCase().startsWith("xml")||this[_xfa_object.$content].match(new RegExp("[\\p{L}_][\\p{L}\\d._\\p{M}-]*","u")))&&(0,_util2.warn)("XFA - Rename: invalid XFA name")}};__name(_Rename,"Rename");let Rename=_Rename;const _RenderPolicy=class extends _xfa_object.OptionObject{static{__name2(this,"_RenderPolicy")}constructor(attributes){super(CONFIG_NS_ID,"renderPolicy",["server","client"])}};__name(_RenderPolicy,"RenderPolicy");let RenderPolicy=_RenderPolicy;const _RunScripts=class extends _xfa_object.OptionObject{static{__name2(this,"_RunScripts")}constructor(attributes){super(CONFIG_NS_ID,"runScripts",["both","client","none","server"])}};__name(_RunScripts,"RunScripts");let RunScripts=_RunScripts;const _Script=class extends _xfa_object.XFAObject{static{__name2(this,"_Script")}constructor(attributes){super(CONFIG_NS_ID,"script",!0),this.currentPage=null,this.exclude=null,this.runScripts=null}};__name(_Script,"Script");let Script=_Script;const _ScriptModel=class extends _xfa_object.OptionObject{static{__name2(this,"_ScriptModel")}constructor(attributes){super(CONFIG_NS_ID,"scriptModel",["XFA","none"])}};__name(_ScriptModel,"ScriptModel");let ScriptModel=_ScriptModel;const _Severity=class extends _xfa_object.OptionObject{static{__name2(this,"_Severity")}constructor(attributes){super(CONFIG_NS_ID,"severity",["ignore","error","information","trace","warning"])}};__name(_Severity,"Severity");let Severity=_Severity;const _SilentPrint=class extends _xfa_object.XFAObject{static{__name2(this,"_SilentPrint")}constructor(attributes){super(CONFIG_NS_ID,"silentPrint",!0),this.addSilentPrint=null,this.printerName=null}};__name(_SilentPrint,"SilentPrint");let SilentPrint=_SilentPrint;const _Staple=class extends _xfa_object.XFAObject{static{__name2(this,"_Staple")}constructor(attributes){super(CONFIG_NS_ID,"staple"),this.mode=(0,_utils.getStringOption)(attributes.mode,["usePrinterSetting","on","off"])}};__name(_Staple,"Staple");let Staple=_Staple;const _StartNode=class extends _xfa_object.StringObject{static{__name2(this,"_StartNode")}constructor(attributes){super(CONFIG_NS_ID,"startNode")}};__name(_StartNode,"StartNode");let StartNode=_StartNode;const _StartPage=class extends _xfa_object.IntegerObject{static{__name2(this,"_StartPage")}constructor(attributes){super(CONFIG_NS_ID,"startPage",0,n=>!0)}};__name(_StartPage,"StartPage");let StartPage=_StartPage;const _SubmitFormat=class extends _xfa_object.OptionObject{static{__name2(this,"_SubmitFormat")}constructor(attributes){super(CONFIG_NS_ID,"submitFormat",["html","delegate","fdf","xml","pdf"])}};__name(_SubmitFormat,"SubmitFormat");let SubmitFormat=_SubmitFormat;const _SubmitUrl=class extends _xfa_object.StringObject{static{__name2(this,"_SubmitUrl")}constructor(attributes){super(CONFIG_NS_ID,"submitUrl")}};__name(_SubmitUrl,"SubmitUrl");let SubmitUrl=_SubmitUrl;const _SubsetBelow=class extends _xfa_object.IntegerObject{static{__name2(this,"_SubsetBelow")}constructor(attributes){super(CONFIG_NS_ID,"subsetBelow",100,n=>n>=0&&n<=100)}};__name(_SubsetBelow,"SubsetBelow");let SubsetBelow=_SubsetBelow;const _SuppressBanner=class extends _xfa_object.Option01{static{__name2(this,"_SuppressBanner")}constructor(attributes){super(CONFIG_NS_ID,"suppressBanner")}};__name(_SuppressBanner,"SuppressBanner");let SuppressBanner=_SuppressBanner;const _Tagged=class extends _xfa_object.Option01{static{__name2(this,"_Tagged")}constructor(attributes){super(CONFIG_NS_ID,"tagged")}};__name(_Tagged,"Tagged");let Tagged=_Tagged;const _Template=class extends _xfa_object.XFAObject{static{__name2(this,"_Template")}constructor(attributes){super(CONFIG_NS_ID,"template",!0),this.base=null,this.relevant=null,this.startPage=null,this.uri=null,this.xsl=null}};__name(_Template,"Template");let Template=_Template;const _Threshold=class extends _xfa_object.OptionObject{static{__name2(this,"_Threshold")}constructor(attributes){super(CONFIG_NS_ID,"threshold",["trace","error","information","warning"])}};__name(_Threshold,"Threshold");let Threshold=_Threshold;const _To=class extends _xfa_object.OptionObject{static{__name2(this,"_To")}constructor(attributes){super(CONFIG_NS_ID,"to",["null","memory","stderr","stdout","system","uri"])}};__name(_To,"To");let To=_To;const _TemplateCache=class extends _xfa_object.XFAObject{static{__name2(this,"_TemplateCache")}constructor(attributes){super(CONFIG_NS_ID,"templateCache"),this.maxEntries=(0,_utils.getInteger)({data:attributes.maxEntries,defaultValue:5,validate:n=>n>=0})}};__name(_TemplateCache,"TemplateCache");let TemplateCache=_TemplateCache;const _Trace=class extends _xfa_object.XFAObject{static{__name2(this,"_Trace")}constructor(attributes){super(CONFIG_NS_ID,"trace",!0),this.area=new _xfa_object.XFAObjectArray}};__name(_Trace,"Trace");let Trace=_Trace;const _Transform=class extends _xfa_object.XFAObject{static{__name2(this,"_Transform")}constructor(attributes){super(CONFIG_NS_ID,"transform",!0),this.groupParent=null,this.ifEmpty=null,this.nameAttr=null,this.picture=null,this.presence=null,this.rename=null,this.whitespace=null}};__name(_Transform,"Transform");let Transform=_Transform;const _Type=class extends _xfa_object.OptionObject{static{__name2(this,"_Type")}constructor(attributes){super(CONFIG_NS_ID,"type",["none","ascii85","asciiHex","ccittfax","flate","lzw","runLength","native","xdp","mergedXDP"])}};__name(_Type,"Type");let Type=_Type;const _Uri=class extends _xfa_object.StringObject{static{__name2(this,"_Uri")}constructor(attributes){super(CONFIG_NS_ID,"uri")}};__name(_Uri,"Uri");let Uri=_Uri;const _Validate=class extends _xfa_object.OptionObject{static{__name2(this,"_Validate")}constructor(attributes){super(CONFIG_NS_ID,"validate",["preSubmit","prePrint","preExecute","preSave"])}};__name(_Validate,"Validate");let Validate=_Validate;const _ValidateApprovalSignatures=class extends _xfa_object.ContentObject{static{__name2(this,"_ValidateApprovalSignatures")}constructor(attributes){super(CONFIG_NS_ID,"validateApprovalSignatures")}[_xfa_object.$finalize](){this[_xfa_object.$content]=this[_xfa_object.$content].trim().split(/\s+/).filter(x=>["docReady","postSign"].includes(x))}};__name(_ValidateApprovalSignatures,"ValidateApprovalSignatures");let ValidateApprovalSignatures=_ValidateApprovalSignatures;const _ValidationMessaging=class extends _xfa_object.OptionObject{static{__name2(this,"_ValidationMessaging")}constructor(attributes){super(CONFIG_NS_ID,"validationMessaging",["allMessagesIndividually","allMessagesTogether","firstMessageOnly","noMessages"])}};__name(_ValidationMessaging,"ValidationMessaging");let ValidationMessaging=_ValidationMessaging;const _Version=class extends _xfa_object.OptionObject{static{__name2(this,"_Version")}constructor(attributes){super(CONFIG_NS_ID,"version",["1.7","1.6","1.5","1.4","1.3","1.2"])}};__name(_Version,"Version");let Version=_Version;const _VersionControl=class extends _xfa_object.XFAObject{static{__name2(this,"_VersionControl")}constructor(attributes){super(CONFIG_NS_ID,"VersionControl"),this.outputBelow=(0,_utils.getStringOption)(attributes.outputBelow,["warn","error","update"]),this.sourceAbove=(0,_utils.getStringOption)(attributes.sourceAbove,["warn","error"]),this.sourceBelow=(0,_utils.getStringOption)(attributes.sourceBelow,["update","maintain"])}};__name(_VersionControl,"VersionControl");let VersionControl=_VersionControl;const _ViewerPreferences=class extends _xfa_object.XFAObject{static{__name2(this,"_ViewerPreferences")}constructor(attributes){super(CONFIG_NS_ID,"viewerPreferences",!0),this.ADBE_JSConsole=null,this.ADBE_JSDebugger=null,this.addViewerPreferences=null,this.duplexOption=null,this.enforce=null,this.numberOfCopies=null,this.pageRange=null,this.pickTrayByPDFSize=null,this.printScaling=null}};__name(_ViewerPreferences,"ViewerPreferences");let ViewerPreferences=_ViewerPreferences;const _WebClient=class extends _xfa_object.XFAObject{static{__name2(this,"_WebClient")}constructor(attributes){super(CONFIG_NS_ID,"webClient",!0),this.name=attributes.name?attributes.name.trim():"",this.fontInfo=null,this.xdc=null}};__name(_WebClient,"WebClient");let WebClient=_WebClient;const _Whitespace=class extends _xfa_object.OptionObject{static{__name2(this,"_Whitespace")}constructor(attributes){super(CONFIG_NS_ID,"whitespace",["preserve","ltrim","normalize","rtrim","trim"])}};__name(_Whitespace,"Whitespace");let Whitespace=_Whitespace;const _Window=class extends _xfa_object.ContentObject{static{__name2(this,"_Window")}constructor(attributes){super(CONFIG_NS_ID,"window")}[_xfa_object.$finalize](){const pair=this[_xfa_object.$content].trim().split(/\s*,\s*/,2).map(x=>parseInt(x,10));if(pair.some(x=>isNaN(x))){this[_xfa_object.$content]=[0,0];return}pair.length===1&&pair.push(pair[0]),this[_xfa_object.$content]=pair}};__name(_Window,"Window");let Window=_Window;const _Xdc=class extends _xfa_object.XFAObject{static{__name2(this,"_Xdc")}constructor(attributes){super(CONFIG_NS_ID,"xdc",!0),this.uri=new _xfa_object.XFAObjectArray,this.xsl=new _xfa_object.XFAObjectArray}};__name(_Xdc,"Xdc");let Xdc=_Xdc;const _Xdp=class extends _xfa_object.XFAObject{static{__name2(this,"_Xdp")}constructor(attributes){super(CONFIG_NS_ID,"xdp",!0),this.packets=null}};__name(_Xdp,"Xdp");let Xdp=_Xdp;const _Xsl=class extends _xfa_object.XFAObject{static{__name2(this,"_Xsl")}constructor(attributes){super(CONFIG_NS_ID,"xsl",!0),this.debug=null,this.uri=null}};__name(_Xsl,"Xsl");let Xsl=_Xsl;const _Zpl=class extends _xfa_object.XFAObject{static{__name2(this,"_Zpl")}constructor(attributes){super(CONFIG_NS_ID,"zpl",!0),this.name=attributes.name?attributes.name.trim():"",this.batchOutput=null,this.flipLabel=null,this.fontInfo=null,this.xdc=null}};__name(_Zpl,"Zpl");let Zpl=_Zpl;const _ConfigNamespace=class _ConfigNamespace2{static{__name2(this,"_ConfigNamespace")}static[_namespaces.$buildXFAObject](name,attributes){if(_ConfigNamespace2.hasOwnProperty(name))return _ConfigNamespace2[name](attributes)}static acrobat(attrs){return new Acrobat(attrs)}static acrobat7(attrs){return new Acrobat7(attrs)}static ADBE_JSConsole(attrs){return new ADBE_JSConsole(attrs)}static ADBE_JSDebugger(attrs){return new ADBE_JSDebugger(attrs)}static addSilentPrint(attrs){return new AddSilentPrint(attrs)}static addViewerPreferences(attrs){return new AddViewerPreferences(attrs)}static adjustData(attrs){return new AdjustData(attrs)}static adobeExtensionLevel(attrs){return new AdobeExtensionLevel(attrs)}static agent(attrs){return new Agent(attrs)}static alwaysEmbed(attrs){return new AlwaysEmbed(attrs)}static amd(attrs){return new Amd(attrs)}static area(attrs){return new Area(attrs)}static attributes(attrs){return new Attributes(attrs)}static autoSave(attrs){return new AutoSave(attrs)}static base(attrs){return new Base(attrs)}static batchOutput(attrs){return new BatchOutput(attrs)}static behaviorOverride(attrs){return new BehaviorOverride(attrs)}static cache(attrs){return new Cache(attrs)}static change(attrs){return new Change(attrs)}static common(attrs){return new Common(attrs)}static compress(attrs){return new Compress(attrs)}static compressLogicalStructure(attrs){return new CompressLogicalStructure(attrs)}static compressObjectStream(attrs){return new CompressObjectStream(attrs)}static compression(attrs){return new Compression(attrs)}static config(attrs){return new Config(attrs)}static conformance(attrs){return new Conformance(attrs)}static contentCopy(attrs){return new ContentCopy(attrs)}static copies(attrs){return new Copies(attrs)}static creator(attrs){return new Creator(attrs)}static currentPage(attrs){return new CurrentPage(attrs)}static data(attrs){return new Data(attrs)}static debug(attrs){return new Debug(attrs)}static defaultTypeface(attrs){return new DefaultTypeface(attrs)}static destination(attrs){return new Destination(attrs)}static documentAssembly(attrs){return new DocumentAssembly(attrs)}static driver(attrs){return new Driver(attrs)}static duplexOption(attrs){return new DuplexOption(attrs)}static dynamicRender(attrs){return new DynamicRender(attrs)}static embed(attrs){return new Embed(attrs)}static encrypt(attrs){return new Encrypt(attrs)}static encryption(attrs){return new Encryption(attrs)}static encryptionLevel(attrs){return new EncryptionLevel(attrs)}static enforce(attrs){return new Enforce(attrs)}static equate(attrs){return new Equate(attrs)}static equateRange(attrs){return new EquateRange(attrs)}static exclude(attrs){return new Exclude(attrs)}static excludeNS(attrs){return new ExcludeNS(attrs)}static flipLabel(attrs){return new FlipLabel(attrs)}static fontInfo(attrs){return new FontInfo(attrs)}static formFieldFilling(attrs){return new FormFieldFilling(attrs)}static groupParent(attrs){return new GroupParent(attrs)}static ifEmpty(attrs){return new IfEmpty(attrs)}static includeXDPContent(attrs){return new IncludeXDPContent(attrs)}static incrementalLoad(attrs){return new IncrementalLoad(attrs)}static incrementalMerge(attrs){return new IncrementalMerge(attrs)}static interactive(attrs){return new Interactive(attrs)}static jog(attrs){return new Jog(attrs)}static labelPrinter(attrs){return new LabelPrinter(attrs)}static layout(attrs){return new Layout(attrs)}static level(attrs){return new Level(attrs)}static linearized(attrs){return new Linearized(attrs)}static locale(attrs){return new Locale(attrs)}static localeSet(attrs){return new LocaleSet(attrs)}static log(attrs){return new Log(attrs)}static map(attrs){return new MapElement(attrs)}static mediumInfo(attrs){return new MediumInfo(attrs)}static message(attrs){return new Message(attrs)}static messaging(attrs){return new Messaging(attrs)}static mode(attrs){return new Mode(attrs)}static modifyAnnots(attrs){return new ModifyAnnots(attrs)}static msgId(attrs){return new MsgId(attrs)}static nameAttr(attrs){return new NameAttr(attrs)}static neverEmbed(attrs){return new NeverEmbed(attrs)}static numberOfCopies(attrs){return new NumberOfCopies(attrs)}static openAction(attrs){return new OpenAction(attrs)}static output(attrs){return new Output(attrs)}static outputBin(attrs){return new OutputBin(attrs)}static outputXSL(attrs){return new OutputXSL(attrs)}static overprint(attrs){return new Overprint(attrs)}static packets(attrs){return new Packets(attrs)}static pageOffset(attrs){return new PageOffset(attrs)}static pageRange(attrs){return new PageRange(attrs)}static pagination(attrs){return new Pagination(attrs)}static paginationOverride(attrs){return new PaginationOverride(attrs)}static part(attrs){return new Part(attrs)}static pcl(attrs){return new Pcl(attrs)}static pdf(attrs){return new Pdf(attrs)}static pdfa(attrs){return new Pdfa(attrs)}static permissions(attrs){return new Permissions(attrs)}static pickTrayByPDFSize(attrs){return new PickTrayByPDFSize(attrs)}static picture(attrs){return new Picture(attrs)}static plaintextMetadata(attrs){return new PlaintextMetadata(attrs)}static presence(attrs){return new Presence(attrs)}static present(attrs){return new Present(attrs)}static print(attrs){return new Print(attrs)}static printHighQuality(attrs){return new PrintHighQuality(attrs)}static printScaling(attrs){return new PrintScaling(attrs)}static printerName(attrs){return new PrinterName(attrs)}static producer(attrs){return new Producer(attrs)}static ps(attrs){return new Ps(attrs)}static range(attrs){return new Range(attrs)}static record(attrs){return new Record(attrs)}static relevant(attrs){return new Relevant(attrs)}static rename(attrs){return new Rename(attrs)}static renderPolicy(attrs){return new RenderPolicy(attrs)}static runScripts(attrs){return new RunScripts(attrs)}static script(attrs){return new Script(attrs)}static scriptModel(attrs){return new ScriptModel(attrs)}static severity(attrs){return new Severity(attrs)}static silentPrint(attrs){return new SilentPrint(attrs)}static staple(attrs){return new Staple(attrs)}static startNode(attrs){return new StartNode(attrs)}static startPage(attrs){return new StartPage(attrs)}static submitFormat(attrs){return new SubmitFormat(attrs)}static submitUrl(attrs){return new SubmitUrl(attrs)}static subsetBelow(attrs){return new SubsetBelow(attrs)}static suppressBanner(attrs){return new SuppressBanner(attrs)}static tagged(attrs){return new Tagged(attrs)}static template(attrs){return new Template(attrs)}static templateCache(attrs){return new TemplateCache(attrs)}static threshold(attrs){return new Threshold(attrs)}static to(attrs){return new To(attrs)}static trace(attrs){return new Trace(attrs)}static transform(attrs){return new Transform(attrs)}static type(attrs){return new Type(attrs)}static uri(attrs){return new Uri(attrs)}static validate(attrs){return new Validate(attrs)}static validateApprovalSignatures(attrs){return new ValidateApprovalSignatures(attrs)}static validationMessaging(attrs){return new ValidationMessaging(attrs)}static version(attrs){return new Version(attrs)}static versionControl(attrs){return new VersionControl(attrs)}static viewerPreferences(attrs){return new ViewerPreferences(attrs)}static webClient(attrs){return new WebClient(attrs)}static whitespace(attrs){return new Whitespace(attrs)}static window(attrs){return new Window(attrs)}static xdc(attrs){return new Xdc(attrs)}static xdp(attrs){return new Xdp(attrs)}static xsl(attrs){return new Xsl(attrs)}static zpl(attrs){return new Zpl(attrs)}};__name(_ConfigNamespace,"ConfigNamespace");let ConfigNamespace=_ConfigNamespace;exports3.ConfigNamespace=ConfigNamespace},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.ConnectionSetNamespace=void 0;var _namespaces=__w_pdfjs_require__3(79),_xfa_object=__w_pdfjs_require__3(77);const CONNECTION_SET_NS_ID=_namespaces.NamespaceIds.connectionSet.id,_ConnectionSet=class extends _xfa_object.XFAObject{static{__name2(this,"_ConnectionSet")}constructor(attributes){super(CONNECTION_SET_NS_ID,"connectionSet",!0),this.wsdlConnection=new _xfa_object.XFAObjectArray,this.xmlConnection=new _xfa_object.XFAObjectArray,this.xsdConnection=new _xfa_object.XFAObjectArray}};__name(_ConnectionSet,"ConnectionSet");let ConnectionSet=_ConnectionSet;const _EffectiveInputPolicy=class extends _xfa_object.XFAObject{static{__name2(this,"_EffectiveInputPolicy")}constructor(attributes){super(CONNECTION_SET_NS_ID,"effectiveInputPolicy"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_EffectiveInputPolicy,"EffectiveInputPolicy");let EffectiveInputPolicy=_EffectiveInputPolicy;const _EffectiveOutputPolicy=class extends _xfa_object.XFAObject{static{__name2(this,"_EffectiveOutputPolicy")}constructor(attributes){super(CONNECTION_SET_NS_ID,"effectiveOutputPolicy"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_EffectiveOutputPolicy,"EffectiveOutputPolicy");let EffectiveOutputPolicy=_EffectiveOutputPolicy;const _Operation=class extends _xfa_object.StringObject{static{__name2(this,"_Operation")}constructor(attributes){super(CONNECTION_SET_NS_ID,"operation"),this.id=attributes.id||"",this.input=attributes.input||"",this.name=attributes.name||"",this.output=attributes.output||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Operation,"Operation");let Operation=_Operation;const _RootElement=class extends _xfa_object.StringObject{static{__name2(this,"_RootElement")}constructor(attributes){super(CONNECTION_SET_NS_ID,"rootElement"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_RootElement,"RootElement");let RootElement=_RootElement;const _SoapAction=class extends _xfa_object.StringObject{static{__name2(this,"_SoapAction")}constructor(attributes){super(CONNECTION_SET_NS_ID,"soapAction"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_SoapAction,"SoapAction");let SoapAction=_SoapAction;const _SoapAddress=class extends _xfa_object.StringObject{static{__name2(this,"_SoapAddress")}constructor(attributes){super(CONNECTION_SET_NS_ID,"soapAddress"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_SoapAddress,"SoapAddress");let SoapAddress=_SoapAddress;const _Uri=class extends _xfa_object.StringObject{static{__name2(this,"_Uri")}constructor(attributes){super(CONNECTION_SET_NS_ID,"uri"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_Uri,"Uri");let Uri=_Uri;const _WsdlAddress=class extends _xfa_object.StringObject{static{__name2(this,"_WsdlAddress")}constructor(attributes){super(CONNECTION_SET_NS_ID,"wsdlAddress"),this.id=attributes.id||"",this.name=attributes.name||"",this.use=attributes.use||"",this.usehref=attributes.usehref||""}};__name(_WsdlAddress,"WsdlAddress");let WsdlAddress=_WsdlAddress;const _WsdlConnection=class extends _xfa_object.XFAObject{static{__name2(this,"_WsdlConnection")}constructor(attributes){super(CONNECTION_SET_NS_ID,"wsdlConnection",!0),this.dataDescription=attributes.dataDescription||"",this.name=attributes.name||"",this.effectiveInputPolicy=null,this.effectiveOutputPolicy=null,this.operation=null,this.soapAction=null,this.soapAddress=null,this.wsdlAddress=null}};__name(_WsdlConnection,"WsdlConnection");let WsdlConnection=_WsdlConnection;const _XmlConnection=class extends _xfa_object.XFAObject{static{__name2(this,"_XmlConnection")}constructor(attributes){super(CONNECTION_SET_NS_ID,"xmlConnection",!0),this.dataDescription=attributes.dataDescription||"",this.name=attributes.name||"",this.uri=null}};__name(_XmlConnection,"XmlConnection");let XmlConnection=_XmlConnection;const _XsdConnection=class extends _xfa_object.XFAObject{static{__name2(this,"_XsdConnection")}constructor(attributes){super(CONNECTION_SET_NS_ID,"xsdConnection",!0),this.dataDescription=attributes.dataDescription||"",this.name=attributes.name||"",this.rootElement=null,this.uri=null}};__name(_XsdConnection,"XsdConnection");let XsdConnection=_XsdConnection;const _ConnectionSetNamespace=class _ConnectionSetNamespace2{static{__name2(this,"_ConnectionSetNamespace")}static[_namespaces.$buildXFAObject](name,attributes){if(_ConnectionSetNamespace2.hasOwnProperty(name))return _ConnectionSetNamespace2[name](attributes)}static connectionSet(attrs){return new ConnectionSet(attrs)}static effectiveInputPolicy(attrs){return new EffectiveInputPolicy(attrs)}static effectiveOutputPolicy(attrs){return new EffectiveOutputPolicy(attrs)}static operation(attrs){return new Operation(attrs)}static rootElement(attrs){return new RootElement(attrs)}static soapAction(attrs){return new SoapAction(attrs)}static soapAddress(attrs){return new SoapAddress(attrs)}static uri(attrs){return new Uri(attrs)}static wsdlAddress(attrs){return new WsdlAddress(attrs)}static wsdlConnection(attrs){return new WsdlConnection(attrs)}static xmlConnection(attrs){return new XmlConnection(attrs)}static xsdConnection(attrs){return new XsdConnection(attrs)}};__name(_ConnectionSetNamespace,"ConnectionSetNamespace");let ConnectionSetNamespace=_ConnectionSetNamespace;exports3.ConnectionSetNamespace=ConnectionSetNamespace},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.DatasetsNamespace=void 0;var _xfa_object=__w_pdfjs_require__3(77),_namespaces=__w_pdfjs_require__3(79);const DATASETS_NS_ID=_namespaces.NamespaceIds.datasets.id,_Data=class extends _xfa_object.XmlObject{static{__name2(this,"_Data")}constructor(attributes){super(DATASETS_NS_ID,"data",attributes)}[_xfa_object.$isNsAgnostic](){return!0}};__name(_Data,"Data");let Data=_Data;const _Datasets=class extends _xfa_object.XFAObject{static{__name2(this,"_Datasets")}constructor(attributes){super(DATASETS_NS_ID,"datasets",!0),this.data=null,this.Signature=null}[_xfa_object.$onChild](child){const name=child[_xfa_object.$nodeName];(name==="data"&&child[_xfa_object.$namespaceId]===DATASETS_NS_ID||name==="Signature"&&child[_xfa_object.$namespaceId]===_namespaces.NamespaceIds.signature.id)&&(this[name]=child),this[_xfa_object.$appendChild](child)}};__name(_Datasets,"Datasets");let Datasets=_Datasets;const _DatasetsNamespace=class _DatasetsNamespace2{static{__name2(this,"_DatasetsNamespace")}static[_namespaces.$buildXFAObject](name,attributes){if(_DatasetsNamespace2.hasOwnProperty(name))return _DatasetsNamespace2[name](attributes)}static datasets(attributes){return new Datasets(attributes)}static data(attributes){return new Data(attributes)}};__name(_DatasetsNamespace,"DatasetsNamespace");let DatasetsNamespace=_DatasetsNamespace;exports3.DatasetsNamespace=DatasetsNamespace},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.LocaleSetNamespace=void 0;var _namespaces=__w_pdfjs_require__3(79),_xfa_object=__w_pdfjs_require__3(77),_utils=__w_pdfjs_require__3(78);const LOCALE_SET_NS_ID=_namespaces.NamespaceIds.localeSet.id,_CalendarSymbols=class extends _xfa_object.XFAObject{static{__name2(this,"_CalendarSymbols")}constructor(attributes){super(LOCALE_SET_NS_ID,"calendarSymbols",!0),this.name="gregorian",this.dayNames=new _xfa_object.XFAObjectArray(2),this.eraNames=null,this.meridiemNames=null,this.monthNames=new _xfa_object.XFAObjectArray(2)}};__name(_CalendarSymbols,"CalendarSymbols");let CalendarSymbols=_CalendarSymbols;const _CurrencySymbol=class extends _xfa_object.StringObject{static{__name2(this,"_CurrencySymbol")}constructor(attributes){super(LOCALE_SET_NS_ID,"currencySymbol"),this.name=(0,_utils.getStringOption)(attributes.name,["symbol","isoname","decimal"])}};__name(_CurrencySymbol,"CurrencySymbol");let CurrencySymbol=_CurrencySymbol;const _CurrencySymbols=class extends _xfa_object.XFAObject{static{__name2(this,"_CurrencySymbols")}constructor(attributes){super(LOCALE_SET_NS_ID,"currencySymbols",!0),this.currencySymbol=new _xfa_object.XFAObjectArray(3)}};__name(_CurrencySymbols,"CurrencySymbols");let CurrencySymbols=_CurrencySymbols;const _DatePattern=class extends _xfa_object.StringObject{static{__name2(this,"_DatePattern")}constructor(attributes){super(LOCALE_SET_NS_ID,"datePattern"),this.name=(0,_utils.getStringOption)(attributes.name,["full","long","med","short"])}};__name(_DatePattern,"DatePattern");let DatePattern=_DatePattern;const _DatePatterns=class extends _xfa_object.XFAObject{static{__name2(this,"_DatePatterns")}constructor(attributes){super(LOCALE_SET_NS_ID,"datePatterns",!0),this.datePattern=new _xfa_object.XFAObjectArray(4)}};__name(_DatePatterns,"DatePatterns");let DatePatterns=_DatePatterns;const _DateTimeSymbols=class extends _xfa_object.ContentObject{static{__name2(this,"_DateTimeSymbols")}constructor(attributes){super(LOCALE_SET_NS_ID,"dateTimeSymbols")}};__name(_DateTimeSymbols,"DateTimeSymbols");let DateTimeSymbols=_DateTimeSymbols;const _Day=class extends _xfa_object.StringObject{static{__name2(this,"_Day")}constructor(attributes){super(LOCALE_SET_NS_ID,"day")}};__name(_Day,"Day");let Day=_Day;const _DayNames=class extends _xfa_object.XFAObject{static{__name2(this,"_DayNames")}constructor(attributes){super(LOCALE_SET_NS_ID,"dayNames",!0),this.abbr=(0,_utils.getInteger)({data:attributes.abbr,defaultValue:0,validate:x=>x===1}),this.day=new _xfa_object.XFAObjectArray(7)}};__name(_DayNames,"DayNames");let DayNames=_DayNames;const _Era=class extends _xfa_object.StringObject{static{__name2(this,"_Era")}constructor(attributes){super(LOCALE_SET_NS_ID,"era")}};__name(_Era,"Era");let Era=_Era;const _EraNames=class extends _xfa_object.XFAObject{static{__name2(this,"_EraNames")}constructor(attributes){super(LOCALE_SET_NS_ID,"eraNames",!0),this.era=new _xfa_object.XFAObjectArray(2)}};__name(_EraNames,"EraNames");let EraNames=_EraNames;const _Locale=class extends _xfa_object.XFAObject{static{__name2(this,"_Locale")}constructor(attributes){super(LOCALE_SET_NS_ID,"locale",!0),this.desc=attributes.desc||"",this.name="isoname",this.calendarSymbols=null,this.currencySymbols=null,this.datePatterns=null,this.dateTimeSymbols=null,this.numberPatterns=null,this.numberSymbols=null,this.timePatterns=null,this.typeFaces=null}};__name(_Locale,"Locale");let Locale=_Locale;const _LocaleSet=class extends _xfa_object.XFAObject{static{__name2(this,"_LocaleSet")}constructor(attributes){super(LOCALE_SET_NS_ID,"localeSet",!0),this.locale=new _xfa_object.XFAObjectArray}};__name(_LocaleSet,"LocaleSet");let LocaleSet=_LocaleSet;const _Meridiem=class extends _xfa_object.StringObject{static{__name2(this,"_Meridiem")}constructor(attributes){super(LOCALE_SET_NS_ID,"meridiem")}};__name(_Meridiem,"Meridiem");let Meridiem=_Meridiem;const _MeridiemNames=class extends _xfa_object.XFAObject{static{__name2(this,"_MeridiemNames")}constructor(attributes){super(LOCALE_SET_NS_ID,"meridiemNames",!0),this.meridiem=new _xfa_object.XFAObjectArray(2)}};__name(_MeridiemNames,"MeridiemNames");let MeridiemNames=_MeridiemNames;const _Month=class extends _xfa_object.StringObject{static{__name2(this,"_Month")}constructor(attributes){super(LOCALE_SET_NS_ID,"month")}};__name(_Month,"Month");let Month=_Month;const _MonthNames=class extends _xfa_object.XFAObject{static{__name2(this,"_MonthNames")}constructor(attributes){super(LOCALE_SET_NS_ID,"monthNames",!0),this.abbr=(0,_utils.getInteger)({data:attributes.abbr,defaultValue:0,validate:x=>x===1}),this.month=new _xfa_object.XFAObjectArray(12)}};__name(_MonthNames,"MonthNames");let MonthNames=_MonthNames;const _NumberPattern=class extends _xfa_object.StringObject{static{__name2(this,"_NumberPattern")}constructor(attributes){super(LOCALE_SET_NS_ID,"numberPattern"),this.name=(0,_utils.getStringOption)(attributes.name,["full","long","med","short"])}};__name(_NumberPattern,"NumberPattern");let NumberPattern=_NumberPattern;const _NumberPatterns=class extends _xfa_object.XFAObject{static{__name2(this,"_NumberPatterns")}constructor(attributes){super(LOCALE_SET_NS_ID,"numberPatterns",!0),this.numberPattern=new _xfa_object.XFAObjectArray(4)}};__name(_NumberPatterns,"NumberPatterns");let NumberPatterns=_NumberPatterns;const _NumberSymbol=class extends _xfa_object.StringObject{static{__name2(this,"_NumberSymbol")}constructor(attributes){super(LOCALE_SET_NS_ID,"numberSymbol"),this.name=(0,_utils.getStringOption)(attributes.name,["decimal","grouping","percent","minus","zero"])}};__name(_NumberSymbol,"NumberSymbol");let NumberSymbol=_NumberSymbol;const _NumberSymbols=class extends _xfa_object.XFAObject{static{__name2(this,"_NumberSymbols")}constructor(attributes){super(LOCALE_SET_NS_ID,"numberSymbols",!0),this.numberSymbol=new _xfa_object.XFAObjectArray(5)}};__name(_NumberSymbols,"NumberSymbols");let NumberSymbols=_NumberSymbols;const _TimePattern=class extends _xfa_object.StringObject{static{__name2(this,"_TimePattern")}constructor(attributes){super(LOCALE_SET_NS_ID,"timePattern"),this.name=(0,_utils.getStringOption)(attributes.name,["full","long","med","short"])}};__name(_TimePattern,"TimePattern");let TimePattern=_TimePattern;const _TimePatterns=class extends _xfa_object.XFAObject{static{__name2(this,"_TimePatterns")}constructor(attributes){super(LOCALE_SET_NS_ID,"timePatterns",!0),this.timePattern=new _xfa_object.XFAObjectArray(4)}};__name(_TimePatterns,"TimePatterns");let TimePatterns=_TimePatterns;const _TypeFace=class extends _xfa_object.XFAObject{static{__name2(this,"_TypeFace")}constructor(attributes){super(LOCALE_SET_NS_ID,"typeFace",!0),this.name=attributes.name|""}};__name(_TypeFace,"TypeFace");let TypeFace=_TypeFace;const _TypeFaces=class extends _xfa_object.XFAObject{static{__name2(this,"_TypeFaces")}constructor(attributes){super(LOCALE_SET_NS_ID,"typeFaces",!0),this.typeFace=new _xfa_object.XFAObjectArray}};__name(_TypeFaces,"TypeFaces");let TypeFaces=_TypeFaces;const _LocaleSetNamespace=class _LocaleSetNamespace2{static{__name2(this,"_LocaleSetNamespace")}static[_namespaces.$buildXFAObject](name,attributes){if(_LocaleSetNamespace2.hasOwnProperty(name))return _LocaleSetNamespace2[name](attributes)}static calendarSymbols(attrs){return new CalendarSymbols(attrs)}static currencySymbol(attrs){return new CurrencySymbol(attrs)}static currencySymbols(attrs){return new CurrencySymbols(attrs)}static datePattern(attrs){return new DatePattern(attrs)}static datePatterns(attrs){return new DatePatterns(attrs)}static dateTimeSymbols(attrs){return new DateTimeSymbols(attrs)}static day(attrs){return new Day(attrs)}static dayNames(attrs){return new DayNames(attrs)}static era(attrs){return new Era(attrs)}static eraNames(attrs){return new EraNames(attrs)}static locale(attrs){return new Locale(attrs)}static localeSet(attrs){return new LocaleSet(attrs)}static meridiem(attrs){return new Meridiem(attrs)}static meridiemNames(attrs){return new MeridiemNames(attrs)}static month(attrs){return new Month(attrs)}static monthNames(attrs){return new MonthNames(attrs)}static numberPattern(attrs){return new NumberPattern(attrs)}static numberPatterns(attrs){return new NumberPatterns(attrs)}static numberSymbol(attrs){return new NumberSymbol(attrs)}static numberSymbols(attrs){return new NumberSymbols(attrs)}static timePattern(attrs){return new TimePattern(attrs)}static timePatterns(attrs){return new TimePatterns(attrs)}static typeFace(attrs){return new TypeFace(attrs)}static typeFaces(attrs){return new TypeFaces(attrs)}};__name(_LocaleSetNamespace,"LocaleSetNamespace");let LocaleSetNamespace=_LocaleSetNamespace;exports3.LocaleSetNamespace=LocaleSetNamespace},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.SignatureNamespace=void 0;var _namespaces=__w_pdfjs_require__3(79),_xfa_object=__w_pdfjs_require__3(77);const SIGNATURE_NS_ID=_namespaces.NamespaceIds.signature.id,_Signature=class extends _xfa_object.XFAObject{static{__name2(this,"_Signature")}constructor(attributes){super(SIGNATURE_NS_ID,"signature",!0)}};__name(_Signature,"Signature");let Signature=_Signature;const _SignatureNamespace=class _SignatureNamespace2{static{__name2(this,"_SignatureNamespace")}static[_namespaces.$buildXFAObject](name,attributes){if(_SignatureNamespace2.hasOwnProperty(name))return _SignatureNamespace2[name](attributes)}static signature(attributes){return new Signature(attributes)}};__name(_SignatureNamespace,"SignatureNamespace");let SignatureNamespace=_SignatureNamespace;exports3.SignatureNamespace=SignatureNamespace},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.StylesheetNamespace=void 0;var _namespaces=__w_pdfjs_require__3(79),_xfa_object=__w_pdfjs_require__3(77);const STYLESHEET_NS_ID=_namespaces.NamespaceIds.stylesheet.id,_Stylesheet=class extends _xfa_object.XFAObject{static{__name2(this,"_Stylesheet")}constructor(attributes){super(STYLESHEET_NS_ID,"stylesheet",!0)}};__name(_Stylesheet,"Stylesheet");let Stylesheet=_Stylesheet;const _StylesheetNamespace=class _StylesheetNamespace2{static{__name2(this,"_StylesheetNamespace")}static[_namespaces.$buildXFAObject](name,attributes){if(_StylesheetNamespace2.hasOwnProperty(name))return _StylesheetNamespace2[name](attributes)}static stylesheet(attributes){return new Stylesheet(attributes)}};__name(_StylesheetNamespace,"StylesheetNamespace");let StylesheetNamespace=_StylesheetNamespace;exports3.StylesheetNamespace=StylesheetNamespace},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.XdpNamespace=void 0;var _namespaces=__w_pdfjs_require__3(79),_xfa_object=__w_pdfjs_require__3(77);const XDP_NS_ID=_namespaces.NamespaceIds.xdp.id,_Xdp=class extends _xfa_object.XFAObject{static{__name2(this,"_Xdp")}constructor(attributes){super(XDP_NS_ID,"xdp",!0),this.uuid=attributes.uuid||"",this.timeStamp=attributes.timeStamp||"",this.config=null,this.connectionSet=null,this.datasets=null,this.localeSet=null,this.stylesheet=new _xfa_object.XFAObjectArray,this.template=null}[_xfa_object.$onChildCheck](child){const ns=_namespaces.NamespaceIds[child[_xfa_object.$nodeName]];return ns&&child[_xfa_object.$namespaceId]===ns.id}};__name(_Xdp,"Xdp");let Xdp=_Xdp;const _XdpNamespace=class _XdpNamespace2{static{__name2(this,"_XdpNamespace")}static[_namespaces.$buildXFAObject](name,attributes){if(_XdpNamespace2.hasOwnProperty(name))return _XdpNamespace2[name](attributes)}static xdp(attributes){return new Xdp(attributes)}};__name(_XdpNamespace,"XdpNamespace");let XdpNamespace=_XdpNamespace;exports3.XdpNamespace=XdpNamespace},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.XhtmlNamespace=void 0;var _xfa_object=__w_pdfjs_require__3(77),_namespaces=__w_pdfjs_require__3(79),_html_utils=__w_pdfjs_require__3(84),_utils=__w_pdfjs_require__3(78);const XHTML_NS_ID=_namespaces.NamespaceIds.xhtml.id,$richText=Symbol(),VALID_STYLES=new Set(["color","font","font-family","font-size","font-stretch","font-style","font-weight","margin","margin-bottom","margin-left","margin-right","margin-top","letter-spacing","line-height","orphans","page-break-after","page-break-before","page-break-inside","tab-interval","tab-stop","text-align","text-decoration","text-indent","vertical-align","widows","kerning-mode","xfa-font-horizontal-scale","xfa-font-vertical-scale","xfa-spacerun","xfa-tab-stops"]),StyleMapping=new Map([["page-break-after","breakAfter"],["page-break-before","breakBefore"],["page-break-inside","breakInside"],["kerning-mode",value=>value==="none"?"none":"normal"],["xfa-font-horizontal-scale",value=>`scaleX(${Math.max(0,Math.min(parseInt(value)/100)).toFixed(2)})`],["xfa-font-vertical-scale",value=>`scaleY(${Math.max(0,Math.min(parseInt(value)/100)).toFixed(2)})`],["xfa-spacerun",""],["xfa-tab-stops",""],["font-size",(value,original)=>(value=original.fontSize=(0,_utils.getMeasurement)(value),(0,_html_utils.measureToString)(.99*value))],["letter-spacing",value=>(0,_html_utils.measureToString)((0,_utils.getMeasurement)(value))],["line-height",value=>(0,_html_utils.measureToString)((0,_utils.getMeasurement)(value))],["margin",value=>(0,_html_utils.measureToString)((0,_utils.getMeasurement)(value))],["margin-bottom",value=>(0,_html_utils.measureToString)((0,_utils.getMeasurement)(value))],["margin-left",value=>(0,_html_utils.measureToString)((0,_utils.getMeasurement)(value))],["margin-right",value=>(0,_html_utils.measureToString)((0,_utils.getMeasurement)(value))],["margin-top",value=>(0,_html_utils.measureToString)((0,_utils.getMeasurement)(value))],["text-indent",value=>(0,_html_utils.measureToString)((0,_utils.getMeasurement)(value))],["font-family",value=>value],["vertical-align",value=>(0,_html_utils.measureToString)((0,_utils.getMeasurement)(value))]]),spacesRegExp=/\s+/g,crlfRegExp=/[\r\n]+/g,crlfForRichTextRegExp=/\r\n?/g;function mapStyle(styleStr,node,richText){const style=Object.create(null);if(!styleStr)return style;const original=Object.create(null);for(const[key,value]of styleStr.split(";").map(s=>s.split(":",2))){const mapping=StyleMapping.get(key);if(mapping==="")continue;let newValue=value;mapping&&(typeof mapping=="string"?newValue=mapping:newValue=mapping(value,original)),key.endsWith("scale")?style.transform?style.transform=`${style[key]} ${newValue}`:style.transform=newValue:style[key.replaceAll(/-([a-zA-Z])/g,(_,x)=>x.toUpperCase())]=newValue}if(style.fontFamily&&(0,_html_utils.setFontFamily)({typeface:style.fontFamily,weight:style.fontWeight||"normal",posture:style.fontStyle||"normal",size:original.fontSize||0},node,node[_xfa_object.$globalData].fontFinder,style),richText&&style.verticalAlign&&style.verticalAlign!=="0px"&&style.fontSize){const fontSize=(0,_utils.getMeasurement)(style.fontSize);style.fontSize=(0,_html_utils.measureToString)(fontSize*.583),style.verticalAlign=(0,_html_utils.measureToString)(Math.sign((0,_utils.getMeasurement)(style.verticalAlign))*fontSize*.333)}return richText&&style.fontSize&&(style.fontSize=`calc(${style.fontSize} * var(--scale-factor))`),(0,_html_utils.fixTextIndent)(style),style}__name2(mapStyle,"mapStyle"),__name(mapStyle,"mapStyle");function checkStyle(node){return node.style?node.style.trim().split(/\s*;\s*/).filter(s=>!!s).map(s=>s.split(/\s*:\s*/,2)).filter(([key,value])=>(key==="font-family"&&node[_xfa_object.$globalData].usedTypefaces.add(value),VALID_STYLES.has(key))).map(kv=>kv.join(":")).join(";"):""}__name2(checkStyle,"checkStyle"),__name(checkStyle,"checkStyle");const NoWhites=new Set(["body","html"]),_XhtmlObject=class extends _xfa_object.XmlObject{static{__name2(this,"_XhtmlObject")}constructor(attributes,name){super(XHTML_NS_ID,name),this[$richText]=!1,this.style=attributes.style||""}[_xfa_object.$clean](builder){super[_xfa_object.$clean](builder),this.style=checkStyle(this)}[_xfa_object.$acceptWhitespace](){return!NoWhites.has(this[_xfa_object.$nodeName])}[_xfa_object.$onText](str,richText=!1){richText?this[$richText]=!0:(str=str.replace(crlfRegExp,""),this.style.includes("xfa-spacerun:yes")||(str=str.replace(spacesRegExp," "))),str&&(this[_xfa_object.$content]+=str)}[_xfa_object.$pushGlyphs](measure,mustPop=!0){const xfaFont=Object.create(null),margin={top:NaN,bottom:NaN,left:NaN,right:NaN};let lineHeight=null;for(const[key,value]of this.style.split(";").map(s=>s.split(":",2)))switch(key){case"font-family":xfaFont.typeface=(0,_utils.stripQuotes)(value);break;case"font-size":xfaFont.size=(0,_utils.getMeasurement)(value);break;case"font-weight":xfaFont.weight=value;break;case"font-style":xfaFont.posture=value;break;case"letter-spacing":xfaFont.letterSpacing=(0,_utils.getMeasurement)(value);break;case"margin":const values=value.split(/ \t/).map(x=>(0,_utils.getMeasurement)(x));switch(values.length){case 1:margin.top=margin.bottom=margin.left=margin.right=values[0];break;case 2:margin.top=margin.bottom=values[0],margin.left=margin.right=values[1];break;case 3:margin.top=values[0],margin.bottom=values[2],margin.left=margin.right=values[1];break;case 4:margin.top=values[0],margin.left=values[1],margin.bottom=values[2],margin.right=values[3];break}break;case"margin-top":margin.top=(0,_utils.getMeasurement)(value);break;case"margin-bottom":margin.bottom=(0,_utils.getMeasurement)(value);break;case"margin-left":margin.left=(0,_utils.getMeasurement)(value);break;case"margin-right":margin.right=(0,_utils.getMeasurement)(value);break;case"line-height":lineHeight=(0,_utils.getMeasurement)(value);break}if(measure.pushData(xfaFont,margin,lineHeight),this[_xfa_object.$content])measure.addString(this[_xfa_object.$content]);else for(const child of this[_xfa_object.$getChildren]()){if(child[_xfa_object.$nodeName]==="#text"){measure.addString(child[_xfa_object.$content]);continue}child[_xfa_object.$pushGlyphs](measure)}mustPop&&measure.popFont()}[_xfa_object.$toHTML](availableSpace){const children=[];if(this[_xfa_object.$extra]={children},this[_xfa_object.$childrenToHTML]({}),children.length===0&&!this[_xfa_object.$content])return _utils.HTMLResult.EMPTY;let value;return this[$richText]?value=this[_xfa_object.$content]?this[_xfa_object.$content].replace(crlfForRichTextRegExp,`
`):void 0:value=this[_xfa_object.$content]||void 0,_utils.HTMLResult.success({name:this[_xfa_object.$nodeName],attributes:{href:this.href,style:mapStyle(this.style,this,this[$richText])},children,value})}};__name(_XhtmlObject,"XhtmlObject");let XhtmlObject=_XhtmlObject;const _A=class extends XhtmlObject{static{__name2(this,"_A")}constructor(attributes){super(attributes,"a"),this.href=(0,_html_utils.fixURL)(attributes.href)||""}};__name(_A,"A");let A=_A;const _B=class extends XhtmlObject{static{__name2(this,"_B")}constructor(attributes){super(attributes,"b")}[_xfa_object.$pushGlyphs](measure){measure.pushFont({weight:"bold"}),super[_xfa_object.$pushGlyphs](measure),measure.popFont()}};__name(_B,"B");let B=_B;const _Body=class extends XhtmlObject{static{__name2(this,"_Body")}constructor(attributes){super(attributes,"body")}[_xfa_object.$toHTML](availableSpace){const res=super[_xfa_object.$toHTML](availableSpace),{html}=res;return html?(html.name="div",html.attributes.class=["xfaRich"],res):_utils.HTMLResult.EMPTY}};__name(_Body,"Body");let Body=_Body;const _Br=class extends XhtmlObject{static{__name2(this,"_Br")}constructor(attributes){super(attributes,"br")}[_xfa_object.$text](){return`
`}[_xfa_object.$pushGlyphs](measure){measure.addString(`
`)}[_xfa_object.$toHTML](availableSpace){return _utils.HTMLResult.success({name:"br"})}};__name(_Br,"Br");let Br=_Br;const _Html=class extends XhtmlObject{static{__name2(this,"_Html")}constructor(attributes){super(attributes,"html")}[_xfa_object.$toHTML](availableSpace){const children=[];if(this[_xfa_object.$extra]={children},this[_xfa_object.$childrenToHTML]({}),children.length===0)return _utils.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},value:this[_xfa_object.$content]||""});if(children.length===1){const child=children[0];if(child.attributes&&child.attributes.class.includes("xfaRich"))return _utils.HTMLResult.success(child)}return _utils.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},children})}};__name(_Html,"Html");let Html=_Html;const _I=class extends XhtmlObject{static{__name2(this,"_I")}constructor(attributes){super(attributes,"i")}[_xfa_object.$pushGlyphs](measure){measure.pushFont({posture:"italic"}),super[_xfa_object.$pushGlyphs](measure),measure.popFont()}};__name(_I,"I");let I=_I;const _Li=class extends XhtmlObject{static{__name2(this,"_Li")}constructor(attributes){super(attributes,"li")}};__name(_Li,"Li");let Li=_Li;const _Ol=class extends XhtmlObject{static{__name2(this,"_Ol")}constructor(attributes){super(attributes,"ol")}};__name(_Ol,"Ol");let Ol=_Ol;const _P=class extends XhtmlObject{static{__name2(this,"_P")}constructor(attributes){super(attributes,"p")}[_xfa_object.$pushGlyphs](measure){super[_xfa_object.$pushGlyphs](measure,!1),measure.addString(`
`),measure.addPara(),measure.popFont()}[_xfa_object.$text](){return this[_xfa_object.$getParent]()[_xfa_object.$getChildren]().at(-1)===this?super[_xfa_object.$text]():super[_xfa_object.$text]()+`
`}};__name(_P,"P");let P=_P;const _Span=class extends XhtmlObject{static{__name2(this,"_Span")}constructor(attributes){super(attributes,"span")}};__name(_Span,"Span");let Span=_Span;const _Sub=class extends XhtmlObject{static{__name2(this,"_Sub")}constructor(attributes){super(attributes,"sub")}};__name(_Sub,"Sub");let Sub=_Sub;const _Sup=class extends XhtmlObject{static{__name2(this,"_Sup")}constructor(attributes){super(attributes,"sup")}};__name(_Sup,"Sup");let Sup=_Sup;const _Ul=class extends XhtmlObject{static{__name2(this,"_Ul")}constructor(attributes){super(attributes,"ul")}};__name(_Ul,"Ul");let Ul=_Ul;const _XhtmlNamespace=class _XhtmlNamespace2{static{__name2(this,"_XhtmlNamespace")}static[_namespaces.$buildXFAObject](name,attributes){if(_XhtmlNamespace2.hasOwnProperty(name))return _XhtmlNamespace2[name](attributes)}static a(attributes){return new A(attributes)}static b(attributes){return new B(attributes)}static body(attributes){return new Body(attributes)}static br(attributes){return new Br(attributes)}static html(attributes){return new Html(attributes)}static i(attributes){return new I(attributes)}static li(attributes){return new Li(attributes)}static ol(attributes){return new Ol(attributes)}static p(attributes){return new P(attributes)}static span(attributes){return new Span(attributes)}static sub(attributes){return new Sub(attributes)}static sup(attributes){return new Sup(attributes)}static ul(attributes){return new Ul(attributes)}};__name(_XhtmlNamespace,"XhtmlNamespace");let XhtmlNamespace=_XhtmlNamespace;exports3.XhtmlNamespace=XhtmlNamespace},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.UnknownNamespace=void 0;var _namespaces=__w_pdfjs_require__3(79),_xfa_object=__w_pdfjs_require__3(77);const _UnknownNamespace=class{static{__name2(this,"_UnknownNamespace")}constructor(nsId){this.namespaceId=nsId}[_namespaces.$buildXFAObject](name,attributes){return new _xfa_object.XmlObject(this.namespaceId,name,attributes)}};__name(_UnknownNamespace,"UnknownNamespace");let UnknownNamespace=_UnknownNamespace;exports3.UnknownNamespace=UnknownNamespace},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.DatasetReader=void 0;var _util2=__w_pdfjs_require__3(2),_core_utils=__w_pdfjs_require__3(6),_xml_parser=__w_pdfjs_require__3(66);function decodeString(str){try{return(0,_util2.stringToUTF8String)(str)}catch(ex){return(0,_util2.warn)(`UTF-8 decoding failed: "${ex}".`),str}}__name2(decodeString,"decodeString"),__name(decodeString,"decodeString");const _DatasetXMLParser=class extends _xml_parser.SimpleXMLParser{static{__name2(this,"_DatasetXMLParser")}constructor(options){super(options),this.node=null}onEndElement(name){const node=super.onEndElement(name);if(node&&name==="xfa:datasets")throw this.node=node,new Error("Aborting DatasetXMLParser.")}};__name(_DatasetXMLParser,"DatasetXMLParser");let DatasetXMLParser=_DatasetXMLParser;const _DatasetReader=class{static{__name2(this,"_DatasetReader")}constructor(data){if(data.datasets)this.node=new _xml_parser.SimpleXMLParser({hasAttributes:!0}).parseFromString(data.datasets).documentElement;else{const parser=new DatasetXMLParser({hasAttributes:!0});try{parser.parseFromString(data["xdp:xdp"])}catch{}this.node=parser.node}}getValue(path){if(!this.node||!path)return"";const node=this.node.searchNode((0,_core_utils.parseXFAPath)(path),0);if(!node)return"";const first=node.firstChild;return first&&first.nodeName==="value"?node.children.map(child=>decodeString(child.textContent)):decodeString(node.textContent)}};__name(_DatasetReader,"DatasetReader");let DatasetReader=_DatasetReader;exports3.DatasetReader=DatasetReader},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.XRef=void 0;var _util2=__w_pdfjs_require__3(2),_primitives=__w_pdfjs_require__3(5),_core_utils=__w_pdfjs_require__3(6),_parser=__w_pdfjs_require__3(17),_base_stream=__w_pdfjs_require__3(7),_crypto=__w_pdfjs_require__3(67);const _XRef=class{static{__name2(this,"_XRef")}constructor(stream,pdfManager){this.stream=stream,this.pdfManager=pdfManager,this.entries=[],this.xrefstms=Object.create(null),this._cacheMap=new Map,this._pendingRefs=new _primitives.RefSet,this.stats=new _core_utils.DocStats(pdfManager.msgHandler),this._newRefNum=null}getNewRef(){return this._newRefNum===null&&(this._newRefNum=this.entries.length||1),_primitives.Ref.get(this._newRefNum++,0)}resetNewRef(){this._newRefNum=null}setStartXRef(startXRef){this.startXRefQueue=[startXRef]}parse(recoveryMode=!1){let trailerDict;recoveryMode?((0,_util2.warn)("Indexing all PDF objects"),trailerDict=this.indexObjects()):trailerDict=this.readXRef(),trailerDict.assignXref(this),this.trailer=trailerDict;let encrypt;try{encrypt=trailerDict.get("Encrypt")}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.warn)(`XRef.parse - Invalid "Encrypt" reference: "${ex}".`)}if(encrypt instanceof _primitives.Dict){const ids=trailerDict.get("ID"),fileId=ids&&ids.length?ids[0]:"";encrypt.suppressEncryption=!0,this.encrypt=new _crypto.CipherTransformFactory(encrypt,fileId,this.pdfManager.password)}let root;try{root=trailerDict.get("Root")}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.warn)(`XRef.parse - Invalid "Root" reference: "${ex}".`)}if(root instanceof _primitives.Dict)try{if(root.get("Pages")instanceof _primitives.Dict){this.root=root;return}}catch(ex){if(ex instanceof _core_utils.MissingDataException)throw ex;(0,_util2.warn)(`XRef.parse - Invalid "Pages" reference: "${ex}".`)}throw recoveryMode?new _util2.InvalidPDFException("Invalid Root reference."):new _core_utils.XRefParseException}processXRefTable(parser){"tableState"in this||(this.tableState={entryNum:0,streamPos:parser.lexer.stream.pos,parserBuf1:parser.buf1,parserBuf2:parser.buf2});const obj=this.readXRefTable(parser);if(!(0,_primitives.isCmd)(obj,"trailer"))throw new _util2.FormatError("Invalid XRef table: could not find trailer dictionary");let dict=parser.getObj();if(!(dict instanceof _primitives.Dict)&&dict.dict&&(dict=dict.dict),!(dict instanceof _primitives.Dict))throw new _util2.FormatError("Invalid XRef table: could not parse trailer dictionary");return delete this.tableState,dict}readXRefTable(parser){const stream=parser.lexer.stream,tableState=this.tableState;stream.pos=tableState.streamPos,parser.buf1=tableState.parserBuf1,parser.buf2=tableState.parserBuf2;let obj;for(;;){if(!("firstEntryNum"in tableState)||!("entryCount"in tableState)){if((0,_primitives.isCmd)(obj=parser.getObj(),"trailer"))break;tableState.firstEntryNum=obj,tableState.entryCount=parser.getObj()}let first=tableState.firstEntryNum;const count=tableState.entryCount;if(!Number.isInteger(first)||!Number.isInteger(count))throw new _util2.FormatError("Invalid XRef table: wrong types in subsection header");for(let i=tableState.entryNum;i<count;i++){tableState.streamPos=stream.pos,tableState.entryNum=i,tableState.parserBuf1=parser.buf1,tableState.parserBuf2=parser.buf2;const entry={};entry.offset=parser.getObj(),entry.gen=parser.getObj();const type=parser.getObj();if(type instanceof _primitives.Cmd)switch(type.cmd){case"f":entry.free=!0;break;case"n":entry.uncompressed=!0;break}if(!Number.isInteger(entry.offset)||!Number.isInteger(entry.gen)||!(entry.free||entry.uncompressed))throw new _util2.FormatError(`Invalid entry in XRef subsection: ${first}, ${count}`);i===0&&entry.free&&first===1&&(first=0),this.entries[i+first]||(this.entries[i+first]=entry)}tableState.entryNum=0,tableState.streamPos=stream.pos,tableState.parserBuf1=parser.buf1,tableState.parserBuf2=parser.buf2,delete tableState.firstEntryNum,delete tableState.entryCount}if(this.entries[0]&&!this.entries[0].free)throw new _util2.FormatError("Invalid XRef table: unexpected first object");return obj}processXRefStream(stream){if(!("streamState"in this)){const streamParameters=stream.dict,byteWidths=streamParameters.get("W");let range=streamParameters.get("Index");range||(range=[0,streamParameters.get("Size")]),this.streamState={entryRanges:range,byteWidths,entryNum:0,streamPos:stream.pos}}return this.readXRefStream(stream),delete this.streamState,stream.dict}readXRefStream(stream){const streamState=this.streamState;stream.pos=streamState.streamPos;const[typeFieldWidth,offsetFieldWidth,generationFieldWidth]=streamState.byteWidths,entryRanges=streamState.entryRanges;for(;entryRanges.length>0;){const[first,n]=entryRanges;if(!Number.isInteger(first)||!Number.isInteger(n))throw new _util2.FormatError(`Invalid XRef range fields: ${first}, ${n}`);if(!Number.isInteger(typeFieldWidth)||!Number.isInteger(offsetFieldWidth)||!Number.isInteger(generationFieldWidth))throw new _util2.FormatError(`Invalid XRef entry fields length: ${first}, ${n}`);for(let i=streamState.entryNum;i<n;++i){streamState.entryNum=i,streamState.streamPos=stream.pos;let type=0,offset=0,generation=0;for(let j=0;j<typeFieldWidth;++j){const typeByte=stream.getByte();if(typeByte===-1)throw new _util2.FormatError("Invalid XRef byteWidths 'type'.");type=type<<8|typeByte}typeFieldWidth===0&&(type=1);for(let j=0;j<offsetFieldWidth;++j){const offsetByte=stream.getByte();if(offsetByte===-1)throw new _util2.FormatError("Invalid XRef byteWidths 'offset'.");offset=offset<<8|offsetByte}for(let j=0;j<generationFieldWidth;++j){const generationByte=stream.getByte();if(generationByte===-1)throw new _util2.FormatError("Invalid XRef byteWidths 'generation'.");generation=generation<<8|generationByte}const entry={};switch(entry.offset=offset,entry.gen=generation,type){case 0:entry.free=!0;break;case 1:entry.uncompressed=!0;break;case 2:break;default:throw new _util2.FormatError(`Invalid XRef entry type: ${type}`)}this.entries[first+i]||(this.entries[first+i]=entry)}streamState.entryNum=0,streamState.streamPos=stream.pos,entryRanges.splice(0,2)}}indexObjects(){function readToken(data,offset){let token="",ch=data[offset];for(;ch!==10&&ch!==13&&ch!==60&&!(++offset>=data.length);)token+=String.fromCharCode(ch),ch=data[offset];return token}__name2(readToken,"readToken"),__name(readToken,"readToken");function skipUntil(data,offset,what){const length2=what.length,dataLength=data.length;let skipped=0;for(;offset<dataLength;){let i=0;for(;i<length2&&data[offset+i]===what[i];)++i;if(i>=length2)break;offset++,skipped++}return skipped}__name2(skipUntil,"skipUntil"),__name(skipUntil,"skipUntil");const objRegExp=/^(\d+)\s+(\d+)\s+obj\b/,endobjRegExp=/\bendobj[\b\s]$/,nestedObjRegExp=/\s+(\d+\s+\d+\s+obj[\b\s<])$/,CHECK_CONTENT_LENGTH=25,trailerBytes=new Uint8Array([116,114,97,105,108,101,114]),startxrefBytes=new Uint8Array([115,116,97,114,116,120,114,101,102]),objBytes=new Uint8Array([111,98,106]),xrefBytes=new Uint8Array([47,88,82,101,102]);this.entries.length=0,this._cacheMap.clear();const stream=this.stream;stream.pos=0;const buffer=stream.getBytes(),length=buffer.length;let position=stream.start;const trailers=[],xrefStms=[];for(;position<length;){let ch=buffer[position];if(ch===9||ch===10||ch===13||ch===32){++position;continue}if(ch===37){do{if(++position,position>=length)break;ch=buffer[position]}while(ch!==10&&ch!==13);continue}const token=readToken(buffer,position);let m;if(token.startsWith("xref")&&(token.length===4||/\s/.test(token[4])))position+=skipUntil(buffer,position,trailerBytes),trailers.push(position),position+=skipUntil(buffer,position,startxrefBytes);else if(m=objRegExp.exec(token)){const num=m[1]|0,gen=m[2]|0;let contentLength,startPos=position+token.length,updateEntries=!1;if(!this.entries[num])updateEntries=!0;else if(this.entries[num].gen===gen)try{new _parser.Parser({lexer:new _parser.Lexer(stream.makeSubStream(startPos))}).getObj(),updateEntries=!0}catch(ex){ex instanceof _core_utils.ParserEOFException?(0,_util2.warn)(`indexObjects -- checking object (${token}): "${ex}".`):updateEntries=!0}for(updateEntries&&(this.entries[num]={offset:position-stream.start,gen,uncompressed:!0});startPos<buffer.length;){const endPos=startPos+skipUntil(buffer,startPos,objBytes)+4;contentLength=endPos-position;const checkPos=Math.max(endPos-CHECK_CONTENT_LENGTH,startPos),tokenStr=(0,_util2.bytesToString)(buffer.subarray(checkPos,endPos));if(endobjRegExp.test(tokenStr))break;{const objToken=nestedObjRegExp.exec(tokenStr);if(objToken&&objToken[1]){(0,_util2.warn)('indexObjects: Found new "obj" inside of another "obj", caused by missing "endobj" -- trying to recover.'),contentLength-=objToken[1].length;break}}startPos=endPos}const content=buffer.subarray(position,position+contentLength),xrefTagOffset=skipUntil(content,0,xrefBytes);xrefTagOffset<contentLength&&content[xrefTagOffset+5]<64&&(xrefStms.push(position-stream.start),this.xrefstms[position-stream.start]=1),position+=contentLength}else token.startsWith("trailer")&&(token.length===7||/\s/.test(token[7]))?(trailers.push(position),position+=skipUntil(buffer,position,startxrefBytes)):position+=token.length+1}for(let i=0,ii=xrefStms.length;i<ii;++i)this.startXRefQueue.push(xrefStms[i]),this.readXRef(!0);let trailerDict;for(let i=0,ii=trailers.length;i<ii;++i){stream.pos=trailers[i];const parser=new _parser.Parser({lexer:new _parser.Lexer(stream),xref:this,allowStreams:!0,recoveryMode:!0}),obj=parser.getObj();if(!(0,_primitives.isCmd)(obj,"trailer"))continue;const dict=parser.getObj();if(dict instanceof _primitives.Dict){try{const rootDict=dict.get("Root");if(!(rootDict instanceof _primitives.Dict))continue;const pagesDict=rootDict.get("Pages");if(!(pagesDict instanceof _primitives.Dict))continue;const pagesCount=pagesDict.get("Count");if(!Number.isInteger(pagesCount))continue}catch{continue}if(dict.has("ID"))return dict;trailerDict=dict}}if(trailerDict)return trailerDict;if(this.topDict)return this.topDict;throw new _util2.InvalidPDFException("Invalid PDF structure.")}readXRef(recoveryMode=!1){const stream=this.stream,startXRefParsedCache=new Set;try{for(;this.startXRefQueue.length;){const startXRef=this.startXRefQueue[0];if(startXRefParsedCache.has(startXRef)){(0,_util2.warn)("readXRef - skipping XRef table since it was already parsed."),this.startXRefQueue.shift();continue}startXRefParsedCache.add(startXRef),stream.pos=startXRef+stream.start;const parser=new _parser.Parser({lexer:new _parser.Lexer(stream),xref:this,allowStreams:!0});let obj=parser.getObj(),dict;if((0,_primitives.isCmd)(obj,"xref")){if(dict=this.processXRefTable(parser),this.topDict||(this.topDict=dict),obj=dict.get("XRefStm"),Number.isInteger(obj)){const pos=obj;pos in this.xrefstms||(this.xrefstms[pos]=1,this.startXRefQueue.push(pos))}}else if(Number.isInteger(obj)){if(!Number.isInteger(parser.getObj())||!(0,_primitives.isCmd)(parser.getObj(),"obj")||!((obj=parser.getObj())instanceof _base_stream.BaseStream))throw new _util2.FormatError("Invalid XRef stream");if(dict=this.processXRefStream(obj),this.topDict||(this.topDict=dict),!dict)throw new _util2.FormatError("Failed to read XRef stream")}else throw new _util2.FormatError("Invalid XRef stream header");obj=dict.get("Prev"),Number.isInteger(obj)?this.startXRefQueue.push(obj):obj instanceof _primitives.Ref&&this.startXRefQueue.push(obj.num),this.startXRefQueue.shift()}return this.topDict}catch(e){if(e instanceof _core_utils.MissingDataException)throw e;(0,_util2.info)("(while reading XRef): "+e),this.startXRefQueue.shift()}if(!recoveryMode)throw new _core_utils.XRefParseException}getEntry(i){const xrefEntry=this.entries[i];return xrefEntry&&!xrefEntry.free&&xrefEntry.offset?xrefEntry:null}fetchIfRef(obj,suppressEncryption=!1){return obj instanceof _primitives.Ref?this.fetch(obj,suppressEncryption):obj}fetch(ref,suppressEncryption=!1){if(!(ref instanceof _primitives.Ref))throw new Error("ref object is not a reference");const num=ref.num,cacheEntry=this._cacheMap.get(num);if(cacheEntry!==void 0)return cacheEntry instanceof _primitives.Dict&&!cacheEntry.objId&&(cacheEntry.objId=ref.toString()),cacheEntry;let xrefEntry=this.getEntry(num);if(xrefEntry===null)return this._cacheMap.set(num,xrefEntry),xrefEntry;if(this._pendingRefs.has(ref))return this._pendingRefs.remove(ref),(0,_util2.warn)(`Ignoring circular reference: ${ref}.`),_primitives.CIRCULAR_REF;this._pendingRefs.put(ref);try{xrefEntry.uncompressed?xrefEntry=this.fetchUncompressed(ref,xrefEntry,suppressEncryption):xrefEntry=this.fetchCompressed(ref,xrefEntry,suppressEncryption),this._pendingRefs.remove(ref)}catch(ex){throw this._pendingRefs.remove(ref),ex}return xrefEntry instanceof _primitives.Dict?xrefEntry.objId=ref.toString():xrefEntry instanceof _base_stream.BaseStream&&(xrefEntry.dict.objId=ref.toString()),xrefEntry}fetchUncompressed(ref,xrefEntry,suppressEncryption=!1){const gen=ref.gen;let num=ref.num;if(xrefEntry.gen!==gen)throw new _core_utils.XRefEntryException(`Inconsistent generation in XRef: ${ref}`);const stream=this.stream.makeSubStream(xrefEntry.offset+this.stream.start),parser=new _parser.Parser({lexer:new _parser.Lexer(stream),xref:this,allowStreams:!0}),obj1=parser.getObj(),obj2=parser.getObj(),obj3=parser.getObj();if(obj1!==num||obj2!==gen||!(obj3 instanceof _primitives.Cmd))throw new _core_utils.XRefEntryException(`Bad (uncompressed) XRef entry: ${ref}`);if(obj3.cmd!=="obj"){if(obj3.cmd.startsWith("obj")&&(num=parseInt(obj3.cmd.substring(3),10),!Number.isNaN(num)))return num;throw new _core_utils.XRefEntryException(`Bad (uncompressed) XRef entry: ${ref}`)}return this.encrypt&&!suppressEncryption?xrefEntry=parser.getObj(this.encrypt.createCipherTransform(num,gen)):xrefEntry=parser.getObj(),xrefEntry instanceof _base_stream.BaseStream||this._cacheMap.set(num,xrefEntry),xrefEntry}fetchCompressed(ref,xrefEntry,suppressEncryption=!1){const tableOffset=xrefEntry.offset,stream=this.fetch(_primitives.Ref.get(tableOffset,0));if(!(stream instanceof _base_stream.BaseStream))throw new _util2.FormatError("bad ObjStm stream");const first=stream.dict.get("First"),n=stream.dict.get("N");if(!Number.isInteger(first)||!Number.isInteger(n))throw new _util2.FormatError("invalid first and n parameters for ObjStm stream");let parser=new _parser.Parser({lexer:new _parser.Lexer(stream),xref:this,allowStreams:!0});const nums=new Array(n),offsets=new Array(n);for(let i=0;i<n;++i){const num=parser.getObj();if(!Number.isInteger(num))throw new _util2.FormatError(`invalid object number in the ObjStm stream: ${num}`);const offset=parser.getObj();if(!Number.isInteger(offset))throw new _util2.FormatError(`invalid object offset in the ObjStm stream: ${offset}`);nums[i]=num,offsets[i]=offset}const start=(stream.start||0)+first,entries=new Array(n);for(let i=0;i<n;++i){const length=i<n-1?offsets[i+1]-offsets[i]:void 0;if(length<0)throw new _util2.FormatError("Invalid offset in the ObjStm stream.");parser=new _parser.Parser({lexer:new _parser.Lexer(stream.makeSubStream(start+offsets[i],length,stream.dict)),xref:this,allowStreams:!0});const obj=parser.getObj();if(entries[i]=obj,obj instanceof _base_stream.BaseStream)continue;const num=nums[i],entry=this.entries[num];entry&&entry.offset===tableOffset&&entry.gen===i&&this._cacheMap.set(num,obj)}if(xrefEntry=entries[xrefEntry.gen],xrefEntry===void 0)throw new _core_utils.XRefEntryException(`Bad (compressed) XRef entry: ${ref}`);return xrefEntry}async fetchIfRefAsync(obj,suppressEncryption){return obj instanceof _primitives.Ref?this.fetchAsync(obj,suppressEncryption):obj}async fetchAsync(ref,suppressEncryption){try{return this.fetch(ref,suppressEncryption)}catch(ex){if(!(ex instanceof _core_utils.MissingDataException))throw ex;return await this.pdfManager.requestRange(ex.begin,ex.end),this.fetchAsync(ref,suppressEncryption)}}getCatalogObj(){return this.root}};__name(_XRef,"XRef");let XRef=_XRef;exports3.XRef=XRef},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.MessageHandler=void 0;var _util2=__w_pdfjs_require__3(2);const CallbackKind={UNKNOWN:0,DATA:1,ERROR:2},StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(reason){switch(reason instanceof Error||typeof reason=="object"&&reason!==null||(0,_util2.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),reason.name){case"AbortException":return new _util2.AbortException(reason.message);case"MissingPDFException":return new _util2.MissingPDFException(reason.message);case"PasswordException":return new _util2.PasswordException(reason.message,reason.code);case"UnexpectedResponseException":return new _util2.UnexpectedResponseException(reason.message,reason.status);case"UnknownErrorException":return new _util2.UnknownErrorException(reason.message,reason.details);default:return new _util2.UnknownErrorException(reason.message,reason.toString())}}__name2(wrapReason,"wrapReason"),__name(wrapReason,"wrapReason");const _MessageHandler=class{static{__name2(this,"_MessageHandler")}constructor(sourceName,targetName,comObj){this.sourceName=sourceName,this.targetName=targetName,this.comObj=comObj,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=event=>{const data=event.data;if(data.targetName!==this.sourceName)return;if(data.stream){this._processStreamMessage(data);return}if(data.callback){const callbackId=data.callbackId,capability=this.callbackCapabilities[callbackId];if(!capability)throw new Error(`Cannot resolve callback ${callbackId}`);if(delete this.callbackCapabilities[callbackId],data.callback===CallbackKind.DATA)capability.resolve(data.data);else if(data.callback===CallbackKind.ERROR)capability.reject(wrapReason(data.reason));else throw new Error("Unexpected callback case");return}const action=this.actionHandler[data.action];if(!action)throw new Error(`Unknown action from worker: ${data.action}`);if(data.callbackId){const cbSourceName=this.sourceName,cbTargetName=data.sourceName;new Promise(function(resolve){resolve(action(data.data))}).then(function(result){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.DATA,callbackId:data.callbackId,data:result})},function(reason){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.ERROR,callbackId:data.callbackId,reason:wrapReason(reason)})});return}if(data.streamId){this._createStreamSink(data);return}action(data.data)},comObj.addEventListener("message",this._onComObjOnMessage)}on(actionName,handler){const ah=this.actionHandler;if(ah[actionName])throw new Error(`There is already an actionName called "${actionName}"`);ah[actionName]=handler}send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data},transfers)}sendWithPromise(actionName,data,transfers){const callbackId=this.callbackId++,capability=(0,_util2.createPromiseCapability)();this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId,data},transfers)}catch(ex){capability.reject(ex)}return capability.promise}sendWithStream(actionName,data,queueingStrategy,transfers){const streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:controller=>{const startCapability=(0,_util2.createPromiseCapability)();return this.streamControllers[streamId]={controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:!1},comObj.postMessage({sourceName,targetName,action:actionName,streamId,data,desiredSize:controller.desiredSize},transfers),startCapability.promise},pull:controller=>{const pullCapability=(0,_util2.createPromiseCapability)();return this.streamControllers[streamId].pullCall=pullCapability,comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL,streamId,desiredSize:controller.desiredSize}),pullCapability.promise},cancel:reason=>{(0,_util2.assert)(reason instanceof Error,"cancel must have a valid reason");const cancelCapability=(0,_util2.createPromiseCapability)();return this.streamControllers[streamId].cancelCall=cancelCapability,this.streamControllers[streamId].isClosed=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL,streamId,reason:wrapReason(reason)}),cancelCapability.promise}},queueingStrategy)}_createStreamSink(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,self2=this,action=this.actionHandler[data.action],streamSink={enqueue(chunk,size=1,transfers){if(this.isCancelled)return;const lastDesiredSize=this.desiredSize;this.desiredSize-=size,lastDesiredSize>0&&this.desiredSize<=0&&(this.sinkCapability=(0,_util2.createPromiseCapability)(),this.ready=this.sinkCapability.promise),comObj.postMessage({sourceName,targetName,stream:StreamKind.ENQUEUE,streamId,chunk},transfers)},close(){this.isCancelled||(this.isCancelled=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.CLOSE,streamId}),delete self2.streamSinks[streamId])},error(reason){(0,_util2.assert)(reason instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.ERROR,streamId,reason:wrapReason(reason)}))},sinkCapability:(0,_util2.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve(),streamSink.ready=streamSink.sinkCapability.promise,this.streamSinks[streamId]=streamSink,new Promise(function(resolve){resolve(action(data.data,streamSink))}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,reason:wrapReason(reason)})})}_processStreamMessage(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:data.success?streamController.startCall.resolve():streamController.startCall.reject(wrapReason(data.reason));break;case StreamKind.PULL_COMPLETE:data.success?streamController.pullCall.resolve():streamController.pullCall.reject(wrapReason(data.reason));break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:!0});break}streamSink.desiredSize<=0&&data.desiredSize>0&&streamSink.sinkCapability.resolve(),streamSink.desiredSize=data.desiredSize,new Promise(function(resolve){resolve(streamSink.onPull&&streamSink.onPull())}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,reason:wrapReason(reason)})});break;case StreamKind.ENQUEUE:if((0,_util2.assert)(streamController,"enqueue should have stream controller"),streamController.isClosed)break;streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:if((0,_util2.assert)(streamController,"close should have stream controller"),streamController.isClosed)break;streamController.isClosed=!0,streamController.controller.close(),this._deleteStreamController(streamController,streamId);break;case StreamKind.ERROR:(0,_util2.assert)(streamController,"error should have stream controller"),streamController.controller.error(wrapReason(data.reason)),this._deleteStreamController(streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:data.success?streamController.cancelCall.resolve():streamController.cancelCall.reject(wrapReason(data.reason)),this._deleteStreamController(streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink)break;new Promise(function(resolve){resolve(streamSink.onCancel&&streamSink.onCancel(wrapReason(data.reason)))}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,reason:wrapReason(reason)})}),streamSink.sinkCapability.reject(wrapReason(data.reason)),streamSink.isCancelled=!0,delete this.streamSinks[streamId];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(streamController,streamId){await Promise.allSettled([streamController.startCall&&streamController.startCall.promise,streamController.pullCall&&streamController.pullCall.promise,streamController.cancelCall&&streamController.cancelCall.promise]),delete this.streamControllers[streamId]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}};__name(_MessageHandler,"MessageHandler");let MessageHandler=_MessageHandler;exports3.MessageHandler=MessageHandler},(__unused_webpack_module2,exports3,__w_pdfjs_require__3)=>{Object.defineProperty(exports3,"__esModule",{value:!0}),exports3.PDFWorkerStream=void 0;var _util2=__w_pdfjs_require__3(2);const _PDFWorkerStream=class{static{__name2(this,"_PDFWorkerStream")}constructor(msgHandler){this._msgHandler=msgHandler,this._contentLength=null,this._fullRequestReader=null,this._rangeRequestReaders=[]}getFullReader(){return(0,_util2.assert)(!this._fullRequestReader,"PDFWorkerStream.getFullReader can only be called once."),this._fullRequestReader=new PDFWorkerStreamReader(this._msgHandler),this._fullRequestReader}getRangeReader(begin,end){const reader=new PDFWorkerStreamRangeReader(begin,end,this._msgHandler);return this._rangeRequestReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}};__name(_PDFWorkerStream,"PDFWorkerStream");let PDFWorkerStream=_PDFWorkerStream;exports3.PDFWorkerStream=PDFWorkerStream;const _PDFWorkerStreamReader=class{static{__name2(this,"_PDFWorkerStreamReader")}constructor(msgHandler){this._msgHandler=msgHandler,this.onProgress=null,this._contentLength=null,this._isRangeSupported=!1,this._isStreamingSupported=!1;const readableStream=this._msgHandler.sendWithStream("GetReader");this._reader=readableStream.getReader(),this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then(data=>{this._isStreamingSupported=data.isStreamingSupported,this._isRangeSupported=data.isRangeSupported,this._contentLength=data.contentLength})}get headersReady(){return this._headersReady}get contentLength(){return this._contentLength}get isStreamingSupported(){return this._isStreamingSupported}get isRangeSupported(){return this._isRangeSupported}async read(){const{value,done}=await this._reader.read();return done?{value:void 0,done:!0}:{value:value.buffer,done:!1}}cancel(reason){this._reader.cancel(reason)}};__name(_PDFWorkerStreamReader,"PDFWorkerStreamReader");let PDFWorkerStreamReader=_PDFWorkerStreamReader;const _PDFWorkerStreamRangeReader=class{static{__name2(this,"_PDFWorkerStreamRangeReader")}constructor(begin,end,msgHandler){this._msgHandler=msgHandler,this.onProgress=null;const readableStream=this._msgHandler.sendWithStream("GetRangeReader",{begin,end});this._reader=readableStream.getReader()}get isStreamingSupported(){return!1}async read(){const{value,done}=await this._reader.read();return done?{value:void 0,done:!0}:{value:value.buffer,done:!1}}cancel(reason){this._reader.cancel(reason)}};__name(_PDFWorkerStreamRangeReader,"PDFWorkerStreamRangeReader");let PDFWorkerStreamRangeReader=_PDFWorkerStreamRangeReader}],__webpack_module_cache__2={};function __w_pdfjs_require__2(moduleId){var cachedModule=__webpack_module_cache__2[moduleId];if(cachedModule!==void 0)return cachedModule.exports;var module3=__webpack_module_cache__2[moduleId]={exports:{}};return __webpack_modules__2[moduleId](module3,module3.exports,__w_pdfjs_require__2),module3.exports}__name2(__w_pdfjs_require__2,"__w_pdfjs_require__2"),__name(__w_pdfjs_require__2,"__w_pdfjs_require__"),__w_pdfjs_require__2.d=(exports3,definition)=>{for(var key in definition)__w_pdfjs_require__2.o(definition,key)&&!__w_pdfjs_require__2.o(exports3,key)&&Object.defineProperty(exports3,key,{enumerable:!0,get:definition[key]})},__w_pdfjs_require__2.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__w_pdfjs_require__2.r=exports3=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(exports3,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports3,"__esModule",{value:!0})};var __webpack_exports__2={};return(()=>{var exports3=__webpack_exports__2;Object.defineProperty(exports3,"__esModule",{value:!0}),Object.defineProperty(exports3,"WorkerMessageHandler",{enumerable:!0,get:function(){return _worker.WorkerMessageHandler}});var _worker=__w_pdfjs_require__2(1)})(),__webpack_exports__2})())})(pdf_worker);var pdf_workerExports=pdf_worker.exports;(typeof window<"u"?window:{}).pdfjsWorker=pdf_workerExports;export{pdfExports$1 as a,pdf_worker_entry as b,compare as c,join as j,pdfExports as p};
