var __defProp2=Object.defineProperty;var __name2=(target,value)=>__defProp2(target,"name",{value,configurable:!0});var __defProp=Object.defineProperty,__name=__name2((target,value)=>__defProp(target,"name",{value,configurable:!0}),"__name");const semver=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,validateAndParse=__name(version2=>{if(typeof version2!="string")throw new TypeError("Invalid argument expected string");const match=version2.match(semver);if(!match)throw new Error(`Invalid argument not valid semver ('${version2}' received)`);return match.shift(),match},"validateAndParse"),isWildcard=__name(s=>s==="*"||s==="x"||s==="X","isWildcard"),tryParse=__name(v=>{const n=parseInt(v,10);return isNaN(n)?v:n},"tryParse"),forceType=__name((a,b)=>typeof a!=typeof b?[String(a),String(b)]:[a,b],"forceType"),compareStrings=__name((a,b)=>{if(isWildcard(a)||isWildcard(b))return 0;const[ap,bp]=forceType(tryParse(a),tryParse(b));return ap>bp?1:ap<bp?-1:0},"compareStrings"),compareSegments=__name((a,b)=>{for(let i=0;i<Math.max(a.length,b.length);i++){const r=compareStrings(a[i]||"0",b[i]||"0");if(r!==0)return r}return 0},"compareSegments"),compareVersions=__name((v1,v2)=>{const n1=validateAndParse(v1),n2=validateAndParse(v2),p1=n1.pop(),p2=n2.pop(),r=compareSegments(n1,n2);return r!==0?r:p1&&p2?compareSegments(p1.split("."),p2.split(".")):p1||p2?p1?-1:1:0},"compareVersions"),compare=__name((v1,v2,operator)=>{assertValidOperator(operator);const res=compareVersions(v1,v2);return operatorResMap[operator].includes(res)},"compare"),operatorResMap={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},allowedOperators=Object.keys(operatorResMap),assertValidOperator=__name(op=>{if(typeof op!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof op}`);if(allowedOperators.indexOf(op)===-1)throw new Error(`Invalid operator, expected one of ${allowedOperators.join("|")}`)},"assertValidOperator");function normalizeArray(parts,allowAboveRoot){for(var up=0,i=parts.length-1;i>=0;i--){var last=parts[i];last==="."?parts.splice(i,1):last===".."?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}if(allowAboveRoot)for(;up--;up)parts.unshift("..");return parts}__name2(normalizeArray,"normalizeArray"),__name(normalizeArray,"normalizeArray");function normalize(path){var isPathAbsolute=isAbsolute(path),trailingSlash=substr(path,-1)==="/";return path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isPathAbsolute).join("/"),!path&&!isPathAbsolute&&(path="."),path&&trailingSlash&&(path+="/"),(isPathAbsolute?"/":"")+path}__name2(normalize,"normalize"),__name(normalize,"normalize");function isAbsolute(path){return path.charAt(0)==="/"}__name2(isAbsolute,"isAbsolute"),__name(isAbsolute,"isAbsolute");function join(){var paths=Array.prototype.slice.call(arguments,0);return normalize(filter(paths,function(p,index){if(typeof p!="string")throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))}__name2(join,"join"),__name(join,"join");function filter(xs,f){if(xs.filter)return xs.filter(f);for(var res=[],i=0;i<xs.length;i++)f(xs[i],i,xs)&&res.push(xs[i]);return res}__name2(filter,"filter"),__name(filter,"filter");var substr="ab".substr(-1)==="b"?function(str,start,len){return str.substr(start,len)}:function(str,start,len){return start<0&&(start=str.length+start),str.substr(start,len)},commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(n){if(n.__esModule)return n;var f=n.default;if(typeof f=="function"){var a=__name(__name2(function a2(){return this instanceof a2?Reflect.construct(f,arguments,this.constructor):f.apply(this,arguments)},"a2"),"a");a.prototype=f.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(n).forEach(function(k){var d=Object.getOwnPropertyDescriptor(n,k);Object.defineProperty(a,k,d.get?d:{enumerable:!0,get:function(){return n[k]}})}),a}__name2(getAugmentedNamespace,"getAugmentedNamespace"),__name(getAugmentedNamespace,"getAugmentedNamespace");var createCanvas=__name(function(width,height){return Object.assign(document.createElement("canvas"),{width,height})},"createCanvas"),loadImage=__name(function(src,options){return new Promise(function(resolve,reject){const image=Object.assign(document.createElement("img"),options);function cleanup(){image.onload=null,image.onerror=null}__name2(cleanup,"cleanup"),__name(cleanup,"cleanup"),image.onload=function(){cleanup(),resolve(image)},image.onerror=function(){cleanup(),reject(new Error('Failed to load the image "'+src+'"'))},image.src=src})},"loadImage");function commonjsRequire(path){throw new Error('Could not dynamically require "'+path+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}__name2(commonjsRequire,"commonjsRequire"),__name(commonjsRequire,"commonjsRequire");var pdf={exports:{}},dommatrix={exports:{}};/*!
* DOMMatrix v1.0.3 (https://thednp.github.io/dommatrix/)
* Copyright 2022 Â© thednp
* Licensed under MIT (https://github.com/thednp/DOMMatrix/blob/master/LICENSE)
*/var hasRequiredDommatrix;function requireDommatrix(){return hasRequiredDommatrix||(hasRequiredDommatrix=1,function(module2,exports2){(function(global2,factory){module2.exports=factory()})(commonjsGlobal,function(){function fromArray(array){var m=new CSSMatrix,a=Array.from(array);if(!a.every(function(n){return!Number.isNaN(n)}))throw TypeError('CSSMatrix: "'+array+'" must only have numbers.');if(a.length===16){var m11=a[0],m12=a[1],m13=a[2],m14=a[3],m21=a[4],m22=a[5],m23=a[6],m24=a[7],m31=a[8],m32=a[9],m33=a[10],m34=a[11],m41=a[12],m42=a[13],m43=a[14],m44=a[15];m.m11=m11,m.a=m11,m.m21=m21,m.c=m21,m.m31=m31,m.m41=m41,m.e=m41,m.m12=m12,m.b=m12,m.m22=m22,m.d=m22,m.m32=m32,m.m42=m42,m.f=m42,m.m13=m13,m.m23=m23,m.m33=m33,m.m43=m43,m.m14=m14,m.m24=m24,m.m34=m34,m.m44=m44}else if(a.length===6){var M11=a[0],M12=a[1],M21=a[2],M22=a[3],M41=a[4],M42=a[5];m.m11=M11,m.a=M11,m.m12=M12,m.b=M12,m.m21=M21,m.c=M21,m.m22=M22,m.d=M22,m.m41=M41,m.e=M41,m.m42=M42,m.f=M42}else throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");return m}__name2(fromArray,"fromArray"),__name(fromArray,"fromArray");function fromMatrix(m){var keys=Object.keys(new CSSMatrix);if(typeof m=="object"&&keys.every(function(k){return k in m}))return fromArray([m.m11,m.m12,m.m13,m.m14,m.m21,m.m22,m.m23,m.m24,m.m31,m.m32,m.m33,m.m34,m.m41,m.m42,m.m43,m.m44]);throw TypeError('CSSMatrix: "'+JSON.stringify(m)+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}__name2(fromMatrix,"fromMatrix"),__name(fromMatrix,"fromMatrix");function fromString(source){if(typeof source!="string")throw TypeError('CSSMatrix: "'+source+'" is not a string.');var str=String(source).replace(/\s/g,""),m=new CSSMatrix,invalidStringError='CSSMatrix: invalid transform string "'+source+'"';return str.split(")").filter(function(f){return f}).forEach(function(tf){var ref=tf.split("("),prop=ref[0],value=ref[1];if(!value)throw TypeError(invalidStringError);var components=value.split(",").map(function(n){return n.includes("rad")?parseFloat(n)*(180/Math.PI):parseFloat(n)}),x=components[0],y=components[1],z=components[2],a=components[3],xyz=[x,y,z],xyza=[x,y,z,a];if(prop==="perspective"&&x&&[y,z].every(function(n){return n===void 0}))m.m34=-1/x;else if(prop.includes("matrix")&&[6,16].includes(components.length)&&components.every(function(n){return!Number.isNaN(+n)})){var values=components.map(function(n){return Math.abs(n)<1e-6?0:n});m=m.multiply(fromArray(values))}else if(prop==="translate3d"&&xyz.every(function(n){return!Number.isNaN(+n)}))m=m.translate(x,y,z);else if(prop==="translate"&&x&&z===void 0)m=m.translate(x,y||0,0);else if(prop==="rotate3d"&&xyza.every(function(n){return!Number.isNaN(+n)})&&a)m=m.rotateAxisAngle(x,y,z,a);else if(prop==="rotate"&&x&&[y,z].every(function(n){return n===void 0}))m=m.rotate(0,0,x);else if(prop==="scale3d"&&xyz.every(function(n){return!Number.isNaN(+n)})&&xyz.some(function(n){return n!==1}))m=m.scale(x,y,z);else if(prop==="scale"&&!Number.isNaN(x)&&x!==1&&z===void 0){var nosy=Number.isNaN(+y),sy=nosy?x:y;m=m.scale(x,sy,1)}else if(prop==="skew"&&(x||!Number.isNaN(x)&&y)&&z===void 0)m=m.skew(x,y||0);else if(/[XYZ]/.test(prop)&&x&&[y,z].every(function(n){return n===void 0})&&["translate","rotate","scale","skew"].some(function(p){return prop.includes(p)}))if(["skewX","skewY"].includes(prop))m=m[prop](x);else{var fn=prop.replace(/[XYZ]/,""),axis=prop.replace(fn,""),idx=["X","Y","Z"].indexOf(axis),def=fn==="scale"?1:0,axeValues=[idx===0?x:def,idx===1?x:def,idx===2?x:def];m=m[fn].apply(m,axeValues)}else throw TypeError(invalidStringError)}),m}__name2(fromString,"fromString"),__name(fromString,"fromString");function toArray(m,is2D){return is2D?[m.a,m.b,m.c,m.d,m.e,m.f]:[m.m11,m.m12,m.m13,m.m14,m.m21,m.m22,m.m23,m.m24,m.m31,m.m32,m.m33,m.m34,m.m41,m.m42,m.m43,m.m44]}__name2(toArray,"toArray"),__name(toArray,"toArray");function Translate(x,y,z){var m=new CSSMatrix;return m.m41=x,m.e=x,m.m42=y,m.f=y,m.m43=z,m}__name2(Translate,"Translate"),__name(Translate,"Translate");function Rotate(rx,ry,rz){var m=new CSSMatrix,degToRad=Math.PI/180,radX=rx*degToRad,radY=ry*degToRad,radZ=rz*degToRad,cosx=Math.cos(radX),sinx=-Math.sin(radX),cosy=Math.cos(radY),siny=-Math.sin(radY),cosz=Math.cos(radZ),sinz=-Math.sin(radZ),m11=cosy*cosz,m12=-cosy*sinz;m.m11=m11,m.a=m11,m.m12=m12,m.b=m12,m.m13=siny;var m21=sinx*siny*cosz+cosx*sinz;m.m21=m21,m.c=m21;var m22=cosx*cosz-sinx*siny*sinz;return m.m22=m22,m.d=m22,m.m23=-sinx*cosy,m.m31=sinx*sinz-cosx*siny*cosz,m.m32=sinx*cosz+cosx*siny*sinz,m.m33=cosx*cosy,m}__name2(Rotate,"Rotate"),__name(Rotate,"Rotate");function RotateAxisAngle(x,y,z,alpha){var m=new CSSMatrix,length=Math.sqrt(x*x+y*y+z*z);if(length===0)return m;var X=x/length,Y=y/length,Z=z/length,angle=alpha*(Math.PI/360),sinA=Math.sin(angle),cosA=Math.cos(angle),sinA2=sinA*sinA,x2=X*X,y2=Y*Y,z2=Z*Z,m11=1-2*(y2+z2)*sinA2;m.m11=m11,m.a=m11;var m12=2*(X*Y*sinA2+Z*sinA*cosA);m.m12=m12,m.b=m12,m.m13=2*(X*Z*sinA2-Y*sinA*cosA);var m21=2*(Y*X*sinA2-Z*sinA*cosA);m.m21=m21,m.c=m21;var m22=1-2*(z2+x2)*sinA2;return m.m22=m22,m.d=m22,m.m23=2*(Y*Z*sinA2+X*sinA*cosA),m.m31=2*(Z*X*sinA2+Y*sinA*cosA),m.m32=2*(Z*Y*sinA2-X*sinA*cosA),m.m33=1-2*(x2+y2)*sinA2,m}__name2(RotateAxisAngle,"RotateAxisAngle"),__name(RotateAxisAngle,"RotateAxisAngle");function Scale(x,y,z){var m=new CSSMatrix;return m.m11=x,m.a=x,m.m22=y,m.d=y,m.m33=z,m}__name2(Scale,"Scale"),__name(Scale,"Scale");function Skew(angleX,angleY){var m=new CSSMatrix;if(angleX){var radX=angleX*Math.PI/180,tX=Math.tan(radX);m.m21=tX,m.c=tX}if(angleY){var radY=angleY*Math.PI/180,tY=Math.tan(radY);m.m12=tY,m.b=tY}return m}__name2(Skew,"Skew"),__name(Skew,"Skew");function SkewX(angle){return Skew(angle,0)}__name2(SkewX,"SkewX"),__name(SkewX,"SkewX");function SkewY(angle){return Skew(0,angle)}__name2(SkewY,"SkewY"),__name(SkewY,"SkewY");function Multiply(m1,m2){var m11=m2.m11*m1.m11+m2.m12*m1.m21+m2.m13*m1.m31+m2.m14*m1.m41,m12=m2.m11*m1.m12+m2.m12*m1.m22+m2.m13*m1.m32+m2.m14*m1.m42,m13=m2.m11*m1.m13+m2.m12*m1.m23+m2.m13*m1.m33+m2.m14*m1.m43,m14=m2.m11*m1.m14+m2.m12*m1.m24+m2.m13*m1.m34+m2.m14*m1.m44,m21=m2.m21*m1.m11+m2.m22*m1.m21+m2.m23*m1.m31+m2.m24*m1.m41,m22=m2.m21*m1.m12+m2.m22*m1.m22+m2.m23*m1.m32+m2.m24*m1.m42,m23=m2.m21*m1.m13+m2.m22*m1.m23+m2.m23*m1.m33+m2.m24*m1.m43,m24=m2.m21*m1.m14+m2.m22*m1.m24+m2.m23*m1.m34+m2.m24*m1.m44,m31=m2.m31*m1.m11+m2.m32*m1.m21+m2.m33*m1.m31+m2.m34*m1.m41,m32=m2.m31*m1.m12+m2.m32*m1.m22+m2.m33*m1.m32+m2.m34*m1.m42,m33=m2.m31*m1.m13+m2.m32*m1.m23+m2.m33*m1.m33+m2.m34*m1.m43,m34=m2.m31*m1.m14+m2.m32*m1.m24+m2.m33*m1.m34+m2.m34*m1.m44,m41=m2.m41*m1.m11+m2.m42*m1.m21+m2.m43*m1.m31+m2.m44*m1.m41,m42=m2.m41*m1.m12+m2.m42*m1.m22+m2.m43*m1.m32+m2.m44*m1.m42,m43=m2.m41*m1.m13+m2.m42*m1.m23+m2.m43*m1.m33+m2.m44*m1.m43,m44=m2.m41*m1.m14+m2.m42*m1.m24+m2.m43*m1.m34+m2.m44*m1.m44;return fromArray([m11,m12,m13,m14,m21,m22,m23,m24,m31,m32,m33,m34,m41,m42,m43,m44])}__name2(Multiply,"Multiply"),__name(Multiply,"Multiply");var CSSMatrix=__name(__name2(function(){for(var args=[],len=arguments.length;len--;)args[len]=arguments[len];var m=this;if(m.a=1,m.b=0,m.c=0,m.d=1,m.e=0,m.f=0,m.m11=1,m.m12=0,m.m13=0,m.m14=0,m.m21=0,m.m22=1,m.m23=0,m.m24=0,m.m31=0,m.m32=0,m.m33=1,m.m34=0,m.m41=0,m.m42=0,m.m43=0,m.m44=1,args.length){var ARGS=[16,6].some(function(l){return l===args.length})?args:args[0];return m.setMatrixValue(ARGS)}return m},"CSSMatrix2"),"CSSMatrix"),prototypeAccessors={isIdentity:{configurable:!0},is2D:{configurable:!0}};prototypeAccessors.isIdentity.get=function(){var m=this;return m.m11===1&&m.m12===0&&m.m13===0&&m.m14===0&&m.m21===0&&m.m22===1&&m.m23===0&&m.m24===0&&m.m31===0&&m.m32===0&&m.m33===1&&m.m34===0&&m.m41===0&&m.m42===0&&m.m43===0&&m.m44===1},prototypeAccessors.is2D.get=function(){var m=this;return m.m31===0&&m.m32===0&&m.m33===1&&m.m34===0&&m.m43===0&&m.m44===1},CSSMatrix.prototype.setMatrixValue=__name(__name2(function(source){var m=this;return typeof source=="string"&&source.length&&source!=="none"?fromString(source):[Array,Float64Array,Float32Array].some(function(a){return source instanceof a})?fromArray(source):[CSSMatrix,DOMMatrix,Object].some(function(a){return source instanceof a})?fromMatrix(source):m},"setMatrixValue"),"setMatrixValue"),CSSMatrix.prototype.toFloat32Array=__name(__name2(function(is2D){return Float32Array.from(toArray(this,is2D))},"toFloat32Array"),"toFloat32Array"),CSSMatrix.prototype.toFloat64Array=__name(__name2(function(is2D){return Float64Array.from(toArray(this,is2D))},"toFloat64Array"),"toFloat64Array"),CSSMatrix.prototype.toString=__name(__name2(function(){var m=this,is2D=m.is2D,values=m.toFloat64Array(is2D).join(", "),type=is2D?"matrix":"matrix3d";return type+"("+values+")"},"toString"),"toString"),CSSMatrix.prototype.toJSON=__name(__name2(function(){var m=this,is2D=m.is2D,isIdentity=m.isIdentity;return Object.assign({},m,{is2D,isIdentity})},"toJSON"),"toJSON"),CSSMatrix.prototype.multiply=__name(__name2(function(m2){return Multiply(this,m2)},"multiply"),"multiply"),CSSMatrix.prototype.translate=__name(__name2(function(x,y,z){var X=x,Y=y,Z=z;return Y===void 0&&(Y=0),Z===void 0&&(Z=0),Multiply(this,Translate(X,Y,Z))},"translate"),"translate"),CSSMatrix.prototype.scale=__name(__name2(function(x,y,z){var X=x,Y=y,Z=z;return Y===void 0&&(Y=x),Z===void 0&&(Z=1),Multiply(this,Scale(X,Y,Z))},"scale"),"scale"),CSSMatrix.prototype.rotate=__name(__name2(function(rx,ry,rz){var RX=rx,RY=ry||0,RZ=rz||0;return typeof rx=="number"&&ry===void 0&&rz===void 0&&(RZ=RX,RX=0,RY=0),Multiply(this,Rotate(RX,RY,RZ))},"rotate"),"rotate"),CSSMatrix.prototype.rotateAxisAngle=__name(__name2(function(x,y,z,angle){if([x,y,z,angle].some(function(n){return Number.isNaN(+n)}))throw new TypeError("CSSMatrix: expecting 4 values");return Multiply(this,RotateAxisAngle(x,y,z,angle))},"rotateAxisAngle"),"rotateAxisAngle"),CSSMatrix.prototype.skewX=__name(__name2(function(angle){return Multiply(this,SkewX(angle))},"skewX"),"skewX"),CSSMatrix.prototype.skewY=__name(__name2(function(angle){return Multiply(this,SkewY(angle))},"skewY"),"skewY"),CSSMatrix.prototype.skew=__name(__name2(function(angleX,angleY){return Multiply(this,Skew(angleX,angleY))},"skew"),"skew"),CSSMatrix.prototype.transformPoint=__name(__name2(function(t){var m=this,x=m.m11*t.x+m.m21*t.y+m.m31*t.z+m.m41*t.w,y=m.m12*t.x+m.m22*t.y+m.m32*t.z+m.m42*t.w,z=m.m13*t.x+m.m23*t.y+m.m33*t.z+m.m43*t.w,w=m.m14*t.x+m.m24*t.y+m.m34*t.z+m.m44*t.w;return t instanceof DOMPoint?new DOMPoint(x,y,z,w):{x,y,z,w}},"transformPoint"),"transformPoint"),Object.defineProperties(CSSMatrix.prototype,prototypeAccessors),Object.assign(CSSMatrix,{Translate,Rotate,RotateAxisAngle,Scale,SkewX,SkewY,Skew,Multiply,fromArray,fromMatrix,fromString,toArray});var version2="1.0.3",Version=version2;return Object.assign(CSSMatrix,{Version}),CSSMatrix})}(dommatrix)),dommatrix.exports}__name2(requireDommatrix,"requireDommatrix"),__name(requireDommatrix,"requireDommatrix");var ponyfill={exports:{}},hasRequiredPonyfill;function requirePonyfill(){return hasRequiredPonyfill||(hasRequiredPonyfill=1,function(module2,exports2){(function(global2,factory){factory(exports2)})(commonjsGlobal,function(exports3){var SymbolPolyfill=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(description){return"Symbol("+description+")"};function noop(){}__name2(noop,"noop"),__name(noop,"noop");function getGlobals(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal<"u")return commonjsGlobal}__name2(getGlobals,"getGlobals"),__name(getGlobals,"getGlobals");var globals=getGlobals();function typeIsObject(x){return typeof x=="object"&&x!==null||typeof x=="function"}__name2(typeIsObject,"typeIsObject"),__name(typeIsObject,"typeIsObject");var rethrowAssertionErrorRejection=noop,originalPromise=Promise,originalPromiseThen=Promise.prototype.then,originalPromiseResolve=Promise.resolve.bind(originalPromise),originalPromiseReject=Promise.reject.bind(originalPromise);function newPromise(executor){return new originalPromise(executor)}__name2(newPromise,"newPromise"),__name(newPromise,"newPromise");function promiseResolvedWith(value){return originalPromiseResolve(value)}__name2(promiseResolvedWith,"promiseResolvedWith"),__name(promiseResolvedWith,"promiseResolvedWith");function promiseRejectedWith(reason){return originalPromiseReject(reason)}__name2(promiseRejectedWith,"promiseRejectedWith"),__name(promiseRejectedWith,"promiseRejectedWith");function PerformPromiseThen(promise,onFulfilled,onRejected){return originalPromiseThen.call(promise,onFulfilled,onRejected)}__name2(PerformPromiseThen,"PerformPromiseThen"),__name(PerformPromiseThen,"PerformPromiseThen");function uponPromise(promise,onFulfilled,onRejected){PerformPromiseThen(PerformPromiseThen(promise,onFulfilled,onRejected),void 0,rethrowAssertionErrorRejection)}__name2(uponPromise,"uponPromise"),__name(uponPromise,"uponPromise");function uponFulfillment(promise,onFulfilled){uponPromise(promise,onFulfilled)}__name2(uponFulfillment,"uponFulfillment"),__name(uponFulfillment,"uponFulfillment");function uponRejection(promise,onRejected){uponPromise(promise,void 0,onRejected)}__name2(uponRejection,"uponRejection"),__name(uponRejection,"uponRejection");function transformPromiseWith(promise,fulfillmentHandler,rejectionHandler){return PerformPromiseThen(promise,fulfillmentHandler,rejectionHandler)}__name2(transformPromiseWith,"transformPromiseWith"),__name(transformPromiseWith,"transformPromiseWith");function setPromiseIsHandledToTrue(promise){PerformPromiseThen(promise,void 0,rethrowAssertionErrorRejection)}__name2(setPromiseIsHandledToTrue,"setPromiseIsHandledToTrue"),__name(setPromiseIsHandledToTrue,"setPromiseIsHandledToTrue");var queueMicrotask=function(){var globalQueueMicrotask=globals&&globals.queueMicrotask;if(typeof globalQueueMicrotask=="function")return globalQueueMicrotask;var resolvedPromise=promiseResolvedWith(void 0);return function(fn){return PerformPromiseThen(resolvedPromise,fn)}}();function reflectCall(F,V,args){if(typeof F!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(F,V,args)}__name2(reflectCall,"reflectCall"),__name(reflectCall,"reflectCall");function promiseCall(F,V,args){try{return promiseResolvedWith(reflectCall(F,V,args))}catch(value){return promiseRejectedWith(value)}}__name2(promiseCall,"promiseCall"),__name(promiseCall,"promiseCall");var QUEUE_MAX_ARRAY_SIZE=16384,SimpleQueue=function(){function SimpleQueue2(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return __name2(SimpleQueue2,"SimpleQueue2"),__name(SimpleQueue2,"SimpleQueue"),Object.defineProperty(SimpleQueue2.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),SimpleQueue2.prototype.push=function(element){var oldBack=this._back,newBack=oldBack;oldBack._elements.length===QUEUE_MAX_ARRAY_SIZE-1&&(newBack={_elements:[],_next:void 0}),oldBack._elements.push(element),newBack!==oldBack&&(this._back=newBack,oldBack._next=newBack),++this._size},SimpleQueue2.prototype.shift=function(){var oldFront=this._front,newFront=oldFront,oldCursor=this._cursor,newCursor=oldCursor+1,elements=oldFront._elements,element=elements[oldCursor];return newCursor===QUEUE_MAX_ARRAY_SIZE&&(newFront=oldFront._next,newCursor=0),--this._size,this._cursor=newCursor,oldFront!==newFront&&(this._front=newFront),elements[oldCursor]=void 0,element},SimpleQueue2.prototype.forEach=function(callback){for(var i=this._cursor,node=this._front,elements=node._elements;(i!==elements.length||node._next!==void 0)&&!(i===elements.length&&(node=node._next,elements=node._elements,i=0,elements.length===0));)callback(elements[i]),++i},SimpleQueue2.prototype.peek=function(){var front=this._front,cursor=this._cursor;return front._elements[cursor]},SimpleQueue2}();function ReadableStreamReaderGenericInitialize(reader,stream){reader._ownerReadableStream=stream,stream._reader=reader,stream._state==="readable"?defaultReaderClosedPromiseInitialize(reader):stream._state==="closed"?defaultReaderClosedPromiseInitializeAsResolved(reader):defaultReaderClosedPromiseInitializeAsRejected(reader,stream._storedError)}__name2(ReadableStreamReaderGenericInitialize,"ReadableStreamReaderGenericInitialize"),__name(ReadableStreamReaderGenericInitialize,"ReadableStreamReaderGenericInitialize");function ReadableStreamReaderGenericCancel(reader,reason){var stream=reader._ownerReadableStream;return ReadableStreamCancel(stream,reason)}__name2(ReadableStreamReaderGenericCancel,"ReadableStreamReaderGenericCancel"),__name(ReadableStreamReaderGenericCancel,"ReadableStreamReaderGenericCancel");function ReadableStreamReaderGenericRelease(reader){reader._ownerReadableStream._state==="readable"?defaultReaderClosedPromiseReject(reader,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):defaultReaderClosedPromiseResetToRejected(reader,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),reader._ownerReadableStream._reader=void 0,reader._ownerReadableStream=void 0}__name2(ReadableStreamReaderGenericRelease,"ReadableStreamReaderGenericRelease"),__name(ReadableStreamReaderGenericRelease,"ReadableStreamReaderGenericRelease");function readerLockException(name){return new TypeError("Cannot "+name+" a stream using a released reader")}__name2(readerLockException,"readerLockException"),__name(readerLockException,"readerLockException");function defaultReaderClosedPromiseInitialize(reader){reader._closedPromise=newPromise(function(resolve,reject){reader._closedPromise_resolve=resolve,reader._closedPromise_reject=reject})}__name2(defaultReaderClosedPromiseInitialize,"defaultReaderClosedPromiseInitialize"),__name(defaultReaderClosedPromiseInitialize,"defaultReaderClosedPromiseInitialize");function defaultReaderClosedPromiseInitializeAsRejected(reader,reason){defaultReaderClosedPromiseInitialize(reader),defaultReaderClosedPromiseReject(reader,reason)}__name2(defaultReaderClosedPromiseInitializeAsRejected,"defaultReaderClosedPromiseInitializeAsRejected"),__name(defaultReaderClosedPromiseInitializeAsRejected,"defaultReaderClosedPromiseInitializeAsRejected");function defaultReaderClosedPromiseInitializeAsResolved(reader){defaultReaderClosedPromiseInitialize(reader),defaultReaderClosedPromiseResolve(reader)}__name2(defaultReaderClosedPromiseInitializeAsResolved,"defaultReaderClosedPromiseInitializeAsResolved"),__name(defaultReaderClosedPromiseInitializeAsResolved,"defaultReaderClosedPromiseInitializeAsResolved");function defaultReaderClosedPromiseReject(reader,reason){reader._closedPromise_reject!==void 0&&(setPromiseIsHandledToTrue(reader._closedPromise),reader._closedPromise_reject(reason),reader._closedPromise_resolve=void 0,reader._closedPromise_reject=void 0)}__name2(defaultReaderClosedPromiseReject,"defaultReaderClosedPromiseReject"),__name(defaultReaderClosedPromiseReject,"defaultReaderClosedPromiseReject");function defaultReaderClosedPromiseResetToRejected(reader,reason){defaultReaderClosedPromiseInitializeAsRejected(reader,reason)}__name2(defaultReaderClosedPromiseResetToRejected,"defaultReaderClosedPromiseResetToRejected"),__name(defaultReaderClosedPromiseResetToRejected,"defaultReaderClosedPromiseResetToRejected");function defaultReaderClosedPromiseResolve(reader){reader._closedPromise_resolve!==void 0&&(reader._closedPromise_resolve(void 0),reader._closedPromise_resolve=void 0,reader._closedPromise_reject=void 0)}__name2(defaultReaderClosedPromiseResolve,"defaultReaderClosedPromiseResolve"),__name(defaultReaderClosedPromiseResolve,"defaultReaderClosedPromiseResolve");var AbortSteps=SymbolPolyfill("[[AbortSteps]]"),ErrorSteps=SymbolPolyfill("[[ErrorSteps]]"),CancelSteps=SymbolPolyfill("[[CancelSteps]]"),PullSteps=SymbolPolyfill("[[PullSteps]]"),NumberIsFinite=Number.isFinite||function(x){return typeof x=="number"&&isFinite(x)},MathTrunc=Math.trunc||function(v){return v<0?Math.ceil(v):Math.floor(v)};function isDictionary(x){return typeof x=="object"||typeof x=="function"}__name2(isDictionary,"isDictionary"),__name(isDictionary,"isDictionary");function assertDictionary(obj,context){if(obj!==void 0&&!isDictionary(obj))throw new TypeError(context+" is not an object.")}__name2(assertDictionary,"assertDictionary"),__name(assertDictionary,"assertDictionary");function assertFunction(x,context){if(typeof x!="function")throw new TypeError(context+" is not a function.")}__name2(assertFunction,"assertFunction"),__name(assertFunction,"assertFunction");function isObject(x){return typeof x=="object"&&x!==null||typeof x=="function"}__name2(isObject,"isObject"),__name(isObject,"isObject");function assertObject(x,context){if(!isObject(x))throw new TypeError(context+" is not an object.")}__name2(assertObject,"assertObject"),__name(assertObject,"assertObject");function assertRequiredArgument(x,position,context){if(x===void 0)throw new TypeError("Parameter "+position+" is required in '"+context+"'.")}__name2(assertRequiredArgument,"assertRequiredArgument"),__name(assertRequiredArgument,"assertRequiredArgument");function assertRequiredField(x,field,context){if(x===void 0)throw new TypeError(field+" is required in '"+context+"'.")}__name2(assertRequiredField,"assertRequiredField"),__name(assertRequiredField,"assertRequiredField");function convertUnrestrictedDouble(value){return Number(value)}__name2(convertUnrestrictedDouble,"convertUnrestrictedDouble"),__name(convertUnrestrictedDouble,"convertUnrestrictedDouble");function censorNegativeZero(x){return x===0?0:x}__name2(censorNegativeZero,"censorNegativeZero"),__name(censorNegativeZero,"censorNegativeZero");function integerPart(x){return censorNegativeZero(MathTrunc(x))}__name2(integerPart,"integerPart"),__name(integerPart,"integerPart");function convertUnsignedLongLongWithEnforceRange(value,context){var lowerBound=0,upperBound=Number.MAX_SAFE_INTEGER,x=Number(value);if(x=censorNegativeZero(x),!NumberIsFinite(x))throw new TypeError(context+" is not a finite number");if(x=integerPart(x),x<lowerBound||x>upperBound)throw new TypeError(context+" is outside the accepted range of "+lowerBound+" to "+upperBound+", inclusive");return!NumberIsFinite(x)||x===0?0:x}__name2(convertUnsignedLongLongWithEnforceRange,"convertUnsignedLongLongWithEnforceRange"),__name(convertUnsignedLongLongWithEnforceRange,"convertUnsignedLongLongWithEnforceRange");function assertReadableStream(x,context){if(!IsReadableStream(x))throw new TypeError(context+" is not a ReadableStream.")}__name2(assertReadableStream,"assertReadableStream"),__name(assertReadableStream,"assertReadableStream");function AcquireReadableStreamDefaultReader(stream){return new ReadableStreamDefaultReader(stream)}__name2(AcquireReadableStreamDefaultReader,"AcquireReadableStreamDefaultReader"),__name(AcquireReadableStreamDefaultReader,"AcquireReadableStreamDefaultReader");function ReadableStreamAddReadRequest(stream,readRequest){stream._reader._readRequests.push(readRequest)}__name2(ReadableStreamAddReadRequest,"ReadableStreamAddReadRequest"),__name(ReadableStreamAddReadRequest,"ReadableStreamAddReadRequest");function ReadableStreamFulfillReadRequest(stream,chunk,done){var reader=stream._reader,readRequest=reader._readRequests.shift();done?readRequest._closeSteps():readRequest._chunkSteps(chunk)}__name2(ReadableStreamFulfillReadRequest,"ReadableStreamFulfillReadRequest"),__name(ReadableStreamFulfillReadRequest,"ReadableStreamFulfillReadRequest");function ReadableStreamGetNumReadRequests(stream){return stream._reader._readRequests.length}__name2(ReadableStreamGetNumReadRequests,"ReadableStreamGetNumReadRequests"),__name(ReadableStreamGetNumReadRequests,"ReadableStreamGetNumReadRequests");function ReadableStreamHasDefaultReader(stream){var reader=stream._reader;return!(reader===void 0||!IsReadableStreamDefaultReader(reader))}__name2(ReadableStreamHasDefaultReader,"ReadableStreamHasDefaultReader"),__name(ReadableStreamHasDefaultReader,"ReadableStreamHasDefaultReader");var ReadableStreamDefaultReader=function(){function ReadableStreamDefaultReader2(stream){if(assertRequiredArgument(stream,1,"ReadableStreamDefaultReader"),assertReadableStream(stream,"First parameter"),IsReadableStreamLocked(stream))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ReadableStreamReaderGenericInitialize(this,stream),this._readRequests=new SimpleQueue}return __name2(ReadableStreamDefaultReader2,"ReadableStreamDefaultReader2"),__name(ReadableStreamDefaultReader2,"ReadableStreamDefaultReader"),Object.defineProperty(ReadableStreamDefaultReader2.prototype,"closed",{get:function(){return IsReadableStreamDefaultReader(this)?this._closedPromise:promiseRejectedWith(defaultReaderBrandCheckException("closed"))},enumerable:!1,configurable:!0}),ReadableStreamDefaultReader2.prototype.cancel=function(reason){return reason===void 0&&(reason=void 0),IsReadableStreamDefaultReader(this)?this._ownerReadableStream===void 0?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,reason):promiseRejectedWith(defaultReaderBrandCheckException("cancel"))},ReadableStreamDefaultReader2.prototype.read=function(){if(!IsReadableStreamDefaultReader(this))return promiseRejectedWith(defaultReaderBrandCheckException("read"));if(this._ownerReadableStream===void 0)return promiseRejectedWith(readerLockException("read from"));var resolvePromise,rejectPromise,promise=newPromise(function(resolve,reject){resolvePromise=resolve,rejectPromise=reject}),readRequest={_chunkSteps:function(chunk){return resolvePromise({value:chunk,done:!1})},_closeSteps:function(){return resolvePromise({value:void 0,done:!0})},_errorSteps:function(e){return rejectPromise(e)}};return ReadableStreamDefaultReaderRead(this,readRequest),promise},ReadableStreamDefaultReader2.prototype.releaseLock=function(){if(!IsReadableStreamDefaultReader(this))throw defaultReaderBrandCheckException("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}},ReadableStreamDefaultReader2}();Object.defineProperties(ReadableStreamDefaultReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ReadableStreamDefaultReader.prototype,SymbolPolyfill.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function IsReadableStreamDefaultReader(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_readRequests")?!1:x instanceof ReadableStreamDefaultReader}__name2(IsReadableStreamDefaultReader,"IsReadableStreamDefaultReader"),__name(IsReadableStreamDefaultReader,"IsReadableStreamDefaultReader");function ReadableStreamDefaultReaderRead(reader,readRequest){var stream=reader._ownerReadableStream;stream._disturbed=!0,stream._state==="closed"?readRequest._closeSteps():stream._state==="errored"?readRequest._errorSteps(stream._storedError):stream._readableStreamController[PullSteps](readRequest)}__name2(ReadableStreamDefaultReaderRead,"ReadableStreamDefaultReaderRead"),__name(ReadableStreamDefaultReaderRead,"ReadableStreamDefaultReaderRead");function defaultReaderBrandCheckException(name){return new TypeError("ReadableStreamDefaultReader.prototype."+name+" can only be used on a ReadableStreamDefaultReader")}__name2(defaultReaderBrandCheckException,"defaultReaderBrandCheckException"),__name(defaultReaderBrandCheckException,"defaultReaderBrandCheckException");var _a,AsyncIteratorPrototype;typeof SymbolPolyfill.asyncIterator=="symbol"&&(AsyncIteratorPrototype=(_a={},_a[SymbolPolyfill.asyncIterator]=function(){return this},_a),Object.defineProperty(AsyncIteratorPrototype,SymbolPolyfill.asyncIterator,{enumerable:!1}));var ReadableStreamAsyncIteratorImpl=function(){function ReadableStreamAsyncIteratorImpl2(reader,preventCancel){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=reader,this._preventCancel=preventCancel}return __name2(ReadableStreamAsyncIteratorImpl2,"ReadableStreamAsyncIteratorImpl2"),__name(ReadableStreamAsyncIteratorImpl2,"ReadableStreamAsyncIteratorImpl"),ReadableStreamAsyncIteratorImpl2.prototype.next=function(){var _this=this,nextSteps=__name(function(){return _this._nextSteps()},"nextSteps");return this._ongoingPromise=this._ongoingPromise?transformPromiseWith(this._ongoingPromise,nextSteps,nextSteps):nextSteps(),this._ongoingPromise},ReadableStreamAsyncIteratorImpl2.prototype.return=function(value){var _this=this,returnSteps=__name(function(){return _this._returnSteps(value)},"returnSteps");return this._ongoingPromise?transformPromiseWith(this._ongoingPromise,returnSteps,returnSteps):returnSteps()},ReadableStreamAsyncIteratorImpl2.prototype._nextSteps=function(){var _this=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var reader=this._reader;if(reader._ownerReadableStream===void 0)return promiseRejectedWith(readerLockException("iterate"));var resolvePromise,rejectPromise,promise=newPromise(function(resolve,reject){resolvePromise=resolve,rejectPromise=reject}),readRequest={_chunkSteps:function(chunk){_this._ongoingPromise=void 0,queueMicrotask(function(){return resolvePromise({value:chunk,done:!1})})},_closeSteps:function(){_this._ongoingPromise=void 0,_this._isFinished=!0,ReadableStreamReaderGenericRelease(reader),resolvePromise({value:void 0,done:!0})},_errorSteps:function(reason){_this._ongoingPromise=void 0,_this._isFinished=!0,ReadableStreamReaderGenericRelease(reader),rejectPromise(reason)}};return ReadableStreamDefaultReaderRead(reader,readRequest),promise},ReadableStreamAsyncIteratorImpl2.prototype._returnSteps=function(value){if(this._isFinished)return Promise.resolve({value,done:!0});this._isFinished=!0;var reader=this._reader;if(reader._ownerReadableStream===void 0)return promiseRejectedWith(readerLockException("finish iterating"));if(!this._preventCancel){var result=ReadableStreamReaderGenericCancel(reader,value);return ReadableStreamReaderGenericRelease(reader),transformPromiseWith(result,function(){return{value,done:!0}})}return ReadableStreamReaderGenericRelease(reader),promiseResolvedWith({value,done:!0})},ReadableStreamAsyncIteratorImpl2}(),ReadableStreamAsyncIteratorPrototype={next:function(){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.next():promiseRejectedWith(streamAsyncIteratorBrandCheckException("next"))},return:function(value){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.return(value):promiseRejectedWith(streamAsyncIteratorBrandCheckException("return"))}};AsyncIteratorPrototype!==void 0&&Object.setPrototypeOf(ReadableStreamAsyncIteratorPrototype,AsyncIteratorPrototype);function AcquireReadableStreamAsyncIterator(stream,preventCancel){var reader=AcquireReadableStreamDefaultReader(stream),impl=new ReadableStreamAsyncIteratorImpl(reader,preventCancel),iterator=Object.create(ReadableStreamAsyncIteratorPrototype);return iterator._asyncIteratorImpl=impl,iterator}__name2(AcquireReadableStreamAsyncIterator,"AcquireReadableStreamAsyncIterator"),__name(AcquireReadableStreamAsyncIterator,"AcquireReadableStreamAsyncIterator");function IsReadableStreamAsyncIterator(x){if(!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_asyncIteratorImpl"))return!1;try{return x._asyncIteratorImpl instanceof ReadableStreamAsyncIteratorImpl}catch{return!1}}__name2(IsReadableStreamAsyncIterator,"IsReadableStreamAsyncIterator"),__name(IsReadableStreamAsyncIterator,"IsReadableStreamAsyncIterator");function streamAsyncIteratorBrandCheckException(name){return new TypeError("ReadableStreamAsyncIterator."+name+" can only be used on a ReadableSteamAsyncIterator")}__name2(streamAsyncIteratorBrandCheckException,"streamAsyncIteratorBrandCheckException"),__name(streamAsyncIteratorBrandCheckException,"streamAsyncIteratorBrandCheckException");var NumberIsNaN=Number.isNaN||function(x){return x!==x};function CreateArrayFromList(elements){return elements.slice()}__name2(CreateArrayFromList,"CreateArrayFromList"),__name(CreateArrayFromList,"CreateArrayFromList");function CopyDataBlockBytes(dest,destOffset,src,srcOffset,n){new Uint8Array(dest).set(new Uint8Array(src,srcOffset,n),destOffset)}__name2(CopyDataBlockBytes,"CopyDataBlockBytes"),__name(CopyDataBlockBytes,"CopyDataBlockBytes");function TransferArrayBuffer(O){return O}__name2(TransferArrayBuffer,"TransferArrayBuffer"),__name(TransferArrayBuffer,"TransferArrayBuffer");function IsDetachedBuffer(O){return!1}__name2(IsDetachedBuffer,"IsDetachedBuffer"),__name(IsDetachedBuffer,"IsDetachedBuffer");function ArrayBufferSlice(buffer,begin,end){if(buffer.slice)return buffer.slice(begin,end);var length=end-begin,slice=new ArrayBuffer(length);return CopyDataBlockBytes(slice,0,buffer,begin,length),slice}__name2(ArrayBufferSlice,"ArrayBufferSlice"),__name(ArrayBufferSlice,"ArrayBufferSlice");function IsNonNegativeNumber(v){return!(typeof v!="number"||NumberIsNaN(v)||v<0)}__name2(IsNonNegativeNumber,"IsNonNegativeNumber"),__name(IsNonNegativeNumber,"IsNonNegativeNumber");function CloneAsUint8Array(O){var buffer=ArrayBufferSlice(O.buffer,O.byteOffset,O.byteOffset+O.byteLength);return new Uint8Array(buffer)}__name2(CloneAsUint8Array,"CloneAsUint8Array"),__name(CloneAsUint8Array,"CloneAsUint8Array");function DequeueValue(container){var pair=container._queue.shift();return container._queueTotalSize-=pair.size,container._queueTotalSize<0&&(container._queueTotalSize=0),pair.value}__name2(DequeueValue,"DequeueValue"),__name(DequeueValue,"DequeueValue");function EnqueueValueWithSize(container,value,size){if(!IsNonNegativeNumber(size)||size===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");container._queue.push({value,size}),container._queueTotalSize+=size}__name2(EnqueueValueWithSize,"EnqueueValueWithSize"),__name(EnqueueValueWithSize,"EnqueueValueWithSize");function PeekQueueValue(container){var pair=container._queue.peek();return pair.value}__name2(PeekQueueValue,"PeekQueueValue"),__name(PeekQueueValue,"PeekQueueValue");function ResetQueue(container){container._queue=new SimpleQueue,container._queueTotalSize=0}__name2(ResetQueue,"ResetQueue"),__name(ResetQueue,"ResetQueue");var ReadableStreamBYOBRequest=function(){function ReadableStreamBYOBRequest2(){throw new TypeError("Illegal constructor")}return __name2(ReadableStreamBYOBRequest2,"ReadableStreamBYOBRequest2"),__name(ReadableStreamBYOBRequest2,"ReadableStreamBYOBRequest"),Object.defineProperty(ReadableStreamBYOBRequest2.prototype,"view",{get:function(){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("view");return this._view},enumerable:!1,configurable:!0}),ReadableStreamBYOBRequest2.prototype.respond=function(bytesWritten){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respond");if(assertRequiredArgument(bytesWritten,1,"respond"),bytesWritten=convertUnsignedLongLongWithEnforceRange(bytesWritten,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");IsDetachedBuffer(this._view.buffer),ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController,bytesWritten)},ReadableStreamBYOBRequest2.prototype.respondWithNewView=function(view){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respondWithNewView");if(assertRequiredArgument(view,1,"respondWithNewView"),!ArrayBuffer.isView(view))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");IsDetachedBuffer(view.buffer),ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController,view)},ReadableStreamBYOBRequest2}();Object.defineProperties(ReadableStreamBYOBRequest.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ReadableStreamBYOBRequest.prototype,SymbolPolyfill.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var ReadableByteStreamController=function(){function ReadableByteStreamController2(){throw new TypeError("Illegal constructor")}return __name2(ReadableByteStreamController2,"ReadableByteStreamController2"),__name(ReadableByteStreamController2,"ReadableByteStreamController"),Object.defineProperty(ReadableByteStreamController2.prototype,"byobRequest",{get:function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("byobRequest");return ReadableByteStreamControllerGetBYOBRequest(this)},enumerable:!1,configurable:!0}),Object.defineProperty(ReadableByteStreamController2.prototype,"desiredSize",{get:function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("desiredSize");return ReadableByteStreamControllerGetDesiredSize(this)},enumerable:!1,configurable:!0}),ReadableByteStreamController2.prototype.close=function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var state=this._controlledReadableByteStream._state;if(state!=="readable")throw new TypeError("The stream (in "+state+" state) is not in the readable state and cannot be closed");ReadableByteStreamControllerClose(this)},ReadableByteStreamController2.prototype.enqueue=function(chunk){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("enqueue");if(assertRequiredArgument(chunk,1,"enqueue"),!ArrayBuffer.isView(chunk))throw new TypeError("chunk must be an array buffer view");if(chunk.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(chunk.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var state=this._controlledReadableByteStream._state;if(state!=="readable")throw new TypeError("The stream (in "+state+" state) is not in the readable state and cannot be enqueued to");ReadableByteStreamControllerEnqueue(this,chunk)},ReadableByteStreamController2.prototype.error=function(e){if(e===void 0&&(e=void 0),!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("error");ReadableByteStreamControllerError(this,e)},ReadableByteStreamController2.prototype[CancelSteps]=function(reason){ReadableByteStreamControllerClearPendingPullIntos(this),ResetQueue(this);var result=this._cancelAlgorithm(reason);return ReadableByteStreamControllerClearAlgorithms(this),result},ReadableByteStreamController2.prototype[PullSteps]=function(readRequest){var stream=this._controlledReadableByteStream;if(this._queueTotalSize>0){var entry=this._queue.shift();this._queueTotalSize-=entry.byteLength,ReadableByteStreamControllerHandleQueueDrain(this);var view=new Uint8Array(entry.buffer,entry.byteOffset,entry.byteLength);readRequest._chunkSteps(view);return}var autoAllocateChunkSize=this._autoAllocateChunkSize;if(autoAllocateChunkSize!==void 0){var buffer=void 0;try{buffer=new ArrayBuffer(autoAllocateChunkSize)}catch(bufferE){readRequest._errorSteps(bufferE);return}var pullIntoDescriptor={buffer,bufferByteLength:autoAllocateChunkSize,byteOffset:0,byteLength:autoAllocateChunkSize,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(pullIntoDescriptor)}ReadableStreamAddReadRequest(stream,readRequest),ReadableByteStreamControllerCallPullIfNeeded(this)},ReadableByteStreamController2}();Object.defineProperties(ReadableByteStreamController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ReadableByteStreamController.prototype,SymbolPolyfill.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function IsReadableByteStreamController(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_controlledReadableByteStream")?!1:x instanceof ReadableByteStreamController}__name2(IsReadableByteStreamController,"IsReadableByteStreamController"),__name(IsReadableByteStreamController,"IsReadableByteStreamController");function IsReadableStreamBYOBRequest(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_associatedReadableByteStreamController")?!1:x instanceof ReadableStreamBYOBRequest}__name2(IsReadableStreamBYOBRequest,"IsReadableStreamBYOBRequest"),__name(IsReadableStreamBYOBRequest,"IsReadableStreamBYOBRequest");function ReadableByteStreamControllerCallPullIfNeeded(controller){var shouldPull=ReadableByteStreamControllerShouldCallPull(controller);if(shouldPull){if(controller._pulling){controller._pullAgain=!0;return}controller._pulling=!0;var pullPromise=controller._pullAlgorithm();uponPromise(pullPromise,function(){controller._pulling=!1,controller._pullAgain&&(controller._pullAgain=!1,ReadableByteStreamControllerCallPullIfNeeded(controller))},function(e){ReadableByteStreamControllerError(controller,e)})}}__name2(ReadableByteStreamControllerCallPullIfNeeded,"ReadableByteStreamControllerCallPullIfNeeded"),__name(ReadableByteStreamControllerCallPullIfNeeded,"ReadableByteStreamControllerCallPullIfNeeded");function ReadableByteStreamControllerClearPendingPullIntos(controller){ReadableByteStreamControllerInvalidateBYOBRequest(controller),controller._pendingPullIntos=new SimpleQueue}__name2(ReadableByteStreamControllerClearPendingPullIntos,"ReadableByteStreamControllerClearPendingPullIntos"),__name(ReadableByteStreamControllerClearPendingPullIntos,"ReadableByteStreamControllerClearPendingPullIntos");function ReadableByteStreamControllerCommitPullIntoDescriptor(stream,pullIntoDescriptor){var done=!1;stream._state==="closed"&&(done=!0);var filledView=ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);pullIntoDescriptor.readerType==="default"?ReadableStreamFulfillReadRequest(stream,filledView,done):ReadableStreamFulfillReadIntoRequest(stream,filledView,done)}__name2(ReadableByteStreamControllerCommitPullIntoDescriptor,"ReadableByteStreamControllerCommitPullIntoDescriptor"),__name(ReadableByteStreamControllerCommitPullIntoDescriptor,"ReadableByteStreamControllerCommitPullIntoDescriptor");function ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor){var bytesFilled=pullIntoDescriptor.bytesFilled,elementSize=pullIntoDescriptor.elementSize;return new pullIntoDescriptor.viewConstructor(pullIntoDescriptor.buffer,pullIntoDescriptor.byteOffset,bytesFilled/elementSize)}__name2(ReadableByteStreamControllerConvertPullIntoDescriptor,"ReadableByteStreamControllerConvertPullIntoDescriptor"),__name(ReadableByteStreamControllerConvertPullIntoDescriptor,"ReadableByteStreamControllerConvertPullIntoDescriptor");function ReadableByteStreamControllerEnqueueChunkToQueue(controller,buffer,byteOffset,byteLength){controller._queue.push({buffer,byteOffset,byteLength}),controller._queueTotalSize+=byteLength}__name2(ReadableByteStreamControllerEnqueueChunkToQueue,"ReadableByteStreamControllerEnqueueChunkToQueue"),__name(ReadableByteStreamControllerEnqueueChunkToQueue,"ReadableByteStreamControllerEnqueueChunkToQueue");function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller,pullIntoDescriptor){var elementSize=pullIntoDescriptor.elementSize,currentAlignedBytes=pullIntoDescriptor.bytesFilled-pullIntoDescriptor.bytesFilled%elementSize,maxBytesToCopy=Math.min(controller._queueTotalSize,pullIntoDescriptor.byteLength-pullIntoDescriptor.bytesFilled),maxBytesFilled=pullIntoDescriptor.bytesFilled+maxBytesToCopy,maxAlignedBytes=maxBytesFilled-maxBytesFilled%elementSize,totalBytesToCopyRemaining=maxBytesToCopy,ready=!1;maxAlignedBytes>currentAlignedBytes&&(totalBytesToCopyRemaining=maxAlignedBytes-pullIntoDescriptor.bytesFilled,ready=!0);for(var queue=controller._queue;totalBytesToCopyRemaining>0;){var headOfQueue=queue.peek(),bytesToCopy=Math.min(totalBytesToCopyRemaining,headOfQueue.byteLength),destStart=pullIntoDescriptor.byteOffset+pullIntoDescriptor.bytesFilled;CopyDataBlockBytes(pullIntoDescriptor.buffer,destStart,headOfQueue.buffer,headOfQueue.byteOffset,bytesToCopy),headOfQueue.byteLength===bytesToCopy?queue.shift():(headOfQueue.byteOffset+=bytesToCopy,headOfQueue.byteLength-=bytesToCopy),controller._queueTotalSize-=bytesToCopy,ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller,bytesToCopy,pullIntoDescriptor),totalBytesToCopyRemaining-=bytesToCopy}return ready}__name2(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue,"ReadableByteStreamControllerFillPullIntoDescriptorFromQueue"),__name(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue,"ReadableByteStreamControllerFillPullIntoDescriptorFromQueue");function ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller,size,pullIntoDescriptor){pullIntoDescriptor.bytesFilled+=size}__name2(ReadableByteStreamControllerFillHeadPullIntoDescriptor,"ReadableByteStreamControllerFillHeadPullIntoDescriptor"),__name(ReadableByteStreamControllerFillHeadPullIntoDescriptor,"ReadableByteStreamControllerFillHeadPullIntoDescriptor");function ReadableByteStreamControllerHandleQueueDrain(controller){controller._queueTotalSize===0&&controller._closeRequested?(ReadableByteStreamControllerClearAlgorithms(controller),ReadableStreamClose(controller._controlledReadableByteStream)):ReadableByteStreamControllerCallPullIfNeeded(controller)}__name2(ReadableByteStreamControllerHandleQueueDrain,"ReadableByteStreamControllerHandleQueueDrain"),__name(ReadableByteStreamControllerHandleQueueDrain,"ReadableByteStreamControllerHandleQueueDrain");function ReadableByteStreamControllerInvalidateBYOBRequest(controller){controller._byobRequest!==null&&(controller._byobRequest._associatedReadableByteStreamController=void 0,controller._byobRequest._view=null,controller._byobRequest=null)}__name2(ReadableByteStreamControllerInvalidateBYOBRequest,"ReadableByteStreamControllerInvalidateBYOBRequest"),__name(ReadableByteStreamControllerInvalidateBYOBRequest,"ReadableByteStreamControllerInvalidateBYOBRequest");function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller){for(;controller._pendingPullIntos.length>0;){if(controller._queueTotalSize===0)return;var pullIntoDescriptor=controller._pendingPullIntos.peek();ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller,pullIntoDescriptor)&&(ReadableByteStreamControllerShiftPendingPullInto(controller),ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream,pullIntoDescriptor))}}__name2(ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue,"ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue"),__name(ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue,"ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue");function ReadableByteStreamControllerPullInto(controller,view,readIntoRequest){var stream=controller._controlledReadableByteStream,elementSize=1;view.constructor!==DataView&&(elementSize=view.constructor.BYTES_PER_ELEMENT);var ctor=view.constructor,buffer=view.buffer,pullIntoDescriptor={buffer,bufferByteLength:buffer.byteLength,byteOffset:view.byteOffset,byteLength:view.byteLength,bytesFilled:0,elementSize,viewConstructor:ctor,readerType:"byob"};if(controller._pendingPullIntos.length>0){controller._pendingPullIntos.push(pullIntoDescriptor),ReadableStreamAddReadIntoRequest(stream,readIntoRequest);return}if(stream._state==="closed"){var emptyView=new ctor(pullIntoDescriptor.buffer,pullIntoDescriptor.byteOffset,0);readIntoRequest._closeSteps(emptyView);return}if(controller._queueTotalSize>0){if(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller,pullIntoDescriptor)){var filledView=ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);ReadableByteStreamControllerHandleQueueDrain(controller),readIntoRequest._chunkSteps(filledView);return}if(controller._closeRequested){var e=new TypeError("Insufficient bytes to fill elements in the given buffer");ReadableByteStreamControllerError(controller,e),readIntoRequest._errorSteps(e);return}}controller._pendingPullIntos.push(pullIntoDescriptor),ReadableStreamAddReadIntoRequest(stream,readIntoRequest),ReadableByteStreamControllerCallPullIfNeeded(controller)}__name2(ReadableByteStreamControllerPullInto,"ReadableByteStreamControllerPullInto"),__name(ReadableByteStreamControllerPullInto,"ReadableByteStreamControllerPullInto");function ReadableByteStreamControllerRespondInClosedState(controller,firstDescriptor){var stream=controller._controlledReadableByteStream;if(ReadableStreamHasBYOBReader(stream))for(;ReadableStreamGetNumReadIntoRequests(stream)>0;){var pullIntoDescriptor=ReadableByteStreamControllerShiftPendingPullInto(controller);ReadableByteStreamControllerCommitPullIntoDescriptor(stream,pullIntoDescriptor)}}__name2(ReadableByteStreamControllerRespondInClosedState,"ReadableByteStreamControllerRespondInClosedState"),__name(ReadableByteStreamControllerRespondInClosedState,"ReadableByteStreamControllerRespondInClosedState");function ReadableByteStreamControllerRespondInReadableState(controller,bytesWritten,pullIntoDescriptor){if(ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller,bytesWritten,pullIntoDescriptor),!(pullIntoDescriptor.bytesFilled<pullIntoDescriptor.elementSize)){ReadableByteStreamControllerShiftPendingPullInto(controller);var remainderSize=pullIntoDescriptor.bytesFilled%pullIntoDescriptor.elementSize;if(remainderSize>0){var end=pullIntoDescriptor.byteOffset+pullIntoDescriptor.bytesFilled,remainder=ArrayBufferSlice(pullIntoDescriptor.buffer,end-remainderSize,end);ReadableByteStreamControllerEnqueueChunkToQueue(controller,remainder,0,remainder.byteLength)}pullIntoDescriptor.bytesFilled-=remainderSize,ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream,pullIntoDescriptor),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller)}}__name2(ReadableByteStreamControllerRespondInReadableState,"ReadableByteStreamControllerRespondInReadableState"),__name(ReadableByteStreamControllerRespondInReadableState,"ReadableByteStreamControllerRespondInReadableState");function ReadableByteStreamControllerRespondInternal(controller,bytesWritten){var firstDescriptor=controller._pendingPullIntos.peek();ReadableByteStreamControllerInvalidateBYOBRequest(controller);var state=controller._controlledReadableByteStream._state;state==="closed"?ReadableByteStreamControllerRespondInClosedState(controller):ReadableByteStreamControllerRespondInReadableState(controller,bytesWritten,firstDescriptor),ReadableByteStreamControllerCallPullIfNeeded(controller)}__name2(ReadableByteStreamControllerRespondInternal,"ReadableByteStreamControllerRespondInternal"),__name(ReadableByteStreamControllerRespondInternal,"ReadableByteStreamControllerRespondInternal");function ReadableByteStreamControllerShiftPendingPullInto(controller){var descriptor=controller._pendingPullIntos.shift();return descriptor}__name2(ReadableByteStreamControllerShiftPendingPullInto,"ReadableByteStreamControllerShiftPendingPullInto"),__name(ReadableByteStreamControllerShiftPendingPullInto,"ReadableByteStreamControllerShiftPendingPullInto");function ReadableByteStreamControllerShouldCallPull(controller){var stream=controller._controlledReadableByteStream;if(stream._state!=="readable"||controller._closeRequested||!controller._started)return!1;if(ReadableStreamHasDefaultReader(stream)&&ReadableStreamGetNumReadRequests(stream)>0||ReadableStreamHasBYOBReader(stream)&&ReadableStreamGetNumReadIntoRequests(stream)>0)return!0;var desiredSize=ReadableByteStreamControllerGetDesiredSize(controller);return desiredSize>0}__name2(ReadableByteStreamControllerShouldCallPull,"ReadableByteStreamControllerShouldCallPull"),__name(ReadableByteStreamControllerShouldCallPull,"ReadableByteStreamControllerShouldCallPull");function ReadableByteStreamControllerClearAlgorithms(controller){controller._pullAlgorithm=void 0,controller._cancelAlgorithm=void 0}__name2(ReadableByteStreamControllerClearAlgorithms,"ReadableByteStreamControllerClearAlgorithms"),__name(ReadableByteStreamControllerClearAlgorithms,"ReadableByteStreamControllerClearAlgorithms");function ReadableByteStreamControllerClose(controller){var stream=controller._controlledReadableByteStream;if(!(controller._closeRequested||stream._state!=="readable")){if(controller._queueTotalSize>0){controller._closeRequested=!0;return}if(controller._pendingPullIntos.length>0){var firstPendingPullInto=controller._pendingPullIntos.peek();if(firstPendingPullInto.bytesFilled>0){var e=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ReadableByteStreamControllerError(controller,e),e}}ReadableByteStreamControllerClearAlgorithms(controller),ReadableStreamClose(stream)}}__name2(ReadableByteStreamControllerClose,"ReadableByteStreamControllerClose"),__name(ReadableByteStreamControllerClose,"ReadableByteStreamControllerClose");function ReadableByteStreamControllerEnqueue(controller,chunk){var stream=controller._controlledReadableByteStream;if(!(controller._closeRequested||stream._state!=="readable")){var buffer=chunk.buffer,byteOffset=chunk.byteOffset,byteLength=chunk.byteLength,transferredBuffer=buffer;if(controller._pendingPullIntos.length>0){var firstPendingPullInto=controller._pendingPullIntos.peek();IsDetachedBuffer(firstPendingPullInto.buffer),firstPendingPullInto.buffer=firstPendingPullInto.buffer}if(ReadableByteStreamControllerInvalidateBYOBRequest(controller),ReadableStreamHasDefaultReader(stream))if(ReadableStreamGetNumReadRequests(stream)===0)ReadableByteStreamControllerEnqueueChunkToQueue(controller,transferredBuffer,byteOffset,byteLength);else{controller._pendingPullIntos.length>0&&ReadableByteStreamControllerShiftPendingPullInto(controller);var transferredView=new Uint8Array(transferredBuffer,byteOffset,byteLength);ReadableStreamFulfillReadRequest(stream,transferredView,!1)}else ReadableStreamHasBYOBReader(stream)?(ReadableByteStreamControllerEnqueueChunkToQueue(controller,transferredBuffer,byteOffset,byteLength),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller)):ReadableByteStreamControllerEnqueueChunkToQueue(controller,transferredBuffer,byteOffset,byteLength);ReadableByteStreamControllerCallPullIfNeeded(controller)}}__name2(ReadableByteStreamControllerEnqueue,"ReadableByteStreamControllerEnqueue"),__name(ReadableByteStreamControllerEnqueue,"ReadableByteStreamControllerEnqueue");function ReadableByteStreamControllerError(controller,e){var stream=controller._controlledReadableByteStream;stream._state==="readable"&&(ReadableByteStreamControllerClearPendingPullIntos(controller),ResetQueue(controller),ReadableByteStreamControllerClearAlgorithms(controller),ReadableStreamError(stream,e))}__name2(ReadableByteStreamControllerError,"ReadableByteStreamControllerError"),__name(ReadableByteStreamControllerError,"ReadableByteStreamControllerError");function ReadableByteStreamControllerGetBYOBRequest(controller){if(controller._byobRequest===null&&controller._pendingPullIntos.length>0){var firstDescriptor=controller._pendingPullIntos.peek(),view=new Uint8Array(firstDescriptor.buffer,firstDescriptor.byteOffset+firstDescriptor.bytesFilled,firstDescriptor.byteLength-firstDescriptor.bytesFilled),byobRequest=Object.create(ReadableStreamBYOBRequest.prototype);SetUpReadableStreamBYOBRequest(byobRequest,controller,view),controller._byobRequest=byobRequest}return controller._byobRequest}__name2(ReadableByteStreamControllerGetBYOBRequest,"ReadableByteStreamControllerGetBYOBRequest"),__name(ReadableByteStreamControllerGetBYOBRequest,"ReadableByteStreamControllerGetBYOBRequest");function ReadableByteStreamControllerGetDesiredSize(controller){var state=controller._controlledReadableByteStream._state;return state==="errored"?null:state==="closed"?0:controller._strategyHWM-controller._queueTotalSize}__name2(ReadableByteStreamControllerGetDesiredSize,"ReadableByteStreamControllerGetDesiredSize"),__name(ReadableByteStreamControllerGetDesiredSize,"ReadableByteStreamControllerGetDesiredSize");function ReadableByteStreamControllerRespond(controller,bytesWritten){var firstDescriptor=controller._pendingPullIntos.peek(),state=controller._controlledReadableByteStream._state;if(state==="closed"){if(bytesWritten!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(bytesWritten===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(firstDescriptor.bytesFilled+bytesWritten>firstDescriptor.byteLength)throw new RangeError("bytesWritten out of range")}firstDescriptor.buffer=firstDescriptor.buffer,ReadableByteStreamControllerRespondInternal(controller,bytesWritten)}__name2(ReadableByteStreamControllerRespond,"ReadableByteStreamControllerRespond"),__name(ReadableByteStreamControllerRespond,"ReadableByteStreamControllerRespond");function ReadableByteStreamControllerRespondWithNewView(controller,view){var firstDescriptor=controller._pendingPullIntos.peek(),state=controller._controlledReadableByteStream._state;if(state==="closed"){if(view.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(view.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(firstDescriptor.byteOffset+firstDescriptor.bytesFilled!==view.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(firstDescriptor.bufferByteLength!==view.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(firstDescriptor.bytesFilled+view.byteLength>firstDescriptor.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var viewByteLength=view.byteLength;firstDescriptor.buffer=view.buffer,ReadableByteStreamControllerRespondInternal(controller,viewByteLength)}__name2(ReadableByteStreamControllerRespondWithNewView,"ReadableByteStreamControllerRespondWithNewView"),__name(ReadableByteStreamControllerRespondWithNewView,"ReadableByteStreamControllerRespondWithNewView");function SetUpReadableByteStreamController(stream,controller,startAlgorithm,pullAlgorithm,cancelAlgorithm,highWaterMark,autoAllocateChunkSize){controller._controlledReadableByteStream=stream,controller._pullAgain=!1,controller._pulling=!1,controller._byobRequest=null,controller._queue=controller._queueTotalSize=void 0,ResetQueue(controller),controller._closeRequested=!1,controller._started=!1,controller._strategyHWM=highWaterMark,controller._pullAlgorithm=pullAlgorithm,controller._cancelAlgorithm=cancelAlgorithm,controller._autoAllocateChunkSize=autoAllocateChunkSize,controller._pendingPullIntos=new SimpleQueue,stream._readableStreamController=controller;var startResult=startAlgorithm();uponPromise(promiseResolvedWith(startResult),function(){controller._started=!0,ReadableByteStreamControllerCallPullIfNeeded(controller)},function(r){ReadableByteStreamControllerError(controller,r)})}__name2(SetUpReadableByteStreamController,"SetUpReadableByteStreamController"),__name(SetUpReadableByteStreamController,"SetUpReadableByteStreamController");function SetUpReadableByteStreamControllerFromUnderlyingSource(stream,underlyingByteSource,highWaterMark){var controller=Object.create(ReadableByteStreamController.prototype),startAlgorithm=__name(function(){},"startAlgorithm"),pullAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"pullAlgorithm"),cancelAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"cancelAlgorithm");underlyingByteSource.start!==void 0&&(startAlgorithm=__name(function(){return underlyingByteSource.start(controller)},"startAlgorithm")),underlyingByteSource.pull!==void 0&&(pullAlgorithm=__name(function(){return underlyingByteSource.pull(controller)},"pullAlgorithm")),underlyingByteSource.cancel!==void 0&&(cancelAlgorithm=__name(function(reason){return underlyingByteSource.cancel(reason)},"cancelAlgorithm"));var autoAllocateChunkSize=underlyingByteSource.autoAllocateChunkSize;if(autoAllocateChunkSize===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");SetUpReadableByteStreamController(stream,controller,startAlgorithm,pullAlgorithm,cancelAlgorithm,highWaterMark,autoAllocateChunkSize)}__name2(SetUpReadableByteStreamControllerFromUnderlyingSource,"SetUpReadableByteStreamControllerFromUnderlyingSource"),__name(SetUpReadableByteStreamControllerFromUnderlyingSource,"SetUpReadableByteStreamControllerFromUnderlyingSource");function SetUpReadableStreamBYOBRequest(request,controller,view){request._associatedReadableByteStreamController=controller,request._view=view}__name2(SetUpReadableStreamBYOBRequest,"SetUpReadableStreamBYOBRequest"),__name(SetUpReadableStreamBYOBRequest,"SetUpReadableStreamBYOBRequest");function byobRequestBrandCheckException(name){return new TypeError("ReadableStreamBYOBRequest.prototype."+name+" can only be used on a ReadableStreamBYOBRequest")}__name2(byobRequestBrandCheckException,"byobRequestBrandCheckException"),__name(byobRequestBrandCheckException,"byobRequestBrandCheckException");function byteStreamControllerBrandCheckException(name){return new TypeError("ReadableByteStreamController.prototype."+name+" can only be used on a ReadableByteStreamController")}__name2(byteStreamControllerBrandCheckException,"byteStreamControllerBrandCheckException"),__name(byteStreamControllerBrandCheckException,"byteStreamControllerBrandCheckException");function AcquireReadableStreamBYOBReader(stream){return new ReadableStreamBYOBReader(stream)}__name2(AcquireReadableStreamBYOBReader,"AcquireReadableStreamBYOBReader"),__name(AcquireReadableStreamBYOBReader,"AcquireReadableStreamBYOBReader");function ReadableStreamAddReadIntoRequest(stream,readIntoRequest){stream._reader._readIntoRequests.push(readIntoRequest)}__name2(ReadableStreamAddReadIntoRequest,"ReadableStreamAddReadIntoRequest"),__name(ReadableStreamAddReadIntoRequest,"ReadableStreamAddReadIntoRequest");function ReadableStreamFulfillReadIntoRequest(stream,chunk,done){var reader=stream._reader,readIntoRequest=reader._readIntoRequests.shift();done?readIntoRequest._closeSteps(chunk):readIntoRequest._chunkSteps(chunk)}__name2(ReadableStreamFulfillReadIntoRequest,"ReadableStreamFulfillReadIntoRequest"),__name(ReadableStreamFulfillReadIntoRequest,"ReadableStreamFulfillReadIntoRequest");function ReadableStreamGetNumReadIntoRequests(stream){return stream._reader._readIntoRequests.length}__name2(ReadableStreamGetNumReadIntoRequests,"ReadableStreamGetNumReadIntoRequests"),__name(ReadableStreamGetNumReadIntoRequests,"ReadableStreamGetNumReadIntoRequests");function ReadableStreamHasBYOBReader(stream){var reader=stream._reader;return!(reader===void 0||!IsReadableStreamBYOBReader(reader))}__name2(ReadableStreamHasBYOBReader,"ReadableStreamHasBYOBReader"),__name(ReadableStreamHasBYOBReader,"ReadableStreamHasBYOBReader");var ReadableStreamBYOBReader=function(){function ReadableStreamBYOBReader2(stream){if(assertRequiredArgument(stream,1,"ReadableStreamBYOBReader"),assertReadableStream(stream,"First parameter"),IsReadableStreamLocked(stream))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!IsReadableByteStreamController(stream._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ReadableStreamReaderGenericInitialize(this,stream),this._readIntoRequests=new SimpleQueue}return __name2(ReadableStreamBYOBReader2,"ReadableStreamBYOBReader2"),__name(ReadableStreamBYOBReader2,"ReadableStreamBYOBReader"),Object.defineProperty(ReadableStreamBYOBReader2.prototype,"closed",{get:function(){return IsReadableStreamBYOBReader(this)?this._closedPromise:promiseRejectedWith(byobReaderBrandCheckException("closed"))},enumerable:!1,configurable:!0}),ReadableStreamBYOBReader2.prototype.cancel=function(reason){return reason===void 0&&(reason=void 0),IsReadableStreamBYOBReader(this)?this._ownerReadableStream===void 0?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,reason):promiseRejectedWith(byobReaderBrandCheckException("cancel"))},ReadableStreamBYOBReader2.prototype.read=function(view){if(!IsReadableStreamBYOBReader(this))return promiseRejectedWith(byobReaderBrandCheckException("read"));if(!ArrayBuffer.isView(view))return promiseRejectedWith(new TypeError("view must be an array buffer view"));if(view.byteLength===0)return promiseRejectedWith(new TypeError("view must have non-zero byteLength"));if(view.buffer.byteLength===0)return promiseRejectedWith(new TypeError("view's buffer must have non-zero byteLength"));if(IsDetachedBuffer(view.buffer),this._ownerReadableStream===void 0)return promiseRejectedWith(readerLockException("read from"));var resolvePromise,rejectPromise,promise=newPromise(function(resolve,reject){resolvePromise=resolve,rejectPromise=reject}),readIntoRequest={_chunkSteps:function(chunk){return resolvePromise({value:chunk,done:!1})},_closeSteps:function(chunk){return resolvePromise({value:chunk,done:!0})},_errorSteps:function(e){return rejectPromise(e)}};return ReadableStreamBYOBReaderRead(this,view,readIntoRequest),promise},ReadableStreamBYOBReader2.prototype.releaseLock=function(){if(!IsReadableStreamBYOBReader(this))throw byobReaderBrandCheckException("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}},ReadableStreamBYOBReader2}();Object.defineProperties(ReadableStreamBYOBReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ReadableStreamBYOBReader.prototype,SymbolPolyfill.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function IsReadableStreamBYOBReader(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_readIntoRequests")?!1:x instanceof ReadableStreamBYOBReader}__name2(IsReadableStreamBYOBReader,"IsReadableStreamBYOBReader"),__name(IsReadableStreamBYOBReader,"IsReadableStreamBYOBReader");function ReadableStreamBYOBReaderRead(reader,view,readIntoRequest){var stream=reader._ownerReadableStream;stream._disturbed=!0,stream._state==="errored"?readIntoRequest._errorSteps(stream._storedError):ReadableByteStreamControllerPullInto(stream._readableStreamController,view,readIntoRequest)}__name2(ReadableStreamBYOBReaderRead,"ReadableStreamBYOBReaderRead"),__name(ReadableStreamBYOBReaderRead,"ReadableStreamBYOBReaderRead");function byobReaderBrandCheckException(name){return new TypeError("ReadableStreamBYOBReader.prototype."+name+" can only be used on a ReadableStreamBYOBReader")}__name2(byobReaderBrandCheckException,"byobReaderBrandCheckException"),__name(byobReaderBrandCheckException,"byobReaderBrandCheckException");function ExtractHighWaterMark(strategy,defaultHWM){var highWaterMark=strategy.highWaterMark;if(highWaterMark===void 0)return defaultHWM;if(NumberIsNaN(highWaterMark)||highWaterMark<0)throw new RangeError("Invalid highWaterMark");return highWaterMark}__name2(ExtractHighWaterMark,"ExtractHighWaterMark"),__name(ExtractHighWaterMark,"ExtractHighWaterMark");function ExtractSizeAlgorithm(strategy){var size=strategy.size;return size||function(){return 1}}__name2(ExtractSizeAlgorithm,"ExtractSizeAlgorithm"),__name(ExtractSizeAlgorithm,"ExtractSizeAlgorithm");function convertQueuingStrategy(init,context){assertDictionary(init,context);var highWaterMark=init?.highWaterMark,size=init?.size;return{highWaterMark:highWaterMark===void 0?void 0:convertUnrestrictedDouble(highWaterMark),size:size===void 0?void 0:convertQueuingStrategySize(size,context+" has member 'size' that")}}__name2(convertQueuingStrategy,"convertQueuingStrategy"),__name(convertQueuingStrategy,"convertQueuingStrategy");function convertQueuingStrategySize(fn,context){return assertFunction(fn,context),function(chunk){return convertUnrestrictedDouble(fn(chunk))}}__name2(convertQueuingStrategySize,"convertQueuingStrategySize"),__name(convertQueuingStrategySize,"convertQueuingStrategySize");function convertUnderlyingSink(original,context){assertDictionary(original,context);var abort=original?.abort,close=original?.close,start=original?.start,type=original?.type,write=original?.write;return{abort:abort===void 0?void 0:convertUnderlyingSinkAbortCallback(abort,original,context+" has member 'abort' that"),close:close===void 0?void 0:convertUnderlyingSinkCloseCallback(close,original,context+" has member 'close' that"),start:start===void 0?void 0:convertUnderlyingSinkStartCallback(start,original,context+" has member 'start' that"),write:write===void 0?void 0:convertUnderlyingSinkWriteCallback(write,original,context+" has member 'write' that"),type}}__name2(convertUnderlyingSink,"convertUnderlyingSink"),__name(convertUnderlyingSink,"convertUnderlyingSink");function convertUnderlyingSinkAbortCallback(fn,original,context){return assertFunction(fn,context),function(reason){return promiseCall(fn,original,[reason])}}__name2(convertUnderlyingSinkAbortCallback,"convertUnderlyingSinkAbortCallback"),__name(convertUnderlyingSinkAbortCallback,"convertUnderlyingSinkAbortCallback");function convertUnderlyingSinkCloseCallback(fn,original,context){return assertFunction(fn,context),function(){return promiseCall(fn,original,[])}}__name2(convertUnderlyingSinkCloseCallback,"convertUnderlyingSinkCloseCallback"),__name(convertUnderlyingSinkCloseCallback,"convertUnderlyingSinkCloseCallback");function convertUnderlyingSinkStartCallback(fn,original,context){return assertFunction(fn,context),function(controller){return reflectCall(fn,original,[controller])}}__name2(convertUnderlyingSinkStartCallback,"convertUnderlyingSinkStartCallback"),__name(convertUnderlyingSinkStartCallback,"convertUnderlyingSinkStartCallback");function convertUnderlyingSinkWriteCallback(fn,original,context){return assertFunction(fn,context),function(chunk,controller){return promiseCall(fn,original,[chunk,controller])}}__name2(convertUnderlyingSinkWriteCallback,"convertUnderlyingSinkWriteCallback"),__name(convertUnderlyingSinkWriteCallback,"convertUnderlyingSinkWriteCallback");function assertWritableStream(x,context){if(!IsWritableStream(x))throw new TypeError(context+" is not a WritableStream.")}__name2(assertWritableStream,"assertWritableStream"),__name(assertWritableStream,"assertWritableStream");function isAbortSignal(value){if(typeof value!="object"||value===null)return!1;try{return typeof value.aborted=="boolean"}catch{return!1}}__name2(isAbortSignal,"isAbortSignal"),__name(isAbortSignal,"isAbortSignal");var supportsAbortController=typeof AbortController=="function";function createAbortController(){if(supportsAbortController)return new AbortController}__name2(createAbortController,"createAbortController"),__name(createAbortController,"createAbortController");var WritableStream=function(){function WritableStream2(rawUnderlyingSink,rawStrategy){rawUnderlyingSink===void 0&&(rawUnderlyingSink={}),rawStrategy===void 0&&(rawStrategy={}),rawUnderlyingSink===void 0?rawUnderlyingSink=null:assertObject(rawUnderlyingSink,"First parameter");var strategy=convertQueuingStrategy(rawStrategy,"Second parameter"),underlyingSink=convertUnderlyingSink(rawUnderlyingSink,"First parameter");InitializeWritableStream(this);var type=underlyingSink.type;if(type!==void 0)throw new RangeError("Invalid type is specified");var sizeAlgorithm=ExtractSizeAlgorithm(strategy),highWaterMark=ExtractHighWaterMark(strategy,1);SetUpWritableStreamDefaultControllerFromUnderlyingSink(this,underlyingSink,highWaterMark,sizeAlgorithm)}return __name2(WritableStream2,"WritableStream2"),__name(WritableStream2,"WritableStream"),Object.defineProperty(WritableStream2.prototype,"locked",{get:function(){if(!IsWritableStream(this))throw streamBrandCheckException$2("locked");return IsWritableStreamLocked(this)},enumerable:!1,configurable:!0}),WritableStream2.prototype.abort=function(reason){return reason===void 0&&(reason=void 0),IsWritableStream(this)?IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot abort a stream that already has a writer")):WritableStreamAbort(this,reason):promiseRejectedWith(streamBrandCheckException$2("abort"))},WritableStream2.prototype.close=function(){return IsWritableStream(this)?IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot close a stream that already has a writer")):WritableStreamCloseQueuedOrInFlight(this)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamClose(this):promiseRejectedWith(streamBrandCheckException$2("close"))},WritableStream2.prototype.getWriter=function(){if(!IsWritableStream(this))throw streamBrandCheckException$2("getWriter");return AcquireWritableStreamDefaultWriter(this)},WritableStream2}();Object.defineProperties(WritableStream.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(WritableStream.prototype,SymbolPolyfill.toStringTag,{value:"WritableStream",configurable:!0});function AcquireWritableStreamDefaultWriter(stream){return new WritableStreamDefaultWriter(stream)}__name2(AcquireWritableStreamDefaultWriter,"AcquireWritableStreamDefaultWriter"),__name(AcquireWritableStreamDefaultWriter,"AcquireWritableStreamDefaultWriter");function CreateWritableStream(startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,highWaterMark,sizeAlgorithm){highWaterMark===void 0&&(highWaterMark=1),sizeAlgorithm===void 0&&(sizeAlgorithm=__name(function(){return 1},"sizeAlgorithm"));var stream=Object.create(WritableStream.prototype);InitializeWritableStream(stream);var controller=Object.create(WritableStreamDefaultController.prototype);return SetUpWritableStreamDefaultController(stream,controller,startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,highWaterMark,sizeAlgorithm),stream}__name2(CreateWritableStream,"CreateWritableStream"),__name(CreateWritableStream,"CreateWritableStream");function InitializeWritableStream(stream){stream._state="writable",stream._storedError=void 0,stream._writer=void 0,stream._writableStreamController=void 0,stream._writeRequests=new SimpleQueue,stream._inFlightWriteRequest=void 0,stream._closeRequest=void 0,stream._inFlightCloseRequest=void 0,stream._pendingAbortRequest=void 0,stream._backpressure=!1}__name2(InitializeWritableStream,"InitializeWritableStream"),__name(InitializeWritableStream,"InitializeWritableStream");function IsWritableStream(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_writableStreamController")?!1:x instanceof WritableStream}__name2(IsWritableStream,"IsWritableStream"),__name(IsWritableStream,"IsWritableStream");function IsWritableStreamLocked(stream){return stream._writer!==void 0}__name2(IsWritableStreamLocked,"IsWritableStreamLocked"),__name(IsWritableStreamLocked,"IsWritableStreamLocked");function WritableStreamAbort(stream,reason){var _a2;if(stream._state==="closed"||stream._state==="errored")return promiseResolvedWith(void 0);stream._writableStreamController._abortReason=reason,(_a2=stream._writableStreamController._abortController)===null||_a2===void 0||_a2.abort();var state=stream._state;if(state==="closed"||state==="errored")return promiseResolvedWith(void 0);if(stream._pendingAbortRequest!==void 0)return stream._pendingAbortRequest._promise;var wasAlreadyErroring=!1;state==="erroring"&&(wasAlreadyErroring=!0,reason=void 0);var promise=newPromise(function(resolve,reject){stream._pendingAbortRequest={_promise:void 0,_resolve:resolve,_reject:reject,_reason:reason,_wasAlreadyErroring:wasAlreadyErroring}});return stream._pendingAbortRequest._promise=promise,wasAlreadyErroring||WritableStreamStartErroring(stream,reason),promise}__name2(WritableStreamAbort,"WritableStreamAbort"),__name(WritableStreamAbort,"WritableStreamAbort");function WritableStreamClose(stream){var state=stream._state;if(state==="closed"||state==="errored")return promiseRejectedWith(new TypeError("The stream (in "+state+" state) is not in the writable state and cannot be closed"));var promise=newPromise(function(resolve,reject){var closeRequest={_resolve:resolve,_reject:reject};stream._closeRequest=closeRequest}),writer=stream._writer;return writer!==void 0&&stream._backpressure&&state==="writable"&&defaultWriterReadyPromiseResolve(writer),WritableStreamDefaultControllerClose(stream._writableStreamController),promise}__name2(WritableStreamClose,"WritableStreamClose"),__name(WritableStreamClose,"WritableStreamClose");function WritableStreamAddWriteRequest(stream){var promise=newPromise(function(resolve,reject){var writeRequest={_resolve:resolve,_reject:reject};stream._writeRequests.push(writeRequest)});return promise}__name2(WritableStreamAddWriteRequest,"WritableStreamAddWriteRequest"),__name(WritableStreamAddWriteRequest,"WritableStreamAddWriteRequest");function WritableStreamDealWithRejection(stream,error){var state=stream._state;if(state==="writable"){WritableStreamStartErroring(stream,error);return}WritableStreamFinishErroring(stream)}__name2(WritableStreamDealWithRejection,"WritableStreamDealWithRejection"),__name(WritableStreamDealWithRejection,"WritableStreamDealWithRejection");function WritableStreamStartErroring(stream,reason){var controller=stream._writableStreamController;stream._state="erroring",stream._storedError=reason;var writer=stream._writer;writer!==void 0&&WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer,reason),!WritableStreamHasOperationMarkedInFlight(stream)&&controller._started&&WritableStreamFinishErroring(stream)}__name2(WritableStreamStartErroring,"WritableStreamStartErroring"),__name(WritableStreamStartErroring,"WritableStreamStartErroring");function WritableStreamFinishErroring(stream){stream._state="errored",stream._writableStreamController[ErrorSteps]();var storedError=stream._storedError;if(stream._writeRequests.forEach(function(writeRequest){writeRequest._reject(storedError)}),stream._writeRequests=new SimpleQueue,stream._pendingAbortRequest===void 0){WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);return}var abortRequest=stream._pendingAbortRequest;if(stream._pendingAbortRequest=void 0,abortRequest._wasAlreadyErroring){abortRequest._reject(storedError),WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);return}var promise=stream._writableStreamController[AbortSteps](abortRequest._reason);uponPromise(promise,function(){abortRequest._resolve(),WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream)},function(reason){abortRequest._reject(reason),WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream)})}__name2(WritableStreamFinishErroring,"WritableStreamFinishErroring"),__name(WritableStreamFinishErroring,"WritableStreamFinishErroring");function WritableStreamFinishInFlightWrite(stream){stream._inFlightWriteRequest._resolve(void 0),stream._inFlightWriteRequest=void 0}__name2(WritableStreamFinishInFlightWrite,"WritableStreamFinishInFlightWrite"),__name(WritableStreamFinishInFlightWrite,"WritableStreamFinishInFlightWrite");function WritableStreamFinishInFlightWriteWithError(stream,error){stream._inFlightWriteRequest._reject(error),stream._inFlightWriteRequest=void 0,WritableStreamDealWithRejection(stream,error)}__name2(WritableStreamFinishInFlightWriteWithError,"WritableStreamFinishInFlightWriteWithError"),__name(WritableStreamFinishInFlightWriteWithError,"WritableStreamFinishInFlightWriteWithError");function WritableStreamFinishInFlightClose(stream){stream._inFlightCloseRequest._resolve(void 0),stream._inFlightCloseRequest=void 0;var state=stream._state;state==="erroring"&&(stream._storedError=void 0,stream._pendingAbortRequest!==void 0&&(stream._pendingAbortRequest._resolve(),stream._pendingAbortRequest=void 0)),stream._state="closed";var writer=stream._writer;writer!==void 0&&defaultWriterClosedPromiseResolve(writer)}__name2(WritableStreamFinishInFlightClose,"WritableStreamFinishInFlightClose"),__name(WritableStreamFinishInFlightClose,"WritableStreamFinishInFlightClose");function WritableStreamFinishInFlightCloseWithError(stream,error){stream._inFlightCloseRequest._reject(error),stream._inFlightCloseRequest=void 0,stream._pendingAbortRequest!==void 0&&(stream._pendingAbortRequest._reject(error),stream._pendingAbortRequest=void 0),WritableStreamDealWithRejection(stream,error)}__name2(WritableStreamFinishInFlightCloseWithError,"WritableStreamFinishInFlightCloseWithError"),__name(WritableStreamFinishInFlightCloseWithError,"WritableStreamFinishInFlightCloseWithError");function WritableStreamCloseQueuedOrInFlight(stream){return!(stream._closeRequest===void 0&&stream._inFlightCloseRequest===void 0)}__name2(WritableStreamCloseQueuedOrInFlight,"WritableStreamCloseQueuedOrInFlight"),__name(WritableStreamCloseQueuedOrInFlight,"WritableStreamCloseQueuedOrInFlight");function WritableStreamHasOperationMarkedInFlight(stream){return!(stream._inFlightWriteRequest===void 0&&stream._inFlightCloseRequest===void 0)}__name2(WritableStreamHasOperationMarkedInFlight,"WritableStreamHasOperationMarkedInFlight"),__name(WritableStreamHasOperationMarkedInFlight,"WritableStreamHasOperationMarkedInFlight");function WritableStreamMarkCloseRequestInFlight(stream){stream._inFlightCloseRequest=stream._closeRequest,stream._closeRequest=void 0}__name2(WritableStreamMarkCloseRequestInFlight,"WritableStreamMarkCloseRequestInFlight"),__name(WritableStreamMarkCloseRequestInFlight,"WritableStreamMarkCloseRequestInFlight");function WritableStreamMarkFirstWriteRequestInFlight(stream){stream._inFlightWriteRequest=stream._writeRequests.shift()}__name2(WritableStreamMarkFirstWriteRequestInFlight,"WritableStreamMarkFirstWriteRequestInFlight"),__name(WritableStreamMarkFirstWriteRequestInFlight,"WritableStreamMarkFirstWriteRequestInFlight");function WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream){stream._closeRequest!==void 0&&(stream._closeRequest._reject(stream._storedError),stream._closeRequest=void 0);var writer=stream._writer;writer!==void 0&&defaultWriterClosedPromiseReject(writer,stream._storedError)}__name2(WritableStreamRejectCloseAndClosedPromiseIfNeeded,"WritableStreamRejectCloseAndClosedPromiseIfNeeded"),__name(WritableStreamRejectCloseAndClosedPromiseIfNeeded,"WritableStreamRejectCloseAndClosedPromiseIfNeeded");function WritableStreamUpdateBackpressure(stream,backpressure){var writer=stream._writer;writer!==void 0&&backpressure!==stream._backpressure&&(backpressure?defaultWriterReadyPromiseReset(writer):defaultWriterReadyPromiseResolve(writer)),stream._backpressure=backpressure}__name2(WritableStreamUpdateBackpressure,"WritableStreamUpdateBackpressure"),__name(WritableStreamUpdateBackpressure,"WritableStreamUpdateBackpressure");var WritableStreamDefaultWriter=function(){function WritableStreamDefaultWriter2(stream){if(assertRequiredArgument(stream,1,"WritableStreamDefaultWriter"),assertWritableStream(stream,"First parameter"),IsWritableStreamLocked(stream))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=stream,stream._writer=this;var state=stream._state;if(state==="writable")!WritableStreamCloseQueuedOrInFlight(stream)&&stream._backpressure?defaultWriterReadyPromiseInitialize(this):defaultWriterReadyPromiseInitializeAsResolved(this),defaultWriterClosedPromiseInitialize(this);else if(state==="erroring")defaultWriterReadyPromiseInitializeAsRejected(this,stream._storedError),defaultWriterClosedPromiseInitialize(this);else if(state==="closed")defaultWriterReadyPromiseInitializeAsResolved(this),defaultWriterClosedPromiseInitializeAsResolved(this);else{var storedError=stream._storedError;defaultWriterReadyPromiseInitializeAsRejected(this,storedError),defaultWriterClosedPromiseInitializeAsRejected(this,storedError)}}return __name2(WritableStreamDefaultWriter2,"WritableStreamDefaultWriter2"),__name(WritableStreamDefaultWriter2,"WritableStreamDefaultWriter"),Object.defineProperty(WritableStreamDefaultWriter2.prototype,"closed",{get:function(){return IsWritableStreamDefaultWriter(this)?this._closedPromise:promiseRejectedWith(defaultWriterBrandCheckException("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(WritableStreamDefaultWriter2.prototype,"desiredSize",{get:function(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("desiredSize");if(this._ownerWritableStream===void 0)throw defaultWriterLockException("desiredSize");return WritableStreamDefaultWriterGetDesiredSize(this)},enumerable:!1,configurable:!0}),Object.defineProperty(WritableStreamDefaultWriter2.prototype,"ready",{get:function(){return IsWritableStreamDefaultWriter(this)?this._readyPromise:promiseRejectedWith(defaultWriterBrandCheckException("ready"))},enumerable:!1,configurable:!0}),WritableStreamDefaultWriter2.prototype.abort=function(reason){return reason===void 0&&(reason=void 0),IsWritableStreamDefaultWriter(this)?this._ownerWritableStream===void 0?promiseRejectedWith(defaultWriterLockException("abort")):WritableStreamDefaultWriterAbort(this,reason):promiseRejectedWith(defaultWriterBrandCheckException("abort"))},WritableStreamDefaultWriter2.prototype.close=function(){if(!IsWritableStreamDefaultWriter(this))return promiseRejectedWith(defaultWriterBrandCheckException("close"));var stream=this._ownerWritableStream;return stream===void 0?promiseRejectedWith(defaultWriterLockException("close")):WritableStreamCloseQueuedOrInFlight(stream)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamDefaultWriterClose(this)},WritableStreamDefaultWriter2.prototype.releaseLock=function(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("releaseLock");var stream=this._ownerWritableStream;stream!==void 0&&WritableStreamDefaultWriterRelease(this)},WritableStreamDefaultWriter2.prototype.write=function(chunk){return chunk===void 0&&(chunk=void 0),IsWritableStreamDefaultWriter(this)?this._ownerWritableStream===void 0?promiseRejectedWith(defaultWriterLockException("write to")):WritableStreamDefaultWriterWrite(this,chunk):promiseRejectedWith(defaultWriterBrandCheckException("write"))},WritableStreamDefaultWriter2}();Object.defineProperties(WritableStreamDefaultWriter.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(WritableStreamDefaultWriter.prototype,SymbolPolyfill.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function IsWritableStreamDefaultWriter(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_ownerWritableStream")?!1:x instanceof WritableStreamDefaultWriter}__name2(IsWritableStreamDefaultWriter,"IsWritableStreamDefaultWriter"),__name(IsWritableStreamDefaultWriter,"IsWritableStreamDefaultWriter");function WritableStreamDefaultWriterAbort(writer,reason){var stream=writer._ownerWritableStream;return WritableStreamAbort(stream,reason)}__name2(WritableStreamDefaultWriterAbort,"WritableStreamDefaultWriterAbort"),__name(WritableStreamDefaultWriterAbort,"WritableStreamDefaultWriterAbort");function WritableStreamDefaultWriterClose(writer){var stream=writer._ownerWritableStream;return WritableStreamClose(stream)}__name2(WritableStreamDefaultWriterClose,"WritableStreamDefaultWriterClose"),__name(WritableStreamDefaultWriterClose,"WritableStreamDefaultWriterClose");function WritableStreamDefaultWriterCloseWithErrorPropagation(writer){var stream=writer._ownerWritableStream,state=stream._state;return WritableStreamCloseQueuedOrInFlight(stream)||state==="closed"?promiseResolvedWith(void 0):state==="errored"?promiseRejectedWith(stream._storedError):WritableStreamDefaultWriterClose(writer)}__name2(WritableStreamDefaultWriterCloseWithErrorPropagation,"WritableStreamDefaultWriterCloseWithErrorPropagation"),__name(WritableStreamDefaultWriterCloseWithErrorPropagation,"WritableStreamDefaultWriterCloseWithErrorPropagation");function WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer,error){writer._closedPromiseState==="pending"?defaultWriterClosedPromiseReject(writer,error):defaultWriterClosedPromiseResetToRejected(writer,error)}__name2(WritableStreamDefaultWriterEnsureClosedPromiseRejected,"WritableStreamDefaultWriterEnsureClosedPromiseRejected"),__name(WritableStreamDefaultWriterEnsureClosedPromiseRejected,"WritableStreamDefaultWriterEnsureClosedPromiseRejected");function WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer,error){writer._readyPromiseState==="pending"?defaultWriterReadyPromiseReject(writer,error):defaultWriterReadyPromiseResetToRejected(writer,error)}__name2(WritableStreamDefaultWriterEnsureReadyPromiseRejected,"WritableStreamDefaultWriterEnsureReadyPromiseRejected"),__name(WritableStreamDefaultWriterEnsureReadyPromiseRejected,"WritableStreamDefaultWriterEnsureReadyPromiseRejected");function WritableStreamDefaultWriterGetDesiredSize(writer){var stream=writer._ownerWritableStream,state=stream._state;return state==="errored"||state==="erroring"?null:state==="closed"?0:WritableStreamDefaultControllerGetDesiredSize(stream._writableStreamController)}__name2(WritableStreamDefaultWriterGetDesiredSize,"WritableStreamDefaultWriterGetDesiredSize"),__name(WritableStreamDefaultWriterGetDesiredSize,"WritableStreamDefaultWriterGetDesiredSize");function WritableStreamDefaultWriterRelease(writer){var stream=writer._ownerWritableStream,releasedError=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer,releasedError),WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer,releasedError),stream._writer=void 0,writer._ownerWritableStream=void 0}__name2(WritableStreamDefaultWriterRelease,"WritableStreamDefaultWriterRelease"),__name(WritableStreamDefaultWriterRelease,"WritableStreamDefaultWriterRelease");function WritableStreamDefaultWriterWrite(writer,chunk){var stream=writer._ownerWritableStream,controller=stream._writableStreamController,chunkSize=WritableStreamDefaultControllerGetChunkSize(controller,chunk);if(stream!==writer._ownerWritableStream)return promiseRejectedWith(defaultWriterLockException("write to"));var state=stream._state;if(state==="errored")return promiseRejectedWith(stream._storedError);if(WritableStreamCloseQueuedOrInFlight(stream)||state==="closed")return promiseRejectedWith(new TypeError("The stream is closing or closed and cannot be written to"));if(state==="erroring")return promiseRejectedWith(stream._storedError);var promise=WritableStreamAddWriteRequest(stream);return WritableStreamDefaultControllerWrite(controller,chunk,chunkSize),promise}__name2(WritableStreamDefaultWriterWrite,"WritableStreamDefaultWriterWrite"),__name(WritableStreamDefaultWriterWrite,"WritableStreamDefaultWriterWrite");var closeSentinel={},WritableStreamDefaultController=function(){function WritableStreamDefaultController2(){throw new TypeError("Illegal constructor")}return __name2(WritableStreamDefaultController2,"WritableStreamDefaultController2"),__name(WritableStreamDefaultController2,"WritableStreamDefaultController"),Object.defineProperty(WritableStreamDefaultController2.prototype,"abortReason",{get:function(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(WritableStreamDefaultController2.prototype,"signal",{get:function(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),WritableStreamDefaultController2.prototype.error=function(e){if(e===void 0&&(e=void 0),!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("error");var state=this._controlledWritableStream._state;state==="writable"&&WritableStreamDefaultControllerError(this,e)},WritableStreamDefaultController2.prototype[AbortSteps]=function(reason){var result=this._abortAlgorithm(reason);return WritableStreamDefaultControllerClearAlgorithms(this),result},WritableStreamDefaultController2.prototype[ErrorSteps]=function(){ResetQueue(this)},WritableStreamDefaultController2}();Object.defineProperties(WritableStreamDefaultController.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(WritableStreamDefaultController.prototype,SymbolPolyfill.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function IsWritableStreamDefaultController(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_controlledWritableStream")?!1:x instanceof WritableStreamDefaultController}__name2(IsWritableStreamDefaultController,"IsWritableStreamDefaultController"),__name(IsWritableStreamDefaultController,"IsWritableStreamDefaultController");function SetUpWritableStreamDefaultController(stream,controller,startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,highWaterMark,sizeAlgorithm){controller._controlledWritableStream=stream,stream._writableStreamController=controller,controller._queue=void 0,controller._queueTotalSize=void 0,ResetQueue(controller),controller._abortReason=void 0,controller._abortController=createAbortController(),controller._started=!1,controller._strategySizeAlgorithm=sizeAlgorithm,controller._strategyHWM=highWaterMark,controller._writeAlgorithm=writeAlgorithm,controller._closeAlgorithm=closeAlgorithm,controller._abortAlgorithm=abortAlgorithm;var backpressure=WritableStreamDefaultControllerGetBackpressure(controller);WritableStreamUpdateBackpressure(stream,backpressure);var startResult=startAlgorithm(),startPromise=promiseResolvedWith(startResult);uponPromise(startPromise,function(){controller._started=!0,WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller)},function(r){controller._started=!0,WritableStreamDealWithRejection(stream,r)})}__name2(SetUpWritableStreamDefaultController,"SetUpWritableStreamDefaultController"),__name(SetUpWritableStreamDefaultController,"SetUpWritableStreamDefaultController");function SetUpWritableStreamDefaultControllerFromUnderlyingSink(stream,underlyingSink,highWaterMark,sizeAlgorithm){var controller=Object.create(WritableStreamDefaultController.prototype),startAlgorithm=__name(function(){},"startAlgorithm"),writeAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"writeAlgorithm"),closeAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"closeAlgorithm"),abortAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"abortAlgorithm");underlyingSink.start!==void 0&&(startAlgorithm=__name(function(){return underlyingSink.start(controller)},"startAlgorithm")),underlyingSink.write!==void 0&&(writeAlgorithm=__name(function(chunk){return underlyingSink.write(chunk,controller)},"writeAlgorithm")),underlyingSink.close!==void 0&&(closeAlgorithm=__name(function(){return underlyingSink.close()},"closeAlgorithm")),underlyingSink.abort!==void 0&&(abortAlgorithm=__name(function(reason){return underlyingSink.abort(reason)},"abortAlgorithm")),SetUpWritableStreamDefaultController(stream,controller,startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,highWaterMark,sizeAlgorithm)}__name2(SetUpWritableStreamDefaultControllerFromUnderlyingSink,"SetUpWritableStreamDefaultControllerFromUnderlyingSink"),__name(SetUpWritableStreamDefaultControllerFromUnderlyingSink,"SetUpWritableStreamDefaultControllerFromUnderlyingSink");function WritableStreamDefaultControllerClearAlgorithms(controller){controller._writeAlgorithm=void 0,controller._closeAlgorithm=void 0,controller._abortAlgorithm=void 0,controller._strategySizeAlgorithm=void 0}__name2(WritableStreamDefaultControllerClearAlgorithms,"WritableStreamDefaultControllerClearAlgorithms"),__name(WritableStreamDefaultControllerClearAlgorithms,"WritableStreamDefaultControllerClearAlgorithms");function WritableStreamDefaultControllerClose(controller){EnqueueValueWithSize(controller,closeSentinel,0),WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller)}__name2(WritableStreamDefaultControllerClose,"WritableStreamDefaultControllerClose"),__name(WritableStreamDefaultControllerClose,"WritableStreamDefaultControllerClose");function WritableStreamDefaultControllerGetChunkSize(controller,chunk){try{return controller._strategySizeAlgorithm(chunk)}catch(chunkSizeE){return WritableStreamDefaultControllerErrorIfNeeded(controller,chunkSizeE),1}}__name2(WritableStreamDefaultControllerGetChunkSize,"WritableStreamDefaultControllerGetChunkSize"),__name(WritableStreamDefaultControllerGetChunkSize,"WritableStreamDefaultControllerGetChunkSize");function WritableStreamDefaultControllerGetDesiredSize(controller){return controller._strategyHWM-controller._queueTotalSize}__name2(WritableStreamDefaultControllerGetDesiredSize,"WritableStreamDefaultControllerGetDesiredSize"),__name(WritableStreamDefaultControllerGetDesiredSize,"WritableStreamDefaultControllerGetDesiredSize");function WritableStreamDefaultControllerWrite(controller,chunk,chunkSize){try{EnqueueValueWithSize(controller,chunk,chunkSize)}catch(enqueueE){WritableStreamDefaultControllerErrorIfNeeded(controller,enqueueE);return}var stream=controller._controlledWritableStream;if(!WritableStreamCloseQueuedOrInFlight(stream)&&stream._state==="writable"){var backpressure=WritableStreamDefaultControllerGetBackpressure(controller);WritableStreamUpdateBackpressure(stream,backpressure)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller)}__name2(WritableStreamDefaultControllerWrite,"WritableStreamDefaultControllerWrite"),__name(WritableStreamDefaultControllerWrite,"WritableStreamDefaultControllerWrite");function WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller){var stream=controller._controlledWritableStream;if(controller._started&&stream._inFlightWriteRequest===void 0){var state=stream._state;if(state==="erroring"){WritableStreamFinishErroring(stream);return}if(controller._queue.length!==0){var value=PeekQueueValue(controller);value===closeSentinel?WritableStreamDefaultControllerProcessClose(controller):WritableStreamDefaultControllerProcessWrite(controller,value)}}}__name2(WritableStreamDefaultControllerAdvanceQueueIfNeeded,"WritableStreamDefaultControllerAdvanceQueueIfNeeded"),__name(WritableStreamDefaultControllerAdvanceQueueIfNeeded,"WritableStreamDefaultControllerAdvanceQueueIfNeeded");function WritableStreamDefaultControllerErrorIfNeeded(controller,error){controller._controlledWritableStream._state==="writable"&&WritableStreamDefaultControllerError(controller,error)}__name2(WritableStreamDefaultControllerErrorIfNeeded,"WritableStreamDefaultControllerErrorIfNeeded"),__name(WritableStreamDefaultControllerErrorIfNeeded,"WritableStreamDefaultControllerErrorIfNeeded");function WritableStreamDefaultControllerProcessClose(controller){var stream=controller._controlledWritableStream;WritableStreamMarkCloseRequestInFlight(stream),DequeueValue(controller);var sinkClosePromise=controller._closeAlgorithm();WritableStreamDefaultControllerClearAlgorithms(controller),uponPromise(sinkClosePromise,function(){WritableStreamFinishInFlightClose(stream)},function(reason){WritableStreamFinishInFlightCloseWithError(stream,reason)})}__name2(WritableStreamDefaultControllerProcessClose,"WritableStreamDefaultControllerProcessClose"),__name(WritableStreamDefaultControllerProcessClose,"WritableStreamDefaultControllerProcessClose");function WritableStreamDefaultControllerProcessWrite(controller,chunk){var stream=controller._controlledWritableStream;WritableStreamMarkFirstWriteRequestInFlight(stream);var sinkWritePromise=controller._writeAlgorithm(chunk);uponPromise(sinkWritePromise,function(){WritableStreamFinishInFlightWrite(stream);var state=stream._state;if(DequeueValue(controller),!WritableStreamCloseQueuedOrInFlight(stream)&&state==="writable"){var backpressure=WritableStreamDefaultControllerGetBackpressure(controller);WritableStreamUpdateBackpressure(stream,backpressure)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller)},function(reason){stream._state==="writable"&&WritableStreamDefaultControllerClearAlgorithms(controller),WritableStreamFinishInFlightWriteWithError(stream,reason)})}__name2(WritableStreamDefaultControllerProcessWrite,"WritableStreamDefaultControllerProcessWrite"),__name(WritableStreamDefaultControllerProcessWrite,"WritableStreamDefaultControllerProcessWrite");function WritableStreamDefaultControllerGetBackpressure(controller){var desiredSize=WritableStreamDefaultControllerGetDesiredSize(controller);return desiredSize<=0}__name2(WritableStreamDefaultControllerGetBackpressure,"WritableStreamDefaultControllerGetBackpressure"),__name(WritableStreamDefaultControllerGetBackpressure,"WritableStreamDefaultControllerGetBackpressure");function WritableStreamDefaultControllerError(controller,error){var stream=controller._controlledWritableStream;WritableStreamDefaultControllerClearAlgorithms(controller),WritableStreamStartErroring(stream,error)}__name2(WritableStreamDefaultControllerError,"WritableStreamDefaultControllerError"),__name(WritableStreamDefaultControllerError,"WritableStreamDefaultControllerError");function streamBrandCheckException$2(name){return new TypeError("WritableStream.prototype."+name+" can only be used on a WritableStream")}__name2(streamBrandCheckException$2,"streamBrandCheckException$2"),__name(streamBrandCheckException$2,"streamBrandCheckException$2");function defaultControllerBrandCheckException$2(name){return new TypeError("WritableStreamDefaultController.prototype."+name+" can only be used on a WritableStreamDefaultController")}__name2(defaultControllerBrandCheckException$2,"defaultControllerBrandCheckException$2"),__name(defaultControllerBrandCheckException$2,"defaultControllerBrandCheckException$2");function defaultWriterBrandCheckException(name){return new TypeError("WritableStreamDefaultWriter.prototype."+name+" can only be used on a WritableStreamDefaultWriter")}__name2(defaultWriterBrandCheckException,"defaultWriterBrandCheckException"),__name(defaultWriterBrandCheckException,"defaultWriterBrandCheckException");function defaultWriterLockException(name){return new TypeError("Cannot "+name+" a stream using a released writer")}__name2(defaultWriterLockException,"defaultWriterLockException"),__name(defaultWriterLockException,"defaultWriterLockException");function defaultWriterClosedPromiseInitialize(writer){writer._closedPromise=newPromise(function(resolve,reject){writer._closedPromise_resolve=resolve,writer._closedPromise_reject=reject,writer._closedPromiseState="pending"})}__name2(defaultWriterClosedPromiseInitialize,"defaultWriterClosedPromiseInitialize"),__name(defaultWriterClosedPromiseInitialize,"defaultWriterClosedPromiseInitialize");function defaultWriterClosedPromiseInitializeAsRejected(writer,reason){defaultWriterClosedPromiseInitialize(writer),defaultWriterClosedPromiseReject(writer,reason)}__name2(defaultWriterClosedPromiseInitializeAsRejected,"defaultWriterClosedPromiseInitializeAsRejected"),__name(defaultWriterClosedPromiseInitializeAsRejected,"defaultWriterClosedPromiseInitializeAsRejected");function defaultWriterClosedPromiseInitializeAsResolved(writer){defaultWriterClosedPromiseInitialize(writer),defaultWriterClosedPromiseResolve(writer)}__name2(defaultWriterClosedPromiseInitializeAsResolved,"defaultWriterClosedPromiseInitializeAsResolved"),__name(defaultWriterClosedPromiseInitializeAsResolved,"defaultWriterClosedPromiseInitializeAsResolved");function defaultWriterClosedPromiseReject(writer,reason){writer._closedPromise_reject!==void 0&&(setPromiseIsHandledToTrue(writer._closedPromise),writer._closedPromise_reject(reason),writer._closedPromise_resolve=void 0,writer._closedPromise_reject=void 0,writer._closedPromiseState="rejected")}__name2(defaultWriterClosedPromiseReject,"defaultWriterClosedPromiseReject"),__name(defaultWriterClosedPromiseReject,"defaultWriterClosedPromiseReject");function defaultWriterClosedPromiseResetToRejected(writer,reason){defaultWriterClosedPromiseInitializeAsRejected(writer,reason)}__name2(defaultWriterClosedPromiseResetToRejected,"defaultWriterClosedPromiseResetToRejected"),__name(defaultWriterClosedPromiseResetToRejected,"defaultWriterClosedPromiseResetToRejected");function defaultWriterClosedPromiseResolve(writer){writer._closedPromise_resolve!==void 0&&(writer._closedPromise_resolve(void 0),writer._closedPromise_resolve=void 0,writer._closedPromise_reject=void 0,writer._closedPromiseState="resolved")}__name2(defaultWriterClosedPromiseResolve,"defaultWriterClosedPromiseResolve"),__name(defaultWriterClosedPromiseResolve,"defaultWriterClosedPromiseResolve");function defaultWriterReadyPromiseInitialize(writer){writer._readyPromise=newPromise(function(resolve,reject){writer._readyPromise_resolve=resolve,writer._readyPromise_reject=reject}),writer._readyPromiseState="pending"}__name2(defaultWriterReadyPromiseInitialize,"defaultWriterReadyPromiseInitialize"),__name(defaultWriterReadyPromiseInitialize,"defaultWriterReadyPromiseInitialize");function defaultWriterReadyPromiseInitializeAsRejected(writer,reason){defaultWriterReadyPromiseInitialize(writer),defaultWriterReadyPromiseReject(writer,reason)}__name2(defaultWriterReadyPromiseInitializeAsRejected,"defaultWriterReadyPromiseInitializeAsRejected"),__name(defaultWriterReadyPromiseInitializeAsRejected,"defaultWriterReadyPromiseInitializeAsRejected");function defaultWriterReadyPromiseInitializeAsResolved(writer){defaultWriterReadyPromiseInitialize(writer),defaultWriterReadyPromiseResolve(writer)}__name2(defaultWriterReadyPromiseInitializeAsResolved,"defaultWriterReadyPromiseInitializeAsResolved"),__name(defaultWriterReadyPromiseInitializeAsResolved,"defaultWriterReadyPromiseInitializeAsResolved");function defaultWriterReadyPromiseReject(writer,reason){writer._readyPromise_reject!==void 0&&(setPromiseIsHandledToTrue(writer._readyPromise),writer._readyPromise_reject(reason),writer._readyPromise_resolve=void 0,writer._readyPromise_reject=void 0,writer._readyPromiseState="rejected")}__name2(defaultWriterReadyPromiseReject,"defaultWriterReadyPromiseReject"),__name(defaultWriterReadyPromiseReject,"defaultWriterReadyPromiseReject");function defaultWriterReadyPromiseReset(writer){defaultWriterReadyPromiseInitialize(writer)}__name2(defaultWriterReadyPromiseReset,"defaultWriterReadyPromiseReset"),__name(defaultWriterReadyPromiseReset,"defaultWriterReadyPromiseReset");function defaultWriterReadyPromiseResetToRejected(writer,reason){defaultWriterReadyPromiseInitializeAsRejected(writer,reason)}__name2(defaultWriterReadyPromiseResetToRejected,"defaultWriterReadyPromiseResetToRejected"),__name(defaultWriterReadyPromiseResetToRejected,"defaultWriterReadyPromiseResetToRejected");function defaultWriterReadyPromiseResolve(writer){writer._readyPromise_resolve!==void 0&&(writer._readyPromise_resolve(void 0),writer._readyPromise_resolve=void 0,writer._readyPromise_reject=void 0,writer._readyPromiseState="fulfilled")}__name2(defaultWriterReadyPromiseResolve,"defaultWriterReadyPromiseResolve"),__name(defaultWriterReadyPromiseResolve,"defaultWriterReadyPromiseResolve");var NativeDOMException=typeof DOMException<"u"?DOMException:void 0;function isDOMExceptionConstructor(ctor){if(!(typeof ctor=="function"||typeof ctor=="object"))return!1;try{return new ctor,!0}catch{return!1}}__name2(isDOMExceptionConstructor,"isDOMExceptionConstructor"),__name(isDOMExceptionConstructor,"isDOMExceptionConstructor");function createDOMExceptionPolyfill(){var ctor=__name(__name2(function(message,name){this.message=message||"",this.name=name||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)},"DOMException2"),"DOMException");return ctor.prototype=Object.create(Error.prototype),Object.defineProperty(ctor.prototype,"constructor",{value:ctor,writable:!0,configurable:!0}),ctor}__name2(createDOMExceptionPolyfill,"createDOMExceptionPolyfill"),__name(createDOMExceptionPolyfill,"createDOMExceptionPolyfill");var DOMException$1=isDOMExceptionConstructor(NativeDOMException)?NativeDOMException:createDOMExceptionPolyfill();function ReadableStreamPipeTo(source,dest,preventClose,preventAbort,preventCancel,signal){var reader=AcquireReadableStreamDefaultReader(source),writer=AcquireWritableStreamDefaultWriter(dest);source._disturbed=!0;var shuttingDown=!1,currentWrite=promiseResolvedWith(void 0);return newPromise(function(resolve,reject){var abortAlgorithm;if(signal!==void 0){if(abortAlgorithm=__name(function(){var error=new DOMException$1("Aborted","AbortError"),actions=[];preventAbort||actions.push(function(){return dest._state==="writable"?WritableStreamAbort(dest,error):promiseResolvedWith(void 0)}),preventCancel||actions.push(function(){return source._state==="readable"?ReadableStreamCancel(source,error):promiseResolvedWith(void 0)}),shutdownWithAction(function(){return Promise.all(actions.map(function(action){return action()}))},!0,error)},"abortAlgorithm"),signal.aborted){abortAlgorithm();return}signal.addEventListener("abort",abortAlgorithm)}function pipeLoop(){return newPromise(function(resolveLoop,rejectLoop){function next(done){done?resolveLoop():PerformPromiseThen(pipeStep(),next,rejectLoop)}__name2(next,"next"),__name(next,"next"),next(!1)})}__name2(pipeLoop,"pipeLoop"),__name(pipeLoop,"pipeLoop");function pipeStep(){return shuttingDown?promiseResolvedWith(!0):PerformPromiseThen(writer._readyPromise,function(){return newPromise(function(resolveRead,rejectRead){ReadableStreamDefaultReaderRead(reader,{_chunkSteps:function(chunk){currentWrite=PerformPromiseThen(WritableStreamDefaultWriterWrite(writer,chunk),void 0,noop),resolveRead(!1)},_closeSteps:function(){return resolveRead(!0)},_errorSteps:rejectRead})})})}if(__name2(pipeStep,"pipeStep"),__name(pipeStep,"pipeStep"),isOrBecomesErrored(source,reader._closedPromise,function(storedError){preventAbort?shutdown(!0,storedError):shutdownWithAction(function(){return WritableStreamAbort(dest,storedError)},!0,storedError)}),isOrBecomesErrored(dest,writer._closedPromise,function(storedError){preventCancel?shutdown(!0,storedError):shutdownWithAction(function(){return ReadableStreamCancel(source,storedError)},!0,storedError)}),isOrBecomesClosed(source,reader._closedPromise,function(){preventClose?shutdown():shutdownWithAction(function(){return WritableStreamDefaultWriterCloseWithErrorPropagation(writer)})}),WritableStreamCloseQueuedOrInFlight(dest)||dest._state==="closed"){var destClosed_1=new TypeError("the destination writable stream closed before all data could be piped to it");preventCancel?shutdown(!0,destClosed_1):shutdownWithAction(function(){return ReadableStreamCancel(source,destClosed_1)},!0,destClosed_1)}setPromiseIsHandledToTrue(pipeLoop());function waitForWritesToFinish(){var oldCurrentWrite=currentWrite;return PerformPromiseThen(currentWrite,function(){return oldCurrentWrite!==currentWrite?waitForWritesToFinish():void 0})}__name2(waitForWritesToFinish,"waitForWritesToFinish"),__name(waitForWritesToFinish,"waitForWritesToFinish");function isOrBecomesErrored(stream,promise,action){stream._state==="errored"?action(stream._storedError):uponRejection(promise,action)}__name2(isOrBecomesErrored,"isOrBecomesErrored"),__name(isOrBecomesErrored,"isOrBecomesErrored");function isOrBecomesClosed(stream,promise,action){stream._state==="closed"?action():uponFulfillment(promise,action)}__name2(isOrBecomesClosed,"isOrBecomesClosed"),__name(isOrBecomesClosed,"isOrBecomesClosed");function shutdownWithAction(action,originalIsError,originalError){if(shuttingDown)return;shuttingDown=!0,dest._state==="writable"&&!WritableStreamCloseQueuedOrInFlight(dest)?uponFulfillment(waitForWritesToFinish(),doTheRest):doTheRest();function doTheRest(){uponPromise(action(),function(){return finalize(originalIsError,originalError)},function(newError){return finalize(!0,newError)})}__name2(doTheRest,"doTheRest"),__name(doTheRest,"doTheRest")}__name2(shutdownWithAction,"shutdownWithAction"),__name(shutdownWithAction,"shutdownWithAction");function shutdown(isError,error){shuttingDown||(shuttingDown=!0,dest._state==="writable"&&!WritableStreamCloseQueuedOrInFlight(dest)?uponFulfillment(waitForWritesToFinish(),function(){return finalize(isError,error)}):finalize(isError,error))}__name2(shutdown,"shutdown"),__name(shutdown,"shutdown");function finalize(isError,error){WritableStreamDefaultWriterRelease(writer),ReadableStreamReaderGenericRelease(reader),signal!==void 0&&signal.removeEventListener("abort",abortAlgorithm),isError?reject(error):resolve(void 0)}__name2(finalize,"finalize"),__name(finalize,"finalize")})}__name2(ReadableStreamPipeTo,"ReadableStreamPipeTo"),__name(ReadableStreamPipeTo,"ReadableStreamPipeTo");var ReadableStreamDefaultController=function(){function ReadableStreamDefaultController2(){throw new TypeError("Illegal constructor")}return __name2(ReadableStreamDefaultController2,"ReadableStreamDefaultController2"),__name(ReadableStreamDefaultController2,"ReadableStreamDefaultController"),Object.defineProperty(ReadableStreamDefaultController2.prototype,"desiredSize",{get:function(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this)},enumerable:!1,configurable:!0}),ReadableStreamDefaultController2.prototype.close=function(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("close");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits close");ReadableStreamDefaultControllerClose(this)},ReadableStreamDefaultController2.prototype.enqueue=function(chunk){if(chunk===void 0&&(chunk=void 0),!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("enqueue");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits enqueue");return ReadableStreamDefaultControllerEnqueue(this,chunk)},ReadableStreamDefaultController2.prototype.error=function(e){if(e===void 0&&(e=void 0),!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("error");ReadableStreamDefaultControllerError(this,e)},ReadableStreamDefaultController2.prototype[CancelSteps]=function(reason){ResetQueue(this);var result=this._cancelAlgorithm(reason);return ReadableStreamDefaultControllerClearAlgorithms(this),result},ReadableStreamDefaultController2.prototype[PullSteps]=function(readRequest){var stream=this._controlledReadableStream;if(this._queue.length>0){var chunk=DequeueValue(this);this._closeRequested&&this._queue.length===0?(ReadableStreamDefaultControllerClearAlgorithms(this),ReadableStreamClose(stream)):ReadableStreamDefaultControllerCallPullIfNeeded(this),readRequest._chunkSteps(chunk)}else ReadableStreamAddReadRequest(stream,readRequest),ReadableStreamDefaultControllerCallPullIfNeeded(this)},ReadableStreamDefaultController2}();Object.defineProperties(ReadableStreamDefaultController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ReadableStreamDefaultController.prototype,SymbolPolyfill.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function IsReadableStreamDefaultController(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_controlledReadableStream")?!1:x instanceof ReadableStreamDefaultController}__name2(IsReadableStreamDefaultController,"IsReadableStreamDefaultController"),__name(IsReadableStreamDefaultController,"IsReadableStreamDefaultController");function ReadableStreamDefaultControllerCallPullIfNeeded(controller){var shouldPull=ReadableStreamDefaultControllerShouldCallPull(controller);if(shouldPull){if(controller._pulling){controller._pullAgain=!0;return}controller._pulling=!0;var pullPromise=controller._pullAlgorithm();uponPromise(pullPromise,function(){controller._pulling=!1,controller._pullAgain&&(controller._pullAgain=!1,ReadableStreamDefaultControllerCallPullIfNeeded(controller))},function(e){ReadableStreamDefaultControllerError(controller,e)})}}__name2(ReadableStreamDefaultControllerCallPullIfNeeded,"ReadableStreamDefaultControllerCallPullIfNeeded"),__name(ReadableStreamDefaultControllerCallPullIfNeeded,"ReadableStreamDefaultControllerCallPullIfNeeded");function ReadableStreamDefaultControllerShouldCallPull(controller){var stream=controller._controlledReadableStream;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)||!controller._started)return!1;if(IsReadableStreamLocked(stream)&&ReadableStreamGetNumReadRequests(stream)>0)return!0;var desiredSize=ReadableStreamDefaultControllerGetDesiredSize(controller);return desiredSize>0}__name2(ReadableStreamDefaultControllerShouldCallPull,"ReadableStreamDefaultControllerShouldCallPull"),__name(ReadableStreamDefaultControllerShouldCallPull,"ReadableStreamDefaultControllerShouldCallPull");function ReadableStreamDefaultControllerClearAlgorithms(controller){controller._pullAlgorithm=void 0,controller._cancelAlgorithm=void 0,controller._strategySizeAlgorithm=void 0}__name2(ReadableStreamDefaultControllerClearAlgorithms,"ReadableStreamDefaultControllerClearAlgorithms"),__name(ReadableStreamDefaultControllerClearAlgorithms,"ReadableStreamDefaultControllerClearAlgorithms");function ReadableStreamDefaultControllerClose(controller){if(ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)){var stream=controller._controlledReadableStream;controller._closeRequested=!0,controller._queue.length===0&&(ReadableStreamDefaultControllerClearAlgorithms(controller),ReadableStreamClose(stream))}}__name2(ReadableStreamDefaultControllerClose,"ReadableStreamDefaultControllerClose"),__name(ReadableStreamDefaultControllerClose,"ReadableStreamDefaultControllerClose");function ReadableStreamDefaultControllerEnqueue(controller,chunk){if(ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)){var stream=controller._controlledReadableStream;if(IsReadableStreamLocked(stream)&&ReadableStreamGetNumReadRequests(stream)>0)ReadableStreamFulfillReadRequest(stream,chunk,!1);else{var chunkSize=void 0;try{chunkSize=controller._strategySizeAlgorithm(chunk)}catch(chunkSizeE){throw ReadableStreamDefaultControllerError(controller,chunkSizeE),chunkSizeE}try{EnqueueValueWithSize(controller,chunk,chunkSize)}catch(enqueueE){throw ReadableStreamDefaultControllerError(controller,enqueueE),enqueueE}}ReadableStreamDefaultControllerCallPullIfNeeded(controller)}}__name2(ReadableStreamDefaultControllerEnqueue,"ReadableStreamDefaultControllerEnqueue"),__name(ReadableStreamDefaultControllerEnqueue,"ReadableStreamDefaultControllerEnqueue");function ReadableStreamDefaultControllerError(controller,e){var stream=controller._controlledReadableStream;stream._state==="readable"&&(ResetQueue(controller),ReadableStreamDefaultControllerClearAlgorithms(controller),ReadableStreamError(stream,e))}__name2(ReadableStreamDefaultControllerError,"ReadableStreamDefaultControllerError"),__name(ReadableStreamDefaultControllerError,"ReadableStreamDefaultControllerError");function ReadableStreamDefaultControllerGetDesiredSize(controller){var state=controller._controlledReadableStream._state;return state==="errored"?null:state==="closed"?0:controller._strategyHWM-controller._queueTotalSize}__name2(ReadableStreamDefaultControllerGetDesiredSize,"ReadableStreamDefaultControllerGetDesiredSize"),__name(ReadableStreamDefaultControllerGetDesiredSize,"ReadableStreamDefaultControllerGetDesiredSize");function ReadableStreamDefaultControllerHasBackpressure(controller){return!ReadableStreamDefaultControllerShouldCallPull(controller)}__name2(ReadableStreamDefaultControllerHasBackpressure,"ReadableStreamDefaultControllerHasBackpressure"),__name(ReadableStreamDefaultControllerHasBackpressure,"ReadableStreamDefaultControllerHasBackpressure");function ReadableStreamDefaultControllerCanCloseOrEnqueue(controller){var state=controller._controlledReadableStream._state;return!controller._closeRequested&&state==="readable"}__name2(ReadableStreamDefaultControllerCanCloseOrEnqueue,"ReadableStreamDefaultControllerCanCloseOrEnqueue"),__name(ReadableStreamDefaultControllerCanCloseOrEnqueue,"ReadableStreamDefaultControllerCanCloseOrEnqueue");function SetUpReadableStreamDefaultController(stream,controller,startAlgorithm,pullAlgorithm,cancelAlgorithm,highWaterMark,sizeAlgorithm){controller._controlledReadableStream=stream,controller._queue=void 0,controller._queueTotalSize=void 0,ResetQueue(controller),controller._started=!1,controller._closeRequested=!1,controller._pullAgain=!1,controller._pulling=!1,controller._strategySizeAlgorithm=sizeAlgorithm,controller._strategyHWM=highWaterMark,controller._pullAlgorithm=pullAlgorithm,controller._cancelAlgorithm=cancelAlgorithm,stream._readableStreamController=controller;var startResult=startAlgorithm();uponPromise(promiseResolvedWith(startResult),function(){controller._started=!0,ReadableStreamDefaultControllerCallPullIfNeeded(controller)},function(r){ReadableStreamDefaultControllerError(controller,r)})}__name2(SetUpReadableStreamDefaultController,"SetUpReadableStreamDefaultController"),__name(SetUpReadableStreamDefaultController,"SetUpReadableStreamDefaultController");function SetUpReadableStreamDefaultControllerFromUnderlyingSource(stream,underlyingSource,highWaterMark,sizeAlgorithm){var controller=Object.create(ReadableStreamDefaultController.prototype),startAlgorithm=__name(function(){},"startAlgorithm"),pullAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"pullAlgorithm"),cancelAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"cancelAlgorithm");underlyingSource.start!==void 0&&(startAlgorithm=__name(function(){return underlyingSource.start(controller)},"startAlgorithm")),underlyingSource.pull!==void 0&&(pullAlgorithm=__name(function(){return underlyingSource.pull(controller)},"pullAlgorithm")),underlyingSource.cancel!==void 0&&(cancelAlgorithm=__name(function(reason){return underlyingSource.cancel(reason)},"cancelAlgorithm")),SetUpReadableStreamDefaultController(stream,controller,startAlgorithm,pullAlgorithm,cancelAlgorithm,highWaterMark,sizeAlgorithm)}__name2(SetUpReadableStreamDefaultControllerFromUnderlyingSource,"SetUpReadableStreamDefaultControllerFromUnderlyingSource"),__name(SetUpReadableStreamDefaultControllerFromUnderlyingSource,"SetUpReadableStreamDefaultControllerFromUnderlyingSource");function defaultControllerBrandCheckException$1(name){return new TypeError("ReadableStreamDefaultController.prototype."+name+" can only be used on a ReadableStreamDefaultController")}__name2(defaultControllerBrandCheckException$1,"defaultControllerBrandCheckException$1"),__name(defaultControllerBrandCheckException$1,"defaultControllerBrandCheckException$1");function ReadableStreamTee(stream,cloneForBranch2){return IsReadableByteStreamController(stream._readableStreamController)?ReadableByteStreamTee(stream):ReadableStreamDefaultTee(stream)}__name2(ReadableStreamTee,"ReadableStreamTee"),__name(ReadableStreamTee,"ReadableStreamTee");function ReadableStreamDefaultTee(stream,cloneForBranch2){var reader=AcquireReadableStreamDefaultReader(stream),reading=!1,readAgain=!1,canceled1=!1,canceled2=!1,reason1,reason2,branch1,branch2,resolveCancelPromise,cancelPromise=newPromise(function(resolve){resolveCancelPromise=resolve});function pullAlgorithm(){if(reading)return readAgain=!0,promiseResolvedWith(void 0);reading=!0;var readRequest={_chunkSteps:function(chunk){queueMicrotask(function(){readAgain=!1;var chunk1=chunk,chunk2=chunk;canceled1||ReadableStreamDefaultControllerEnqueue(branch1._readableStreamController,chunk1),canceled2||ReadableStreamDefaultControllerEnqueue(branch2._readableStreamController,chunk2),reading=!1,readAgain&&pullAlgorithm()})},_closeSteps:function(){reading=!1,canceled1||ReadableStreamDefaultControllerClose(branch1._readableStreamController),canceled2||ReadableStreamDefaultControllerClose(branch2._readableStreamController),(!canceled1||!canceled2)&&resolveCancelPromise(void 0)},_errorSteps:function(){reading=!1}};return ReadableStreamDefaultReaderRead(reader,readRequest),promiseResolvedWith(void 0)}__name2(pullAlgorithm,"pullAlgorithm"),__name(pullAlgorithm,"pullAlgorithm");function cancel1Algorithm(reason){if(canceled1=!0,reason1=reason,canceled2){var compositeReason=CreateArrayFromList([reason1,reason2]),cancelResult=ReadableStreamCancel(stream,compositeReason);resolveCancelPromise(cancelResult)}return cancelPromise}__name2(cancel1Algorithm,"cancel1Algorithm"),__name(cancel1Algorithm,"cancel1Algorithm");function cancel2Algorithm(reason){if(canceled2=!0,reason2=reason,canceled1){var compositeReason=CreateArrayFromList([reason1,reason2]),cancelResult=ReadableStreamCancel(stream,compositeReason);resolveCancelPromise(cancelResult)}return cancelPromise}__name2(cancel2Algorithm,"cancel2Algorithm"),__name(cancel2Algorithm,"cancel2Algorithm");function startAlgorithm(){}return __name2(startAlgorithm,"startAlgorithm"),__name(startAlgorithm,"startAlgorithm"),branch1=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel1Algorithm),branch2=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel2Algorithm),uponRejection(reader._closedPromise,function(r){ReadableStreamDefaultControllerError(branch1._readableStreamController,r),ReadableStreamDefaultControllerError(branch2._readableStreamController,r),(!canceled1||!canceled2)&&resolveCancelPromise(void 0)}),[branch1,branch2]}__name2(ReadableStreamDefaultTee,"ReadableStreamDefaultTee"),__name(ReadableStreamDefaultTee,"ReadableStreamDefaultTee");function ReadableByteStreamTee(stream){var reader=AcquireReadableStreamDefaultReader(stream),reading=!1,readAgainForBranch1=!1,readAgainForBranch2=!1,canceled1=!1,canceled2=!1,reason1,reason2,branch1,branch2,resolveCancelPromise,cancelPromise=newPromise(function(resolve){resolveCancelPromise=resolve});function forwardReaderError(thisReader){uponRejection(thisReader._closedPromise,function(r){thisReader===reader&&(ReadableByteStreamControllerError(branch1._readableStreamController,r),ReadableByteStreamControllerError(branch2._readableStreamController,r),(!canceled1||!canceled2)&&resolveCancelPromise(void 0))})}__name2(forwardReaderError,"forwardReaderError"),__name(forwardReaderError,"forwardReaderError");function pullWithDefaultReader(){IsReadableStreamBYOBReader(reader)&&(ReadableStreamReaderGenericRelease(reader),reader=AcquireReadableStreamDefaultReader(stream),forwardReaderError(reader));var readRequest={_chunkSteps:function(chunk){queueMicrotask(function(){readAgainForBranch1=!1,readAgainForBranch2=!1;var chunk1=chunk,chunk2=chunk;if(!canceled1&&!canceled2)try{chunk2=CloneAsUint8Array(chunk)}catch(cloneE){ReadableByteStreamControllerError(branch1._readableStreamController,cloneE),ReadableByteStreamControllerError(branch2._readableStreamController,cloneE),resolveCancelPromise(ReadableStreamCancel(stream,cloneE));return}canceled1||ReadableByteStreamControllerEnqueue(branch1._readableStreamController,chunk1),canceled2||ReadableByteStreamControllerEnqueue(branch2._readableStreamController,chunk2),reading=!1,readAgainForBranch1?pull1Algorithm():readAgainForBranch2&&pull2Algorithm()})},_closeSteps:function(){reading=!1,canceled1||ReadableByteStreamControllerClose(branch1._readableStreamController),canceled2||ReadableByteStreamControllerClose(branch2._readableStreamController),branch1._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(branch1._readableStreamController,0),branch2._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(branch2._readableStreamController,0),(!canceled1||!canceled2)&&resolveCancelPromise(void 0)},_errorSteps:function(){reading=!1}};ReadableStreamDefaultReaderRead(reader,readRequest)}__name2(pullWithDefaultReader,"pullWithDefaultReader"),__name(pullWithDefaultReader,"pullWithDefaultReader");function pullWithBYOBReader(view,forBranch2){IsReadableStreamDefaultReader(reader)&&(ReadableStreamReaderGenericRelease(reader),reader=AcquireReadableStreamBYOBReader(stream),forwardReaderError(reader));var byobBranch=forBranch2?branch2:branch1,otherBranch=forBranch2?branch1:branch2,readIntoRequest={_chunkSteps:function(chunk){queueMicrotask(function(){readAgainForBranch1=!1,readAgainForBranch2=!1;var byobCanceled=forBranch2?canceled2:canceled1,otherCanceled=forBranch2?canceled1:canceled2;if(otherCanceled)byobCanceled||ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController,chunk);else{var clonedChunk=void 0;try{clonedChunk=CloneAsUint8Array(chunk)}catch(cloneE){ReadableByteStreamControllerError(byobBranch._readableStreamController,cloneE),ReadableByteStreamControllerError(otherBranch._readableStreamController,cloneE),resolveCancelPromise(ReadableStreamCancel(stream,cloneE));return}byobCanceled||ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController,chunk),ReadableByteStreamControllerEnqueue(otherBranch._readableStreamController,clonedChunk)}reading=!1,readAgainForBranch1?pull1Algorithm():readAgainForBranch2&&pull2Algorithm()})},_closeSteps:function(chunk){reading=!1;var byobCanceled=forBranch2?canceled2:canceled1,otherCanceled=forBranch2?canceled1:canceled2;byobCanceled||ReadableByteStreamControllerClose(byobBranch._readableStreamController),otherCanceled||ReadableByteStreamControllerClose(otherBranch._readableStreamController),chunk!==void 0&&(byobCanceled||ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController,chunk),!otherCanceled&&otherBranch._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(otherBranch._readableStreamController,0)),(!byobCanceled||!otherCanceled)&&resolveCancelPromise(void 0)},_errorSteps:function(){reading=!1}};ReadableStreamBYOBReaderRead(reader,view,readIntoRequest)}__name2(pullWithBYOBReader,"pullWithBYOBReader"),__name(pullWithBYOBReader,"pullWithBYOBReader");function pull1Algorithm(){if(reading)return readAgainForBranch1=!0,promiseResolvedWith(void 0);reading=!0;var byobRequest=ReadableByteStreamControllerGetBYOBRequest(branch1._readableStreamController);return byobRequest===null?pullWithDefaultReader():pullWithBYOBReader(byobRequest._view,!1),promiseResolvedWith(void 0)}__name2(pull1Algorithm,"pull1Algorithm"),__name(pull1Algorithm,"pull1Algorithm");function pull2Algorithm(){if(reading)return readAgainForBranch2=!0,promiseResolvedWith(void 0);reading=!0;var byobRequest=ReadableByteStreamControllerGetBYOBRequest(branch2._readableStreamController);return byobRequest===null?pullWithDefaultReader():pullWithBYOBReader(byobRequest._view,!0),promiseResolvedWith(void 0)}__name2(pull2Algorithm,"pull2Algorithm"),__name(pull2Algorithm,"pull2Algorithm");function cancel1Algorithm(reason){if(canceled1=!0,reason1=reason,canceled2){var compositeReason=CreateArrayFromList([reason1,reason2]),cancelResult=ReadableStreamCancel(stream,compositeReason);resolveCancelPromise(cancelResult)}return cancelPromise}__name2(cancel1Algorithm,"cancel1Algorithm"),__name(cancel1Algorithm,"cancel1Algorithm");function cancel2Algorithm(reason){if(canceled2=!0,reason2=reason,canceled1){var compositeReason=CreateArrayFromList([reason1,reason2]),cancelResult=ReadableStreamCancel(stream,compositeReason);resolveCancelPromise(cancelResult)}return cancelPromise}__name2(cancel2Algorithm,"cancel2Algorithm"),__name(cancel2Algorithm,"cancel2Algorithm");function startAlgorithm(){}return __name2(startAlgorithm,"startAlgorithm"),__name(startAlgorithm,"startAlgorithm"),branch1=CreateReadableByteStream(startAlgorithm,pull1Algorithm,cancel1Algorithm),branch2=CreateReadableByteStream(startAlgorithm,pull2Algorithm,cancel2Algorithm),forwardReaderError(reader),[branch1,branch2]}__name2(ReadableByteStreamTee,"ReadableByteStreamTee"),__name(ReadableByteStreamTee,"ReadableByteStreamTee");function convertUnderlyingDefaultOrByteSource(source,context){assertDictionary(source,context);var original=source,autoAllocateChunkSize=original?.autoAllocateChunkSize,cancel=original?.cancel,pull=original?.pull,start=original?.start,type=original?.type;return{autoAllocateChunkSize:autoAllocateChunkSize===void 0?void 0:convertUnsignedLongLongWithEnforceRange(autoAllocateChunkSize,context+" has member 'autoAllocateChunkSize' that"),cancel:cancel===void 0?void 0:convertUnderlyingSourceCancelCallback(cancel,original,context+" has member 'cancel' that"),pull:pull===void 0?void 0:convertUnderlyingSourcePullCallback(pull,original,context+" has member 'pull' that"),start:start===void 0?void 0:convertUnderlyingSourceStartCallback(start,original,context+" has member 'start' that"),type:type===void 0?void 0:convertReadableStreamType(type,context+" has member 'type' that")}}__name2(convertUnderlyingDefaultOrByteSource,"convertUnderlyingDefaultOrByteSource"),__name(convertUnderlyingDefaultOrByteSource,"convertUnderlyingDefaultOrByteSource");function convertUnderlyingSourceCancelCallback(fn,original,context){return assertFunction(fn,context),function(reason){return promiseCall(fn,original,[reason])}}__name2(convertUnderlyingSourceCancelCallback,"convertUnderlyingSourceCancelCallback"),__name(convertUnderlyingSourceCancelCallback,"convertUnderlyingSourceCancelCallback");function convertUnderlyingSourcePullCallback(fn,original,context){return assertFunction(fn,context),function(controller){return promiseCall(fn,original,[controller])}}__name2(convertUnderlyingSourcePullCallback,"convertUnderlyingSourcePullCallback"),__name(convertUnderlyingSourcePullCallback,"convertUnderlyingSourcePullCallback");function convertUnderlyingSourceStartCallback(fn,original,context){return assertFunction(fn,context),function(controller){return reflectCall(fn,original,[controller])}}__name2(convertUnderlyingSourceStartCallback,"convertUnderlyingSourceStartCallback"),__name(convertUnderlyingSourceStartCallback,"convertUnderlyingSourceStartCallback");function convertReadableStreamType(type,context){if(type=""+type,type!=="bytes")throw new TypeError(context+" '"+type+"' is not a valid enumeration value for ReadableStreamType");return type}__name2(convertReadableStreamType,"convertReadableStreamType"),__name(convertReadableStreamType,"convertReadableStreamType");function convertReaderOptions(options,context){assertDictionary(options,context);var mode=options?.mode;return{mode:mode===void 0?void 0:convertReadableStreamReaderMode(mode,context+" has member 'mode' that")}}__name2(convertReaderOptions,"convertReaderOptions"),__name(convertReaderOptions,"convertReaderOptions");function convertReadableStreamReaderMode(mode,context){if(mode=""+mode,mode!=="byob")throw new TypeError(context+" '"+mode+"' is not a valid enumeration value for ReadableStreamReaderMode");return mode}__name2(convertReadableStreamReaderMode,"convertReadableStreamReaderMode"),__name(convertReadableStreamReaderMode,"convertReadableStreamReaderMode");function convertIteratorOptions(options,context){assertDictionary(options,context);var preventCancel=options?.preventCancel;return{preventCancel:!!preventCancel}}__name2(convertIteratorOptions,"convertIteratorOptions"),__name(convertIteratorOptions,"convertIteratorOptions");function convertPipeOptions(options,context){assertDictionary(options,context);var preventAbort=options?.preventAbort,preventCancel=options?.preventCancel,preventClose=options?.preventClose,signal=options?.signal;return signal!==void 0&&assertAbortSignal(signal,context+" has member 'signal' that"),{preventAbort:!!preventAbort,preventCancel:!!preventCancel,preventClose:!!preventClose,signal}}__name2(convertPipeOptions,"convertPipeOptions"),__name(convertPipeOptions,"convertPipeOptions");function assertAbortSignal(signal,context){if(!isAbortSignal(signal))throw new TypeError(context+" is not an AbortSignal.")}__name2(assertAbortSignal,"assertAbortSignal"),__name(assertAbortSignal,"assertAbortSignal");function convertReadableWritablePair(pair,context){assertDictionary(pair,context);var readable=pair?.readable;assertRequiredField(readable,"readable","ReadableWritablePair"),assertReadableStream(readable,context+" has member 'readable' that");var writable=pair?.writable;return assertRequiredField(writable,"writable","ReadableWritablePair"),assertWritableStream(writable,context+" has member 'writable' that"),{readable,writable}}__name2(convertReadableWritablePair,"convertReadableWritablePair"),__name(convertReadableWritablePair,"convertReadableWritablePair");var ReadableStream2=function(){function ReadableStream3(rawUnderlyingSource,rawStrategy){rawUnderlyingSource===void 0&&(rawUnderlyingSource={}),rawStrategy===void 0&&(rawStrategy={}),rawUnderlyingSource===void 0?rawUnderlyingSource=null:assertObject(rawUnderlyingSource,"First parameter");var strategy=convertQueuingStrategy(rawStrategy,"Second parameter"),underlyingSource=convertUnderlyingDefaultOrByteSource(rawUnderlyingSource,"First parameter");if(InitializeReadableStream(this),underlyingSource.type==="bytes"){if(strategy.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var highWaterMark=ExtractHighWaterMark(strategy,0);SetUpReadableByteStreamControllerFromUnderlyingSource(this,underlyingSource,highWaterMark)}else{var sizeAlgorithm=ExtractSizeAlgorithm(strategy),highWaterMark=ExtractHighWaterMark(strategy,1);SetUpReadableStreamDefaultControllerFromUnderlyingSource(this,underlyingSource,highWaterMark,sizeAlgorithm)}}return __name2(ReadableStream3,"ReadableStream3"),__name(ReadableStream3,"ReadableStream"),Object.defineProperty(ReadableStream3.prototype,"locked",{get:function(){if(!IsReadableStream(this))throw streamBrandCheckException$1("locked");return IsReadableStreamLocked(this)},enumerable:!1,configurable:!0}),ReadableStream3.prototype.cancel=function(reason){return reason===void 0&&(reason=void 0),IsReadableStream(this)?IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot cancel a stream that already has a reader")):ReadableStreamCancel(this,reason):promiseRejectedWith(streamBrandCheckException$1("cancel"))},ReadableStream3.prototype.getReader=function(rawOptions){if(rawOptions===void 0&&(rawOptions=void 0),!IsReadableStream(this))throw streamBrandCheckException$1("getReader");var options=convertReaderOptions(rawOptions,"First parameter");return options.mode===void 0?AcquireReadableStreamDefaultReader(this):AcquireReadableStreamBYOBReader(this)},ReadableStream3.prototype.pipeThrough=function(rawTransform,rawOptions){if(rawOptions===void 0&&(rawOptions={}),!IsReadableStream(this))throw streamBrandCheckException$1("pipeThrough");assertRequiredArgument(rawTransform,1,"pipeThrough");var transform=convertReadableWritablePair(rawTransform,"First parameter"),options=convertPipeOptions(rawOptions,"Second parameter");if(IsReadableStreamLocked(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(IsWritableStreamLocked(transform.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var promise=ReadableStreamPipeTo(this,transform.writable,options.preventClose,options.preventAbort,options.preventCancel,options.signal);return setPromiseIsHandledToTrue(promise),transform.readable},ReadableStream3.prototype.pipeTo=function(destination,rawOptions){if(rawOptions===void 0&&(rawOptions={}),!IsReadableStream(this))return promiseRejectedWith(streamBrandCheckException$1("pipeTo"));if(destination===void 0)return promiseRejectedWith("Parameter 1 is required in 'pipeTo'.");if(!IsWritableStream(destination))return promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var options;try{options=convertPipeOptions(rawOptions,"Second parameter")}catch(e){return promiseRejectedWith(e)}return IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):IsWritableStreamLocked(destination)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ReadableStreamPipeTo(this,destination,options.preventClose,options.preventAbort,options.preventCancel,options.signal)},ReadableStream3.prototype.tee=function(){if(!IsReadableStream(this))throw streamBrandCheckException$1("tee");var branches=ReadableStreamTee(this);return CreateArrayFromList(branches)},ReadableStream3.prototype.values=function(rawOptions){if(rawOptions===void 0&&(rawOptions=void 0),!IsReadableStream(this))throw streamBrandCheckException$1("values");var options=convertIteratorOptions(rawOptions,"First parameter");return AcquireReadableStreamAsyncIterator(this,options.preventCancel)},ReadableStream3}();Object.defineProperties(ReadableStream2.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ReadableStream2.prototype,SymbolPolyfill.toStringTag,{value:"ReadableStream",configurable:!0}),typeof SymbolPolyfill.asyncIterator=="symbol"&&Object.defineProperty(ReadableStream2.prototype,SymbolPolyfill.asyncIterator,{value:ReadableStream2.prototype.values,writable:!0,configurable:!0});function CreateReadableStream(startAlgorithm,pullAlgorithm,cancelAlgorithm,highWaterMark,sizeAlgorithm){highWaterMark===void 0&&(highWaterMark=1),sizeAlgorithm===void 0&&(sizeAlgorithm=__name(function(){return 1},"sizeAlgorithm"));var stream=Object.create(ReadableStream2.prototype);InitializeReadableStream(stream);var controller=Object.create(ReadableStreamDefaultController.prototype);return SetUpReadableStreamDefaultController(stream,controller,startAlgorithm,pullAlgorithm,cancelAlgorithm,highWaterMark,sizeAlgorithm),stream}__name2(CreateReadableStream,"CreateReadableStream"),__name(CreateReadableStream,"CreateReadableStream");function CreateReadableByteStream(startAlgorithm,pullAlgorithm,cancelAlgorithm){var stream=Object.create(ReadableStream2.prototype);InitializeReadableStream(stream);var controller=Object.create(ReadableByteStreamController.prototype);return SetUpReadableByteStreamController(stream,controller,startAlgorithm,pullAlgorithm,cancelAlgorithm,0,void 0),stream}__name2(CreateReadableByteStream,"CreateReadableByteStream"),__name(CreateReadableByteStream,"CreateReadableByteStream");function InitializeReadableStream(stream){stream._state="readable",stream._reader=void 0,stream._storedError=void 0,stream._disturbed=!1}__name2(InitializeReadableStream,"InitializeReadableStream"),__name(InitializeReadableStream,"InitializeReadableStream");function IsReadableStream(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_readableStreamController")?!1:x instanceof ReadableStream2}__name2(IsReadableStream,"IsReadableStream"),__name(IsReadableStream,"IsReadableStream");function IsReadableStreamLocked(stream){return stream._reader!==void 0}__name2(IsReadableStreamLocked,"IsReadableStreamLocked"),__name(IsReadableStreamLocked,"IsReadableStreamLocked");function ReadableStreamCancel(stream,reason){if(stream._disturbed=!0,stream._state==="closed")return promiseResolvedWith(void 0);if(stream._state==="errored")return promiseRejectedWith(stream._storedError);ReadableStreamClose(stream);var reader=stream._reader;reader!==void 0&&IsReadableStreamBYOBReader(reader)&&(reader._readIntoRequests.forEach(function(readIntoRequest){readIntoRequest._closeSteps(void 0)}),reader._readIntoRequests=new SimpleQueue);var sourceCancelPromise=stream._readableStreamController[CancelSteps](reason);return transformPromiseWith(sourceCancelPromise,noop)}__name2(ReadableStreamCancel,"ReadableStreamCancel"),__name(ReadableStreamCancel,"ReadableStreamCancel");function ReadableStreamClose(stream){stream._state="closed";var reader=stream._reader;reader!==void 0&&(defaultReaderClosedPromiseResolve(reader),IsReadableStreamDefaultReader(reader)&&(reader._readRequests.forEach(function(readRequest){readRequest._closeSteps()}),reader._readRequests=new SimpleQueue))}__name2(ReadableStreamClose,"ReadableStreamClose"),__name(ReadableStreamClose,"ReadableStreamClose");function ReadableStreamError(stream,e){stream._state="errored",stream._storedError=e;var reader=stream._reader;reader!==void 0&&(defaultReaderClosedPromiseReject(reader,e),IsReadableStreamDefaultReader(reader)?(reader._readRequests.forEach(function(readRequest){readRequest._errorSteps(e)}),reader._readRequests=new SimpleQueue):(reader._readIntoRequests.forEach(function(readIntoRequest){readIntoRequest._errorSteps(e)}),reader._readIntoRequests=new SimpleQueue))}__name2(ReadableStreamError,"ReadableStreamError"),__name(ReadableStreamError,"ReadableStreamError");function streamBrandCheckException$1(name){return new TypeError("ReadableStream.prototype."+name+" can only be used on a ReadableStream")}__name2(streamBrandCheckException$1,"streamBrandCheckException$1"),__name(streamBrandCheckException$1,"streamBrandCheckException$1");function convertQueuingStrategyInit(init,context){assertDictionary(init,context);var highWaterMark=init?.highWaterMark;return assertRequiredField(highWaterMark,"highWaterMark","QueuingStrategyInit"),{highWaterMark:convertUnrestrictedDouble(highWaterMark)}}__name2(convertQueuingStrategyInit,"convertQueuingStrategyInit"),__name(convertQueuingStrategyInit,"convertQueuingStrategyInit");var byteLengthSizeFunction=__name(function(chunk){return chunk.byteLength},"byteLengthSizeFunction");try{Object.defineProperty(byteLengthSizeFunction,"name",{value:"size",configurable:!0})}catch{}var ByteLengthQueuingStrategy=function(){function ByteLengthQueuingStrategy2(options){assertRequiredArgument(options,1,"ByteLengthQueuingStrategy"),options=convertQueuingStrategyInit(options,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=options.highWaterMark}return __name2(ByteLengthQueuingStrategy2,"ByteLengthQueuingStrategy2"),__name(ByteLengthQueuingStrategy2,"ByteLengthQueuingStrategy"),Object.defineProperty(ByteLengthQueuingStrategy2.prototype,"highWaterMark",{get:function(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(ByteLengthQueuingStrategy2.prototype,"size",{get:function(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("size");return byteLengthSizeFunction},enumerable:!1,configurable:!0}),ByteLengthQueuingStrategy2}();Object.defineProperties(ByteLengthQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(ByteLengthQueuingStrategy.prototype,SymbolPolyfill.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function byteLengthBrandCheckException(name){return new TypeError("ByteLengthQueuingStrategy.prototype."+name+" can only be used on a ByteLengthQueuingStrategy")}__name2(byteLengthBrandCheckException,"byteLengthBrandCheckException"),__name(byteLengthBrandCheckException,"byteLengthBrandCheckException");function IsByteLengthQueuingStrategy(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_byteLengthQueuingStrategyHighWaterMark")?!1:x instanceof ByteLengthQueuingStrategy}__name2(IsByteLengthQueuingStrategy,"IsByteLengthQueuingStrategy"),__name(IsByteLengthQueuingStrategy,"IsByteLengthQueuingStrategy");var countSizeFunction=__name(function(){return 1},"countSizeFunction");try{Object.defineProperty(countSizeFunction,"name",{value:"size",configurable:!0})}catch{}var CountQueuingStrategy=function(){function CountQueuingStrategy2(options){assertRequiredArgument(options,1,"CountQueuingStrategy"),options=convertQueuingStrategyInit(options,"First parameter"),this._countQueuingStrategyHighWaterMark=options.highWaterMark}return __name2(CountQueuingStrategy2,"CountQueuingStrategy2"),__name(CountQueuingStrategy2,"CountQueuingStrategy"),Object.defineProperty(CountQueuingStrategy2.prototype,"highWaterMark",{get:function(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(CountQueuingStrategy2.prototype,"size",{get:function(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("size");return countSizeFunction},enumerable:!1,configurable:!0}),CountQueuingStrategy2}();Object.defineProperties(CountQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(CountQueuingStrategy.prototype,SymbolPolyfill.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function countBrandCheckException(name){return new TypeError("CountQueuingStrategy.prototype."+name+" can only be used on a CountQueuingStrategy")}__name2(countBrandCheckException,"countBrandCheckException"),__name(countBrandCheckException,"countBrandCheckException");function IsCountQueuingStrategy(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_countQueuingStrategyHighWaterMark")?!1:x instanceof CountQueuingStrategy}__name2(IsCountQueuingStrategy,"IsCountQueuingStrategy"),__name(IsCountQueuingStrategy,"IsCountQueuingStrategy");function convertTransformer(original,context){assertDictionary(original,context);var flush=original?.flush,readableType=original?.readableType,start=original?.start,transform=original?.transform,writableType=original?.writableType;return{flush:flush===void 0?void 0:convertTransformerFlushCallback(flush,original,context+" has member 'flush' that"),readableType,start:start===void 0?void 0:convertTransformerStartCallback(start,original,context+" has member 'start' that"),transform:transform===void 0?void 0:convertTransformerTransformCallback(transform,original,context+" has member 'transform' that"),writableType}}__name2(convertTransformer,"convertTransformer"),__name(convertTransformer,"convertTransformer");function convertTransformerFlushCallback(fn,original,context){return assertFunction(fn,context),function(controller){return promiseCall(fn,original,[controller])}}__name2(convertTransformerFlushCallback,"convertTransformerFlushCallback"),__name(convertTransformerFlushCallback,"convertTransformerFlushCallback");function convertTransformerStartCallback(fn,original,context){return assertFunction(fn,context),function(controller){return reflectCall(fn,original,[controller])}}__name2(convertTransformerStartCallback,"convertTransformerStartCallback"),__name(convertTransformerStartCallback,"convertTransformerStartCallback");function convertTransformerTransformCallback(fn,original,context){return assertFunction(fn,context),function(chunk,controller){return promiseCall(fn,original,[chunk,controller])}}__name2(convertTransformerTransformCallback,"convertTransformerTransformCallback"),__name(convertTransformerTransformCallback,"convertTransformerTransformCallback");var TransformStream=function(){function TransformStream2(rawTransformer,rawWritableStrategy,rawReadableStrategy){rawTransformer===void 0&&(rawTransformer={}),rawWritableStrategy===void 0&&(rawWritableStrategy={}),rawReadableStrategy===void 0&&(rawReadableStrategy={}),rawTransformer===void 0&&(rawTransformer=null);var writableStrategy=convertQueuingStrategy(rawWritableStrategy,"Second parameter"),readableStrategy=convertQueuingStrategy(rawReadableStrategy,"Third parameter"),transformer=convertTransformer(rawTransformer,"First parameter");if(transformer.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(transformer.writableType!==void 0)throw new RangeError("Invalid writableType specified");var readableHighWaterMark=ExtractHighWaterMark(readableStrategy,0),readableSizeAlgorithm=ExtractSizeAlgorithm(readableStrategy),writableHighWaterMark=ExtractHighWaterMark(writableStrategy,1),writableSizeAlgorithm=ExtractSizeAlgorithm(writableStrategy),startPromise_resolve,startPromise=newPromise(function(resolve){startPromise_resolve=resolve});InitializeTransformStream(this,startPromise,writableHighWaterMark,writableSizeAlgorithm,readableHighWaterMark,readableSizeAlgorithm),SetUpTransformStreamDefaultControllerFromTransformer(this,transformer),transformer.start!==void 0?startPromise_resolve(transformer.start(this._transformStreamController)):startPromise_resolve(void 0)}return __name2(TransformStream2,"TransformStream2"),__name(TransformStream2,"TransformStream"),Object.defineProperty(TransformStream2.prototype,"readable",{get:function(){if(!IsTransformStream(this))throw streamBrandCheckException("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(TransformStream2.prototype,"writable",{get:function(){if(!IsTransformStream(this))throw streamBrandCheckException("writable");return this._writable},enumerable:!1,configurable:!0}),TransformStream2}();Object.defineProperties(TransformStream.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(TransformStream.prototype,SymbolPolyfill.toStringTag,{value:"TransformStream",configurable:!0});function InitializeTransformStream(stream,startPromise,writableHighWaterMark,writableSizeAlgorithm,readableHighWaterMark,readableSizeAlgorithm){function startAlgorithm(){return startPromise}__name2(startAlgorithm,"startAlgorithm"),__name(startAlgorithm,"startAlgorithm");function writeAlgorithm(chunk){return TransformStreamDefaultSinkWriteAlgorithm(stream,chunk)}__name2(writeAlgorithm,"writeAlgorithm"),__name(writeAlgorithm,"writeAlgorithm");function abortAlgorithm(reason){return TransformStreamDefaultSinkAbortAlgorithm(stream,reason)}__name2(abortAlgorithm,"abortAlgorithm"),__name(abortAlgorithm,"abortAlgorithm");function closeAlgorithm(){return TransformStreamDefaultSinkCloseAlgorithm(stream)}__name2(closeAlgorithm,"closeAlgorithm"),__name(closeAlgorithm,"closeAlgorithm"),stream._writable=CreateWritableStream(startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,writableHighWaterMark,writableSizeAlgorithm);function pullAlgorithm(){return TransformStreamDefaultSourcePullAlgorithm(stream)}__name2(pullAlgorithm,"pullAlgorithm"),__name(pullAlgorithm,"pullAlgorithm");function cancelAlgorithm(reason){return TransformStreamErrorWritableAndUnblockWrite(stream,reason),promiseResolvedWith(void 0)}__name2(cancelAlgorithm,"cancelAlgorithm"),__name(cancelAlgorithm,"cancelAlgorithm"),stream._readable=CreateReadableStream(startAlgorithm,pullAlgorithm,cancelAlgorithm,readableHighWaterMark,readableSizeAlgorithm),stream._backpressure=void 0,stream._backpressureChangePromise=void 0,stream._backpressureChangePromise_resolve=void 0,TransformStreamSetBackpressure(stream,!0),stream._transformStreamController=void 0}__name2(InitializeTransformStream,"InitializeTransformStream"),__name(InitializeTransformStream,"InitializeTransformStream");function IsTransformStream(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_transformStreamController")?!1:x instanceof TransformStream}__name2(IsTransformStream,"IsTransformStream"),__name(IsTransformStream,"IsTransformStream");function TransformStreamError(stream,e){ReadableStreamDefaultControllerError(stream._readable._readableStreamController,e),TransformStreamErrorWritableAndUnblockWrite(stream,e)}__name2(TransformStreamError,"TransformStreamError"),__name(TransformStreamError,"TransformStreamError");function TransformStreamErrorWritableAndUnblockWrite(stream,e){TransformStreamDefaultControllerClearAlgorithms(stream._transformStreamController),WritableStreamDefaultControllerErrorIfNeeded(stream._writable._writableStreamController,e),stream._backpressure&&TransformStreamSetBackpressure(stream,!1)}__name2(TransformStreamErrorWritableAndUnblockWrite,"TransformStreamErrorWritableAndUnblockWrite"),__name(TransformStreamErrorWritableAndUnblockWrite,"TransformStreamErrorWritableAndUnblockWrite");function TransformStreamSetBackpressure(stream,backpressure){stream._backpressureChangePromise!==void 0&&stream._backpressureChangePromise_resolve(),stream._backpressureChangePromise=newPromise(function(resolve){stream._backpressureChangePromise_resolve=resolve}),stream._backpressure=backpressure}__name2(TransformStreamSetBackpressure,"TransformStreamSetBackpressure"),__name(TransformStreamSetBackpressure,"TransformStreamSetBackpressure");var TransformStreamDefaultController=function(){function TransformStreamDefaultController2(){throw new TypeError("Illegal constructor")}return __name2(TransformStreamDefaultController2,"TransformStreamDefaultController2"),__name(TransformStreamDefaultController2,"TransformStreamDefaultController"),Object.defineProperty(TransformStreamDefaultController2.prototype,"desiredSize",{get:function(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("desiredSize");var readableController=this._controlledTransformStream._readable._readableStreamController;return ReadableStreamDefaultControllerGetDesiredSize(readableController)},enumerable:!1,configurable:!0}),TransformStreamDefaultController2.prototype.enqueue=function(chunk){if(chunk===void 0&&(chunk=void 0),!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("enqueue");TransformStreamDefaultControllerEnqueue(this,chunk)},TransformStreamDefaultController2.prototype.error=function(reason){if(reason===void 0&&(reason=void 0),!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("error");TransformStreamDefaultControllerError(this,reason)},TransformStreamDefaultController2.prototype.terminate=function(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("terminate");TransformStreamDefaultControllerTerminate(this)},TransformStreamDefaultController2}();Object.defineProperties(TransformStreamDefaultController.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof SymbolPolyfill.toStringTag=="symbol"&&Object.defineProperty(TransformStreamDefaultController.prototype,SymbolPolyfill.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function IsTransformStreamDefaultController(x){return!typeIsObject(x)||!Object.prototype.hasOwnProperty.call(x,"_controlledTransformStream")?!1:x instanceof TransformStreamDefaultController}__name2(IsTransformStreamDefaultController,"IsTransformStreamDefaultController"),__name(IsTransformStreamDefaultController,"IsTransformStreamDefaultController");function SetUpTransformStreamDefaultController(stream,controller,transformAlgorithm,flushAlgorithm){controller._controlledTransformStream=stream,stream._transformStreamController=controller,controller._transformAlgorithm=transformAlgorithm,controller._flushAlgorithm=flushAlgorithm}__name2(SetUpTransformStreamDefaultController,"SetUpTransformStreamDefaultController"),__name(SetUpTransformStreamDefaultController,"SetUpTransformStreamDefaultController");function SetUpTransformStreamDefaultControllerFromTransformer(stream,transformer){var controller=Object.create(TransformStreamDefaultController.prototype),transformAlgorithm=__name(function(chunk){try{return TransformStreamDefaultControllerEnqueue(controller,chunk),promiseResolvedWith(void 0)}catch(transformResultE){return promiseRejectedWith(transformResultE)}},"transformAlgorithm"),flushAlgorithm=__name(function(){return promiseResolvedWith(void 0)},"flushAlgorithm");transformer.transform!==void 0&&(transformAlgorithm=__name(function(chunk){return transformer.transform(chunk,controller)},"transformAlgorithm")),transformer.flush!==void 0&&(flushAlgorithm=__name(function(){return transformer.flush(controller)},"flushAlgorithm")),SetUpTransformStreamDefaultController(stream,controller,transformAlgorithm,flushAlgorithm)}__name2(SetUpTransformStreamDefaultControllerFromTransformer,"SetUpTransformStreamDefaultControllerFromTransformer"),__name(SetUpTransformStreamDefaultControllerFromTransformer,"SetUpTransformStreamDefaultControllerFromTransformer");function TransformStreamDefaultControllerClearAlgorithms(controller){controller._transformAlgorithm=void 0,controller._flushAlgorithm=void 0}__name2(TransformStreamDefaultControllerClearAlgorithms,"TransformStreamDefaultControllerClearAlgorithms"),__name(TransformStreamDefaultControllerClearAlgorithms,"TransformStreamDefaultControllerClearAlgorithms");function TransformStreamDefaultControllerEnqueue(controller,chunk){var stream=controller._controlledTransformStream,readableController=stream._readable._readableStreamController;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(readableController))throw new TypeError("Readable side is not in a state that permits enqueue");try{ReadableStreamDefaultControllerEnqueue(readableController,chunk)}catch(e){throw TransformStreamErrorWritableAndUnblockWrite(stream,e),stream._readable._storedError}var backpressure=ReadableStreamDefaultControllerHasBackpressure(readableController);backpressure!==stream._backpressure&&TransformStreamSetBackpressure(stream,!0)}__name2(TransformStreamDefaultControllerEnqueue,"TransformStreamDefaultControllerEnqueue"),__name(TransformStreamDefaultControllerEnqueue,"TransformStreamDefaultControllerEnqueue");function TransformStreamDefaultControllerError(controller,e){TransformStreamError(controller._controlledTransformStream,e)}__name2(TransformStreamDefaultControllerError,"TransformStreamDefaultControllerError"),__name(TransformStreamDefaultControllerError,"TransformStreamDefaultControllerError");function TransformStreamDefaultControllerPerformTransform(controller,chunk){var transformPromise=controller._transformAlgorithm(chunk);return transformPromiseWith(transformPromise,void 0,function(r){throw TransformStreamError(controller._controlledTransformStream,r),r})}__name2(TransformStreamDefaultControllerPerformTransform,"TransformStreamDefaultControllerPerformTransform"),__name(TransformStreamDefaultControllerPerformTransform,"TransformStreamDefaultControllerPerformTransform");function TransformStreamDefaultControllerTerminate(controller){var stream=controller._controlledTransformStream,readableController=stream._readable._readableStreamController;ReadableStreamDefaultControllerClose(readableController);var error=new TypeError("TransformStream terminated");TransformStreamErrorWritableAndUnblockWrite(stream,error)}__name2(TransformStreamDefaultControllerTerminate,"TransformStreamDefaultControllerTerminate"),__name(TransformStreamDefaultControllerTerminate,"TransformStreamDefaultControllerTerminate");function TransformStreamDefaultSinkWriteAlgorithm(stream,chunk){var controller=stream._transformStreamController;if(stream._backpressure){var backpressureChangePromise=stream._backpressureChangePromise;return transformPromiseWith(backpressureChangePromise,function(){var writable=stream._writable,state=writable._state;if(state==="erroring")throw writable._storedError;return TransformStreamDefaultControllerPerformTransform(controller,chunk)})}return TransformStreamDefaultControllerPerformTransform(controller,chunk)}__name2(TransformStreamDefaultSinkWriteAlgorithm,"TransformStreamDefaultSinkWriteAlgorithm"),__name(TransformStreamDefaultSinkWriteAlgorithm,"TransformStreamDefaultSinkWriteAlgorithm");function TransformStreamDefaultSinkAbortAlgorithm(stream,reason){return TransformStreamError(stream,reason),promiseResolvedWith(void 0)}__name2(TransformStreamDefaultSinkAbortAlgorithm,"TransformStreamDefaultSinkAbortAlgorithm"),__name(TransformStreamDefaultSinkAbortAlgorithm,"TransformStreamDefaultSinkAbortAlgorithm");function TransformStreamDefaultSinkCloseAlgorithm(stream){var readable=stream._readable,controller=stream._transformStreamController,flushPromise=controller._flushAlgorithm();return TransformStreamDefaultControllerClearAlgorithms(controller),transformPromiseWith(flushPromise,function(){if(readable._state==="errored")throw readable._storedError;ReadableStreamDefaultControllerClose(readable._readableStreamController)},function(r){throw TransformStreamError(stream,r),readable._storedError})}__name2(TransformStreamDefaultSinkCloseAlgorithm,"TransformStreamDefaultSinkCloseAlgorithm"),__name(TransformStreamDefaultSinkCloseAlgorithm,"TransformStreamDefaultSinkCloseAlgorithm");function TransformStreamDefaultSourcePullAlgorithm(stream){return TransformStreamSetBackpressure(stream,!1),stream._backpressureChangePromise}__name2(TransformStreamDefaultSourcePullAlgorithm,"TransformStreamDefaultSourcePullAlgorithm"),__name(TransformStreamDefaultSourcePullAlgorithm,"TransformStreamDefaultSourcePullAlgorithm");function defaultControllerBrandCheckException(name){return new TypeError("TransformStreamDefaultController.prototype."+name+" can only be used on a TransformStreamDefaultController")}__name2(defaultControllerBrandCheckException,"defaultControllerBrandCheckException"),__name(defaultControllerBrandCheckException,"defaultControllerBrandCheckException");function streamBrandCheckException(name){return new TypeError("TransformStream.prototype."+name+" can only be used on a TransformStream")}__name2(streamBrandCheckException,"streamBrandCheckException"),__name(streamBrandCheckException,"streamBrandCheckException"),exports3.ByteLengthQueuingStrategy=ByteLengthQueuingStrategy,exports3.CountQueuingStrategy=CountQueuingStrategy,exports3.ReadableByteStreamController=ReadableByteStreamController,exports3.ReadableStream=ReadableStream2,exports3.ReadableStreamBYOBReader=ReadableStreamBYOBReader,exports3.ReadableStreamBYOBRequest=ReadableStreamBYOBRequest,exports3.ReadableStreamDefaultController=ReadableStreamDefaultController,exports3.ReadableStreamDefaultReader=ReadableStreamDefaultReader,exports3.TransformStream=TransformStream,exports3.TransformStreamDefaultController=TransformStreamDefaultController,exports3.WritableStream=WritableStream,exports3.WritableStreamDefaultController=WritableStreamDefaultController,exports3.WritableStreamDefaultWriter=WritableStreamDefaultWriter,Object.defineProperty(exports3,"__esModule",{value:!0})})}(ponyfill,ponyfill.exports)),ponyfill.exports}__name2(requirePonyfill,"requirePonyfill"),__name(requirePonyfill,"requirePonyfill");const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$7=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){__name(__name2(function(root,factory){module.exports=factory()},"webpackUniversalModuleDefinition"),"webpackUniversalModuleDefinition")(globalThis,()=>(()=>{var __webpack_modules__=[,(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.VerbosityLevel=exports2.Util=exports2.UnknownErrorException=exports2.UnexpectedResponseException=exports2.UNSUPPORTED_FEATURES=exports2.TextRenderingMode=exports2.StreamType=exports2.RenderingIntentFlag=exports2.PermissionFlag=exports2.PasswordResponses=exports2.PasswordException=exports2.PageActionEventType=exports2.OPS=exports2.MissingPDFException=exports2.LINE_FACTOR=exports2.LINE_DESCENT_FACTOR=exports2.InvalidPDFException=exports2.ImageKind=exports2.IDENTITY_MATRIX=exports2.FormatError=exports2.FontType=exports2.FeatureTest=exports2.FONT_IDENTITY_MATRIX=exports2.DocumentActionEventType=exports2.CMapCompressionType=exports2.BaseException=exports2.AnnotationType=exports2.AnnotationStateModelType=exports2.AnnotationReviewState=exports2.AnnotationReplyType=exports2.AnnotationMode=exports2.AnnotationMarkedState=exports2.AnnotationFlag=exports2.AnnotationFieldFlag=exports2.AnnotationEditorType=exports2.AnnotationEditorPrefix=exports2.AnnotationEditorParamsType=exports2.AnnotationBorderStyleType=exports2.AnnotationActionEventType=exports2.AbortException=void 0,exports2.arrayByteLength=arrayByteLength,exports2.arraysToBytes=arraysToBytes,exports2.assert=assert,exports2.bytesToString=bytesToString,exports2.createPromiseCapability=createPromiseCapability,exports2.createValidAbsoluteUrl=createValidAbsoluteUrl,exports2.escapeString=escapeString,exports2.getModificationDate=getModificationDate,exports2.getVerbosityLevel=getVerbosityLevel,exports2.info=info,exports2.isArrayBuffer=isArrayBuffer,exports2.isArrayEqual=isArrayEqual,exports2.isAscii=isAscii,exports2.objectFromMap=objectFromMap,exports2.objectSize=objectSize,exports2.setVerbosityLevel=setVerbosityLevel,exports2.shadow=shadow,exports2.string32=string32,exports2.stringToBytes=stringToBytes,exports2.stringToPDFString=stringToPDFString,exports2.stringToUTF16BEString=stringToUTF16BEString,exports2.stringToUTF8String=stringToUTF8String,exports2.unreachable=unreachable,exports2.utf8StringToString=utf8StringToString,exports2.warn=warn,__w_pdfjs_require__2(2);const IDENTITY_MATRIX=[1,0,0,1,0,0];exports2.IDENTITY_MATRIX=IDENTITY_MATRIX;const FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];exports2.FONT_IDENTITY_MATRIX=FONT_IDENTITY_MATRIX;const LINE_FACTOR=1.35;exports2.LINE_FACTOR=LINE_FACTOR;const LINE_DESCENT_FACTOR=.35;exports2.LINE_DESCENT_FACTOR=LINE_DESCENT_FACTOR;const RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};exports2.RenderingIntentFlag=RenderingIntentFlag;const AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};exports2.AnnotationMode=AnnotationMode;const AnnotationEditorPrefix="pdfjs_internal_editor_";exports2.AnnotationEditorPrefix=AnnotationEditorPrefix;const AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};exports2.AnnotationEditorType=AnnotationEditorType;const AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};exports2.AnnotationEditorParamsType=AnnotationEditorParamsType;const PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};exports2.PermissionFlag=PermissionFlag;const TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};exports2.TextRenderingMode=TextRenderingMode;const ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};exports2.ImageKind=ImageKind;const AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};exports2.AnnotationType=AnnotationType;const AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};exports2.AnnotationStateModelType=AnnotationStateModelType;const AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};exports2.AnnotationMarkedState=AnnotationMarkedState;const AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};exports2.AnnotationReviewState=AnnotationReviewState;const AnnotationReplyType={GROUP:"Group",REPLY:"R"};exports2.AnnotationReplyType=AnnotationReplyType;const AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};exports2.AnnotationFlag=AnnotationFlag;const AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};exports2.AnnotationFieldFlag=AnnotationFieldFlag;const AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};exports2.AnnotationBorderStyleType=AnnotationBorderStyleType;const AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};exports2.AnnotationActionEventType=AnnotationActionEventType;const DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};exports2.DocumentActionEventType=DocumentActionEventType;const PageActionEventType={O:"PageOpen",C:"PageClose"};exports2.PageActionEventType=PageActionEventType;const StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};exports2.StreamType=StreamType;const FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};exports2.FontType=FontType;const VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};exports2.VerbosityLevel=VerbosityLevel;const CMapCompressionType={NONE:0,BINARY:1,STREAM:2};exports2.CMapCompressionType=CMapCompressionType;const OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};exports2.OPS=OPS;const UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};exports2.UNSUPPORTED_FEATURES=UNSUPPORTED_FEATURES;const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};exports2.PasswordResponses=PasswordResponses;let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(level){Number.isInteger(level)&&(verbosity=level)}__name2(setVerbosityLevel,"setVerbosityLevel"),__name(setVerbosityLevel,"setVerbosityLevel");function getVerbosityLevel(){return verbosity}__name2(getVerbosityLevel,"getVerbosityLevel"),__name(getVerbosityLevel,"getVerbosityLevel");function info(msg){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${msg}`)}__name2(info,"info"),__name(info,"info");function warn(msg){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${msg}`)}__name2(warn,"warn"),__name(warn,"warn");function unreachable(msg){throw new Error(msg)}__name2(unreachable,"unreachable"),__name(unreachable,"unreachable");function assert(cond,msg){cond||unreachable(msg)}__name2(assert,"assert"),__name(assert,"assert");function _isValidProtocol(url){if(!url)return!1;switch(url.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}__name2(_isValidProtocol,"_isValidProtocol"),__name(_isValidProtocol,"_isValidProtocol");function createValidAbsoluteUrl(url){let baseUrl=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,options=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!url)return null;try{if(options&&typeof url=="string"){if(options.addDefaultProtocol&&url.startsWith("www.")){const dots=url.match(/\./g);dots&&dots.length>=2&&(url=`http://${url}`)}if(options.tryConvertEncoding)try{url=stringToUTF8String(url)}catch{}}const absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(_isValidProtocol(absoluteUrl))return absoluteUrl}catch{}return null}__name2(createValidAbsoluteUrl,"createValidAbsoluteUrl"),__name(createValidAbsoluteUrl,"createValidAbsoluteUrl");function shadow(obj,prop,value){return Object.defineProperty(obj,prop,{value,enumerable:!0,configurable:!0,writable:!1}),value}__name2(shadow,"shadow"),__name(shadow,"shadow");const BaseException=__name(__name2(function(){function BaseException2(message,name){this.constructor===BaseException2&&unreachable("Cannot initialize BaseException."),this.message=message,this.name=name}return __name2(BaseException2,"BaseException2"),__name(BaseException2,"BaseException"),BaseException2.prototype=new Error,BaseException2.constructor=BaseException2,BaseException2},"BaseExceptionClosure"),"BaseExceptionClosure")();exports2.BaseException=BaseException;const _PasswordException=class extends BaseException{static{__name2(this,"_PasswordException")}constructor(msg,code){super(msg,"PasswordException"),this.code=code}};__name(_PasswordException,"PasswordException");let PasswordException=_PasswordException;exports2.PasswordException=PasswordException;const _UnknownErrorException=class extends BaseException{static{__name2(this,"_UnknownErrorException")}constructor(msg,details){super(msg,"UnknownErrorException"),this.details=details}};__name(_UnknownErrorException,"UnknownErrorException");let UnknownErrorException=_UnknownErrorException;exports2.UnknownErrorException=UnknownErrorException;const _InvalidPDFException=class extends BaseException{static{__name2(this,"_InvalidPDFException")}constructor(msg){super(msg,"InvalidPDFException")}};__name(_InvalidPDFException,"InvalidPDFException");let InvalidPDFException=_InvalidPDFException;exports2.InvalidPDFException=InvalidPDFException;const _MissingPDFException=class extends BaseException{static{__name2(this,"_MissingPDFException")}constructor(msg){super(msg,"MissingPDFException")}};__name(_MissingPDFException,"MissingPDFException");let MissingPDFException=_MissingPDFException;exports2.MissingPDFException=MissingPDFException;const _UnexpectedResponseException=class extends BaseException{static{__name2(this,"_UnexpectedResponseException")}constructor(msg,status){super(msg,"UnexpectedResponseException"),this.status=status}};__name(_UnexpectedResponseException,"UnexpectedResponseException");let UnexpectedResponseException=_UnexpectedResponseException;exports2.UnexpectedResponseException=UnexpectedResponseException;const _FormatError=class extends BaseException{static{__name2(this,"_FormatError")}constructor(msg){super(msg,"FormatError")}};__name(_FormatError,"FormatError");let FormatError=_FormatError;exports2.FormatError=FormatError;const _AbortException=class extends BaseException{static{__name2(this,"_AbortException")}constructor(msg){super(msg,"AbortException")}};__name(_AbortException,"AbortException");let AbortException=_AbortException;exports2.AbortException=AbortException;function bytesToString(bytes){(typeof bytes!="object"||bytes===null||bytes.length===void 0)&&unreachable("Invalid argument for bytesToString");const length=bytes.length,MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT)return String.fromCharCode.apply(null,bytes);const strBuf=[];for(let i=0;i<length;i+=MAX_ARGUMENT_COUNT){const chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length),chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk))}return strBuf.join("")}__name2(bytesToString,"bytesToString"),__name(bytesToString,"bytesToString");function stringToBytes(str){typeof str!="string"&&unreachable("Invalid argument for stringToBytes");const length=str.length,bytes=new Uint8Array(length);for(let i=0;i<length;++i)bytes[i]=str.charCodeAt(i)&255;return bytes}__name2(stringToBytes,"stringToBytes"),__name(stringToBytes,"stringToBytes");function arrayByteLength(arr){if(arr.length!==void 0)return arr.length;if(arr.byteLength!==void 0)return arr.byteLength;unreachable("Invalid argument for arrayByteLength")}__name2(arrayByteLength,"arrayByteLength"),__name(arrayByteLength,"arrayByteLength");function arraysToBytes(arr){const length=arr.length;if(length===1&&arr[0]instanceof Uint8Array)return arr[0];let resultLength=0;for(let i=0;i<length;i++)resultLength+=arrayByteLength(arr[i]);let pos=0;const data=new Uint8Array(resultLength);for(let i=0;i<length;i++){let item=arr[i];item instanceof Uint8Array||(typeof item=="string"?item=stringToBytes(item):item=new Uint8Array(item));const itemLength=item.byteLength;data.set(item,pos),pos+=itemLength}return data}__name2(arraysToBytes,"arraysToBytes"),__name(arraysToBytes,"arraysToBytes");function string32(value){return String.fromCharCode(value>>24&255,value>>16&255,value>>8&255,value&255)}__name2(string32,"string32"),__name(string32,"string32");function objectSize(obj){return Object.keys(obj).length}__name2(objectSize,"objectSize"),__name(objectSize,"objectSize");function objectFromMap(map){const obj=Object.create(null);for(const[key,value]of map)obj[key]=value;return obj}__name2(objectFromMap,"objectFromMap"),__name(objectFromMap,"objectFromMap");function isLittleEndian(){const buffer8=new Uint8Array(4);return buffer8[0]=1,new Uint32Array(buffer8.buffer,0,1)[0]===1}__name2(isLittleEndian,"isLittleEndian"),__name(isLittleEndian,"isLittleEndian");function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}__name2(isEvalSupported,"isEvalSupported"),__name(isEvalSupported,"isEvalSupported");const _FeatureTest=class{static{__name2(this,"_FeatureTest")}static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};__name(_FeatureTest,"FeatureTest");let FeatureTest=_FeatureTest;exports2.FeatureTest=FeatureTest;const hexNumbers=[...Array(256).keys()].map(n=>n.toString(16).padStart(2,"0")),_Util=class _Util2{static{__name2(this,"_Util")}static makeHexColor(r,g,b){return`#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`}static scaleMinMax(transform,minMax){let temp;transform[0]?(transform[0]<0&&(temp=minMax[0],minMax[0]=minMax[1],minMax[1]=temp),minMax[0]*=transform[0],minMax[1]*=transform[0],transform[3]<0&&(temp=minMax[2],minMax[2]=minMax[3],minMax[3]=temp),minMax[2]*=transform[3],minMax[3]*=transform[3]):(temp=minMax[0],minMax[0]=minMax[2],minMax[2]=temp,temp=minMax[1],minMax[1]=minMax[3],minMax[3]=temp,transform[1]<0&&(temp=minMax[2],minMax[2]=minMax[3],minMax[3]=temp),minMax[2]*=transform[1],minMax[3]*=transform[1],transform[2]<0&&(temp=minMax[0],minMax[0]=minMax[1],minMax[1]=temp),minMax[0]*=transform[2],minMax[1]*=transform[2]),minMax[0]+=transform[4],minMax[1]+=transform[4],minMax[2]+=transform[5],minMax[3]+=transform[5]}static transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]]}static applyTransform(p,m){const xt=p[0]*m[0]+p[1]*m[2]+m[4],yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt]}static applyInverseTransform(p,m){const d=m[0]*m[3]-m[1]*m[2],xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d,yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt]}static getAxialAlignedBoundingBox(r,m){const p1=_Util2.applyTransform(r,m),p2=_Util2.applyTransform(r.slice(2,4),m),p3=_Util2.applyTransform([r[0],r[3]],m),p4=_Util2.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])]}static inverseTransform(m){const d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d]}static apply3dTransform(m,v){return[m[0]*v[0]+m[1]*v[1]+m[2]*v[2],m[3]*v[0]+m[4]*v[1]+m[5]*v[2],m[6]*v[0]+m[7]*v[1]+m[8]*v[2]]}static singularValueDecompose2dScale(m){const transpose=[m[0],m[2],m[1],m[3]],a=m[0]*transpose[0]+m[1]*transpose[2],b=m[0]*transpose[1]+m[1]*transpose[3],c=m[2]*transpose[0]+m[3]*transpose[2],d=m[2]*transpose[1]+m[3]*transpose[3],first=(a+d)/2,second=Math.sqrt((a+d)**2-4*(a*d-c*b))/2,sx=first+second||1,sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)]}static normalizeRect(rect){const r=rect.slice(0);return rect[0]>rect[2]&&(r[0]=rect[2],r[2]=rect[0]),rect[1]>rect[3]&&(r[1]=rect[3],r[3]=rect[1]),r}static intersect(rect1,rect2){const xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2])),xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh)return null;const yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3])),yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));return yLow>yHigh?null:[xLow,yLow,xHigh,yHigh]}static bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3){const tvalues=[],bounds=[[],[]];let a,b,c,t,t1,t2,b2ac,sqrtb2ac;for(let i=0;i<2;++i){if(i===0?(b=6*x0-12*x1+6*x2,a=-3*x0+9*x1-9*x2+3*x3,c=3*x1-3*x0):(b=6*y0-12*y1+6*y2,a=-3*y0+9*y1-9*y2+3*y3,c=3*y1-3*y0),Math.abs(a)<1e-12){if(Math.abs(b)<1e-12)continue;t=-c/b,0<t&&t<1&&tvalues.push(t);continue}b2ac=b*b-4*c*a,sqrtb2ac=Math.sqrt(b2ac),!(b2ac<0)&&(t1=(-b+sqrtb2ac)/(2*a),0<t1&&t1<1&&tvalues.push(t1),t2=(-b-sqrtb2ac)/(2*a),0<t2&&t2<1&&tvalues.push(t2))}let j=tvalues.length,mt;const jlen=j;for(;j--;)t=tvalues[j],mt=1-t,bounds[0][j]=mt*mt*mt*x0+3*mt*mt*t*x1+3*mt*t*t*x2+t*t*t*x3,bounds[1][j]=mt*mt*mt*y0+3*mt*mt*t*y1+3*mt*t*t*y2+t*t*t*y3;return bounds[0][jlen]=x0,bounds[1][jlen]=y0,bounds[0][jlen+1]=x3,bounds[1][jlen+1]=y3,bounds[0].length=bounds[1].length=jlen+2,[Math.min(...bounds[0]),Math.min(...bounds[1]),Math.max(...bounds[0]),Math.max(...bounds[1])]}};__name(_Util,"Util");let Util=_Util;exports2.Util=Util;const PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToPDFString(str){if(str[0]>="\xEF"){let encoding;if(str[0]==="\xFE"&&str[1]==="\xFF"?encoding="utf-16be":str[0]==="\xFF"&&str[1]==="\xFE"?encoding="utf-16le":str[0]==="\xEF"&&str[1]==="\xBB"&&str[2]==="\xBF"&&(encoding="utf-8"),encoding)try{const decoder=new TextDecoder(encoding,{fatal:!0}),buffer=stringToBytes(str);return decoder.decode(buffer)}catch(ex){warn(`stringToPDFString: "${ex}".`)}}const strBuf=[];for(let i=0,ii=str.length;i<ii;i++){const code=PDFStringTranslateTable[str.charCodeAt(i)];strBuf.push(code?String.fromCharCode(code):str.charAt(i))}return strBuf.join("")}__name2(stringToPDFString,"stringToPDFString"),__name(stringToPDFString,"stringToPDFString");function escapeString(str){return str.replace(/([()\\\n\r])/g,match=>match===`
`?"\\n":match==="\r"?"\\r":`\\${match}`)}__name2(escapeString,"escapeString"),__name(escapeString,"escapeString");function isAscii(str){return/^[\x00-\x7F]*$/.test(str)}__name2(isAscii,"isAscii"),__name(isAscii,"isAscii");function stringToUTF16BEString(str){const buf=["\xFE\xFF"];for(let i=0,ii=str.length;i<ii;i++){const char=str.charCodeAt(i);buf.push(String.fromCharCode(char>>8&255),String.fromCharCode(char&255))}return buf.join("")}__name2(stringToUTF16BEString,"stringToUTF16BEString"),__name(stringToUTF16BEString,"stringToUTF16BEString");function stringToUTF8String(str){return decodeURIComponent(escape(str))}__name2(stringToUTF8String,"stringToUTF8String"),__name(stringToUTF8String,"stringToUTF8String");function utf8StringToString(str){return unescape(encodeURIComponent(str))}__name2(utf8StringToString,"utf8StringToString"),__name(utf8StringToString,"utf8StringToString");function isArrayBuffer(v){return typeof v=="object"&&v!==null&&v.byteLength!==void 0}__name2(isArrayBuffer,"isArrayBuffer"),__name(isArrayBuffer,"isArrayBuffer");function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length)return!1;for(let i=0,ii=arr1.length;i<ii;i++)if(arr1[i]!==arr2[i])return!1;return!0}__name2(isArrayEqual,"isArrayEqual"),__name(isArrayEqual,"isArrayEqual");function getModificationDate(){let date=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,"0"),date.getUTCDate().toString().padStart(2,"0"),date.getUTCHours().toString().padStart(2,"0"),date.getUTCMinutes().toString().padStart(2,"0"),date.getUTCSeconds().toString().padStart(2,"0")].join("")}__name2(getModificationDate,"getModificationDate"),__name(getModificationDate,"getModificationDate");function createPromiseCapability(){const capability=Object.create(null);let isSettled=!1;return Object.defineProperty(capability,"settled",{get(){return isSettled}}),capability.promise=new Promise(function(resolve,reject){capability.resolve=function(data){isSettled=!0,resolve(data)},capability.reject=function(reason){isSettled=!0,reject(reason)}}),capability}__name2(createPromiseCapability,"createPromiseCapability"),__name(createPromiseCapability,"createPromiseCapability")},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var _is_node2=__w_pdfjs_require__2(3);globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,__name(__name2(function(){globalThis.btoa||!_is_node2.isNodeJS||(globalThis.btoa=function(chars){return Buffer.from(chars,"binary").toString("base64")})},"checkNodeBtoa"),"checkNodeBtoa")(),__name(__name2(function(){globalThis.atob||!_is_node2.isNodeJS||(globalThis.atob=function(input){return Buffer.from(input,"base64").toString("binary")})},"checkNodeAtob"),"checkNodeAtob")(),__name(__name2(function(){globalThis.DOMMatrix||!_is_node2.isNodeJS||(globalThis.DOMMatrix=requireDommatrix())},"checkDOMMatrix"),"checkDOMMatrix")(),__name(__name2(function(){globalThis.ReadableStream||!_is_node2.isNodeJS||(globalThis.ReadableStream=requirePonyfill().ReadableStream)},"checkReadableStream"),"checkReadableStream")(),__name(__name2(function(){Array.prototype.at||__w_pdfjs_require__2(4)},"checkArrayAt"),"checkArrayAt")(),__name(__name2(function(){Uint8Array.prototype.at||__w_pdfjs_require__2(76)},"checkTypedArrayAt"),"checkTypedArrayAt")(),__name(__name2(function(){globalThis.structuredClone||__w_pdfjs_require__2(86)},"checkStructuredClone"),"checkStructuredClone")())},(__unused_webpack_module2,exports2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.isNodeJS=void 0;const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");exports2.isNodeJS=isNodeJS},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{__w_pdfjs_require__2(5);var entryUnbind=__w_pdfjs_require__2(75);module2.exports=entryUnbind("Array","at")},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var $=__w_pdfjs_require__2(6),toObject=__w_pdfjs_require__2(41),lengthOfArrayLike=__w_pdfjs_require__2(65),toIntegerOrInfinity=__w_pdfjs_require__2(63),addToUnscopables=__w_pdfjs_require__2(70);$({target:"Array",proto:!0},{at:__name(__name2(function(index){var O=toObject(this),len=lengthOfArrayLike(O),relativeIndex=toIntegerOrInfinity(index),k=relativeIndex>=0?relativeIndex:len+relativeIndex;return k<0||k>=len?void 0:O[k]},"at"),"at")}),addToUnscopables("at")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),getOwnPropertyDescriptor=__w_pdfjs_require__2(8).f,createNonEnumerableProperty=__w_pdfjs_require__2(45),defineBuiltIn=__w_pdfjs_require__2(49),defineGlobalProperty=__w_pdfjs_require__2(39),copyConstructorProperties=__w_pdfjs_require__2(57),isForced=__w_pdfjs_require__2(69);module2.exports=function(options,source){var TARGET=options.target,GLOBAL=options.global,STATIC=options.stat,FORCED,target,key,targetProperty,sourceProperty,descriptor;if(GLOBAL?target=global2:STATIC?target=global2[TARGET]||defineGlobalProperty(TARGET,{}):target=(global2[TARGET]||{}).prototype,target)for(key in source){if(sourceProperty=source[key],options.dontCallGetSet?(descriptor=getOwnPropertyDescriptor(target,key),targetProperty=descriptor&&descriptor.value):targetProperty=target[key],FORCED=isForced(GLOBAL?key:TARGET+(STATIC?".":"#")+key,options.forced),!FORCED&&targetProperty!==void 0){if(typeof sourceProperty==typeof targetProperty)continue;copyConstructorProperties(sourceProperty,targetProperty)}(options.sham||targetProperty&&targetProperty.sham)&&createNonEnumerableProperty(sourceProperty,"sham",!0),defineBuiltIn(target,key,sourceProperty,options)}}},module2=>{var check=__name(function(it){return it&&it.Math==Math&&it},"check");module2.exports=check(typeof globalThis=="object"&&globalThis)||check(typeof window=="object"&&window)||check(typeof self=="object"&&self)||check(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||Function("return this")()},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),call=__w_pdfjs_require__2(11),propertyIsEnumerableModule=__w_pdfjs_require__2(13),createPropertyDescriptor=__w_pdfjs_require__2(14),toIndexedObject=__w_pdfjs_require__2(15),toPropertyKey=__w_pdfjs_require__2(20),hasOwn=__w_pdfjs_require__2(40),IE8_DOM_DEFINE=__w_pdfjs_require__2(43),$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;exports2.f=DESCRIPTORS?$getOwnPropertyDescriptor:__name(__name2(function(O,P){if(O=toIndexedObject(O),P=toPropertyKey(P),IE8_DOM_DEFINE)try{return $getOwnPropertyDescriptor(O,P)}catch{}if(hasOwn(O,P))return createPropertyDescriptor(!call(propertyIsEnumerableModule.f,O,P),O[P])},"getOwnPropertyDescriptor"),"getOwnPropertyDescriptor")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10);module2.exports=!fails(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},module2=>{module2.exports=function(exec){try{return!!exec()}catch{return!0}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var NATIVE_BIND=__w_pdfjs_require__2(12),call=Function.prototype.call;module2.exports=NATIVE_BIND?call.bind(call):function(){return call.apply(call,arguments)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10);module2.exports=!fails(function(){var test=function(){}.bind();return typeof test!="function"||test.hasOwnProperty("prototype")})},(__unused_webpack_module2,exports2)=>{var $propertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!$propertyIsEnumerable.call({1:2},1);exports2.f=NASHORN_BUG?__name(__name2(function(V){var descriptor=getOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable},"propertyIsEnumerable"),"propertyIsEnumerable"):$propertyIsEnumerable},module2=>{module2.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var IndexedObject=__w_pdfjs_require__2(16),requireObjectCoercible=__w_pdfjs_require__2(19);module2.exports=function(it){return IndexedObject(requireObjectCoercible(it))}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),fails=__w_pdfjs_require__2(10),classof=__w_pdfjs_require__2(18),$Object=Object,split=uncurryThis("".split);module2.exports=fails(function(){return!$Object("z").propertyIsEnumerable(0)})?function(it){return classof(it)=="String"?split(it,""):$Object(it)}:$Object},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var NATIVE_BIND=__w_pdfjs_require__2(12),FunctionPrototype=Function.prototype,bind=FunctionPrototype.bind,call=FunctionPrototype.call,uncurryThis=NATIVE_BIND&&bind.bind(call,call);module2.exports=NATIVE_BIND?function(fn){return fn&&uncurryThis(fn)}:function(fn){return fn&&function(){return call.apply(fn,arguments)}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),toString=uncurryThis({}.toString),stringSlice=uncurryThis("".slice);module2.exports=function(it){return stringSlice(toString(it),8,-1)}},module2=>{var $TypeError=TypeError;module2.exports=function(it){if(it==null)throw $TypeError("Can't call method on "+it);return it}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toPrimitive=__w_pdfjs_require__2(21),isSymbol=__w_pdfjs_require__2(24);module2.exports=function(argument){var key=toPrimitive(argument,"string");return isSymbol(key)?key:key+""}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var call=__w_pdfjs_require__2(11),isObject=__w_pdfjs_require__2(22),isSymbol=__w_pdfjs_require__2(24),getMethod=__w_pdfjs_require__2(31),ordinaryToPrimitive=__w_pdfjs_require__2(34),wellKnownSymbol=__w_pdfjs_require__2(35),$TypeError=TypeError,TO_PRIMITIVE=wellKnownSymbol("toPrimitive");module2.exports=function(input,pref){if(!isObject(input)||isSymbol(input))return input;var exoticToPrim=getMethod(input,TO_PRIMITIVE),result;if(exoticToPrim){if(pref===void 0&&(pref="default"),result=call(exoticToPrim,input,pref),!isObject(result)||isSymbol(result))return result;throw $TypeError("Can't convert object to primitive value")}return pref===void 0&&(pref="number"),ordinaryToPrimitive(input,pref)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isCallable=__w_pdfjs_require__2(23);module2.exports=function(it){return typeof it=="object"?it!==null:isCallable(it)}},module2=>{module2.exports=function(argument){return typeof argument=="function"}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var getBuiltIn=__w_pdfjs_require__2(25),isCallable=__w_pdfjs_require__2(23),isPrototypeOf=__w_pdfjs_require__2(26),USE_SYMBOL_AS_UID=__w_pdfjs_require__2(27),$Object=Object;module2.exports=USE_SYMBOL_AS_UID?function(it){return typeof it=="symbol"}:function(it){var $Symbol=getBuiltIn("Symbol");return isCallable($Symbol)&&isPrototypeOf($Symbol.prototype,$Object(it))}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),isCallable=__w_pdfjs_require__2(23),aFunction=__name(function(argument){return isCallable(argument)?argument:void 0},"aFunction");module2.exports=function(namespace,method){return arguments.length<2?aFunction(global2[namespace]):global2[namespace]&&global2[namespace][method]}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17);module2.exports=uncurryThis({}.isPrototypeOf)},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var NATIVE_SYMBOL=__w_pdfjs_require__2(28);module2.exports=NATIVE_SYMBOL&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var V8_VERSION=__w_pdfjs_require__2(29),fails=__w_pdfjs_require__2(10);module2.exports=!!Object.getOwnPropertySymbols&&!fails(function(){var symbol=Symbol();return!String(symbol)||!(Object(symbol)instanceof Symbol)||!Symbol.sham&&V8_VERSION&&V8_VERSION<41})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),userAgent=__w_pdfjs_require__2(30),process2=global2.process,Deno2=global2.Deno,versions=process2&&process2.versions||Deno2&&Deno2.version,v8=versions&&versions.v8,match,version2;v8&&(match=v8.split("."),version2=match[0]>0&&match[0]<4?1:+(match[0]+match[1])),!version2&&userAgent&&(match=userAgent.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=userAgent.match(/Chrome\/(\d+)/),match&&(version2=+match[1]))),module2.exports=version2},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var getBuiltIn=__w_pdfjs_require__2(25);module2.exports=getBuiltIn("navigator","userAgent")||""},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var aCallable=__w_pdfjs_require__2(32);module2.exports=function(V,P){var func=V[P];return func==null?void 0:aCallable(func)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isCallable=__w_pdfjs_require__2(23),tryToString=__w_pdfjs_require__2(33),$TypeError=TypeError;module2.exports=function(argument){if(isCallable(argument))return argument;throw $TypeError(tryToString(argument)+" is not a function")}},module2=>{var $String=String;module2.exports=function(argument){try{return $String(argument)}catch{return"Object"}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var call=__w_pdfjs_require__2(11),isCallable=__w_pdfjs_require__2(23),isObject=__w_pdfjs_require__2(22),$TypeError=TypeError;module2.exports=function(input,pref){var fn,val;if(pref==="string"&&isCallable(fn=input.toString)&&!isObject(val=call(fn,input))||isCallable(fn=input.valueOf)&&!isObject(val=call(fn,input))||pref!=="string"&&isCallable(fn=input.toString)&&!isObject(val=call(fn,input)))return val;throw $TypeError("Can't convert object to primitive value")}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),shared=__w_pdfjs_require__2(36),hasOwn=__w_pdfjs_require__2(40),uid=__w_pdfjs_require__2(42),NATIVE_SYMBOL=__w_pdfjs_require__2(28),USE_SYMBOL_AS_UID=__w_pdfjs_require__2(27),WellKnownSymbolsStore=shared("wks"),Symbol2=global2.Symbol,symbolFor=Symbol2&&Symbol2.for,createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol2:Symbol2&&Symbol2.withoutSetter||uid;module2.exports=function(name){if(!hasOwn(WellKnownSymbolsStore,name)||!(NATIVE_SYMBOL||typeof WellKnownSymbolsStore[name]=="string")){var description="Symbol."+name;NATIVE_SYMBOL&&hasOwn(Symbol2,name)?WellKnownSymbolsStore[name]=Symbol2[name]:USE_SYMBOL_AS_UID&&symbolFor?WellKnownSymbolsStore[name]=symbolFor(description):WellKnownSymbolsStore[name]=createWellKnownSymbol(description)}return WellKnownSymbolsStore[name]}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var IS_PURE=__w_pdfjs_require__2(37),store=__w_pdfjs_require__2(38);(module2.exports=function(key,value){return store[key]||(store[key]=value!==void 0?value:{})})("versions",[]).push({version:"3.24.1",mode:IS_PURE?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})},module2=>{module2.exports=!1},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),defineGlobalProperty=__w_pdfjs_require__2(39),SHARED="__core-js_shared__",store=global2[SHARED]||defineGlobalProperty(SHARED,{});module2.exports=store},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),defineProperty=Object.defineProperty;module2.exports=function(key,value){try{defineProperty(global2,key,{value,configurable:!0,writable:!0})}catch{global2[key]=value}return value}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),toObject=__w_pdfjs_require__2(41),hasOwnProperty=uncurryThis({}.hasOwnProperty);module2.exports=Object.hasOwn||__name(__name2(function(it,key){return hasOwnProperty(toObject(it),key)},"hasOwn"),"hasOwn")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var requireObjectCoercible=__w_pdfjs_require__2(19),$Object=Object;module2.exports=function(argument){return $Object(requireObjectCoercible(argument))}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),id=0,postfix=Math.random(),toString=uncurryThis(1 .toString);module2.exports=function(key){return"Symbol("+(key===void 0?"":key)+")_"+toString(++id+postfix,36)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),fails=__w_pdfjs_require__2(10),createElement=__w_pdfjs_require__2(44);module2.exports=!DESCRIPTORS&&!fails(function(){return Object.defineProperty(createElement("div"),"a",{get:function(){return 7}}).a!=7})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),isObject=__w_pdfjs_require__2(22),document2=global2.document,EXISTS=isObject(document2)&&isObject(document2.createElement);module2.exports=function(it){return EXISTS?document2.createElement(it):{}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),definePropertyModule=__w_pdfjs_require__2(46),createPropertyDescriptor=__w_pdfjs_require__2(14);module2.exports=DESCRIPTORS?function(object,key,value){return definePropertyModule.f(object,key,createPropertyDescriptor(1,value))}:function(object,key,value){return object[key]=value,object}},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),IE8_DOM_DEFINE=__w_pdfjs_require__2(43),V8_PROTOTYPE_DEFINE_BUG=__w_pdfjs_require__2(47),anObject=__w_pdfjs_require__2(48),toPropertyKey=__w_pdfjs_require__2(20),$TypeError=TypeError,$defineProperty=Object.defineProperty,$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE="configurable",WRITABLE="writable";exports2.f=DESCRIPTORS?V8_PROTOTYPE_DEFINE_BUG?__name(__name2(function(O,P,Attributes){if(anObject(O),P=toPropertyKey(P),anObject(Attributes),typeof O=="function"&&P==="prototype"&&"value"in Attributes&&WRITABLE in Attributes&&!Attributes[WRITABLE]){var current=$getOwnPropertyDescriptor(O,P);current&&current[WRITABLE]&&(O[P]=Attributes.value,Attributes={configurable:CONFIGURABLE in Attributes?Attributes[CONFIGURABLE]:current[CONFIGURABLE],enumerable:ENUMERABLE in Attributes?Attributes[ENUMERABLE]:current[ENUMERABLE],writable:!1})}return $defineProperty(O,P,Attributes)},"defineProperty"),"defineProperty"):$defineProperty:__name(__name2(function(O,P,Attributes){if(anObject(O),P=toPropertyKey(P),anObject(Attributes),IE8_DOM_DEFINE)try{return $defineProperty(O,P,Attributes)}catch{}if("get"in Attributes||"set"in Attributes)throw $TypeError("Accessors not supported");return"value"in Attributes&&(O[P]=Attributes.value),O},"defineProperty"),"defineProperty")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),fails=__w_pdfjs_require__2(10);module2.exports=DESCRIPTORS&&fails(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isObject=__w_pdfjs_require__2(22),$String=String,$TypeError=TypeError;module2.exports=function(argument){if(isObject(argument))return argument;throw $TypeError($String(argument)+" is not an object")}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isCallable=__w_pdfjs_require__2(23),definePropertyModule=__w_pdfjs_require__2(46),makeBuiltIn=__w_pdfjs_require__2(50),defineGlobalProperty=__w_pdfjs_require__2(39);module2.exports=function(O,key,value,options){options||(options={});var simple=options.enumerable,name=options.name!==void 0?options.name:key;if(isCallable(value)&&makeBuiltIn(value,name,options),options.global)simple?O[key]=value:defineGlobalProperty(key,value);else{try{options.unsafe?O[key]&&(simple=!0):delete O[key]}catch{}simple?O[key]=value:definePropertyModule.f(O,key,{value,enumerable:!1,configurable:!options.nonConfigurable,writable:!options.nonWritable})}return O}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10),isCallable=__w_pdfjs_require__2(23),hasOwn=__w_pdfjs_require__2(40),DESCRIPTORS=__w_pdfjs_require__2(9),CONFIGURABLE_FUNCTION_NAME=__w_pdfjs_require__2(51).CONFIGURABLE,inspectSource=__w_pdfjs_require__2(52),InternalStateModule=__w_pdfjs_require__2(53),enforceInternalState=InternalStateModule.enforce,getInternalState=InternalStateModule.get,defineProperty=Object.defineProperty,CONFIGURABLE_LENGTH=DESCRIPTORS&&!fails(function(){return defineProperty(function(){},"length",{value:8}).length!==8}),TEMPLATE=String(String).split("String"),makeBuiltIn=module2.exports=function(value,name,options){String(name).slice(0,7)==="Symbol("&&(name="["+String(name).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),options&&options.getter&&(name="get "+name),options&&options.setter&&(name="set "+name),(!hasOwn(value,"name")||CONFIGURABLE_FUNCTION_NAME&&value.name!==name)&&(DESCRIPTORS?defineProperty(value,"name",{value:name,configurable:!0}):value.name=name),CONFIGURABLE_LENGTH&&options&&hasOwn(options,"arity")&&value.length!==options.arity&&defineProperty(value,"length",{value:options.arity});try{options&&hasOwn(options,"constructor")&&options.constructor?DESCRIPTORS&&defineProperty(value,"prototype",{writable:!1}):value.prototype&&(value.prototype=void 0)}catch{}var state=enforceInternalState(value);return hasOwn(state,"source")||(state.source=TEMPLATE.join(typeof name=="string"?name:"")),value};Function.prototype.toString=makeBuiltIn(__name(__name2(function(){return isCallable(this)&&getInternalState(this).source||inspectSource(this)},"toString"),"toString"),"toString")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),hasOwn=__w_pdfjs_require__2(40),FunctionPrototype=Function.prototype,getDescriptor=DESCRIPTORS&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn(FunctionPrototype,"name"),PROPER=EXISTS&&__name(__name2(function(){},"something"),"something").name==="something",CONFIGURABLE=EXISTS&&(!DESCRIPTORS||DESCRIPTORS&&getDescriptor(FunctionPrototype,"name").configurable);module2.exports={EXISTS,PROPER,CONFIGURABLE}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),isCallable=__w_pdfjs_require__2(23),store=__w_pdfjs_require__2(38),functionToString=uncurryThis(Function.toString);isCallable(store.inspectSource)||(store.inspectSource=function(it){return functionToString(it)}),module2.exports=store.inspectSource},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var NATIVE_WEAK_MAP=__w_pdfjs_require__2(54),global2=__w_pdfjs_require__2(7),uncurryThis=__w_pdfjs_require__2(17),isObject=__w_pdfjs_require__2(22),createNonEnumerableProperty=__w_pdfjs_require__2(45),hasOwn=__w_pdfjs_require__2(40),shared=__w_pdfjs_require__2(38),sharedKey=__w_pdfjs_require__2(55),hiddenKeys=__w_pdfjs_require__2(56),OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError2=global2.TypeError,WeakMap2=global2.WeakMap,set,get,has,enforce=__name(function(it){return has(it)?get(it):set(it,{})},"enforce"),getterFor=__name(function(TYPE){return function(it){var state;if(!isObject(it)||(state=get(it)).type!==TYPE)throw TypeError2("Incompatible receiver, "+TYPE+" required");return state}},"getterFor");if(NATIVE_WEAK_MAP||shared.state){var store=shared.state||(shared.state=new WeakMap2),wmget=uncurryThis(store.get),wmhas=uncurryThis(store.has),wmset=uncurryThis(store.set);set=__name(function(it,metadata){if(wmhas(store,it))throw new TypeError2(OBJECT_ALREADY_INITIALIZED);return metadata.facade=it,wmset(store,it,metadata),metadata},"set"),get=__name(function(it){return wmget(store,it)||{}},"get"),has=__name(function(it){return wmhas(store,it)},"has")}else{var STATE=sharedKey("state");hiddenKeys[STATE]=!0,set=__name(function(it,metadata){if(hasOwn(it,STATE))throw new TypeError2(OBJECT_ALREADY_INITIALIZED);return metadata.facade=it,createNonEnumerableProperty(it,STATE,metadata),metadata},"set"),get=__name(function(it){return hasOwn(it,STATE)?it[STATE]:{}},"get"),has=__name(function(it){return hasOwn(it,STATE)},"has")}module2.exports={set,get,has,enforce,getterFor}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),isCallable=__w_pdfjs_require__2(23),inspectSource=__w_pdfjs_require__2(52),WeakMap2=global2.WeakMap;module2.exports=isCallable(WeakMap2)&&/native code/.test(inspectSource(WeakMap2))},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var shared=__w_pdfjs_require__2(36),uid=__w_pdfjs_require__2(42),keys=shared("keys");module2.exports=function(key){return keys[key]||(keys[key]=uid(key))}},module2=>{module2.exports={}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var hasOwn=__w_pdfjs_require__2(40),ownKeys=__w_pdfjs_require__2(58),getOwnPropertyDescriptorModule=__w_pdfjs_require__2(8),definePropertyModule=__w_pdfjs_require__2(46);module2.exports=function(target,source,exceptions){for(var keys=ownKeys(source),defineProperty=definePropertyModule.f,getOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,i=0;i<keys.length;i++){var key=keys[i];!hasOwn(target,key)&&!(exceptions&&hasOwn(exceptions,key))&&defineProperty(target,key,getOwnPropertyDescriptor(source,key))}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var getBuiltIn=__w_pdfjs_require__2(25),uncurryThis=__w_pdfjs_require__2(17),getOwnPropertyNamesModule=__w_pdfjs_require__2(59),getOwnPropertySymbolsModule=__w_pdfjs_require__2(68),anObject=__w_pdfjs_require__2(48),concat=uncurryThis([].concat);module2.exports=getBuiltIn("Reflect","ownKeys")||__name(__name2(function(it){var keys=getOwnPropertyNamesModule.f(anObject(it)),getOwnPropertySymbols=getOwnPropertySymbolsModule.f;return getOwnPropertySymbols?concat(keys,getOwnPropertySymbols(it)):keys},"ownKeys"),"ownKeys")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var internalObjectKeys=__w_pdfjs_require__2(60),enumBugKeys=__w_pdfjs_require__2(67),hiddenKeys=enumBugKeys.concat("length","prototype");exports2.f=Object.getOwnPropertyNames||__name(__name2(function(O){return internalObjectKeys(O,hiddenKeys)},"getOwnPropertyNames"),"getOwnPropertyNames")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),hasOwn=__w_pdfjs_require__2(40),toIndexedObject=__w_pdfjs_require__2(15),indexOf=__w_pdfjs_require__2(61).indexOf,hiddenKeys=__w_pdfjs_require__2(56),push=uncurryThis([].push);module2.exports=function(object,names){var O=toIndexedObject(object),i=0,result=[],key;for(key in O)!hasOwn(hiddenKeys,key)&&hasOwn(O,key)&&push(result,key);for(;names.length>i;)hasOwn(O,key=names[i++])&&(~indexOf(result,key)||push(result,key));return result}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toIndexedObject=__w_pdfjs_require__2(15),toAbsoluteIndex=__w_pdfjs_require__2(62),lengthOfArrayLike=__w_pdfjs_require__2(65),createMethod=__name(function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIndexedObject($this),length=lengthOfArrayLike(O),index=toAbsoluteIndex(fromIndex,length),value;if(IS_INCLUDES&&el!=el){for(;length>index;)if(value=O[index++],value!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}},"createMethod");module2.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toIntegerOrInfinity=__w_pdfjs_require__2(63),max=Math.max,min=Math.min;module2.exports=function(index,length){var integer=toIntegerOrInfinity(index);return integer<0?max(integer+length,0):min(integer,length)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var trunc=__w_pdfjs_require__2(64);module2.exports=function(argument){var number=+argument;return number!==number||number===0?0:trunc(number)}},module2=>{var ceil=Math.ceil,floor=Math.floor;module2.exports=Math.trunc||__name(__name2(function(x){var n=+x;return(n>0?floor:ceil)(n)},"trunc"),"trunc")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toLength=__w_pdfjs_require__2(66);module2.exports=function(obj){return toLength(obj.length)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toIntegerOrInfinity=__w_pdfjs_require__2(63),min=Math.min;module2.exports=function(argument){return argument>0?min(toIntegerOrInfinity(argument),9007199254740991):0}},module2=>{module2.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(__unused_webpack_module2,exports2)=>{exports2.f=Object.getOwnPropertySymbols},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10),isCallable=__w_pdfjs_require__2(23),replacement=/#|\.prototype\./,isForced=__name(function(feature,detection){var value=data[normalize2(feature)];return value==POLYFILL?!0:value==NATIVE?!1:isCallable(detection)?fails(detection):!!detection},"isForced"),normalize2=isForced.normalize=function(string){return String(string).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P";module2.exports=isForced},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var wellKnownSymbol=__w_pdfjs_require__2(35),create=__w_pdfjs_require__2(71),defineProperty=__w_pdfjs_require__2(46).f,UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;ArrayPrototype[UNSCOPABLES]==null&&defineProperty(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:create(null)}),module2.exports=function(key){ArrayPrototype[UNSCOPABLES][key]=!0}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var anObject=__w_pdfjs_require__2(48),definePropertiesModule=__w_pdfjs_require__2(72),enumBugKeys=__w_pdfjs_require__2(67),hiddenKeys=__w_pdfjs_require__2(56),html=__w_pdfjs_require__2(74),documentCreateElement=__w_pdfjs_require__2(44),sharedKey=__w_pdfjs_require__2(55),GT=">",LT="<",PROTOTYPE="prototype",SCRIPT="script",IE_PROTO=sharedKey("IE_PROTO"),EmptyConstructor=__name(function(){},"EmptyConstructor"),scriptTag=__name(function(content){return LT+SCRIPT+GT+content+LT+"/"+SCRIPT+GT},"scriptTag"),NullProtoObjectViaActiveX=__name(function(activeXDocument2){activeXDocument2.write(scriptTag("")),activeXDocument2.close();var temp=activeXDocument2.parentWindow.Object;return activeXDocument2=null,temp},"NullProtoObjectViaActiveX"),NullProtoObjectViaIFrame=__name(function(){var iframe=documentCreateElement("iframe"),JS="java"+SCRIPT+":",iframeDocument;return iframe.style.display="none",html.appendChild(iframe),iframe.src=String(JS),iframeDocument=iframe.contentWindow.document,iframeDocument.open(),iframeDocument.write(scriptTag("document.F=Object")),iframeDocument.close(),iframeDocument.F},"NullProtoObjectViaIFrame"),activeXDocument,NullProtoObject=__name(function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch{}NullProtoObject=typeof document<"u"?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var length=enumBugKeys.length;length--;)delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];return NullProtoObject()},"NullProtoObject");hiddenKeys[IE_PROTO]=!0,module2.exports=Object.create||__name(__name2(function(O,Properties){var result;return O!==null?(EmptyConstructor[PROTOTYPE]=anObject(O),result=new EmptyConstructor,EmptyConstructor[PROTOTYPE]=null,result[IE_PROTO]=O):result=NullProtoObject(),Properties===void 0?result:definePropertiesModule.f(result,Properties)},"create"),"create")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var DESCRIPTORS=__w_pdfjs_require__2(9),V8_PROTOTYPE_DEFINE_BUG=__w_pdfjs_require__2(47),definePropertyModule=__w_pdfjs_require__2(46),anObject=__w_pdfjs_require__2(48),toIndexedObject=__w_pdfjs_require__2(15),objectKeys=__w_pdfjs_require__2(73);exports2.f=DESCRIPTORS&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:__name(__name2(function(O,Properties){anObject(O);for(var props=toIndexedObject(Properties),keys=objectKeys(Properties),length=keys.length,index=0,key;length>index;)definePropertyModule.f(O,key=keys[index++],props[key]);return O},"defineProperties"),"defineProperties")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var internalObjectKeys=__w_pdfjs_require__2(60),enumBugKeys=__w_pdfjs_require__2(67);module2.exports=Object.keys||__name(__name2(function(O){return internalObjectKeys(O,enumBugKeys)},"keys"),"keys")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var getBuiltIn=__w_pdfjs_require__2(25);module2.exports=getBuiltIn("document","documentElement")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7),uncurryThis=__w_pdfjs_require__2(17);module2.exports=function(CONSTRUCTOR,METHOD){return uncurryThis(global2[CONSTRUCTOR].prototype[METHOD])}},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{__w_pdfjs_require__2(77)},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var ArrayBufferViewCore=__w_pdfjs_require__2(78),lengthOfArrayLike=__w_pdfjs_require__2(65),toIntegerOrInfinity=__w_pdfjs_require__2(63),aTypedArray=ArrayBufferViewCore.aTypedArray,exportTypedArrayMethod=ArrayBufferViewCore.exportTypedArrayMethod;exportTypedArrayMethod("at",__name(__name2(function(index){var O=aTypedArray(this),len=lengthOfArrayLike(O),relativeIndex=toIntegerOrInfinity(index),k=relativeIndex>=0?relativeIndex:len+relativeIndex;return k<0||k>=len?void 0:O[k]},"at"),"at"))},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var NATIVE_ARRAY_BUFFER=__w_pdfjs_require__2(79),DESCRIPTORS=__w_pdfjs_require__2(9),global2=__w_pdfjs_require__2(7),isCallable=__w_pdfjs_require__2(23),isObject=__w_pdfjs_require__2(22),hasOwn=__w_pdfjs_require__2(40),classof=__w_pdfjs_require__2(80),tryToString=__w_pdfjs_require__2(33),createNonEnumerableProperty=__w_pdfjs_require__2(45),defineBuiltIn=__w_pdfjs_require__2(49),defineProperty=__w_pdfjs_require__2(46).f,isPrototypeOf=__w_pdfjs_require__2(26),getPrototypeOf=__w_pdfjs_require__2(82),setPrototypeOf=__w_pdfjs_require__2(84),wellKnownSymbol=__w_pdfjs_require__2(35),uid=__w_pdfjs_require__2(42),InternalStateModule=__w_pdfjs_require__2(53),enforceInternalState=InternalStateModule.enforce,getInternalState=InternalStateModule.get,Int8Array=global2.Int8Array,Int8ArrayPrototype=Int8Array&&Int8Array.prototype,Uint8ClampedArray=global2.Uint8ClampedArray,Uint8ClampedArrayPrototype=Uint8ClampedArray&&Uint8ClampedArray.prototype,TypedArray=Int8Array&&getPrototypeOf(Int8Array),TypedArrayPrototype=Int8ArrayPrototype&&getPrototypeOf(Int8ArrayPrototype),ObjectPrototype=Object.prototype,TypeError2=global2.TypeError,TO_STRING_TAG=wellKnownSymbol("toStringTag"),TYPED_ARRAY_TAG=uid("TYPED_ARRAY_TAG"),TYPED_ARRAY_CONSTRUCTOR="TypedArrayConstructor",NATIVE_ARRAY_BUFFER_VIEWS=NATIVE_ARRAY_BUFFER&&!!setPrototypeOf&&classof(global2.opera)!=="Opera",TYPED_ARRAY_TAG_REQUIRED=!1,NAME,Constructor,Prototype,TypedArrayConstructorsList={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},BigIntArrayConstructorsList={BigInt64Array:8,BigUint64Array:8},isView=__name(__name2(function(it){if(!isObject(it))return!1;var klass=classof(it);return klass==="DataView"||hasOwn(TypedArrayConstructorsList,klass)||hasOwn(BigIntArrayConstructorsList,klass)},"isView2"),"isView"),getTypedArrayConstructor=__name(function(it){var proto=getPrototypeOf(it);if(isObject(proto)){var state=getInternalState(proto);return state&&hasOwn(state,TYPED_ARRAY_CONSTRUCTOR)?state[TYPED_ARRAY_CONSTRUCTOR]:getTypedArrayConstructor(proto)}},"getTypedArrayConstructor"),isTypedArray=__name(function(it){if(!isObject(it))return!1;var klass=classof(it);return hasOwn(TypedArrayConstructorsList,klass)||hasOwn(BigIntArrayConstructorsList,klass)},"isTypedArray"),aTypedArray=__name(function(it){if(isTypedArray(it))return it;throw TypeError2("Target is not a typed array")},"aTypedArray"),aTypedArrayConstructor=__name(function(C){if(isCallable(C)&&(!setPrototypeOf||isPrototypeOf(TypedArray,C)))return C;throw TypeError2(tryToString(C)+" is not a typed array constructor")},"aTypedArrayConstructor"),exportTypedArrayMethod=__name(function(KEY,property,forced,options){if(DESCRIPTORS){if(forced)for(var ARRAY in TypedArrayConstructorsList){var TypedArrayConstructor=global2[ARRAY];if(TypedArrayConstructor&&hasOwn(TypedArrayConstructor.prototype,KEY))try{delete TypedArrayConstructor.prototype[KEY]}catch{try{TypedArrayConstructor.prototype[KEY]=property}catch{}}}(!TypedArrayPrototype[KEY]||forced)&&defineBuiltIn(TypedArrayPrototype,KEY,forced?property:NATIVE_ARRAY_BUFFER_VIEWS&&Int8ArrayPrototype[KEY]||property,options)}},"exportTypedArrayMethod"),exportTypedArrayStaticMethod=__name(function(KEY,property,forced){var ARRAY,TypedArrayConstructor;if(DESCRIPTORS){if(setPrototypeOf){if(forced){for(ARRAY in TypedArrayConstructorsList)if(TypedArrayConstructor=global2[ARRAY],TypedArrayConstructor&&hasOwn(TypedArrayConstructor,KEY))try{delete TypedArrayConstructor[KEY]}catch{}}if(!TypedArray[KEY]||forced)try{return defineBuiltIn(TypedArray,KEY,forced?property:NATIVE_ARRAY_BUFFER_VIEWS&&TypedArray[KEY]||property)}catch{}else return}for(ARRAY in TypedArrayConstructorsList)TypedArrayConstructor=global2[ARRAY],TypedArrayConstructor&&(!TypedArrayConstructor[KEY]||forced)&&defineBuiltIn(TypedArrayConstructor,KEY,property)}},"exportTypedArrayStaticMethod");for(NAME in TypedArrayConstructorsList)Constructor=global2[NAME],Prototype=Constructor&&Constructor.prototype,Prototype?enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor:NATIVE_ARRAY_BUFFER_VIEWS=!1;for(NAME in BigIntArrayConstructorsList)Constructor=global2[NAME],Prototype=Constructor&&Constructor.prototype,Prototype&&(enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor);if((!NATIVE_ARRAY_BUFFER_VIEWS||!isCallable(TypedArray)||TypedArray===Function.prototype)&&(TypedArray=__name(__name2(function(){throw TypeError2("Incorrect invocation")},"TypedArray2"),"TypedArray"),NATIVE_ARRAY_BUFFER_VIEWS))for(NAME in TypedArrayConstructorsList)global2[NAME]&&setPrototypeOf(global2[NAME],TypedArray);if((!NATIVE_ARRAY_BUFFER_VIEWS||!TypedArrayPrototype||TypedArrayPrototype===ObjectPrototype)&&(TypedArrayPrototype=TypedArray.prototype,NATIVE_ARRAY_BUFFER_VIEWS))for(NAME in TypedArrayConstructorsList)global2[NAME]&&setPrototypeOf(global2[NAME].prototype,TypedArrayPrototype);if(NATIVE_ARRAY_BUFFER_VIEWS&&getPrototypeOf(Uint8ClampedArrayPrototype)!==TypedArrayPrototype&&setPrototypeOf(Uint8ClampedArrayPrototype,TypedArrayPrototype),DESCRIPTORS&&!hasOwn(TypedArrayPrototype,TO_STRING_TAG)){TYPED_ARRAY_TAG_REQUIRED=!0,defineProperty(TypedArrayPrototype,TO_STRING_TAG,{get:function(){return isObject(this)?this[TYPED_ARRAY_TAG]:void 0}});for(NAME in TypedArrayConstructorsList)global2[NAME]&&createNonEnumerableProperty(global2[NAME],TYPED_ARRAY_TAG,NAME)}module2.exports={NATIVE_ARRAY_BUFFER_VIEWS,TYPED_ARRAY_TAG:TYPED_ARRAY_TAG_REQUIRED&&TYPED_ARRAY_TAG,aTypedArray,aTypedArrayConstructor,exportTypedArrayMethod,exportTypedArrayStaticMethod,getTypedArrayConstructor,isView,isTypedArray,TypedArray,TypedArrayPrototype}},module2=>{module2.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var TO_STRING_TAG_SUPPORT=__w_pdfjs_require__2(81),isCallable=__w_pdfjs_require__2(23),classofRaw=__w_pdfjs_require__2(18),wellKnownSymbol=__w_pdfjs_require__2(35),TO_STRING_TAG=wellKnownSymbol("toStringTag"),$Object=Object,CORRECT_ARGUMENTS=classofRaw(function(){return arguments}())=="Arguments",tryGet=__name(function(it,key){try{return it[key]}catch{}},"tryGet");module2.exports=TO_STRING_TAG_SUPPORT?classofRaw:function(it){var O,tag,result;return it===void 0?"Undefined":it===null?"Null":typeof(tag=tryGet(O=$Object(it),TO_STRING_TAG))=="string"?tag:CORRECT_ARGUMENTS?classofRaw(O):(result=classofRaw(O))=="Object"&&isCallable(O.callee)?"Arguments":result}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var wellKnownSymbol=__w_pdfjs_require__2(35),TO_STRING_TAG=wellKnownSymbol("toStringTag"),test={};test[TO_STRING_TAG]="z",module2.exports=String(test)==="[object z]"},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var hasOwn=__w_pdfjs_require__2(40),isCallable=__w_pdfjs_require__2(23),toObject=__w_pdfjs_require__2(41),sharedKey=__w_pdfjs_require__2(55),CORRECT_PROTOTYPE_GETTER=__w_pdfjs_require__2(83),IE_PROTO=sharedKey("IE_PROTO"),$Object=Object,ObjectPrototype=$Object.prototype;module2.exports=CORRECT_PROTOTYPE_GETTER?$Object.getPrototypeOf:function(O){var object=toObject(O);if(hasOwn(object,IE_PROTO))return object[IE_PROTO];var constructor=object.constructor;return isCallable(constructor)&&object instanceof constructor?constructor.prototype:object instanceof $Object?ObjectPrototype:null}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10);module2.exports=!fails(function(){function F(){}return __name2(F,"F"),__name(F,"F"),F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),anObject=__w_pdfjs_require__2(48),aPossiblePrototype=__w_pdfjs_require__2(85);module2.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var CORRECT_SETTER=!1,test={},setter;try{setter=uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),setter(test,[]),CORRECT_SETTER=test instanceof Array}catch{}return __name(__name2(function(O,proto){return anObject(O),aPossiblePrototype(proto),CORRECT_SETTER?setter(O,proto):O.__proto__=proto,O},"setPrototypeOf"),"setPrototypeOf")}():void 0)},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isCallable=__w_pdfjs_require__2(23),$String=String,$TypeError=TypeError;module2.exports=function(argument){if(typeof argument=="object"||isCallable(argument))return argument;throw $TypeError("Can't set "+$String(argument)+" as a prototype")}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{__w_pdfjs_require__2(87),__w_pdfjs_require__2(93),__w_pdfjs_require__2(95),__w_pdfjs_require__2(117),__w_pdfjs_require__2(119);var path=__w_pdfjs_require__2(128);module2.exports=path.structuredClone},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toIndexedObject=__w_pdfjs_require__2(15),addToUnscopables=__w_pdfjs_require__2(70),Iterators=__w_pdfjs_require__2(88),InternalStateModule=__w_pdfjs_require__2(53),defineProperty=__w_pdfjs_require__2(46).f,defineIterator=__w_pdfjs_require__2(89),IS_PURE=__w_pdfjs_require__2(37),DESCRIPTORS=__w_pdfjs_require__2(9),ARRAY_ITERATOR="Array Iterator",setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor(ARRAY_ITERATOR);module2.exports=defineIterator(Array,"Array",function(iterated,kind){setInternalState(this,{type:ARRAY_ITERATOR,target:toIndexedObject(iterated),index:0,kind})},function(){var state=getInternalState(this),target=state.target,kind=state.kind,index=state.index++;return!target||index>=target.length?(state.target=void 0,{value:void 0,done:!0}):kind=="keys"?{value:index,done:!1}:kind=="values"?{value:target[index],done:!1}:{value:[index,target[index]],done:!1}},"values");var values=Iterators.Arguments=Iterators.Array;if(addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries"),!IS_PURE&&DESCRIPTORS&&values.name!=="values")try{defineProperty(values,"name",{value:"values"})}catch{}},module2=>{module2.exports={}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var $=__w_pdfjs_require__2(6),call=__w_pdfjs_require__2(11),IS_PURE=__w_pdfjs_require__2(37),FunctionName=__w_pdfjs_require__2(51),isCallable=__w_pdfjs_require__2(23),createIteratorConstructor=__w_pdfjs_require__2(90),getPrototypeOf=__w_pdfjs_require__2(82),setPrototypeOf=__w_pdfjs_require__2(84),setToStringTag=__w_pdfjs_require__2(92),createNonEnumerableProperty=__w_pdfjs_require__2(45),defineBuiltIn=__w_pdfjs_require__2(49),wellKnownSymbol=__w_pdfjs_require__2(35),Iterators=__w_pdfjs_require__2(88),IteratorsCore=__w_pdfjs_require__2(91),PROPER_FUNCTION_NAME=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR=wellKnownSymbol("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=__name(function(){return this},"returnThis");module2.exports=function(Iterable,NAME,IteratorConstructor,next,DEFAULT,IS_SET,FORCED){createIteratorConstructor(IteratorConstructor,NAME,next);var getIterationMethod=__name(function(KIND){if(KIND===DEFAULT&&defaultIterator)return defaultIterator;if(!BUGGY_SAFARI_ITERATORS&&KIND in IterablePrototype)return IterablePrototype[KIND];switch(KIND){case KEYS:return __name(__name2(function(){return new IteratorConstructor(this,KIND)},"keys"),"keys");case VALUES:return __name(__name2(function(){return new IteratorConstructor(this,KIND)},"values"),"values");case ENTRIES:return __name(__name2(function(){return new IteratorConstructor(this,KIND)},"entries"),"entries")}return function(){return new IteratorConstructor(this)}},"getIterationMethod"),TO_STRING_TAG=NAME+" Iterator",INCORRECT_VALUES_NAME=!1,IterablePrototype=Iterable.prototype,nativeIterator=IterablePrototype[ITERATOR]||IterablePrototype["@@iterator"]||DEFAULT&&IterablePrototype[DEFAULT],defaultIterator=!BUGGY_SAFARI_ITERATORS&&nativeIterator||getIterationMethod(DEFAULT),anyNativeIterator=NAME=="Array"&&IterablePrototype.entries||nativeIterator,CurrentIteratorPrototype,methods,KEY;if(anyNativeIterator&&(CurrentIteratorPrototype=getPrototypeOf(anyNativeIterator.call(new Iterable)),CurrentIteratorPrototype!==Object.prototype&&CurrentIteratorPrototype.next&&(!IS_PURE&&getPrototypeOf(CurrentIteratorPrototype)!==IteratorPrototype&&(setPrototypeOf?setPrototypeOf(CurrentIteratorPrototype,IteratorPrototype):isCallable(CurrentIteratorPrototype[ITERATOR])||defineBuiltIn(CurrentIteratorPrototype,ITERATOR,returnThis)),setToStringTag(CurrentIteratorPrototype,TO_STRING_TAG,!0,!0),IS_PURE&&(Iterators[TO_STRING_TAG]=returnThis))),PROPER_FUNCTION_NAME&&DEFAULT==VALUES&&nativeIterator&&nativeIterator.name!==VALUES&&(!IS_PURE&&CONFIGURABLE_FUNCTION_NAME?createNonEnumerableProperty(IterablePrototype,"name",VALUES):(INCORRECT_VALUES_NAME=!0,defaultIterator=__name(__name2(function(){return call(nativeIterator,this)},"values"),"values"))),DEFAULT)if(methods={values:getIterationMethod(VALUES),keys:IS_SET?defaultIterator:getIterationMethod(KEYS),entries:getIterationMethod(ENTRIES)},FORCED)for(KEY in methods)(BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME||!(KEY in IterablePrototype))&&defineBuiltIn(IterablePrototype,KEY,methods[KEY]);else $({target:NAME,proto:!0,forced:BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME},methods);return(!IS_PURE||FORCED)&&IterablePrototype[ITERATOR]!==defaultIterator&&defineBuiltIn(IterablePrototype,ITERATOR,defaultIterator,{name:DEFAULT}),Iterators[NAME]=defaultIterator,methods}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var IteratorPrototype=__w_pdfjs_require__2(91).IteratorPrototype,create=__w_pdfjs_require__2(71),createPropertyDescriptor=__w_pdfjs_require__2(14),setToStringTag=__w_pdfjs_require__2(92),Iterators=__w_pdfjs_require__2(88),returnThis=__name(function(){return this},"returnThis");module2.exports=function(IteratorConstructor,NAME,next,ENUMERABLE_NEXT){var TO_STRING_TAG=NAME+" Iterator";return IteratorConstructor.prototype=create(IteratorPrototype,{next:createPropertyDescriptor(+!ENUMERABLE_NEXT,next)}),setToStringTag(IteratorConstructor,TO_STRING_TAG,!1,!0),Iterators[TO_STRING_TAG]=returnThis,IteratorConstructor}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10),isCallable=__w_pdfjs_require__2(23),create=__w_pdfjs_require__2(71),getPrototypeOf=__w_pdfjs_require__2(82),defineBuiltIn=__w_pdfjs_require__2(49),wellKnownSymbol=__w_pdfjs_require__2(35),IS_PURE=__w_pdfjs_require__2(37),ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1,IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=getPrototypeOf(getPrototypeOf(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS=!0);var NEW_ITERATOR_PROTOTYPE=IteratorPrototype==null||fails(function(){var test={};return IteratorPrototype[ITERATOR].call(test)!==test});NEW_ITERATOR_PROTOTYPE?IteratorPrototype={}:IS_PURE&&(IteratorPrototype=create(IteratorPrototype)),isCallable(IteratorPrototype[ITERATOR])||defineBuiltIn(IteratorPrototype,ITERATOR,function(){return this}),module2.exports={IteratorPrototype,BUGGY_SAFARI_ITERATORS}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var defineProperty=__w_pdfjs_require__2(46).f,hasOwn=__w_pdfjs_require__2(40),wellKnownSymbol=__w_pdfjs_require__2(35),TO_STRING_TAG=wellKnownSymbol("toStringTag");module2.exports=function(target,TAG,STATIC){target&&!STATIC&&(target=target.prototype),target&&!hasOwn(target,TO_STRING_TAG)&&defineProperty(target,TO_STRING_TAG,{configurable:!0,value:TAG})}},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var TO_STRING_TAG_SUPPORT=__w_pdfjs_require__2(81),defineBuiltIn=__w_pdfjs_require__2(49),toString=__w_pdfjs_require__2(94);TO_STRING_TAG_SUPPORT||defineBuiltIn(Object.prototype,"toString",toString,{unsafe:!0})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var TO_STRING_TAG_SUPPORT=__w_pdfjs_require__2(81),classof=__w_pdfjs_require__2(80);module2.exports=TO_STRING_TAG_SUPPORT?{}.toString:__name(__name2(function(){return"[object "+classof(this)+"]"},"toString"),"toString")},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{__w_pdfjs_require__2(96)},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var collection=__w_pdfjs_require__2(97),collectionStrong=__w_pdfjs_require__2(114);collection("Map",function(init){return __name(__name2(function(){return init(this,arguments.length?arguments[0]:void 0)},"Map2"),"Map")},collectionStrong)},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var $=__w_pdfjs_require__2(6),global2=__w_pdfjs_require__2(7),uncurryThis=__w_pdfjs_require__2(17),isForced=__w_pdfjs_require__2(69),defineBuiltIn=__w_pdfjs_require__2(49),InternalMetadataModule=__w_pdfjs_require__2(98),iterate=__w_pdfjs_require__2(105),anInstance=__w_pdfjs_require__2(111),isCallable=__w_pdfjs_require__2(23),isObject=__w_pdfjs_require__2(22),fails=__w_pdfjs_require__2(10),checkCorrectnessOfIteration=__w_pdfjs_require__2(112),setToStringTag=__w_pdfjs_require__2(92),inheritIfRequired=__w_pdfjs_require__2(113);module2.exports=function(CONSTRUCTOR_NAME,wrapper,common){var IS_MAP=CONSTRUCTOR_NAME.indexOf("Map")!==-1,IS_WEAK=CONSTRUCTOR_NAME.indexOf("Weak")!==-1,ADDER=IS_MAP?"set":"add",NativeConstructor=global2[CONSTRUCTOR_NAME],NativePrototype=NativeConstructor&&NativeConstructor.prototype,Constructor=NativeConstructor,exported={},fixMethod=__name(function(KEY){var uncurriedNativeMethod=uncurryThis(NativePrototype[KEY]);defineBuiltIn(NativePrototype,KEY,KEY=="add"?__name(__name2(function(value){return uncurriedNativeMethod(this,value===0?0:value),this},"add"),"add"):KEY=="delete"?function(key){return IS_WEAK&&!isObject(key)?!1:uncurriedNativeMethod(this,key===0?0:key)}:KEY=="get"?__name(__name2(function(key){return IS_WEAK&&!isObject(key)?void 0:uncurriedNativeMethod(this,key===0?0:key)},"get"),"get"):KEY=="has"?__name(__name2(function(key){return IS_WEAK&&!isObject(key)?!1:uncurriedNativeMethod(this,key===0?0:key)},"has"),"has"):__name(__name2(function(key,value){return uncurriedNativeMethod(this,key===0?0:key,value),this},"set"),"set"))},"fixMethod"),REPLACE=isForced(CONSTRUCTOR_NAME,!isCallable(NativeConstructor)||!(IS_WEAK||NativePrototype.forEach&&!fails(function(){new NativeConstructor().entries().next()})));if(REPLACE)Constructor=common.getConstructor(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER),InternalMetadataModule.enable();else if(isForced(CONSTRUCTOR_NAME,!0)){var instance=new Constructor,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails(function(){instance.has(1)}),ACCEPT_ITERABLES=checkCorrectnessOfIteration(function(iterable){new NativeConstructor(iterable)}),BUGGY_ZERO=!IS_WEAK&&fails(function(){for(var $instance=new NativeConstructor,index=5;index--;)$instance[ADDER](index,index);return!$instance.has(-0)});ACCEPT_ITERABLES||(Constructor=wrapper(function(dummy,iterable){anInstance(dummy,NativePrototype);var that=inheritIfRequired(new NativeConstructor,dummy,Constructor);return iterable!=null&&iterate(iterable,that[ADDER],{that,AS_ENTRIES:IS_MAP}),that}),Constructor.prototype=NativePrototype,NativePrototype.constructor=Constructor),(THROWS_ON_PRIMITIVES||BUGGY_ZERO)&&(fixMethod("delete"),fixMethod("has"),IS_MAP&&fixMethod("get")),(BUGGY_ZERO||HASNT_CHAINING)&&fixMethod(ADDER),IS_WEAK&&NativePrototype.clear&&delete NativePrototype.clear}return exported[CONSTRUCTOR_NAME]=Constructor,$({global:!0,constructor:!0,forced:Constructor!=NativeConstructor},exported),setToStringTag(Constructor,CONSTRUCTOR_NAME),IS_WEAK||common.setStrong(Constructor,CONSTRUCTOR_NAME,IS_MAP),Constructor}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var $=__w_pdfjs_require__2(6),uncurryThis=__w_pdfjs_require__2(17),hiddenKeys=__w_pdfjs_require__2(56),isObject=__w_pdfjs_require__2(22),hasOwn=__w_pdfjs_require__2(40),defineProperty=__w_pdfjs_require__2(46).f,getOwnPropertyNamesModule=__w_pdfjs_require__2(59),getOwnPropertyNamesExternalModule=__w_pdfjs_require__2(99),isExtensible=__w_pdfjs_require__2(102),uid=__w_pdfjs_require__2(42),FREEZING=__w_pdfjs_require__2(104),REQUIRED=!1,METADATA=uid("meta"),id=0,setMetadata=__name(function(it){defineProperty(it,METADATA,{value:{objectID:"O"+id++,weakData:{}}})},"setMetadata"),fastKey=__name(function(it,create){if(!isObject(it))return typeof it=="symbol"?it:(typeof it=="string"?"S":"P")+it;if(!hasOwn(it,METADATA)){if(!isExtensible(it))return"F";if(!create)return"E";setMetadata(it)}return it[METADATA].objectID},"fastKey"),getWeakData=__name(function(it,create){if(!hasOwn(it,METADATA)){if(!isExtensible(it))return!0;if(!create)return!1;setMetadata(it)}return it[METADATA].weakData},"getWeakData"),onFreeze=__name(function(it){return FREEZING&&REQUIRED&&isExtensible(it)&&!hasOwn(it,METADATA)&&setMetadata(it),it},"onFreeze"),enable=__name(function(){meta.enable=function(){},REQUIRED=!0;var getOwnPropertyNames=getOwnPropertyNamesModule.f,splice=uncurryThis([].splice),test={};test[METADATA]=1,getOwnPropertyNames(test).length&&(getOwnPropertyNamesModule.f=function(it){for(var result=getOwnPropertyNames(it),i=0,length=result.length;i<length;i++)if(result[i]===METADATA){splice(result,i,1);break}return result},$({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:getOwnPropertyNamesExternalModule.f}))},"enable"),meta=module2.exports={enable,fastKey,getWeakData,onFreeze};hiddenKeys[METADATA]=!0},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var classof=__w_pdfjs_require__2(18),toIndexedObject=__w_pdfjs_require__2(15),$getOwnPropertyNames=__w_pdfjs_require__2(59).f,arraySlice=__w_pdfjs_require__2(100),windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=__name(function(it){try{return $getOwnPropertyNames(it)}catch{return arraySlice(windowNames)}},"getWindowNames");module2.exports.f=__name(__name2(function(it){return windowNames&&classof(it)=="Window"?getWindowNames(it):$getOwnPropertyNames(toIndexedObject(it))},"getOwnPropertyNames"),"getOwnPropertyNames")},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toAbsoluteIndex=__w_pdfjs_require__2(62),lengthOfArrayLike=__w_pdfjs_require__2(65),createProperty=__w_pdfjs_require__2(101),$Array=Array,max=Math.max;module2.exports=function(O,start,end){for(var length=lengthOfArrayLike(O),k=toAbsoluteIndex(start,length),fin=toAbsoluteIndex(end===void 0?length:end,length),result=$Array(max(fin-k,0)),n=0;k<fin;k++,n++)createProperty(result,n,O[k]);return result.length=n,result}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var toPropertyKey=__w_pdfjs_require__2(20),definePropertyModule=__w_pdfjs_require__2(46),createPropertyDescriptor=__w_pdfjs_require__2(14);module2.exports=function(object,key,value){var propertyKey=toPropertyKey(key);propertyKey in object?definePropertyModule.f(object,propertyKey,createPropertyDescriptor(0,value)):object[propertyKey]=value}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10),isObject=__w_pdfjs_require__2(22),classof=__w_pdfjs_require__2(18),ARRAY_BUFFER_NON_EXTENSIBLE=__w_pdfjs_require__2(103),$isExtensible=Object.isExtensible,FAILS_ON_PRIMITIVES=fails(function(){});module2.exports=FAILS_ON_PRIMITIVES||ARRAY_BUFFER_NON_EXTENSIBLE?__name(__name2(function(it){return!isObject(it)||ARRAY_BUFFER_NON_EXTENSIBLE&&classof(it)=="ArrayBuffer"?!1:$isExtensible?$isExtensible(it):!0},"isExtensible"),"isExtensible"):$isExtensible},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10);module2.exports=fails(function(){if(typeof ArrayBuffer=="function"){var buffer=new ArrayBuffer(8);Object.isExtensible(buffer)&&Object.defineProperty(buffer,"a",{value:8})}})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10);module2.exports=!fails(function(){return Object.isExtensible(Object.preventExtensions({}))})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var bind=__w_pdfjs_require__2(106),call=__w_pdfjs_require__2(11),anObject=__w_pdfjs_require__2(48),tryToString=__w_pdfjs_require__2(33),isArrayIteratorMethod=__w_pdfjs_require__2(107),lengthOfArrayLike=__w_pdfjs_require__2(65),isPrototypeOf=__w_pdfjs_require__2(26),getIterator=__w_pdfjs_require__2(108),getIteratorMethod=__w_pdfjs_require__2(109),iteratorClose=__w_pdfjs_require__2(110),$TypeError=TypeError,Result=__name(function(stopped,result){this.stopped=stopped,this.result=result},"Result"),ResultPrototype=Result.prototype;module2.exports=function(iterable,unboundFunction,options){var that=options&&options.that,AS_ENTRIES=!!(options&&options.AS_ENTRIES),IS_RECORD=!!(options&&options.IS_RECORD),IS_ITERATOR=!!(options&&options.IS_ITERATOR),INTERRUPTED=!!(options&&options.INTERRUPTED),fn=bind(unboundFunction,that),iterator,iterFn,index,length,result,next,step,stop=__name(function(condition){return iterator&&iteratorClose(iterator,"normal",condition),new Result(!0,condition)},"stop"),callFn=__name(function(value){return AS_ENTRIES?(anObject(value),INTERRUPTED?fn(value[0],value[1],stop):fn(value[0],value[1])):INTERRUPTED?fn(value,stop):fn(value)},"callFn");if(IS_RECORD)iterator=iterable.iterator;else if(IS_ITERATOR)iterator=iterable;else{if(iterFn=getIteratorMethod(iterable),!iterFn)throw $TypeError(tryToString(iterable)+" is not iterable");if(isArrayIteratorMethod(iterFn)){for(index=0,length=lengthOfArrayLike(iterable);length>index;index++)if(result=callFn(iterable[index]),result&&isPrototypeOf(ResultPrototype,result))return result;return new Result(!1)}iterator=getIterator(iterable,iterFn)}for(next=IS_RECORD?iterable.next:iterator.next;!(step=call(next,iterator)).done;){try{result=callFn(step.value)}catch(error){iteratorClose(iterator,"throw",error)}if(typeof result=="object"&&result&&isPrototypeOf(ResultPrototype,result))return result}return new Result(!1)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),aCallable=__w_pdfjs_require__2(32),NATIVE_BIND=__w_pdfjs_require__2(12),bind=uncurryThis(uncurryThis.bind);module2.exports=function(fn,that){return aCallable(fn),that===void 0?fn:NATIVE_BIND?bind(fn,that):function(){return fn.apply(that,arguments)}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var wellKnownSymbol=__w_pdfjs_require__2(35),Iterators=__w_pdfjs_require__2(88),ITERATOR=wellKnownSymbol("iterator"),ArrayPrototype=Array.prototype;module2.exports=function(it){return it!==void 0&&(Iterators.Array===it||ArrayPrototype[ITERATOR]===it)}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var call=__w_pdfjs_require__2(11),aCallable=__w_pdfjs_require__2(32),anObject=__w_pdfjs_require__2(48),tryToString=__w_pdfjs_require__2(33),getIteratorMethod=__w_pdfjs_require__2(109),$TypeError=TypeError;module2.exports=function(argument,usingIterator){var iteratorMethod=arguments.length<2?getIteratorMethod(argument):usingIterator;if(aCallable(iteratorMethod))return anObject(call(iteratorMethod,argument));throw $TypeError(tryToString(argument)+" is not iterable")}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var classof=__w_pdfjs_require__2(80),getMethod=__w_pdfjs_require__2(31),Iterators=__w_pdfjs_require__2(88),wellKnownSymbol=__w_pdfjs_require__2(35),ITERATOR=wellKnownSymbol("iterator");module2.exports=function(it){if(it!=null)return getMethod(it,ITERATOR)||getMethod(it,"@@iterator")||Iterators[classof(it)]}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var call=__w_pdfjs_require__2(11),anObject=__w_pdfjs_require__2(48),getMethod=__w_pdfjs_require__2(31);module2.exports=function(iterator,kind,value){var innerResult,innerError;anObject(iterator);try{if(innerResult=getMethod(iterator,"return"),!innerResult){if(kind==="throw")throw value;return value}innerResult=call(innerResult,iterator)}catch(error){innerError=!0,innerResult=error}if(kind==="throw")throw value;if(innerError)throw innerResult;return anObject(innerResult),value}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isPrototypeOf=__w_pdfjs_require__2(26),$TypeError=TypeError;module2.exports=function(it,Prototype){if(isPrototypeOf(Prototype,it))return it;throw $TypeError("Incorrect invocation")}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var wellKnownSymbol=__w_pdfjs_require__2(35),ITERATOR=wellKnownSymbol("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR]=function(){return this},Array.from(iteratorWithReturn,function(){throw 2})}catch{}module2.exports=function(exec,SKIP_CLOSING){if(!SKIP_CLOSING&&!SAFE_CLOSING)return!1;var ITERATION_SUPPORT=!1;try{var object={};object[ITERATOR]=function(){return{next:function(){return{done:ITERATION_SUPPORT=!0}}}},exec(object)}catch{}return ITERATION_SUPPORT}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var isCallable=__w_pdfjs_require__2(23),isObject=__w_pdfjs_require__2(22),setPrototypeOf=__w_pdfjs_require__2(84);module2.exports=function($this,dummy,Wrapper){var NewTarget,NewTargetPrototype;return setPrototypeOf&&isCallable(NewTarget=dummy.constructor)&&NewTarget!==Wrapper&&isObject(NewTargetPrototype=NewTarget.prototype)&&NewTargetPrototype!==Wrapper.prototype&&setPrototypeOf($this,NewTargetPrototype),$this}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var defineProperty=__w_pdfjs_require__2(46).f,create=__w_pdfjs_require__2(71),defineBuiltIns=__w_pdfjs_require__2(115),bind=__w_pdfjs_require__2(106),anInstance=__w_pdfjs_require__2(111),iterate=__w_pdfjs_require__2(105),defineIterator=__w_pdfjs_require__2(89),setSpecies=__w_pdfjs_require__2(116),DESCRIPTORS=__w_pdfjs_require__2(9),fastKey=__w_pdfjs_require__2(98).fastKey,InternalStateModule=__w_pdfjs_require__2(53),setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor;module2.exports={getConstructor:function(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var Constructor=wrapper(function(that,iterable){anInstance(that,Prototype),setInternalState(that,{type:CONSTRUCTOR_NAME,index:create(null),first:void 0,last:void 0,size:0}),DESCRIPTORS||(that.size=0),iterable!=null&&iterate(iterable,that[ADDER],{that,AS_ENTRIES:IS_MAP})}),Prototype=Constructor.prototype,getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME),define=__name(function(that,key,value){var state=getInternalState(that),entry=getEntry(that,key),previous,index;return entry?entry.value=value:(state.last=entry={index:index=fastKey(key,!0),key,value,previous:previous=state.last,next:void 0,removed:!1},state.first||(state.first=entry),previous&&(previous.next=entry),DESCRIPTORS?state.size++:that.size++,index!=="F"&&(state.index[index]=entry)),that},"define"),getEntry=__name(function(that,key){var state=getInternalState(that),index=fastKey(key),entry;if(index!=="F")return state.index[index];for(entry=state.first;entry;entry=entry.next)if(entry.key==key)return entry},"getEntry");return defineBuiltIns(Prototype,{clear:__name(__name2(function(){for(var that=this,state=getInternalState(that),data=state.index,entry=state.first;entry;)entry.removed=!0,entry.previous&&(entry.previous=entry.previous.next=void 0),delete data[entry.index],entry=entry.next;state.first=state.last=void 0,DESCRIPTORS?state.size=0:that.size=0},"clear"),"clear"),delete:function(key){var that=this,state=getInternalState(that),entry=getEntry(that,key);if(entry){var next=entry.next,prev=entry.previous;delete state.index[entry.index],entry.removed=!0,prev&&(prev.next=next),next&&(next.previous=prev),state.first==entry&&(state.first=next),state.last==entry&&(state.last=prev),DESCRIPTORS?state.size--:that.size--}return!!entry},forEach:__name(__name2(function(callbackfn){for(var state=getInternalState(this),boundFunction=bind(callbackfn,arguments.length>1?arguments[1]:void 0),entry;entry=entry?entry.next:state.first;)for(boundFunction(entry.value,entry.key,this);entry&&entry.removed;)entry=entry.previous},"forEach"),"forEach"),has:__name(__name2(function(key){return!!getEntry(this,key)},"has"),"has")}),defineBuiltIns(Prototype,IS_MAP?{get:__name(__name2(function(key){var entry=getEntry(this,key);return entry&&entry.value},"get"),"get"),set:__name(__name2(function(key,value){return define(this,key===0?0:key,value)},"set"),"set")}:{add:__name(__name2(function(value){return define(this,value=value===0?0:value,value)},"add"),"add")}),DESCRIPTORS&&defineProperty(Prototype,"size",{get:function(){return getInternalState(this).size}}),Constructor},setStrong:function(Constructor,CONSTRUCTOR_NAME,IS_MAP){var ITERATOR_NAME=CONSTRUCTOR_NAME+" Iterator",getInternalCollectionState=internalStateGetterFor(CONSTRUCTOR_NAME),getInternalIteratorState=internalStateGetterFor(ITERATOR_NAME);defineIterator(Constructor,CONSTRUCTOR_NAME,function(iterated,kind){setInternalState(this,{type:ITERATOR_NAME,target:iterated,state:getInternalCollectionState(iterated),kind,last:void 0})},function(){for(var state=getInternalIteratorState(this),kind=state.kind,entry=state.last;entry&&entry.removed;)entry=entry.previous;return!state.target||!(state.last=entry=entry?entry.next:state.state.first)?(state.target=void 0,{value:void 0,done:!0}):kind=="keys"?{value:entry.key,done:!1}:kind=="values"?{value:entry.value,done:!1}:{value:[entry.key,entry.value],done:!1}},IS_MAP?"entries":"values",!IS_MAP,!0),setSpecies(CONSTRUCTOR_NAME)}}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var defineBuiltIn=__w_pdfjs_require__2(49);module2.exports=function(target,src,options){for(var key in src)defineBuiltIn(target,key,src[key],options);return target}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var getBuiltIn=__w_pdfjs_require__2(25),definePropertyModule=__w_pdfjs_require__2(46),wellKnownSymbol=__w_pdfjs_require__2(35),DESCRIPTORS=__w_pdfjs_require__2(9),SPECIES=wellKnownSymbol("species");module2.exports=function(CONSTRUCTOR_NAME){var Constructor=getBuiltIn(CONSTRUCTOR_NAME),defineProperty=definePropertyModule.f;DESCRIPTORS&&Constructor&&!Constructor[SPECIES]&&defineProperty(Constructor,SPECIES,{configurable:!0,get:function(){return this}})}},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{__w_pdfjs_require__2(118)},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var collection=__w_pdfjs_require__2(97),collectionStrong=__w_pdfjs_require__2(114);collection("Set",function(init){return __name(__name2(function(){return init(this,arguments.length?arguments[0]:void 0)},"Set2"),"Set")},collectionStrong)},(__unused_webpack_module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var IS_PURE=__w_pdfjs_require__2(37),$=__w_pdfjs_require__2(6),global2=__w_pdfjs_require__2(7),getBuiltin=__w_pdfjs_require__2(25),uncurryThis=__w_pdfjs_require__2(17),fails=__w_pdfjs_require__2(10),uid=__w_pdfjs_require__2(42),isCallable=__w_pdfjs_require__2(23),isConstructor=__w_pdfjs_require__2(120),isObject=__w_pdfjs_require__2(22),isSymbol=__w_pdfjs_require__2(24),iterate=__w_pdfjs_require__2(105),anObject=__w_pdfjs_require__2(48),classof=__w_pdfjs_require__2(80),hasOwn=__w_pdfjs_require__2(40),createProperty=__w_pdfjs_require__2(101),createNonEnumerableProperty=__w_pdfjs_require__2(45),lengthOfArrayLike=__w_pdfjs_require__2(65),validateArgumentsLength=__w_pdfjs_require__2(121),getRegExpFlags=__w_pdfjs_require__2(122),ERROR_STACK_INSTALLABLE=__w_pdfjs_require__2(124),V8=__w_pdfjs_require__2(29),IS_BROWSER=__w_pdfjs_require__2(125),IS_DENO=__w_pdfjs_require__2(126),IS_NODE=__w_pdfjs_require__2(127),Object2=global2.Object,Date2=global2.Date,Error2=global2.Error,EvalError=global2.EvalError,RangeError2=global2.RangeError,ReferenceError2=global2.ReferenceError,SyntaxError=global2.SyntaxError,TypeError2=global2.TypeError,URIError=global2.URIError,PerformanceMark=global2.PerformanceMark,WebAssembly=global2.WebAssembly,CompileError=WebAssembly&&WebAssembly.CompileError||Error2,LinkError=WebAssembly&&WebAssembly.LinkError||Error2,RuntimeError=WebAssembly&&WebAssembly.RuntimeError||Error2,DOMException2=getBuiltin("DOMException"),Set2=getBuiltin("Set"),Map2=getBuiltin("Map"),MapPrototype=Map2.prototype,mapHas=uncurryThis(MapPrototype.has),mapGet=uncurryThis(MapPrototype.get),mapSet=uncurryThis(MapPrototype.set),setAdd=uncurryThis(Set2.prototype.add),objectKeys=getBuiltin("Object","keys"),push=uncurryThis([].push),booleanValueOf=uncurryThis((!0).valueOf),numberValueOf=uncurryThis(1 .valueOf),stringValueOf=uncurryThis("".valueOf),getTime=uncurryThis(Date2.prototype.getTime),PERFORMANCE_MARK=uid("structuredClone"),DATA_CLONE_ERROR="DataCloneError",TRANSFERRING="Transferring",checkBasicSemantic=__name(function(structuredCloneImplementation){return!fails(function(){var set1=new global2.Set([7]),set2=structuredCloneImplementation(set1),number=structuredCloneImplementation(Object2(7));return set2==set1||!set2.has(7)||typeof number!="object"||number!=7})&&structuredCloneImplementation},"checkBasicSemantic"),checkErrorsCloning=__name(function(structuredCloneImplementation,$Error){return!fails(function(){var error=new $Error,test=structuredCloneImplementation({a:error,b:error});return!(test&&test.a===test.b&&test.a instanceof $Error&&test.a.stack===error.stack)})},"checkErrorsCloning"),checkNewErrorsCloningSemantic=__name(function(structuredCloneImplementation){return!fails(function(){var test=structuredCloneImplementation(new global2.AggregateError([1],PERFORMANCE_MARK,{cause:3}));return test.name!="AggregateError"||test.errors[0]!=1||test.message!=PERFORMANCE_MARK||test.cause!=3})},"checkNewErrorsCloningSemantic"),nativeStructuredClone=global2.structuredClone,FORCED_REPLACEMENT=IS_PURE||!checkErrorsCloning(nativeStructuredClone,Error2)||!checkErrorsCloning(nativeStructuredClone,DOMException2)||!checkNewErrorsCloningSemantic(nativeStructuredClone),structuredCloneFromMark=!nativeStructuredClone&&checkBasicSemantic(function(value){return new PerformanceMark(PERFORMANCE_MARK,{detail:value}).detail}),nativeRestrictedStructuredClone=checkBasicSemantic(nativeStructuredClone)||structuredCloneFromMark,throwUncloneable=__name(function(type){throw new DOMException2("Uncloneable type: "+type,DATA_CLONE_ERROR)},"throwUncloneable"),throwUnpolyfillable=__name(function(type,kind){throw new DOMException2((kind||"Cloning")+" of "+type+" cannot be properly polyfilled in this engine",DATA_CLONE_ERROR)},"throwUnpolyfillable"),structuredCloneInternal=__name(function(value,map){if(isSymbol(value)&&throwUncloneable("Symbol"),!isObject(value))return value;if(map){if(mapHas(map,value))return mapGet(map,value)}else map=new Map2;var type=classof(value),deep=!1,C,name,cloned,dataTransfer,i,length,keys,key,source,target;switch(type){case"Array":cloned=[],deep=!0;break;case"Object":cloned={},deep=!0;break;case"Map":cloned=new Map2,deep=!0;break;case"Set":cloned=new Set2,deep=!0;break;case"RegExp":cloned=new RegExp(value.source,getRegExpFlags(value));break;case"Error":switch(name=value.name,name){case"AggregateError":cloned=getBuiltin("AggregateError")([]);break;case"EvalError":cloned=EvalError();break;case"RangeError":cloned=RangeError2();break;case"ReferenceError":cloned=ReferenceError2();break;case"SyntaxError":cloned=SyntaxError();break;case"TypeError":cloned=TypeError2();break;case"URIError":cloned=URIError();break;case"CompileError":cloned=CompileError();break;case"LinkError":cloned=LinkError();break;case"RuntimeError":cloned=RuntimeError();break;default:cloned=Error2()}deep=!0;break;case"DOMException":cloned=new DOMException2(value.message,value.name),deep=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":C=global2[type],isObject(C)||throwUnpolyfillable(type),cloned=new C(structuredCloneInternal(value.buffer,map),value.byteOffset,type==="DataView"?value.byteLength:value.length);break;case"DOMQuad":try{cloned=new DOMQuad(structuredCloneInternal(value.p1,map),structuredCloneInternal(value.p2,map),structuredCloneInternal(value.p3,map),structuredCloneInternal(value.p4,map))}catch{nativeRestrictedStructuredClone?cloned=nativeRestrictedStructuredClone(value):throwUnpolyfillable(type)}break;case"FileList":if(C=global2.DataTransfer,isConstructor(C)){for(dataTransfer=new C,i=0,length=lengthOfArrayLike(value);i<length;i++)dataTransfer.items.add(structuredCloneInternal(value[i],map));cloned=dataTransfer.files}else nativeRestrictedStructuredClone?cloned=nativeRestrictedStructuredClone(value):throwUnpolyfillable(type);break;case"ImageData":try{cloned=new ImageData(structuredCloneInternal(value.data,map),value.width,value.height,{colorSpace:value.colorSpace})}catch{nativeRestrictedStructuredClone?cloned=nativeRestrictedStructuredClone(value):throwUnpolyfillable(type)}break;default:if(nativeRestrictedStructuredClone)cloned=nativeRestrictedStructuredClone(value);else switch(type){case"BigInt":cloned=Object2(value.valueOf());break;case"Boolean":cloned=Object2(booleanValueOf(value));break;case"Number":cloned=Object2(numberValueOf(value));break;case"String":cloned=Object2(stringValueOf(value));break;case"Date":cloned=new Date2(getTime(value));break;case"ArrayBuffer":C=global2.DataView,!C&&typeof value.slice!="function"&&throwUnpolyfillable(type);try{if(typeof value.slice=="function")cloned=value.slice(0);else for(length=value.byteLength,cloned=new ArrayBuffer(length),source=new C(value),target=new C(cloned),i=0;i<length;i++)target.setUint8(i,source.getUint8(i))}catch{throw new DOMException2("ArrayBuffer is detached",DATA_CLONE_ERROR)}break;case"SharedArrayBuffer":cloned=value;break;case"Blob":try{cloned=value.slice(0,value.size,value.type)}catch{throwUnpolyfillable(type)}break;case"DOMPoint":case"DOMPointReadOnly":C=global2[type];try{cloned=C.fromPoint?C.fromPoint(value):new C(value.x,value.y,value.z,value.w)}catch{throwUnpolyfillable(type)}break;case"DOMRect":case"DOMRectReadOnly":C=global2[type];try{cloned=C.fromRect?C.fromRect(value):new C(value.x,value.y,value.width,value.height)}catch{throwUnpolyfillable(type)}break;case"DOMMatrix":case"DOMMatrixReadOnly":C=global2[type];try{cloned=C.fromMatrix?C.fromMatrix(value):new C(value)}catch{throwUnpolyfillable(type)}break;case"AudioData":case"VideoFrame":isCallable(value.clone)||throwUnpolyfillable(type);try{cloned=value.clone()}catch{throwUncloneable(type)}break;case"File":try{cloned=new File([value],value.name,value)}catch{throwUnpolyfillable(type)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":throwUnpolyfillable(type);default:throwUncloneable(type)}}if(mapSet(map,value,cloned),deep)switch(type){case"Array":case"Object":for(keys=objectKeys(value),i=0,length=lengthOfArrayLike(keys);i<length;i++)key=keys[i],createProperty(cloned,key,structuredCloneInternal(value[key],map));break;case"Map":value.forEach(function(v,k){mapSet(cloned,structuredCloneInternal(k,map),structuredCloneInternal(v,map))});break;case"Set":value.forEach(function(v){setAdd(cloned,structuredCloneInternal(v,map))});break;case"Error":createNonEnumerableProperty(cloned,"message",structuredCloneInternal(value.message,map)),hasOwn(value,"cause")&&createNonEnumerableProperty(cloned,"cause",structuredCloneInternal(value.cause,map)),name=="AggregateError"&&(cloned.errors=structuredCloneInternal(value.errors,map));case"DOMException":ERROR_STACK_INSTALLABLE&&createNonEnumerableProperty(cloned,"stack",structuredCloneInternal(value.stack,map))}return cloned},"structuredCloneInternal"),PROPER_TRANSFER=nativeStructuredClone&&!fails(function(){if(IS_DENO&&V8>92||IS_NODE&&V8>94||IS_BROWSER&&V8>97)return!1;var buffer=new ArrayBuffer(8),clone=nativeStructuredClone(buffer,{transfer:[buffer]});return buffer.byteLength!=0||clone.byteLength!=8}),tryToTransfer=__name(function(rawTransfer,map){if(!isObject(rawTransfer))throw TypeError2("Transfer option cannot be converted to a sequence");var transfer=[];iterate(rawTransfer,function(value2){push(transfer,anObject(value2))});var i=0,length=lengthOfArrayLike(transfer),value,type,C,transferredArray,transferred,canvas,context;if(PROPER_TRANSFER)for(transferredArray=nativeStructuredClone(transfer,{transfer});i<length;)mapSet(map,transfer[i],transferredArray[i++]);else for(;i<length;){if(value=transfer[i++],mapHas(map,value))throw new DOMException2("Duplicate transferable",DATA_CLONE_ERROR);switch(type=classof(value),type){case"ImageBitmap":C=global2.OffscreenCanvas,isConstructor(C)||throwUnpolyfillable(type,TRANSFERRING);try{canvas=new C(value.width,value.height),context=canvas.getContext("bitmaprenderer"),context.transferFromImageBitmap(value),transferred=canvas.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!isCallable(value.clone)||!isCallable(value.close))&&throwUnpolyfillable(type,TRANSFERRING);try{transferred=value.clone(),value.close()}catch{}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":throwUnpolyfillable(type,TRANSFERRING)}if(transferred===void 0)throw new DOMException2("This object cannot be transferred: "+type,DATA_CLONE_ERROR);mapSet(map,value,transferred)}},"tryToTransfer");$({global:!0,enumerable:!0,sham:!PROPER_TRANSFER,forced:FORCED_REPLACEMENT},{structuredClone:__name(__name2(function(value){var options=validateArgumentsLength(arguments.length,1)>1&&arguments[1]!=null?anObject(arguments[1]):void 0,transfer=options?options.transfer:void 0,map;return transfer!==void 0&&(map=new Map2,tryToTransfer(transfer,map)),structuredCloneInternal(value,map)},"structuredClone2"),"structuredClone")})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var uncurryThis=__w_pdfjs_require__2(17),fails=__w_pdfjs_require__2(10),isCallable=__w_pdfjs_require__2(23),classof=__w_pdfjs_require__2(80),getBuiltIn=__w_pdfjs_require__2(25),inspectSource=__w_pdfjs_require__2(52),noop=__name(function(){},"noop"),empty=[],construct=getBuiltIn("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec=uncurryThis(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.exec(noop),isConstructorModern=__name(__name2(function(argument){if(!isCallable(argument))return!1;try{return construct(noop,empty,argument),!0}catch{return!1}},"isConstructor"),"isConstructor"),isConstructorLegacy=__name(__name2(function(argument){if(!isCallable(argument))return!1;switch(classof(argument)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec(constructorRegExp,inspectSource(argument))}catch{return!0}},"isConstructor"),"isConstructor");isConstructorLegacy.sham=!0,module2.exports=!construct||fails(function(){var called;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern(function(){called=!0})||called})?isConstructorLegacy:isConstructorModern},module2=>{var $TypeError=TypeError;module2.exports=function(passed,required){if(passed<required)throw $TypeError("Not enough arguments");return passed}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var call=__w_pdfjs_require__2(11),hasOwn=__w_pdfjs_require__2(40),isPrototypeOf=__w_pdfjs_require__2(26),regExpFlags=__w_pdfjs_require__2(123),RegExpPrototype=RegExp.prototype;module2.exports=function(R){var flags=R.flags;return flags===void 0&&!("flags"in RegExpPrototype)&&!hasOwn(R,"flags")&&isPrototypeOf(RegExpPrototype,R)?call(regExpFlags,R):flags}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var anObject=__w_pdfjs_require__2(48);module2.exports=function(){var that=anObject(this),result="";return that.hasIndices&&(result+="d"),that.global&&(result+="g"),that.ignoreCase&&(result+="i"),that.multiline&&(result+="m"),that.dotAll&&(result+="s"),that.unicode&&(result+="u"),that.unicodeSets&&(result+="v"),that.sticky&&(result+="y"),result}},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var fails=__w_pdfjs_require__2(10),createPropertyDescriptor=__w_pdfjs_require__2(14);module2.exports=!fails(function(){var error=Error("a");return"stack"in error?(Object.defineProperty(error,"stack",createPropertyDescriptor(1,7)),error.stack!==7):!0})},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var IS_DENO=__w_pdfjs_require__2(126),IS_NODE=__w_pdfjs_require__2(127);module2.exports=!IS_DENO&&!IS_NODE&&typeof window=="object"&&typeof document=="object"},module2=>{module2.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var classof=__w_pdfjs_require__2(18),global2=__w_pdfjs_require__2(7);module2.exports=classof(global2.process)=="process"},(module2,__unused_webpack_exports,__w_pdfjs_require__2)=>{var global2=__w_pdfjs_require__2(7);module2.exports=global2},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(130),_display_utils=__w_pdfjs_require__(133),_font_loader=__w_pdfjs_require__(136),_canvas=__w_pdfjs_require__(137),_worker_options=__w_pdfjs_require__(140),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(141),_metadata=__w_pdfjs_require__(142),_optional_content_config=__w_pdfjs_require__(143),_transport_stream=__w_pdfjs_require__(144),_xfa_text=__w_pdfjs_require__(145);function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec,"_classPrivateMethodInitSpec"),__name(_classPrivateMethodInitSpec,"_classPrivateMethodInitSpec");function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet,"_classPrivateMethodGet"),__name(_classPrivateMethodGet,"_classPrivateMethodGet");function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec,"_classPrivateFieldInitSpec"),__name(_classPrivateFieldInitSpec,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration,"_checkPrivateRedeclaration"),__name(_checkPrivateRedeclaration,"_checkPrivateRedeclaration");function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");return _classApplyDescriptorSet(receiver,descriptor,value),value}__name2(_classPrivateFieldSet,"_classPrivateFieldSet"),__name(_classPrivateFieldSet,"_classPrivateFieldSet");function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor)}__name2(_classPrivateFieldGet,"_classPrivateFieldGet"),__name(_classPrivateFieldGet,"_classPrivateFieldGet");function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor,"_classExtractFieldDescriptor"),__name(_classExtractFieldDescriptor,"_classExtractFieldDescriptor");function _classStaticPrivateFieldSpecSet(receiver,classConstructor,descriptor,value){return _classCheckPrivateStaticAccess(receiver,classConstructor),_classCheckPrivateStaticFieldDescriptor(descriptor,"set"),_classApplyDescriptorSet(receiver,descriptor,value),value}__name2(_classStaticPrivateFieldSpecSet,"_classStaticPrivateFieldSpecSet"),__name(_classStaticPrivateFieldSpecSet,"_classStaticPrivateFieldSpecSet");function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet,"_classApplyDescriptorSet"),__name(_classApplyDescriptorSet,"_classApplyDescriptorSet");function _classStaticPrivateFieldSpecGet(receiver,classConstructor,descriptor){return _classCheckPrivateStaticAccess(receiver,classConstructor),_classCheckPrivateStaticFieldDescriptor(descriptor,"get"),_classApplyDescriptorGet(receiver,descriptor)}__name2(_classStaticPrivateFieldSpecGet,"_classStaticPrivateFieldSpecGet"),__name(_classStaticPrivateFieldSpecGet,"_classStaticPrivateFieldSpecGet");function _classCheckPrivateStaticFieldDescriptor(descriptor,action){if(descriptor===void 0)throw new TypeError("attempted to "+action+" private static field before its declaration")}__name2(_classCheckPrivateStaticFieldDescriptor,"_classCheckPrivateStaticFieldDescriptor"),__name(_classCheckPrivateStaticFieldDescriptor,"_classCheckPrivateStaticFieldDescriptor");function _classCheckPrivateStaticAccess(receiver,classConstructor){if(receiver!==classConstructor)throw new TypeError("Private static access of wrong provenance")}__name2(_classCheckPrivateStaticAccess,"_classCheckPrivateStaticAccess"),__name(_classCheckPrivateStaticAccess,"_classCheckPrivateStaticAccess");function _classApplyDescriptorGet(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet,"_classApplyDescriptorGet"),__name(_classApplyDescriptorGet,"_classApplyDescriptorGet");const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory,NodeCMapReaderFactory,NodeStandardFontDataFactory}=__w_pdfjs_require__(146);exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}let createPDFNetworkStream;function setPDFNetworkStreamFactory(pdfNetworkStreamFactory){createPDFNetworkStream=pdfNetworkStreamFactory}__name2(setPDFNetworkStreamFactory,"setPDFNetworkStreamFactory"),__name(setPDFNetworkStreamFactory,"setPDFNetworkStreamFactory");function getDocument(src){const task=new PDFDocumentLoadingTask;let source;if(typeof src=="string"||src instanceof URL)source={url:src};else if((0,_util.isArrayBuffer)(src))source={data:src};else if(src instanceof PDFDataRangeTransport)source={range:src};else{if(typeof src!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!src.url&&!src.data&&!src.range)throw new Error("Invalid parameter object: need either .data, .range or .url");source=src}const params=Object.create(null);let rangeTransport=null,worker2=null;for(const key in source){const value=source[key];switch(key){case"url":if(typeof window<"u")try{params[key]=new URL(value,window.location).href;continue}catch(ex){(0,_util.warn)(`Cannot create valid URL: "${ex}".`)}else if(typeof value=="string"||value instanceof URL){params[key]=value.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":rangeTransport=value;continue;case"worker":worker2=value;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&value instanceof Buffer)params[key]=new Uint8Array(value);else{if(value instanceof Uint8Array)break;if(typeof value=="string")params[key]=(0,_util.stringToBytes)(value);else if(typeof value=="object"&&value!==null&&!isNaN(value.length))params[key]=new Uint8Array(value);else if((0,_util.isArrayBuffer)(value))params[key]=new Uint8Array(value);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}params[key]=value}if(params.CMapReaderFactory=params.CMapReaderFactory||DefaultCMapReaderFactory,params.StandardFontDataFactory=params.StandardFontDataFactory||DefaultStandardFontDataFactory,params.ignoreErrors=params.stopAtErrors!==!0,params.fontExtraProperties=params.fontExtraProperties===!0,params.pdfBug=params.pdfBug===!0,params.enableXfa=params.enableXfa===!0,(!Number.isInteger(params.rangeChunkSize)||params.rangeChunkSize<1)&&(params.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof params.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(params.docBaseUrl))&&(params.docBaseUrl=null),(!Number.isInteger(params.maxImageSize)||params.maxImageSize<-1)&&(params.maxImageSize=-1),typeof params.cMapUrl!="string"&&(params.cMapUrl=null),typeof params.standardFontDataUrl!="string"&&(params.standardFontDataUrl=null),typeof params.useWorkerFetch!="boolean"&&(params.useWorkerFetch=params.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&params.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof params.isEvalSupported!="boolean"&&(params.isEvalSupported=!0),typeof params.disableFontFace!="boolean"&&(params.disableFontFace=_is_node.isNodeJS),typeof params.useSystemFonts!="boolean"&&(params.useSystemFonts=!_is_node.isNodeJS&&!params.disableFontFace),(typeof params.ownerDocument!="object"||params.ownerDocument===null)&&(params.ownerDocument=globalThis.document),typeof params.disableRange!="boolean"&&(params.disableRange=!1),typeof params.disableStream!="boolean"&&(params.disableStream=!1),typeof params.disableAutoFetch!="boolean"&&(params.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(params.verbosity),!worker2){const workerParams={verbosity:params.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};worker2=workerParams.port?PDFWorker.fromPort(workerParams):new PDFWorker(workerParams),task._worker=worker2}const docId=task.docId;return worker2.promise.then(function(){if(task.destroyed)throw new Error("Loading aborted");const workerIdPromise=_fetchDocument(worker2,params,rangeTransport,docId),networkStreamPromise=new Promise(function(resolve){let networkStream;rangeTransport?networkStream=new _transport_stream.PDFDataTransportStream({length:params.length,initialData:params.initialData,progressiveDone:params.progressiveDone,contentDispositionFilename:params.contentDispositionFilename,disableRange:params.disableRange,disableStream:params.disableStream},rangeTransport):params.data||(networkStream=createPDFNetworkStream({url:params.url,length:params.length,httpHeaders:params.httpHeaders,withCredentials:params.withCredentials,rangeChunkSize:params.rangeChunkSize,disableRange:params.disableRange,disableStream:params.disableStream})),resolve(networkStream)});return Promise.all([workerIdPromise,networkStreamPromise]).then(function(_ref){let[workerId,networkStream]=_ref;if(task.destroyed)throw new Error("Loading aborted");const messageHandler=new _message_handler.MessageHandler(docId,workerId,worker2.port),transport=new WorkerTransport(messageHandler,task,networkStream,params);task._transport=transport,messageHandler.send("Ready",null)})}).catch(task._capability.reject),task}__name2(getDocument,"getDocument"),__name(getDocument,"getDocument");async function _fetchDocument(worker2,source,pdfDataRangeTransport,docId){if(worker2.destroyed)throw new Error("Worker was destroyed");pdfDataRangeTransport&&(source.length=pdfDataRangeTransport.length,source.initialData=pdfDataRangeTransport.initialData,source.progressiveDone=pdfDataRangeTransport.progressiveDone,source.contentDispositionFilename=pdfDataRangeTransport.contentDispositionFilename);const workerId=await worker2.messageHandler.sendWithPromise("GetDocRequest",{docId,apiVersion:"2.16.105",source:{data:source.data,url:source.url,password:source.password,disableAutoFetch:source.disableAutoFetch,rangeChunkSize:source.rangeChunkSize,length:source.length},maxImageSize:source.maxImageSize,disableFontFace:source.disableFontFace,docBaseUrl:source.docBaseUrl,ignoreErrors:source.ignoreErrors,isEvalSupported:source.isEvalSupported,fontExtraProperties:source.fontExtraProperties,enableXfa:source.enableXfa,useSystemFonts:source.useSystemFonts,cMapUrl:source.useWorkerFetch?source.cMapUrl:null,standardFontDataUrl:source.useWorkerFetch?source.standardFontDataUrl:null});if(source.data&&(source.data=null),worker2.destroyed)throw new Error("Worker was destroyed");return workerId}__name2(_fetchDocument,"_fetchDocument"),__name(_fetchDocument,"_fetchDocument");const _PDFDocumentLoadingTask=class _PDFDocumentLoadingTask2{static{__name2(this,"_PDFDocumentLoadingTask")}constructor(){var _PDFDocumentLoadingTa,_PDFDocumentLoadingTa2;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(_PDFDocumentLoadingTask2,_PDFDocumentLoadingTask2,_docId,(_PDFDocumentLoadingTa=_classStaticPrivateFieldSpecGet(_PDFDocumentLoadingTask2,_PDFDocumentLoadingTask2,_docId),_PDFDocumentLoadingTa2=_PDFDocumentLoadingTa++,_PDFDocumentLoadingTa)),_PDFDocumentLoadingTa2}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var _this$_transport;this.destroyed=!0,await((_this$_transport=this._transport)===null||_this$_transport===void 0?void 0:_this$_transport.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};__name(_PDFDocumentLoadingTask,"PDFDocumentLoadingTask");let PDFDocumentLoadingTask=_PDFDocumentLoadingTask;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:!0,value:0};const _PDFDataRangeTransport=class{static{__name2(this,"_PDFDataRangeTransport")}constructor(length,initialData){let progressiveDone=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,contentDispositionFilename=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=length,this.initialData=initialData,this.progressiveDone=progressiveDone,this.contentDispositionFilename=contentDispositionFilename,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(listener){this._rangeListeners.push(listener)}addProgressListener(listener){this._progressListeners.push(listener)}addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener)}addProgressiveDoneListener(listener){this._progressiveDoneListeners.push(listener)}onDataRange(begin,chunk){for(const listener of this._rangeListeners)listener(begin,chunk)}onDataProgress(loaded,total){this._readyCapability.promise.then(()=>{for(const listener of this._progressListeners)listener(loaded,total)})}onDataProgressiveRead(chunk){this._readyCapability.promise.then(()=>{for(const listener of this._progressiveReadListeners)listener(chunk)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const listener of this._progressiveDoneListeners)listener()})}transportReady(){this._readyCapability.resolve()}requestDataRange(begin,end){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};__name(_PDFDataRangeTransport,"PDFDataRangeTransport");let PDFDataRangeTransport=_PDFDataRangeTransport;exports.PDFDataRangeTransport=PDFDataRangeTransport;const _PDFDocumentProxy=class{static{__name2(this,"_PDFDocumentProxy")}constructor(pdfInfo,transport){this._pdfInfo=pdfInfo,this._transport=transport,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(pageNumber){return this._transport.getPage(pageNumber)}getPageIndex(ref){return this._transport.getPageIndex(ref)}getDestinations(){return this._transport.getDestinations()}getDestination(id){return this._transport.getDestination(id)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let keepLoadedFonts=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(keepLoadedFonts||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}};__name(_PDFDocumentProxy,"PDFDocumentProxy");let PDFDocumentProxy=_PDFDocumentProxy;exports.PDFDocumentProxy=PDFDocumentProxy;const _PDFPageProxy=class{static{__name2(this,"_PDFPageProxy")}constructor(pageIndex,pageInfo,transport,ownerDocument){let pdfBug=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;this._pageIndex=pageIndex,this._pageInfo=pageInfo,this._ownerDocument=ownerDocument,this._transport=transport,this._stats=pdfBug?new _display_utils.StatTimer:null,this._pdfBug=pdfBug,this.commonObjs=transport.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale,rotation=this.rotate,offsetX=0,offsetY=0,dontFlip=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale,rotation,offsetX,offsetY,dontFlip})}getAnnotations(){let{intent="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const intentArgs=this._transport.getRenderingIntent(intent);let promise=this._annotationPromises.get(intentArgs.cacheKey);return promise||(promise=this._transport.getAnnotations(this._pageIndex,intentArgs.renderingIntent),this._annotationPromises.set(intentArgs.cacheKey,promise),promise=promise.then(annotations=>{for(const annotation of annotations)annotation.titleObj!==void 0&&Object.defineProperty(annotation,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),annotation.titleObj.str}}),annotation.contentsObj!==void 0&&Object.defineProperty(annotation,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),annotation.contentsObj.str}});return annotations})),promise}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var _this$_transport$_htm;return((_this$_transport$_htm=this._transport._htmlForXfa)===null||_this$_transport$_htm===void 0?void 0:_this$_transport$_htm.children[this._pageIndex])||null}render(_ref2){var _arguments$,_arguments$2,_intentState;let{canvasContext,viewport,intent="display",annotationMode=_util.AnnotationMode.ENABLE,transform=null,imageLayer=null,canvasFactory=null,background=null,optionalContentConfigPromise=null,annotationCanvasMap=null,pageColors=null,printAnnotationStorage=null}=_ref2;((_arguments$=arguments[0])===null||_arguments$===void 0?void 0:_arguments$.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&annotationMode===_util.AnnotationMode.ENABLE&&(annotationMode=_util.AnnotationMode.ENABLE_FORMS)),((_arguments$2=arguments[0])===null||_arguments$2===void 0?void 0:_arguments$2.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&annotationMode===_util.AnnotationMode.ENABLE&&(annotationMode=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage);this.pendingCleanup=!1,optionalContentConfigPromise||(optionalContentConfigPromise=this._transport.getOptionalContentConfig());let intentState=this._intentStates.get(intentArgs.cacheKey);intentState||(intentState=Object.create(null),this._intentStates.set(intentArgs.cacheKey,intentState)),intentState.streamReaderCancelTimeout&&(clearTimeout(intentState.streamReaderCancelTimeout),intentState.streamReaderCancelTimeout=null);const canvasFactoryInstance=canvasFactory||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),intentPrint=!!(intentArgs.renderingIntent&_util.RenderingIntentFlag.PRINT);intentState.displayReadyCapability||(intentState.displayReadyCapability=(0,_util.createPromiseCapability)(),intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(intentArgs));const complete=__name(error=>{intentState.renderTasks.delete(internalRenderTask),(this.cleanupAfterRender||intentPrint)&&(this.pendingCleanup=!0),this._tryCleanup(),error?(internalRenderTask.capability.reject(error),this._abortOperatorList({intentState,reason:error instanceof Error?error:new Error(error)})):internalRenderTask.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},"complete"),internalRenderTask=new InternalRenderTask({callback:complete,params:{canvasContext,viewport,transform,imageLayer,background},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap,operatorList:intentState.operatorList,pageIndex:this._pageIndex,canvasFactory:canvasFactoryInstance,useRequestAnimationFrame:!intentPrint,pdfBug:this._pdfBug,pageColors});((_intentState=intentState).renderTasks||(_intentState.renderTasks=new Set)).add(internalRenderTask);const renderTask=internalRenderTask.task;return Promise.all([intentState.displayReadyCapability.promise,optionalContentConfigPromise]).then(_ref3=>{let[transparency,optionalContentConfig]=_ref3;if(this.pendingCleanup){complete();return}this._stats&&this._stats.time("Rendering"),internalRenderTask.initializeGraphics({transparency,optionalContentConfig}),internalRenderTask.operatorListChanged()}).catch(complete),renderTask}getOperatorList(){let{intent="display",annotationMode=_util.AnnotationMode.ENABLE,printAnnotationStorage=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function operatorListChanged(){intentState.operatorList.lastChunk&&(intentState.opListReadCapability.resolve(intentState.operatorList),intentState.renderTasks.delete(opListTask))}__name2(operatorListChanged,"operatorListChanged"),__name(operatorListChanged,"operatorListChanged");const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage,!0);let intentState=this._intentStates.get(intentArgs.cacheKey);intentState||(intentState=Object.create(null),this._intentStates.set(intentArgs.cacheKey,intentState));let opListTask;if(!intentState.opListReadCapability){var _intentState2;opListTask=Object.create(null),opListTask.operatorListChanged=operatorListChanged,intentState.opListReadCapability=(0,_util.createPromiseCapability)(),((_intentState2=intentState).renderTasks||(_intentState2.renderTasks=new Set)).add(opListTask),intentState.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(intentArgs)}return intentState.opListReadCapability.promise}streamTextContent(){let{disableCombineTextItems=!1,includeMarkedContent=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const TEXT_CONTENT_CHUNK_SIZE=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:disableCombineTextItems!==!0,includeMarkedContent:includeMarkedContent===!0},{highWaterMark:TEXT_CONTENT_CHUNK_SIZE,size(textContent){return textContent.items.length}})}getTextContent(){let params=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(xfa=>_xfa_text.XfaText.textContent(xfa));const readableStream=this.streamTextContent(params);return new Promise(function(resolve,reject){function pump(){reader.read().then(function(_ref4){let{value,done}=_ref4;if(done){resolve(textContent);return}Object.assign(textContent.styles,value.styles),textContent.items.push(...value.items),pump()},reject)}__name2(pump,"pump"),__name(pump,"pump");const reader=readableStream.getReader(),textContent={items:[],styles:Object.create(null)};pump()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const waitOn=[];for(const intentState of this._intentStates.values())if(this._abortOperatorList({intentState,reason:new Error("Page was destroyed."),force:!0}),!intentState.opListReadCapability)for(const internalRenderTask of intentState.renderTasks)waitOn.push(internalRenderTask.completed),internalRenderTask.cancel();this.objs.clear();for(const bitmap of this._bitmaps)bitmap.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(waitOn)}cleanup(){let resetStats=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.pendingCleanup=!0,this._tryCleanup(resetStats)}_tryCleanup(){let resetStats=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.pendingCleanup)return!1;for(const{renderTasks,operatorList}of this._intentStates.values())if(renderTasks.size>0||!operatorList.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,resetStats&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const bitmap of this._bitmaps)bitmap.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(transparency,cacheKey){const intentState=this._intentStates.get(cacheKey);intentState&&(this._stats&&this._stats.timeEnd("Page Request"),intentState.displayReadyCapability&&intentState.displayReadyCapability.resolve(transparency))}_renderPageChunk(operatorListChunk,intentState){for(let i=0,ii=operatorListChunk.length;i<ii;i++)intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]),intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);intentState.operatorList.lastChunk=operatorListChunk.lastChunk,intentState.operatorList.separateAnnots=operatorListChunk.separateAnnots;for(const internalRenderTask of intentState.renderTasks)internalRenderTask.operatorListChanged();operatorListChunk.lastChunk&&this._tryCleanup()}_pumpOperatorList(_ref5){let{renderingIntent,cacheKey,annotationStorageMap}=_ref5;const reader=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:renderingIntent,cacheKey,annotationStorage:annotationStorageMap}).getReader(),intentState=this._intentStates.get(cacheKey);intentState.streamReader=reader;const pump=__name(()=>{reader.read().then(_ref6=>{let{value,done}=_ref6;if(done){intentState.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(value,intentState),pump())},reason=>{if(intentState.streamReader=null,!this._transport.destroyed){if(intentState.operatorList){intentState.operatorList.lastChunk=!0;for(const internalRenderTask of intentState.renderTasks)internalRenderTask.operatorListChanged();this._tryCleanup()}if(intentState.displayReadyCapability)intentState.displayReadyCapability.reject(reason);else if(intentState.opListReadCapability)intentState.opListReadCapability.reject(reason);else throw reason}})},"pump");pump()}_abortOperatorList(_ref7){let{intentState,reason,force=!1}=_ref7;if(intentState.streamReader){if(!force){if(intentState.renderTasks.size>0)return;if(reason instanceof _display_utils.RenderingCancelledException){intentState.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState,reason,force:!0}),intentState.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(intentState.streamReader.cancel(new _util.AbortException(reason.message)).catch(()=>{}),intentState.streamReader=null,!this._transport.destroyed){for(const[curCacheKey,curIntentState]of this._intentStates)if(curIntentState===intentState){this._intentStates.delete(curCacheKey);break}this.cleanup()}}}get stats(){return this._stats}};__name(_PDFPageProxy,"PDFPageProxy");let PDFPageProxy=_PDFPageProxy;exports.PDFPageProxy=PDFPageProxy;const _LoopbackPort=class{static{__name2(this,"_LoopbackPort")}constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(obj,transfers){const event={data:structuredClone(obj,transfers)};this._deferred.then(()=>{for(const listener of this._listeners)listener.call(this,event)})}addEventListener(name,listener){this._listeners.push(listener)}removeEventListener(name,listener){const i=this._listeners.indexOf(listener);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}};__name(_LoopbackPort,"LoopbackPort");let LoopbackPort=_LoopbackPort;exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){var _document,_document$currentScri;const pdfjsFilePath=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(baseUrl,otherUrl){let base;try{if(base=new URL(baseUrl),!base.origin||base.origin==="null")return!1}catch{return!1}const other=new URL(otherUrl,base);return base.origin===other.origin},PDFWorkerUtil.createCDNWrapper=function(url){const wrapper=`importScripts("${url}");`;return URL.createObjectURL(new Blob([wrapper]))}}const _PDFWorker=class __PDFWorker{static{__name2(this,"_PDFWorker")}constructor(){let{name=null,port=null,verbosity=(0,_util.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(port&&_classStaticPrivateFieldSpecGet(__PDFWorker,__PDFWorker,_workerPorts).has(port))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=name,this.destroyed=!1,this.verbosity=verbosity,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,port){_classStaticPrivateFieldSpecGet(__PDFWorker,__PDFWorker,_workerPorts).set(port,this),this._initializeFromPort(port);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(port){this._port=port,this._messageHandler=new _message_handler.MessageHandler("main","worker",port),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!__PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc}=__PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,workerSrc)||(workerSrc=PDFWorkerUtil.createCDNWrapper(new URL(workerSrc,window.location).href));const worker2=new Worker(workerSrc),messageHandler=new _message_handler.MessageHandler("main","worker",worker2),terminateEarly=__name(()=>{worker2.removeEventListener("error",onWorkerError),messageHandler.destroy(),worker2.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},"terminateEarly"),onWorkerError=__name(()=>{this._webWorker||terminateEarly()},"onWorkerError");worker2.addEventListener("error",onWorkerError),messageHandler.on("test",data=>{if(worker2.removeEventListener("error",onWorkerError),this.destroyed){terminateEarly();return}data?(this._messageHandler=messageHandler,this._port=worker2,this._webWorker=worker2,this._readyCapability.resolve(),messageHandler.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),messageHandler.destroy(),worker2.terminate())}),messageHandler.on("ready",data=>{if(worker2.removeEventListener("error",onWorkerError),this.destroyed){terminateEarly();return}try{sendTest()}catch{this._setupFakeWorker()}});const sendTest=__name(()=>{const testObj=new Uint8Array;messageHandler.send("test",testObj,[testObj.buffer])},"sendTest");sendTest();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),__PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const port=new LoopbackPort;this._port=port;const id=`fake${PDFWorkerUtil.fakeWorkerId++}`,workerHandler=new _message_handler.MessageHandler(id+"_worker",id,port);WorkerMessageHandler.setup(workerHandler,port);const messageHandler=new _message_handler.MessageHandler(id,id+"_worker",port);this._messageHandler=messageHandler,this._readyCapability.resolve(),messageHandler.send("configure",{verbosity:this.verbosity})}).catch(reason=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${reason.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(__PDFWorker,__PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(params){if(!(params!=null&&params.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,__PDFWorker,_workerPorts).has(params.port)?_classStaticPrivateFieldSpecGet(this,__PDFWorker,_workerPorts).get(params.port):new __PDFWorker(params)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var _globalThis$pdfjsWork;return((_globalThis$pdfjsWork=globalThis.pdfjsWorker)===null||_globalThis$pdfjsWork===void 0?void 0:_globalThis$pdfjsWork.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=__name(async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler},"loader");return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};__name(_PDFWorker,"PDFWorker");let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;var _workerPorts={writable:!0,value:new WeakMap};PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;const _WorkerTransport=class{static{__name2(this,"_WorkerTransport")}constructor(messageHandler,loadingTask,networkStream,params){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=messageHandler,this.loadingTask=loadingTask,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:loadingTask.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:params.ownerDocument,styleElement:params.styleElement}),this._params=params,params.useWorkerFetch||(this.CMapReaderFactory=new params.CMapReaderFactory({baseUrl:params.cMapUrl,isCompressed:params.cMapPacked}),this.StandardFontDataFactory=new params.StandardFontDataFactory({baseUrl:params.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=networkStream,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(intent){let annotationMode=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,printAnnotationStorage=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,isOpList=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,renderingIntent=_util.RenderingIntentFlag.DISPLAY,annotationMap=null;switch(intent){case"any":renderingIntent=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":renderingIntent=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${intent}`)}switch(annotationMode){case _util.AnnotationMode.DISABLE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,annotationMap=(renderingIntent&_util.RenderingIntentFlag.PRINT&&printAnnotationStorage instanceof _annotation_storage.PrintAnnotationStorage?printAnnotationStorage:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${annotationMode}`)}return isOpList&&(renderingIntent+=_util.RenderingIntentFlag.OPLIST),{renderingIntent,cacheKey:`${renderingIntent}_${_annotation_storage.AnnotationStorage.getHash(annotationMap)}`,annotationStorageMap:annotationMap}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const waitOn=[];for(const page of _classPrivateFieldGet(this,_pageCache).values())waitOn.push(page._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const terminated=this.messageHandler.sendWithPromise("Terminate",null);return waitOn.push(terminated),Promise.all(waitOn).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler,loadingTask}=this;messageHandler.on("GetReader",(data,sink)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=evt=>{this._lastProgress={loaded:evt.loaded,total:evt.total}},sink.onPull=()=>{this._fullReader.read().then(function(_ref8){let{value,done}=_ref8;if(done){sink.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(value),"GetReader - expected an ArrayBuffer."),sink.enqueue(new Uint8Array(value),1,[value])}).catch(reason=>{sink.error(reason)})},sink.onCancel=reason=>{this._fullReader.cancel(reason),sink.ready.catch(readyReason=>{if(!this.destroyed)throw readyReason})}}),messageHandler.on("ReaderHeadersReady",data=>{const headersCapability=(0,_util.createPromiseCapability)(),fullReader=this._fullReader;return fullReader.headersReady.then(()=>{if(!fullReader.isStreamingSupported||!fullReader.isRangeSupported){if(this._lastProgress){var _loadingTask$onProgre;(_loadingTask$onProgre=loadingTask.onProgress)===null||_loadingTask$onProgre===void 0||_loadingTask$onProgre.call(loadingTask,this._lastProgress)}fullReader.onProgress=evt=>{var _loadingTask$onProgre2;(_loadingTask$onProgre2=loadingTask.onProgress)===null||_loadingTask$onProgre2===void 0||_loadingTask$onProgre2.call(loadingTask,{loaded:evt.loaded,total:evt.total})}}headersCapability.resolve({isStreamingSupported:fullReader.isStreamingSupported,isRangeSupported:fullReader.isRangeSupported,contentLength:fullReader.contentLength})},headersCapability.reject),headersCapability.promise}),messageHandler.on("GetRangeReader",(data,sink)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const rangeReader=this._networkStream.getRangeReader(data.begin,data.end);if(!rangeReader){sink.close();return}sink.onPull=()=>{rangeReader.read().then(function(_ref9){let{value,done}=_ref9;if(done){sink.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(value),"GetRangeReader - expected an ArrayBuffer."),sink.enqueue(new Uint8Array(value),1,[value])}).catch(reason=>{sink.error(reason)})},sink.onCancel=reason=>{rangeReader.cancel(reason),sink.ready.catch(readyReason=>{if(!this.destroyed)throw readyReason})}}),messageHandler.on("GetDoc",_ref10=>{let{pdfInfo}=_ref10;this._numPages=pdfInfo.numPages,this._htmlForXfa=pdfInfo.htmlForXfa,delete pdfInfo.htmlForXfa,loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo,this))}),messageHandler.on("DocException",function(ex){let reason;switch(ex.name){case"PasswordException":reason=new _util.PasswordException(ex.message,ex.code);break;case"InvalidPDFException":reason=new _util.InvalidPDFException(ex.message);break;case"MissingPDFException":reason=new _util.MissingPDFException(ex.message);break;case"UnexpectedResponseException":reason=new _util.UnexpectedResponseException(ex.message,ex.status);break;case"UnknownErrorException":reason=new _util.UnknownErrorException(ex.message,ex.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}loadingTask._capability.reject(reason)}),messageHandler.on("PasswordRequest",exception=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),loadingTask.onPassword){const updatePassword=__name(password=>{password instanceof Error?this._passwordCapability.reject(password):this._passwordCapability.resolve({password})},"updatePassword");try{loadingTask.onPassword(updatePassword,exception.code)}catch(ex){this._passwordCapability.reject(ex)}}else this._passwordCapability.reject(new _util.PasswordException(exception.message,exception.code));return this._passwordCapability.promise}),messageHandler.on("DataLoaded",data=>{var _loadingTask$onProgre3;(_loadingTask$onProgre3=loadingTask.onProgress)===null||_loadingTask$onProgre3===void 0||_loadingTask$onProgre3.call(loadingTask,{loaded:data.length,total:data.length}),this.downloadInfoCapability.resolve(data)}),messageHandler.on("StartRenderPage",data=>{if(this.destroyed)return;_classPrivateFieldGet(this,_pageCache).get(data.pageIndex)._startRenderPage(data.transparency,data.cacheKey)}),messageHandler.on("commonobj",_ref11=>{var _globalThis$FontInspe;let[id,type,exportedData]=_ref11;if(!this.destroyed&&!this.commonObjs.has(id))switch(type){case"Font":const params=this._params;if("error"in exportedData){const exportedError=exportedData.error;(0,_util.warn)(`Error during font loading: ${exportedError}`),this.commonObjs.resolve(id,exportedError);break}let fontRegistry=null;params.pdfBug&&(_globalThis$FontInspe=globalThis.FontInspector)!==null&&_globalThis$FontInspe!==void 0&&_globalThis$FontInspe.enabled&&(fontRegistry={registerFont(font2,url){globalThis.FontInspector.fontAdded(font2,url)}});const font=new _font_loader.FontFaceObject(exportedData,{isEvalSupported:params.isEvalSupported,disableFontFace:params.disableFontFace,ignoreErrors:params.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry});this.fontLoader.bind(font).catch(reason=>messageHandler.sendWithPromise("FontFallback",{id})).finally(()=>{!params.fontExtraProperties&&font.data&&(font.data=null),this.commonObjs.resolve(id,font)});break;case"FontPath":case"Image":this.commonObjs.resolve(id,exportedData);break;default:throw new Error(`Got unknown common object type ${type}`)}}),messageHandler.on("obj",_ref12=>{let[id,pageIndex,type,imageData]=_ref12;if(this.destroyed)return;const pageProxy=_classPrivateFieldGet(this,_pageCache).get(pageIndex);if(!pageProxy.objs.has(id))switch(type){case"Image":pageProxy.objs.resolve(id,imageData);const MAX_IMAGE_SIZE_TO_STORE=8e6;if(imageData){let length;if(imageData.bitmap){const{bitmap,width,height}=imageData;length=width*height*4,pageProxy._bitmaps.add(bitmap)}else{var _imageData$data;length=((_imageData$data=imageData.data)===null||_imageData$data===void 0?void 0:_imageData$data.length)||0}length>MAX_IMAGE_SIZE_TO_STORE&&(pageProxy.cleanupAfterRender=!0)}break;case"Pattern":pageProxy.objs.resolve(id,imageData);break;default:throw new Error(`Got unknown object type ${type}`)}}),messageHandler.on("DocProgress",data=>{var _loadingTask$onProgre4;this.destroyed||(_loadingTask$onProgre4=loadingTask.onProgress)===null||_loadingTask$onProgre4===void 0||_loadingTask$onProgre4.call(loadingTask,{loaded:data.loaded,total:data.total})}),messageHandler.on("DocStats",data=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(data.streamTypes),fontTypes:Object.freeze(data.fontTypes)}))}),messageHandler.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),messageHandler.on("FetchBuiltInCMap",data=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(data):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),messageHandler.on("FetchStandardFontData",data=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(data):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature(_ref13){var _this$loadingTask$onU,_this$loadingTask;let{featureId}=_ref13;this.destroyed||(_this$loadingTask$onU=(_this$loadingTask=this.loadingTask).onUnsupportedFeature)===null||_this$loadingTask$onU===void 0||_this$loadingTask$onU.call(_this$loadingTask,featureId)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(pageNumber){if(!Number.isInteger(pageNumber)||pageNumber<=0||pageNumber>this._numPages)return Promise.reject(new Error("Invalid page request."));const pageIndex=pageNumber-1,cachedPromise=_classPrivateFieldGet(this,_pagePromises).get(pageIndex);if(cachedPromise)return cachedPromise;const promise=this.messageHandler.sendWithPromise("GetPage",{pageIndex}).then(pageInfo=>{if(this.destroyed)throw new Error("Transport destroyed");const page=new PDFPageProxy(pageIndex,pageInfo,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(pageIndex,page),page});return _classPrivateFieldGet(this,_pagePromises).set(pageIndex,promise),promise}getPageIndex(ref){return typeof ref!="object"||ref===null||!Number.isInteger(ref.num)||ref.num<0||!Number.isInteger(ref.gen)||ref.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:ref.num,gen:ref.gen})}getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex,intent})}saveDocument(){var _this$_fullReader$fil,_this$_fullReader;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(_this$_fullReader$fil=(_this$_fullReader=this._fullReader)===null||_this$_fullReader===void 0?void 0:_this$_fullReader.filename)!==null&&_this$_fullReader$fil!==void 0?_this$_fullReader$fil:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(id){return typeof id!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(pageIndex){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex})}getStructTree(pageIndex){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(results=>new _optional_content_config.OptionalContentConfig(results))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(results=>{var _this$_fullReader$fil2,_this$_fullReader2,_this$_fullReader$con,_this$_fullReader3;return{info:results[0],metadata:results[1]?new _metadata.Metadata(results[1]):null,contentDispositionFilename:(_this$_fullReader$fil2=(_this$_fullReader2=this._fullReader)===null||_this$_fullReader2===void 0?void 0:_this$_fullReader2.filename)!==null&&_this$_fullReader$fil2!==void 0?_this$_fullReader$fil2:null,contentLength:(_this$_fullReader$con=(_this$_fullReader3=this._fullReader)===null||_this$_fullReader3===void 0?void 0:_this$_fullReader3.contentLength)!==null&&_this$_fullReader$con!==void 0?_this$_fullReader$con:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let keepLoadedFonts=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const page of _classPrivateFieldGet(this,_pageCache).values())if(!page.cleanup())throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);this.commonObjs.clear(),keepLoadedFonts||this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const params=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:params.disableAutoFetch,enableXfa:params.enableXfa})}};__name(_WorkerTransport,"WorkerTransport");let WorkerTransport=_WorkerTransport;var _objs=new WeakMap,_ensureObj=new WeakSet;const _PDFObjects=class{static{__name2(this,"_PDFObjects")}constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(objId){let callback=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(callback){const obj2=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,objId);return obj2.capability.promise.then(()=>callback(obj2.data)),null}const obj=_classPrivateFieldGet(this,_objs)[objId];if(!(obj!=null&&obj.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${objId}.`);return obj.data}has(objId){const obj=_classPrivateFieldGet(this,_objs)[objId];return obj?.capability.settled||!1}resolve(objId){let data=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const obj=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,objId);obj.data=data,obj.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}};__name(_PDFObjects,"PDFObjects");let PDFObjects=_PDFObjects;function _ensureObj2(objId){const obj=_classPrivateFieldGet(this,_objs)[objId];return obj||(_classPrivateFieldGet(this,_objs)[objId]={capability:(0,_util.createPromiseCapability)(),data:null})}__name2(_ensureObj2,"_ensureObj2"),__name(_ensureObj2,"_ensureObj2");var _internalRenderTask=new WeakMap;const _RenderTask=class{static{__name2(this,"_RenderTask")}constructor(internalRenderTask){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,internalRenderTask),this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}get separateAnnots(){const{separateAnnots}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!separateAnnots)return!1;const{annotationCanvasMap}=_classPrivateFieldGet(this,_internalRenderTask);return separateAnnots.form||separateAnnots.canvas&&annotationCanvasMap?.size>0}};__name(_RenderTask,"RenderTask");let RenderTask=_RenderTask;exports.RenderTask=RenderTask;const _InternalRenderTask=class _InternalRenderTask2{static{__name2(this,"_InternalRenderTask")}constructor(_ref14){let{callback,params,objs,commonObjs,annotationCanvasMap,operatorList,pageIndex,canvasFactory,useRequestAnimationFrame=!1,pdfBug=!1,pageColors=null}=_ref14;this.callback=callback,this.params=params,this.objs=objs,this.commonObjs=commonObjs,this.annotationCanvasMap=annotationCanvasMap,this.operatorListIdx=null,this.operatorList=operatorList,this._pageIndex=pageIndex,this.canvasFactory=canvasFactory,this._pdfBug=pdfBug,this.pageColors=pageColors,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=useRequestAnimationFrame===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=params.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(_ref15){var _globalThis$StepperMa;let{transparency=!1,optionalContentConfig}=_ref15;if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(_InternalRenderTask2,_InternalRenderTask2,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(_InternalRenderTask2,_InternalRenderTask2,_canvasInUse).add(this._canvas)}this._pdfBug&&(_globalThis$StepperMa=globalThis.StepperManager)!==null&&_globalThis$StepperMa!==void 0&&_globalThis$StepperMa.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext,viewport,transform,imageLayer,background}=this.params;this.gfx=new _canvas.CanvasGraphics(canvasContext,this.commonObjs,this.objs,this.canvasFactory,imageLayer,optionalContentConfig,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform,viewport,transparency,background}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(){let error=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(_InternalRenderTask2,_InternalRenderTask2,_canvasInUse).delete(this._canvas),this.callback(error||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(_InternalRenderTask2,_InternalRenderTask2,_canvasInUse).delete(this._canvas),this.callback())))}};__name(_InternalRenderTask,"InternalRenderTask");let InternalRenderTask=_InternalRenderTask;var _canvasInUse={writable:!0,value:new WeakSet};const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PrintAnnotationStorage=exports2.AnnotationStorage=void 0;var _util2=__w_pdfjs_require__2(1),_editor=__w_pdfjs_require__2(131),_murmurhash=__w_pdfjs_require__2(135);function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");var _setModified=new WeakSet;const _AnnotationStorage=class{static{__name2(this,"_AnnotationStorage")}constructor(){_classPrivateMethodInitSpec2(this,_setModified),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(key,defaultValue){const value=this._storage.get(key);return value===void 0?defaultValue:Object.assign(defaultValue,value)}getRawValue(key){return this._storage.get(key)}remove(key){if(this._storage.delete(key),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const value of this._storage.values())if(value instanceof _editor.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(key,value){const obj=this._storage.get(key);let modified=!1;if(obj!==void 0)for(const[entry,val]of Object.entries(value))obj[entry]!==val&&(modified=!0,obj[entry]=val);else modified=!0,this._storage.set(key,value);modified&&_classPrivateMethodGet2(this,_setModified,_setModified2).call(this),value instanceof _editor.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(value.constructor._type)}has(key){return this._storage.has(key)}getAll(){return this._storage.size>0?(0,_util2.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(this._storage.size===0)return null;const clone=new Map;for(const[key,val]of this._storage){const serialized=val instanceof _editor.AnnotationEditor?val.serialize():val;serialized&&clone.set(key,serialized)}return clone}static getHash(map){if(!map)return"";const hash=new _murmurhash.MurmurHash3_64;for(const[key,val]of map)hash.update(`${key}:${JSON.stringify(val)}`);return hash.hexdigest()}};__name(_AnnotationStorage,"AnnotationStorage");let AnnotationStorage=_AnnotationStorage;exports2.AnnotationStorage=AnnotationStorage;function _setModified2(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}__name2(_setModified2,"_setModified2"),__name(_setModified2,"_setModified2");var _serializable=new WeakMap;const _PrintAnnotationStorage=class extends AnnotationStorage{static{__name2(this,"_PrintAnnotationStorage")}constructor(parent){super(),_classPrivateFieldInitSpec2(this,_serializable,{writable:!0,value:null}),_classPrivateFieldSet2(this,_serializable,structuredClone(parent.serializable))}get print(){(0,_util2.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return _classPrivateFieldGet2(this,_serializable)}};__name(_PrintAnnotationStorage,"PrintAnnotationStorage");let PrintAnnotationStorage=_PrintAnnotationStorage;exports2.PrintAnnotationStorage=PrintAnnotationStorage},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.AnnotationEditor=void 0;var _tools=__w_pdfjs_require__2(132),_util2=__w_pdfjs_require__2(1);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name2(_defineProperty,"_defineProperty"),__name(_defineProperty,"_defineProperty");function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");var _boundFocusin=new WeakMap,_boundFocusout=new WeakMap,_hasBeenSelected=new WeakMap,_isEditing=new WeakMap,_isInEditMode=new WeakMap,_zIndex=new WeakMap;const _AnnotationEditor=class _AnnotationEditor2{static{__name2(this,"_AnnotationEditor")}constructor(parameters){_classPrivateFieldInitSpec2(this,_boundFocusin,{writable:!0,value:this.focusin.bind(this)}),_classPrivateFieldInitSpec2(this,_boundFocusout,{writable:!0,value:this.focusout.bind(this)}),_classPrivateFieldInitSpec2(this,_hasBeenSelected,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_isEditing,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_isInEditMode,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_zIndex,{writable:!0,value:_AnnotationEditor2._zIndex++}),this.constructor===_AnnotationEditor2&&(0,_util2.unreachable)("Cannot initialize AnnotationEditor."),this.parent=parameters.parent,this.id=parameters.id,this.width=this.height=null,this.pageIndex=parameters.parent.pageIndex,this.name=parameters.name,this.div=null;const[width,height]=this.parent.viewportBaseDimensions;this.x=parameters.x/width,this.y=parameters.y/height,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,_util2.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=_classPrivateFieldGet2(this,_zIndex)}focusin(event){_classPrivateFieldGet2(this,_hasBeenSelected)?_classPrivateFieldSet2(this,_hasBeenSelected,!1):this.parent.setSelected(this)}focusout(event){if(!this.isAttachedToDOM)return;const target=event.relatedTarget;target!=null&&target.closest(`#${this.id}`)||(event.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(event){const rect=this.parent.div.getBoundingClientRect();this.startX=event.clientX-rect.x,this.startY=event.clientY-rect.y,event.dataTransfer.setData("text/plain",this.id),event.dataTransfer.effectAllowed="move"}setAt(x,y,tx,ty){const[width,height]=this.parent.viewportBaseDimensions;[tx,ty]=this.screenToPageTranslation(tx,ty),this.x=(x+tx)/width,this.y=(y+ty)/height,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(x,y){const[width,height]=this.parent.viewportBaseDimensions;[x,y]=this.screenToPageTranslation(x,y),this.x+=x/width,this.y+=y/height,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(x,y){const{rotation}=this.parent.viewport;switch(rotation){case 90:return[y,-x];case 180:return[-x,-y];case 270:return[-y,x];default:return[x,y]}}setDims(width,height){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*width/parentWidth}%`,this.div.style.height=`${100*height/parentHeight}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",_classPrivateFieldGet2(this,_boundFocusin)),this.div.addEventListener("focusout",_classPrivateFieldGet2(this,_boundFocusout));const[tx,ty]=this.getInitialTranslation();return this.translate(tx,ty),(0,_tools.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(event){const isMac=_tools.KeyboardManager.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){event.preventDefault();return}event.ctrlKey&&!isMac||event.shiftKey||event.metaKey&&isMac?this.parent.toggleSelected(this):this.parent.setSelected(this),_classPrivateFieldSet2(this,_hasBeenSelected,!0)}getRect(tx,ty){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions,[pageWidth,pageHeight]=this.parent.pageDimensions,shiftX=pageWidth*tx/parentWidth,shiftY=pageHeight*ty/parentHeight,x=this.x*pageWidth,y=this.y*pageHeight,width=this.width*pageWidth,height=this.height*pageHeight;switch(this.rotation){case 0:return[x+shiftX,pageHeight-y-shiftY-height,x+shiftX+width,pageHeight-y-shiftY];case 90:return[x+shiftY,pageHeight-y+shiftX,x+shiftY+height,pageHeight-y+shiftX+width];case 180:return[x-shiftX-width,pageHeight-y+shiftY,x-shiftX,pageHeight-y+shiftY+height];case 270:return[x-shiftY-height,pageHeight-y-shiftX-width,x-shiftY,pageHeight-y-shiftX];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(rect,pageHeight){const[x1,y1,x2,y2]=rect,width=x2-x1,height=y2-y1;switch(this.rotation){case 0:return[x1,pageHeight-y2,width,height];case 90:return[x1,pageHeight-y1,height,width];case 180:return[x2,pageHeight-y1,width,height];case 270:return[x2,pageHeight-y2,height,width];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_classPrivateFieldSet2(this,_isInEditMode,!0)}disableEditMode(){_classPrivateFieldSet2(this,_isInEditMode,!1)}isInEditMode(){return _classPrivateFieldGet2(this,_isInEditMode)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var _this$div;(_this$div=this.div)===null||_this$div===void 0||_this$div.addEventListener("focusin",_classPrivateFieldGet2(this,_boundFocusin))}serialize(){(0,_util2.unreachable)("An editor must be serializable")}static deserialize(data,parent){const editor=new this.prototype.constructor({parent,id:parent.getNextId()});editor.rotation=data.rotation;const[pageWidth,pageHeight]=parent.pageDimensions,[x,y,width,height]=editor.getRectInCurrentCoords(data.rect,pageHeight);return editor.x=x/pageWidth,editor.y=y/pageHeight,editor.width=width/pageWidth,editor.height=height/pageHeight,editor}remove(){this.div.removeEventListener("focusin",_classPrivateFieldGet2(this,_boundFocusin)),this.div.removeEventListener("focusout",_classPrivateFieldGet2(this,_boundFocusout)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var _this$div2;(_this$div2=this.div)===null||_this$div2===void 0||_this$div2.classList.add("selectedEditor")}unselect(){var _this$div3;(_this$div3=this.div)===null||_this$div3===void 0||_this$div3.classList.remove("selectedEditor")}updateParams(type,value){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return _classPrivateFieldGet2(this,_isEditing)}set isEditing(value){_classPrivateFieldSet2(this,_isEditing,value),value?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};__name(_AnnotationEditor,"AnnotationEditor");let AnnotationEditor=_AnnotationEditor;exports2.AnnotationEditor=AnnotationEditor,_defineProperty(AnnotationEditor,"_colorManager",new _tools.ColorManager),_defineProperty(AnnotationEditor,"_zIndex",1)},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.KeyboardManager=exports2.CommandManager=exports2.ColorManager=exports2.AnnotationEditorUIManager=void 0,exports2.bindEvents=bindEvents,exports2.opacityToHex=opacityToHex;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(133);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name2(_defineProperty,"_defineProperty"),__name(_defineProperty,"_defineProperty");function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");function bindEvents(obj,element,names){for(const name of names)element.addEventListener(name,obj[name].bind(obj))}__name2(bindEvents,"bindEvents"),__name(bindEvents,"bindEvents");function opacityToHex(opacity){return Math.round(Math.min(255,Math.max(1,255*opacity))).toString(16).padStart(2,"0")}__name2(opacityToHex,"opacityToHex"),__name(opacityToHex,"opacityToHex");var _id=new WeakMap;const _IdManager=class{static{__name2(this,"_IdManager")}constructor(){_classPrivateFieldInitSpec2(this,_id,{writable:!0,value:0})}getId(){var _this$id,_this$id2;return`${_util2.AnnotationEditorPrefix}${_classPrivateFieldSet2(this,_id,(_this$id=_classPrivateFieldGet2(this,_id),_this$id2=_this$id++,_this$id)),_this$id2}`}};__name(_IdManager,"IdManager");let IdManager=_IdManager;var _commands=new WeakMap,_locked=new WeakMap,_maxSize=new WeakMap,_position=new WeakMap;const _CommandManager=class{static{__name2(this,"_CommandManager")}constructor(){let maxSize=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;_classPrivateFieldInitSpec2(this,_commands,{writable:!0,value:[]}),_classPrivateFieldInitSpec2(this,_locked,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_maxSize,{writable:!0,value:void 0}),_classPrivateFieldInitSpec2(this,_position,{writable:!0,value:-1}),_classPrivateFieldSet2(this,_maxSize,maxSize)}add(_ref){let{cmd,undo,mustExec,type=NaN,overwriteIfSameType=!1,keepUndo=!1}=_ref;if(mustExec&&cmd(),_classPrivateFieldGet2(this,_locked))return;const save={cmd,undo,type};if(_classPrivateFieldGet2(this,_position)===-1){_classPrivateFieldGet2(this,_commands).length>0&&(_classPrivateFieldGet2(this,_commands).length=0),_classPrivateFieldSet2(this,_position,0),_classPrivateFieldGet2(this,_commands).push(save);return}if(overwriteIfSameType&&_classPrivateFieldGet2(this,_commands)[_classPrivateFieldGet2(this,_position)].type===type){keepUndo&&(save.undo=_classPrivateFieldGet2(this,_commands)[_classPrivateFieldGet2(this,_position)].undo),_classPrivateFieldGet2(this,_commands)[_classPrivateFieldGet2(this,_position)]=save;return}const next=_classPrivateFieldGet2(this,_position)+1;next===_classPrivateFieldGet2(this,_maxSize)?_classPrivateFieldGet2(this,_commands).splice(0,1):(_classPrivateFieldSet2(this,_position,next),next<_classPrivateFieldGet2(this,_commands).length&&_classPrivateFieldGet2(this,_commands).splice(next)),_classPrivateFieldGet2(this,_commands).push(save)}undo(){_classPrivateFieldGet2(this,_position)!==-1&&(_classPrivateFieldSet2(this,_locked,!0),_classPrivateFieldGet2(this,_commands)[_classPrivateFieldGet2(this,_position)].undo(),_classPrivateFieldSet2(this,_locked,!1),_classPrivateFieldSet2(this,_position,_classPrivateFieldGet2(this,_position)-1))}redo(){_classPrivateFieldGet2(this,_position)<_classPrivateFieldGet2(this,_commands).length-1&&(_classPrivateFieldSet2(this,_position,_classPrivateFieldGet2(this,_position)+1),_classPrivateFieldSet2(this,_locked,!0),_classPrivateFieldGet2(this,_commands)[_classPrivateFieldGet2(this,_position)].cmd(),_classPrivateFieldSet2(this,_locked,!1))}hasSomethingToUndo(){return _classPrivateFieldGet2(this,_position)!==-1}hasSomethingToRedo(){return _classPrivateFieldGet2(this,_position)<_classPrivateFieldGet2(this,_commands).length-1}destroy(){_classPrivateFieldSet2(this,_commands,null)}};__name(_CommandManager,"CommandManager");let CommandManager=_CommandManager;exports2.CommandManager=CommandManager;var _serialize=new WeakSet;const _KeyboardManager=class _KeyboardManager2{static{__name2(this,"_KeyboardManager")}constructor(callbacks){_classPrivateMethodInitSpec2(this,_serialize),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const isMac=_KeyboardManager2.platform.isMac;for(const[keys,callback]of callbacks)for(const key of keys){const isMacKey=key.startsWith("mac+");isMac&&isMacKey?(this.callbacks.set(key.slice(4),callback),this.allKeys.add(key.split("+").at(-1))):!isMac&&!isMacKey&&(this.callbacks.set(key,callback),this.allKeys.add(key.split("+").at(-1)))}}static get platform(){const platform=typeof navigator<"u"?navigator.platform:"";return(0,_util2.shadow)(this,"platform",{isWin:platform.includes("Win"),isMac:platform.includes("Mac")})}exec(self2,event){if(!this.allKeys.has(event.key))return;const callback=this.callbacks.get(_classPrivateMethodGet2(this,_serialize,_serialize2).call(this,event));callback&&(callback.bind(self2)(),event.stopPropagation(),event.preventDefault())}};__name(_KeyboardManager,"KeyboardManager");let KeyboardManager=_KeyboardManager;exports2.KeyboardManager=KeyboardManager;function _serialize2(event){event.altKey&&this.buffer.push("alt"),event.ctrlKey&&this.buffer.push("ctrl"),event.metaKey&&this.buffer.push("meta"),event.shiftKey&&this.buffer.push("shift"),this.buffer.push(event.key);const str=this.buffer.join("+");return this.buffer.length=0,str}__name2(_serialize2,"_serialize2"),__name(_serialize2,"_serialize2");var _elements=new WeakMap;const _ClipboardManager=class{static{__name2(this,"_ClipboardManager")}constructor(){_classPrivateFieldInitSpec2(this,_elements,{writable:!0,value:null})}copy(element){element&&(Array.isArray(element)?_classPrivateFieldSet2(this,_elements,element.map(el=>el.serialize())):_classPrivateFieldSet2(this,_elements,[element.serialize()]),_classPrivateFieldSet2(this,_elements,_classPrivateFieldGet2(this,_elements).filter(el=>!!el)),_classPrivateFieldGet2(this,_elements).length===0&&_classPrivateFieldSet2(this,_elements,null))}paste(){return _classPrivateFieldGet2(this,_elements)}isEmpty(){return _classPrivateFieldGet2(this,_elements)===null}destroy(){_classPrivateFieldSet2(this,_elements,null)}};__name(_ClipboardManager,"ClipboardManager");let ClipboardManager=_ClipboardManager;const _ColorManager=class _ColorManager2{static{__name2(this,"_ColorManager")}get _colors(){const colors=new Map([["CanvasText",null],["Canvas",null]]);return(0,_display_utils2.getColorValues)(colors),(0,_util2.shadow)(this,"_colors",colors)}convert(color){const rgb=(0,_display_utils2.getRGB)(color);if(!window.matchMedia("(forced-colors: active)").matches)return rgb;for(const[name,RGB]of this._colors)if(RGB.every((x,i)=>x===rgb[i]))return _ColorManager2._colorsMapping.get(name);return rgb}getHexCode(name){const rgb=this._colors.get(name);return rgb?_util2.Util.makeHexColor(...rgb):name}};__name(_ColorManager,"ColorManager");let ColorManager=_ColorManager;exports2.ColorManager=ColorManager,_defineProperty(ColorManager,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var _activeEditor=new WeakMap,_allEditors=new WeakMap,_allLayers=new WeakMap,_clipboardManager=new WeakMap,_commandManager=new WeakMap,_currentPageIndex=new WeakMap,_editorTypes=new WeakMap,_eventBus=new WeakMap,_idManager=new WeakMap,_isEnabled=new WeakMap,_mode=new WeakMap,_selectedEditors=new WeakMap,_boundKeydown=new WeakMap,_boundOnEditingAction=new WeakMap,_boundOnPageChanging=new WeakMap,_previousStates=new WeakMap,_container=new WeakMap,_addKeyboardManager=new WeakSet,_removeKeyboardManager=new WeakSet,_dispatchUpdateStates=new WeakSet,_dispatchUpdateUI=new WeakSet,_enableAll=new WeakSet,_disableAll=new WeakSet,_addEditorToLayer=new WeakSet,_isEmpty=new WeakSet,_selectEditors=new WeakSet;const _AnnotationEditorUIManager=class _AnnotationEditorUIManager2{static{__name2(this,"_AnnotationEditorUIManager")}constructor(container,eventBus){_classPrivateMethodInitSpec2(this,_selectEditors),_classPrivateMethodInitSpec2(this,_isEmpty),_classPrivateMethodInitSpec2(this,_addEditorToLayer),_classPrivateMethodInitSpec2(this,_disableAll),_classPrivateMethodInitSpec2(this,_enableAll),_classPrivateMethodInitSpec2(this,_dispatchUpdateUI),_classPrivateMethodInitSpec2(this,_dispatchUpdateStates),_classPrivateMethodInitSpec2(this,_removeKeyboardManager),_classPrivateMethodInitSpec2(this,_addKeyboardManager),_classPrivateFieldInitSpec2(this,_activeEditor,{writable:!0,value:null}),_classPrivateFieldInitSpec2(this,_allEditors,{writable:!0,value:new Map}),_classPrivateFieldInitSpec2(this,_allLayers,{writable:!0,value:new Map}),_classPrivateFieldInitSpec2(this,_clipboardManager,{writable:!0,value:new ClipboardManager}),_classPrivateFieldInitSpec2(this,_commandManager,{writable:!0,value:new CommandManager}),_classPrivateFieldInitSpec2(this,_currentPageIndex,{writable:!0,value:0}),_classPrivateFieldInitSpec2(this,_editorTypes,{writable:!0,value:null}),_classPrivateFieldInitSpec2(this,_eventBus,{writable:!0,value:null}),_classPrivateFieldInitSpec2(this,_idManager,{writable:!0,value:new IdManager}),_classPrivateFieldInitSpec2(this,_isEnabled,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_mode,{writable:!0,value:_util2.AnnotationEditorType.NONE}),_classPrivateFieldInitSpec2(this,_selectedEditors,{writable:!0,value:new Set}),_classPrivateFieldInitSpec2(this,_boundKeydown,{writable:!0,value:this.keydown.bind(this)}),_classPrivateFieldInitSpec2(this,_boundOnEditingAction,{writable:!0,value:this.onEditingAction.bind(this)}),_classPrivateFieldInitSpec2(this,_boundOnPageChanging,{writable:!0,value:this.onPageChanging.bind(this)}),_classPrivateFieldInitSpec2(this,_previousStates,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),_classPrivateFieldInitSpec2(this,_container,{writable:!0,value:null}),_classPrivateFieldSet2(this,_container,container),_classPrivateFieldSet2(this,_eventBus,eventBus),_classPrivateFieldGet2(this,_eventBus)._on("editingaction",_classPrivateFieldGet2(this,_boundOnEditingAction)),_classPrivateFieldGet2(this,_eventBus)._on("pagechanging",_classPrivateFieldGet2(this,_boundOnPageChanging))}destroy(){_classPrivateMethodGet2(this,_removeKeyboardManager,_removeKeyboardManager2).call(this),_classPrivateFieldGet2(this,_eventBus)._off("editingaction",_classPrivateFieldGet2(this,_boundOnEditingAction)),_classPrivateFieldGet2(this,_eventBus)._off("pagechanging",_classPrivateFieldGet2(this,_boundOnPageChanging));for(const layer of _classPrivateFieldGet2(this,_allLayers).values())layer.destroy();_classPrivateFieldGet2(this,_allLayers).clear(),_classPrivateFieldGet2(this,_allEditors).clear(),_classPrivateFieldSet2(this,_activeEditor,null),_classPrivateFieldGet2(this,_selectedEditors).clear(),_classPrivateFieldGet2(this,_clipboardManager).destroy(),_classPrivateFieldGet2(this,_commandManager).destroy()}onPageChanging(_ref2){let{pageNumber}=_ref2;_classPrivateFieldSet2(this,_currentPageIndex,pageNumber-1)}focusMainContainer(){_classPrivateFieldGet2(this,_container).focus()}keydown(event){var _this$getActive;(_this$getActive=this.getActive())!==null&&_this$getActive!==void 0&&_this$getActive.shouldGetKeyboardEvents()||_AnnotationEditorUIManager2._keyboardManager.exec(this,event)}onEditingAction(details){["undo","redo","cut","copy","paste","delete","selectAll"].includes(details.name)&&this[details.name]()}setEditingState(isEditing){isEditing?(_classPrivateMethodGet2(this,_addKeyboardManager,_addKeyboardManager2).call(this),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{isEditing:_classPrivateFieldGet2(this,_mode)!==_util2.AnnotationEditorType.NONE,isEmpty:_classPrivateMethodGet2(this,_isEmpty,_isEmpty2).call(this),hasSomethingToUndo:_classPrivateFieldGet2(this,_commandManager).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet2(this,_commandManager).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:_classPrivateFieldGet2(this,_clipboardManager).isEmpty()})):(_classPrivateMethodGet2(this,_removeKeyboardManager,_removeKeyboardManager2).call(this),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{isEditing:!1}))}registerEditorTypes(types){_classPrivateFieldSet2(this,_editorTypes,types);for(const editorType of _classPrivateFieldGet2(this,_editorTypes))_classPrivateMethodGet2(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editorType.defaultPropertiesToUpdate)}getId(){return _classPrivateFieldGet2(this,_idManager).getId()}addLayer(layer){_classPrivateFieldGet2(this,_allLayers).set(layer.pageIndex,layer),_classPrivateFieldGet2(this,_isEnabled)?layer.enable():layer.disable()}removeLayer(layer){_classPrivateFieldGet2(this,_allLayers).delete(layer.pageIndex)}updateMode(mode){if(_classPrivateFieldSet2(this,_mode,mode),mode===_util2.AnnotationEditorType.NONE)this.setEditingState(!1),_classPrivateMethodGet2(this,_disableAll,_disableAll2).call(this);else{this.setEditingState(!0),_classPrivateMethodGet2(this,_enableAll,_enableAll2).call(this);for(const layer of _classPrivateFieldGet2(this,_allLayers).values())layer.updateMode(mode)}}updateToolbar(mode){mode!==_classPrivateFieldGet2(this,_mode)&&_classPrivateFieldGet2(this,_eventBus).dispatch("switchannotationeditormode",{source:this,mode})}updateParams(type,value){for(const editor of _classPrivateFieldGet2(this,_selectedEditors))editor.updateParams(type,value);for(const editorType of _classPrivateFieldGet2(this,_editorTypes))editorType.updateDefaultParams(type,value)}getEditors(pageIndex){const editors=[];for(const editor of _classPrivateFieldGet2(this,_allEditors).values())editor.pageIndex===pageIndex&&editors.push(editor);return editors}getEditor(id){return _classPrivateFieldGet2(this,_allEditors).get(id)}addEditor(editor){_classPrivateFieldGet2(this,_allEditors).set(editor.id,editor)}removeEditor(editor){_classPrivateFieldGet2(this,_allEditors).delete(editor.id),this.unselect(editor)}setActiveEditor(editor){_classPrivateFieldGet2(this,_activeEditor)!==editor&&(_classPrivateFieldSet2(this,_activeEditor,editor),editor&&_classPrivateMethodGet2(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate))}toggleSelected(editor){if(_classPrivateFieldGet2(this,_selectedEditors).has(editor)){_classPrivateFieldGet2(this,_selectedEditors).delete(editor),editor.unselect(),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection});return}_classPrivateFieldGet2(this,_selectedEditors).add(editor),editor.select(),_classPrivateMethodGet2(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}setSelected(editor){for(const ed of _classPrivateFieldGet2(this,_selectedEditors))ed!==editor&&ed.unselect();_classPrivateFieldGet2(this,_selectedEditors).clear(),_classPrivateFieldGet2(this,_selectedEditors).add(editor),editor.select(),_classPrivateMethodGet2(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}isSelected(editor){return _classPrivateFieldGet2(this,_selectedEditors).has(editor)}unselect(editor){editor.unselect(),_classPrivateFieldGet2(this,_selectedEditors).delete(editor),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return _classPrivateFieldGet2(this,_selectedEditors).size!==0}undo(){_classPrivateFieldGet2(this,_commandManager).undo(),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:_classPrivateFieldGet2(this,_commandManager).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_classPrivateMethodGet2(this,_isEmpty,_isEmpty2).call(this)})}redo(){_classPrivateFieldGet2(this,_commandManager).redo(),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_classPrivateFieldGet2(this,_commandManager).hasSomethingToRedo(),isEmpty:_classPrivateMethodGet2(this,_isEmpty,_isEmpty2).call(this)})}addCommands(params){_classPrivateFieldGet2(this,_commandManager).add(params),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_classPrivateMethodGet2(this,_isEmpty,_isEmpty2).call(this)})}delete(){if(_classPrivateFieldGet2(this,_activeEditor)&&_classPrivateFieldGet2(this,_activeEditor).commitOrRemove(),!this.hasSelection)return;const editors=[..._classPrivateFieldGet2(this,_selectedEditors)],cmd=__name(()=>{for(const editor of editors)editor.remove()},"cmd"),undo=__name(()=>{for(const editor of editors)_classPrivateMethodGet2(this,_addEditorToLayer,_addEditorToLayer2).call(this,editor)},"undo");this.addCommands({cmd,undo,mustExec:!0})}copy(){if(_classPrivateFieldGet2(this,_activeEditor)&&_classPrivateFieldGet2(this,_activeEditor).commitOrRemove(),this.hasSelection){const editors=[];for(const editor of _classPrivateFieldGet2(this,_selectedEditors))editor.isEmpty()||editors.push(editor);if(editors.length===0)return;_classPrivateFieldGet2(this,_clipboardManager).copy(editors),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(_classPrivateFieldGet2(this,_clipboardManager).isEmpty())return;this.unselectAll();const layer=_classPrivateFieldGet2(this,_allLayers).get(_classPrivateFieldGet2(this,_currentPageIndex)),newEditors=_classPrivateFieldGet2(this,_clipboardManager).paste().map(data=>layer.deserialize(data)),cmd=__name(()=>{for(const editor of newEditors)_classPrivateMethodGet2(this,_addEditorToLayer,_addEditorToLayer2).call(this,editor);_classPrivateMethodGet2(this,_selectEditors,_selectEditors2).call(this,newEditors)},"cmd"),undo=__name(()=>{for(const editor of newEditors)editor.remove()},"undo");this.addCommands({cmd,undo,mustExec:!0})}selectAll(){for(const editor of _classPrivateFieldGet2(this,_selectedEditors))editor.commit();_classPrivateMethodGet2(this,_selectEditors,_selectEditors2).call(this,_classPrivateFieldGet2(this,_allEditors).values())}unselectAll(){if(_classPrivateFieldGet2(this,_activeEditor)){_classPrivateFieldGet2(this,_activeEditor).commitOrRemove();return}if(_classPrivateMethodGet2(this,_selectEditors,_selectEditors2).size!==0){for(const editor of _classPrivateFieldGet2(this,_selectedEditors))editor.unselect();_classPrivateFieldGet2(this,_selectedEditors).clear(),_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!1})}}isActive(editor){return _classPrivateFieldGet2(this,_activeEditor)===editor}getActive(){return _classPrivateFieldGet2(this,_activeEditor)}getMode(){return _classPrivateFieldGet2(this,_mode)}};__name(_AnnotationEditorUIManager,"AnnotationEditorUIManager");let AnnotationEditorUIManager=_AnnotationEditorUIManager;exports2.AnnotationEditorUIManager=AnnotationEditorUIManager;function _addKeyboardManager2(){_classPrivateFieldGet2(this,_container).addEventListener("keydown",_classPrivateFieldGet2(this,_boundKeydown))}__name2(_addKeyboardManager2,"_addKeyboardManager2"),__name(_addKeyboardManager2,"_addKeyboardManager2");function _removeKeyboardManager2(){_classPrivateFieldGet2(this,_container).removeEventListener("keydown",_classPrivateFieldGet2(this,_boundKeydown))}__name2(_removeKeyboardManager2,"_removeKeyboardManager2"),__name(_removeKeyboardManager2,"_removeKeyboardManager2");function _dispatchUpdateStates2(details){Object.entries(details).some(_ref3=>{let[key,value]=_ref3;return _classPrivateFieldGet2(this,_previousStates)[key]!==value})&&_classPrivateFieldGet2(this,_eventBus).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet2(this,_previousStates),details)})}__name2(_dispatchUpdateStates2,"_dispatchUpdateStates2"),__name(_dispatchUpdateStates2,"_dispatchUpdateStates2");function _dispatchUpdateUI2(details){_classPrivateFieldGet2(this,_eventBus).dispatch("annotationeditorparamschanged",{source:this,details})}__name2(_dispatchUpdateUI2,"_dispatchUpdateUI2"),__name(_dispatchUpdateUI2,"_dispatchUpdateUI2");function _enableAll2(){if(!_classPrivateFieldGet2(this,_isEnabled)){_classPrivateFieldSet2(this,_isEnabled,!0);for(const layer of _classPrivateFieldGet2(this,_allLayers).values())layer.enable()}}__name2(_enableAll2,"_enableAll2"),__name(_enableAll2,"_enableAll2");function _disableAll2(){if(this.unselectAll(),_classPrivateFieldGet2(this,_isEnabled)){_classPrivateFieldSet2(this,_isEnabled,!1);for(const layer of _classPrivateFieldGet2(this,_allLayers).values())layer.disable()}}__name2(_disableAll2,"_disableAll2"),__name(_disableAll2,"_disableAll2");function _addEditorToLayer2(editor){const layer=_classPrivateFieldGet2(this,_allLayers).get(editor.pageIndex);layer?layer.addOrRebuild(editor):this.addEditor(editor)}__name2(_addEditorToLayer2,"_addEditorToLayer2"),__name(_addEditorToLayer2,"_addEditorToLayer2");function _isEmpty2(){if(_classPrivateFieldGet2(this,_allEditors).size===0)return!0;if(_classPrivateFieldGet2(this,_allEditors).size===1)for(const editor of _classPrivateFieldGet2(this,_allEditors).values())return editor.isEmpty();return!1}__name2(_isEmpty2,"_isEmpty2"),__name(_isEmpty2,"_isEmpty2");function _selectEditors2(editors){_classPrivateFieldGet2(this,_selectedEditors).clear();for(const editor of editors)editor.isEmpty()||(_classPrivateFieldGet2(this,_selectedEditors).add(editor),editor.select());_classPrivateMethodGet2(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}__name2(_selectEditors2,"_selectEditors2"),__name(_selectEditors2,"_selectEditors2"),_defineProperty(AnnotationEditorUIManager,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],AnnotationEditorUIManager.prototype.selectAll],[["ctrl+c","mac+meta+c"],AnnotationEditorUIManager.prototype.copy],[["ctrl+v","mac+meta+v"],AnnotationEditorUIManager.prototype.paste],[["ctrl+x","mac+meta+x"],AnnotationEditorUIManager.prototype.cut],[["ctrl+z","mac+meta+z"],AnnotationEditorUIManager.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],AnnotationEditorUIManager.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],AnnotationEditorUIManager.prototype.delete],[["Escape","mac+Escape"],AnnotationEditorUIManager.prototype.unselectAll]]))},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.StatTimer=exports2.RenderingCancelledException=exports2.PixelsPerInch=exports2.PageViewport=exports2.PDFDateString=exports2.DOMStandardFontDataFactory=exports2.DOMSVGFactory=exports2.DOMCanvasFactory=exports2.DOMCMapReaderFactory=exports2.AnnotationPrefix=void 0,exports2.deprecated=deprecated,exports2.getColorValues=getColorValues,exports2.getCurrentTransform=getCurrentTransform,exports2.getCurrentTransformInverse=getCurrentTransformInverse,exports2.getFilenameFromUrl=getFilenameFromUrl,exports2.getPdfFilenameFromUrl=getPdfFilenameFromUrl,exports2.getRGB=getRGB,exports2.getXfaPageViewport=getXfaPageViewport,exports2.isDataScheme=isDataScheme,exports2.isPdfFile=isPdfFile,exports2.isValidFetchUrl=isValidFetchUrl,exports2.loadScript=loadScript;var _base_factory=__w_pdfjs_require__2(134),_util2=__w_pdfjs_require__2(1);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name2(_defineProperty,"_defineProperty"),__name(_defineProperty,"_defineProperty");const SVG_NS="http://www.w3.org/2000/svg",AnnotationPrefix="pdfjs_internal_id_";exports2.AnnotationPrefix=AnnotationPrefix;const _PixelsPerInch=class{static{__name2(this,"_PixelsPerInch")}};__name(_PixelsPerInch,"PixelsPerInch");let PixelsPerInch=_PixelsPerInch;exports2.PixelsPerInch=PixelsPerInch,_defineProperty(PixelsPerInch,"CSS",96),_defineProperty(PixelsPerInch,"PDF",72),_defineProperty(PixelsPerInch,"PDF_TO_CSS_UNITS",PixelsPerInch.CSS/PixelsPerInch.PDF);const _DOMCanvasFactory=class extends _base_factory.BaseCanvasFactory{static{__name2(this,"_DOMCanvasFactory")}constructor(){let{ownerDocument=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=ownerDocument}_createCanvas(width,height){const canvas=this._document.createElement("canvas");return canvas.width=width,canvas.height=height,canvas}};__name(_DOMCanvasFactory,"DOMCanvasFactory");let DOMCanvasFactory=_DOMCanvasFactory;exports2.DOMCanvasFactory=DOMCanvasFactory;async function fetchData(url){let asTypedArray=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(isValidFetchUrl(url,document.baseURI)){const response=await fetch(url);if(!response.ok)throw new Error(response.statusText);return asTypedArray?new Uint8Array(await response.arrayBuffer()):(0,_util2.stringToBytes)(await response.text())}return new Promise((resolve,reject)=>{const request=new XMLHttpRequest;request.open("GET",url,!0),asTypedArray&&(request.responseType="arraybuffer"),request.onreadystatechange=()=>{if(request.readyState===XMLHttpRequest.DONE){if(request.status===200||request.status===0){let data;if(asTypedArray&&request.response?data=new Uint8Array(request.response):!asTypedArray&&request.responseText&&(data=(0,_util2.stringToBytes)(request.responseText)),data){resolve(data);return}}reject(new Error(request.statusText))}},request.send(null)})}__name2(fetchData,"fetchData"),__name(fetchData,"fetchData");const _DOMCMapReaderFactory=class extends _base_factory.BaseCMapReaderFactory{static{__name2(this,"_DOMCMapReaderFactory")}_fetchData(url,compressionType){return fetchData(url,this.isCompressed).then(data=>({cMapData:data,compressionType}))}};__name(_DOMCMapReaderFactory,"DOMCMapReaderFactory");let DOMCMapReaderFactory=_DOMCMapReaderFactory;exports2.DOMCMapReaderFactory=DOMCMapReaderFactory;const _DOMStandardFontDataFactory=class extends _base_factory.BaseStandardFontDataFactory{static{__name2(this,"_DOMStandardFontDataFactory")}_fetchData(url){return fetchData(url,!0)}};__name(_DOMStandardFontDataFactory,"DOMStandardFontDataFactory");let DOMStandardFontDataFactory=_DOMStandardFontDataFactory;exports2.DOMStandardFontDataFactory=DOMStandardFontDataFactory;const _DOMSVGFactory=class extends _base_factory.BaseSVGFactory{static{__name2(this,"_DOMSVGFactory")}_createSVG(type){return document.createElementNS(SVG_NS,type)}};__name(_DOMSVGFactory,"DOMSVGFactory");let DOMSVGFactory=_DOMSVGFactory;exports2.DOMSVGFactory=DOMSVGFactory;const _PageViewport=class _PageViewport2{static{__name2(this,"_PageViewport")}constructor(_ref){let{viewBox,scale,rotation,offsetX=0,offsetY=0,dontFlip=!1}=_ref;this.viewBox=viewBox,this.scale=scale,this.rotation=rotation,this.offsetX=offsetX,this.offsetY=offsetY;const centerX=(viewBox[2]+viewBox[0])/2,centerY=(viewBox[3]+viewBox[1])/2;let rotateA,rotateB,rotateC,rotateD;switch(rotation%=360,rotation<0&&(rotation+=360),rotation){case 180:rotateA=-1,rotateB=0,rotateC=0,rotateD=1;break;case 90:rotateA=0,rotateB=1,rotateC=1,rotateD=0;break;case 270:rotateA=0,rotateB=-1,rotateC=-1,rotateD=0;break;case 0:rotateA=1,rotateB=0,rotateC=0,rotateD=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}dontFlip&&(rotateC=-rotateC,rotateD=-rotateD);let offsetCanvasX,offsetCanvasY,width,height;rotateA===0?(offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX,offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY,width=Math.abs(viewBox[3]-viewBox[1])*scale,height=Math.abs(viewBox[2]-viewBox[0])*scale):(offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX,offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY,width=Math.abs(viewBox[2]-viewBox[0])*scale,height=Math.abs(viewBox[3]-viewBox[1])*scale),this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY],this.width=width,this.height=height}clone(){let{scale=this.scale,rotation=this.rotation,offsetX=this.offsetX,offsetY=this.offsetY,dontFlip=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _PageViewport2({viewBox:this.viewBox.slice(),scale,rotation,offsetX,offsetY,dontFlip})}convertToViewportPoint(x,y){return _util2.Util.applyTransform([x,y],this.transform)}convertToViewportRectangle(rect){const topLeft=_util2.Util.applyTransform([rect[0],rect[1]],this.transform),bottomRight=_util2.Util.applyTransform([rect[2],rect[3]],this.transform);return[topLeft[0],topLeft[1],bottomRight[0],bottomRight[1]]}convertToPdfPoint(x,y){return _util2.Util.applyInverseTransform([x,y],this.transform)}};__name(_PageViewport,"PageViewport");let PageViewport=_PageViewport;exports2.PageViewport=PageViewport;const _RenderingCancelledException=class extends _util2.BaseException{static{__name2(this,"_RenderingCancelledException")}constructor(msg,type){super(msg,"RenderingCancelledException"),this.type=type}};__name(_RenderingCancelledException,"RenderingCancelledException");let RenderingCancelledException=_RenderingCancelledException;exports2.RenderingCancelledException=RenderingCancelledException;function isDataScheme(url){const ii=url.length;let i=0;for(;i<ii&&url[i].trim()==="";)i++;return url.substring(i,i+5).toLowerCase()==="data:"}__name2(isDataScheme,"isDataScheme"),__name(isDataScheme,"isDataScheme");function isPdfFile(filename){return typeof filename=="string"&&/\.pdf$/i.test(filename)}__name2(isPdfFile,"isPdfFile"),__name(isPdfFile,"isPdfFile");function getFilenameFromUrl(url){const anchor=url.indexOf("#"),query=url.indexOf("?"),end=Math.min(anchor>0?anchor:url.length,query>0?query:url.length);return url.substring(url.lastIndexOf("/",end)+1,end)}__name2(getFilenameFromUrl,"getFilenameFromUrl"),__name(getFilenameFromUrl,"getFilenameFromUrl");function getPdfFilenameFromUrl(url){let defaultFilename=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof url!="string")return defaultFilename;if(isDataScheme(url))return(0,_util2.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),defaultFilename;const reURI=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,reFilename=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,splitURI=reURI.exec(url);let suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename&&(suggestedFilename=suggestedFilename[0],suggestedFilename.includes("%")))try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0]}catch{}return suggestedFilename||defaultFilename}__name2(getPdfFilenameFromUrl,"getPdfFilenameFromUrl"),__name(getPdfFilenameFromUrl,"getPdfFilenameFromUrl");const _StatTimer=class{static{__name2(this,"_StatTimer")}constructor(){this.started=Object.create(null),this.times=[]}time(name){name in this.started&&(0,_util2.warn)(`Timer is already running for ${name}`),this.started[name]=Date.now()}timeEnd(name){name in this.started||(0,_util2.warn)(`Timer has not been started for ${name}`),this.times.push({name,start:this.started[name],end:Date.now()}),delete this.started[name]}toString(){const outBuf=[];let longest=0;for(const time of this.times){const name=time.name;name.length>longest&&(longest=name.length)}for(const time of this.times){const duration=time.end-time.start;outBuf.push(`${time.name.padEnd(longest)} ${duration}ms
`)}return outBuf.join("")}};__name(_StatTimer,"StatTimer");let StatTimer=_StatTimer;exports2.StatTimer=StatTimer;function isValidFetchUrl(url,baseUrl){try{const{protocol}=baseUrl?new URL(url,baseUrl):new URL(url);return protocol==="http:"||protocol==="https:"}catch{return!1}}__name2(isValidFetchUrl,"isValidFetchUrl"),__name(isValidFetchUrl,"isValidFetchUrl");function loadScript(src){let removeScriptElement=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new Promise((resolve,reject)=>{const script=document.createElement("script");script.src=src,script.onload=function(evt){removeScriptElement&&script.remove(),resolve(evt)},script.onerror=function(){reject(new Error(`Cannot load script at: ${script.src}`))},(document.head||document.documentElement).append(script)})}__name2(loadScript,"loadScript"),__name(loadScript,"loadScript");function deprecated(details){console.log("Deprecated API usage: "+details)}__name2(deprecated,"deprecated"),__name(deprecated,"deprecated");let pdfDateStringRegex;const _PDFDateString=class{static{__name2(this,"_PDFDateString")}static toDateObject(input){if(!input||typeof input!="string")return null;pdfDateStringRegex||(pdfDateStringRegex=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const matches=pdfDateStringRegex.exec(input);if(!matches)return null;const year=parseInt(matches[1],10);let month=parseInt(matches[2],10);month=month>=1&&month<=12?month-1:0;let day=parseInt(matches[3],10);day=day>=1&&day<=31?day:1;let hour=parseInt(matches[4],10);hour=hour>=0&&hour<=23?hour:0;let minute=parseInt(matches[5],10);minute=minute>=0&&minute<=59?minute:0;let second=parseInt(matches[6],10);second=second>=0&&second<=59?second:0;const universalTimeRelation=matches[7]||"Z";let offsetHour=parseInt(matches[8],10);offsetHour=offsetHour>=0&&offsetHour<=23?offsetHour:0;let offsetMinute=parseInt(matches[9],10)||0;return offsetMinute=offsetMinute>=0&&offsetMinute<=59?offsetMinute:0,universalTimeRelation==="-"?(hour+=offsetHour,minute+=offsetMinute):universalTimeRelation==="+"&&(hour-=offsetHour,minute-=offsetMinute),new Date(Date.UTC(year,month,day,hour,minute,second))}};__name(_PDFDateString,"PDFDateString");let PDFDateString=_PDFDateString;exports2.PDFDateString=PDFDateString;function getXfaPageViewport(xfaPage,_ref2){let{scale=1,rotation=0}=_ref2;const{width,height}=xfaPage.attributes.style,viewBox=[0,0,parseInt(width),parseInt(height)];return new PageViewport({viewBox,scale,rotation})}__name2(getXfaPageViewport,"getXfaPageViewport"),__name(getXfaPageViewport,"getXfaPageViewport");function getRGB(color){if(color.startsWith("#")){const colorRGB=parseInt(color.slice(1),16);return[(colorRGB&16711680)>>16,(colorRGB&65280)>>8,colorRGB&255]}return color.startsWith("rgb(")?color.slice(4,-1).split(",").map(x=>parseInt(x)):color.startsWith("rgba(")?color.slice(5,-1).split(",").map(x=>parseInt(x)).slice(0,3):((0,_util2.warn)(`Not a valid color format: "${color}"`),[0,0,0])}__name2(getRGB,"getRGB"),__name(getRGB,"getRGB");function getColorValues(colors){const span=document.createElement("span");span.style.visibility="hidden",document.body.append(span);for(const name of colors.keys()){span.style.color=name;const computedColor=window.getComputedStyle(span).color;colors.set(name,getRGB(computedColor))}span.remove()}__name2(getColorValues,"getColorValues"),__name(getColorValues,"getColorValues");function getCurrentTransform(ctx){const{a,b,c,d,e,f}=ctx.getTransform();return[a,b,c,d,e,f]}__name2(getCurrentTransform,"getCurrentTransform"),__name(getCurrentTransform,"getCurrentTransform");function getCurrentTransformInverse(ctx){const{a,b,c,d,e,f}=ctx.getTransform().invertSelf();return[a,b,c,d,e,f]}__name2(getCurrentTransformInverse,"getCurrentTransformInverse"),__name(getCurrentTransformInverse,"getCurrentTransformInverse")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.BaseStandardFontDataFactory=exports2.BaseSVGFactory=exports2.BaseCanvasFactory=exports2.BaseCMapReaderFactory=void 0;var _util2=__w_pdfjs_require__2(1);const _BaseCanvasFactory=class _BaseCanvasFactory2{static{__name2(this,"_BaseCanvasFactory")}constructor(){this.constructor===_BaseCanvasFactory2&&(0,_util2.unreachable)("Cannot initialize BaseCanvasFactory.")}create(width,height){if(width<=0||height<=0)throw new Error("Invalid canvas size");const canvas=this._createCanvas(width,height);return{canvas,context:canvas.getContext("2d")}}reset(canvasAndContext,width,height){if(!canvasAndContext.canvas)throw new Error("Canvas is not specified");if(width<=0||height<=0)throw new Error("Invalid canvas size");canvasAndContext.canvas.width=width,canvasAndContext.canvas.height=height}destroy(canvasAndContext){if(!canvasAndContext.canvas)throw new Error("Canvas is not specified");canvasAndContext.canvas.width=0,canvasAndContext.canvas.height=0,canvasAndContext.canvas=null,canvasAndContext.context=null}_createCanvas(width,height){(0,_util2.unreachable)("Abstract method `_createCanvas` called.")}};__name(_BaseCanvasFactory,"BaseCanvasFactory");let BaseCanvasFactory=_BaseCanvasFactory;exports2.BaseCanvasFactory=BaseCanvasFactory;const _BaseCMapReaderFactory=class _BaseCMapReaderFactory2{static{__name2(this,"_BaseCMapReaderFactory")}constructor(_ref){let{baseUrl=null,isCompressed=!1}=_ref;this.constructor===_BaseCMapReaderFactory2&&(0,_util2.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=baseUrl,this.isCompressed=isCompressed}async fetch(_ref2){let{name}=_ref2;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!name)throw new Error("CMap name must be specified.");const url=this.baseUrl+name+(this.isCompressed?".bcmap":""),compressionType=this.isCompressed?_util2.CMapCompressionType.BINARY:_util2.CMapCompressionType.NONE;return this._fetchData(url,compressionType).catch(reason=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${url}`)})}_fetchData(url,compressionType){(0,_util2.unreachable)("Abstract method `_fetchData` called.")}};__name(_BaseCMapReaderFactory,"BaseCMapReaderFactory");let BaseCMapReaderFactory=_BaseCMapReaderFactory;exports2.BaseCMapReaderFactory=BaseCMapReaderFactory;const _BaseStandardFontDataFactory=class _BaseStandardFontDataFactory2{static{__name2(this,"_BaseStandardFontDataFactory")}constructor(_ref3){let{baseUrl=null}=_ref3;this.constructor===_BaseStandardFontDataFactory2&&(0,_util2.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=baseUrl}async fetch(_ref4){let{filename}=_ref4;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!filename)throw new Error("Font filename must be specified.");const url=`${this.baseUrl}${filename}`;return this._fetchData(url).catch(reason=>{throw new Error(`Unable to load font data at: ${url}`)})}_fetchData(url){(0,_util2.unreachable)("Abstract method `_fetchData` called.")}};__name(_BaseStandardFontDataFactory,"BaseStandardFontDataFactory");let BaseStandardFontDataFactory=_BaseStandardFontDataFactory;exports2.BaseStandardFontDataFactory=BaseStandardFontDataFactory;const _BaseSVGFactory=class _BaseSVGFactory2{static{__name2(this,"_BaseSVGFactory")}constructor(){this.constructor===_BaseSVGFactory2&&(0,_util2.unreachable)("Cannot initialize BaseSVGFactory.")}create(width,height){let skipDimensions=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(width<=0||height<=0)throw new Error("Invalid SVG dimensions");const svg=this._createSVG("svg:svg");return svg.setAttribute("version","1.1"),skipDimensions||(svg.setAttribute("width",`${width}px`),svg.setAttribute("height",`${height}px`)),svg.setAttribute("preserveAspectRatio","none"),svg.setAttribute("viewBox",`0 0 ${width} ${height}`),svg}createElement(type){if(typeof type!="string")throw new Error("Invalid SVG element type");return this._createSVG(type)}_createSVG(type){(0,_util2.unreachable)("Abstract method `_createSVG` called.")}};__name(_BaseSVGFactory,"BaseSVGFactory");let BaseSVGFactory=_BaseSVGFactory;exports2.BaseSVGFactory=BaseSVGFactory},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.MurmurHash3_64=void 0;var _util2=__w_pdfjs_require__2(1);const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535,_MurmurHash3_64=class{static{__name2(this,"_MurmurHash3_64")}constructor(seed){this.h1=seed?seed&4294967295:SEED,this.h2=seed?seed&4294967295:SEED}update(input){let data,length;if(typeof input=="string"){data=new Uint8Array(input.length*2),length=0;for(let i=0,ii=input.length;i<ii;i++){const code=input.charCodeAt(i);code<=255?data[length++]=code:(data[length++]=code>>>8,data[length++]=code&255)}}else if((0,_util2.isArrayBuffer)(input))data=input.slice(),length=data.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const blockCounts=length>>2,tailLength=length-blockCounts*4,dataUint32=new Uint32Array(data.buffer,0,blockCounts);let k1=0,k2=0,h1=this.h1,h2=this.h2;const C1=3432918353,C2=461845907,C1_LOW=C1&MASK_LOW,C2_LOW=C2&MASK_LOW;for(let i=0;i<blockCounts;i++)i&1?(k1=dataUint32[i],k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW,k1=k1<<15|k1>>>17,k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW,h1^=k1,h1=h1<<13|h1>>>19,h1=h1*5+3864292196):(k2=dataUint32[i],k2=k2*C1&MASK_HIGH|k2*C1_LOW&MASK_LOW,k2=k2<<15|k2>>>17,k2=k2*C2&MASK_HIGH|k2*C2_LOW&MASK_LOW,h2^=k2,h2=h2<<13|h2>>>19,h2=h2*5+3864292196);switch(k1=0,tailLength){case 3:k1^=data[blockCounts*4+2]<<16;case 2:k1^=data[blockCounts*4+1]<<8;case 1:k1^=data[blockCounts*4],k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW,k1=k1<<15|k1>>>17,k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW,blockCounts&1?h1^=k1:h2^=k1}this.h1=h1,this.h2=h2}hexdigest(){let h1=this.h1,h2=this.h2;h1^=h2>>>1,h1=h1*3981806797&MASK_HIGH|h1*36045&MASK_LOW,h2=h2*4283543511&MASK_HIGH|((h2<<16|h1>>>16)*2950163797&MASK_HIGH)>>>16,h1^=h2>>>1,h1=h1*444984403&MASK_HIGH|h1*60499&MASK_LOW,h2=h2*3301882366&MASK_HIGH|((h2<<16|h1>>>16)*3120437893&MASK_HIGH)>>>16,h1^=h2>>>1;const hex1=(h1>>>0).toString(16),hex2=(h2>>>0).toString(16);return hex1.padStart(8,"0")+hex2.padStart(8,"0")}};__name(_MurmurHash3_64,"MurmurHash3_64");let MurmurHash3_64=_MurmurHash3_64;exports2.MurmurHash3_64=MurmurHash3_64},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _a;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.FontLoader=exports2.FontFaceObject=void 0;var _util2=__w_pdfjs_require__2(1);const _BaseFontLoader=class _BaseFontLoader2{static{__name2(this,"_BaseFontLoader")}constructor(_ref){let{docId,onUnsupportedFeature,ownerDocument=globalThis.document,styleElement=null}=_ref;this.constructor===_BaseFontLoader2&&(0,_util2.unreachable)("Cannot initialize BaseFontLoader."),this.docId=docId,this._onUnsupportedFeature=onUnsupportedFeature,this._document=ownerDocument,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(nativeFontFace){this.nativeFontFaces.push(nativeFontFace),this._document.fonts.add(nativeFontFace)}insertRule(rule){let styleElement=this.styleElement;styleElement||(styleElement=this.styleElement=this._document.createElement("style"),styleElement.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(styleElement));const styleSheet=styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length)}clear(){for(const nativeFontFace of this.nativeFontFaces)this._document.fonts.delete(nativeFontFace);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(font){if(font.attached||font.missingFile)return;if(font.attached=!0,this.isFontLoadingAPISupported){const nativeFontFace=font.createNativeFontFace();if(nativeFontFace){this.addNativeFontFace(nativeFontFace);try{await nativeFontFace.loaded}catch(ex){throw this._onUnsupportedFeature({featureId:_util2.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,_util2.warn)(`Failed to load font '${nativeFontFace.family}': '${ex}'.`),font.disableFontFace=!0,ex}}return}const rule=font.createFontFaceRule();if(rule){if(this.insertRule(rule),this.isSyncFontLoadingSupported)return;await new Promise(resolve=>{const request=this._queueLoadingCallback(resolve);this._prepareFontLoadEvent([rule],[font],request)})}}_queueLoadingCallback(callback){(0,_util2.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var _this$_document;const hasFonts=!!((_this$_document=this._document)!==null&&_this$_document!==void 0&&_this$_document.fonts);return(0,_util2.shadow)(this,"isFontLoadingAPISupported",hasFonts)}get isSyncFontLoadingSupported(){(0,_util2.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,_util2.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(rules,fontsToLoad,request){(0,_util2.unreachable)("Abstract method `_prepareFontLoadEvent`.")}};__name(_BaseFontLoader,"BaseFontLoader");let BaseFontLoader=_BaseFontLoader,FontLoader;exports2.FontLoader=FontLoader,exports2.FontLoader=FontLoader=(_a=class extends BaseFontLoader{static{__name2(this,"_a")}constructor(params){super(params),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let supported=!1;if(typeof navigator>"u")supported=!0;else{const m=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);m?.[1]>=14&&(supported=!0)}return(0,_util2.shadow)(this,"isSyncFontLoadingSupported",supported)}_queueLoadingCallback(callback){function completeRequest(){for((0,_util2.assert)(!request.done,"completeRequest() cannot be called twice."),request.done=!0;context.requests.length>0&&context.requests[0].done;){const otherRequest=context.requests.shift();setTimeout(otherRequest.callback,0)}}__name2(completeRequest,"completeRequest"),__name(completeRequest,"completeRequest");const context=this.loadingContext,request={id:`pdfjs-font-loading-${context.nextRequestId++}`,done:!1,complete:completeRequest,callback};return context.requests.push(request),request}get _loadTestFont(){const getLoadTestFont=__name(function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")},"getLoadTestFont");return(0,_util2.shadow)(this,"_loadTestFont",getLoadTestFont())}_prepareFontLoadEvent(rules,fonts,request){function int32(data2,offset){return data2.charCodeAt(offset)<<24|data2.charCodeAt(offset+1)<<16|data2.charCodeAt(offset+2)<<8|data2.charCodeAt(offset+3)&255}__name2(int32,"int32"),__name(int32,"int32");function spliceString(s,offset,remove,insert){const chunk1=s.substring(0,offset),chunk2=s.substring(offset+remove);return chunk1+insert+chunk2}__name2(spliceString,"spliceString"),__name(spliceString,"spliceString");let i,ii;const canvas=this._document.createElement("canvas");canvas.width=1,canvas.height=1;const ctx=canvas.getContext("2d");let called=0;function isFontReady(name,callback){if(called++,called>30){(0,_util2.warn)("Load test font never loaded."),callback();return}if(ctx.font="30px "+name,ctx.fillText(".",0,20),ctx.getImageData(0,0,1,1).data[3]>0){callback();return}setTimeout(isFontReady.bind(null,name,callback))}__name2(isFontReady,"isFontReady"),__name(isFontReady,"isFontReady");const loadTestFontId=`lt${Date.now()}${this.loadTestFontId++}`;let data=this._loadTestFont;data=spliceString(data,976,loadTestFontId.length,loadTestFontId);const CFF_CHECKSUM_OFFSET=16,XXXX_VALUE=1482184792;let checksum=int32(data,CFF_CHECKSUM_OFFSET);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4)checksum=checksum-XXXX_VALUE+int32(loadTestFontId,i)|0;i<loadTestFontId.length&&(checksum=checksum-XXXX_VALUE+int32(loadTestFontId+"XXX",i)|0),data=spliceString(data,CFF_CHECKSUM_OFFSET,4,(0,_util2.string32)(checksum));const url=`url(data:font/opentype;base64,${btoa(data)});`,rule=`@font-face {font-family:"${loadTestFontId}";src:${url}}`;this.insertRule(rule);const names=[];for(const font of fonts)names.push(font.loadedName);names.push(loadTestFontId);const div=this._document.createElement("div");div.style.visibility="hidden",div.style.width=div.style.height="10px",div.style.position="absolute",div.style.top=div.style.left="0px";for(const name of names){const span=this._document.createElement("span");span.textContent="Hi",span.style.fontFamily=name,div.append(span)}this._document.body.append(div),isFontReady(loadTestFontId,()=>{div.remove(),request.complete()})}},__name(_a,"GenericFontLoader"),_a);const _FontFaceObject=class{static{__name2(this,"_FontFaceObject")}constructor(translatedData,_ref2){let{isEvalSupported=!0,disableFontFace=!1,ignoreErrors=!1,onUnsupportedFeature,fontRegistry=null}=_ref2;this.compiledGlyphs=Object.create(null);for(const i in translatedData)this[i]=translatedData[i];this.isEvalSupported=isEvalSupported!==!1,this.disableFontFace=disableFontFace===!0,this.ignoreErrors=ignoreErrors===!0,this._onUnsupportedFeature=onUnsupportedFeature,this.fontRegistry=fontRegistry}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let nativeFontFace;if(!this.cssFontInfo)nativeFontFace=new FontFace(this.loadedName,this.data,{});else{const css={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(css.style=`oblique ${this.cssFontInfo.italicAngle}deg`),nativeFontFace=new FontFace(this.cssFontInfo.fontFamily,this.data,css)}return this.fontRegistry&&this.fontRegistry.registerFont(this),nativeFontFace}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const data=(0,_util2.bytesToString)(this.data),url=`url(data:${this.mimetype};base64,${btoa(data)});`;let rule;if(!this.cssFontInfo)rule=`@font-face {font-family:"${this.loadedName}";src:${url}}`;else{let css=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(css+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),rule=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${css}src:${url}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,url),rule}getPathGenerator(objs,character){if(this.compiledGlyphs[character]!==void 0)return this.compiledGlyphs[character];let cmds;try{cmds=objs.get(this.loadedName+"_path_"+character)}catch(ex){if(!this.ignoreErrors)throw ex;return this._onUnsupportedFeature({featureId:_util2.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,_util2.warn)(`getPathGenerator - ignoring character: "${ex}".`),this.compiledGlyphs[character]=function(c,size){}}if(this.isEvalSupported&&_util2.FeatureTest.isEvalSupported){const jsBuf=[];for(const current of cmds){const args=current.args!==void 0?current.args.join(","):"";jsBuf.push("c.",current.cmd,"(",args,`);
`)}return this.compiledGlyphs[character]=new Function("c","size",jsBuf.join(""))}return this.compiledGlyphs[character]=function(c,size){for(const current of cmds)current.cmd==="scale"&&(current.args=[size,-size]),c[current.cmd].apply(c,current.args)}}};__name(_FontFaceObject,"FontFaceObject");let FontFaceObject=_FontFaceObject;exports2.FontFaceObject=FontFaceObject},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.CanvasGraphics=void 0;var _display_utils2=__w_pdfjs_require__2(133),_util2=__w_pdfjs_require__2(1),_pattern_helper=__w_pdfjs_require__2(138),_image_utils=__w_pdfjs_require__2(139),_is_node2=__w_pdfjs_require__2(3);function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,MAX_GROUP_SIZE=4096,EXECUTION_TIME=15,EXECUTION_STEPS=10,MAX_SIZE_TO_COMPILE=_is_node2.isNodeJS&&typeof Path2D>"u"?-1:1e3,FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(ctx,destCtx){if(ctx._removeMirroring)throw new Error("Context is already forwarding operations.");ctx.__originalSave=ctx.save,ctx.__originalRestore=ctx.restore,ctx.__originalRotate=ctx.rotate,ctx.__originalScale=ctx.scale,ctx.__originalTranslate=ctx.translate,ctx.__originalTransform=ctx.transform,ctx.__originalSetTransform=ctx.setTransform,ctx.__originalResetTransform=ctx.resetTransform,ctx.__originalClip=ctx.clip,ctx.__originalMoveTo=ctx.moveTo,ctx.__originalLineTo=ctx.lineTo,ctx.__originalBezierCurveTo=ctx.bezierCurveTo,ctx.__originalRect=ctx.rect,ctx.__originalClosePath=ctx.closePath,ctx.__originalBeginPath=ctx.beginPath,ctx._removeMirroring=()=>{ctx.save=ctx.__originalSave,ctx.restore=ctx.__originalRestore,ctx.rotate=ctx.__originalRotate,ctx.scale=ctx.__originalScale,ctx.translate=ctx.__originalTranslate,ctx.transform=ctx.__originalTransform,ctx.setTransform=ctx.__originalSetTransform,ctx.resetTransform=ctx.__originalResetTransform,ctx.clip=ctx.__originalClip,ctx.moveTo=ctx.__originalMoveTo,ctx.lineTo=ctx.__originalLineTo,ctx.bezierCurveTo=ctx.__originalBezierCurveTo,ctx.rect=ctx.__originalRect,ctx.closePath=ctx.__originalClosePath,ctx.beginPath=ctx.__originalBeginPath,delete ctx._removeMirroring},ctx.save=__name(__name2(function(){destCtx.save(),this.__originalSave()},"ctxSave"),"ctxSave"),ctx.restore=__name(__name2(function(){destCtx.restore(),this.__originalRestore()},"ctxRestore"),"ctxRestore"),ctx.translate=__name(__name2(function(x,y){destCtx.translate(x,y),this.__originalTranslate(x,y)},"ctxTranslate"),"ctxTranslate"),ctx.scale=__name(__name2(function(x,y){destCtx.scale(x,y),this.__originalScale(x,y)},"ctxScale"),"ctxScale"),ctx.transform=__name(__name2(function(a,b,c,d,e,f){destCtx.transform(a,b,c,d,e,f),this.__originalTransform(a,b,c,d,e,f)},"ctxTransform"),"ctxTransform"),ctx.setTransform=__name(__name2(function(a,b,c,d,e,f){destCtx.setTransform(a,b,c,d,e,f),this.__originalSetTransform(a,b,c,d,e,f)},"ctxSetTransform"),"ctxSetTransform"),ctx.resetTransform=__name(__name2(function(){destCtx.resetTransform(),this.__originalResetTransform()},"ctxResetTransform"),"ctxResetTransform"),ctx.rotate=__name(__name2(function(angle){destCtx.rotate(angle),this.__originalRotate(angle)},"ctxRotate"),"ctxRotate"),ctx.clip=__name(__name2(function(rule){destCtx.clip(rule),this.__originalClip(rule)},"ctxRotate"),"ctxRotate"),ctx.moveTo=function(x,y){destCtx.moveTo(x,y),this.__originalMoveTo(x,y)},ctx.lineTo=function(x,y){destCtx.lineTo(x,y),this.__originalLineTo(x,y)},ctx.bezierCurveTo=function(cp1x,cp1y,cp2x,cp2y,x,y){destCtx.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y),this.__originalBezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y)},ctx.rect=function(x,y,width,height){destCtx.rect(x,y,width,height),this.__originalRect(x,y,width,height)},ctx.closePath=function(){destCtx.closePath(),this.__originalClosePath()},ctx.beginPath=function(){destCtx.beginPath(),this.__originalBeginPath()}}__name2(mirrorContextOperations,"mirrorContextOperations"),__name(mirrorContextOperations,"mirrorContextOperations");const _CachedCanvases=class{static{__name2(this,"_CachedCanvases")}constructor(canvasFactory){this.canvasFactory=canvasFactory,this.cache=Object.create(null)}getCanvas(id,width,height){let canvasEntry;return this.cache[id]!==void 0?(canvasEntry=this.cache[id],this.canvasFactory.reset(canvasEntry,width,height)):(canvasEntry=this.canvasFactory.create(width,height),this.cache[id]=canvasEntry),canvasEntry}delete(id){delete this.cache[id]}clear(){for(const id in this.cache){const canvasEntry=this.cache[id];this.canvasFactory.destroy(canvasEntry),delete this.cache[id]}}};__name(_CachedCanvases,"CachedCanvases");let CachedCanvases=_CachedCanvases;function drawImageAtIntegerCoords(ctx,srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH){const[a,b,c,d,tx,ty]=(0,_display_utils2.getCurrentTransform)(ctx);if(b===0&&c===0){const tlX=destX*a+tx,rTlX=Math.round(tlX),tlY=destY*d+ty,rTlY=Math.round(tlY),brX=(destX+destW)*a+tx,rWidth=Math.abs(Math.round(brX)-rTlX)||1,brY=(destY+destH)*d+ty,rHeight=Math.abs(Math.round(brY)-rTlY)||1;return ctx.setTransform(Math.sign(a),0,0,Math.sign(d),rTlX,rTlY),ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rWidth,rHeight),ctx.setTransform(a,b,c,d,tx,ty),[rWidth,rHeight]}if(a===0&&d===0){const tlX=destY*c+tx,rTlX=Math.round(tlX),tlY=destX*b+ty,rTlY=Math.round(tlY),brX=(destY+destH)*c+tx,rWidth=Math.abs(Math.round(brX)-rTlX)||1,brY=(destX+destW)*b+ty,rHeight=Math.abs(Math.round(brY)-rTlY)||1;return ctx.setTransform(0,Math.sign(b),Math.sign(c),0,rTlX,rTlY),ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rHeight,rWidth),ctx.setTransform(a,b,c,d,tx,ty),[rHeight,rWidth]}ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);const scaleX=Math.hypot(a,b),scaleY=Math.hypot(c,d);return[scaleX*destW,scaleY*destH]}__name2(drawImageAtIntegerCoords,"drawImageAtIntegerCoords"),__name(drawImageAtIntegerCoords,"drawImageAtIntegerCoords");function compileType3Glyph(imgData){const{width,height}=imgData;if(width>MAX_SIZE_TO_COMPILE||height>MAX_SIZE_TO_COMPILE)return null;const POINT_TO_PROCESS_LIMIT=1e3,POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),width1=width+1;let points=new Uint8Array(width1*(height+1)),i,j,j0;const lineSize=width+7&-8;let data=new Uint8Array(lineSize*height),pos=0;for(const elem of imgData.data){let mask=128;for(;mask>0;)data[pos++]=elem&mask?0:255,mask>>=1}let count=0;for(pos=0,data[pos]!==0&&(points[0]=1,++count),j=1;j<width;j++)data[pos]!==data[pos+1]&&(points[j]=data[pos]?2:1,++count),pos++;for(data[pos]!==0&&(points[j]=2,++count),i=1;i<height;i++){pos=i*lineSize,j0=i*width1,data[pos-lineSize]!==data[pos]&&(points[j0]=data[pos]?1:8,++count);let sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++)sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0),POINT_TYPES[sum]&&(points[j0+j]=POINT_TYPES[sum],++count),pos++;if(data[pos-lineSize]!==data[pos]&&(points[j0+j]=data[pos]?2:4,++count),count>POINT_TO_PROCESS_LIMIT)return null}for(pos=lineSize*(height-1),j0=i*width1,data[pos]!==0&&(points[j0]=8,++count),j=1;j<width;j++)data[pos]!==data[pos+1]&&(points[j0+j]=data[pos]?4:8,++count),pos++;if(data[pos]!==0&&(points[j0+j]=4,++count),count>POINT_TO_PROCESS_LIMIT)return null;const steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]),path=new Path2D;for(i=0;count&&i<=height;i++){let p=i*width1;const end=p+width;for(;p<end&&!points[p];)p++;if(p===end)continue;path.moveTo(p%width1,i);const p0=p;let type=points[p];do{const step=steps[type];do p+=step;while(!points[p]);const pp=points[p];pp!==5&&pp!==10?(type=pp,points[p]=0):(type=pp&51*type>>4,points[p]&=type>>2|type<<2),path.lineTo(p%width1,p/width1|0),points[p]||--count}while(p0!==p);--i}return data=null,points=null,__name(function(c){c.save(),c.scale(1/width,-1/height),c.translate(0,-height),c.fill(path),c.beginPath(),c.restore()},"drawOutline")}__name2(compileType3Glyph,"compileType3Glyph"),__name(compileType3Glyph,"compileType3Glyph");const _CanvasExtraState=class{static{__name2(this,"_CanvasExtraState")}constructor(width,height){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=_util2.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=_util2.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=_util2.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,width,height])}clone(){const clone=Object.create(this);return clone.clipBox=this.clipBox.slice(),clone}setCurrentPoint(x,y){this.x=x,this.y=y}updatePathMinMax(transform,x,y){[x,y]=_util2.Util.applyTransform([x,y],transform),this.minX=Math.min(this.minX,x),this.minY=Math.min(this.minY,y),this.maxX=Math.max(this.maxX,x),this.maxY=Math.max(this.maxY,y)}updateRectMinMax(transform,rect){const p1=_util2.Util.applyTransform(rect,transform),p2=_util2.Util.applyTransform(rect.slice(2),transform);this.minX=Math.min(this.minX,p1[0],p2[0]),this.minY=Math.min(this.minY,p1[1],p2[1]),this.maxX=Math.max(this.maxX,p1[0],p2[0]),this.maxY=Math.max(this.maxY,p1[1],p2[1])}updateScalingPathMinMax(transform,minMax){_util2.Util.scaleMinMax(transform,minMax),this.minX=Math.min(this.minX,minMax[0]),this.maxX=Math.max(this.maxX,minMax[1]),this.minY=Math.min(this.minY,minMax[2]),this.maxY=Math.max(this.maxY,minMax[3])}updateCurvePathMinMax(transform,x0,y0,x1,y1,x2,y2,x3,y3,minMax){const box=_util2.Util.bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3);if(minMax){minMax[0]=Math.min(minMax[0],box[0],box[2]),minMax[1]=Math.max(minMax[1],box[0],box[2]),minMax[2]=Math.min(minMax[2],box[1],box[3]),minMax[3]=Math.max(minMax[3],box[1],box[3]);return}this.updateRectMinMax(transform,box)}getPathBoundingBox(){let pathType=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_pattern_helper.PathType.FILL,transform=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const box=[this.minX,this.minY,this.maxX,this.maxY];if(pathType===_pattern_helper.PathType.STROKE){transform||(0,_util2.unreachable)("Stroke bounding box must include transform.");const scale=_util2.Util.singularValueDecompose2dScale(transform),xStrokePad=scale[0]*this.lineWidth/2,yStrokePad=scale[1]*this.lineWidth/2;box[0]-=xStrokePad,box[1]-=yStrokePad,box[2]+=xStrokePad,box[3]+=yStrokePad}return box}updateClipFromPath(){const intersect=_util2.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(intersect||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(box){this.clipBox=box,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let pathType=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_pattern_helper.PathType.FILL,transform=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return _util2.Util.intersect(this.clipBox,this.getPathBoundingBox(pathType,transform))}};__name(_CanvasExtraState,"CanvasExtraState");let CanvasExtraState=_CanvasExtraState;function putBinaryImageData(ctx,imgData){let transferMaps=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(typeof ImageData<"u"&&imgData instanceof ImageData){ctx.putImageData(imgData,0,0);return}const height=imgData.height,width=imgData.width,partialChunkHeight=height%FULL_CHUNK_HEIGHT,fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT,totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);let srcPos=0,destPos;const src=imgData.data,dest=chunkImgData.data;let i,j,thisChunkHeight,elemsInThisChunk,transferMapRed,transferMapGreen,transferMapBlue,transferMapGray;if(transferMaps)switch(transferMaps.length){case 1:transferMapRed=transferMaps[0],transferMapGreen=transferMaps[0],transferMapBlue=transferMaps[0],transferMapGray=transferMaps[0];break;case 4:transferMapRed=transferMaps[0],transferMapGreen=transferMaps[1],transferMapBlue=transferMaps[2],transferMapGray=transferMaps[3];break}if(imgData.kind===_util2.ImageKind.GRAYSCALE_1BPP){const srcLength=src.byteLength,dest32=new Uint32Array(dest.buffer,0,dest.byteLength>>2),dest32DataLength=dest32.length,fullSrcDiff=width+7>>3;let white=4294967295,black=_util2.FeatureTest.isLittleEndian?4278190080:255;for(transferMapGray&&transferMapGray[0]===255&&transferMapGray[255]===0&&([white,black]=[black,white]),i=0;i<totalChunks;i++){for(thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight,destPos=0,j=0;j<thisChunkHeight;j++){const srcDiff=srcLength-srcPos;let k=0;const kEnd=srcDiff>fullSrcDiff?width:srcDiff*8-7,kEndUnrolled=kEnd&-8;let mask=0,srcByte=0;for(;k<kEndUnrolled;k+=8)srcByte=src[srcPos++],dest32[destPos++]=srcByte&128?white:black,dest32[destPos++]=srcByte&64?white:black,dest32[destPos++]=srcByte&32?white:black,dest32[destPos++]=srcByte&16?white:black,dest32[destPos++]=srcByte&8?white:black,dest32[destPos++]=srcByte&4?white:black,dest32[destPos++]=srcByte&2?white:black,dest32[destPos++]=srcByte&1?white:black;for(;k<kEnd;k++)mask===0&&(srcByte=src[srcPos++],mask=128),dest32[destPos++]=srcByte&mask?white:black,mask>>=1}for(;destPos<dest32DataLength;)dest32[destPos++]=0;ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT)}}else if(imgData.kind===_util2.ImageKind.RGBA_32BPP){const hasTransferMaps=!!(transferMapRed||transferMapGreen||transferMapBlue);for(j=0,elemsInThisChunk=width*FULL_CHUNK_HEIGHT*4,i=0;i<fullChunks;i++){if(dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),srcPos+=elemsInThisChunk,hasTransferMaps)for(let k=0;k<elemsInThisChunk;k+=4)transferMapRed&&(dest[k+0]=transferMapRed[dest[k+0]]),transferMapGreen&&(dest[k+1]=transferMapGreen[dest[k+1]]),transferMapBlue&&(dest[k+2]=transferMapBlue[dest[k+2]]);ctx.putImageData(chunkImgData,0,j),j+=FULL_CHUNK_HEIGHT}if(i<totalChunks){if(elemsInThisChunk=width*partialChunkHeight*4,dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk)),hasTransferMaps)for(let k=0;k<elemsInThisChunk;k+=4)transferMapRed&&(dest[k+0]=transferMapRed[dest[k+0]]),transferMapGreen&&(dest[k+1]=transferMapGreen[dest[k+1]]),transferMapBlue&&(dest[k+2]=transferMapBlue[dest[k+2]]);ctx.putImageData(chunkImgData,0,j)}}else if(imgData.kind===_util2.ImageKind.RGB_24BPP){const hasTransferMaps=!!(transferMapRed||transferMapGreen||transferMapBlue);for(thisChunkHeight=FULL_CHUNK_HEIGHT,elemsInThisChunk=width*thisChunkHeight,i=0;i<totalChunks;i++){for(i>=fullChunks&&(thisChunkHeight=partialChunkHeight,elemsInThisChunk=width*thisChunkHeight),destPos=0,j=elemsInThisChunk;j--;)dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=src[srcPos++],dest[destPos++]=255;if(hasTransferMaps)for(let k=0;k<destPos;k+=4)transferMapRed&&(dest[k+0]=transferMapRed[dest[k+0]]),transferMapGreen&&(dest[k+1]=transferMapGreen[dest[k+1]]),transferMapBlue&&(dest[k+2]=transferMapBlue[dest[k+2]]);ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT)}}else throw new Error(`bad image kind: ${imgData.kind}`)}__name2(putBinaryImageData,"putBinaryImageData"),__name(putBinaryImageData,"putBinaryImageData");function putBinaryImageMask(ctx,imgData){if(imgData.bitmap){ctx.drawImage(imgData.bitmap,0,0);return}const height=imgData.height,width=imgData.width,partialChunkHeight=height%FULL_CHUNK_HEIGHT,fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT,totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1,chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);let srcPos=0;const src=imgData.data,dest=chunkImgData.data;for(let i=0;i<totalChunks;i++){const thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;({srcPos}=(0,_image_utils.applyMaskImageData)({src,srcPos,dest,width,height:thisChunkHeight})),ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT)}}__name2(putBinaryImageMask,"putBinaryImageMask"),__name(putBinaryImageMask,"putBinaryImageMask");function copyCtxState(sourceCtx,destCtx){const properties=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let i=0,ii=properties.length;i<ii;i++){const property=properties[i];sourceCtx[property]!==void 0&&(destCtx[property]=sourceCtx[property])}sourceCtx.setLineDash!==void 0&&(destCtx.setLineDash(sourceCtx.getLineDash()),destCtx.lineDashOffset=sourceCtx.lineDashOffset)}__name2(copyCtxState,"copyCtxState"),__name(copyCtxState,"copyCtxState");function resetCtxToDefault(ctx,foregroundColor){ctx.strokeStyle=ctx.fillStyle=foregroundColor||"#000000",ctx.fillRule="nonzero",ctx.globalAlpha=1,ctx.lineWidth=1,ctx.lineCap="butt",ctx.lineJoin="miter",ctx.miterLimit=10,ctx.globalCompositeOperation="source-over",ctx.font="10px sans-serif",ctx.setLineDash!==void 0&&(ctx.setLineDash([]),ctx.lineDashOffset=0)}__name2(resetCtxToDefault,"resetCtxToDefault"),__name(resetCtxToDefault,"resetCtxToDefault");function composeSMaskBackdrop(bytes,r0,g0,b0){const length=bytes.length;for(let i=3;i<length;i+=4){const alpha=bytes[i];if(alpha===0)bytes[i-3]=r0,bytes[i-2]=g0,bytes[i-1]=b0;else if(alpha<255){const alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8,bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8,bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8}}}__name2(composeSMaskBackdrop,"composeSMaskBackdrop"),__name(composeSMaskBackdrop,"composeSMaskBackdrop");function composeSMaskAlpha(maskData,layerData,transferMap){const length=maskData.length,scale=1/255;for(let i=3;i<length;i+=4){const alpha=transferMap?transferMap[maskData[i]]:maskData[i];layerData[i]=layerData[i]*alpha*scale|0}}__name2(composeSMaskAlpha,"composeSMaskAlpha"),__name(composeSMaskAlpha,"composeSMaskAlpha");function composeSMaskLuminosity(maskData,layerData,transferMap){const length=maskData.length;for(let i=3;i<length;i+=4){const y=maskData[i-3]*77+maskData[i-2]*152+maskData[i-1]*28;layerData[i]=transferMap?layerData[i]*transferMap[y>>8]>>8:layerData[i]*y>>16}}__name2(composeSMaskLuminosity,"composeSMaskLuminosity"),__name(composeSMaskLuminosity,"composeSMaskLuminosity");function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap,layerOffsetX,layerOffsetY,maskOffsetX,maskOffsetY){const hasBackdrop=!!backdrop,r0=hasBackdrop?backdrop[0]:0,g0=hasBackdrop?backdrop[1]:0,b0=hasBackdrop?backdrop[2]:0;let composeFn;subtype==="Luminosity"?composeFn=composeSMaskLuminosity:composeFn=composeSMaskAlpha;const chunkSize=Math.min(height,Math.ceil(1048576/width));for(let row=0;row<height;row+=chunkSize){const chunkHeight=Math.min(chunkSize,height-row),maskData=maskCtx.getImageData(layerOffsetX-maskOffsetX,row+(layerOffsetY-maskOffsetY),width,chunkHeight),layerData=layerCtx.getImageData(layerOffsetX,row+layerOffsetY,width,chunkHeight);hasBackdrop&&composeSMaskBackdrop(maskData.data,r0,g0,b0),composeFn(maskData.data,layerData.data,transferMap),layerCtx.putImageData(layerData,layerOffsetX,row+layerOffsetY)}}__name2(genericComposeSMask,"genericComposeSMask"),__name(genericComposeSMask,"genericComposeSMask");function composeSMask(ctx,smask,layerCtx,layerBox){const layerOffsetX=layerBox[0],layerOffsetY=layerBox[1],layerWidth=layerBox[2]-layerOffsetX,layerHeight=layerBox[3]-layerOffsetY;layerWidth===0||layerHeight===0||(genericComposeSMask(smask.context,layerCtx,layerWidth,layerHeight,smask.subtype,smask.backdrop,smask.transferMap,layerOffsetX,layerOffsetY,smask.offsetX,smask.offsetY),ctx.save(),ctx.globalAlpha=1,ctx.globalCompositeOperation="source-over",ctx.setTransform(1,0,0,1,0,0),ctx.drawImage(layerCtx.canvas,0,0),ctx.restore())}__name2(composeSMask,"composeSMask"),__name(composeSMask,"composeSMask");function getImageSmoothingEnabled(transform,interpolate){const scale=_util2.Util.singularValueDecompose2dScale(transform);scale[0]=Math.fround(scale[0]),scale[1]=Math.fround(scale[1]);const actualScale=Math.fround((globalThis.devicePixelRatio||1)*_display_utils2.PixelsPerInch.PDF_TO_CSS_UNITS);return interpolate!==void 0?interpolate:scale[0]<=actualScale||scale[1]<=actualScale}__name2(getImageSmoothingEnabled,"getImageSmoothingEnabled"),__name(getImageSmoothingEnabled,"getImageSmoothingEnabled");const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var _restoreInitialState=new WeakSet;const _CanvasGraphics=class _CanvasGraphics2{static{__name2(this,"_CanvasGraphics")}constructor(canvasCtx,commonObjs,objs,canvasFactory,imageLayer,optionalContentConfig,annotationCanvasMap,pageColors){_classPrivateMethodInitSpec2(this,_restoreInitialState),this.ctx=canvasCtx,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=commonObjs,this.objs=objs,this.canvasFactory=canvasFactory,this.imageLayer=imageLayer,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=optionalContentConfig,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=annotationCanvasMap,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=pageColors?.background||null,this.foregroundColor=pageColors?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(data){let fallback=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof data=="string"?data.startsWith("g_")?this.commonObjs.get(data):this.objs.get(data):fallback}beginDrawing(_ref){let{transform,viewport,transparency=!1,background=null}=_ref;const width=this.ctx.canvas.width,height=this.ctx.canvas.height,defaultBackgroundColor=background||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const fg=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const bg=this.backgroundColor=this.ctx.fillStyle;let isValidDefaultBg=!0,defaultBg=defaultBackgroundColor;if(this.ctx.fillStyle=defaultBackgroundColor,defaultBg=this.ctx.fillStyle,isValidDefaultBg=typeof defaultBg=="string"&&/^#[0-9A-Fa-f]{6}$/.test(defaultBg),fg==="#000000"&&bg==="#ffffff"||fg===bg||!isValidDefaultBg)this.foregroundColor=this.backgroundColor=null;else{const[rB,gB,bB]=(0,_display_utils2.getRGB)(defaultBg),newComp=__name(x=>(x/=255,x<=.03928?x/12.92:((x+.055)/1.055)**2.4),"newComp"),lumB=Math.round(.2126*newComp(rB)+.7152*newComp(gB)+.0722*newComp(bB));this.selectColor=(r,g,b)=>{const lumC=.2126*newComp(r)+.7152*newComp(g)+.0722*newComp(b);return Math.round(lumC)===lumB?bg:fg}}}if(this.ctx.fillStyle=this.backgroundColor||defaultBackgroundColor,this.ctx.fillRect(0,0,width,height),this.ctx.restore(),transparency){const transparentCanvas=this.cachedCanvases.getCanvas("transparent",width,height);this.compositeCtx=this.ctx,this.transparentCanvas=transparentCanvas.canvas,this.ctx=transparentCanvas.context,this.ctx.save(),this.ctx.transform(...(0,_display_utils2.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx,this.foregroundColor),transform&&(this.ctx.transform(...transform),this.outputScaleX=transform[0],this.outputScaleY=transform[0]),this.ctx.transform(...viewport.transform),this.viewportScale=viewport.scale,this.baseTransform=(0,_display_utils2.getCurrentTransform)(this.ctx),this.imageLayer&&((0,_display_utils2.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){const argsArray=operatorList.argsArray,fnArray=operatorList.fnArray;let i=executionStartIdx||0;const argsArrayLen=argsArray.length;if(argsArrayLen===i)return i;const chunkOperations=argsArrayLen-i>EXECUTION_STEPS&&typeof continueCallback=="function",endTime=chunkOperations?Date.now()+EXECUTION_TIME:0;let steps=0;const commonObjs=this.commonObjs,objs=this.objs;let fnId;for(;;){if(stepper!==void 0&&i===stepper.nextBreakPoint)return stepper.breakIt(i,continueCallback),i;if(fnId=fnArray[i],fnId!==_util2.OPS.dependency)this[fnId].apply(this,argsArray[i]);else for(const depObjId of argsArray[i]){const objsPool=depObjId.startsWith("g_")?commonObjs:objs;if(!objsPool.has(depObjId))return objsPool.get(depObjId,continueCallback),i}if(i++,i===argsArrayLen)return i;if(chunkOperations&&++steps>EXECUTION_STEPS){if(Date.now()>endTime)return continueCallback(),i;steps=0}}}endDrawing(){_classPrivateMethodGet2(this,_restoreInitialState,_restoreInitialState2).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const cache of this._cachedBitmapsMap.values()){for(const canvas of cache.values())typeof HTMLCanvasElement<"u"&&canvas instanceof HTMLCanvasElement&&(canvas.width=canvas.height=0);cache.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(img,inverseTransform){const width=img.width,height=img.height;let widthScale=Math.max(Math.hypot(inverseTransform[0],inverseTransform[1]),1),heightScale=Math.max(Math.hypot(inverseTransform[2],inverseTransform[3]),1),paintWidth=width,paintHeight=height,tmpCanvasId="prescale1",tmpCanvas,tmpCtx;for(;widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1;){let newWidth=paintWidth,newHeight=paintHeight;widthScale>2&&paintWidth>1&&(newWidth=Math.ceil(paintWidth/2),widthScale/=paintWidth/newWidth),heightScale>2&&paintHeight>1&&(newHeight=Math.ceil(paintHeight/2),heightScale/=paintHeight/newHeight),tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight),tmpCtx=tmpCanvas.context,tmpCtx.clearRect(0,0,newWidth,newHeight),tmpCtx.drawImage(img,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight),img=tmpCanvas.canvas,paintWidth=newWidth,paintHeight=newHeight,tmpCanvasId=tmpCanvasId==="prescale1"?"prescale2":"prescale1"}return{img,paintWidth,paintHeight}}_createMaskCanvas(img){const ctx=this.ctx,{width,height}=img,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill,currentTransform=(0,_display_utils2.getCurrentTransform)(ctx);let cache,cacheKey,scaled,maskCanvas;if((img.bitmap||img.data)&&img.count>1){const mainKey=img.bitmap||img.data.buffer,withoutTranslation=currentTransform.slice(0,4);cacheKey=JSON.stringify(isPatternFill?withoutTranslation:[withoutTranslation,fillColor]),cache=this._cachedBitmapsMap.get(mainKey),cache||(cache=new Map,this._cachedBitmapsMap.set(mainKey,cache));const cachedImage=cache.get(cacheKey);if(cachedImage&&!isPatternFill){const offsetX2=Math.round(Math.min(currentTransform[0],currentTransform[2])+currentTransform[4]),offsetY2=Math.round(Math.min(currentTransform[1],currentTransform[3])+currentTransform[5]);return{canvas:cachedImage,offsetX:offsetX2,offsetY:offsetY2}}scaled=cachedImage}scaled||(maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),putBinaryImageMask(maskCanvas.context,img));let maskToCanvas=_util2.Util.transform(currentTransform,[1/width,0,0,-1/height,0,0]);maskToCanvas=_util2.Util.transform(maskToCanvas,[1,0,0,1,0,-height]);const cord1=_util2.Util.applyTransform([0,0],maskToCanvas),cord2=_util2.Util.applyTransform([width,height],maskToCanvas),rect=_util2.Util.normalizeRect([cord1[0],cord1[1],cord2[0],cord2[1]]),drawnWidth=Math.round(rect[2]-rect[0])||1,drawnHeight=Math.round(rect[3]-rect[1])||1,fillCanvas=this.cachedCanvases.getCanvas("fillCanvas",drawnWidth,drawnHeight),fillCtx=fillCanvas.context,offsetX=Math.min(cord1[0],cord2[0]),offsetY=Math.min(cord1[1],cord2[1]);fillCtx.translate(-offsetX,-offsetY),fillCtx.transform(...maskToCanvas),scaled||(scaled=this._scaleImage(maskCanvas.canvas,(0,_display_utils2.getCurrentTransformInverse)(fillCtx)),scaled=scaled.img,cache&&isPatternFill&&cache.set(cacheKey,scaled)),fillCtx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils2.getCurrentTransform)(fillCtx),img.interpolate),drawImageAtIntegerCoords(fillCtx,scaled,0,0,scaled.width,scaled.height,0,0,width,height),fillCtx.globalCompositeOperation="source-in";const inverse=_util2.Util.transform((0,_display_utils2.getCurrentTransformInverse)(fillCtx),[1,0,0,1,-offsetX,-offsetY]);return fillCtx.fillStyle=isPatternFill?fillColor.getPattern(ctx,this,inverse,_pattern_helper.PathType.FILL):fillColor,fillCtx.fillRect(0,0,width,height),cache&&!isPatternFill&&(this.cachedCanvases.delete("fillCanvas"),cache.set(cacheKey,fillCanvas.canvas)),{canvas:fillCanvas.canvas,offsetX:Math.round(offsetX),offsetY:Math.round(offsetY)}}setLineWidth(width){width!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=width,this.ctx.lineWidth=width}setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style]}setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style]}setMiterLimit(limit){this.ctx.miterLimit=limit}setDash(dashArray,dashPhase){const ctx=this.ctx;ctx.setLineDash!==void 0&&(ctx.setLineDash(dashArray),ctx.lineDashOffset=dashPhase)}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(let i=0,ii=states.length;i<ii;i++){const state=states[i],key=state[0],value=state[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value[0],value[1]);break;case"CA":this.current.strokeAlpha=state[1];break;case"ca":this.current.fillAlpha=state[1],this.ctx.globalAlpha=state[1];break;case"BM":this.ctx.globalCompositeOperation=value;break;case"SMask":this.current.activeSMask=value?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=value}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const inSMaskMode=this.inSMaskMode;this.current.activeSMask&&!inSMaskMode?this.beginSMaskMode():!this.current.activeSMask&&inSMaskMode&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const drawnWidth=this.ctx.canvas.width,drawnHeight=this.ctx.canvas.height,cacheId="smaskGroupAt"+this.groupLevel,scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);this.suspendedCtx=this.ctx,this.ctx=scratchCanvas.context;const ctx=this.ctx;ctx.setTransform(...(0,_display_utils2.getCurrentTransform)(this.suspendedCtx)),copyCtxState(this.suspendedCtx,ctx),mirrorContextOperations(ctx,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(dirtyBox){if(!this.current.activeSMask)return;dirtyBox?(dirtyBox[0]=Math.floor(dirtyBox[0]),dirtyBox[1]=Math.floor(dirtyBox[1]),dirtyBox[2]=Math.ceil(dirtyBox[2]),dirtyBox[3]=Math.ceil(dirtyBox[3])):dirtyBox=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const smask=this.current.activeSMask,suspendedCtx=this.suspendedCtx;composeSMask(suspendedCtx,smask,this.ctx,dirtyBox),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(copyCtxState(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const old=this.current;this.stateStack.push(old),this.current=old.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),copyCtxState(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(ops,args,minMax){const ctx=this.ctx,current=this.current;let x=current.x,y=current.y,startX,startY;const currentTransform=(0,_display_utils2.getCurrentTransform)(ctx),isScalingMatrix=currentTransform[0]===0&&currentTransform[3]===0||currentTransform[1]===0&&currentTransform[2]===0,minMaxForBezier=isScalingMatrix?minMax.slice(0):null;for(let i=0,j=0,ii=ops.length;i<ii;i++)switch(ops[i]|0){case _util2.OPS.rectangle:x=args[j++],y=args[j++];const width=args[j++],height=args[j++],xw=x+width,yh=y+height;ctx.moveTo(x,y),width===0||height===0?ctx.lineTo(xw,yh):(ctx.lineTo(xw,y),ctx.lineTo(xw,yh),ctx.lineTo(x,yh)),isScalingMatrix||current.updateRectMinMax(currentTransform,[x,y,xw,yh]),ctx.closePath();break;case _util2.OPS.moveTo:x=args[j++],y=args[j++],ctx.moveTo(x,y),isScalingMatrix||current.updatePathMinMax(currentTransform,x,y);break;case _util2.OPS.lineTo:x=args[j++],y=args[j++],ctx.lineTo(x,y),isScalingMatrix||current.updatePathMinMax(currentTransform,x,y);break;case _util2.OPS.curveTo:startX=x,startY=y,x=args[j+4],y=args[j+5],ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y),current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],args[j+2],args[j+3],x,y,minMaxForBezier),j+=6;break;case _util2.OPS.curveTo2:startX=x,startY=y,ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]),current.updateCurvePathMinMax(currentTransform,startX,startY,x,y,args[j],args[j+1],args[j+2],args[j+3],minMaxForBezier),x=args[j+2],y=args[j+3],j+=4;break;case _util2.OPS.curveTo3:startX=x,startY=y,x=args[j+2],y=args[j+3],ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y),current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],x,y,x,y,minMaxForBezier),j+=4;break;case _util2.OPS.closePath:ctx.closePath();break}isScalingMatrix&&current.updateScalingPathMinMax(currentTransform,minMaxForBezier),current.setCurrentPoint(x,y)}closePath(){this.ctx.closePath()}stroke(consumePath){consumePath=typeof consumePath<"u"?consumePath:!0;const ctx=this.ctx,strokeColor=this.current.strokeColor;ctx.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof strokeColor=="object"&&strokeColor!==null&&strokeColor!==void 0&&strokeColor.getPattern?(ctx.save(),ctx.strokeStyle=strokeColor.getPattern(ctx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.STROKE),this.rescaleAndStroke(!1),ctx.restore()):this.rescaleAndStroke(!0)),consumePath&&this.consumePath(this.current.getClippedPathBoundingBox()),ctx.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(consumePath){consumePath=typeof consumePath<"u"?consumePath:!0;const ctx=this.ctx,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill;let needRestore=!1;isPatternFill&&(ctx.save(),ctx.fillStyle=fillColor.getPattern(ctx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL),needRestore=!0);const intersect=this.current.getClippedPathBoundingBox();this.contentVisible&&intersect!==null&&(this.pendingEOFill?(ctx.fill("evenodd"),this.pendingEOFill=!1):ctx.fill()),needRestore&&ctx.restore(),consumePath&&this.consumePath(intersect)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=_util2.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const paths=this.pendingTextPaths,ctx=this.ctx;if(paths===void 0){ctx.beginPath();return}ctx.save(),ctx.beginPath();for(const path of paths)ctx.setTransform(...path.transform),ctx.translate(path.x,path.y),path.addToPath(ctx,path.fontSize);ctx.restore(),ctx.clip(),ctx.beginPath(),delete this.pendingTextPaths}setCharSpacing(spacing){this.current.charSpacing=spacing}setWordSpacing(spacing){this.current.wordSpacing=spacing}setHScale(scale){this.current.textHScale=scale/100}setLeading(leading){this.current.leading=-leading}setFont(fontRefName,size){const fontObj=this.commonObjs.get(fontRefName),current=this.current;if(!fontObj)throw new Error(`Can't find font for ${fontRefName}`);if(current.fontMatrix=fontObj.fontMatrix||_util2.FONT_IDENTITY_MATRIX,(current.fontMatrix[0]===0||current.fontMatrix[3]===0)&&(0,_util2.warn)("Invalid font matrix for font "+fontRefName),size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,this.current.font=fontObj,this.current.fontSize=size,fontObj.isType3Font)return;const name=fontObj.loadedName||"sans-serif";let bold="normal";fontObj.black?bold="900":fontObj.bold&&(bold="bold");const italic=fontObj.italic?"italic":"normal",typeface=`"${name}", ${fontObj.fallbackName}`;let browserFontSize=size;size<MIN_FONT_SIZE?browserFontSize=MIN_FONT_SIZE:size>MAX_FONT_SIZE&&(browserFontSize=MAX_FONT_SIZE),this.current.fontSizeScale=size/browserFontSize,this.ctx.font=`${italic} ${bold} ${browserFontSize}px ${typeface}`}setTextRenderingMode(mode){this.current.textRenderingMode=mode}setTextRise(rise){this.current.textRise=rise}moveText(x,y){this.current.x=this.current.lineX+=x,this.current.y=this.current.lineY+=y}setLeadingMoveText(x,y){this.setLeading(-y),this.moveText(x,y)}setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f],this.current.textMatrixScale=Math.hypot(a,b),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(character,x,y,patternTransform){const ctx=this.ctx,current=this.current,font=current.font,textRenderingMode=current.textRenderingMode,fontSize=current.fontSize/current.fontSizeScale,fillStrokeMode=textRenderingMode&_util2.TextRenderingMode.FILL_STROKE_MASK,isAddToPathSet=!!(textRenderingMode&_util2.TextRenderingMode.ADD_TO_PATH_FLAG),patternFill=current.patternFill&&!font.missingFile;let addToPath;(font.disableFontFace||isAddToPathSet||patternFill)&&(addToPath=font.getPathGenerator(this.commonObjs,character)),font.disableFontFace||patternFill?(ctx.save(),ctx.translate(x,y),ctx.beginPath(),addToPath(ctx,fontSize),patternTransform&&ctx.setTransform(...patternTransform),(fillStrokeMode===_util2.TextRenderingMode.FILL||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&ctx.fill(),(fillStrokeMode===_util2.TextRenderingMode.STROKE||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&ctx.stroke(),ctx.restore()):((fillStrokeMode===_util2.TextRenderingMode.FILL||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&ctx.fillText(character,x,y),(fillStrokeMode===_util2.TextRenderingMode.STROKE||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&ctx.strokeText(character,x,y)),isAddToPathSet&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,_display_utils2.getCurrentTransform)(ctx),x,y,fontSize,addToPath})}get isFontSubpixelAAEnabled(){const{context:ctx}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);ctx.scale(1.5,1),ctx.fillText("I",0,10);const data=ctx.getImageData(0,0,10,10).data;let enabled=!1;for(let i=3;i<data.length;i+=4)if(data[i]>0&&data[i]<255){enabled=!0;break}return(0,_util2.shadow)(this,"isFontSubpixelAAEnabled",enabled)}showText(glyphs){const current=this.current,font=current.font;if(font.isType3Font)return this.showType3Text(glyphs);const fontSize=current.fontSize;if(fontSize===0)return;const ctx=this.ctx,fontSizeScale=current.fontSizeScale,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,glyphsLength=glyphs.length,vertical=font.vertical,spacingDir=vertical?1:-1,defaultVMetrics=font.defaultVMetrics,widthAdvanceScale=fontSize*current.fontMatrix[0],simpleFillText=current.textRenderingMode===_util2.TextRenderingMode.FILL&&!font.disableFontFace&&!current.patternFill;ctx.save(),ctx.transform(...current.textMatrix),ctx.translate(current.x,current.y+current.textRise),fontDirection>0?ctx.scale(textHScale,-1):ctx.scale(textHScale,1);let patternTransform;if(current.patternFill){ctx.save();const pattern=current.fillColor.getPattern(ctx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL);patternTransform=(0,_display_utils2.getCurrentTransform)(ctx),ctx.restore(),ctx.fillStyle=pattern}let lineWidth=current.lineWidth;const scale=current.textMatrixScale;if(scale===0||lineWidth===0){const fillStrokeMode=current.textRenderingMode&_util2.TextRenderingMode.FILL_STROKE_MASK;(fillStrokeMode===_util2.TextRenderingMode.STROKE||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE)&&(lineWidth=this.getSinglePixelWidth())}else lineWidth/=scale;fontSizeScale!==1&&(ctx.scale(fontSizeScale,fontSizeScale),lineWidth/=fontSizeScale),ctx.lineWidth=lineWidth;let x=0,i;for(i=0;i<glyphsLength;++i){const glyph=glyphs[i];if(typeof glyph=="number"){x+=spacingDir*glyph*fontSize/1e3;continue}let restoreNeeded=!1;const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,character=glyph.fontChar,accent=glyph.accent;let scaledX,scaledY,width=glyph.width;if(vertical){const vmetric=glyph.vmetric||defaultVMetrics,vx=-(glyph.vmetric?vmetric[1]:width*.5)*widthAdvanceScale,vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width,scaledX=vx/fontSizeScale,scaledY=(x+vy)/fontSizeScale}else scaledX=x/fontSizeScale,scaledY=0;if(font.remeasure&&width>0){const measuredWidth=ctx.measureText(character).width*1e3/fontSize*fontSizeScale;if(width<measuredWidth&&this.isFontSubpixelAAEnabled){const characterScaleX=width/measuredWidth;restoreNeeded=!0,ctx.save(),ctx.scale(characterScaleX,1),scaledX/=characterScaleX}else width!==measuredWidth&&(scaledX+=(width-measuredWidth)/2e3*fontSize/fontSizeScale)}if(this.contentVisible&&(glyph.isInFont||font.missingFile)){if(simpleFillText&&!accent)ctx.fillText(character,scaledX,scaledY);else if(this.paintChar(character,scaledX,scaledY,patternTransform),accent){const scaledAccentX=scaledX+fontSize*accent.offset.x/fontSizeScale,scaledAccentY=scaledY-fontSize*accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY,patternTransform)}}let charWidth;vertical?charWidth=width*widthAdvanceScale-spacing*fontDirection:charWidth=width*widthAdvanceScale+spacing*fontDirection,x+=charWidth,restoreNeeded&&ctx.restore()}vertical?current.y-=x:current.x+=x*textHScale,ctx.restore(),this.compose()}showType3Text(glyphs){const ctx=this.ctx,current=this.current,font=current.font,fontSize=current.fontSize,fontDirection=current.fontDirection,spacingDir=font.vertical?1:-1,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,textHScale=current.textHScale*fontDirection,fontMatrix=current.fontMatrix||_util2.FONT_IDENTITY_MATRIX,glyphsLength=glyphs.length,isTextInvisible=current.textRenderingMode===_util2.TextRenderingMode.INVISIBLE;let i,glyph,width,spacingLength;if(!(isTextInvisible||fontSize===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,ctx.save(),ctx.transform(...current.textMatrix),ctx.translate(current.x,current.y),ctx.scale(textHScale,fontDirection),i=0;i<glyphsLength;++i){if(glyph=glyphs[i],typeof glyph=="number"){spacingLength=spacingDir*glyph*fontSize/1e3,this.ctx.translate(spacingLength,0),current.x+=spacingLength*textHScale;continue}const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){(0,_util2.warn)(`Type3 character "${glyph.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=glyph,this.save(),ctx.scale(fontSize,fontSize),ctx.transform(...fontMatrix),this.executeOperatorList(operatorList),this.restore()),width=_util2.Util.applyTransform([glyph.width,0],fontMatrix)[0]*fontSize+spacing,ctx.translate(width,0),current.x+=width*textHScale}ctx.restore(),this.processingType3=null}}setCharWidth(xWidth,yWidth){}setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly),this.ctx.clip(),this.endPath()}getColorN_Pattern(IR){let pattern;if(IR[0]==="TilingPattern"){const color=IR[1],baseTransform=this.baseTransform||(0,_display_utils2.getCurrentTransform)(this.ctx),canvasGraphicsFactory={createCanvasGraphics:ctx=>new _CanvasGraphics2(ctx,this.commonObjs,this.objs,this.canvasFactory)};pattern=new _pattern_helper.TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform)}else pattern=this._getPattern(IR[1],IR[2]);return pattern}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(r,g,b){var _this$selectColor;const color=((_this$selectColor=this.selectColor)===null||_this$selectColor===void 0?void 0:_this$selectColor.call(this,r,g,b))||_util2.Util.makeHexColor(r,g,b);this.ctx.strokeStyle=color,this.current.strokeColor=color}setFillRGBColor(r,g,b){var _this$selectColor2;const color=((_this$selectColor2=this.selectColor)===null||_this$selectColor2===void 0?void 0:_this$selectColor2.call(this,r,g,b))||_util2.Util.makeHexColor(r,g,b);this.ctx.fillStyle=color,this.current.fillColor=color,this.current.patternFill=!1}_getPattern(objId){let matrix=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,pattern;return this.cachedPatterns.has(objId)?pattern=this.cachedPatterns.get(objId):(pattern=(0,_pattern_helper.getShadingPattern)(this.objs.get(objId)),this.cachedPatterns.set(objId,pattern)),matrix&&(pattern.matrix=matrix),pattern}shadingFill(objId){if(!this.contentVisible)return;const ctx=this.ctx;this.save();const pattern=this._getPattern(objId);ctx.fillStyle=pattern.getPattern(ctx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.SHADING);const inv=(0,_display_utils2.getCurrentTransformInverse)(ctx);if(inv){const canvas=ctx.canvas,width=canvas.width,height=canvas.height,bl=_util2.Util.applyTransform([0,0],inv),br=_util2.Util.applyTransform([0,height],inv),ul=_util2.Util.applyTransform([width,0],inv),ur=_util2.Util.applyTransform([width,height],inv),x0=Math.min(bl[0],br[0],ul[0],ur[0]),y0=Math.min(bl[1],br[1],ul[1],ur[1]),x1=Math.max(bl[0],br[0],ul[0],ur[0]),y1=Math.max(bl[1],br[1],ul[1],ur[1]);this.ctx.fillRect(x0,y0,x1-x0,y1-y0)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,_util2.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,_util2.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(matrix,bbox){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(matrix)&&matrix.length===6&&this.transform(...matrix),this.baseTransform=(0,_display_utils2.getCurrentTransform)(this.ctx),bbox)){const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height),this.current.updateRectMinMax((0,_display_utils2.getCurrentTransform)(this.ctx),bbox),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(group){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const currentCtx=this.ctx;group.isolated||(0,_util2.info)("TODO: Support non-isolated groups."),group.knockout&&(0,_util2.warn)("Knockout groups not supported.");const currentTransform=(0,_display_utils2.getCurrentTransform)(currentCtx);if(group.matrix&&currentCtx.transform(...group.matrix),!group.bbox)throw new Error("Bounding box is required.");let bounds=_util2.Util.getAxialAlignedBoundingBox(group.bbox,(0,_display_utils2.getCurrentTransform)(currentCtx));const canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=_util2.Util.intersect(bounds,canvasBounds)||[0,0,0,0];const offsetX=Math.floor(bounds[0]),offsetY=Math.floor(bounds[1]);let drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1),drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1),scaleX=1,scaleY=1;drawnWidth>MAX_GROUP_SIZE&&(scaleX=drawnWidth/MAX_GROUP_SIZE,drawnWidth=MAX_GROUP_SIZE),drawnHeight>MAX_GROUP_SIZE&&(scaleY=drawnHeight/MAX_GROUP_SIZE,drawnHeight=MAX_GROUP_SIZE),this.current.startNewPathAndClipBox([0,0,drawnWidth,drawnHeight]);let cacheId="groupAt"+this.groupLevel;group.smask&&(cacheId+="_smask_"+this.smaskCounter++%2);const scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight),groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX,1/scaleY),groupCtx.translate(-offsetX,-offsetY),groupCtx.transform(...currentTransform),group.smask?this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX,offsetY,scaleX,scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null}):(currentCtx.setTransform(1,0,0,1,0,0),currentCtx.translate(offsetX,offsetY),currentCtx.scale(scaleX,scaleY),currentCtx.save()),copyCtxState(currentCtx,groupCtx),this.ctx=groupCtx,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(currentCtx),this.groupLevel++}endGroup(group){if(!this.contentVisible)return;this.groupLevel--;const groupCtx=this.ctx,ctx=this.groupStack.pop();if(this.ctx=ctx,this.ctx.imageSmoothingEnabled=!1,group.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const currentMtx=(0,_display_utils2.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...currentMtx);const dirtyBox=_util2.Util.getAxialAlignedBoundingBox([0,0,groupCtx.canvas.width,groupCtx.canvas.height],currentMtx);this.ctx.drawImage(groupCtx.canvas,0,0),this.ctx.restore(),this.compose(dirtyBox)}}beginAnnotation(id,rect,transform,matrix,hasOwnCanvas){if(_classPrivateMethodGet2(this,_restoreInitialState,_restoreInitialState2).call(this),resetCtxToDefault(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(rect)&&rect.length===4){const width=rect[2]-rect[0],height=rect[3]-rect[1];if(hasOwnCanvas&&this.annotationCanvasMap){transform=transform.slice(),transform[4]-=rect[0],transform[5]-=rect[1],rect=rect.slice(),rect[0]=rect[1]=0,rect[2]=width,rect[3]=height;const[scaleX,scaleY]=_util2.Util.singularValueDecompose2dScale((0,_display_utils2.getCurrentTransform)(this.ctx)),{viewportScale}=this,canvasWidth=Math.ceil(width*this.outputScaleX*viewportScale),canvasHeight=Math.ceil(height*this.outputScaleY*viewportScale);this.annotationCanvas=this.canvasFactory.create(canvasWidth,canvasHeight);const{canvas,context}=this.annotationCanvas;this.annotationCanvasMap.set(id,canvas),this.annotationCanvas.savedCtx=this.ctx,this.ctx=context,this.ctx.setTransform(scaleX,0,0,-scaleY,0,height*scaleY),resetCtxToDefault(this.ctx,this.foregroundColor)}else resetCtxToDefault(this.ctx,this.foregroundColor),this.ctx.rect(rect[0],rect[1],width,height),this.ctx.clip(),this.endPath()}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...transform),this.transform(...matrix)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(img){if(!this.contentVisible)return;const count=img.count;img=this.getObject(img.data,img),img.count=count;const ctx=this.ctx,glyph=this.processingType3;if(glyph&&(glyph.compiled===void 0&&(glyph.compiled=compileType3Glyph(img)),glyph.compiled)){glyph.compiled(ctx);return}const mask=this._createMaskCanvas(img),maskCanvas=mask.canvas;ctx.save(),ctx.setTransform(1,0,0,1,0,0),ctx.drawImage(maskCanvas,mask.offsetX,mask.offsetY),ctx.restore(),this.compose()}paintImageMaskXObjectRepeat(img,scaleX){let skewX=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,skewY=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,scaleY=arguments.length>4?arguments[4]:void 0,positions=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;img=this.getObject(img.data,img);const ctx=this.ctx;ctx.save();const currentTransform=(0,_display_utils2.getCurrentTransform)(ctx);ctx.transform(scaleX,skewX,skewY,scaleY,0,0);const mask=this._createMaskCanvas(img);ctx.setTransform(1,0,0,1,0,0);for(let i=0,ii=positions.length;i<ii;i+=2){const trans=_util2.Util.transform(currentTransform,[scaleX,skewX,skewY,scaleY,positions[i],positions[i+1]]),[x,y]=_util2.Util.applyTransform([0,0],trans);ctx.drawImage(mask.canvas,x,y)}ctx.restore(),this.compose()}paintImageMaskXObjectGroup(images){if(!this.contentVisible)return;const ctx=this.ctx,fillColor=this.current.fillColor,isPatternFill=this.current.patternFill;for(const image of images){const{data,width,height,transform}=image,maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height),maskCtx=maskCanvas.context;maskCtx.save();const img=this.getObject(data,image);putBinaryImageMask(maskCtx,img),maskCtx.globalCompositeOperation="source-in",maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this,(0,_display_utils2.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL):fillColor,maskCtx.fillRect(0,0,width,height),maskCtx.restore(),ctx.save(),ctx.transform(...transform),ctx.scale(1,-1),drawImageAtIntegerCoords(ctx,maskCanvas.canvas,0,0,width,height,0,-1,1,1),ctx.restore()}this.compose()}paintImageXObject(objId){if(!this.contentVisible)return;const imgData=this.getObject(objId);if(!imgData){(0,_util2.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(imgData)}paintImageXObjectRepeat(objId,scaleX,scaleY,positions){if(!this.contentVisible)return;const imgData=this.getObject(objId);if(!imgData){(0,_util2.warn)("Dependent image isn't ready yet");return}const width=imgData.width,height=imgData.height,map=[];for(let i=0,ii=positions.length;i<ii;i+=2)map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height});this.paintInlineImageXObjectGroup(imgData,map)}paintInlineImageXObject(imgData){if(!this.contentVisible)return;const width=imgData.width,height=imgData.height,ctx=this.ctx;this.save(),ctx.scale(1/width,-1/height);let imgToPaint;if(typeof HTMLElement=="function"&&imgData instanceof HTMLElement||!imgData.data)imgToPaint=imgData;else{const tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",width,height),tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData,this.current.transferMaps),imgToPaint=tmpCanvas.canvas}const scaled=this._scaleImage(imgToPaint,(0,_display_utils2.getCurrentTransformInverse)(ctx));ctx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils2.getCurrentTransform)(ctx),imgData.interpolate);const[rWidth,rHeight]=drawImageAtIntegerCoords(ctx,scaled.img,0,0,scaled.paintWidth,scaled.paintHeight,0,-height,width,height);if(this.imageLayer){const[left,top]=_util2.Util.applyTransform([0,-height],(0,_display_utils2.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData,left,top,width:rWidth,height:rHeight})}this.compose(),this.restore()}paintInlineImageXObjectGroup(imgData,map){if(!this.contentVisible)return;const ctx=this.ctx,w=imgData.width,h=imgData.height,tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",w,h),tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData,this.current.transferMaps);for(const entry of map){if(ctx.save(),ctx.transform(...entry.transform),ctx.scale(1,-1),drawImageAtIntegerCoords(ctx,tmpCanvas.canvas,entry.x,entry.y,entry.w,entry.h,0,-1,1,1),this.imageLayer){const[left,top]=_util2.Util.applyTransform([entry.x,entry.y],(0,_display_utils2.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData,left,top,width:w,height:h})}ctx.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(tag){}markPointProps(tag,properties){}beginMarkedContent(tag){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(tag,properties){tag==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(properties)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(clipBox){const isEmpty=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(clipBox);const ctx=this.ctx;this.pendingClip&&(isEmpty||(this.pendingClip===EO_CLIP?ctx.clip("evenodd"):ctx.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),ctx.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const m=(0,_display_utils2.getCurrentTransform)(this.ctx);if(m[1]===0&&m[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));else{const absDet=Math.abs(m[0]*m[3]-m[2]*m[1]),normX=Math.hypot(m[0],m[2]),normY=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(normX,normY)/absDet}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth}=this.current,m=(0,_display_utils2.getCurrentTransform)(this.ctx);let scaleX,scaleY;if(m[1]===0&&m[2]===0){const normX=Math.abs(m[0]),normY=Math.abs(m[3]);if(lineWidth===0)scaleX=1/normX,scaleY=1/normY;else{const scaledXLineWidth=normX*lineWidth,scaledYLineWidth=normY*lineWidth;scaleX=scaledXLineWidth<1?1/scaledXLineWidth:1,scaleY=scaledYLineWidth<1?1/scaledYLineWidth:1}}else{const absDet=Math.abs(m[0]*m[3]-m[2]*m[1]),normX=Math.hypot(m[0],m[1]),normY=Math.hypot(m[2],m[3]);if(lineWidth===0)scaleX=normY/absDet,scaleY=normX/absDet;else{const baseArea=lineWidth*absDet;scaleX=normY>baseArea?normY/baseArea:1,scaleY=normX>baseArea?normX/baseArea:1}}this._cachedScaleForStroking=[scaleX,scaleY]}return this._cachedScaleForStroking}rescaleAndStroke(saveRestore){const{ctx}=this,{lineWidth}=this.current,[scaleX,scaleY]=this.getScaleForStroking();if(ctx.lineWidth=lineWidth||1,scaleX===1&&scaleY===1){ctx.stroke();return}let savedMatrix,savedDashes,savedDashOffset;saveRestore&&(savedMatrix=(0,_display_utils2.getCurrentTransform)(ctx),savedDashes=ctx.getLineDash().slice(),savedDashOffset=ctx.lineDashOffset),ctx.scale(scaleX,scaleY);const scale=Math.max(scaleX,scaleY);ctx.setLineDash(ctx.getLineDash().map(x=>x/scale)),ctx.lineDashOffset/=scale,ctx.stroke(),saveRestore&&(ctx.setTransform(...savedMatrix),ctx.setLineDash(savedDashes),ctx.lineDashOffset=savedDashOffset)}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}};__name(_CanvasGraphics,"CanvasGraphics");let CanvasGraphics=_CanvasGraphics;exports2.CanvasGraphics=CanvasGraphics;function _restoreInitialState2(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}__name2(_restoreInitialState2,"_restoreInitialState2"),__name(_restoreInitialState2,"_restoreInitialState2");for(const op in _util2.OPS)CanvasGraphics.prototype[op]!==void 0&&(CanvasGraphics.prototype[_util2.OPS[op]]=CanvasGraphics.prototype[op])},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.TilingPattern=exports2.PathType=void 0,exports2.getShadingPattern=getShadingPattern;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(133),_is_node2=__w_pdfjs_require__2(3);const PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};exports2.PathType=PathType;function applyBoundingBox(ctx,bbox){if(!bbox||_is_node2.isNodeJS)return;const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],region=new Path2D;region.rect(bbox[0],bbox[1],width,height),ctx.clip(region)}__name2(applyBoundingBox,"applyBoundingBox"),__name(applyBoundingBox,"applyBoundingBox");const _BaseShadingPattern=class _BaseShadingPattern2{static{__name2(this,"_BaseShadingPattern")}constructor(){this.constructor===_BaseShadingPattern2&&(0,_util2.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,_util2.unreachable)("Abstract method `getPattern` called.")}};__name(_BaseShadingPattern,"BaseShadingPattern");let BaseShadingPattern=_BaseShadingPattern;const _RadialAxialShadingPattern=class extends BaseShadingPattern{static{__name2(this,"_RadialAxialShadingPattern")}constructor(IR){super(),this._type=IR[1],this._bbox=IR[2],this._colorStops=IR[3],this._p0=IR[4],this._p1=IR[5],this._r0=IR[6],this._r1=IR[7],this.matrix=null}_createGradient(ctx){let grad;this._type==="axial"?grad=ctx.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(grad=ctx.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const colorStop of this._colorStops)grad.addColorStop(colorStop[0],colorStop[1]);return grad}getPattern(ctx,owner,inverse,pathType){let pattern;if(pathType===PathType.STROKE||pathType===PathType.FILL){const ownerBBox=owner.current.getClippedPathBoundingBox(pathType,(0,_display_utils2.getCurrentTransform)(ctx))||[0,0,0,0],width=Math.ceil(ownerBBox[2]-ownerBBox[0])||1,height=Math.ceil(ownerBBox[3]-ownerBBox[1])||1,tmpCanvas=owner.cachedCanvases.getCanvas("pattern",width,height,!0),tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height),tmpCtx.beginPath(),tmpCtx.rect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height),tmpCtx.translate(-ownerBBox[0],-ownerBBox[1]),inverse=_util2.Util.transform(inverse,[1,0,0,1,ownerBBox[0],ownerBBox[1]]),tmpCtx.transform(...owner.baseTransform),this.matrix&&tmpCtx.transform(...this.matrix),applyBoundingBox(tmpCtx,this._bbox),tmpCtx.fillStyle=this._createGradient(tmpCtx),tmpCtx.fill(),pattern=ctx.createPattern(tmpCanvas.canvas,"no-repeat");const domMatrix=new DOMMatrix(inverse);try{pattern.setTransform(domMatrix)}catch(ex){(0,_util2.warn)(`RadialAxialShadingPattern.getPattern: "${ex?.message}".`)}}else applyBoundingBox(ctx,this._bbox),pattern=this._createGradient(ctx);return pattern}};__name(_RadialAxialShadingPattern,"RadialAxialShadingPattern");let RadialAxialShadingPattern=_RadialAxialShadingPattern;function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){const coords=context.coords,colors=context.colors,bytes=data.data,rowSize=data.width*4;let tmp;coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp),coords[p2+1]>coords[p3+1]&&(tmp=p2,p2=p3,p3=tmp,tmp=c2,c2=c3,c3=tmp),coords[p1+1]>coords[p2+1]&&(tmp=p1,p1=p2,p2=tmp,tmp=c1,c1=c2,c2=tmp);const x1=(coords[p1]+context.offsetX)*context.scaleX,y1=(coords[p1+1]+context.offsetY)*context.scaleY,x2=(coords[p2]+context.offsetX)*context.scaleX,y2=(coords[p2+1]+context.offsetY)*context.scaleY,x3=(coords[p3]+context.offsetX)*context.scaleX,y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3)return;const c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2],c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2],c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2],minY=Math.round(y1),maxY=Math.round(y3);let xa,car,cag,cab,xb,cbr,cbg,cbb;for(let y=minY;y<=maxY;y++){if(y<y2){let k2;y<y1?k2=0:k2=(y1-y)/(y1-y2),xa=x1-(x1-x2)*k2,car=c1r-(c1r-c2r)*k2,cag=c1g-(c1g-c2g)*k2,cab=c1b-(c1b-c2b)*k2}else{let k2;y>y3?k2=1:y2===y3?k2=0:k2=(y2-y)/(y2-y3),xa=x2-(x2-x3)*k2,car=c2r-(c2r-c3r)*k2,cag=c2g-(c2g-c3g)*k2,cab=c2b-(c2b-c3b)*k2}let k;y<y1?k=0:y>y3?k=1:k=(y1-y)/(y1-y3),xb=x1-(x1-x3)*k,cbr=c1r-(c1r-c3r)*k,cbg=c1g-(c1g-c3g)*k,cbb=c1b-(c1b-c3b)*k;const x1_=Math.round(Math.min(xa,xb)),x2_=Math.round(Math.max(xa,xb));let j=rowSize*y+x1_*4;for(let x=x1_;x<=x2_;x++)k=(xa-x)/(xa-xb),k<0?k=0:k>1&&(k=1),bytes[j++]=car-(car-cbr)*k|0,bytes[j++]=cag-(cag-cbg)*k|0,bytes[j++]=cab-(cab-cbb)*k|0,bytes[j++]=255}}__name2(drawTriangle,"drawTriangle"),__name(drawTriangle,"drawTriangle");function drawFigure(data,figure,context){const ps=figure.coords,cs=figure.colors;let i,ii;switch(figure.type){case"lattice":const verticesPerRow=figure.verticesPerRow,rows=Math.floor(ps.length/verticesPerRow)-1,cols=verticesPerRow-1;for(i=0;i<rows;i++){let q=i*verticesPerRow;for(let j=0;j<cols;j++,q++)drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]),drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow])}break;case"triangles":for(i=0,ii=ps.length;i<ii;i+=3)drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2]);break;default:throw new Error("illegal figure")}}__name2(drawFigure,"drawFigure"),__name(drawFigure,"drawFigure");const _MeshShadingPattern=class extends BaseShadingPattern{static{__name2(this,"_MeshShadingPattern")}constructor(IR){super(),this._coords=IR[2],this._colors=IR[3],this._figures=IR[4],this._bounds=IR[5],this._bbox=IR[7],this._background=IR[8],this.matrix=null}_createMeshCanvas(combinedScale,backgroundColor,cachedCanvases){const offsetX=Math.floor(this._bounds[0]),offsetY=Math.floor(this._bounds[1]),boundsWidth=Math.ceil(this._bounds[2])-offsetX,boundsHeight=Math.ceil(this._bounds[3])-offsetY,width=Math.min(Math.ceil(Math.abs(boundsWidth*combinedScale[0]*1.1)),3e3),height=Math.min(Math.ceil(Math.abs(boundsHeight*combinedScale[1]*1.1)),3e3),scaleX=boundsWidth/width,scaleY=boundsHeight/height,context={coords:this._coords,colors:this._colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY},paddedWidth=width+2*2,paddedHeight=height+2*2,tmpCanvas=cachedCanvases.getCanvas("mesh",paddedWidth,paddedHeight,!1),tmpCtx=tmpCanvas.context,data=tmpCtx.createImageData(width,height);if(backgroundColor){const bytes=data.data;for(let i=0,ii=bytes.length;i<ii;i+=4)bytes[i]=backgroundColor[0],bytes[i+1]=backgroundColor[1],bytes[i+2]=backgroundColor[2],bytes[i+3]=255}for(const figure of this._figures)drawFigure(data,figure,context);return tmpCtx.putImageData(data,2,2),{canvas:tmpCanvas.canvas,offsetX:offsetX-2*scaleX,offsetY:offsetY-2*scaleY,scaleX,scaleY}}getPattern(ctx,owner,inverse,pathType){applyBoundingBox(ctx,this._bbox);let scale;if(pathType===PathType.SHADING)scale=_util2.Util.singularValueDecompose2dScale((0,_display_utils2.getCurrentTransform)(ctx));else if(scale=_util2.Util.singularValueDecompose2dScale(owner.baseTransform),this.matrix){const matrixScale=_util2.Util.singularValueDecompose2dScale(this.matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]]}const temporaryPatternCanvas=this._createMeshCanvas(scale,pathType===PathType.SHADING?null:this._background,owner.cachedCanvases);return pathType!==PathType.SHADING&&(ctx.setTransform(...owner.baseTransform),this.matrix&&ctx.transform(...this.matrix)),ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY),ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY),ctx.createPattern(temporaryPatternCanvas.canvas,"no-repeat")}};__name(_MeshShadingPattern,"MeshShadingPattern");let MeshShadingPattern=_MeshShadingPattern;const _DummyShadingPattern=class extends BaseShadingPattern{static{__name2(this,"_DummyShadingPattern")}getPattern(){return"hotpink"}};__name(_DummyShadingPattern,"DummyShadingPattern");let DummyShadingPattern=_DummyShadingPattern;function getShadingPattern(IR){switch(IR[0]){case"RadialAxial":return new RadialAxialShadingPattern(IR);case"Mesh":return new MeshShadingPattern(IR);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${IR[0]}`)}__name2(getShadingPattern,"getShadingPattern"),__name(getShadingPattern,"getShadingPattern");const PaintType={COLORED:1,UNCOLORED:2},_TilingPattern=class _TilingPattern2{static{__name2(this,"_TilingPattern")}static get MAX_PATTERN_SIZE(){return(0,_util2.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(IR,color,ctx,canvasGraphicsFactory,baseTransform){this.operatorList=IR[2],this.matrix=IR[3]||[1,0,0,1,0,0],this.bbox=IR[4],this.xstep=IR[5],this.ystep=IR[6],this.paintType=IR[7],this.tilingType=IR[8],this.color=color,this.ctx=ctx,this.canvasGraphicsFactory=canvasGraphicsFactory,this.baseTransform=baseTransform}createPatternCanvas(owner){const operatorList=this.operatorList,bbox=this.bbox,xstep=this.xstep,ystep=this.ystep,paintType=this.paintType,tilingType=this.tilingType,color=this.color,canvasGraphicsFactory=this.canvasGraphicsFactory;(0,_util2.info)("TilingType: "+tilingType);const x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3],matrixScale=_util2.Util.singularValueDecompose2dScale(this.matrix),curMatrixScale=_util2.Util.singularValueDecompose2dScale(this.baseTransform),combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]],dimx=this.getSizeAndScale(xstep,this.ctx.canvas.width,combinedScale[0]),dimy=this.getSizeAndScale(ystep,this.ctx.canvas.height,combinedScale[1]),tmpCanvas=owner.cachedCanvases.getCanvas("pattern",dimx.size,dimy.size,!0),tmpCtx=tmpCanvas.context,graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);graphics.groupLevel=owner.groupLevel,this.setFillAndStrokeStyleToContext(graphics,paintType,color);let adjustedX0=x0,adjustedY0=y0,adjustedX1=x1,adjustedY1=y1;return x0<0&&(adjustedX0=0,adjustedX1+=Math.abs(x0)),y0<0&&(adjustedY0=0,adjustedY1+=Math.abs(y0)),tmpCtx.translate(-(dimx.scale*adjustedX0),-(dimy.scale*adjustedY0)),graphics.transform(dimx.scale,0,0,dimy.scale,0,0),tmpCtx.save(),this.clipBbox(graphics,adjustedX0,adjustedY0,adjustedX1,adjustedY1),graphics.baseTransform=(0,_display_utils2.getCurrentTransform)(graphics.ctx),graphics.executeOperatorList(operatorList),graphics.endDrawing(),{canvas:tmpCanvas.canvas,scaleX:dimx.scale,scaleY:dimy.scale,offsetX:adjustedX0,offsetY:adjustedY0}}getSizeAndScale(step,realOutputSize,scale){step=Math.abs(step);const maxSize=Math.max(_TilingPattern2.MAX_PATTERN_SIZE,realOutputSize);let size=Math.ceil(step*scale);return size>=maxSize?size=maxSize:scale=size/step,{scale,size}}clipBbox(graphics,x0,y0,x1,y1){const bboxWidth=x1-x0,bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight),graphics.current.updateRectMinMax((0,_display_utils2.getCurrentTransform)(graphics.ctx),[x0,y0,x1,y1]),graphics.clip(),graphics.endPath()}setFillAndStrokeStyleToContext(graphics,paintType,color){const context=graphics.ctx,current=graphics.current;switch(paintType){case PaintType.COLORED:const ctx=this.ctx;context.fillStyle=ctx.fillStyle,context.strokeStyle=ctx.strokeStyle,current.fillColor=ctx.fillStyle,current.strokeColor=ctx.strokeStyle;break;case PaintType.UNCOLORED:const cssColor=_util2.Util.makeHexColor(color[0],color[1],color[2]);context.fillStyle=cssColor,context.strokeStyle=cssColor,current.fillColor=cssColor,current.strokeColor=cssColor;break;default:throw new _util2.FormatError(`Unsupported paint type: ${paintType}`)}}getPattern(ctx,owner,inverse,pathType){let matrix=inverse;pathType!==PathType.SHADING&&(matrix=_util2.Util.transform(matrix,owner.baseTransform),this.matrix&&(matrix=_util2.Util.transform(matrix,this.matrix)));const temporaryPatternCanvas=this.createPatternCanvas(owner);let domMatrix=new DOMMatrix(matrix);domMatrix=domMatrix.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY),domMatrix=domMatrix.scale(1/temporaryPatternCanvas.scaleX,1/temporaryPatternCanvas.scaleY);const pattern=ctx.createPattern(temporaryPatternCanvas.canvas,"repeat");try{pattern.setTransform(domMatrix)}catch(ex){(0,_util2.warn)(`TilingPattern.getPattern: "${ex?.message}".`)}return pattern}};__name(_TilingPattern,"TilingPattern");let TilingPattern=_TilingPattern;exports2.TilingPattern=TilingPattern},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.applyMaskImageData=applyMaskImageData;var _util2=__w_pdfjs_require__2(1);function applyMaskImageData(_ref){let{src,srcPos=0,dest,destPos=0,width,height,inverseDecode=!1}=_ref;const opaque=_util2.FeatureTest.isLittleEndian?4278190080:255,[zeroMapping,oneMapping]=inverseDecode?[0,opaque]:[opaque,0],widthInSource=width>>3,widthRemainder=width&7,srcLength=src.length;dest=new Uint32Array(dest.buffer);for(let i=0;i<height;i++){for(const max=srcPos+widthInSource;srcPos<max;srcPos++){const elem2=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=elem2&128?oneMapping:zeroMapping,dest[destPos++]=elem2&64?oneMapping:zeroMapping,dest[destPos++]=elem2&32?oneMapping:zeroMapping,dest[destPos++]=elem2&16?oneMapping:zeroMapping,dest[destPos++]=elem2&8?oneMapping:zeroMapping,dest[destPos++]=elem2&4?oneMapping:zeroMapping,dest[destPos++]=elem2&2?oneMapping:zeroMapping,dest[destPos++]=elem2&1?oneMapping:zeroMapping}if(widthRemainder===0)continue;const elem=srcPos<srcLength?src[srcPos++]:255;for(let j=0;j<widthRemainder;j++)dest[destPos++]=elem&1<<7-j?oneMapping:zeroMapping}return{srcPos,destPos}}__name2(applyMaskImageData,"applyMaskImageData"),__name(applyMaskImageData,"applyMaskImageData")},(__unused_webpack_module2,exports2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.GlobalWorkerOptions=void 0;const GlobalWorkerOptions=Object.create(null);exports2.GlobalWorkerOptions=GlobalWorkerOptions,GlobalWorkerOptions.workerPort=GlobalWorkerOptions.workerPort===void 0?null:GlobalWorkerOptions.workerPort,GlobalWorkerOptions.workerSrc=GlobalWorkerOptions.workerSrc===void 0?"":GlobalWorkerOptions.workerSrc},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.MessageHandler=void 0;var _util2=__w_pdfjs_require__2(1);const CallbackKind={UNKNOWN:0,DATA:1,ERROR:2},StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(reason){switch(reason instanceof Error||typeof reason=="object"&&reason!==null||(0,_util2.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),reason.name){case"AbortException":return new _util2.AbortException(reason.message);case"MissingPDFException":return new _util2.MissingPDFException(reason.message);case"PasswordException":return new _util2.PasswordException(reason.message,reason.code);case"UnexpectedResponseException":return new _util2.UnexpectedResponseException(reason.message,reason.status);case"UnknownErrorException":return new _util2.UnknownErrorException(reason.message,reason.details);default:return new _util2.UnknownErrorException(reason.message,reason.toString())}}__name2(wrapReason,"wrapReason"),__name(wrapReason,"wrapReason");const _MessageHandler=class{static{__name2(this,"_MessageHandler")}constructor(sourceName,targetName,comObj){this.sourceName=sourceName,this.targetName=targetName,this.comObj=comObj,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=event=>{const data=event.data;if(data.targetName!==this.sourceName)return;if(data.stream){this._processStreamMessage(data);return}if(data.callback){const callbackId=data.callbackId,capability=this.callbackCapabilities[callbackId];if(!capability)throw new Error(`Cannot resolve callback ${callbackId}`);if(delete this.callbackCapabilities[callbackId],data.callback===CallbackKind.DATA)capability.resolve(data.data);else if(data.callback===CallbackKind.ERROR)capability.reject(wrapReason(data.reason));else throw new Error("Unexpected callback case");return}const action=this.actionHandler[data.action];if(!action)throw new Error(`Unknown action from worker: ${data.action}`);if(data.callbackId){const cbSourceName=this.sourceName,cbTargetName=data.sourceName;new Promise(function(resolve){resolve(action(data.data))}).then(function(result){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.DATA,callbackId:data.callbackId,data:result})},function(reason){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.ERROR,callbackId:data.callbackId,reason:wrapReason(reason)})});return}if(data.streamId){this._createStreamSink(data);return}action(data.data)},comObj.addEventListener("message",this._onComObjOnMessage)}on(actionName,handler){const ah=this.actionHandler;if(ah[actionName])throw new Error(`There is already an actionName called "${actionName}"`);ah[actionName]=handler}send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data},transfers)}sendWithPromise(actionName,data,transfers){const callbackId=this.callbackId++,capability=(0,_util2.createPromiseCapability)();this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId,data},transfers)}catch(ex){capability.reject(ex)}return capability.promise}sendWithStream(actionName,data,queueingStrategy,transfers){const streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:controller=>{const startCapability=(0,_util2.createPromiseCapability)();return this.streamControllers[streamId]={controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:!1},comObj.postMessage({sourceName,targetName,action:actionName,streamId,data,desiredSize:controller.desiredSize},transfers),startCapability.promise},pull:controller=>{const pullCapability=(0,_util2.createPromiseCapability)();return this.streamControllers[streamId].pullCall=pullCapability,comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL,streamId,desiredSize:controller.desiredSize}),pullCapability.promise},cancel:reason=>{(0,_util2.assert)(reason instanceof Error,"cancel must have a valid reason");const cancelCapability=(0,_util2.createPromiseCapability)();return this.streamControllers[streamId].cancelCall=cancelCapability,this.streamControllers[streamId].isClosed=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL,streamId,reason:wrapReason(reason)}),cancelCapability.promise}},queueingStrategy)}_createStreamSink(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,self2=this,action=this.actionHandler[data.action],streamSink={enqueue(chunk){let size=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,transfers=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const lastDesiredSize=this.desiredSize;this.desiredSize-=size,lastDesiredSize>0&&this.desiredSize<=0&&(this.sinkCapability=(0,_util2.createPromiseCapability)(),this.ready=this.sinkCapability.promise),comObj.postMessage({sourceName,targetName,stream:StreamKind.ENQUEUE,streamId,chunk},transfers)},close(){this.isCancelled||(this.isCancelled=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.CLOSE,streamId}),delete self2.streamSinks[streamId])},error(reason){(0,_util2.assert)(reason instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,comObj.postMessage({sourceName,targetName,stream:StreamKind.ERROR,streamId,reason:wrapReason(reason)}))},sinkCapability:(0,_util2.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve(),streamSink.ready=streamSink.sinkCapability.promise,this.streamSinks[streamId]=streamSink,new Promise(function(resolve){resolve(action(data.data,streamSink))}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,reason:wrapReason(reason)})})}_processStreamMessage(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj,streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:data.success?streamController.startCall.resolve():streamController.startCall.reject(wrapReason(data.reason));break;case StreamKind.PULL_COMPLETE:data.success?streamController.pullCall.resolve():streamController.pullCall.reject(wrapReason(data.reason));break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:!0});break}streamSink.desiredSize<=0&&data.desiredSize>0&&streamSink.sinkCapability.resolve(),streamSink.desiredSize=data.desiredSize,new Promise(function(resolve){resolve(streamSink.onPull&&streamSink.onPull())}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,reason:wrapReason(reason)})});break;case StreamKind.ENQUEUE:if((0,_util2.assert)(streamController,"enqueue should have stream controller"),streamController.isClosed)break;streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:if((0,_util2.assert)(streamController,"close should have stream controller"),streamController.isClosed)break;streamController.isClosed=!0,streamController.controller.close(),this._deleteStreamController(streamController,streamId);break;case StreamKind.ERROR:(0,_util2.assert)(streamController,"error should have stream controller"),streamController.controller.error(wrapReason(data.reason)),this._deleteStreamController(streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:data.success?streamController.cancelCall.resolve():streamController.cancelCall.reject(wrapReason(data.reason)),this._deleteStreamController(streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink)break;new Promise(function(resolve){resolve(streamSink.onCancel&&streamSink.onCancel(wrapReason(data.reason)))}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,success:!0})},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,reason:wrapReason(reason)})}),streamSink.sinkCapability.reject(wrapReason(data.reason)),streamSink.isCancelled=!0,delete this.streamSinks[streamId];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(streamController,streamId){await Promise.allSettled([streamController.startCall&&streamController.startCall.promise,streamController.pullCall&&streamController.pullCall.promise,streamController.cancelCall&&streamController.cancelCall.promise]),delete this.streamControllers[streamId]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}};__name(_MessageHandler,"MessageHandler");let MessageHandler=_MessageHandler;exports2.MessageHandler=MessageHandler},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.Metadata=void 0;var _util2=__w_pdfjs_require__2(1);function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");var _metadataMap=new WeakMap,_data=new WeakMap;const _Metadata=class{static{__name2(this,"_Metadata")}constructor(_ref){let{parsedData,rawData}=_ref;_classPrivateFieldInitSpec2(this,_metadataMap,{writable:!0,value:void 0}),_classPrivateFieldInitSpec2(this,_data,{writable:!0,value:void 0}),_classPrivateFieldSet2(this,_metadataMap,parsedData),_classPrivateFieldSet2(this,_data,rawData)}getRaw(){return _classPrivateFieldGet2(this,_data)}get(name){var _classPrivateFieldGet22;return(_classPrivateFieldGet22=_classPrivateFieldGet2(this,_metadataMap).get(name))!==null&&_classPrivateFieldGet22!==void 0?_classPrivateFieldGet22:null}getAll(){return(0,_util2.objectFromMap)(_classPrivateFieldGet2(this,_metadataMap))}has(name){return _classPrivateFieldGet2(this,_metadataMap).has(name)}};__name(_Metadata,"Metadata");let Metadata=_Metadata;exports2.Metadata=Metadata},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.OptionalContentConfig=void 0;var _util2=__w_pdfjs_require__2(1);function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");const INTERNAL=Symbol("INTERNAL");var _visible=new WeakMap;const _OptionalContentGroup=class{static{__name2(this,"_OptionalContentGroup")}constructor(name,intent){_classPrivateFieldInitSpec2(this,_visible,{writable:!0,value:!0}),this.name=name,this.intent=intent}get visible(){return _classPrivateFieldGet2(this,_visible)}_setVisible(internal,visible){internal!==INTERNAL&&(0,_util2.unreachable)("Internal method `_setVisible` called."),_classPrivateFieldSet2(this,_visible,visible)}};__name(_OptionalContentGroup,"OptionalContentGroup");let OptionalContentGroup=_OptionalContentGroup;var _cachedHasInitialVisibility=new WeakMap,_groups=new WeakMap,_initialVisibility=new WeakMap,_order=new WeakMap,_evaluateVisibilityExpression=new WeakSet;const _OptionalContentConfig=class{static{__name2(this,"_OptionalContentConfig")}constructor(data){if(_classPrivateMethodInitSpec2(this,_evaluateVisibilityExpression),_classPrivateFieldInitSpec2(this,_cachedHasInitialVisibility,{writable:!0,value:!0}),_classPrivateFieldInitSpec2(this,_groups,{writable:!0,value:new Map}),_classPrivateFieldInitSpec2(this,_initialVisibility,{writable:!0,value:null}),_classPrivateFieldInitSpec2(this,_order,{writable:!0,value:null}),this.name=null,this.creator=null,data!==null){this.name=data.name,this.creator=data.creator,_classPrivateFieldSet2(this,_order,data.order);for(const group of data.groups)_classPrivateFieldGet2(this,_groups).set(group.id,new OptionalContentGroup(group.name,group.intent));if(data.baseState==="OFF")for(const group of _classPrivateFieldGet2(this,_groups).values())group._setVisible(INTERNAL,!1);for(const on of data.on)_classPrivateFieldGet2(this,_groups).get(on)._setVisible(INTERNAL,!0);for(const off of data.off)_classPrivateFieldGet2(this,_groups).get(off)._setVisible(INTERNAL,!1);_classPrivateFieldSet2(this,_initialVisibility,new Map);for(const[id,group]of _classPrivateFieldGet2(this,_groups))_classPrivateFieldGet2(this,_initialVisibility).set(id,group.visible)}}isVisible(group){if(_classPrivateFieldGet2(this,_groups).size===0)return!0;if(!group)return(0,_util2.warn)("Optional content group not defined."),!0;if(group.type==="OCG")return _classPrivateFieldGet2(this,_groups).has(group.id)?_classPrivateFieldGet2(this,_groups).get(group.id).visible:((0,_util2.warn)(`Optional content group not found: ${group.id}`),!0);if(group.type==="OCMD"){if(group.expression)return _classPrivateMethodGet2(this,_evaluateVisibilityExpression,_evaluateVisibilityExpression2).call(this,group.expression);if(!group.policy||group.policy==="AnyOn"){for(const id of group.ids){if(!_classPrivateFieldGet2(this,_groups).has(id))return(0,_util2.warn)(`Optional content group not found: ${id}`),!0;if(_classPrivateFieldGet2(this,_groups).get(id).visible)return!0}return!1}else if(group.policy==="AllOn"){for(const id of group.ids){if(!_classPrivateFieldGet2(this,_groups).has(id))return(0,_util2.warn)(`Optional content group not found: ${id}`),!0;if(!_classPrivateFieldGet2(this,_groups).get(id).visible)return!1}return!0}else if(group.policy==="AnyOff"){for(const id of group.ids){if(!_classPrivateFieldGet2(this,_groups).has(id))return(0,_util2.warn)(`Optional content group not found: ${id}`),!0;if(!_classPrivateFieldGet2(this,_groups).get(id).visible)return!0}return!1}else if(group.policy==="AllOff"){for(const id of group.ids){if(!_classPrivateFieldGet2(this,_groups).has(id))return(0,_util2.warn)(`Optional content group not found: ${id}`),!0;if(_classPrivateFieldGet2(this,_groups).get(id).visible)return!1}return!0}return(0,_util2.warn)(`Unknown optional content policy ${group.policy}.`),!0}return(0,_util2.warn)(`Unknown group type ${group.type}.`),!0}setVisibility(id){let visible=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!_classPrivateFieldGet2(this,_groups).has(id)){(0,_util2.warn)(`Optional content group not found: ${id}`);return}_classPrivateFieldGet2(this,_groups).get(id)._setVisible(INTERNAL,!!visible),_classPrivateFieldSet2(this,_cachedHasInitialVisibility,null)}get hasInitialVisibility(){if(_classPrivateFieldGet2(this,_cachedHasInitialVisibility)!==null)return _classPrivateFieldGet2(this,_cachedHasInitialVisibility);for(const[id,group]of _classPrivateFieldGet2(this,_groups)){const visible=_classPrivateFieldGet2(this,_initialVisibility).get(id);if(group.visible!==visible)return _classPrivateFieldSet2(this,_cachedHasInitialVisibility,!1)}return _classPrivateFieldSet2(this,_cachedHasInitialVisibility,!0)}getOrder(){return _classPrivateFieldGet2(this,_groups).size?_classPrivateFieldGet2(this,_order)?_classPrivateFieldGet2(this,_order).slice():[..._classPrivateFieldGet2(this,_groups).keys()]:null}getGroups(){return _classPrivateFieldGet2(this,_groups).size>0?(0,_util2.objectFromMap)(_classPrivateFieldGet2(this,_groups)):null}getGroup(id){return _classPrivateFieldGet2(this,_groups).get(id)||null}};__name(_OptionalContentConfig,"OptionalContentConfig");let OptionalContentConfig=_OptionalContentConfig;exports2.OptionalContentConfig=OptionalContentConfig;function _evaluateVisibilityExpression2(array){const length=array.length;if(length<2)return!0;const operator=array[0];for(let i=1;i<length;i++){const element=array[i];let state;if(Array.isArray(element))state=_classPrivateMethodGet2(this,_evaluateVisibilityExpression,_evaluateVisibilityExpression2).call(this,element);else if(_classPrivateFieldGet2(this,_groups).has(element))state=_classPrivateFieldGet2(this,_groups).get(element).visible;else return(0,_util2.warn)(`Optional content group not found: ${element}`),!0;switch(operator){case"And":if(!state)return!1;break;case"Or":if(state)return!0;break;case"Not":return!state;default:return!0}}return operator==="And"}__name2(_evaluateVisibilityExpression2,"_evaluateVisibilityExpression2"),__name(_evaluateVisibilityExpression2,"_evaluateVisibilityExpression2")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PDFDataTransportStream=void 0;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(133);const _PDFDataTransportStream=class{static{__name2(this,"_PDFDataTransportStream")}constructor(params,pdfDataRangeTransport){(0,_util2.assert)(pdfDataRangeTransport,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=params.progressiveDone||!1,this._contentDispositionFilename=params.contentDispositionFilename||null;const initialData=params.initialData;if(initialData?.length>0){const buffer=new Uint8Array(initialData).buffer;this._queuedChunks.push(buffer)}this._pdfDataRangeTransport=pdfDataRangeTransport,this._isStreamingSupported=!params.disableStream,this._isRangeSupported=!params.disableRange,this._contentLength=params.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((begin,chunk)=>{this._onReceiveData({begin,chunk})}),this._pdfDataRangeTransport.addProgressListener((loaded,total)=>{this._onProgress({loaded,total})}),this._pdfDataRangeTransport.addProgressiveReadListener(chunk=>{this._onReceiveData({chunk})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(args){const buffer=new Uint8Array(args.chunk).buffer;if(args.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(buffer):this._queuedChunks.push(buffer);else{const found=this._rangeReaders.some(function(rangeReader){return rangeReader._begin!==args.begin?!1:(rangeReader._enqueue(buffer),!0)});(0,_util2.assert)(found,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var _this$_fullRequestRea,_this$_fullRequestRea2;return(_this$_fullRequestRea=(_this$_fullRequestRea2=this._fullRequestReader)===null||_this$_fullRequestRea2===void 0?void 0:_this$_fullRequestRea2._loaded)!==null&&_this$_fullRequestRea!==void 0?_this$_fullRequestRea:0}_onProgress(evt){if(evt.total===void 0){const firstReader=this._rangeReaders[0];firstReader!=null&&firstReader.onProgress&&firstReader.onProgress({loaded:evt.loaded})}else{const fullReader=this._fullRequestReader;fullReader!=null&&fullReader.onProgress&&fullReader.onProgress({loaded:evt.loaded,total:evt.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(reader){const i=this._rangeReaders.indexOf(reader);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){(0,_util2.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const queuedChunks=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,queuedChunks,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(begin,end){if(end<=this._progressiveDataLength)return null;const reader=new PDFDataTransportStreamRangeReader(this,begin,end);return this._pdfDataRangeTransport.requestDataRange(begin,end),this._rangeReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);for(const reader of this._rangeReaders.slice(0))reader.cancel(reason);this._pdfDataRangeTransport.abort()}};__name(_PDFDataTransportStream,"PDFDataTransportStream");let PDFDataTransportStream=_PDFDataTransportStream;exports2.PDFDataTransportStream=PDFDataTransportStream;const _PDFDataTransportStreamReader=class{static{__name2(this,"_PDFDataTransportStreamReader")}constructor(stream,queuedChunks){let progressiveDone=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,contentDispositionFilename=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=stream,this._done=progressiveDone||!1,this._filename=(0,_display_utils2.isPdfFile)(contentDispositionFilename)?contentDispositionFilename:null,this._queuedChunks=queuedChunks||[],this._loaded=0;for(const chunk of this._queuedChunks)this._loaded+=chunk.byteLength;this._requests=[],this._headersReady=Promise.resolve(),stream._fullRequestReader=this,this.onProgress=null}_enqueue(chunk){this._done||(this._requests.length>0?this._requests.shift().resolve({value:chunk,done:!1}):this._queuedChunks.push(chunk),this._loaded+=chunk.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util2.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}};__name(_PDFDataTransportStreamReader,"PDFDataTransportStreamReader");let PDFDataTransportStreamReader=_PDFDataTransportStreamReader;const _PDFDataTransportStreamRangeReader=class{static{__name2(this,"_PDFDataTransportStreamRangeReader")}constructor(stream,begin,end){this._stream=stream,this._begin=begin,this._end=end,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(chunk){if(!this._done){if(this._requests.length===0)this._queuedChunk=chunk;else{this._requests.shift().resolve({value:chunk,done:!1});for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const chunk=this._queuedChunk;return this._queuedChunk=null,{value:chunk,done:!1}}if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util2.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};__name(_PDFDataTransportStreamRangeReader,"PDFDataTransportStreamRangeReader");let PDFDataTransportStreamRangeReader=_PDFDataTransportStreamRangeReader},(__unused_webpack_module2,exports2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.XfaText=void 0;const _XfaText=class _XfaText2{static{__name2(this,"_XfaText")}static textContent(xfa){const items=[],output={items,styles:Object.create(null)};function walk(node){var _node$attributes;if(!node)return;let str=null;const name=node.name;if(name==="#text")str=node.value;else if(_XfaText2.shouldBuildText(name))node!=null&&(_node$attributes=node.attributes)!==null&&_node$attributes!==void 0&&_node$attributes.textContent?str=node.attributes.textContent:node.value&&(str=node.value);else return;if(str!==null&&items.push({str}),!!node.children)for(const child of node.children)walk(child)}return __name2(walk,"walk"),__name(walk,"walk"),walk(xfa),output}static shouldBuildText(name){return!(name==="textarea"||name==="input"||name==="option"||name==="select")}};__name(_XfaText,"XfaText");let XfaText=_XfaText;exports2.XfaText=XfaText},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.NodeStandardFontDataFactory=exports2.NodeCanvasFactory=exports2.NodeCMapReaderFactory=void 0;var _base_factory=__w_pdfjs_require__2(134);const fetchData=__name(function(url){return new Promise((resolve,reject)=>{require$$7.readFile(url,(error,data)=>{if(error||!data){reject(new Error(error));return}resolve(new Uint8Array(data))})})},"fetchData"),_NodeCanvasFactory=class extends _base_factory.BaseCanvasFactory{static{__name2(this,"_NodeCanvasFactory")}_createCanvas(width,height){return require$$7.createCanvas(width,height)}};__name(_NodeCanvasFactory,"NodeCanvasFactory");let NodeCanvasFactory=_NodeCanvasFactory;exports2.NodeCanvasFactory=NodeCanvasFactory;const _NodeCMapReaderFactory=class extends _base_factory.BaseCMapReaderFactory{static{__name2(this,"_NodeCMapReaderFactory")}_fetchData(url,compressionType){return fetchData(url).then(data=>({cMapData:data,compressionType}))}};__name(_NodeCMapReaderFactory,"NodeCMapReaderFactory");let NodeCMapReaderFactory=_NodeCMapReaderFactory;exports2.NodeCMapReaderFactory=NodeCMapReaderFactory;const _NodeStandardFontDataFactory=class extends _base_factory.BaseStandardFontDataFactory{static{__name2(this,"_NodeStandardFontDataFactory")}_fetchData(url){return fetchData(url)}};__name(_NodeStandardFontDataFactory,"NodeStandardFontDataFactory");let NodeStandardFontDataFactory=_NodeStandardFontDataFactory;exports2.NodeStandardFontDataFactory=NodeStandardFontDataFactory},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.AnnotationEditorLayer=void 0;var _tools=__w_pdfjs_require__2(132),_util2=__w_pdfjs_require__2(1),_freetext=__w_pdfjs_require__2(148),_ink=__w_pdfjs_require__2(149);function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name2(_defineProperty,"_defineProperty"),__name(_defineProperty,"_defineProperty");function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");var _accessibilityManager=new WeakMap,_allowClick=new WeakMap,_boundPointerup=new WeakMap,_boundPointerdown=new WeakMap,_editors=new WeakMap,_hadPointerDown=new WeakMap,_isCleaningUp=new WeakMap,_uiManager=new WeakMap,_changeParent=new WeakSet,_createNewEditor=new WeakSet,_createAndAddNewEditor=new WeakSet,_cleanup=new WeakSet;const _AnnotationEditorLayer=class _AnnotationEditorLayer2{static{__name2(this,"_AnnotationEditorLayer")}constructor(options){_classPrivateMethodInitSpec2(this,_cleanup),_classPrivateMethodInitSpec2(this,_createAndAddNewEditor),_classPrivateMethodInitSpec2(this,_createNewEditor),_classPrivateMethodInitSpec2(this,_changeParent),_classPrivateFieldInitSpec2(this,_accessibilityManager,{writable:!0,value:void 0}),_classPrivateFieldInitSpec2(this,_allowClick,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_boundPointerup,{writable:!0,value:this.pointerup.bind(this)}),_classPrivateFieldInitSpec2(this,_boundPointerdown,{writable:!0,value:this.pointerdown.bind(this)}),_classPrivateFieldInitSpec2(this,_editors,{writable:!0,value:new Map}),_classPrivateFieldInitSpec2(this,_hadPointerDown,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_isCleaningUp,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_uiManager,{writable:!0,value:void 0}),_AnnotationEditorLayer2._initialized||(_AnnotationEditorLayer2._initialized=!0,_freetext.FreeTextEditor.initialize(options.l10n),_ink.InkEditor.initialize(options.l10n),options.uiManager.registerEditorTypes([_freetext.FreeTextEditor,_ink.InkEditor])),_classPrivateFieldSet2(this,_uiManager,options.uiManager),this.annotationStorage=options.annotationStorage,this.pageIndex=options.pageIndex,this.div=options.div,_classPrivateFieldSet2(this,_accessibilityManager,options.accessibilityManager),_classPrivateFieldGet2(this,_uiManager).addLayer(this)}updateToolbar(mode){_classPrivateFieldGet2(this,_uiManager).updateToolbar(mode)}updateMode(){let mode=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_classPrivateFieldGet2(this,_uiManager).getMode();_classPrivateMethodGet2(this,_cleanup,_cleanup2).call(this),mode===_util2.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),_classPrivateFieldGet2(this,_uiManager).unselectAll()}addInkEditorIfNeeded(isCommitting){if(!isCommitting&&_classPrivateFieldGet2(this,_uiManager).getMode()!==_util2.AnnotationEditorType.INK)return;if(!isCommitting){for(const editor2 of _classPrivateFieldGet2(this,_editors).values())if(editor2.isEmpty()){editor2.setInBackground();return}}_classPrivateMethodGet2(this,_createAndAddNewEditor,_createAndAddNewEditor2).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(isEditing){_classPrivateFieldGet2(this,_uiManager).setEditingState(isEditing)}addCommands(params){_classPrivateFieldGet2(this,_uiManager).addCommands(params)}enable(){this.div.style.pointerEvents="auto";for(const editor of _classPrivateFieldGet2(this,_editors).values())editor.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const editor of _classPrivateFieldGet2(this,_editors).values())editor.disableEditing()}setActiveEditor(editor){_classPrivateFieldGet2(this,_uiManager).getActive()!==editor&&_classPrivateFieldGet2(this,_uiManager).setActiveEditor(editor)}enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet2(this,_boundPointerdown)),this.div.addEventListener("pointerup",_classPrivateFieldGet2(this,_boundPointerup))}disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet2(this,_boundPointerdown)),this.div.removeEventListener("pointerup",_classPrivateFieldGet2(this,_boundPointerup))}attach(editor){_classPrivateFieldGet2(this,_editors).set(editor.id,editor)}detach(editor){var _classPrivateFieldGet22;_classPrivateFieldGet2(this,_editors).delete(editor.id),(_classPrivateFieldGet22=_classPrivateFieldGet2(this,_accessibilityManager))===null||_classPrivateFieldGet22===void 0||_classPrivateFieldGet22.removePointerInTextLayer(editor.contentDiv)}remove(editor){_classPrivateFieldGet2(this,_uiManager).removeEditor(editor),this.detach(editor),this.annotationStorage.remove(editor.id),editor.div.style.display="none",setTimeout(()=>{editor.div.style.display="",editor.div.remove(),editor.isAttachedToDOM=!1,document.activeElement===document.body&&_classPrivateFieldGet2(this,_uiManager).focusMainContainer()},0),_classPrivateFieldGet2(this,_isCleaningUp)||this.addInkEditorIfNeeded(!1)}add(editor){if(_classPrivateMethodGet2(this,_changeParent,_changeParent2).call(this,editor),_classPrivateFieldGet2(this,_uiManager).addEditor(editor),this.attach(editor),!editor.isAttachedToDOM){const div=editor.render();this.div.append(div),editor.isAttachedToDOM=!0}this.moveEditorInDOM(editor),editor.onceAdded(),this.addToAnnotationStorage(editor)}moveEditorInDOM(editor){var _classPrivateFieldGet3;(_classPrivateFieldGet3=_classPrivateFieldGet2(this,_accessibilityManager))===null||_classPrivateFieldGet3===void 0||_classPrivateFieldGet3.moveElementInDOM(this.div,editor.div,editor.contentDiv,!0)}addToAnnotationStorage(editor){!editor.isEmpty()&&!this.annotationStorage.has(editor.id)&&this.annotationStorage.setValue(editor.id,editor)}addOrRebuild(editor){editor.needsToBeRebuilt()?editor.rebuild():this.add(editor)}addANewEditor(editor){const cmd=__name(()=>{this.addOrRebuild(editor)},"cmd"),undo=__name(()=>{editor.remove()},"undo");this.addCommands({cmd,undo,mustExec:!0})}addUndoableEditor(editor){const cmd=__name(()=>{this.addOrRebuild(editor)},"cmd"),undo=__name(()=>{editor.remove()},"undo");this.addCommands({cmd,undo,mustExec:!1})}getNextId(){return _classPrivateFieldGet2(this,_uiManager).getId()}deserialize(data){switch(data.annotationType){case _util2.AnnotationEditorType.FREETEXT:return _freetext.FreeTextEditor.deserialize(data,this);case _util2.AnnotationEditorType.INK:return _ink.InkEditor.deserialize(data,this)}return null}setSelected(editor){_classPrivateFieldGet2(this,_uiManager).setSelected(editor)}toggleSelected(editor){_classPrivateFieldGet2(this,_uiManager).toggleSelected(editor)}isSelected(editor){return _classPrivateFieldGet2(this,_uiManager).isSelected(editor)}unselect(editor){_classPrivateFieldGet2(this,_uiManager).unselect(editor)}pointerup(event){const isMac=_tools.KeyboardManager.platform.isMac;if(!(event.button!==0||event.ctrlKey&&isMac)&&event.target===this.div&&_classPrivateFieldGet2(this,_hadPointerDown)){if(_classPrivateFieldSet2(this,_hadPointerDown,!1),!_classPrivateFieldGet2(this,_allowClick)){_classPrivateFieldSet2(this,_allowClick,!0);return}_classPrivateMethodGet2(this,_createAndAddNewEditor,_createAndAddNewEditor2).call(this,event)}}pointerdown(event){const isMac=_tools.KeyboardManager.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac||event.target!==this.div)return;_classPrivateFieldSet2(this,_hadPointerDown,!0);const editor=_classPrivateFieldGet2(this,_uiManager).getActive();_classPrivateFieldSet2(this,_allowClick,!editor||editor.isEmpty())}drop(event){const id=event.dataTransfer.getData("text/plain"),editor=_classPrivateFieldGet2(this,_uiManager).getEditor(id);if(!editor)return;event.preventDefault(),event.dataTransfer.dropEffect="move",_classPrivateMethodGet2(this,_changeParent,_changeParent2).call(this,editor);const rect=this.div.getBoundingClientRect(),endX=event.clientX-rect.x,endY=event.clientY-rect.y;editor.translate(endX-editor.startX,endY-editor.startY),this.moveEditorInDOM(editor),editor.div.focus()}dragover(event){event.preventDefault()}destroy(){var _classPrivateFieldGet4;((_classPrivateFieldGet4=_classPrivateFieldGet2(this,_uiManager).getActive())===null||_classPrivateFieldGet4===void 0?void 0:_classPrivateFieldGet4.parent)===this&&_classPrivateFieldGet2(this,_uiManager).setActiveEditor(null);for(const editor of _classPrivateFieldGet2(this,_editors).values()){var _classPrivateFieldGet5;(_classPrivateFieldGet5=_classPrivateFieldGet2(this,_accessibilityManager))===null||_classPrivateFieldGet5===void 0||_classPrivateFieldGet5.removePointerInTextLayer(editor.contentDiv),editor.isAttachedToDOM=!1,editor.div.remove(),editor.parent=null}this.div=null,_classPrivateFieldGet2(this,_editors).clear(),_classPrivateFieldGet2(this,_uiManager).removeLayer(this)}render(parameters){this.viewport=parameters.viewport,(0,_tools.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const editor of _classPrivateFieldGet2(this,_uiManager).getEditors(this.pageIndex))this.add(editor);this.updateMode()}update(parameters){this.viewport=parameters.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[pageLLx,pageLLy,pageURx,pageURy]=this.viewport.viewBox,width=pageURx-pageLLx,height=pageURy-pageLLy;return[width,height]}get viewportBaseDimensions(){const{width,height,rotation}=this.viewport;return rotation%180===0?[width,height]:[height,width]}setDimensions(){const{width,height,rotation}=this.viewport,flipOrientation=rotation%180!==0,widthStr=Math.floor(width)+"px",heightStr=Math.floor(height)+"px";this.div.style.width=flipOrientation?heightStr:widthStr,this.div.style.height=flipOrientation?widthStr:heightStr,this.div.setAttribute("data-main-rotation",rotation)}};__name(_AnnotationEditorLayer,"AnnotationEditorLayer");let AnnotationEditorLayer=_AnnotationEditorLayer;exports2.AnnotationEditorLayer=AnnotationEditorLayer;function _changeParent2(editor){var _editor$parent;editor.parent!==this&&(this.attach(editor),editor.pageIndex=this.pageIndex,(_editor$parent=editor.parent)===null||_editor$parent===void 0||_editor$parent.detach(editor),editor.parent=this,editor.div&&editor.isAttachedToDOM&&(editor.div.remove(),this.div.append(editor.div)))}__name2(_changeParent2,"_changeParent2"),__name(_changeParent2,"_changeParent2");function _createNewEditor2(params){switch(_classPrivateFieldGet2(this,_uiManager).getMode()){case _util2.AnnotationEditorType.FREETEXT:return new _freetext.FreeTextEditor(params);case _util2.AnnotationEditorType.INK:return new _ink.InkEditor(params)}return null}__name2(_createNewEditor2,"_createNewEditor2"),__name(_createNewEditor2,"_createNewEditor2");function _createAndAddNewEditor2(event){const id=this.getNextId(),editor=_classPrivateMethodGet2(this,_createNewEditor,_createNewEditor2).call(this,{parent:this,id,x:event.offsetX,y:event.offsetY});return editor&&this.add(editor),editor}__name2(_createAndAddNewEditor2,"_createAndAddNewEditor2"),__name(_createAndAddNewEditor2,"_createAndAddNewEditor2");function _cleanup2(){_classPrivateFieldSet2(this,_isCleaningUp,!0);for(const editor of _classPrivateFieldGet2(this,_editors).values())editor.isEmpty()&&editor.remove();_classPrivateFieldSet2(this,_isCleaningUp,!1)}__name2(_cleanup2,"_cleanup2"),__name(_cleanup2,"_cleanup2"),_defineProperty(AnnotationEditorLayer,"_initialized",!1)},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.FreeTextEditor=void 0;var _util2=__w_pdfjs_require__2(1),_tools=__w_pdfjs_require__2(132),_editor=__w_pdfjs_require__2(131);function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name2(_defineProperty,"_defineProperty"),__name(_defineProperty,"_defineProperty");function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");var _boundEditorDivBlur=new WeakMap,_boundEditorDivFocus=new WeakMap,_boundEditorDivKeydown=new WeakMap,_color=new WeakMap,_content=new WeakMap,_hasAlreadyBeenCommitted=new WeakMap,_fontSize=new WeakMap,_updateFontSize=new WeakSet,_updateColor=new WeakSet,_extractText=new WeakSet,_setEditorDimensions=new WeakSet;const _FreeTextEditor=class _FreeTextEditor2 extends _editor.AnnotationEditor{static{__name2(this,"_FreeTextEditor")}constructor(params){super({...params,name:"freeTextEditor"}),_classPrivateMethodInitSpec2(this,_setEditorDimensions),_classPrivateMethodInitSpec2(this,_extractText),_classPrivateMethodInitSpec2(this,_updateColor),_classPrivateMethodInitSpec2(this,_updateFontSize),_classPrivateFieldInitSpec2(this,_boundEditorDivBlur,{writable:!0,value:this.editorDivBlur.bind(this)}),_classPrivateFieldInitSpec2(this,_boundEditorDivFocus,{writable:!0,value:this.editorDivFocus.bind(this)}),_classPrivateFieldInitSpec2(this,_boundEditorDivKeydown,{writable:!0,value:this.editorDivKeydown.bind(this)}),_classPrivateFieldInitSpec2(this,_color,{writable:!0,value:void 0}),_classPrivateFieldInitSpec2(this,_content,{writable:!0,value:""}),_classPrivateFieldInitSpec2(this,_hasAlreadyBeenCommitted,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_fontSize,{writable:!0,value:void 0}),_classPrivateFieldSet2(this,_color,params.color||_FreeTextEditor2._defaultColor||_editor.AnnotationEditor._defaultLineColor),_classPrivateFieldSet2(this,_fontSize,params.fontSize||_FreeTextEditor2._defaultFontSize)}static initialize(l10n){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(str=>[str,l10n.get(str)]));const style=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(style.getPropertyValue("--freetext-padding"))}static updateDefaultParams(type,value){switch(type){case _util2.AnnotationEditorParamsType.FREETEXT_SIZE:_FreeTextEditor2._defaultFontSize=value;break;case _util2.AnnotationEditorParamsType.FREETEXT_COLOR:_FreeTextEditor2._defaultColor=value;break}}updateParams(type,value){switch(type){case _util2.AnnotationEditorParamsType.FREETEXT_SIZE:_classPrivateMethodGet2(this,_updateFontSize,_updateFontSize2).call(this,value);break;case _util2.AnnotationEditorParamsType.FREETEXT_COLOR:_classPrivateMethodGet2(this,_updateColor,_updateColor2).call(this,value);break}}static get defaultPropertiesToUpdate(){return[[_util2.AnnotationEditorParamsType.FREETEXT_SIZE,_FreeTextEditor2._defaultFontSize],[_util2.AnnotationEditorParamsType.FREETEXT_COLOR,_FreeTextEditor2._defaultColor||_editor.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[_util2.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet2(this,_fontSize)],[_util2.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet2(this,_color)]]}getInitialTranslation(){return[-_FreeTextEditor2._internalPadding*this.parent.scaleFactor,-(_FreeTextEditor2._internalPadding+_classPrivateFieldGet2(this,_fontSize))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(_util2.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",_classPrivateFieldGet2(this,_boundEditorDivKeydown)),this.editorDiv.addEventListener("focus",_classPrivateFieldGet2(this,_boundEditorDivFocus)),this.editorDiv.addEventListener("blur",_classPrivateFieldGet2(this,_boundEditorDivBlur)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet2(this,_boundEditorDivKeydown)),this.editorDiv.removeEventListener("focus",_classPrivateFieldGet2(this,_boundEditorDivFocus)),this.editorDiv.removeEventListener("blur",_classPrivateFieldGet2(this,_boundEditorDivBlur)),this.div.focus(),this.isEditing=!1)}focusin(event){super.focusin(event),event.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),_classPrivateFieldGet2(this,_hasAlreadyBeenCommitted)||(_classPrivateFieldSet2(this,_hasAlreadyBeenCommitted,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_classPrivateFieldSet2(this,_content,_classPrivateMethodGet2(this,_extractText,_extractText2).call(this).trimEnd()),_classPrivateMethodGet2(this,_setEditorDimensions,_setEditorDimensions2).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(event){this.enableEditMode(),this.editorDiv.focus()}keydown(event){event.target===this.div&&event.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(event){_FreeTextEditor2._keyboardManager.exec(this,event)}editorDivFocus(event){this.isEditing=!0}editorDivBlur(event){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let baseX,baseY;this.width&&(baseX=this.x,baseY=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),_FreeTextEditor2._l10nPromise.get("editor_free_text_aria_label").then(msg=>{var _this$editorDiv;return(_this$editorDiv=this.editorDiv)===null||_this$editorDiv===void 0?void 0:_this$editorDiv.setAttribute("aria-label",msg)}),_FreeTextEditor2._l10nPromise.get("free_text_default_content").then(msg=>{var _this$editorDiv2;return(_this$editorDiv2=this.editorDiv)===null||_this$editorDiv2===void 0?void 0:_this$editorDiv2.setAttribute("default-content",msg)}),this.editorDiv.contentEditable=!0;const{style}=this.editorDiv;if(style.fontSize=`calc(${_classPrivateFieldGet2(this,_fontSize)}px * var(--scale-factor))`,style.color=_classPrivateFieldGet2(this,_color),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,_tools.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);for(const line of _classPrivateFieldGet2(this,_content).split(`
`)){const div=document.createElement("div");div.append(line?document.createTextNode(line):document.createElement("br")),this.editorDiv.append(div)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(data,parent){const editor=super.deserialize(data,parent);return _classPrivateFieldSet2(editor,_fontSize,data.fontSize),_classPrivateFieldSet2(editor,_color,_util2.Util.makeHexColor(...data.color)),_classPrivateFieldSet2(editor,_content,data.value),editor}serialize(){if(this.isEmpty())return null;const padding=_FreeTextEditor2._internalPadding*this.parent.scaleFactor,rect=this.getRect(padding,padding),color=_editor.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:_util2.AnnotationEditorType.FREETEXT,color,fontSize:_classPrivateFieldGet2(this,_fontSize),value:_classPrivateFieldGet2(this,_content),pageIndex:this.parent.pageIndex,rect,rotation:this.rotation}}};__name(_FreeTextEditor,"FreeTextEditor");let FreeTextEditor=_FreeTextEditor;exports2.FreeTextEditor=FreeTextEditor;function _updateFontSize2(fontSize){const setFontsize=__name(size=>{this.editorDiv.style.fontSize=`calc(${size}px * var(--scale-factor))`,this.translate(0,-(size-_classPrivateFieldGet2(this,_fontSize))*this.parent.scaleFactor),_classPrivateFieldSet2(this,_fontSize,size),_classPrivateMethodGet2(this,_setEditorDimensions,_setEditorDimensions2).call(this)},"setFontsize"),savedFontsize=_classPrivateFieldGet2(this,_fontSize);this.parent.addCommands({cmd:()=>{setFontsize(fontSize)},undo:()=>{setFontsize(savedFontsize)},mustExec:!0,type:_util2.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}__name2(_updateFontSize2,"_updateFontSize2"),__name(_updateFontSize2,"_updateFontSize2");function _updateColor2(color){const savedColor=_classPrivateFieldGet2(this,_color);this.parent.addCommands({cmd:()=>{_classPrivateFieldSet2(this,_color,color),this.editorDiv.style.color=color},undo:()=>{_classPrivateFieldSet2(this,_color,savedColor),this.editorDiv.style.color=savedColor},mustExec:!0,type:_util2.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}__name2(_updateColor2,"_updateColor2"),__name(_updateColor2,"_updateColor2");function _extractText2(){const divs=this.editorDiv.getElementsByTagName("div");if(divs.length===0)return this.editorDiv.innerText;const buffer=[];for(let i=0,ii=divs.length;i<ii;i++){const first=divs[i].firstChild;first?.nodeName==="#text"?buffer.push(first.data):buffer.push("")}return buffer.join(`
`)}__name2(_extractText2,"_extractText2"),__name(_extractText2,"_extractText2");function _setEditorDimensions2(){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions,rect=this.div.getBoundingClientRect();this.width=rect.width/parentWidth,this.height=rect.height/parentHeight}__name2(_setEditorDimensions2,"_setEditorDimensions2"),__name(_setEditorDimensions2,"_setEditorDimensions2"),_defineProperty(FreeTextEditor,"_freeTextDefaultContent",""),_defineProperty(FreeTextEditor,"_l10nPromise",void 0),_defineProperty(FreeTextEditor,"_internalPadding",0),_defineProperty(FreeTextEditor,"_defaultColor",null),_defineProperty(FreeTextEditor,"_defaultFontSize",10),_defineProperty(FreeTextEditor,"_keyboardManager",new _tools.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],FreeTextEditor.prototype.commitOrRemove]])),_defineProperty(FreeTextEditor,"_type","freetext")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.InkEditor=void 0,Object.defineProperty(exports2,"fitCurve",{enumerable:!0,get:function(){return _pdfjsFitCurve.fitCurve}});var _util2=__w_pdfjs_require__2(1),_editor=__w_pdfjs_require__2(131),_pdfjsFitCurve=__w_pdfjs_require__2(150),_tools=__w_pdfjs_require__2(132);function _classPrivateMethodInitSpec2(obj,privateSet){_checkPrivateRedeclaration2(obj,privateSet),privateSet.add(obj)}__name2(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec2"),__name(_classPrivateMethodInitSpec2,"_classPrivateMethodInitSpec");function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name2(_defineProperty,"_defineProperty"),__name(_defineProperty,"_defineProperty");function _classPrivateFieldInitSpec2(obj,privateMap,value){_checkPrivateRedeclaration2(obj,privateMap),privateMap.set(obj,value)}__name2(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec2"),__name(_classPrivateFieldInitSpec2,"_classPrivateFieldInitSpec");function _checkPrivateRedeclaration2(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}__name2(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration2"),__name(_checkPrivateRedeclaration2,"_checkPrivateRedeclaration");function _classStaticPrivateMethodGet(receiver,classConstructor,method){return _classCheckPrivateStaticAccess2(receiver,classConstructor),method}__name2(_classStaticPrivateMethodGet,"_classStaticPrivateMethodGet"),__name(_classStaticPrivateMethodGet,"_classStaticPrivateMethodGet");function _classCheckPrivateStaticAccess2(receiver,classConstructor){if(receiver!==classConstructor)throw new TypeError("Private static access of wrong provenance")}__name2(_classCheckPrivateStaticAccess2,"_classCheckPrivateStaticAccess2"),__name(_classCheckPrivateStaticAccess2,"_classCheckPrivateStaticAccess");function _classPrivateFieldSet2(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"set");return _classApplyDescriptorSet2(receiver,descriptor,value),value}__name2(_classPrivateFieldSet2,"_classPrivateFieldSet2"),__name(_classPrivateFieldSet2,"_classPrivateFieldSet");function _classApplyDescriptorSet2(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}__name2(_classApplyDescriptorSet2,"_classApplyDescriptorSet2"),__name(_classApplyDescriptorSet2,"_classApplyDescriptorSet");function _classPrivateFieldGet2(receiver,privateMap){var descriptor=_classExtractFieldDescriptor2(receiver,privateMap,"get");return _classApplyDescriptorGet2(receiver,descriptor)}__name2(_classPrivateFieldGet2,"_classPrivateFieldGet2"),__name(_classPrivateFieldGet2,"_classPrivateFieldGet");function _classExtractFieldDescriptor2(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}__name2(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor2"),__name(_classExtractFieldDescriptor2,"_classExtractFieldDescriptor");function _classApplyDescriptorGet2(receiver,descriptor){return descriptor.get?descriptor.get.call(receiver):descriptor.value}__name2(_classApplyDescriptorGet2,"_classApplyDescriptorGet2"),__name(_classApplyDescriptorGet2,"_classApplyDescriptorGet");function _classPrivateMethodGet2(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}__name2(_classPrivateMethodGet2,"_classPrivateMethodGet2"),__name(_classPrivateMethodGet2,"_classPrivateMethodGet");const RESIZER_SIZE=16;var _aspectRatio=new WeakMap,_baseHeight=new WeakMap,_baseWidth=new WeakMap,_boundCanvasPointermove=new WeakMap,_boundCanvasPointerleave=new WeakMap,_boundCanvasPointerup=new WeakMap,_boundCanvasPointerdown=new WeakMap,_disableEditing=new WeakMap,_isCanvasInitialized=new WeakMap,_lastPoint=new WeakMap,_observer=new WeakMap,_realWidth=new WeakMap,_realHeight=new WeakMap,_requestFrameCallback=new WeakMap,_updateThickness=new WeakSet,_updateColor=new WeakSet,_updateOpacity=new WeakSet,_getInitialBBox=new WeakSet,_setStroke=new WeakSet,_startDrawing=new WeakSet,_draw=new WeakSet,_stopDrawing=new WeakSet,_redraw=new WeakSet,_endDrawing=new WeakSet,_createCanvas=new WeakSet,_createObserver=new WeakSet,_setCanvasDims=new WeakSet,_setScaleFactor=new WeakSet,_updateTransform=new WeakSet,_serializePaths=new WeakSet,_extractPointsOnBezier=new WeakSet,_isAlmostFlat=new WeakSet,_getBbox=new WeakSet,_getPadding=new WeakSet,_fitToContent=new WeakSet,_setMinDims=new WeakSet;const _InkEditor=class _InkEditor2 extends _editor.AnnotationEditor{static{__name2(this,"_InkEditor")}constructor(params){super({...params,name:"inkEditor"}),_classPrivateMethodInitSpec2(this,_setMinDims),_classPrivateMethodInitSpec2(this,_fitToContent),_classPrivateMethodInitSpec2(this,_getPadding),_classPrivateMethodInitSpec2(this,_getBbox),_classPrivateMethodInitSpec2(this,_isAlmostFlat),_classPrivateMethodInitSpec2(this,_extractPointsOnBezier),_classPrivateMethodInitSpec2(this,_serializePaths),_classPrivateMethodInitSpec2(this,_updateTransform),_classPrivateMethodInitSpec2(this,_setScaleFactor),_classPrivateMethodInitSpec2(this,_setCanvasDims),_classPrivateMethodInitSpec2(this,_createObserver),_classPrivateMethodInitSpec2(this,_createCanvas),_classPrivateMethodInitSpec2(this,_endDrawing),_classPrivateMethodInitSpec2(this,_redraw),_classPrivateMethodInitSpec2(this,_stopDrawing),_classPrivateMethodInitSpec2(this,_draw),_classPrivateMethodInitSpec2(this,_startDrawing),_classPrivateMethodInitSpec2(this,_setStroke),_classPrivateMethodInitSpec2(this,_getInitialBBox),_classPrivateMethodInitSpec2(this,_updateOpacity),_classPrivateMethodInitSpec2(this,_updateColor),_classPrivateMethodInitSpec2(this,_updateThickness),_classPrivateFieldInitSpec2(this,_aspectRatio,{writable:!0,value:0}),_classPrivateFieldInitSpec2(this,_baseHeight,{writable:!0,value:0}),_classPrivateFieldInitSpec2(this,_baseWidth,{writable:!0,value:0}),_classPrivateFieldInitSpec2(this,_boundCanvasPointermove,{writable:!0,value:this.canvasPointermove.bind(this)}),_classPrivateFieldInitSpec2(this,_boundCanvasPointerleave,{writable:!0,value:this.canvasPointerleave.bind(this)}),_classPrivateFieldInitSpec2(this,_boundCanvasPointerup,{writable:!0,value:this.canvasPointerup.bind(this)}),_classPrivateFieldInitSpec2(this,_boundCanvasPointerdown,{writable:!0,value:this.canvasPointerdown.bind(this)}),_classPrivateFieldInitSpec2(this,_disableEditing,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_isCanvasInitialized,{writable:!0,value:!1}),_classPrivateFieldInitSpec2(this,_lastPoint,{writable:!0,value:null}),_classPrivateFieldInitSpec2(this,_observer,{writable:!0,value:null}),_classPrivateFieldInitSpec2(this,_realWidth,{writable:!0,value:0}),_classPrivateFieldInitSpec2(this,_realHeight,{writable:!0,value:0}),_classPrivateFieldInitSpec2(this,_requestFrameCallback,{writable:!0,value:null}),this.color=params.color||null,this.thickness=params.thickness||null,this.opacity=params.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(l10n){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(str=>[str,l10n.get(str)]))}static updateDefaultParams(type,value){switch(type){case _util2.AnnotationEditorParamsType.INK_THICKNESS:_InkEditor2._defaultThickness=value;break;case _util2.AnnotationEditorParamsType.INK_COLOR:_InkEditor2._defaultColor=value;break;case _util2.AnnotationEditorParamsType.INK_OPACITY:_InkEditor2._defaultOpacity=value/100;break}}updateParams(type,value){switch(type){case _util2.AnnotationEditorParamsType.INK_THICKNESS:_classPrivateMethodGet2(this,_updateThickness,_updateThickness2).call(this,value);break;case _util2.AnnotationEditorParamsType.INK_COLOR:_classPrivateMethodGet2(this,_updateColor,_updateColor2).call(this,value);break;case _util2.AnnotationEditorParamsType.INK_OPACITY:_classPrivateMethodGet2(this,_updateOpacity,_updateOpacity2).call(this,value);break}}static get defaultPropertiesToUpdate(){return[[_util2.AnnotationEditorParamsType.INK_THICKNESS,_InkEditor2._defaultThickness],[_util2.AnnotationEditorParamsType.INK_COLOR,_InkEditor2._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util2.AnnotationEditorParamsType.INK_OPACITY,Math.round(_InkEditor2._defaultOpacity*100)]]}get propertiesToUpdate(){var _this$opacity;return[[_util2.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||_InkEditor2._defaultThickness],[_util2.AnnotationEditorParamsType.INK_COLOR,this.color||_InkEditor2._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util2.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((_this$opacity=this.opacity)!==null&&_this$opacity!==void 0?_this$opacity:_InkEditor2._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(_classPrivateMethodGet2(this,_createCanvas,_createCanvas2).call(this),_classPrivateMethodGet2(this,_createObserver,_createObserver2).call(this)),this.isAttachedToDOM||(this.parent.add(this),_classPrivateMethodGet2(this,_setCanvasDims,_setCanvasDims2).call(this)),_classPrivateMethodGet2(this,_fitToContent,_fitToContent2).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,_classPrivateFieldGet2(this,_observer).disconnect(),_classPrivateFieldSet2(this,_observer,null),super.remove())}enableEditMode(){_classPrivateFieldGet2(this,_disableEditing)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",_classPrivateFieldGet2(this,_boundCanvasPointerdown)),this.canvas.addEventListener("pointerup",_classPrivateFieldGet2(this,_boundCanvasPointerup)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet2(this,_boundCanvasPointerdown)),this.canvas.removeEventListener("pointerup",_classPrivateFieldGet2(this,_boundCanvasPointerup)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){_classPrivateFieldGet2(this,_disableEditing)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_classPrivateFieldSet2(this,_disableEditing,!0),this.div.classList.add("disabled"),_classPrivateMethodGet2(this,_fitToContent,_fitToContent2).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(event){super.focusin(event),this.enableEditMode()}canvasPointerdown(event){event.button!==0||!this.isInEditMode()||_classPrivateFieldGet2(this,_disableEditing)||(this.setInForeground(),event.type!=="mouse"&&this.div.focus(),event.stopPropagation(),this.canvas.addEventListener("pointerleave",_classPrivateFieldGet2(this,_boundCanvasPointerleave)),this.canvas.addEventListener("pointermove",_classPrivateFieldGet2(this,_boundCanvasPointermove)),_classPrivateMethodGet2(this,_startDrawing,_startDrawing2).call(this,event.offsetX,event.offsetY))}canvasPointermove(event){event.stopPropagation(),_classPrivateMethodGet2(this,_draw,_draw2).call(this,event.offsetX,event.offsetY)}canvasPointerup(event){event.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(event.stopPropagation(),_classPrivateMethodGet2(this,_endDrawing,_endDrawing2).call(this,event),this.setInBackground())}canvasPointerleave(event){_classPrivateMethodGet2(this,_endDrawing,_endDrawing2).call(this,event),this.setInBackground()}render(){if(this.div)return this.div;let baseX,baseY;this.width&&(baseX=this.x,baseY=this.y),super.render(),_InkEditor2._l10nPromise.get("editor_ink_aria_label").then(msg=>{var _this$div;return(_this$div=this.div)===null||_this$div===void 0?void 0:_this$div.setAttribute("aria-label",msg)});const[x,y,w,h]=_classPrivateMethodGet2(this,_getInitialBBox,_getInitialBBox2).call(this);if(this.setAt(x,y,0,0),this.setDims(w,h),_classPrivateMethodGet2(this,_createCanvas,_createCanvas2).call(this),this.width){const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight),_classPrivateFieldSet2(this,_isCanvasInitialized,!0),_classPrivateMethodGet2(this,_setCanvasDims,_setCanvasDims2).call(this),this.setDims(this.width*parentWidth,this.height*parentHeight),_classPrivateMethodGet2(this,_redraw,_redraw2).call(this),_classPrivateMethodGet2(this,_setMinDims,_setMinDims2).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _classPrivateMethodGet2(this,_createObserver,_createObserver2).call(this),this.div}setDimensions(width,height){const roundedWidth=Math.round(width),roundedHeight=Math.round(height);if(_classPrivateFieldGet2(this,_realWidth)===roundedWidth&&_classPrivateFieldGet2(this,_realHeight)===roundedHeight)return;_classPrivateFieldSet2(this,_realWidth,roundedWidth),_classPrivateFieldSet2(this,_realHeight,roundedHeight),this.canvas.style.visibility="hidden",_classPrivateFieldGet2(this,_aspectRatio)&&Math.abs(_classPrivateFieldGet2(this,_aspectRatio)-width/height)>.01&&(height=Math.ceil(width/_classPrivateFieldGet2(this,_aspectRatio)),this.setDims(width,height));const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.width=width/parentWidth,this.height=height/parentHeight,_classPrivateFieldGet2(this,_disableEditing)&&_classPrivateMethodGet2(this,_setScaleFactor,_setScaleFactor2).call(this,width,height),_classPrivateMethodGet2(this,_setCanvasDims,_setCanvasDims2).call(this),_classPrivateMethodGet2(this,_redraw,_redraw2).call(this),this.canvas.style.visibility="visible"}static deserialize(data,parent){const editor=super.deserialize(data,parent);editor.thickness=data.thickness,editor.color=_util2.Util.makeHexColor(...data.color),editor.opacity=data.opacity;const[pageWidth,pageHeight]=parent.pageDimensions,width=editor.width*pageWidth,height=editor.height*pageHeight,scaleFactor=parent.scaleFactor,padding=data.thickness/2;_classPrivateFieldSet2(editor,_aspectRatio,width/height),_classPrivateFieldSet2(editor,_disableEditing,!0),_classPrivateFieldSet2(editor,_realWidth,Math.round(width)),_classPrivateFieldSet2(editor,_realHeight,Math.round(height));for(const{bezier}of data.paths){const path=[];editor.paths.push(path);let p0=scaleFactor*(bezier[0]-padding),p1=scaleFactor*(height-bezier[1]-padding);for(let i=2,ii=bezier.length;i<ii;i+=6){const p10=scaleFactor*(bezier[i]-padding),p11=scaleFactor*(height-bezier[i+1]-padding),p20=scaleFactor*(bezier[i+2]-padding),p21=scaleFactor*(height-bezier[i+3]-padding),p30=scaleFactor*(bezier[i+4]-padding),p31=scaleFactor*(height-bezier[i+5]-padding);path.push([[p0,p1],[p10,p11],[p20,p21],[p30,p31]]),p0=p30,p1=p31}const path2D=_classStaticPrivateMethodGet(this,_InkEditor2,_buildPath2D).call(this,path);editor.bezierPath2D.push(path2D)}const bbox=_classPrivateMethodGet2(editor,_getBbox,_getBbox2).call(editor);return _classPrivateFieldSet2(editor,_baseWidth,Math.max(RESIZER_SIZE,bbox[2]-bbox[0])),_classPrivateFieldSet2(editor,_baseHeight,Math.max(RESIZER_SIZE,bbox[3]-bbox[1])),_classPrivateMethodGet2(editor,_setScaleFactor,_setScaleFactor2).call(editor,width,height),editor}serialize(){if(this.isEmpty())return null;const rect=this.getRect(0,0),height=this.rotation%180===0?rect[3]-rect[1]:rect[2]-rect[0],color=_editor.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:_util2.AnnotationEditorType.INK,color,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet2(this,_serializePaths,_serializePaths2).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,height),pageIndex:this.parent.pageIndex,rect,rotation:this.rotation}}};__name(_InkEditor,"InkEditor");let InkEditor=_InkEditor;exports2.InkEditor=InkEditor;function _updateThickness2(thickness){const savedThickness=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=thickness,_classPrivateMethodGet2(this,_fitToContent,_fitToContent2).call(this)},undo:()=>{this.thickness=savedThickness,_classPrivateMethodGet2(this,_fitToContent,_fitToContent2).call(this)},mustExec:!0,type:_util2.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}__name2(_updateThickness2,"_updateThickness2"),__name(_updateThickness2,"_updateThickness2");function _updateColor2(color){const savedColor=this.color;this.parent.addCommands({cmd:()=>{this.color=color,_classPrivateMethodGet2(this,_redraw,_redraw2).call(this)},undo:()=>{this.color=savedColor,_classPrivateMethodGet2(this,_redraw,_redraw2).call(this)},mustExec:!0,type:_util2.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}__name2(_updateColor2,"_updateColor2"),__name(_updateColor2,"_updateColor2");function _updateOpacity2(opacity){opacity/=100;const savedOpacity=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=opacity,_classPrivateMethodGet2(this,_redraw,_redraw2).call(this)},undo:()=>{this.opacity=savedOpacity,_classPrivateMethodGet2(this,_redraw,_redraw2).call(this)},mustExec:!0,type:_util2.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}__name2(_updateOpacity2,"_updateOpacity2"),__name(_updateOpacity2,"_updateOpacity2");function _getInitialBBox2(){const{width,height,rotation}=this.parent.viewport;switch(rotation){case 90:return[0,width,width,height];case 180:return[width,height,width,height];case 270:return[height,0,width,height];default:return[0,0,width,height]}}__name2(_getInitialBBox2,"_getInitialBBox2"),__name(_getInitialBBox2,"_getInitialBBox2");function _setStroke2(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,_tools.opacityToHex)(this.opacity)}`}__name2(_setStroke2,"_setStroke2"),__name(_setStroke2,"_setStroke2");function _startDrawing2(x,y){if(this.isEditing=!0,!_classPrivateFieldGet2(this,_isCanvasInitialized)){var _this$opacity2;_classPrivateFieldSet2(this,_isCanvasInitialized,!0),_classPrivateMethodGet2(this,_setCanvasDims,_setCanvasDims2).call(this),this.thickness||(this.thickness=InkEditor._defaultThickness),this.color||(this.color=InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor),(_this$opacity2=this.opacity)!==null&&_this$opacity2!==void 0||(this.opacity=InkEditor._defaultOpacity)}this.currentPath.push([x,y]),_classPrivateFieldSet2(this,_lastPoint,null),_classPrivateMethodGet2(this,_setStroke,_setStroke2).call(this),this.ctx.beginPath(),this.ctx.moveTo(x,y),_classPrivateFieldSet2(this,_requestFrameCallback,()=>{_classPrivateFieldGet2(this,_requestFrameCallback)&&(_classPrivateFieldGet2(this,_lastPoint)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):_classPrivateMethodGet2(this,_redraw,_redraw2).call(this),this.ctx.lineTo(..._classPrivateFieldGet2(this,_lastPoint)),_classPrivateFieldSet2(this,_lastPoint,null),this.ctx.stroke()),window.requestAnimationFrame(_classPrivateFieldGet2(this,_requestFrameCallback)))}),window.requestAnimationFrame(_classPrivateFieldGet2(this,_requestFrameCallback))}__name2(_startDrawing2,"_startDrawing2"),__name(_startDrawing2,"_startDrawing2");function _draw2(x,y){const[lastX,lastY]=this.currentPath.at(-1);x===lastX&&y===lastY||(this.currentPath.push([x,y]),_classPrivateFieldSet2(this,_lastPoint,[x,y]))}__name2(_draw2,"_draw2"),__name(_draw2,"_draw2");function _stopDrawing2(x,y){this.ctx.closePath(),_classPrivateFieldSet2(this,_requestFrameCallback,null),x=Math.min(Math.max(x,0),this.canvas.width),y=Math.min(Math.max(y,0),this.canvas.height);const[lastX,lastY]=this.currentPath.at(-1);(x!==lastX||y!==lastY)&&this.currentPath.push([x,y]);let bezier;if(this.currentPath.length!==1)bezier=(0,_pdfjsFitCurve.fitCurve)(this.currentPath,30,null);else{const xy=[x,y];bezier=[[xy,xy.slice(),xy.slice(),xy]]}const path2D=_classStaticPrivateMethodGet(InkEditor,InkEditor,_buildPath2D).call(InkEditor,bezier);this.currentPath.length=0;const cmd=__name(()=>{this.paths.push(bezier),this.bezierPath2D.push(path2D),this.rebuild()},"cmd"),undo=__name(()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(_classPrivateMethodGet2(this,_createCanvas,_createCanvas2).call(this),_classPrivateMethodGet2(this,_createObserver,_createObserver2).call(this)),_classPrivateMethodGet2(this,_fitToContent,_fitToContent2).call(this))},"undo");this.parent.addCommands({cmd,undo,mustExec:!0})}__name2(_stopDrawing2,"_stopDrawing2"),__name(_stopDrawing2,"_stopDrawing2");function _redraw2(){if(this.isEmpty()){_classPrivateMethodGet2(this,_updateTransform,_updateTransform2).call(this);return}_classPrivateMethodGet2(this,_setStroke,_setStroke2).call(this);const{canvas,ctx}=this;ctx.setTransform(1,0,0,1,0,0),ctx.clearRect(0,0,canvas.width,canvas.height),_classPrivateMethodGet2(this,_updateTransform,_updateTransform2).call(this);for(const path of this.bezierPath2D)ctx.stroke(path)}__name2(_redraw2,"_redraw2"),__name(_redraw2,"_redraw2");function _endDrawing2(event){_classPrivateMethodGet2(this,_stopDrawing,_stopDrawing2).call(this,event.offsetX,event.offsetY),this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet2(this,_boundCanvasPointerleave)),this.canvas.removeEventListener("pointermove",_classPrivateFieldGet2(this,_boundCanvasPointermove)),this.parent.addToAnnotationStorage(this)}__name2(_endDrawing2,"_endDrawing2"),__name(_endDrawing2,"_endDrawing2");function _createCanvas2(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",InkEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(msg=>{var _this$canvas;return(_this$canvas=this.canvas)===null||_this$canvas===void 0?void 0:_this$canvas.setAttribute("aria-label",msg)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}__name2(_createCanvas2,"_createCanvas2"),__name(_createCanvas2,"_createCanvas2");function _createObserver2(){_classPrivateFieldSet2(this,_observer,new ResizeObserver(entries=>{const rect=entries[0].contentRect;rect.width&&rect.height&&this.setDimensions(rect.width,rect.height)})),_classPrivateFieldGet2(this,_observer).observe(this.div)}__name2(_createObserver2,"_createObserver2"),__name(_createObserver2,"_createObserver2");function _setCanvasDims2(){if(!_classPrivateFieldGet2(this,_isCanvasInitialized))return;const[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*parentWidth),this.canvas.height=Math.ceil(this.height*parentHeight),_classPrivateMethodGet2(this,_updateTransform,_updateTransform2).call(this)}__name2(_setCanvasDims2,"_setCanvasDims2"),__name(_setCanvasDims2,"_setCanvasDims2");function _setScaleFactor2(width,height){const padding=_classPrivateMethodGet2(this,_getPadding,_getPadding2).call(this),scaleFactorW=(width-padding)/_classPrivateFieldGet2(this,_baseWidth),scaleFactorH=(height-padding)/_classPrivateFieldGet2(this,_baseHeight);this.scaleFactor=Math.min(scaleFactorW,scaleFactorH)}__name2(_setScaleFactor2,"_setScaleFactor2"),__name(_setScaleFactor2,"_setScaleFactor2");function _updateTransform2(){const padding=_classPrivateMethodGet2(this,_getPadding,_getPadding2).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+padding,this.translationY*this.scaleFactor+padding)}__name2(_updateTransform2,"_updateTransform2"),__name(_updateTransform2,"_updateTransform2");function _buildPath2D(bezier){const path2D=new Path2D;for(let i=0,ii=bezier.length;i<ii;i++){const[first,control1,control2,second]=bezier[i];i===0&&path2D.moveTo(...first),path2D.bezierCurveTo(control1[0],control1[1],control2[0],control2[1],second[0],second[1])}return path2D}__name2(_buildPath2D,"_buildPath2D"),__name(_buildPath2D,"_buildPath2D");function _serializePaths2(s,tx,ty,h){const paths=[],padding=this.thickness/2;let buffer,points;for(const bezier of this.paths){buffer=[],points=[];for(let i=0,ii=bezier.length;i<ii;i++){const[first,control1,control2,second]=bezier[i],p10=s*(first[0]+tx)+padding,p11=h-s*(first[1]+ty)-padding,p20=s*(control1[0]+tx)+padding,p21=h-s*(control1[1]+ty)-padding,p30=s*(control2[0]+tx)+padding,p31=h-s*(control2[1]+ty)-padding,p40=s*(second[0]+tx)+padding,p41=h-s*(second[1]+ty)-padding;i===0&&(buffer.push(p10,p11),points.push(p10,p11)),buffer.push(p20,p21,p30,p31,p40,p41),_classPrivateMethodGet2(this,_extractPointsOnBezier,_extractPointsOnBezier2).call(this,p10,p11,p20,p21,p30,p31,p40,p41,4,points)}paths.push({bezier:buffer,points})}return paths}__name2(_serializePaths2,"_serializePaths2"),__name(_serializePaths2,"_serializePaths2");function _extractPointsOnBezier2(p10,p11,p20,p21,p30,p31,p40,p41,n,points){if(_classPrivateMethodGet2(this,_isAlmostFlat,_isAlmostFlat2).call(this,p10,p11,p20,p21,p30,p31,p40,p41)){points.push(p40,p41);return}for(let i=1;i<n-1;i++){const t=i/n,mt=1-t;let q10=t*p10+mt*p20,q11=t*p11+mt*p21,q20=t*p20+mt*p30,q21=t*p21+mt*p31;const q30=t*p30+mt*p40,q31=t*p31+mt*p41;q10=t*q10+mt*q20,q11=t*q11+mt*q21,q20=t*q20+mt*q30,q21=t*q21+mt*q31,q10=t*q10+mt*q20,q11=t*q11+mt*q21,points.push(q10,q11)}points.push(p40,p41)}__name2(_extractPointsOnBezier2,"_extractPointsOnBezier2"),__name(_extractPointsOnBezier2,"_extractPointsOnBezier2");function _isAlmostFlat2(p10,p11,p20,p21,p30,p31,p40,p41){const ax=(3*p20-2*p10-p40)**2,ay=(3*p21-2*p11-p41)**2,bx=(3*p30-p10-2*p40)**2,by=(3*p31-p11-2*p41)**2;return Math.max(ax,bx)+Math.max(ay,by)<=10}__name2(_isAlmostFlat2,"_isAlmostFlat2"),__name(_isAlmostFlat2,"_isAlmostFlat2");function _getBbox2(){let xMin=1/0,xMax=-1/0,yMin=1/0,yMax=-1/0;for(const path of this.paths)for(const[first,control1,control2,second]of path){const bbox=_util2.Util.bezierBoundingBox(...first,...control1,...control2,...second);xMin=Math.min(xMin,bbox[0]),yMin=Math.min(yMin,bbox[1]),xMax=Math.max(xMax,bbox[2]),yMax=Math.max(yMax,bbox[3])}return[xMin,yMin,xMax,yMax]}__name2(_getBbox2,"_getBbox2"),__name(_getBbox2,"_getBbox2");function _getPadding2(){return _classPrivateFieldGet2(this,_disableEditing)?Math.ceil(this.thickness*this.parent.scaleFactor):0}__name2(_getPadding2,"_getPadding2"),__name(_getPadding2,"_getPadding2");function _fitToContent2(){let firstTime=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return;if(!_classPrivateFieldGet2(this,_disableEditing)){_classPrivateMethodGet2(this,_redraw,_redraw2).call(this);return}const bbox=_classPrivateMethodGet2(this,_getBbox,_getBbox2).call(this),padding=_classPrivateMethodGet2(this,_getPadding,_getPadding2).call(this);_classPrivateFieldSet2(this,_baseWidth,Math.max(RESIZER_SIZE,bbox[2]-bbox[0])),_classPrivateFieldSet2(this,_baseHeight,Math.max(RESIZER_SIZE,bbox[3]-bbox[1]));const width=Math.ceil(padding+_classPrivateFieldGet2(this,_baseWidth)*this.scaleFactor),height=Math.ceil(padding+_classPrivateFieldGet2(this,_baseHeight)*this.scaleFactor),[parentWidth,parentHeight]=this.parent.viewportBaseDimensions;this.width=width/parentWidth,this.height=height/parentHeight,_classPrivateFieldSet2(this,_aspectRatio,width/height),_classPrivateMethodGet2(this,_setMinDims,_setMinDims2).call(this);const prevTranslationX=this.translationX,prevTranslationY=this.translationY;this.translationX=-bbox[0],this.translationY=-bbox[1],_classPrivateMethodGet2(this,_setCanvasDims,_setCanvasDims2).call(this),_classPrivateMethodGet2(this,_redraw,_redraw2).call(this),_classPrivateFieldSet2(this,_realWidth,width),_classPrivateFieldSet2(this,_realHeight,height),this.setDims(width,height);const unscaledPadding=firstTime?padding/this.scaleFactor/2:0;this.translate(prevTranslationX-this.translationX-unscaledPadding,prevTranslationY-this.translationY-unscaledPadding)}__name2(_fitToContent2,"_fitToContent2"),__name(_fitToContent2,"_fitToContent2");function _setMinDims2(){const{style}=this.div;_classPrivateFieldGet2(this,_aspectRatio)>=1?(style.minHeight=`${RESIZER_SIZE}px`,style.minWidth=`${Math.round(_classPrivateFieldGet2(this,_aspectRatio)*RESIZER_SIZE)}px`):(style.minWidth=`${RESIZER_SIZE}px`,style.minHeight=`${Math.round(RESIZER_SIZE/_classPrivateFieldGet2(this,_aspectRatio))}px`)}__name2(_setMinDims2,"_setMinDims2"),__name(_setMinDims2,"_setMinDims2"),_defineProperty(InkEditor,"_defaultColor",null),_defineProperty(InkEditor,"_defaultOpacity",1),_defineProperty(InkEditor,"_defaultThickness",1),_defineProperty(InkEditor,"_l10nPromise",void 0),_defineProperty(InkEditor,"_type","ink")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.fitCurve=void 0;const fitCurve=__w_pdfjs_require__2(151);exports2.fitCurve=fitCurve},module2=>{function fitCurve(points,maxError,progressCallback){if(!Array.isArray(points))throw new TypeError("First argument should be an array");if(points.forEach(point=>{if(!Array.isArray(point)||point.some(item=>typeof item!="number")||point.length!==points[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),points=points.filter((point,i)=>i===0||!point.every((val,j)=>val===points[i-1][j])),points.length<2)return[];const len=points.length,leftTangent=createTangent(points[1],points[0]),rightTangent=createTangent(points[len-2],points[len-1]);return fitCubic(points,leftTangent,rightTangent,maxError,progressCallback)}__name2(fitCurve,"fitCurve"),__name(fitCurve,"fitCurve");function fitCubic(points,leftTangent,rightTangent,error,progressCallback){var bezCurve,u,uPrime,maxError,prevErr,splitPoint,prevSplit,centerVector,toCenterTangent,fromCenterTangent,beziers,dist,i;if(points.length===2)return dist=maths.vectorLen(maths.subtract(points[0],points[1]))/3,bezCurve=[points[0],maths.addArrays(points[0],maths.mulItems(leftTangent,dist)),maths.addArrays(points[1],maths.mulItems(rightTangent,dist)),points[1]],[bezCurve];if(u=chordLengthParameterize(points),[bezCurve,maxError,splitPoint]=generateAndReport(points,u,u,leftTangent,rightTangent,progressCallback),maxError===0||maxError<error)return[bezCurve];if(maxError<error*error)for(uPrime=u,prevErr=maxError,prevSplit=splitPoint,i=0;i<20;i++){if(uPrime=reparameterize(bezCurve,points,uPrime),[bezCurve,maxError,splitPoint]=generateAndReport(points,u,uPrime,leftTangent,rightTangent,progressCallback),maxError<error)return[bezCurve];if(splitPoint===prevSplit){let errChange=maxError/prevErr;if(errChange>.9999&&errChange<1.0001)break}prevErr=maxError,prevSplit=splitPoint}return beziers=[],centerVector=maths.subtract(points[splitPoint-1],points[splitPoint+1]),centerVector.every(val=>val===0)&&(centerVector=maths.subtract(points[splitPoint-1],points[splitPoint]),[centerVector[0],centerVector[1]]=[-centerVector[1],centerVector[0]]),toCenterTangent=maths.normalize(centerVector),fromCenterTangent=maths.mulItems(toCenterTangent,-1),beziers=beziers.concat(fitCubic(points.slice(0,splitPoint+1),leftTangent,toCenterTangent,error,progressCallback)),beziers=beziers.concat(fitCubic(points.slice(splitPoint),fromCenterTangent,rightTangent,error,progressCallback)),beziers}__name2(fitCubic,"fitCubic"),__name(fitCubic,"fitCubic");function generateAndReport(points,paramsOrig,paramsPrime,leftTangent,rightTangent,progressCallback){var bezCurve,maxError,splitPoint;return bezCurve=generateBezier(points,paramsPrime,leftTangent,rightTangent),[maxError,splitPoint]=computeMaxError(points,bezCurve,paramsOrig),progressCallback&&progressCallback({bez:bezCurve,points,params:paramsOrig,maxErr:maxError,maxPoint:splitPoint}),[bezCurve,maxError,splitPoint]}__name2(generateAndReport,"generateAndReport"),__name(generateAndReport,"generateAndReport");function generateBezier(points,parameters,leftTangent,rightTangent){var bezCurve,A,a,C,X,det_C0_C1,det_C0_X,det_X_C1,alpha_l,alpha_r,epsilon,segLength,i,len,tmp,u,ux,firstPoint=points[0],lastPoint=points[points.length-1];for(bezCurve=[firstPoint,null,null,lastPoint],A=maths.zeros_Xx2x2(parameters.length),i=0,len=parameters.length;i<len;i++)u=parameters[i],ux=1-u,a=A[i],a[0]=maths.mulItems(leftTangent,3*u*(ux*ux)),a[1]=maths.mulItems(rightTangent,3*ux*(u*u));for(C=[[0,0],[0,0]],X=[0,0],i=0,len=points.length;i<len;i++)u=parameters[i],a=A[i],C[0][0]+=maths.dot(a[0],a[0]),C[0][1]+=maths.dot(a[0],a[1]),C[1][0]+=maths.dot(a[0],a[1]),C[1][1]+=maths.dot(a[1],a[1]),tmp=maths.subtract(points[i],bezier.q([firstPoint,firstPoint,lastPoint,lastPoint],u)),X[0]+=maths.dot(a[0],tmp),X[1]+=maths.dot(a[1],tmp);return det_C0_C1=C[0][0]*C[1][1]-C[1][0]*C[0][1],det_C0_X=C[0][0]*X[1]-C[1][0]*X[0],det_X_C1=X[0]*C[1][1]-X[1]*C[0][1],alpha_l=det_C0_C1===0?0:det_X_C1/det_C0_C1,alpha_r=det_C0_C1===0?0:det_C0_X/det_C0_C1,segLength=maths.vectorLen(maths.subtract(firstPoint,lastPoint)),epsilon=1e-6*segLength,alpha_l<epsilon||alpha_r<epsilon?(bezCurve[1]=maths.addArrays(firstPoint,maths.mulItems(leftTangent,segLength/3)),bezCurve[2]=maths.addArrays(lastPoint,maths.mulItems(rightTangent,segLength/3))):(bezCurve[1]=maths.addArrays(firstPoint,maths.mulItems(leftTangent,alpha_l)),bezCurve[2]=maths.addArrays(lastPoint,maths.mulItems(rightTangent,alpha_r))),bezCurve}__name2(generateBezier,"generateBezier"),__name(generateBezier,"generateBezier");function reparameterize(bezier2,points,parameters){return parameters.map((p,i)=>newtonRaphsonRootFind(bezier2,points[i],p))}__name2(reparameterize,"reparameterize"),__name(reparameterize,"reparameterize");function newtonRaphsonRootFind(bez,point,u){var d=maths.subtract(bezier.q(bez,u),point),qprime=bezier.qprime(bez,u),numerator=maths.mulMatrix(d,qprime),denominator=maths.sum(maths.squareItems(qprime))+2*maths.mulMatrix(d,bezier.qprimeprime(bez,u));return denominator===0?u:u-numerator/denominator}__name2(newtonRaphsonRootFind,"newtonRaphsonRootFind"),__name(newtonRaphsonRootFind,"newtonRaphsonRootFind");function chordLengthParameterize(points){var u=[],currU,prevU,prevP;return points.forEach((p,i)=>{currU=i?prevU+maths.vectorLen(maths.subtract(p,prevP)):0,u.push(currU),prevU=currU,prevP=p}),u=u.map(x=>x/prevU),u}__name2(chordLengthParameterize,"chordLengthParameterize"),__name(chordLengthParameterize,"chordLengthParameterize");function computeMaxError(points,bez,parameters){var dist,maxDist,splitPoint,v,i,count,point,t;maxDist=0,splitPoint=Math.floor(points.length/2);const t_distMap=mapTtoRelativeDistances(bez,10);for(i=0,count=points.length;i<count;i++)point=points[i],t=find_t(bez,parameters[i],t_distMap,10),v=maths.subtract(bezier.q(bez,t),point),dist=v[0]*v[0]+v[1]*v[1],dist>maxDist&&(maxDist=dist,splitPoint=i);return[maxDist,splitPoint]}__name2(computeMaxError,"computeMaxError"),__name(computeMaxError,"computeMaxError");var mapTtoRelativeDistances=__name(function(bez,B_parts){for(var B_t_curr,B_t_dist=[0],B_t_prev=bez[0],sumLen=0,i=1;i<=B_parts;i++)B_t_curr=bezier.q(bez,i/B_parts),sumLen+=maths.vectorLen(maths.subtract(B_t_curr,B_t_prev)),B_t_dist.push(sumLen),B_t_prev=B_t_curr;return B_t_dist=B_t_dist.map(x=>x/sumLen),B_t_dist},"mapTtoRelativeDistances");function find_t(bez,param,t_distMap,B_parts){if(param<0)return 0;if(param>1)return 1;for(var lenMax,lenMin,tMax,tMin,t,i=1;i<=B_parts;i++)if(param<=t_distMap[i]){tMin=(i-1)/B_parts,tMax=i/B_parts,lenMin=t_distMap[i-1],lenMax=t_distMap[i],t=(param-lenMin)/(lenMax-lenMin)*(tMax-tMin)+tMin;break}return t}__name2(find_t,"find_t"),__name(find_t,"find_t");function createTangent(pointA,pointB){return maths.normalize(maths.subtract(pointA,pointB))}__name2(createTangent,"createTangent"),__name(createTangent,"createTangent");const _maths=class _maths2{static{__name2(this,"_maths")}static zeros_Xx2x2(x){for(var zs=[];x--;)zs.push([0,0]);return zs}static mulItems(items,multiplier){return items.map(x=>x*multiplier)}static mulMatrix(m1,m2){return m1.reduce((sum,x1,i)=>sum+x1*m2[i],0)}static subtract(arr1,arr2){return arr1.map((x1,i)=>x1-arr2[i])}static addArrays(arr1,arr2){return arr1.map((x1,i)=>x1+arr2[i])}static addItems(items,addition){return items.map(x=>x+addition)}static sum(items){return items.reduce((sum,x)=>sum+x)}static dot(m1,m2){return _maths2.mulMatrix(m1,m2)}static vectorLen(v){return Math.hypot(...v)}static divItems(items,divisor){return items.map(x=>x/divisor)}static squareItems(items){return items.map(x=>x*x)}static normalize(v){return this.divItems(v,this.vectorLen(v))}};__name(_maths,"maths");let maths=_maths;const _bezier=class{static{__name2(this,"_bezier")}static q(ctrlPoly,t){var tx=1-t,pA=maths.mulItems(ctrlPoly[0],tx*tx*tx),pB=maths.mulItems(ctrlPoly[1],3*tx*tx*t),pC=maths.mulItems(ctrlPoly[2],3*tx*t*t),pD=maths.mulItems(ctrlPoly[3],t*t*t);return maths.addArrays(maths.addArrays(pA,pB),maths.addArrays(pC,pD))}static qprime(ctrlPoly,t){var tx=1-t,pA=maths.mulItems(maths.subtract(ctrlPoly[1],ctrlPoly[0]),3*tx*tx),pB=maths.mulItems(maths.subtract(ctrlPoly[2],ctrlPoly[1]),6*tx*t),pC=maths.mulItems(maths.subtract(ctrlPoly[3],ctrlPoly[2]),3*t*t);return maths.addArrays(maths.addArrays(pA,pB),pC)}static qprimeprime(ctrlPoly,t){return maths.addArrays(maths.mulItems(maths.addArrays(maths.subtract(ctrlPoly[2],maths.mulItems(ctrlPoly[1],2)),ctrlPoly[0]),6*(1-t)),maths.mulItems(maths.addArrays(maths.subtract(ctrlPoly[3],maths.mulItems(ctrlPoly[2],2)),ctrlPoly[1]),6*t))}};__name(_bezier,"bezier");let bezier=_bezier;module2.exports=fitCurve,module2.exports.fitCubic=fitCubic,module2.exports.createTangent=createTangent},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.AnnotationLayer=void 0;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(133),_annotation_storage2=__w_pdfjs_require__2(130),_scripting_utils=__w_pdfjs_require__2(153),_xfa_layer=__w_pdfjs_require__2(154);function _classStaticPrivateMethodGet(receiver,classConstructor,method){return _classCheckPrivateStaticAccess2(receiver,classConstructor),method}__name2(_classStaticPrivateMethodGet,"_classStaticPrivateMethodGet"),__name(_classStaticPrivateMethodGet,"_classStaticPrivateMethodGet");function _classCheckPrivateStaticAccess2(receiver,classConstructor){if(receiver!==classConstructor)throw new TypeError("Private static access of wrong provenance")}__name2(_classCheckPrivateStaticAccess2,"_classCheckPrivateStaticAccess2"),__name(_classCheckPrivateStaticAccess2,"_classCheckPrivateStaticAccess");const DEFAULT_TAB_INDEX=1e3,DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet;function getRectDims(rect){return{width:rect[2]-rect[0],height:rect[3]-rect[1]}}__name2(getRectDims,"getRectDims"),__name(getRectDims,"getRectDims");const _AnnotationElementFactory=class{static{__name2(this,"_AnnotationElementFactory")}static create(parameters){switch(parameters.data.annotationType){case _util2.AnnotationType.LINK:return new LinkAnnotationElement(parameters);case _util2.AnnotationType.TEXT:return new TextAnnotationElement(parameters);case _util2.AnnotationType.WIDGET:switch(parameters.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(parameters);case"Btn":return parameters.data.radioButton?new RadioButtonWidgetAnnotationElement(parameters):parameters.data.checkBox?new CheckboxWidgetAnnotationElement(parameters):new PushButtonWidgetAnnotationElement(parameters);case"Ch":return new ChoiceWidgetAnnotationElement(parameters)}return new WidgetAnnotationElement(parameters);case _util2.AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case _util2.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(parameters);case _util2.AnnotationType.LINE:return new LineAnnotationElement(parameters);case _util2.AnnotationType.SQUARE:return new SquareAnnotationElement(parameters);case _util2.AnnotationType.CIRCLE:return new CircleAnnotationElement(parameters);case _util2.AnnotationType.POLYLINE:return new PolylineAnnotationElement(parameters);case _util2.AnnotationType.CARET:return new CaretAnnotationElement(parameters);case _util2.AnnotationType.INK:return new InkAnnotationElement(parameters);case _util2.AnnotationType.POLYGON:return new PolygonAnnotationElement(parameters);case _util2.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case _util2.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case _util2.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case _util2.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case _util2.AnnotationType.STAMP:return new StampAnnotationElement(parameters);case _util2.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters)}}};__name(_AnnotationElementFactory,"AnnotationElementFactory");let AnnotationElementFactory=_AnnotationElementFactory;const _AnnotationElement=class{static{__name2(this,"_AnnotationElement")}constructor(parameters){let{isRenderable=!1,ignoreBorder=!1,createQuadrilaterals=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=isRenderable,this.data=parameters.data,this.layer=parameters.layer,this.page=parameters.page,this.viewport=parameters.viewport,this.linkService=parameters.linkService,this.downloadManager=parameters.downloadManager,this.imageResourcesPath=parameters.imageResourcesPath,this.renderForms=parameters.renderForms,this.svgFactory=parameters.svgFactory,this.annotationStorage=parameters.annotationStorage,this.enableScripting=parameters.enableScripting,this.hasJSActions=parameters.hasJSActions,this._fieldObjects=parameters.fieldObjects,this._mouseState=parameters.mouseState,isRenderable&&(this.container=this._createContainer(ignoreBorder)),createQuadrilaterals&&(this.quadrilaterals=this._createQuadrilaterals(ignoreBorder))}_createContainer(){let ignoreBorder=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const data=this.data,page=this.page,viewport=this.viewport,container=document.createElement("section"),{width,height}=getRectDims(data.rect),[pageLLx,pageLLy,pageURx,pageURy]=viewport.viewBox,pageWidth=pageURx-pageLLx,pageHeight=pageURy-pageLLy;container.setAttribute("data-annotation-id",data.id);const rect=_util2.Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);if(!ignoreBorder&&data.borderStyle.width>0){container.style.borderWidth=`${data.borderStyle.width}px`;const horizontalRadius=data.borderStyle.horizontalCornerRadius,verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){const radius=`calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;container.style.borderRadius=radius}else if(this instanceof RadioButtonWidgetAnnotationElement){const radius=`calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;container.style.borderRadius=radius}switch(data.borderStyle.style){case _util2.AnnotationBorderStyleType.SOLID:container.style.borderStyle="solid";break;case _util2.AnnotationBorderStyleType.DASHED:container.style.borderStyle="dashed";break;case _util2.AnnotationBorderStyleType.BEVELED:(0,_util2.warn)("Unimplemented border style: beveled");break;case _util2.AnnotationBorderStyleType.INSET:(0,_util2.warn)("Unimplemented border style: inset");break;case _util2.AnnotationBorderStyleType.UNDERLINE:container.style.borderBottomStyle="solid";break}const borderColor=data.borderColor||null;borderColor?container.style.borderColor=_util2.Util.makeHexColor(borderColor[0]|0,borderColor[1]|0,borderColor[2]|0):container.style.borderWidth=0}container.style.left=`${100*(rect[0]-pageLLx)/pageWidth}%`,container.style.top=`${100*(rect[1]-pageLLy)/pageHeight}%`;const{rotation}=data;return data.hasOwnCanvas||rotation===0?(container.style.width=`${100*width/pageWidth}%`,container.style.height=`${100*height/pageHeight}%`):this.setRotation(rotation,container),container}setRotation(angle){let container=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;const[pageLLx,pageLLy,pageURx,pageURy]=this.viewport.viewBox,pageWidth=pageURx-pageLLx,pageHeight=pageURy-pageLLy,{width,height}=getRectDims(this.data.rect);let elementWidth,elementHeight;angle%180===0?(elementWidth=100*width/pageWidth,elementHeight=100*height/pageHeight):(elementWidth=100*height/pageWidth,elementHeight=100*width/pageHeight),container.style.width=`${elementWidth}%`,container.style.height=`${elementHeight}%`,container.setAttribute("data-main-rotation",(360-angle)%360)}get _commonActions(){const setColor=__name((jsName,styleName,event)=>{const color=event.detail[jsName];event.target.style[styleName]=_scripting_utils.ColorConverters[`${color[0]}_HTML`](color.slice(1))},"setColor");return(0,_util2.shadow)(this,"_commonActions",{display:event=>{const hidden=event.detail.display%2===1;this.container.style.visibility=hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden,print:event.detail.display===0||event.detail.display===3})},print:event=>{this.annotationStorage.setValue(this.data.id,{print:event.detail.print})},hidden:event=>{this.container.style.visibility=event.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:event.detail.hidden})},focus:event=>{setTimeout(()=>event.target.focus({preventScroll:!1}),0)},userName:event=>{event.target.title=event.detail.userName},readonly:event=>{event.detail.readonly?event.target.setAttribute("readonly",""):event.target.removeAttribute("readonly")},required:event=>{this._setRequired(event.target,event.detail.required)},bgColor:event=>{setColor("bgColor","backgroundColor",event)},fillColor:event=>{setColor("fillColor","backgroundColor",event)},fgColor:event=>{setColor("fgColor","color",event)},textColor:event=>{setColor("textColor","color",event)},borderColor:event=>{setColor("borderColor","borderColor",event)},strokeColor:event=>{setColor("strokeColor","borderColor",event)},rotation:event=>{const angle=event.detail.rotation;this.setRotation(angle),this.annotationStorage.setValue(this.data.id,{rotation:angle})}})}_dispatchEventFromSandbox(actions,jsEvent){const commonActions=this._commonActions;for(const name of Object.keys(jsEvent.detail)){const action=actions[name]||commonActions[name];action&&action(jsEvent)}}_setDefaultPropertiesFromJS(element){if(!this.enableScripting)return;const storedData=this.annotationStorage.getRawValue(this.data.id);if(!storedData)return;const commonActions=this._commonActions;for(const[actionName,detail]of Object.entries(storedData)){const action=commonActions[actionName];if(action){const eventProxy={detail:{[actionName]:detail},target:element};action(eventProxy),delete storedData[actionName]}}}_createQuadrilaterals(){let ignoreBorder=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.data.quadPoints)return null;const quadrilaterals=[],savedRect=this.data.rect;for(const quadPoint of this.data.quadPoints)this.data.rect=[quadPoint[2].x,quadPoint[2].y,quadPoint[1].x,quadPoint[1].y],quadrilaterals.push(this._createContainer(ignoreBorder));return this.data.rect=savedRect,quadrilaterals}_createPopup(trigger,data){let container=this.container;this.quadrilaterals&&(trigger=trigger||this.quadrilaterals,container=this.quadrilaterals[0]),trigger||(trigger=document.createElement("div"),trigger.className="popupTriggerArea",container.append(trigger));const popup=new PopupElement({container,trigger,color:data.color,titleObj:data.titleObj,modificationDate:data.modificationDate,contentsObj:data.contentsObj,richText:data.richText,hideWrapper:!0}).render();popup.style.left="100%",container.append(popup)}_renderQuadrilaterals(className){for(const quadrilateral of this.quadrilaterals)quadrilateral.className=className;return this.quadrilaterals}render(){(0,_util2.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(name){let skipId=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const fields=[];if(this._fieldObjects){const fieldObj=this._fieldObjects[name];if(fieldObj)for(const{page,id,exportValues}of fieldObj){if(page===-1||id===skipId)continue;const exportValue=typeof exportValues=="string"?exportValues:null,domElement=document.querySelector(`[data-element-id="${id}"]`);if(domElement&&!GetElementsByNameSet.has(domElement)){(0,_util2.warn)(`_getElementsByName - element not allowed: ${id}`);continue}fields.push({id,exportValue,domElement})}return fields}for(const domElement of document.getElementsByName(name)){const{id,exportValue}=domElement;id!==skipId&&GetElementsByNameSet.has(domElement)&&fields.push({id,exportValue,domElement})}return fields}static get platform(){const platform=typeof navigator<"u"?navigator.platform:"";return(0,_util2.shadow)(this,"platform",{isWin:platform.includes("Win"),isMac:platform.includes("Mac")})}};__name(_AnnotationElement,"AnnotationElement");let AnnotationElement=_AnnotationElement;const _LinkAnnotationElement=class extends AnnotationElement{static{__name2(this,"_LinkAnnotationElement")}constructor(parameters){let options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(parameters,{isRenderable:!0,ignoreBorder:!!(options!=null&&options.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=parameters.data.isTooltipOnly}render(){const{data,linkService}=this,link=document.createElement("a");link.setAttribute("data-element-id",data.id);let isBound=!1;return data.url?(linkService.addLinkAttributes(link,data.url,data.newWindow),isBound=!0):data.action?(this._bindNamedAction(link,data.action),isBound=!0):data.dest?(this._bindLink(link,data.dest),isBound=!0):(data.actions&&(data.actions.Action||data.actions["Mouse Up"]||data.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(link,data),isBound=!0),data.resetForm?(this._bindResetFormAction(link,data.resetForm),isBound=!0):this.isTooltipOnly&&!isBound&&(this._bindLink(link,""),isBound=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((quadrilateral,index)=>{const linkElement=index===0?link:link.cloneNode();return quadrilateral.append(linkElement),quadrilateral}):(this.container.className="linkAnnotation",isBound&&this.container.append(link),this.container)}_bindLink(link,destination){link.href=this.linkService.getDestinationHash(destination),link.onclick=()=>(destination&&this.linkService.goToDestination(destination),!1),(destination||destination==="")&&(link.className="internalLink")}_bindNamedAction(link,action){link.href=this.linkService.getAnchorUrl(""),link.onclick=()=>(this.linkService.executeNamedAction(action),!1),link.className="internalLink"}_bindJSAction(link,data){link.href=this.linkService.getAnchorUrl("");const map=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const name of Object.keys(data.actions)){const jsName=map.get(name);jsName&&(link[jsName]=()=>{var _this$linkService$eve;return(_this$linkService$eve=this.linkService.eventBus)===null||_this$linkService$eve===void 0||_this$linkService$eve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:data.id,name}}),!1})}link.onclick||(link.onclick=()=>!1),link.className="internalLink"}_bindResetFormAction(link,resetForm){const otherClickAction=link.onclick;if(otherClickAction||(link.href=this.linkService.getAnchorUrl("")),link.className="internalLink",!this._fieldObjects){(0,_util2.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),otherClickAction||(link.onclick=()=>!1);return}link.onclick=()=>{otherClickAction&&otherClickAction();const{fields:resetFormFields,refs:resetFormRefs,include}=resetForm,allFields=[];if(resetFormFields.length!==0||resetFormRefs.length!==0){const fieldIds=new Set(resetFormRefs);for(const fieldName of resetFormFields){const fields=this._fieldObjects[fieldName]||[];for(const{id}of fields)fieldIds.add(id)}for(const fields of Object.values(this._fieldObjects))for(const field of fields)fieldIds.has(field.id)===include&&allFields.push(field)}else for(const fields of Object.values(this._fieldObjects))allFields.push(...fields);const storage=this.annotationStorage,allIds=[];for(const field of allFields){const{id}=field;switch(allIds.push(id),field.type){case"text":{const value=field.defaultValue||"";storage.setValue(id,{value});break}case"checkbox":case"radiobutton":{const value=field.defaultValue===field.exportValues;storage.setValue(id,{value});break}case"combobox":case"listbox":{const value=field.defaultValue||"";storage.setValue(id,{value});break}default:continue}const domElement=document.querySelector(`[data-element-id="${id}"]`);if(domElement){if(!GetElementsByNameSet.has(domElement)){(0,_util2.warn)(`_bindResetFormAction - element not allowed: ${id}`);continue}}else continue;domElement.dispatchEvent(new Event("resetform"))}if(this.enableScripting){var _this$linkService$eve2;(_this$linkService$eve2=this.linkService.eventBus)===null||_this$linkService$eve2===void 0||_this$linkService$eve2.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:allIds,name:"ResetForm"}})}return!1}}};__name(_LinkAnnotationElement,"LinkAnnotationElement");let LinkAnnotationElement=_LinkAnnotationElement;const _TextAnnotationElement=class extends AnnotationElement{static{__name2(this,"_TextAnnotationElement")}constructor(parameters){var _parameters$data$titl,_parameters$data$cont,_parameters$data$rich;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl=parameters.data.titleObj)!==null&&_parameters$data$titl!==void 0&&_parameters$data$titl.str||(_parameters$data$cont=parameters.data.contentsObj)!==null&&_parameters$data$cont!==void 0&&_parameters$data$cont.str||(_parameters$data$rich=parameters.data.richText)!==null&&_parameters$data$rich!==void 0&&_parameters$data$rich.str);super(parameters,{isRenderable})}render(){this.container.className="textAnnotation";const image=document.createElement("img");return image.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",image.alt="[{{type}} Annotation]",image.dataset.l10nId="text_annotation_type",image.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(image,this.data),this.container.append(image),this.container}};__name(_TextAnnotationElement,"TextAnnotationElement");let TextAnnotationElement=_TextAnnotationElement;const _WidgetAnnotationElement=class extends AnnotationElement{static{__name2(this,"_WidgetAnnotationElement")}render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(event){const{isWin,isMac}=AnnotationElement.platform;return isWin&&event.ctrlKey||isMac&&event.metaKey}_setEventListener(element,baseName,eventName,valueGetter){baseName.includes("mouse")?element.addEventListener(baseName,event=>{var _this$linkService$eve3;(_this$linkService$eve3=this.linkService.eventBus)===null||_this$linkService$eve3===void 0||_this$linkService$eve3.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event),shift:event.shiftKey,modifier:this._getKeyModifier(event)}})}):element.addEventListener(baseName,event=>{var _this$linkService$eve4;(_this$linkService$eve4=this.linkService.eventBus)===null||_this$linkService$eve4===void 0||_this$linkService$eve4.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event)}})})}_setEventListeners(element,names,getter){for(const[baseName,eventName]of names){var _this$data$actions;(eventName==="Action"||(_this$data$actions=this.data.actions)!==null&&_this$data$actions!==void 0&&_this$data$actions[eventName])&&this._setEventListener(element,baseName,eventName,getter)}}_setBackgroundColor(element){const color=this.data.backgroundColor||null;element.style.backgroundColor=color===null?"transparent":_util2.Util.makeHexColor(color[0],color[1],color[2])}_setTextStyle(element){const TEXT_ALIGNMENT=["left","center","right"],{fontColor}=this.data.defaultAppearanceData,fontSize=this.data.defaultAppearanceData.fontSize||DEFAULT_FONT_SIZE,style=element.style;let computedFontSize;if(this.data.multiLine){const height=Math.abs(this.data.rect[3]-this.data.rect[1]),numberOfLines=Math.round(height/(_util2.LINE_FACTOR*fontSize))||1,lineHeight=height/numberOfLines;computedFontSize=Math.min(fontSize,Math.round(lineHeight/_util2.LINE_FACTOR))}else{const height=Math.abs(this.data.rect[3]-this.data.rect[1]);computedFontSize=Math.min(fontSize,Math.round(height/_util2.LINE_FACTOR))}style.fontSize=`calc(${computedFontSize}px * var(--scale-factor))`,style.color=_util2.Util.makeHexColor(fontColor[0],fontColor[1],fontColor[2]),this.data.textAlignment!==null&&(style.textAlign=TEXT_ALIGNMENT[this.data.textAlignment])}_setRequired(element,isRequired){isRequired?element.setAttribute("required",!0):element.removeAttribute("required"),element.setAttribute("aria-required",isRequired)}};__name(_WidgetAnnotationElement,"WidgetAnnotationElement");let WidgetAnnotationElement=_WidgetAnnotationElement;const _TextWidgetAnnotationElement=class extends WidgetAnnotationElement{static{__name2(this,"_TextWidgetAnnotationElement")}constructor(parameters){const isRenderable=parameters.renderForms||!parameters.data.hasAppearance&&!!parameters.data.fieldValue;super(parameters,{isRenderable})}setPropertyOnSiblings(base,key,value,keyInStorage){const storage=this.annotationStorage;for(const element of this._getElementsByName(base.name,base.id))element.domElement&&(element.domElement[key]=value),storage.setValue(element.id,{[keyInStorage]:value})}render(){const storage=this.annotationStorage,id=this.data.id;this.container.className="textWidgetAnnotation";let element=null;if(this.renderForms){const storedData=storage.getValue(id,{value:this.data.fieldValue});let textContent=storedData.formattedValue||storedData.value||"";const maxLen=storage.getValue(id,{charLimit:this.data.maxLen}).charLimit;maxLen&&textContent.length>maxLen&&(textContent=textContent.slice(0,maxLen));const elementData={userValue:textContent,formattedValue:null,valueOnFocus:""};this.data.multiLine?(element=document.createElement("textarea"),element.textContent=textContent,this.data.doNotScroll&&(element.style.overflowY="hidden")):(element=document.createElement("input"),element.type="text",element.setAttribute("value",textContent),this.data.doNotScroll&&(element.style.overflowX="hidden")),GetElementsByNameSet.add(element),element.setAttribute("data-element-id",id),element.disabled=this.data.readOnly,element.name=this.data.fieldName,element.tabIndex=DEFAULT_TAB_INDEX,this._setRequired(element,this.data.required),maxLen&&(element.maxLength=maxLen),element.addEventListener("input",event=>{storage.setValue(id,{value:event.target.value}),this.setPropertyOnSiblings(element,"value",event.target.value,"value")}),element.addEventListener("resetform",event=>{var _this$data$defaultFie;const defaultValue=(_this$data$defaultFie=this.data.defaultFieldValue)!==null&&_this$data$defaultFie!==void 0?_this$data$defaultFie:"";element.value=elementData.userValue=defaultValue,elementData.formattedValue=null});let blurListener=__name(event=>{const{formattedValue}=elementData;formattedValue!=null&&(event.target.value=formattedValue),event.target.scrollLeft=0},"blurListener");if(this.enableScripting&&this.hasJSActions){var _this$data$actions2;element.addEventListener("focus",event=>{elementData.userValue&&(event.target.value=elementData.userValue),elementData.valueOnFocus=event.target.value}),element.addEventListener("updatefromsandbox",jsEvent=>{const actions={value(event){var _event$detail$value;elementData.userValue=(_event$detail$value=event.detail.value)!==null&&_event$detail$value!==void 0?_event$detail$value:"",storage.setValue(id,{value:elementData.userValue.toString()}),event.target.value=elementData.userValue},formattedValue(event){const{formattedValue}=event.detail;elementData.formattedValue=formattedValue,formattedValue!=null&&event.target!==document.activeElement&&(event.target.value=formattedValue),storage.setValue(id,{formattedValue})},selRange(event){event.target.setSelectionRange(...event.detail.selRange)},charLimit:event=>{var _this$linkService$eve5;const{charLimit}=event.detail,{target}=event;if(charLimit===0){target.removeAttribute("maxLength");return}target.setAttribute("maxLength",charLimit);let value=elementData.userValue;!value||value.length<=charLimit||(value=value.slice(0,charLimit),target.value=elementData.userValue=value,storage.setValue(id,{value}),(_this$linkService$eve5=this.linkService.eventBus)===null||_this$linkService$eve5===void 0||_this$linkService$eve5.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,willCommit:!0,commitKey:1,selStart:target.selectionStart,selEnd:target.selectionEnd}}))}};this._dispatchEventFromSandbox(actions,jsEvent)}),element.addEventListener("keydown",event=>{var _this$linkService$eve6;let commitKey=-1;if(event.key==="Escape"?commitKey=0:event.key==="Enter"?commitKey=2:event.key==="Tab"&&(commitKey=3),commitKey===-1)return;const{value}=event.target;elementData.valueOnFocus!==value&&(elementData.userValue=value,(_this$linkService$eve6=this.linkService.eventBus)===null||_this$linkService$eve6===void 0||_this$linkService$eve6.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,willCommit:!0,commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}}))});const _blurListener=blurListener;blurListener=null,element.addEventListener("blur",event=>{const{value}=event.target;if(elementData.userValue=value,this._mouseState.isDown&&elementData.valueOnFocus!==value){var _this$linkService$eve7;(_this$linkService$eve7=this.linkService.eventBus)===null||_this$linkService$eve7===void 0||_this$linkService$eve7.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,willCommit:!0,commitKey:1,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}})}_blurListener(event)}),(_this$data$actions2=this.data.actions)!==null&&_this$data$actions2!==void 0&&_this$data$actions2.Keystroke&&element.addEventListener("beforeinput",event=>{var _this$linkService$eve8;const{data,target}=event,{value,selectionStart,selectionEnd}=target;let selStart=selectionStart,selEnd=selectionEnd;switch(event.inputType){case"deleteWordBackward":{const match=value.substring(0,selectionStart).match(/\w*[^\w]*$/);match&&(selStart-=match[0].length);break}case"deleteWordForward":{const match=value.substring(selectionStart).match(/^[^\w]*\w*/);match&&(selEnd+=match[0].length);break}case"deleteContentBackward":selectionStart===selectionEnd&&(selStart-=1);break;case"deleteContentForward":selectionStart===selectionEnd&&(selEnd+=1);break}event.preventDefault(),(_this$linkService$eve8=this.linkService.eventBus)===null||_this$linkService$eve8===void 0||_this$linkService$eve8.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,change:data||"",willCommit:!1,selStart,selEnd}})}),this._setEventListeners(element,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],event=>event.target.value)}if(blurListener&&element.addEventListener("blur",blurListener),this.data.comb){const combWidth=(this.data.rect[2]-this.data.rect[0])/maxLen;element.classList.add("comb"),element.style.letterSpacing=`calc(${combWidth}px * var(--scale-factor) - 1ch)`}}else element=document.createElement("div"),element.textContent=this.data.fieldValue,element.style.verticalAlign="middle",element.style.display="table-cell";return this._setTextStyle(element),this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}};__name(_TextWidgetAnnotationElement,"TextWidgetAnnotationElement");let TextWidgetAnnotationElement=_TextWidgetAnnotationElement;const _CheckboxWidgetAnnotationElement=class extends WidgetAnnotationElement{static{__name2(this,"_CheckboxWidgetAnnotationElement")}constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){const storage=this.annotationStorage,data=this.data,id=data.id;let value=storage.getValue(id,{value:data.exportValue===data.fieldValue}).value;typeof value=="string"&&(value=value!=="Off",storage.setValue(id,{value})),this.container.className="buttonWidgetAnnotation checkBox";const element=document.createElement("input");return GetElementsByNameSet.add(element),element.setAttribute("data-element-id",id),element.disabled=data.readOnly,this._setRequired(element,this.data.required),element.type="checkbox",element.name=data.fieldName,value&&element.setAttribute("checked",!0),element.setAttribute("exportValue",data.exportValue),element.tabIndex=DEFAULT_TAB_INDEX,element.addEventListener("change",event=>{const{name,checked}=event.target;for(const checkbox of this._getElementsByName(name,id)){const curChecked=checked&&checkbox.exportValue===data.exportValue;checkbox.domElement&&(checkbox.domElement.checked=curChecked),storage.setValue(checkbox.id,{value:curChecked})}storage.setValue(id,{value:checked})}),element.addEventListener("resetform",event=>{const defaultValue=data.defaultFieldValue||"Off";event.target.checked=defaultValue===data.exportValue}),this.enableScripting&&this.hasJSActions&&(element.addEventListener("updatefromsandbox",jsEvent=>{const actions={value(event){event.target.checked=event.detail.value!=="Off",storage.setValue(id,{value:event.target.checked})}};this._dispatchEventFromSandbox(actions,jsEvent)}),this._setEventListeners(element,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],event=>event.target.checked)),this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}};__name(_CheckboxWidgetAnnotationElement,"CheckboxWidgetAnnotationElement");let CheckboxWidgetAnnotationElement=_CheckboxWidgetAnnotationElement;const _RadioButtonWidgetAnnotationElement=class extends WidgetAnnotationElement{static{__name2(this,"_RadioButtonWidgetAnnotationElement")}constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const storage=this.annotationStorage,data=this.data,id=data.id;let value=storage.getValue(id,{value:data.fieldValue===data.buttonValue}).value;typeof value=="string"&&(value=value!==data.buttonValue,storage.setValue(id,{value}));const element=document.createElement("input");if(GetElementsByNameSet.add(element),element.setAttribute("data-element-id",id),element.disabled=data.readOnly,this._setRequired(element,this.data.required),element.type="radio",element.name=data.fieldName,value&&element.setAttribute("checked",!0),element.tabIndex=DEFAULT_TAB_INDEX,element.addEventListener("change",event=>{const{name,checked}=event.target;for(const radio of this._getElementsByName(name,id))storage.setValue(radio.id,{value:!1});storage.setValue(id,{value:checked})}),element.addEventListener("resetform",event=>{const defaultValue=data.defaultFieldValue;event.target.checked=defaultValue!=null&&defaultValue===data.buttonValue}),this.enableScripting&&this.hasJSActions){const pdfButtonValue=data.buttonValue;element.addEventListener("updatefromsandbox",jsEvent=>{const actions={value:event=>{const checked=pdfButtonValue===event.detail.value;for(const radio of this._getElementsByName(event.target.name)){const curChecked=checked&&radio.id===id;radio.domElement&&(radio.domElement.checked=curChecked),storage.setValue(radio.id,{value:curChecked})}}};this._dispatchEventFromSandbox(actions,jsEvent)}),this._setEventListeners(element,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],event=>event.target.checked)}return this._setBackgroundColor(element),this._setDefaultPropertiesFromJS(element),this.container.append(element),this.container}};__name(_RadioButtonWidgetAnnotationElement,"RadioButtonWidgetAnnotationElement");let RadioButtonWidgetAnnotationElement=_RadioButtonWidgetAnnotationElement;const _PushButtonWidgetAnnotationElement=class extends LinkAnnotationElement{static{__name2(this,"_PushButtonWidgetAnnotationElement")}constructor(parameters){super(parameters,{ignoreBorder:parameters.data.hasAppearance})}render(){const container=super.render();container.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(container.title=this.data.alternativeText);const linkElement=container.lastChild;return this.enableScripting&&this.hasJSActions&&linkElement&&(this._setDefaultPropertiesFromJS(linkElement),linkElement.addEventListener("updatefromsandbox",jsEvent=>{this._dispatchEventFromSandbox({},jsEvent)})),container}};__name(_PushButtonWidgetAnnotationElement,"PushButtonWidgetAnnotationElement");let PushButtonWidgetAnnotationElement=_PushButtonWidgetAnnotationElement;const _ChoiceWidgetAnnotationElement=class extends WidgetAnnotationElement{static{__name2(this,"_ChoiceWidgetAnnotationElement")}constructor(parameters){super(parameters,{isRenderable:parameters.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const storage=this.annotationStorage,id=this.data.id,storedData=storage.getValue(id,{value:this.data.fieldValue}),selectElement=document.createElement("select");GetElementsByNameSet.add(selectElement),selectElement.setAttribute("data-element-id",id),selectElement.disabled=this.data.readOnly,this._setRequired(selectElement,this.data.required),selectElement.name=this.data.fieldName,selectElement.tabIndex=DEFAULT_TAB_INDEX;let addAnEmptyEntry=this.data.combo&&this.data.options.length>0;this.data.combo||(selectElement.size=this.data.options.length,this.data.multiSelect&&(selectElement.multiple=!0)),selectElement.addEventListener("resetform",event=>{const defaultValue=this.data.defaultFieldValue;for(const option of selectElement.options)option.selected=option.value===defaultValue});for(const option of this.data.options){const optionElement=document.createElement("option");optionElement.textContent=option.displayValue,optionElement.value=option.exportValue,storedData.value.includes(option.exportValue)&&(optionElement.setAttribute("selected",!0),addAnEmptyEntry=!1),selectElement.append(optionElement)}let removeEmptyEntry=null;if(addAnEmptyEntry){const noneOptionElement=document.createElement("option");noneOptionElement.value=" ",noneOptionElement.setAttribute("hidden",!0),noneOptionElement.setAttribute("selected",!0),selectElement.prepend(noneOptionElement),removeEmptyEntry=__name(()=>{noneOptionElement.remove(),selectElement.removeEventListener("input",removeEmptyEntry),removeEmptyEntry=null},"removeEmptyEntry"),selectElement.addEventListener("input",removeEmptyEntry)}const getValue=__name((event,isExport)=>{const name=isExport?"value":"textContent",options=event.target.options;return event.target.multiple?Array.prototype.filter.call(options,option=>option.selected).map(option=>option[name]):options.selectedIndex===-1?null:options[options.selectedIndex][name]},"getValue"),getItems=__name(event=>{const options=event.target.options;return Array.prototype.map.call(options,option=>({displayValue:option.textContent,exportValue:option.value}))},"getItems");return this.enableScripting&&this.hasJSActions?(selectElement.addEventListener("updatefromsandbox",jsEvent=>{const actions={value(event){var _removeEmptyEntry;(_removeEmptyEntry=removeEmptyEntry)===null||_removeEmptyEntry===void 0||_removeEmptyEntry();const value=event.detail.value,values=new Set(Array.isArray(value)?value:[value]);for(const option of selectElement.options)option.selected=values.has(option.value);storage.setValue(id,{value:getValue(event,!0)})},multipleSelection(event){selectElement.multiple=!0},remove(event){const options=selectElement.options,index=event.detail.remove;options[index].selected=!1,selectElement.remove(index),options.length>0&&Array.prototype.findIndex.call(options,option=>option.selected)===-1&&(options[0].selected=!0),storage.setValue(id,{value:getValue(event,!0),items:getItems(event)})},clear(event){for(;selectElement.length!==0;)selectElement.remove(0);storage.setValue(id,{value:null,items:[]})},insert(event){const{index,displayValue,exportValue}=event.detail.insert,selectChild=selectElement.children[index],optionElement=document.createElement("option");optionElement.textContent=displayValue,optionElement.value=exportValue,selectChild?selectChild.before(optionElement):selectElement.append(optionElement),storage.setValue(id,{value:getValue(event,!0),items:getItems(event)})},items(event){const{items}=event.detail;for(;selectElement.length!==0;)selectElement.remove(0);for(const item of items){const{displayValue,exportValue}=item,optionElement=document.createElement("option");optionElement.textContent=displayValue,optionElement.value=exportValue,selectElement.append(optionElement)}selectElement.options.length>0&&(selectElement.options[0].selected=!0),storage.setValue(id,{value:getValue(event,!0),items:getItems(event)})},indices(event){const indices=new Set(event.detail.indices);for(const option of event.target.options)option.selected=indices.has(option.index);storage.setValue(id,{value:getValue(event,!0)})},editable(event){event.target.disabled=!event.detail.editable}};this._dispatchEventFromSandbox(actions,jsEvent)}),selectElement.addEventListener("input",event=>{var _this$linkService$eve9;const exportValue=getValue(event,!0),value=getValue(event,!1);storage.setValue(id,{value:exportValue}),(_this$linkService$eve9=this.linkService.eventBus)===null||_this$linkService$eve9===void 0||_this$linkService$eve9.dispatch("dispatcheventinsandbox",{source:this,detail:{id,name:"Keystroke",value,changeEx:exportValue,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(selectElement,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],event=>event.target.checked)):selectElement.addEventListener("input",function(event){storage.setValue(id,{value:getValue(event,!0)})}),this.data.combo&&this._setTextStyle(selectElement),this._setBackgroundColor(selectElement),this._setDefaultPropertiesFromJS(selectElement),this.container.append(selectElement),this.container}};__name(_ChoiceWidgetAnnotationElement,"ChoiceWidgetAnnotationElement");let ChoiceWidgetAnnotationElement=_ChoiceWidgetAnnotationElement;const _PopupAnnotationElement=class extends AnnotationElement{static{__name2(this,"_PopupAnnotationElement")}constructor(parameters){var _parameters$data$titl2,_parameters$data$cont2,_parameters$data$rich2;const isRenderable=!!((_parameters$data$titl2=parameters.data.titleObj)!==null&&_parameters$data$titl2!==void 0&&_parameters$data$titl2.str||(_parameters$data$cont2=parameters.data.contentsObj)!==null&&_parameters$data$cont2!==void 0&&_parameters$data$cont2.str||(_parameters$data$rich2=parameters.data.richText)!==null&&_parameters$data$rich2!==void 0&&_parameters$data$rich2.str);super(parameters,{isRenderable})}render(){const IGNORE_TYPES=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",IGNORE_TYPES.includes(this.data.parentType))return this.container;const selector=`[data-annotation-id="${this.data.parentId}"]`,parentElements=this.layer.querySelectorAll(selector);if(parentElements.length===0)return this.container;const popup=new PopupElement({container:this.container,trigger:Array.from(parentElements),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),page=this.page,rect=_util2.Util.normalizeRect([this.data.parentRect[0],page.view[3]-this.data.parentRect[1]+page.view[1],this.data.parentRect[2],page.view[3]-this.data.parentRect[3]+page.view[1]]),popupLeft=rect[0]+this.data.parentRect[2]-this.data.parentRect[0],popupTop=rect[1],[pageLLx,pageLLy,pageURx,pageURy]=this.viewport.viewBox,pageWidth=pageURx-pageLLx,pageHeight=pageURy-pageLLy;return this.container.style.left=`${100*(popupLeft-pageLLx)/pageWidth}%`,this.container.style.top=`${100*(popupTop-pageLLy)/pageHeight}%`,this.container.append(popup.render()),this.container}};__name(_PopupAnnotationElement,"PopupAnnotationElement");let PopupAnnotationElement=_PopupAnnotationElement;const _PopupElement=class{static{__name2(this,"_PopupElement")}constructor(parameters){this.container=parameters.container,this.trigger=parameters.trigger,this.color=parameters.color,this.titleObj=parameters.titleObj,this.modificationDate=parameters.modificationDate,this.contentsObj=parameters.contentsObj,this.richText=parameters.richText,this.hideWrapper=parameters.hideWrapper||!1,this.pinned=!1}render(){var _this$richText,_this$contentsObj;const wrapper=document.createElement("div");wrapper.className="popupWrapper",this.hideElement=this.hideWrapper?wrapper:this.container,this.hideElement.hidden=!0;const popup=document.createElement("div");popup.className="popup";const color=this.color;if(color){const r=.7*(255-color[0])+color[0],g=.7*(255-color[1])+color[1],b=.7*(255-color[2])+color[2];popup.style.backgroundColor=_util2.Util.makeHexColor(r|0,g|0,b|0)}const title=document.createElement("h1");title.dir=this.titleObj.dir,title.textContent=this.titleObj.str,popup.append(title);const dateObject=_display_utils2.PDFDateString.toDateObject(this.modificationDate);if(dateObject){const modificationDate=document.createElement("span");modificationDate.className="popupDate",modificationDate.textContent="{{date}}, {{time}}",modificationDate.dataset.l10nId="annotation_date_string",modificationDate.dataset.l10nArgs=JSON.stringify({date:dateObject.toLocaleDateString(),time:dateObject.toLocaleTimeString()}),popup.append(modificationDate)}if((_this$richText=this.richText)!==null&&_this$richText!==void 0&&_this$richText.str&&(!((_this$contentsObj=this.contentsObj)!==null&&_this$contentsObj!==void 0&&_this$contentsObj.str)||this.contentsObj.str===this.richText.str))_xfa_layer.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:popup}),popup.lastChild.className="richText popupContent";else{const contents=this._formatContents(this.contentsObj);popup.append(contents)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const element of this.trigger)element.addEventListener("click",this._toggle.bind(this)),element.addEventListener("mouseover",this._show.bind(this,!1)),element.addEventListener("mouseout",this._hide.bind(this,!1));return popup.addEventListener("click",this._hide.bind(this,!0)),wrapper.append(popup),wrapper}_formatContents(_ref){let{str,dir}=_ref;const p=document.createElement("p");p.className="popupContent",p.dir=dir;const lines=str.split(/(?:\r\n?|\n)/);for(let i=0,ii=lines.length;i<ii;++i){const line=lines[i];p.append(document.createTextNode(line)),i<ii-1&&p.append(document.createElement("br"))}return p}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}};__name(_PopupElement,"PopupElement");let PopupElement=_PopupElement;const _FreeTextAnnotationElement=class extends AnnotationElement{static{__name2(this,"_FreeTextAnnotationElement")}constructor(parameters){var _parameters$data$titl3,_parameters$data$cont3,_parameters$data$rich3;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl3=parameters.data.titleObj)!==null&&_parameters$data$titl3!==void 0&&_parameters$data$titl3.str||(_parameters$data$cont3=parameters.data.contentsObj)!==null&&_parameters$data$cont3!==void 0&&_parameters$data$cont3.str||(_parameters$data$rich3=parameters.data.richText)!==null&&_parameters$data$rich3!==void 0&&_parameters$data$rich3.str);super(parameters,{isRenderable,ignoreBorder:!0}),this.textContent=parameters.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const content=document.createElement("div");content.className="annotationTextContent",content.setAttribute("role","comment");for(const line of this.textContent){const lineSpan=document.createElement("span");lineSpan.textContent=line,content.append(lineSpan)}this.container.append(content)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}};__name(_FreeTextAnnotationElement,"FreeTextAnnotationElement");let FreeTextAnnotationElement=_FreeTextAnnotationElement;const _LineAnnotationElement=class extends AnnotationElement{static{__name2(this,"_LineAnnotationElement")}constructor(parameters){var _parameters$data$titl4,_parameters$data$cont4,_parameters$data$rich4;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl4=parameters.data.titleObj)!==null&&_parameters$data$titl4!==void 0&&_parameters$data$titl4.str||(_parameters$data$cont4=parameters.data.contentsObj)!==null&&_parameters$data$cont4!==void 0&&_parameters$data$cont4.str||(_parameters$data$rich4=parameters.data.richText)!==null&&_parameters$data$rich4!==void 0&&_parameters$data$rich4.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),line=this.svgFactory.createElement("svg:line");return line.setAttribute("x1",data.rect[2]-data.lineCoordinates[0]),line.setAttribute("y1",data.rect[3]-data.lineCoordinates[1]),line.setAttribute("x2",data.rect[2]-data.lineCoordinates[2]),line.setAttribute("y2",data.rect[3]-data.lineCoordinates[3]),line.setAttribute("stroke-width",data.borderStyle.width||1),line.setAttribute("stroke","transparent"),line.setAttribute("fill","transparent"),svg.append(line),this.container.append(svg),this._createPopup(line,data),this.container}};__name(_LineAnnotationElement,"LineAnnotationElement");let LineAnnotationElement=_LineAnnotationElement;const _SquareAnnotationElement=class extends AnnotationElement{static{__name2(this,"_SquareAnnotationElement")}constructor(parameters){var _parameters$data$titl5,_parameters$data$cont5,_parameters$data$rich5;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl5=parameters.data.titleObj)!==null&&_parameters$data$titl5!==void 0&&_parameters$data$titl5.str||(_parameters$data$cont5=parameters.data.contentsObj)!==null&&_parameters$data$cont5!==void 0&&_parameters$data$cont5.str||(_parameters$data$rich5=parameters.data.richText)!==null&&_parameters$data$rich5!==void 0&&_parameters$data$rich5.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),borderWidth=data.borderStyle.width,square=this.svgFactory.createElement("svg:rect");return square.setAttribute("x",borderWidth/2),square.setAttribute("y",borderWidth/2),square.setAttribute("width",width-borderWidth),square.setAttribute("height",height-borderWidth),square.setAttribute("stroke-width",borderWidth||1),square.setAttribute("stroke","transparent"),square.setAttribute("fill","transparent"),svg.append(square),this.container.append(svg),this._createPopup(square,data),this.container}};__name(_SquareAnnotationElement,"SquareAnnotationElement");let SquareAnnotationElement=_SquareAnnotationElement;const _CircleAnnotationElement=class extends AnnotationElement{static{__name2(this,"_CircleAnnotationElement")}constructor(parameters){var _parameters$data$titl6,_parameters$data$cont6,_parameters$data$rich6;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl6=parameters.data.titleObj)!==null&&_parameters$data$titl6!==void 0&&_parameters$data$titl6.str||(_parameters$data$cont6=parameters.data.contentsObj)!==null&&_parameters$data$cont6!==void 0&&_parameters$data$cont6.str||(_parameters$data$rich6=parameters.data.richText)!==null&&_parameters$data$rich6!==void 0&&_parameters$data$rich6.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0),borderWidth=data.borderStyle.width,circle=this.svgFactory.createElement("svg:ellipse");return circle.setAttribute("cx",width/2),circle.setAttribute("cy",height/2),circle.setAttribute("rx",width/2-borderWidth/2),circle.setAttribute("ry",height/2-borderWidth/2),circle.setAttribute("stroke-width",borderWidth||1),circle.setAttribute("stroke","transparent"),circle.setAttribute("fill","transparent"),svg.append(circle),this.container.append(svg),this._createPopup(circle,data),this.container}};__name(_CircleAnnotationElement,"CircleAnnotationElement");let CircleAnnotationElement=_CircleAnnotationElement;const _PolylineAnnotationElement=class extends AnnotationElement{static{__name2(this,"_PolylineAnnotationElement")}constructor(parameters){var _parameters$data$titl7,_parameters$data$cont7,_parameters$data$rich7;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl7=parameters.data.titleObj)!==null&&_parameters$data$titl7!==void 0&&_parameters$data$titl7.str||(_parameters$data$cont7=parameters.data.contentsObj)!==null&&_parameters$data$cont7!==void 0&&_parameters$data$cont7.str||(_parameters$data$rich7=parameters.data.richText)!==null&&_parameters$data$rich7!==void 0&&_parameters$data$rich7.str);super(parameters,{isRenderable,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0);let points=[];for(const coordinate of data.vertices){const x=coordinate.x-data.rect[0],y=data.rect[3]-coordinate.y;points.push(x+","+y)}points=points.join(" ");const polyline=this.svgFactory.createElement(this.svgElementName);return polyline.setAttribute("points",points),polyline.setAttribute("stroke-width",data.borderStyle.width||1),polyline.setAttribute("stroke","transparent"),polyline.setAttribute("fill","transparent"),svg.append(polyline),this.container.append(svg),this._createPopup(polyline,data),this.container}};__name(_PolylineAnnotationElement,"PolylineAnnotationElement");let PolylineAnnotationElement=_PolylineAnnotationElement;const _PolygonAnnotationElement=class extends PolylineAnnotationElement{static{__name2(this,"_PolygonAnnotationElement")}constructor(parameters){super(parameters),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}};__name(_PolygonAnnotationElement,"PolygonAnnotationElement");let PolygonAnnotationElement=_PolygonAnnotationElement;const _CaretAnnotationElement=class extends AnnotationElement{static{__name2(this,"_CaretAnnotationElement")}constructor(parameters){var _parameters$data$titl8,_parameters$data$cont8,_parameters$data$rich8;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl8=parameters.data.titleObj)!==null&&_parameters$data$titl8!==void 0&&_parameters$data$titl8.str||(_parameters$data$cont8=parameters.data.contentsObj)!==null&&_parameters$data$cont8!==void 0&&_parameters$data$cont8.str||(_parameters$data$rich8=parameters.data.richText)!==null&&_parameters$data$rich8!==void 0&&_parameters$data$rich8.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}};__name(_CaretAnnotationElement,"CaretAnnotationElement");let CaretAnnotationElement=_CaretAnnotationElement;const _InkAnnotationElement=class extends AnnotationElement{static{__name2(this,"_InkAnnotationElement")}constructor(parameters){var _parameters$data$titl9,_parameters$data$cont9,_parameters$data$rich9;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl9=parameters.data.titleObj)!==null&&_parameters$data$titl9!==void 0&&_parameters$data$titl9.str||(_parameters$data$cont9=parameters.data.contentsObj)!==null&&_parameters$data$cont9!==void 0&&_parameters$data$cont9.str||(_parameters$data$rich9=parameters.data.richText)!==null&&_parameters$data$rich9!==void 0&&_parameters$data$rich9.str);super(parameters,{isRenderable,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const data=this.data,{width,height}=getRectDims(data.rect),svg=this.svgFactory.create(width,height,!0);for(const inkList of data.inkLists){let points=[];for(const coordinate of inkList){const x=coordinate.x-data.rect[0],y=data.rect[3]-coordinate.y;points.push(`${x},${y}`)}points=points.join(" ");const polyline=this.svgFactory.createElement(this.svgElementName);polyline.setAttribute("points",points),polyline.setAttribute("stroke-width",data.borderStyle.width||1),polyline.setAttribute("stroke","transparent"),polyline.setAttribute("fill","transparent"),this._createPopup(polyline,data),svg.append(polyline)}return this.container.append(svg),this.container}};__name(_InkAnnotationElement,"InkAnnotationElement");let InkAnnotationElement=_InkAnnotationElement;const _HighlightAnnotationElement=class extends AnnotationElement{static{__name2(this,"_HighlightAnnotationElement")}constructor(parameters){var _parameters$data$titl10,_parameters$data$cont10,_parameters$data$rich10;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl10=parameters.data.titleObj)!==null&&_parameters$data$titl10!==void 0&&_parameters$data$titl10.str||(_parameters$data$cont10=parameters.data.contentsObj)!==null&&_parameters$data$cont10!==void 0&&_parameters$data$cont10.str||(_parameters$data$rich10=parameters.data.richText)!==null&&_parameters$data$rich10!==void 0&&_parameters$data$rich10.str);super(parameters,{isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}};__name(_HighlightAnnotationElement,"HighlightAnnotationElement");let HighlightAnnotationElement=_HighlightAnnotationElement;const _UnderlineAnnotationElement=class extends AnnotationElement{static{__name2(this,"_UnderlineAnnotationElement")}constructor(parameters){var _parameters$data$titl11,_parameters$data$cont11,_parameters$data$rich11;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl11=parameters.data.titleObj)!==null&&_parameters$data$titl11!==void 0&&_parameters$data$titl11.str||(_parameters$data$cont11=parameters.data.contentsObj)!==null&&_parameters$data$cont11!==void 0&&_parameters$data$cont11.str||(_parameters$data$rich11=parameters.data.richText)!==null&&_parameters$data$rich11!==void 0&&_parameters$data$rich11.str);super(parameters,{isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}};__name(_UnderlineAnnotationElement,"UnderlineAnnotationElement");let UnderlineAnnotationElement=_UnderlineAnnotationElement;const _SquigglyAnnotationElement=class extends AnnotationElement{static{__name2(this,"_SquigglyAnnotationElement")}constructor(parameters){var _parameters$data$titl12,_parameters$data$cont12,_parameters$data$rich12;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl12=parameters.data.titleObj)!==null&&_parameters$data$titl12!==void 0&&_parameters$data$titl12.str||(_parameters$data$cont12=parameters.data.contentsObj)!==null&&_parameters$data$cont12!==void 0&&_parameters$data$cont12.str||(_parameters$data$rich12=parameters.data.richText)!==null&&_parameters$data$rich12!==void 0&&_parameters$data$rich12.str);super(parameters,{isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}};__name(_SquigglyAnnotationElement,"SquigglyAnnotationElement");let SquigglyAnnotationElement=_SquigglyAnnotationElement;const _StrikeOutAnnotationElement=class extends AnnotationElement{static{__name2(this,"_StrikeOutAnnotationElement")}constructor(parameters){var _parameters$data$titl13,_parameters$data$cont13,_parameters$data$rich13;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl13=parameters.data.titleObj)!==null&&_parameters$data$titl13!==void 0&&_parameters$data$titl13.str||(_parameters$data$cont13=parameters.data.contentsObj)!==null&&_parameters$data$cont13!==void 0&&_parameters$data$cont13.str||(_parameters$data$rich13=parameters.data.richText)!==null&&_parameters$data$rich13!==void 0&&_parameters$data$rich13.str);super(parameters,{isRenderable,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}};__name(_StrikeOutAnnotationElement,"StrikeOutAnnotationElement");let StrikeOutAnnotationElement=_StrikeOutAnnotationElement;const _StampAnnotationElement=class extends AnnotationElement{static{__name2(this,"_StampAnnotationElement")}constructor(parameters){var _parameters$data$titl14,_parameters$data$cont14,_parameters$data$rich14;const isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl14=parameters.data.titleObj)!==null&&_parameters$data$titl14!==void 0&&_parameters$data$titl14.str||(_parameters$data$cont14=parameters.data.contentsObj)!==null&&_parameters$data$cont14!==void 0&&_parameters$data$cont14.str||(_parameters$data$rich14=parameters.data.richText)!==null&&_parameters$data$rich14!==void 0&&_parameters$data$rich14.str);super(parameters,{isRenderable,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}};__name(_StampAnnotationElement,"StampAnnotationElement");let StampAnnotationElement=_StampAnnotationElement;const _FileAttachmentAnnotationElement=class extends AnnotationElement{static{__name2(this,"_FileAttachmentAnnotationElement")}constructor(parameters){var _this$linkService$eve10;super(parameters,{isRenderable:!0});const{filename,content}=this.data.file;this.filename=(0,_display_utils2.getFilenameFromUrl)(filename),this.content=content,(_this$linkService$eve10=this.linkService.eventBus)===null||_this$linkService$eve10===void 0||_this$linkService$eve10.dispatch("fileattachmentannotation",{source:this,filename,content})}render(){var _this$data$titleObj,_this$data$contentsOb;this.container.className="fileAttachmentAnnotation";const trigger=document.createElement("div");return trigger.className="popupTriggerArea",trigger.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((_this$data$titleObj=this.data.titleObj)!==null&&_this$data$titleObj!==void 0&&_this$data$titleObj.str||(_this$data$contentsOb=this.data.contentsObj)!==null&&_this$data$contentsOb!==void 0&&_this$data$contentsOb.str||this.data.richText)&&this._createPopup(trigger,this.data),this.container.append(trigger),this.container}_download(){var _this$downloadManager;(_this$downloadManager=this.downloadManager)===null||_this$downloadManager===void 0||_this$downloadManager.openOrDownloadData(this.container,this.content,this.filename)}};__name(_FileAttachmentAnnotationElement,"FileAttachmentAnnotationElement");let FileAttachmentAnnotationElement=_FileAttachmentAnnotationElement;const _AnnotationLayer=class _AnnotationLayer2{static{__name2(this,"_AnnotationLayer")}static render(parameters){const{annotations,div,viewport,accessibilityManager}=parameters;_classStaticPrivateMethodGet(this,_AnnotationLayer2,_setDimensions).call(this,div,viewport);let zIndex=0;for(const data of annotations){if(data.annotationType!==_util2.AnnotationType.POPUP){const{width,height}=getRectDims(data.rect);if(width<=0||height<=0)continue}const element=AnnotationElementFactory.create({data,layer:div,page:parameters.page,viewport,linkService:parameters.linkService,downloadManager:parameters.downloadManager,imageResourcesPath:parameters.imageResourcesPath||"",renderForms:parameters.renderForms!==!1,svgFactory:new _display_utils2.DOMSVGFactory,annotationStorage:parameters.annotationStorage||new _annotation_storage2.AnnotationStorage,enableScripting:parameters.enableScripting,hasJSActions:parameters.hasJSActions,fieldObjects:parameters.fieldObjects,mouseState:parameters.mouseState||{isDown:!1}});if(element.isRenderable){const rendered=element.render();if(data.hidden&&(rendered.style.visibility="hidden"),Array.isArray(rendered))for(const renderedElement of rendered)renderedElement.style.zIndex=zIndex++,_classStaticPrivateMethodGet(_AnnotationLayer2,_AnnotationLayer2,_appendElement).call(_AnnotationLayer2,renderedElement,data.id,div,accessibilityManager);else rendered.style.zIndex=zIndex++,element instanceof PopupAnnotationElement?div.prepend(rendered):_classStaticPrivateMethodGet(_AnnotationLayer2,_AnnotationLayer2,_appendElement).call(_AnnotationLayer2,rendered,data.id,div,accessibilityManager)}}_classStaticPrivateMethodGet(this,_AnnotationLayer2,_setAnnotationCanvasMap).call(this,div,parameters.annotationCanvasMap)}static update(parameters){const{annotationCanvasMap,div,viewport}=parameters;_classStaticPrivateMethodGet(this,_AnnotationLayer2,_setDimensions).call(this,div,viewport),_classStaticPrivateMethodGet(this,_AnnotationLayer2,_setAnnotationCanvasMap).call(this,div,annotationCanvasMap),div.hidden=!1}};__name(_AnnotationLayer,"AnnotationLayer");let AnnotationLayer=_AnnotationLayer;exports2.AnnotationLayer=AnnotationLayer;function _appendElement(element,id,div,accessibilityManager){const contentElement=element.firstChild||element;contentElement.id=`${_display_utils2.AnnotationPrefix}${id}`,div.append(element),accessibilityManager?.moveElementInDOM(div,element,contentElement,!1)}__name2(_appendElement,"_appendElement"),__name(_appendElement,"_appendElement");function _setDimensions(div,_ref2){let{width,height,rotation}=_ref2;const{style}=div,flipOrientation=rotation%180!==0,widthStr=Math.floor(width)+"px",heightStr=Math.floor(height)+"px";style.width=flipOrientation?heightStr:widthStr,style.height=flipOrientation?widthStr:heightStr,div.setAttribute("data-main-rotation",rotation)}__name2(_setDimensions,"_setDimensions"),__name(_setDimensions,"_setDimensions");function _setAnnotationCanvasMap(div,annotationCanvasMap){if(annotationCanvasMap){for(const[id,canvas]of annotationCanvasMap){const element=div.querySelector(`[data-annotation-id="${id}"]`);if(!element)continue;const{firstChild}=element;firstChild?firstChild.nodeName==="CANVAS"?firstChild.replaceWith(canvas):firstChild.before(canvas):element.append(canvas)}annotationCanvasMap.clear()}}__name2(_setAnnotationCanvasMap,"_setAnnotationCanvasMap"),__name(_setAnnotationCanvasMap,"_setAnnotationCanvasMap")},(__unused_webpack_module2,exports2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.ColorConverters=void 0;function makeColorComp(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}__name2(makeColorComp,"makeColorComp"),__name(makeColorComp,"makeColorComp");const _ColorConverters=class{static{__name2(this,"_ColorConverters")}static CMYK_G(_ref){let[c,y,m,k]=_ref;return["G",1-Math.min(1,.3*c+.59*m+.11*y+k)]}static G_CMYK(_ref2){let[g]=_ref2;return["CMYK",0,0,0,1-g]}static G_RGB(_ref3){let[g]=_ref3;return["RGB",g,g,g]}static G_HTML(_ref4){let[g]=_ref4;const G=makeColorComp(g);return`#${G}${G}${G}`}static RGB_G(_ref5){let[r,g,b]=_ref5;return["G",.3*r+.59*g+.11*b]}static RGB_HTML(_ref6){let[r,g,b]=_ref6;const R=makeColorComp(r),G=makeColorComp(g),B=makeColorComp(b);return`#${R}${G}${B}`}static T_HTML(){return"#00000000"}static CMYK_RGB(_ref7){let[c,y,m,k]=_ref7;return["RGB",1-Math.min(1,c+k),1-Math.min(1,m+k),1-Math.min(1,y+k)]}static CMYK_HTML(components){const rgb=this.CMYK_RGB(components).slice(1);return this.RGB_HTML(rgb)}static RGB_CMYK(_ref8){let[r,g,b]=_ref8;const c=1-r,m=1-g,y=1-b,k=Math.min(c,m,y);return["CMYK",c,m,y,k]}};__name(_ColorConverters,"ColorConverters");let ColorConverters=_ColorConverters;exports2.ColorConverters=ColorConverters},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.XfaLayer=void 0;var _xfa_text2=__w_pdfjs_require__2(145);const _XfaLayer=class{static{__name2(this,"_XfaLayer")}static setupStorage(html,id,element,storage,intent){const storedData=storage.getValue(id,{value:null});switch(element.name){case"textarea":if(storedData.value!==null&&(html.textContent=storedData.value),intent==="print")break;html.addEventListener("input",event=>{storage.setValue(id,{value:event.target.value})});break;case"input":if(element.attributes.type==="radio"||element.attributes.type==="checkbox"){if(storedData.value===element.attributes.xfaOn?html.setAttribute("checked",!0):storedData.value===element.attributes.xfaOff&&html.removeAttribute("checked"),intent==="print")break;html.addEventListener("change",event=>{storage.setValue(id,{value:event.target.checked?event.target.getAttribute("xfaOn"):event.target.getAttribute("xfaOff")})})}else{if(storedData.value!==null&&html.setAttribute("value",storedData.value),intent==="print")break;html.addEventListener("input",event=>{storage.setValue(id,{value:event.target.value})})}break;case"select":if(storedData.value!==null)for(const option of element.children)option.attributes.value===storedData.value&&(option.attributes.selected=!0);html.addEventListener("input",event=>{const options=event.target.options,value=options.selectedIndex===-1?"":options[options.selectedIndex].value;storage.setValue(id,{value})});break}}static setAttributes(_ref){let{html,element,storage=null,intent,linkService}=_ref;const{attributes}=element,isHTMLAnchorElement=html instanceof HTMLAnchorElement;attributes.type==="radio"&&(attributes.name=`${attributes.name}-${intent}`);for(const[key,value]of Object.entries(attributes))if(value!=null)switch(key){case"class":value.length&&html.setAttribute(key,value.join(" "));break;case"dataId":break;case"id":html.setAttribute("data-element-id",value);break;case"style":Object.assign(html.style,value);break;case"textContent":html.textContent=value;break;default:(!isHTMLAnchorElement||key!=="href"&&key!=="newWindow")&&html.setAttribute(key,value)}isHTMLAnchorElement&&linkService.addLinkAttributes(html,attributes.href,attributes.newWindow),storage&&attributes.dataId&&this.setupStorage(html,attributes.dataId,element,storage)}static render(parameters){const storage=parameters.annotationStorage,linkService=parameters.linkService,root=parameters.xfaHtml,intent=parameters.intent||"display",rootHtml=document.createElement(root.name);root.attributes&&this.setAttributes({html:rootHtml,element:root,intent,linkService});const stack=[[root,-1,rootHtml]],rootDiv=parameters.div;if(rootDiv.append(rootHtml),parameters.viewport){const transform=`matrix(${parameters.viewport.transform.join(",")})`;rootDiv.style.transform=transform}intent!=="richText"&&rootDiv.setAttribute("class","xfaLayer xfaFont");const textDivs=[];for(;stack.length>0;){var _child$attributes;const[parent,i,html]=stack.at(-1);if(i+1===parent.children.length){stack.pop();continue}const child=parent.children[++stack.at(-1)[1]];if(child===null)continue;const{name}=child;if(name==="#text"){const node=document.createTextNode(child.value);textDivs.push(node),html.append(node);continue}let childHtml;if(child!=null&&(_child$attributes=child.attributes)!==null&&_child$attributes!==void 0&&_child$attributes.xmlns?childHtml=document.createElementNS(child.attributes.xmlns,name):childHtml=document.createElement(name),html.append(childHtml),child.attributes&&this.setAttributes({html:childHtml,element:child,storage,intent,linkService}),child.children&&child.children.length>0)stack.push([child,-1,childHtml]);else if(child.value){const node=document.createTextNode(child.value);_xfa_text2.XfaText.shouldBuildText(name)&&textDivs.push(node),childHtml.append(node)}}for(const el of rootDiv.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))el.setAttribute("readOnly",!0);return{textDivs}}static update(parameters){const transform=`matrix(${parameters.viewport.transform.join(",")})`;parameters.div.style.transform=transform,parameters.div.hidden=!1}};__name(_XfaLayer,"XfaLayer");let XfaLayer=_XfaLayer;exports2.XfaLayer=XfaLayer},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.TextLayerRenderTask=void 0,exports2.renderTextLayer=renderTextLayer;var _util2=__w_pdfjs_require__2(1),_display_utils2=__w_pdfjs_require__2(133);const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30,DEFAULT_FONT_ASCENT=.8,ascentCache=new Map,AllWhitespaceRegexp=/^\s+$/g;function getAscent(fontFamily,ctx){const cachedAscent=ascentCache.get(fontFamily);if(cachedAscent)return cachedAscent;ctx.save(),ctx.font=`${DEFAULT_FONT_SIZE}px ${fontFamily}`;const metrics=ctx.measureText("");let ascent=metrics.fontBoundingBoxAscent,descent=Math.abs(metrics.fontBoundingBoxDescent);if(ascent){ctx.restore();const ratio=ascent/(ascent+descent);return ascentCache.set(fontFamily,ratio),ratio}ctx.strokeStyle="red",ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),ctx.strokeText("g",0,0);let pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;descent=0;for(let i=pixels.length-1-3;i>=0;i-=4)if(pixels[i]>0){descent=Math.ceil(i/4/DEFAULT_FONT_SIZE);break}ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),ctx.strokeText("A",0,DEFAULT_FONT_SIZE),pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data,ascent=0;for(let i=0,ii=pixels.length;i<ii;i+=4)if(pixels[i]>0){ascent=DEFAULT_FONT_SIZE-Math.floor(i/4/DEFAULT_FONT_SIZE);break}if(ctx.restore(),ascent){const ratio=ascent/(ascent+descent);return ascentCache.set(fontFamily,ratio),ratio}return ascentCache.set(fontFamily,DEFAULT_FONT_ASCENT),DEFAULT_FONT_ASCENT}__name2(getAscent,"getAscent"),__name(getAscent,"getAscent");function appendText(task,geom,styles,ctx){const textDiv=document.createElement("span"),textDivProperties=task._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:geom.str!=="",hasEOL:geom.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:geom.str!=="",hasEOL:geom.hasEOL,fontSize:0};task._textDivs.push(textDiv);const tx=_util2.Util.transform(task._viewport.transform,geom.transform);let angle=Math.atan2(tx[1],tx[0]);const style=styles[geom.fontName];style.vertical&&(angle+=Math.PI/2);const fontHeight=Math.hypot(tx[2],tx[3]),fontAscent=fontHeight*getAscent(style.fontFamily,ctx);let left,top;angle===0?(left=tx[4],top=tx[5]-fontAscent):(left=tx[4]+fontAscent*Math.sin(angle),top=tx[5]-fontAscent*Math.cos(angle)),textDiv.style.left=`${left}px`,textDiv.style.top=`${top}px`,textDiv.style.fontSize=`${fontHeight}px`,textDiv.style.fontFamily=style.fontFamily,textDivProperties.fontSize=fontHeight,textDiv.setAttribute("role","presentation"),textDiv.textContent=geom.str,textDiv.dir=geom.dir,task._fontInspectorEnabled&&(textDiv.dataset.fontName=geom.fontName),angle!==0&&(textDivProperties.angle=angle*(180/Math.PI));let shouldScaleText=!1;if(geom.str.length>1||task._enhanceTextSelection&&AllWhitespaceRegexp.test(geom.str))shouldScaleText=!0;else if(geom.str!==" "&&geom.transform[0]!==geom.transform[3]){const absScaleX=Math.abs(geom.transform[0]),absScaleY=Math.abs(geom.transform[3]);absScaleX!==absScaleY&&Math.max(absScaleX,absScaleY)/Math.min(absScaleX,absScaleY)>1.5&&(shouldScaleText=!0)}if(shouldScaleText&&(style.vertical?textDivProperties.canvasWidth=geom.height*task._viewport.scale:textDivProperties.canvasWidth=geom.width*task._viewport.scale),task._textDivProperties.set(textDiv,textDivProperties),task._textContentStream&&task._layoutText(textDiv),task._enhanceTextSelection&&textDivProperties.hasText){let angleCos=1,angleSin=0;angle!==0&&(angleCos=Math.cos(angle),angleSin=Math.sin(angle));const divWidth=(style.vertical?geom.height:geom.width)*task._viewport.scale,divHeight=fontHeight;let m,b;angle!==0?(m=[angleCos,angleSin,-angleSin,angleCos,left,top],b=_util2.Util.getAxialAlignedBoundingBox([0,0,divWidth,divHeight],m)):b=[left,top,left+divWidth,top+divHeight],task._bounds.push({left:b[0],top:b[1],right:b[2],bottom:b[3],div:textDiv,size:[divWidth,divHeight],m})}}__name2(appendText,"appendText"),__name(appendText,"appendText");function render(task){if(task._canceled)return;const textDivs=task._textDivs,capability=task._capability,textDivsLength=textDivs.length;if(textDivsLength>MAX_TEXT_DIVS_TO_RENDER){task._renderingDone=!0,capability.resolve();return}if(!task._textContentStream)for(let i=0;i<textDivsLength;i++)task._layoutText(textDivs[i]);task._renderingDone=!0,capability.resolve()}__name2(render,"render"),__name(render,"render");function findPositiveMin(ts,offset,count){let result=0;for(let i=0;i<count;i++){const t=ts[offset++];t>0&&(result=result?Math.min(t,result):t)}return result}__name2(findPositiveMin,"findPositiveMin"),__name(findPositiveMin,"findPositiveMin");function expand(task){const bounds=task._bounds,viewport=task._viewport,expanded=expandBounds(viewport.width,viewport.height,bounds);for(let i=0;i<expanded.length;i++){const div=bounds[i].div,divProperties=task._textDivProperties.get(div);if(divProperties.angle===0){divProperties.paddingLeft=bounds[i].left-expanded[i].left,divProperties.paddingTop=bounds[i].top-expanded[i].top,divProperties.paddingRight=expanded[i].right-bounds[i].right,divProperties.paddingBottom=expanded[i].bottom-bounds[i].bottom,task._textDivProperties.set(div,divProperties);continue}const e=expanded[i],b=bounds[i],m=b.m,c=m[0],s=m[1],points=[[0,0],[0,b.size[1]],[b.size[0],0],b.size],ts=new Float64Array(64);for(let j=0,jj=points.length;j<jj;j++){const t=_util2.Util.applyTransform(points[j],m);ts[j+0]=c&&(e.left-t[0])/c,ts[j+4]=s&&(e.top-t[1])/s,ts[j+8]=c&&(e.right-t[0])/c,ts[j+12]=s&&(e.bottom-t[1])/s,ts[j+16]=s&&(e.left-t[0])/-s,ts[j+20]=c&&(e.top-t[1])/c,ts[j+24]=s&&(e.right-t[0])/-s,ts[j+28]=c&&(e.bottom-t[1])/c,ts[j+32]=c&&(e.left-t[0])/-c,ts[j+36]=s&&(e.top-t[1])/-s,ts[j+40]=c&&(e.right-t[0])/-c,ts[j+44]=s&&(e.bottom-t[1])/-s,ts[j+48]=s&&(e.left-t[0])/s,ts[j+52]=c&&(e.top-t[1])/-c,ts[j+56]=s&&(e.right-t[0])/s,ts[j+60]=c&&(e.bottom-t[1])/-c}const boxScale=1+Math.min(Math.abs(c),Math.abs(s));divProperties.paddingLeft=findPositiveMin(ts,32,16)/boxScale,divProperties.paddingTop=findPositiveMin(ts,48,16)/boxScale,divProperties.paddingRight=findPositiveMin(ts,0,16)/boxScale,divProperties.paddingBottom=findPositiveMin(ts,16,16)/boxScale,task._textDivProperties.set(div,divProperties)}}__name2(expand,"expand"),__name(expand,"expand");function expandBounds(width,height,boxes){const bounds=boxes.map(function(box,i){return{x1:box.left,y1:box.top,x2:box.right,y2:box.bottom,index:i,x1New:void 0,x2New:void 0}});expandBoundsLTR(width,bounds);const expanded=new Array(boxes.length);for(const b of bounds){const i=b.index;expanded[i]={left:b.x1New,top:0,right:b.x2New,bottom:0}}boxes.map(function(box,i){const e=expanded[i],b=bounds[i];b.x1=box.top,b.y1=width-e.right,b.x2=box.bottom,b.y2=width-e.left,b.index=i,b.x1New=void 0,b.x2New=void 0}),expandBoundsLTR(height,bounds);for(const b of bounds){const i=b.index;expanded[i].top=b.x1New,expanded[i].bottom=b.x2New}return expanded}__name2(expandBounds,"expandBounds"),__name(expandBounds,"expandBounds");function expandBoundsLTR(width,bounds){bounds.sort(function(a,b){return a.x1-b.x1||a.index-b.index});const horizon=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const boundary of bounds){let i=0;for(;i<horizon.length&&horizon[i].end<=boundary.y1;)i++;let j=horizon.length-1;for(;j>=0&&horizon[j].start>=boundary.y2;)j--;let horizonPart,affectedBoundary,q,k,maxXNew=-1/0;for(q=i;q<=j;q++){horizonPart=horizon[q],affectedBoundary=horizonPart.boundary;let xNew;affectedBoundary.x2>boundary.x1?xNew=affectedBoundary.index>boundary.index?affectedBoundary.x1New:boundary.x1:affectedBoundary.x2New===void 0?xNew=(affectedBoundary.x2+boundary.x1)/2:xNew=affectedBoundary.x2New,xNew>maxXNew&&(maxXNew=xNew)}for(boundary.x1New=maxXNew,q=i;q<=j;q++)horizonPart=horizon[q],affectedBoundary=horizonPart.boundary,affectedBoundary.x2New===void 0?affectedBoundary.x2>boundary.x1?affectedBoundary.index>boundary.index&&(affectedBoundary.x2New=affectedBoundary.x2):affectedBoundary.x2New=maxXNew:affectedBoundary.x2New>maxXNew&&(affectedBoundary.x2New=Math.max(maxXNew,affectedBoundary.x2));const changedHorizon=[];let lastBoundary=null;for(q=i;q<=j;q++){horizonPart=horizon[q],affectedBoundary=horizonPart.boundary;const useBoundary=affectedBoundary.x2>boundary.x2?affectedBoundary:boundary;lastBoundary===useBoundary?changedHorizon.at(-1).end=horizonPart.end:(changedHorizon.push({start:horizonPart.start,end:horizonPart.end,boundary:useBoundary}),lastBoundary=useBoundary)}for(horizon[i].start<boundary.y1&&(changedHorizon[0].start=boundary.y1,changedHorizon.unshift({start:horizon[i].start,end:boundary.y1,boundary:horizon[i].boundary})),boundary.y2<horizon[j].end&&(changedHorizon.at(-1).end=boundary.y2,changedHorizon.push({start:boundary.y2,end:horizon[j].end,boundary:horizon[j].boundary})),q=i;q<=j;q++){if(horizonPart=horizon[q],affectedBoundary=horizonPart.boundary,affectedBoundary.x2New!==void 0)continue;let used=!1;for(k=i-1;!used&&k>=0&&horizon[k].start>=affectedBoundary.y1;k--)used=horizon[k].boundary===affectedBoundary;for(k=j+1;!used&&k<horizon.length&&horizon[k].end<=affectedBoundary.y2;k++)used=horizon[k].boundary===affectedBoundary;for(k=0;!used&&k<changedHorizon.length;k++)used=changedHorizon[k].boundary===affectedBoundary;used||(affectedBoundary.x2New=maxXNew)}Array.prototype.splice.apply(horizon,[i,j-i+1,...changedHorizon])}for(const horizonPart of horizon){const affectedBoundary=horizonPart.boundary;affectedBoundary.x2New===void 0&&(affectedBoundary.x2New=Math.max(width,affectedBoundary.x2))}}__name2(expandBoundsLTR,"expandBoundsLTR"),__name(expandBoundsLTR,"expandBoundsLTR");const _TextLayerRenderTask=class{static{__name2(this,"_TextLayerRenderTask")}constructor(_ref){var _globalThis$FontInspe;let{textContent,textContentStream,container,viewport,textDivs,textContentItemsStr,enhanceTextSelection}=_ref;enhanceTextSelection&&(0,_display_utils2.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=textContent,this._textContentStream=textContentStream,this._container=container,this._document=container.ownerDocument,this._viewport=viewport,this._textDivs=textDivs||[],this._textContentItemsStr=textContentItemsStr||[],this._enhanceTextSelection=!!enhanceTextSelection,this._fontInspectorEnabled=!!((_globalThis$FontInspe=globalThis.FontInspector)!==null&&_globalThis$FontInspe!==void 0&&_globalThis$FontInspe.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,_util2.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new _util2.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(items,styleCache){for(let i=0,len=items.length;i<len;i++){if(items[i].str===void 0){if(items[i].type==="beginMarkedContentProps"||items[i].type==="beginMarkedContent"){const parent=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),items[i].id!==null&&this._container.setAttribute("id",`${items[i].id}`),parent.append(this._container)}else items[i].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(items[i].str),appendText(this,items[i],styleCache,this._layoutTextCtx)}}_layoutText(textDiv){const textDivProperties=this._textDivProperties.get(textDiv);let transform="";if(textDivProperties.canvasWidth!==0&&textDivProperties.hasText){const{fontFamily}=textDiv.style,{fontSize}=textDivProperties;(fontSize!==this._layoutTextLastFontSize||fontFamily!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${fontSize*this._devicePixelRatio}px ${fontFamily}`,this._layoutTextLastFontSize=fontSize,this._layoutTextLastFontFamily=fontFamily);const{width}=this._layoutTextCtx.measureText(textDiv.textContent);if(width>0){const scale=this._devicePixelRatio*textDivProperties.canvasWidth/width;this._enhanceTextSelection&&(textDivProperties.scale=scale),transform=`scaleX(${scale})`}}if(textDivProperties.angle!==0&&(transform=`rotate(${textDivProperties.angle}deg) ${transform}`),transform.length>0&&(this._enhanceTextSelection&&(textDivProperties.originalTransform=transform),textDiv.style.transform=transform),textDivProperties.hasText&&this._container.append(textDiv),textDivProperties.hasEOL){const br=document.createElement("br");br.setAttribute("role","presentation"),this._container.append(br)}}_render(){let timeout=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const capability=(0,_util2.createPromiseCapability)();let styleCache=Object.create(null);const canvas=this._document.createElement("canvas");if(canvas.height=canvas.width=DEFAULT_FONT_SIZE,this._layoutTextCtx=canvas.getContext("2d",{alpha:!1}),this._textContent){const textItems=this._textContent.items,textStyles=this._textContent.styles;this._processItems(textItems,textStyles),capability.resolve()}else if(this._textContentStream){const pump=__name(()=>{this._reader.read().then(_ref2=>{let{value,done}=_ref2;if(done){capability.resolve();return}Object.assign(styleCache,value.styles),this._processItems(value.items,styleCache),pump()},capability.reject)},"pump");this._reader=this._textContentStream.getReader(),pump()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');capability.promise.then(()=>{styleCache=null,timeout?this._renderTimer=setTimeout(()=>{render(this),this._renderTimer=null},timeout):render(this)},this._capability.reject)}expandTextDivs(){let expandDivs=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(expand(this),this._bounds=null);const transformBuf=[],paddingBuf=[];for(let i=0,ii=this._textDivs.length;i<ii;i++){const div=this._textDivs[i],divProps=this._textDivProperties.get(div);divProps.hasText&&(expandDivs?(transformBuf.length=0,paddingBuf.length=0,divProps.originalTransform&&transformBuf.push(divProps.originalTransform),divProps.paddingTop>0?(paddingBuf.push(`${divProps.paddingTop}px`),transformBuf.push(`translateY(${-divProps.paddingTop}px)`)):paddingBuf.push(0),divProps.paddingRight>0?paddingBuf.push(`${divProps.paddingRight/divProps.scale}px`):paddingBuf.push(0),divProps.paddingBottom>0?paddingBuf.push(`${divProps.paddingBottom}px`):paddingBuf.push(0),divProps.paddingLeft>0?(paddingBuf.push(`${divProps.paddingLeft/divProps.scale}px`),transformBuf.push(`translateX(${-divProps.paddingLeft/divProps.scale}px)`)):paddingBuf.push(0),div.style.padding=paddingBuf.join(" "),transformBuf.length&&(div.style.transform=transformBuf.join(" "))):(div.style.padding=null,div.style.transform=divProps.originalTransform))}}};__name(_TextLayerRenderTask,"TextLayerRenderTask");let TextLayerRenderTask=_TextLayerRenderTask;exports2.TextLayerRenderTask=TextLayerRenderTask;function renderTextLayer(renderParameters){const task=new TextLayerRenderTask({textContent:renderParameters.textContent,textContentStream:renderParameters.textContentStream,container:renderParameters.container,viewport:renderParameters.viewport,textDivs:renderParameters.textDivs,textContentItemsStr:renderParameters.textContentItemsStr,enhanceTextSelection:renderParameters.enhanceTextSelection});return task._render(renderParameters.timeout),task}__name2(renderTextLayer,"renderTextLayer"),__name(renderTextLayer,"renderTextLayer")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{var _a,_b;Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.SVGGraphics=void 0;var _display_utils2=__w_pdfjs_require__2(133),_util2=__w_pdfjs_require__2(1),_is_node2=__w_pdfjs_require__2(3);let SVGGraphics=(_a=class{static{__name2(this,"_a")}constructor(){(0,_util2.unreachable)("Not implemented: SVGGraphics")}},__name(_a,"SVGGraphics"),_a);exports2.SVGGraphics=SVGGraphics;{let opListToTree=__name2(function(opList){let opTree=[];const tmp=[];for(const opListElement of opList){if(opListElement.fn==="save"){opTree.push({fnId:92,fn:"group",items:[]}),tmp.push(opTree),opTree=opTree.at(-1).items;continue}opListElement.fn==="restore"?opTree=tmp.pop():opTree.push(opListElement)}return opTree},"opListToTree"),pf=__name2(function(value){if(Number.isInteger(value))return value.toString();const s=value.toFixed(10);let i=s.length-1;if(s[i]!=="0")return s;do i--;while(s[i]==="0");return s.substring(0,s[i]==="."?i:i+1)},"pf"),pm=__name2(function(m){if(m[4]===0&&m[5]===0){if(m[1]===0&&m[2]===0)return m[0]===1&&m[3]===1?"":`scale(${pf(m[0])} ${pf(m[3])})`;if(m[0]===m[3]&&m[1]===-m[2]){const a=Math.acos(m[0])*180/Math.PI;return`rotate(${pf(a)})`}}else if(m[0]===1&&m[1]===0&&m[2]===0&&m[3]===1)return`translate(${pf(m[4])} ${pf(m[5])})`;return`matrix(${pf(m[0])} ${pf(m[1])} ${pf(m[2])} ${pf(m[3])} ${pf(m[4])} ${pf(m[5])})`},"pm");__name(opListToTree,"opListToTree"),__name(pf,"pf"),__name(pm,"pm");const SVG_DEFAULTS={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},XML_NS="http://www.w3.org/XML/1998/namespace",XLINK_NS="http://www.w3.org/1999/xlink",LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],createObjectURL=__name(function(data){let contentType=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",forceDataSchema=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&&typeof Blob<"u"&&!forceDataSchema)return URL.createObjectURL(new Blob([data],{type:contentType}));const digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let buffer=`data:${contentType};base64,`;for(let i=0,ii=data.length;i<ii;i+=3){const b1=data[i]&255,b2=data[i+1]&255,b3=data[i+2]&255,d1=b1>>2,d2=(b1&3)<<4|b2>>4,d3=i+1<ii?(b2&15)<<2|b3>>6:64,d4=i+2<ii?b3&63:64;buffer+=digits[d1]+digits[d2]+digits[d3]+digits[d4]}return buffer},"createObjectURL"),convertImgDataToPng=function(){const PNG_HEADER=new Uint8Array([137,80,78,71,13,10,26,10]),CHUNK_WRAPPER_SIZE=12,crcTable=new Int32Array(256);for(let i=0;i<256;i++){let c=i;for(let h=0;h<8;h++)c&1?c=3988292384^c>>1&2147483647:c=c>>1&2147483647;crcTable[i]=c}function crc32(data,start,end){let crc=-1;for(let i=start;i<end;i++){const a=(crc^data[i])&255,b=crcTable[a];crc=crc>>>8^b}return crc^-1}__name2(crc32,"crc32"),__name(crc32,"crc32");function writePngChunk(type,body,data,offset){let p=offset;const len=body.length;data[p]=len>>24&255,data[p+1]=len>>16&255,data[p+2]=len>>8&255,data[p+3]=len&255,p+=4,data[p]=type.charCodeAt(0)&255,data[p+1]=type.charCodeAt(1)&255,data[p+2]=type.charCodeAt(2)&255,data[p+3]=type.charCodeAt(3)&255,p+=4,data.set(body,p),p+=body.length;const crc=crc32(data,offset+4,p);data[p]=crc>>24&255,data[p+1]=crc>>16&255,data[p+2]=crc>>8&255,data[p+3]=crc&255}__name2(writePngChunk,"writePngChunk"),__name(writePngChunk,"writePngChunk");function adler32(data,start,end){let a=1,b=0;for(let i=start;i<end;++i)a=(a+(data[i]&255))%65521,b=(b+a)%65521;return b<<16|a}__name2(adler32,"adler32"),__name(adler32,"adler32");function deflateSync(literals){if(!_is_node2.isNodeJS)return deflateSyncUncompressed(literals);try{let input;parseInt(process.versions.node)>=8?input=literals:input=Buffer.from(literals);const output=require$$7.deflateSync(input,{level:9});return output instanceof Uint8Array?output:new Uint8Array(output)}catch(e){(0,_util2.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return deflateSyncUncompressed(literals)}__name2(deflateSync,"deflateSync"),__name(deflateSync,"deflateSync");function deflateSyncUncompressed(literals){let len=literals.length;const maxBlockLength=65535,deflateBlocks=Math.ceil(len/maxBlockLength),idat=new Uint8Array(2+len+deflateBlocks*5+4);let pi=0;idat[pi++]=120,idat[pi++]=156;let pos=0;for(;len>maxBlockLength;)idat[pi++]=0,idat[pi++]=255,idat[pi++]=255,idat[pi++]=0,idat[pi++]=0,idat.set(literals.subarray(pos,pos+maxBlockLength),pi),pi+=maxBlockLength,pos+=maxBlockLength,len-=maxBlockLength;idat[pi++]=1,idat[pi++]=len&255,idat[pi++]=len>>8&255,idat[pi++]=~len&65535&255,idat[pi++]=(~len&65535)>>8&255,idat.set(literals.subarray(pos),pi),pi+=literals.length-pos;const adler=adler32(literals,0,literals.length);return idat[pi++]=adler>>24&255,idat[pi++]=adler>>16&255,idat[pi++]=adler>>8&255,idat[pi++]=adler&255,idat}__name2(deflateSyncUncompressed,"deflateSyncUncompressed"),__name(deflateSyncUncompressed,"deflateSyncUncompressed");function encode(imgData,kind,forceDataSchema,isMask){const width=imgData.width,height=imgData.height;let bitDepth,colorType,lineSize;const bytes=imgData.data;switch(kind){case _util2.ImageKind.GRAYSCALE_1BPP:colorType=0,bitDepth=1,lineSize=width+7>>3;break;case _util2.ImageKind.RGB_24BPP:colorType=2,bitDepth=8,lineSize=width*3;break;case _util2.ImageKind.RGBA_32BPP:colorType=6,bitDepth=8,lineSize=width*4;break;default:throw new Error("invalid format")}const literals=new Uint8Array((1+lineSize)*height);let offsetLiterals=0,offsetBytes=0;for(let y=0;y<height;++y)literals[offsetLiterals++]=0,literals.set(bytes.subarray(offsetBytes,offsetBytes+lineSize),offsetLiterals),offsetBytes+=lineSize,offsetLiterals+=lineSize;if(kind===_util2.ImageKind.GRAYSCALE_1BPP&&isMask){offsetLiterals=0;for(let y=0;y<height;y++){offsetLiterals++;for(let i=0;i<lineSize;i++)literals[offsetLiterals++]^=255}}const ihdr=new Uint8Array([width>>24&255,width>>16&255,width>>8&255,width&255,height>>24&255,height>>16&255,height>>8&255,height&255,bitDepth,colorType,0,0,0]),idat=deflateSync(literals),pngLength=PNG_HEADER.length+CHUNK_WRAPPER_SIZE*3+ihdr.length+idat.length,data=new Uint8Array(pngLength);let offset=0;return data.set(PNG_HEADER,offset),offset+=PNG_HEADER.length,writePngChunk("IHDR",ihdr,data,offset),offset+=CHUNK_WRAPPER_SIZE+ihdr.length,writePngChunk("IDATA",idat,data,offset),offset+=CHUNK_WRAPPER_SIZE+idat.length,writePngChunk("IEND",new Uint8Array(0),data,offset),createObjectURL(data,"image/png",forceDataSchema)}return __name2(encode,"encode"),__name(encode,"encode"),__name(__name2(function(imgData,forceDataSchema,isMask){const kind=imgData.kind===void 0?_util2.ImageKind.GRAYSCALE_1BPP:imgData.kind;return encode(imgData,kind,forceDataSchema,isMask)},"convertImgDataToPng2"),"convertImgDataToPng")}(),_SVGExtraState=class{static{__name2(this,"_SVGExtraState")}constructor(){this.fontSizeScale=1,this.fontWeight=SVG_DEFAULTS.fontWeight,this.fontSize=0,this.textMatrix=_util2.IDENTITY_MATRIX,this.fontMatrix=_util2.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_util2.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=SVG_DEFAULTS.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(x,y){this.x=x,this.y=y}};__name(_SVGExtraState,"SVGExtraState");let SVGExtraState=_SVGExtraState,clipCount=0,maskCount=0,shadingCount=0;exports2.SVGGraphics=SVGGraphics=(_b=class{static{__name2(this,"_b")}constructor(commonObjs,objs){let forceDataSchema=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;(0,_display_utils2.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new _display_utils2.DOMSVGFactory,this.current=new SVGExtraState,this.transformMatrix=_util2.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=commonObjs,this.objs=objs,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!forceDataSchema,this._operatorIdMapping=[];for(const op in _util2.OPS)this._operatorIdMapping[_util2.OPS[op]]=op}save(){this.transformStack.push(this.transformMatrix);const old=this.current;this.extraStack.push(old),this.current=old.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(items){this.save(),this.executeOpTree(items),this.restore()}loadDependencies(operatorList){const fnArray=operatorList.fnArray,argsArray=operatorList.argsArray;for(let i=0,ii=fnArray.length;i<ii;i++)if(fnArray[i]===_util2.OPS.dependency)for(const obj of argsArray[i]){const objsPool=obj.startsWith("g_")?this.commonObjs:this.objs,promise=new Promise(resolve=>{objsPool.get(obj,resolve)});this.current.dependencies.push(promise)}return Promise.all(this.current.dependencies)}transform(a,b,c,d,e,f){const transformMatrix=[a,b,c,d,e,f];this.transformMatrix=_util2.Util.transform(this.transformMatrix,transformMatrix),this.tgrp=null}getSVG(operatorList,viewport){this.viewport=viewport;const svgElement=this._initialize(viewport);return this.loadDependencies(operatorList).then(()=>(this.transformMatrix=_util2.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(operatorList)),svgElement))}convertOpList(operatorList){const operatorIdMapping=this._operatorIdMapping,argsArray=operatorList.argsArray,fnArray=operatorList.fnArray,opList=[];for(let i=0,ii=fnArray.length;i<ii;i++){const fnId=fnArray[i];opList.push({fnId,fn:operatorIdMapping[fnId],args:argsArray[i]})}return opListToTree(opList)}executeOpTree(opTree){for(const opTreeElement of opTree){const fn=opTreeElement.fn,fnId=opTreeElement.fnId,args=opTreeElement.args;switch(fnId|0){case _util2.OPS.beginText:this.beginText();break;case _util2.OPS.dependency:break;case _util2.OPS.setLeading:this.setLeading(args);break;case _util2.OPS.setLeadingMoveText:this.setLeadingMoveText(args[0],args[1]);break;case _util2.OPS.setFont:this.setFont(args);break;case _util2.OPS.showText:this.showText(args[0]);break;case _util2.OPS.showSpacedText:this.showText(args[0]);break;case _util2.OPS.endText:this.endText();break;case _util2.OPS.moveText:this.moveText(args[0],args[1]);break;case _util2.OPS.setCharSpacing:this.setCharSpacing(args[0]);break;case _util2.OPS.setWordSpacing:this.setWordSpacing(args[0]);break;case _util2.OPS.setHScale:this.setHScale(args[0]);break;case _util2.OPS.setTextMatrix:this.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util2.OPS.setTextRise:this.setTextRise(args[0]);break;case _util2.OPS.setTextRenderingMode:this.setTextRenderingMode(args[0]);break;case _util2.OPS.setLineWidth:this.setLineWidth(args[0]);break;case _util2.OPS.setLineJoin:this.setLineJoin(args[0]);break;case _util2.OPS.setLineCap:this.setLineCap(args[0]);break;case _util2.OPS.setMiterLimit:this.setMiterLimit(args[0]);break;case _util2.OPS.setFillRGBColor:this.setFillRGBColor(args[0],args[1],args[2]);break;case _util2.OPS.setStrokeRGBColor:this.setStrokeRGBColor(args[0],args[1],args[2]);break;case _util2.OPS.setStrokeColorN:this.setStrokeColorN(args);break;case _util2.OPS.setFillColorN:this.setFillColorN(args);break;case _util2.OPS.shadingFill:this.shadingFill(args[0]);break;case _util2.OPS.setDash:this.setDash(args[0],args[1]);break;case _util2.OPS.setRenderingIntent:this.setRenderingIntent(args[0]);break;case _util2.OPS.setFlatness:this.setFlatness(args[0]);break;case _util2.OPS.setGState:this.setGState(args[0]);break;case _util2.OPS.fill:this.fill();break;case _util2.OPS.eoFill:this.eoFill();break;case _util2.OPS.stroke:this.stroke();break;case _util2.OPS.fillStroke:this.fillStroke();break;case _util2.OPS.eoFillStroke:this.eoFillStroke();break;case _util2.OPS.clip:this.clip("nonzero");break;case _util2.OPS.eoClip:this.clip("evenodd");break;case _util2.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _util2.OPS.paintImageXObject:this.paintImageXObject(args[0]);break;case _util2.OPS.paintInlineImageXObject:this.paintInlineImageXObject(args[0]);break;case _util2.OPS.paintImageMaskXObject:this.paintImageMaskXObject(args[0]);break;case _util2.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(args[0],args[1]);break;case _util2.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _util2.OPS.closePath:this.closePath();break;case _util2.OPS.closeStroke:this.closeStroke();break;case _util2.OPS.closeFillStroke:this.closeFillStroke();break;case _util2.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _util2.OPS.nextLine:this.nextLine();break;case _util2.OPS.transform:this.transform(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util2.OPS.constructPath:this.constructPath(args[0],args[1]);break;case _util2.OPS.endPath:this.endPath();break;case 92:this.group(opTreeElement.items);break;default:(0,_util2.warn)(`Unimplemented operator ${fn}`);break}}}setWordSpacing(wordSpacing){this.current.wordSpacing=wordSpacing}setCharSpacing(charSpacing){this.current.charSpacing=charSpacing}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(a,b,c,d,e,f){const current=this.current;current.textMatrix=current.lineMatrix=[a,b,c,d,e,f],current.textMatrixScale=Math.hypot(a,b),current.x=current.lineX=0,current.y=current.lineY=0,current.xcoords=[],current.ycoords=[],current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.tspan.setAttributeNS(null,"y",pf(-current.y)),current.txtElement=this.svgFactory.createElement("svg:text"),current.txtElement.append(current.tspan)}beginText(){const current=this.current;current.x=current.lineX=0,current.y=current.lineY=0,current.textMatrix=_util2.IDENTITY_MATRIX,current.lineMatrix=_util2.IDENTITY_MATRIX,current.textMatrixScale=1,current.tspan=this.svgFactory.createElement("svg:tspan"),current.txtElement=this.svgFactory.createElement("svg:text"),current.txtgrp=this.svgFactory.createElement("svg:g"),current.xcoords=[],current.ycoords=[]}moveText(x,y){const current=this.current;current.x=current.lineX+=x,current.y=current.lineY+=y,current.xcoords=[],current.ycoords=[],current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.tspan.setAttributeNS(null,"y",pf(-current.y))}showText(glyphs){const current=this.current,font=current.font,fontSize=current.fontSize;if(fontSize===0)return;const fontSizeScale=current.fontSizeScale,charSpacing=current.charSpacing,wordSpacing=current.wordSpacing,fontDirection=current.fontDirection,textHScale=current.textHScale*fontDirection,vertical=font.vertical,spacingDir=vertical?1:-1,defaultVMetrics=font.defaultVMetrics,widthAdvanceScale=fontSize*current.fontMatrix[0];let x=0;for(const glyph of glyphs){if(glyph===null){x+=fontDirection*wordSpacing;continue}else if(typeof glyph=="number"){x+=spacingDir*glyph*fontSize/1e3;continue}const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing,character=glyph.fontChar;let scaledX,scaledY,width=glyph.width;if(vertical){let vx;const vmetric=glyph.vmetric||defaultVMetrics;vx=glyph.vmetric?vmetric[1]:width*.5,vx=-vx*widthAdvanceScale;const vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width,scaledX=vx/fontSizeScale,scaledY=(x+vy)/fontSizeScale}else scaledX=x/fontSizeScale,scaledY=0;(glyph.isInFont||font.missingFile)&&(current.xcoords.push(current.x+scaledX),vertical&&current.ycoords.push(-current.y+scaledY),current.tspan.textContent+=character);let charWidth;vertical?charWidth=width*widthAdvanceScale-spacing*fontDirection:charWidth=width*widthAdvanceScale+spacing*fontDirection,x+=charWidth}current.tspan.setAttributeNS(null,"x",current.xcoords.map(pf).join(" ")),vertical?current.tspan.setAttributeNS(null,"y",current.ycoords.map(pf).join(" ")):current.tspan.setAttributeNS(null,"y",pf(-current.y)),vertical?current.y-=x:current.x+=x*textHScale,current.tspan.setAttributeNS(null,"font-family",current.fontFamily),current.tspan.setAttributeNS(null,"font-size",`${pf(current.fontSize)}px`),current.fontStyle!==SVG_DEFAULTS.fontStyle&&current.tspan.setAttributeNS(null,"font-style",current.fontStyle),current.fontWeight!==SVG_DEFAULTS.fontWeight&&current.tspan.setAttributeNS(null,"font-weight",current.fontWeight);const fillStrokeMode=current.textRenderingMode&_util2.TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===_util2.TextRenderingMode.FILL||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE?(current.fillColor!==SVG_DEFAULTS.fillColor&&current.tspan.setAttributeNS(null,"fill",current.fillColor),current.fillAlpha<1&&current.tspan.setAttributeNS(null,"fill-opacity",current.fillAlpha)):current.textRenderingMode===_util2.TextRenderingMode.ADD_TO_PATH?current.tspan.setAttributeNS(null,"fill","transparent"):current.tspan.setAttributeNS(null,"fill","none"),fillStrokeMode===_util2.TextRenderingMode.STROKE||fillStrokeMode===_util2.TextRenderingMode.FILL_STROKE){const lineWidthScale=1/(current.textMatrixScale||1);this._setStrokeAttributes(current.tspan,lineWidthScale)}let textMatrix=current.textMatrix;current.textRise!==0&&(textMatrix=textMatrix.slice(),textMatrix[5]+=current.textRise),current.txtElement.setAttributeNS(null,"transform",`${pm(textMatrix)} scale(${pf(textHScale)}, -1)`),current.txtElement.setAttributeNS(XML_NS,"xml:space","preserve"),current.txtElement.append(current.tspan),current.txtgrp.append(current.txtElement),this._ensureTransformGroup().append(current.txtElement)}setLeadingMoveText(x,y){this.setLeading(-y),this.moveText(x,y)}addFontStyle(fontObj){if(!fontObj.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const url=createObjectURL(fontObj.data,fontObj.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${fontObj.loadedName}"; src: url(${url}); }
`}setFont(details){const current=this.current,fontObj=this.commonObjs.get(details[0]);let size=details[1];current.font=fontObj,this.embedFonts&&!fontObj.missingFile&&!this.embeddedFonts[fontObj.loadedName]&&(this.addFontStyle(fontObj),this.embeddedFonts[fontObj.loadedName]=fontObj),current.fontMatrix=fontObj.fontMatrix||_util2.FONT_IDENTITY_MATRIX;let bold="normal";fontObj.black?bold="900":fontObj.bold&&(bold="bold");const italic=fontObj.italic?"italic":"normal";size<0?(size=-size,current.fontDirection=-1):current.fontDirection=1,current.fontSize=size,current.fontFamily=fontObj.loadedName,current.fontWeight=bold,current.fontStyle=italic,current.tspan=this.svgFactory.createElement("svg:tspan"),current.tspan.setAttributeNS(null,"y",pf(-current.y)),current.xcoords=[],current.ycoords=[]}endText(){var _current$txtElement;const current=this.current;current.textRenderingMode&_util2.TextRenderingMode.ADD_TO_PATH_FLAG&&(_current$txtElement=current.txtElement)!==null&&_current$txtElement!==void 0&&_current$txtElement.hasChildNodes()&&(current.element=current.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(width){width>0&&(this.current.lineWidth=width)}setLineCap(style){this.current.lineCap=LINE_CAP_STYLES[style]}setLineJoin(style){this.current.lineJoin=LINE_JOIN_STYLES[style]}setMiterLimit(limit){this.current.miterLimit=limit}setStrokeAlpha(strokeAlpha){this.current.strokeAlpha=strokeAlpha}setStrokeRGBColor(r,g,b){this.current.strokeColor=_util2.Util.makeHexColor(r,g,b)}setFillAlpha(fillAlpha){this.current.fillAlpha=fillAlpha}setFillRGBColor(r,g,b){this.current.fillColor=_util2.Util.makeHexColor(r,g,b),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(args){this.current.strokeColor=this._makeColorN_Pattern(args)}setFillColorN(args){this.current.fillColor=this._makeColorN_Pattern(args)}shadingFill(args){const width=this.viewport.width,height=this.viewport.height,inv=_util2.Util.inverseTransform(this.transformMatrix),bl=_util2.Util.applyTransform([0,0],inv),br=_util2.Util.applyTransform([0,height],inv),ul=_util2.Util.applyTransform([width,0],inv),ur=_util2.Util.applyTransform([width,height],inv),x0=Math.min(bl[0],br[0],ul[0],ur[0]),y0=Math.min(bl[1],br[1],ul[1],ur[1]),x1=Math.max(bl[0],br[0],ul[0],ur[0]),y1=Math.max(bl[1],br[1],ul[1],ur[1]),rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x",x0),rect.setAttributeNS(null,"y",y0),rect.setAttributeNS(null,"width",x1-x0),rect.setAttributeNS(null,"height",y1-y0),rect.setAttributeNS(null,"fill",this._makeShadingPattern(args)),this.current.fillAlpha<1&&rect.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(rect)}_makeColorN_Pattern(args){return args[0]==="TilingPattern"?this._makeTilingPattern(args):this._makeShadingPattern(args)}_makeTilingPattern(args){const color=args[1],operatorList=args[2],matrix=args[3]||_util2.IDENTITY_MATRIX,[x0,y0,x1,y1]=args[4],xstep=args[5],ystep=args[6],paintType=args[7],tilingId=`shading${shadingCount++}`,[tx0,ty0,tx1,ty1]=_util2.Util.normalizeRect([..._util2.Util.applyTransform([x0,y0],matrix),..._util2.Util.applyTransform([x1,y1],matrix)]),[xscale,yscale]=_util2.Util.singularValueDecompose2dScale(matrix),txstep=xstep*xscale,tystep=ystep*yscale,tiling=this.svgFactory.createElement("svg:pattern");tiling.setAttributeNS(null,"id",tilingId),tiling.setAttributeNS(null,"patternUnits","userSpaceOnUse"),tiling.setAttributeNS(null,"width",txstep),tiling.setAttributeNS(null,"height",tystep),tiling.setAttributeNS(null,"x",`${tx0}`),tiling.setAttributeNS(null,"y",`${ty0}`);const svg=this.svg,transformMatrix=this.transformMatrix,fillColor=this.current.fillColor,strokeColor=this.current.strokeColor,bbox=this.svgFactory.create(tx1-tx0,ty1-ty0);if(this.svg=bbox,this.transformMatrix=matrix,paintType===2){const cssColor=_util2.Util.makeHexColor(...color);this.current.fillColor=cssColor,this.current.strokeColor=cssColor}return this.executeOpTree(this.convertOpList(operatorList)),this.svg=svg,this.transformMatrix=transformMatrix,this.current.fillColor=fillColor,this.current.strokeColor=strokeColor,tiling.append(bbox.childNodes[0]),this.defs.append(tiling),`url(#${tilingId})`}_makeShadingPattern(args){switch(typeof args=="string"&&(args=this.objs.get(args)),args[0]){case"RadialAxial":const shadingId=`shading${shadingCount++}`,colorStops=args[3];let gradient;switch(args[1]){case"axial":const point0=args[4],point1=args[5];gradient=this.svgFactory.createElement("svg:linearGradient"),gradient.setAttributeNS(null,"id",shadingId),gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),gradient.setAttributeNS(null,"x1",point0[0]),gradient.setAttributeNS(null,"y1",point0[1]),gradient.setAttributeNS(null,"x2",point1[0]),gradient.setAttributeNS(null,"y2",point1[1]);break;case"radial":const focalPoint=args[4],circlePoint=args[5],focalRadius=args[6],circleRadius=args[7];gradient=this.svgFactory.createElement("svg:radialGradient"),gradient.setAttributeNS(null,"id",shadingId),gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),gradient.setAttributeNS(null,"cx",circlePoint[0]),gradient.setAttributeNS(null,"cy",circlePoint[1]),gradient.setAttributeNS(null,"r",circleRadius),gradient.setAttributeNS(null,"fx",focalPoint[0]),gradient.setAttributeNS(null,"fy",focalPoint[1]),gradient.setAttributeNS(null,"fr",focalRadius);break;default:throw new Error(`Unknown RadialAxial type: ${args[1]}`)}for(const colorStop of colorStops){const stop=this.svgFactory.createElement("svg:stop");stop.setAttributeNS(null,"offset",colorStop[0]),stop.setAttributeNS(null,"stop-color",colorStop[1]),gradient.append(stop)}return this.defs.append(gradient),`url(#${shadingId})`;case"Mesh":return(0,_util2.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${args[0]}`)}}setDash(dashArray,dashPhase){this.current.dashArray=dashArray,this.current.dashPhase=dashPhase}constructPath(ops,args){const current=this.current;let x=current.x,y=current.y,d=[],j=0;for(const op of ops)switch(op|0){case _util2.OPS.rectangle:x=args[j++],y=args[j++];const width=args[j++],height=args[j++],xw=x+width,yh=y+height;d.push("M",pf(x),pf(y),"L",pf(xw),pf(y),"L",pf(xw),pf(yh),"L",pf(x),pf(yh),"Z");break;case _util2.OPS.moveTo:x=args[j++],y=args[j++],d.push("M",pf(x),pf(y));break;case _util2.OPS.lineTo:x=args[j++],y=args[j++],d.push("L",pf(x),pf(y));break;case _util2.OPS.curveTo:x=args[j+4],y=args[j+5],d.push("C",pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]),pf(x),pf(y)),j+=6;break;case _util2.OPS.curveTo2:d.push("C",pf(x),pf(y),pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3])),x=args[j+2],y=args[j+3],j+=4;break;case _util2.OPS.curveTo3:x=args[j+2],y=args[j+3],d.push("C",pf(args[j]),pf(args[j+1]),pf(x),pf(y),pf(x),pf(y)),j+=4;break;case _util2.OPS.closePath:d.push("Z");break}d=d.join(" "),current.path&&ops.length>0&&ops[0]!==_util2.OPS.rectangle&&ops[0]!==_util2.OPS.moveTo?d=current.path.getAttributeNS(null,"d")+d:(current.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(current.path)),current.path.setAttributeNS(null,"d",d),current.path.setAttributeNS(null,"fill","none"),current.element=current.path,current.setCurrentPoint(x,y)}endPath(){const current=this.current;if(current.path=null,!this.pendingClip)return;if(!current.element){this.pendingClip=null;return}const clipId=`clippath${clipCount++}`,clipPath=this.svgFactory.createElement("svg:clipPath");clipPath.setAttributeNS(null,"id",clipId),clipPath.setAttributeNS(null,"transform",pm(this.transformMatrix));const clipElement=current.element.cloneNode(!0);if(this.pendingClip==="evenodd"?clipElement.setAttributeNS(null,"clip-rule","evenodd"):clipElement.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,clipPath.append(clipElement),this.defs.append(clipPath),current.activeClipUrl){current.clipGroup=null;for(const prev of this.extraStack)prev.clipGroup=null;clipPath.setAttributeNS(null,"clip-path",current.activeClipUrl)}current.activeClipUrl=`url(#${clipId})`,this.tgrp=null}clip(type){this.pendingClip=type}closePath(){const current=this.current;if(current.path){const d=`${current.path.getAttributeNS(null,"d")}Z`;current.path.setAttributeNS(null,"d",d)}}setLeading(leading){this.current.leading=-leading}setTextRise(textRise){this.current.textRise=textRise}setTextRenderingMode(textRenderingMode){this.current.textRenderingMode=textRenderingMode}setHScale(scale){this.current.textHScale=scale/100}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(const[key,value]of states)switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value);break;case"CA":this.setStrokeAlpha(value);break;case"ca":this.setFillAlpha(value);break;default:(0,_util2.warn)(`Unimplemented graphic state operator ${key}`);break}}fill(){const current=this.current;current.element&&(current.element.setAttributeNS(null,"fill",current.fillColor),current.element.setAttributeNS(null,"fill-opacity",current.fillAlpha),this.endPath())}stroke(){const current=this.current;current.element&&(this._setStrokeAttributes(current.element),current.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(element){let lineWidthScale=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const current=this.current;let dashArray=current.dashArray;lineWidthScale!==1&&dashArray.length>0&&(dashArray=dashArray.map(function(value){return lineWidthScale*value})),element.setAttributeNS(null,"stroke",current.strokeColor),element.setAttributeNS(null,"stroke-opacity",current.strokeAlpha),element.setAttributeNS(null,"stroke-miterlimit",pf(current.miterLimit)),element.setAttributeNS(null,"stroke-linecap",current.lineCap),element.setAttributeNS(null,"stroke-linejoin",current.lineJoin),element.setAttributeNS(null,"stroke-width",pf(lineWidthScale*current.lineWidth)+"px"),element.setAttributeNS(null,"stroke-dasharray",dashArray.map(pf).join(" ")),element.setAttributeNS(null,"stroke-dashoffset",pf(lineWidthScale*current.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0"),rect.setAttributeNS(null,"y","0"),rect.setAttributeNS(null,"width","1px"),rect.setAttributeNS(null,"height","1px"),rect.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(rect)}paintImageXObject(objId){const imgData=objId.startsWith("g_")?this.commonObjs.get(objId):this.objs.get(objId);if(!imgData){(0,_util2.warn)(`Dependent image with object ID ${objId} is not ready yet`);return}this.paintInlineImageXObject(imgData)}paintInlineImageXObject(imgData,mask){const width=imgData.width,height=imgData.height,imgSrc=convertImgDataToPng(imgData,this.forceDataSchema,!!mask),cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x","0"),cliprect.setAttributeNS(null,"y","0"),cliprect.setAttributeNS(null,"width",pf(width)),cliprect.setAttributeNS(null,"height",pf(height)),this.current.element=cliprect,this.clip("nonzero");const imgEl=this.svgFactory.createElement("svg:image");imgEl.setAttributeNS(XLINK_NS,"xlink:href",imgSrc),imgEl.setAttributeNS(null,"x","0"),imgEl.setAttributeNS(null,"y",pf(-height)),imgEl.setAttributeNS(null,"width",pf(width)+"px"),imgEl.setAttributeNS(null,"height",pf(height)+"px"),imgEl.setAttributeNS(null,"transform",`scale(${pf(1/width)} ${pf(-1/height)})`),mask?mask.append(imgEl):this._ensureTransformGroup().append(imgEl)}paintImageMaskXObject(imgData){const current=this.current,width=imgData.width,height=imgData.height,fillColor=current.fillColor;current.maskId=`mask${maskCount++}`;const mask=this.svgFactory.createElement("svg:mask");mask.setAttributeNS(null,"id",current.maskId);const rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0"),rect.setAttributeNS(null,"y","0"),rect.setAttributeNS(null,"width",pf(width)),rect.setAttributeNS(null,"height",pf(height)),rect.setAttributeNS(null,"fill",fillColor),rect.setAttributeNS(null,"mask",`url(#${current.maskId})`),this.defs.append(mask),this._ensureTransformGroup().append(rect),this.paintInlineImageXObject(imgData,mask)}paintFormXObjectBegin(matrix,bbox){if(Array.isArray(matrix)&&matrix.length===6&&this.transform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]),bbox){const width=bbox[2]-bbox[0],height=bbox[3]-bbox[1],cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x",bbox[0]),cliprect.setAttributeNS(null,"y",bbox[1]),cliprect.setAttributeNS(null,"width",pf(width)),cliprect.setAttributeNS(null,"height",pf(height)),this.current.element=cliprect,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(viewport){const svg=this.svgFactory.create(viewport.width,viewport.height),definitions=this.svgFactory.createElement("svg:defs");svg.append(definitions),this.defs=definitions;const rootGroup=this.svgFactory.createElement("svg:g");return rootGroup.setAttributeNS(null,"transform",pm(viewport.transform)),svg.append(rootGroup),this.svg=rootGroup,svg}_ensureClipGroup(){if(!this.current.clipGroup){const clipGroup=this.svgFactory.createElement("svg:g");clipGroup.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(clipGroup),this.current.clipGroup=clipGroup}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}},__name(_b,"SVGGraphics"),_b)}},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PDFNodeStream=void 0;var _util2=__w_pdfjs_require__2(1),_network_utils=__w_pdfjs_require__2(158);const fs=require$$7,http=require$$7,https=require$$7,url=require$$7,fileUriRegex=/^file:\/\/\/[a-zA-Z]:\//;function parseUrl(sourceUrl){const parsedUrl=url.parse(sourceUrl);return parsedUrl.protocol==="file:"||parsedUrl.host?parsedUrl:/^[a-z]:[/\\]/i.test(sourceUrl)?url.parse(`file:///${sourceUrl}`):(parsedUrl.host||(parsedUrl.protocol="file:"),parsedUrl)}__name2(parseUrl,"parseUrl"),__name(parseUrl,"parseUrl");const _PDFNodeStream=class{static{__name2(this,"_PDFNodeStream")}constructor(source){this.source=source,this.url=parseUrl(source.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _this$_fullRequestRea,_this$_fullRequestRea2;return(_this$_fullRequestRea=(_this$_fullRequestRea2=this._fullRequestReader)===null||_this$_fullRequestRea2===void 0?void 0:_this$_fullRequestRea2._loaded)!==null&&_this$_fullRequestRea!==void 0?_this$_fullRequestRea:0}getFullReader(){return(0,_util2.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this),this._fullRequestReader}getRangeReader(start,end){if(end<=this._progressiveDataLength)return null;const rangeReader=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,start,end):new PDFNodeStreamRangeReader(this,start,end);return this._rangeRequestReaders.push(rangeReader),rangeReader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}};__name(_PDFNodeStream,"PDFNodeStream");let PDFNodeStream=_PDFNodeStream;exports2.PDFNodeStream=PDFNodeStream;const _BaseFullReader=class{static{__name2(this,"_BaseFullReader")}constructor(stream){this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null;const source=stream.source;this._contentLength=source.length,this._loaded=0,this._filename=null,this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._readableStream=null,this._readCapability=(0,_util2.createPromiseCapability)(),this._headersCapability=(0,_util2.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const chunk=this._readableStream.read();return chunk===null?(this._readCapability=(0,_util2.createPromiseCapability)(),this.read()):(this._loaded+=chunk.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(chunk).buffer,done:!1})}cancel(reason){if(!this._readableStream){this._error(reason);return}this._readableStream.destroy(reason)}_error(reason){this._storedError=reason,this._readCapability.resolve()}_setReadableStream(readableStream){this._readableStream=readableStream,readableStream.on("readable",()=>{this._readCapability.resolve()}),readableStream.on("end",()=>{readableStream.destroy(),this._done=!0,this._readCapability.resolve()}),readableStream.on("error",reason=>{this._error(reason)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new _util2.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}};__name(_BaseFullReader,"BaseFullReader");let BaseFullReader=_BaseFullReader;const _BaseRangeReader=class{static{__name2(this,"_BaseRangeReader")}constructor(stream){this._url=stream.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,_util2.createPromiseCapability)();const source=stream.source;this._isStreamingSupported=!source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const chunk=this._readableStream.read();return chunk===null?(this._readCapability=(0,_util2.createPromiseCapability)(),this.read()):(this._loaded+=chunk.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(chunk).buffer,done:!1})}cancel(reason){if(!this._readableStream){this._error(reason);return}this._readableStream.destroy(reason)}_error(reason){this._storedError=reason,this._readCapability.resolve()}_setReadableStream(readableStream){this._readableStream=readableStream,readableStream.on("readable",()=>{this._readCapability.resolve()}),readableStream.on("end",()=>{readableStream.destroy(),this._done=!0,this._readCapability.resolve()}),readableStream.on("error",reason=>{this._error(reason)}),this._storedError&&this._readableStream.destroy(this._storedError)}};__name(_BaseRangeReader,"BaseRangeReader");let BaseRangeReader=_BaseRangeReader;function createRequestOptions(parsedUrl,headers){return{protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.hostname,port:parsedUrl.port,path:parsedUrl.path,method:"GET",headers}}__name2(createRequestOptions,"createRequestOptions"),__name(createRequestOptions,"createRequestOptions");const _PDFNodeStreamFullReader=class extends BaseFullReader{static{__name2(this,"_PDFNodeStreamFullReader")}constructor(stream){super(stream);const handleResponse=__name(response=>{if(response.statusCode===404){const error=new _util2.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=error,this._headersCapability.reject(error);return}this._headersCapability.resolve(),this._setReadableStream(response);const getResponseHeader=__name(name=>this._readableStream.headers[name.toLowerCase()],"getResponseHeader"),{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests,this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader)},"handleResponse");this._request=null,this._url.protocol==="http:"?this._request=http.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse):this._request=https.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse),this._request.on("error",reason=>{this._storedError=reason,this._headersCapability.reject(reason)}),this._request.end()}};__name(_PDFNodeStreamFullReader,"PDFNodeStreamFullReader");let PDFNodeStreamFullReader=_PDFNodeStreamFullReader;const _PDFNodeStreamRangeReader=class extends BaseRangeReader{static{__name2(this,"_PDFNodeStreamRangeReader")}constructor(stream,start,end){super(stream),this._httpHeaders={};for(const property in stream.httpHeaders){const value=stream.httpHeaders[property];typeof value>"u"||(this._httpHeaders[property]=value)}this._httpHeaders.Range=`bytes=${start}-${end-1}`;const handleResponse=__name(response=>{if(response.statusCode===404){const error=new _util2.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=error;return}this._setReadableStream(response)},"handleResponse");this._request=null,this._url.protocol==="http:"?this._request=http.request(createRequestOptions(this._url,this._httpHeaders),handleResponse):this._request=https.request(createRequestOptions(this._url,this._httpHeaders),handleResponse),this._request.on("error",reason=>{this._storedError=reason}),this._request.end()}};__name(_PDFNodeStreamRangeReader,"PDFNodeStreamRangeReader");let PDFNodeStreamRangeReader=_PDFNodeStreamRangeReader;const _PDFNodeStreamFsFullReader=class extends BaseFullReader{static{__name2(this,"_PDFNodeStreamFsFullReader")}constructor(stream){super(stream);let path=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(path=path.replace(/^\//,"")),fs.lstat(path,(error,stat)=>{if(error){error.code==="ENOENT"&&(error=new _util2.MissingPDFException(`Missing PDF "${path}".`)),this._storedError=error,this._headersCapability.reject(error);return}this._contentLength=stat.size,this._setReadableStream(fs.createReadStream(path)),this._headersCapability.resolve()})}};__name(_PDFNodeStreamFsFullReader,"PDFNodeStreamFsFullReader");let PDFNodeStreamFsFullReader=_PDFNodeStreamFsFullReader;const _PDFNodeStreamFsRangeReader=class extends BaseRangeReader{static{__name2(this,"_PDFNodeStreamFsRangeReader")}constructor(stream,start,end){super(stream);let path=decodeURIComponent(this._url.path);fileUriRegex.test(this._url.href)&&(path=path.replace(/^\//,"")),this._setReadableStream(fs.createReadStream(path,{start,end:end-1}))}};__name(_PDFNodeStreamFsRangeReader,"PDFNodeStreamFsRangeReader");let PDFNodeStreamFsRangeReader=_PDFNodeStreamFsRangeReader},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.createResponseStatusError=createResponseStatusError,exports2.extractFilenameFromHeader=extractFilenameFromHeader,exports2.validateRangeRequestCapabilities=validateRangeRequestCapabilities,exports2.validateResponseStatus=validateResponseStatus;var _util2=__w_pdfjs_require__2(1),_content_disposition=__w_pdfjs_require__2(159),_display_utils2=__w_pdfjs_require__2(133);function validateRangeRequestCapabilities(_ref){let{getResponseHeader,isHttp,rangeChunkSize,disableRange}=_ref;const returnValues={allowRangeRequests:!1,suggestedLength:void 0},length=parseInt(getResponseHeader("Content-Length"),10);return!Number.isInteger(length)||(returnValues.suggestedLength=length,length<=2*rangeChunkSize)||disableRange||!isHttp||getResponseHeader("Accept-Ranges")!=="bytes"||(getResponseHeader("Content-Encoding")||"identity")!=="identity"||(returnValues.allowRangeRequests=!0),returnValues}__name2(validateRangeRequestCapabilities,"validateRangeRequestCapabilities"),__name(validateRangeRequestCapabilities,"validateRangeRequestCapabilities");function extractFilenameFromHeader(getResponseHeader){const contentDisposition=getResponseHeader("Content-Disposition");if(contentDisposition){let filename=(0,_content_disposition.getFilenameFromContentDispositionHeader)(contentDisposition);if(filename.includes("%"))try{filename=decodeURIComponent(filename)}catch{}if((0,_display_utils2.isPdfFile)(filename))return filename}return null}__name2(extractFilenameFromHeader,"extractFilenameFromHeader"),__name(extractFilenameFromHeader,"extractFilenameFromHeader");function createResponseStatusError(status,url){return status===404||status===0&&url.startsWith("file:")?new _util2.MissingPDFException('Missing PDF "'+url+'".'):new _util2.UnexpectedResponseException(`Unexpected server response (${status}) while retrieving PDF "${url}".`,status)}__name2(createResponseStatusError,"createResponseStatusError"),__name(createResponseStatusError,"createResponseStatusError");function validateResponseStatus(status){return status===200||status===206}__name2(validateResponseStatus,"validateResponseStatus"),__name(validateResponseStatus,"validateResponseStatus")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.getFilenameFromContentDispositionHeader=getFilenameFromContentDispositionHeader;var _util2=__w_pdfjs_require__2(1);function getFilenameFromContentDispositionHeader(contentDisposition){let needsEncodingFixup=!0,tmp=toParamRegExp("filename\\*","i").exec(contentDisposition);if(tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);return filename=unescape(filename),filename=rfc5987decode(filename),filename=rfc2047decode(filename),fixupEncoding(filename)}if(tmp=rfc2231getparam(contentDisposition),tmp){const filename=rfc2047decode(tmp);return fixupEncoding(filename)}if(tmp=toParamRegExp("filename","i").exec(contentDisposition),tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);return filename=rfc2047decode(filename),fixupEncoding(filename)}function toParamRegExp(attributePattern,flags){return new RegExp("(?:^|;)\\s*"+attributePattern+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',flags)}__name2(toParamRegExp,"toParamRegExp"),__name(toParamRegExp,"toParamRegExp");function textdecode(encoding,value){if(encoding){if(!/^[\x00-\xFF]+$/.test(value))return value;try{const decoder=new TextDecoder(encoding,{fatal:!0}),buffer=(0,_util2.stringToBytes)(value);value=decoder.decode(buffer),needsEncodingFixup=!1}catch{}}return value}__name2(textdecode,"textdecode"),__name(textdecode,"textdecode");function fixupEncoding(value){return needsEncodingFixup&&/[\x80-\xff]/.test(value)&&(value=textdecode("utf-8",value),needsEncodingFixup&&(value=textdecode("iso-8859-1",value))),value}__name2(fixupEncoding,"fixupEncoding"),__name(fixupEncoding,"fixupEncoding");function rfc2231getparam(contentDispositionStr){const matches=[];let match;const iter=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(match=iter.exec(contentDispositionStr))!==null;){let[,n,quot,part]=match;if(n=parseInt(n,10),n in matches){if(n===0)break;continue}matches[n]=[quot,part]}const parts=[];for(let n=0;n<matches.length&&n in matches;++n){let[quot,part]=matches[n];part=rfc2616unquote(part),quot&&(part=unescape(part),n===0&&(part=rfc5987decode(part))),parts.push(part)}return parts.join("")}__name2(rfc2231getparam,"rfc2231getparam"),__name(rfc2231getparam,"rfc2231getparam");function rfc2616unquote(value){if(value.startsWith('"')){const parts=value.slice(1).split('\\"');for(let i=0;i<parts.length;++i){const quotindex=parts[i].indexOf('"');quotindex!==-1&&(parts[i]=parts[i].slice(0,quotindex),parts.length=i+1),parts[i]=parts[i].replace(/\\(.)/g,"$1")}value=parts.join('"')}return value}__name2(rfc2616unquote,"rfc2616unquote"),__name(rfc2616unquote,"rfc2616unquote");function rfc5987decode(extvalue){const encodingend=extvalue.indexOf("'");if(encodingend===-1)return extvalue;const encoding=extvalue.slice(0,encodingend),value=extvalue.slice(encodingend+1).replace(/^[^']*'/,"");return textdecode(encoding,value)}__name2(rfc5987decode,"rfc5987decode"),__name(rfc5987decode,"rfc5987decode");function rfc2047decode(value){return!value.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(value)?value:value.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(matches,charset,encoding,text){if(encoding==="q"||encoding==="Q")return text=text.replace(/_/g," "),text=text.replace(/=([0-9a-fA-F]{2})/g,function(match,hex){return String.fromCharCode(parseInt(hex,16))}),textdecode(charset,text);try{text=atob(text)}catch{}return textdecode(charset,text)})}return __name2(rfc2047decode,"rfc2047decode"),__name(rfc2047decode,"rfc2047decode"),""}__name2(getFilenameFromContentDispositionHeader,"getFilenameFromContentDispositionHeader"),__name(getFilenameFromContentDispositionHeader,"getFilenameFromContentDispositionHeader")},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PDFNetworkStream=void 0;var _util2=__w_pdfjs_require__2(1),_network_utils=__w_pdfjs_require__2(158);const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function getArrayBuffer(xhr){const data=xhr.response;return typeof data!="string"?data:(0,_util2.stringToBytes)(data).buffer}__name2(getArrayBuffer,"getArrayBuffer"),__name(getArrayBuffer,"getArrayBuffer");const _NetworkManager=class{static{__name2(this,"_NetworkManager")}constructor(url){let args=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=url,this.isHttp=/^https?:/i.test(url),this.httpHeaders=this.isHttp&&args.httpHeaders||Object.create(null),this.withCredentials=args.withCredentials||!1,this.getXhr=args.getXhr||__name(__name2(function(){return new XMLHttpRequest},"NetworkManager_getXhr"),"NetworkManager_getXhr"),this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(begin,end,listeners){const args={begin,end};for(const prop in listeners)args[prop]=listeners[prop];return this.request(args)}requestFull(listeners){return this.request(listeners)}request(args){const xhr=this.getXhr(),xhrId=this.currXhrId++,pendingRequest=this.pendingRequests[xhrId]={xhr};xhr.open("GET",this.url),xhr.withCredentials=this.withCredentials;for(const property in this.httpHeaders){const value=this.httpHeaders[property];typeof value>"u"||xhr.setRequestHeader(property,value)}return this.isHttp&&"begin"in args&&"end"in args?(xhr.setRequestHeader("Range",`bytes=${args.begin}-${args.end-1}`),pendingRequest.expectedStatus=PARTIAL_CONTENT_RESPONSE):pendingRequest.expectedStatus=OK_RESPONSE,xhr.responseType="arraybuffer",args.onError&&(xhr.onerror=function(evt){args.onError(xhr.status)}),xhr.onreadystatechange=this.onStateChange.bind(this,xhrId),xhr.onprogress=this.onProgress.bind(this,xhrId),pendingRequest.onHeadersReceived=args.onHeadersReceived,pendingRequest.onDone=args.onDone,pendingRequest.onError=args.onError,pendingRequest.onProgress=args.onProgress,xhr.send(null),xhrId}onProgress(xhrId,evt){var _pendingRequest$onPro;const pendingRequest=this.pendingRequests[xhrId];pendingRequest&&((_pendingRequest$onPro=pendingRequest.onProgress)===null||_pendingRequest$onPro===void 0||_pendingRequest$onPro.call(pendingRequest,evt))}onStateChange(xhrId,evt){const pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest)return;const xhr=pendingRequest.xhr;if(xhr.readyState>=2&&pendingRequest.onHeadersReceived&&(pendingRequest.onHeadersReceived(),delete pendingRequest.onHeadersReceived),xhr.readyState!==4||!(xhrId in this.pendingRequests))return;if(delete this.pendingRequests[xhrId],xhr.status===0&&this.isHttp){var _pendingRequest$onErr;(_pendingRequest$onErr=pendingRequest.onError)===null||_pendingRequest$onErr===void 0||_pendingRequest$onErr.call(pendingRequest,xhr.status);return}const xhrStatus=xhr.status||OK_RESPONSE;if(!(xhrStatus===OK_RESPONSE&&pendingRequest.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&xhrStatus!==pendingRequest.expectedStatus){var _pendingRequest$onErr2;(_pendingRequest$onErr2=pendingRequest.onError)===null||_pendingRequest$onErr2===void 0||_pendingRequest$onErr2.call(pendingRequest,xhr.status);return}const chunk=getArrayBuffer(xhr);if(xhrStatus===PARTIAL_CONTENT_RESPONSE){const rangeHeader=xhr.getResponseHeader("Content-Range"),matches=/bytes (\d+)-(\d+)\/(\d+)/.exec(rangeHeader);pendingRequest.onDone({begin:parseInt(matches[1],10),chunk})}else if(chunk)pendingRequest.onDone({begin:0,chunk});else{var _pendingRequest$onErr3;(_pendingRequest$onErr3=pendingRequest.onError)===null||_pendingRequest$onErr3===void 0||_pendingRequest$onErr3.call(pendingRequest,xhr.status)}}getRequestXhr(xhrId){return this.pendingRequests[xhrId].xhr}isPendingRequest(xhrId){return xhrId in this.pendingRequests}abortRequest(xhrId){const xhr=this.pendingRequests[xhrId].xhr;delete this.pendingRequests[xhrId],xhr.abort()}};__name(_NetworkManager,"NetworkManager");let NetworkManager=_NetworkManager;const _PDFNetworkStream=class{static{__name2(this,"_PDFNetworkStream")}constructor(source){this._source=source,this._manager=new NetworkManager(source.url,{httpHeaders:source.httpHeaders,withCredentials:source.withCredentials}),this._rangeChunkSize=source.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(reader){const i=this._rangeRequestReaders.indexOf(reader);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return(0,_util2.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(begin,end){const reader=new PDFNetworkStreamRangeRequestReader(this._manager,begin,end);return reader.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(reader),reader}cancelAllRequests(reason){var _this$_fullRequestRea;(_this$_fullRequestRea=this._fullRequestReader)===null||_this$_fullRequestRea===void 0||_this$_fullRequestRea.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}};__name(_PDFNetworkStream,"PDFNetworkStream");let PDFNetworkStream=_PDFNetworkStream;exports2.PDFNetworkStream=PDFNetworkStream;const _PDFNetworkStreamFullRequestReader=class{static{__name2(this,"_PDFNetworkStreamFullRequestReader")}constructor(manager,source){this._manager=manager;const args={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=source.url,this._fullRequestId=manager.requestFull(args),this._headersReceivedCapability=(0,_util2.createPromiseCapability)(),this._disableRange=source.disableRange||!1,this._contentLength=source.length,this._rangeChunkSize=source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const fullRequestXhrId=this._fullRequestId,fullRequestXhr=this._manager.getRequestXhr(fullRequestXhrId),getResponseHeader=__name(name=>fullRequestXhr.getResponseHeader(name),"getResponseHeader"),{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});allowRangeRequests&&(this._isRangeSupported=!0),this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),this._isRangeSupported&&this._manager.abortRequest(fullRequestXhrId),this._headersReceivedCapability.resolve()}_onDone(data){if(data&&(this._requests.length>0?this._requests.shift().resolve({value:data.chunk,done:!1}):this._cachedChunks.push(data.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url),this._headersReceivedCapability.reject(this._storedError);for(const requestCapability of this._requests)requestCapability.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(evt){var _this$onProgress;(_this$onProgress=this.onProgress)===null||_this$onProgress===void 0||_this$onProgress.call(this,{loaded:evt.loaded,total:evt.lengthComputable?evt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util2.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0,this._headersReceivedCapability.reject(reason);for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}};__name(_PDFNetworkStreamFullRequestReader,"PDFNetworkStreamFullRequestReader");let PDFNetworkStreamFullRequestReader=_PDFNetworkStreamFullRequestReader;const _PDFNetworkStreamRangeRequestReader=class{static{__name2(this,"_PDFNetworkStreamRangeRequestReader")}constructor(manager,begin,end){this._manager=manager;const args={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=manager.url,this._requestId=manager.requestRange(begin,end,args),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var _this$onClosed;(_this$onClosed=this.onClosed)===null||_this$onClosed===void 0||_this$onClosed.call(this,this)}_onDone(data){const chunk=data.chunk;this._requests.length>0?this._requests.shift().resolve({value:chunk,done:!1}):this._queuedChunk=chunk,this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url);for(const requestCapability of this._requests)requestCapability.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(evt){if(!this.isStreamingSupported){var _this$onProgress2;(_this$onProgress2=this.onProgress)===null||_this$onProgress2===void 0||_this$onProgress2.call(this,{loaded:evt.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const chunk=this._queuedChunk;return this._queuedChunk=null,{value:chunk,done:!1}}if(this._done)return{value:void 0,done:!0};const requestCapability=(0,_util2.createPromiseCapability)();return this._requests.push(requestCapability),requestCapability.promise}cancel(reason){this._done=!0;for(const requestCapability of this._requests)requestCapability.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}};__name(_PDFNetworkStreamRangeRequestReader,"PDFNetworkStreamRangeRequestReader");let PDFNetworkStreamRangeRequestReader=_PDFNetworkStreamRangeRequestReader},(__unused_webpack_module2,exports2,__w_pdfjs_require__2)=>{Object.defineProperty(exports2,"__esModule",{value:!0}),exports2.PDFFetchStream=void 0;var _util2=__w_pdfjs_require__2(1),_network_utils=__w_pdfjs_require__2(158);function createFetchOptions(headers,withCredentials,abortController){return{method:"GET",headers,signal:abortController.signal,mode:"cors",credentials:withCredentials?"include":"same-origin",redirect:"follow"}}__name2(createFetchOptions,"createFetchOptions"),__name(createFetchOptions,"createFetchOptions");function createHeaders(httpHeaders){const headers=new Headers;for(const property in httpHeaders){const value=httpHeaders[property];typeof value>"u"||headers.append(property,value)}return headers}__name2(createHeaders,"createHeaders"),__name(createHeaders,"createHeaders");const _PDFFetchStream=class{static{__name2(this,"_PDFFetchStream")}constructor(source){this.source=source,this.isHttp=/^https?:/i.test(source.url),this.httpHeaders=this.isHttp&&source.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _this$_fullRequestRea,_this$_fullRequestRea2;return(_this$_fullRequestRea=(_this$_fullRequestRea2=this._fullRequestReader)===null||_this$_fullRequestRea2===void 0?void 0:_this$_fullRequestRea2._loaded)!==null&&_this$_fullRequestRea!==void 0?_this$_fullRequestRea:0}getFullReader(){return(0,_util2.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(begin,end){if(end<=this._progressiveDataLength)return null;const reader=new PDFFetchStreamRangeReader(this,begin,end);return this._rangeRequestReaders.push(reader),reader}cancelAllRequests(reason){this._fullRequestReader&&this._fullRequestReader.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0))reader.cancel(reason)}};__name(_PDFFetchStream,"PDFFetchStream");let PDFFetchStream=_PDFFetchStream;exports2.PDFFetchStream=PDFFetchStream;const _PDFFetchStreamReader=class{static{__name2(this,"_PDFFetchStreamReader")}constructor(stream){this._stream=stream,this._reader=null,this._loaded=0,this._filename=null;const source=stream.source;this._withCredentials=source.withCredentials||!1,this._contentLength=source.length,this._headersCapability=(0,_util2.createPromiseCapability)(),this._disableRange=source.disableRange||!1,this._rangeChunkSize=source.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!source.disableStream,this._isRangeSupported=!source.disableRange,this._headers=createHeaders(this._stream.httpHeaders);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);this._reader=response.body.getReader(),this._headersCapability.resolve();const getResponseHeader=__name(name=>response.headers.get(name),"getResponseHeader"),{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests,this._contentLength=suggestedLength||this._contentLength,this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _util2.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value,done}=await this._reader.read();return done?{value,done}:(this._loaded+=value.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(value).buffer,done:!1})}cancel(reason){this._reader&&this._reader.cancel(reason),this._abortController.abort()}};__name(_PDFFetchStreamReader,"PDFFetchStreamReader");let PDFFetchStreamReader=_PDFFetchStreamReader;const _PDFFetchStreamRangeReader=class{static{__name2(this,"_PDFFetchStreamRangeReader")}constructor(stream,begin,end){this._stream=stream,this._reader=null,this._loaded=0;const source=stream.source;this._withCredentials=source.withCredentials||!1,this._readCapability=(0,_util2.createPromiseCapability)(),this._isStreamingSupported=!source.disableStream,this._abortController=new AbortController,this._headers=createHeaders(this._stream.httpHeaders),this._headers.append("Range",`bytes=${begin}-${end-1}`);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils.validateResponseStatus)(response.status))throw(0,_network_utils.createResponseStatusError)(response.status,url);this._readCapability.resolve(),this._reader=response.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value,done}=await this._reader.read();return done?{value,done}:(this._loaded+=value.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(value).buffer,done:!1})}cancel(reason){this._reader&&this._reader.cancel(reason),this._abortController.abort()}};__name(_PDFFetchStreamRangeReader,"PDFFetchStreamRangeReader");let PDFFetchStreamRangeReader=_PDFFetchStreamRangeReader}],__webpack_module_cache__={};function __w_pdfjs_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==void 0)return cachedModule.exports;var module2=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module2,module2.exports,__w_pdfjs_require__),module2.exports}__name2(__w_pdfjs_require__,"__w_pdfjs_require__"),__name(__w_pdfjs_require__,"__w_pdfjs_require__");var __webpack_exports__={};return(()=>{var exports2=__webpack_exports__;Object.defineProperty(exports2,"__esModule",{value:!0}),Object.defineProperty(exports2,"AnnotationEditorLayer",{enumerable:!0,get:function(){return _annotation_editor_layer.AnnotationEditorLayer}}),Object.defineProperty(exports2,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return _util2.AnnotationEditorParamsType}}),Object.defineProperty(exports2,"AnnotationEditorType",{enumerable:!0,get:function(){return _util2.AnnotationEditorType}}),Object.defineProperty(exports2,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return _tools.AnnotationEditorUIManager}}),Object.defineProperty(exports2,"AnnotationLayer",{enumerable:!0,get:function(){return _annotation_layer.AnnotationLayer}}),Object.defineProperty(exports2,"AnnotationMode",{enumerable:!0,get:function(){return _util2.AnnotationMode}}),Object.defineProperty(exports2,"CMapCompressionType",{enumerable:!0,get:function(){return _util2.CMapCompressionType}}),Object.defineProperty(exports2,"GlobalWorkerOptions",{enumerable:!0,get:function(){return _worker_options2.GlobalWorkerOptions}}),Object.defineProperty(exports2,"InvalidPDFException",{enumerable:!0,get:function(){return _util2.InvalidPDFException}}),Object.defineProperty(exports2,"LoopbackPort",{enumerable:!0,get:function(){return _api.LoopbackPort}}),Object.defineProperty(exports2,"MissingPDFException",{enumerable:!0,get:function(){return _util2.MissingPDFException}}),Object.defineProperty(exports2,"OPS",{enumerable:!0,get:function(){return _util2.OPS}}),Object.defineProperty(exports2,"PDFDataRangeTransport",{enumerable:!0,get:function(){return _api.PDFDataRangeTransport}}),Object.defineProperty(exports2,"PDFDateString",{enumerable:!0,get:function(){return _display_utils2.PDFDateString}}),Object.defineProperty(exports2,"PDFWorker",{enumerable:!0,get:function(){return _api.PDFWorker}}),Object.defineProperty(exports2,"PasswordResponses",{enumerable:!0,get:function(){return _util2.PasswordResponses}}),Object.defineProperty(exports2,"PermissionFlag",{enumerable:!0,get:function(){return _util2.PermissionFlag}}),Object.defineProperty(exports2,"PixelsPerInch",{enumerable:!0,get:function(){return _display_utils2.PixelsPerInch}}),Object.defineProperty(exports2,"RenderingCancelledException",{enumerable:!0,get:function(){return _display_utils2.RenderingCancelledException}}),Object.defineProperty(exports2,"SVGGraphics",{enumerable:!0,get:function(){return _svg.SVGGraphics}}),Object.defineProperty(exports2,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return _util2.UNSUPPORTED_FEATURES}}),Object.defineProperty(exports2,"UnexpectedResponseException",{enumerable:!0,get:function(){return _util2.UnexpectedResponseException}}),Object.defineProperty(exports2,"Util",{enumerable:!0,get:function(){return _util2.Util}}),Object.defineProperty(exports2,"VerbosityLevel",{enumerable:!0,get:function(){return _util2.VerbosityLevel}}),Object.defineProperty(exports2,"XfaLayer",{enumerable:!0,get:function(){return _xfa_layer.XfaLayer}}),Object.defineProperty(exports2,"build",{enumerable:!0,get:function(){return _api.build}}),Object.defineProperty(exports2,"createPromiseCapability",{enumerable:!0,get:function(){return _util2.createPromiseCapability}}),Object.defineProperty(exports2,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return _util2.createValidAbsoluteUrl}}),Object.defineProperty(exports2,"getDocument",{enumerable:!0,get:function(){return _api.getDocument}}),Object.defineProperty(exports2,"getFilenameFromUrl",{enumerable:!0,get:function(){return _display_utils2.getFilenameFromUrl}}),Object.defineProperty(exports2,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return _display_utils2.getPdfFilenameFromUrl}}),Object.defineProperty(exports2,"getXfaPageViewport",{enumerable:!0,get:function(){return _display_utils2.getXfaPageViewport}}),Object.defineProperty(exports2,"isPdfFile",{enumerable:!0,get:function(){return _display_utils2.isPdfFile}}),Object.defineProperty(exports2,"loadScript",{enumerable:!0,get:function(){return _display_utils2.loadScript}}),Object.defineProperty(exports2,"renderTextLayer",{enumerable:!0,get:function(){return _text_layer.renderTextLayer}}),Object.defineProperty(exports2,"shadow",{enumerable:!0,get:function(){return _util2.shadow}}),Object.defineProperty(exports2,"version",{enumerable:!0,get:function(){return _api.version}});var _util2=__w_pdfjs_require__(1),_api=__w_pdfjs_require__(129),_display_utils2=__w_pdfjs_require__(133),_annotation_editor_layer=__w_pdfjs_require__(147),_tools=__w_pdfjs_require__(132),_annotation_layer=__w_pdfjs_require__(152),_worker_options2=__w_pdfjs_require__(140),_is_node2=__w_pdfjs_require__(3),_text_layer=__w_pdfjs_require__(155),_svg=__w_pdfjs_require__(156),_xfa_layer=__w_pdfjs_require__(154);if(_is_node2.isNodeJS){const{PDFNodeStream}=__w_pdfjs_require__(157);(0,_api.setPDFNetworkStreamFactory)(params=>new PDFNodeStream(params))}else{const{PDFNetworkStream}=__w_pdfjs_require__(160),{PDFFetchStream}=__w_pdfjs_require__(161);(0,_api.setPDFNetworkStreamFactory)(params=>(0,_display_utils2.isValidFetchUrl)(params.url)?new PDFFetchStream(params):new PDFNetworkStream(params))}})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfjsWorker=""+new URL("assets/pdf.worker.entry-63eab9bd.js",import.meta.url).href;export{compare as a,pdfjsWorker as b,createCanvas as c,join as j,loadImage as l,pdfExports as p};
